var d0=Object.defineProperty;var p0=(u,n,s)=>n in u?d0(u,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):u[n]=s;var as=(u,n,s)=>p0(u,typeof n!="symbol"?n+"":n,s);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))f(d);new MutationObserver(d=>{for(const y of d)if(y.type==="childList")for(const _ of y.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&f(_)}).observe(document,{childList:!0,subtree:!0});function s(d){const y={};return d.integrity&&(y.integrity=d.integrity),d.referrerPolicy&&(y.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?y.credentials="include":d.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function f(d){if(d.ep)return;d.ep=!0;const y=s(d);fetch(d.href,y)}})();function getDefaultExportFromCjs(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var u=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(f,d,y){var _=null;if(y!==void 0&&(_=""+y),d.key!==void 0&&(_=""+d.key),"key"in d){y={};for(var A in d)A!=="key"&&(y[A]=d[A])}else y=d;return d=y.ref,{$$typeof:u,type:f,key:_,ref:d!==void 0?d:null,props:y}}return reactJsxRuntime_production.Fragment=n,reactJsxRuntime_production.jsx=s,reactJsxRuntime_production.jsxs=s,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var u=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),_=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),I=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),q=Symbol.iterator;function K(ge){return ge===null||typeof ge!="object"?null:(ge=q&&ge[q]||ge["@@iterator"],typeof ge=="function"?ge:null)}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ne=Object.assign,te={};function J(ge,De,ze){this.props=ge,this.context=De,this.refs=te,this.updater=ze||Q}J.prototype.isReactComponent={},J.prototype.setState=function(ge,De){if(typeof ge!="object"&&typeof ge!="function"&&ge!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ge,De,"setState")},J.prototype.forceUpdate=function(ge){this.updater.enqueueForceUpdate(this,ge,"forceUpdate")};function ie(){}ie.prototype=J.prototype;function re(ge,De,ze){this.props=ge,this.context=De,this.refs=te,this.updater=ze||Q}var le=re.prototype=new ie;le.constructor=re,ne(le,J.prototype),le.isPureReactComponent=!0;var fe=Array.isArray;function pe(){}var de={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function he(ge,De,ze){var He=ze.ref;return{$$typeof:u,type:ge,key:De,ref:He!==void 0?He:null,props:ze}}function Se(ge,De){return he(ge.type,De,ge.props)}function ve(ge){return typeof ge=="object"&&ge!==null&&ge.$$typeof===u}function Re(ge){var De={"=":"=0",":":"=2"};return"$"+ge.replace(/[=:]/g,function(ze){return De[ze]})}var Ee=/\/+/g;function Oe(ge,De){return typeof ge=="object"&&ge!==null&&ge.key!=null?Re(""+ge.key):De.toString(36)}function Ne(ge){switch(ge.status){case"fulfilled":return ge.value;case"rejected":throw ge.reason;default:switch(typeof ge.status=="string"?ge.then(pe,pe):(ge.status="pending",ge.then(function(De){ge.status==="pending"&&(ge.status="fulfilled",ge.value=De)},function(De){ge.status==="pending"&&(ge.status="rejected",ge.reason=De)})),ge.status){case"fulfilled":return ge.value;case"rejected":throw ge.reason}}throw ge}function ye(ge,De,ze,He,yt){var Ge=typeof ge;(Ge==="undefined"||Ge==="boolean")&&(ge=null);var lt=!1;if(ge===null)lt=!0;else switch(Ge){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(ge.$$typeof){case u:case n:lt=!0;break;case G:return lt=ge._init,ye(lt(ge._payload),De,ze,He,yt)}}if(lt)return yt=yt(ge),lt=He===""?"."+Oe(ge,0):He,fe(yt)?(ze="",lt!=null&&(ze=lt.replace(Ee,"$&/")+"/"),ye(yt,De,ze,"",function(Fn){return Fn})):yt!=null&&(ve(yt)&&(yt=Se(yt,ze+(yt.key==null||ge&&ge.key===yt.key?"":(""+yt.key).replace(Ee,"$&/")+"/")+lt)),De.push(yt)),1;lt=0;var Mt=He===""?".":He+":";if(fe(ge))for(var hn=0;hn<ge.length;hn++)He=ge[hn],Ge=Mt+Oe(He,hn),lt+=ye(He,De,ze,Ge,yt);else if(hn=K(ge),typeof hn=="function")for(ge=hn.call(ge),hn=0;!(He=ge.next()).done;)He=He.value,Ge=Mt+Oe(He,hn++),lt+=ye(He,De,ze,Ge,yt);else if(Ge==="object"){if(typeof ge.then=="function")return ye(Ne(ge),De,ze,He,yt);throw De=String(ge),Error("Objects are not valid as a React child (found: "+(De==="[object Object]"?"object with keys {"+Object.keys(ge).join(", ")+"}":De)+"). If you meant to render a collection of children, use an array instead.")}return lt}function Ae(ge,De,ze){if(ge==null)return ge;var He=[],yt=0;return ye(ge,He,"","",function(Ge){return De.call(ze,Ge,yt++)}),He}function _e(ge){if(ge._status===-1){var De=ge._result;De=De(),De.then(function(ze){(ge._status===0||ge._status===-1)&&(ge._status=1,ge._result=ze)},function(ze){(ge._status===0||ge._status===-1)&&(ge._status=2,ge._result=ze)}),ge._status===-1&&(ge._status=0,ge._result=De)}if(ge._status===1)return ge._result.default;throw ge._result}var Te=typeof reportError=="function"?reportError:function(ge){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var De=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ge=="object"&&ge!==null&&typeof ge.message=="string"?String(ge.message):String(ge),error:ge});if(!window.dispatchEvent(De))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ge);return}console.error(ge)},we={map:Ae,forEach:function(ge,De,ze){Ae(ge,function(){De.apply(this,arguments)},ze)},count:function(ge){var De=0;return Ae(ge,function(){De++}),De},toArray:function(ge){return Ae(ge,function(De){return De})||[]},only:function(ge){if(!ve(ge))throw Error("React.Children.only expected to receive a single React element child.");return ge}};return react_production.Activity=Y,react_production.Children=we,react_production.Component=J,react_production.Fragment=s,react_production.Profiler=d,react_production.PureComponent=re,react_production.StrictMode=f,react_production.Suspense=R,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=de,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(ge){return de.H.useMemoCache(ge)}},react_production.cache=function(ge){return function(){return ge.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(ge,De,ze){if(ge==null)throw Error("The argument must be a React element, but you passed "+ge+".");var He=ne({},ge.props),yt=ge.key;if(De!=null)for(Ge in De.key!==void 0&&(yt=""+De.key),De)!se.call(De,Ge)||Ge==="key"||Ge==="__self"||Ge==="__source"||Ge==="ref"&&De.ref===void 0||(He[Ge]=De[Ge]);var Ge=arguments.length-2;if(Ge===1)He.children=ze;else if(1<Ge){for(var lt=Array(Ge),Mt=0;Mt<Ge;Mt++)lt[Mt]=arguments[Mt+2];He.children=lt}return he(ge.type,yt,He)},react_production.createContext=function(ge){return ge={$$typeof:_,_currentValue:ge,_currentValue2:ge,_threadCount:0,Provider:null,Consumer:null},ge.Provider=ge,ge.Consumer={$$typeof:y,_context:ge},ge},react_production.createElement=function(ge,De,ze){var He,yt={},Ge=null;if(De!=null)for(He in De.key!==void 0&&(Ge=""+De.key),De)se.call(De,He)&&He!=="key"&&He!=="__self"&&He!=="__source"&&(yt[He]=De[He]);var lt=arguments.length-2;if(lt===1)yt.children=ze;else if(1<lt){for(var Mt=Array(lt),hn=0;hn<lt;hn++)Mt[hn]=arguments[hn+2];yt.children=Mt}if(ge&&ge.defaultProps)for(He in lt=ge.defaultProps,lt)yt[He]===void 0&&(yt[He]=lt[He]);return he(ge,Ge,yt)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(ge){return{$$typeof:A,render:ge}},react_production.isValidElement=ve,react_production.lazy=function(ge){return{$$typeof:G,_payload:{_status:-1,_result:ge},_init:_e}},react_production.memo=function(ge,De){return{$$typeof:I,type:ge,compare:De===void 0?null:De}},react_production.startTransition=function(ge){var De=de.T,ze={};de.T=ze;try{var He=ge(),yt=de.S;yt!==null&&yt(ze,He),typeof He=="object"&&He!==null&&typeof He.then=="function"&&He.then(pe,Te)}catch(Ge){Te(Ge)}finally{De!==null&&ze.types!==null&&(De.types=ze.types),de.T=De}},react_production.unstable_useCacheRefresh=function(){return de.H.useCacheRefresh()},react_production.use=function(ge){return de.H.use(ge)},react_production.useActionState=function(ge,De,ze){return de.H.useActionState(ge,De,ze)},react_production.useCallback=function(ge,De){return de.H.useCallback(ge,De)},react_production.useContext=function(ge){return de.H.useContext(ge)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(ge,De){return de.H.useDeferredValue(ge,De)},react_production.useEffect=function(ge,De){return de.H.useEffect(ge,De)},react_production.useEffectEvent=function(ge){return de.H.useEffectEvent(ge)},react_production.useId=function(){return de.H.useId()},react_production.useImperativeHandle=function(ge,De,ze){return de.H.useImperativeHandle(ge,De,ze)},react_production.useInsertionEffect=function(ge,De){return de.H.useInsertionEffect(ge,De)},react_production.useLayoutEffect=function(ge,De){return de.H.useLayoutEffect(ge,De)},react_production.useMemo=function(ge,De){return de.H.useMemo(ge,De)},react_production.useOptimistic=function(ge,De){return de.H.useOptimistic(ge,De)},react_production.useReducer=function(ge,De,ze){return de.H.useReducer(ge,De,ze)},react_production.useRef=function(ge){return de.H.useRef(ge)},react_production.useState=function(ge){return de.H.useState(ge)},react_production.useSyncExternalStore=function(ge,De,ze){return de.H.useSyncExternalStore(ge,De,ze)},react_production.useTransition=function(){return de.H.useTransition()},react_production.version="19.2.4",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(u){function n(ye,Ae){var _e=ye.length;ye.push(Ae);e:for(;0<_e;){var Te=_e-1>>>1,we=ye[Te];if(0<d(we,Ae))ye[Te]=Ae,ye[_e]=we,_e=Te;else break e}}function s(ye){return ye.length===0?null:ye[0]}function f(ye){if(ye.length===0)return null;var Ae=ye[0],_e=ye.pop();if(_e!==Ae){ye[0]=_e;e:for(var Te=0,we=ye.length,ge=we>>>1;Te<ge;){var De=2*(Te+1)-1,ze=ye[De],He=De+1,yt=ye[He];if(0>d(ze,_e))He<we&&0>d(yt,ze)?(ye[Te]=yt,ye[He]=_e,Te=He):(ye[Te]=ze,ye[De]=_e,Te=De);else if(He<we&&0>d(yt,_e))ye[Te]=yt,ye[He]=_e,Te=He;else break e}}return Ae}function d(ye,Ae){var _e=ye.sortIndex-Ae.sortIndex;return _e!==0?_e:ye.id-Ae.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var y=performance;u.unstable_now=function(){return y.now()}}else{var _=Date,A=_.now();u.unstable_now=function(){return _.now()-A}}var R=[],I=[],G=1,Y=null,q=3,K=!1,Q=!1,ne=!1,te=!1,J=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function le(ye){for(var Ae=s(I);Ae!==null;){if(Ae.callback===null)f(I);else if(Ae.startTime<=ye)f(I),Ae.sortIndex=Ae.expirationTime,n(R,Ae);else break;Ae=s(I)}}function fe(ye){if(ne=!1,le(ye),!Q)if(s(R)!==null)Q=!0,pe||(pe=!0,Re());else{var Ae=s(I);Ae!==null&&Ne(fe,Ae.startTime-ye)}}var pe=!1,de=-1,se=5,he=-1;function Se(){return te?!0:!(u.unstable_now()-he<se)}function ve(){if(te=!1,pe){var ye=u.unstable_now();he=ye;var Ae=!0;try{e:{Q=!1,ne&&(ne=!1,ie(de),de=-1),K=!0;var _e=q;try{t:{for(le(ye),Y=s(R);Y!==null&&!(Y.expirationTime>ye&&Se());){var Te=Y.callback;if(typeof Te=="function"){Y.callback=null,q=Y.priorityLevel;var we=Te(Y.expirationTime<=ye);if(ye=u.unstable_now(),typeof we=="function"){Y.callback=we,le(ye),Ae=!0;break t}Y===s(R)&&f(R),le(ye)}else f(R);Y=s(R)}if(Y!==null)Ae=!0;else{var ge=s(I);ge!==null&&Ne(fe,ge.startTime-ye),Ae=!1}}break e}finally{Y=null,q=_e,K=!1}Ae=void 0}}finally{Ae?Re():pe=!1}}}var Re;if(typeof re=="function")Re=function(){re(ve)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,Oe=Ee.port2;Ee.port1.onmessage=ve,Re=function(){Oe.postMessage(null)}}else Re=function(){J(ve,0)};function Ne(ye,Ae){de=J(function(){ye(u.unstable_now())},Ae)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(ye){ye.callback=null},u.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<ye?Math.floor(1e3/ye):5},u.unstable_getCurrentPriorityLevel=function(){return q},u.unstable_next=function(ye){switch(q){case 1:case 2:case 3:var Ae=3;break;default:Ae=q}var _e=q;q=Ae;try{return ye()}finally{q=_e}},u.unstable_requestPaint=function(){te=!0},u.unstable_runWithPriority=function(ye,Ae){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var _e=q;q=ye;try{return Ae()}finally{q=_e}},u.unstable_scheduleCallback=function(ye,Ae,_e){var Te=u.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Te+_e:Te):_e=Te,ye){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=_e+we,ye={id:G++,callback:Ae,priorityLevel:ye,startTime:_e,expirationTime:we,sortIndex:-1},_e>Te?(ye.sortIndex=_e,n(I,ye),s(R)===null&&ye===s(I)&&(ne?(ie(de),de=-1):ne=!0,Ne(fe,_e-Te))):(ye.sortIndex=we,n(R,ye),Q||K||(Q=!0,pe||(pe=!0,Re()))),ye},u.unstable_shouldYield=Se,u.unstable_wrapCallback=function(ye){var Ae=q;return function(){var _e=q;q=Ae;try{return ye.apply(this,arguments)}finally{q=_e}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var u=requireReact();function n(R){var I="https://react.dev/errors/"+R;if(1<arguments.length){I+="?args[]="+encodeURIComponent(arguments[1]);for(var G=2;G<arguments.length;G++)I+="&args[]="+encodeURIComponent(arguments[G])}return"Minified React error #"+R+"; visit "+I+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var f={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},d=Symbol.for("react.portal");function y(R,I,G){var Y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:Y==null?null:""+Y,children:R,containerInfo:I,implementation:G}}var _=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function A(R,I){if(R==="font")return"";if(typeof I=="string")return I==="use-credentials"?I:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=f,reactDom_production.createPortal=function(R,I){var G=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!I||I.nodeType!==1&&I.nodeType!==9&&I.nodeType!==11)throw Error(n(299));return y(R,I,null,G)},reactDom_production.flushSync=function(R){var I=_.T,G=f.p;try{if(_.T=null,f.p=2,R)return R()}finally{_.T=I,f.p=G,f.d.f()}},reactDom_production.preconnect=function(R,I){typeof R=="string"&&(I?(I=I.crossOrigin,I=typeof I=="string"?I==="use-credentials"?I:"":void 0):I=null,f.d.C(R,I))},reactDom_production.prefetchDNS=function(R){typeof R=="string"&&f.d.D(R)},reactDom_production.preinit=function(R,I){if(typeof R=="string"&&I&&typeof I.as=="string"){var G=I.as,Y=A(G,I.crossOrigin),q=typeof I.integrity=="string"?I.integrity:void 0,K=typeof I.fetchPriority=="string"?I.fetchPriority:void 0;G==="style"?f.d.S(R,typeof I.precedence=="string"?I.precedence:void 0,{crossOrigin:Y,integrity:q,fetchPriority:K}):G==="script"&&f.d.X(R,{crossOrigin:Y,integrity:q,fetchPriority:K,nonce:typeof I.nonce=="string"?I.nonce:void 0})}},reactDom_production.preinitModule=function(R,I){if(typeof R=="string")if(typeof I=="object"&&I!==null){if(I.as==null||I.as==="script"){var G=A(I.as,I.crossOrigin);f.d.M(R,{crossOrigin:G,integrity:typeof I.integrity=="string"?I.integrity:void 0,nonce:typeof I.nonce=="string"?I.nonce:void 0})}}else I==null&&f.d.M(R)},reactDom_production.preload=function(R,I){if(typeof R=="string"&&typeof I=="object"&&I!==null&&typeof I.as=="string"){var G=I.as,Y=A(G,I.crossOrigin);f.d.L(R,G,{crossOrigin:Y,integrity:typeof I.integrity=="string"?I.integrity:void 0,nonce:typeof I.nonce=="string"?I.nonce:void 0,type:typeof I.type=="string"?I.type:void 0,fetchPriority:typeof I.fetchPriority=="string"?I.fetchPriority:void 0,referrerPolicy:typeof I.referrerPolicy=="string"?I.referrerPolicy:void 0,imageSrcSet:typeof I.imageSrcSet=="string"?I.imageSrcSet:void 0,imageSizes:typeof I.imageSizes=="string"?I.imageSizes:void 0,media:typeof I.media=="string"?I.media:void 0})}},reactDom_production.preloadModule=function(R,I){if(typeof R=="string")if(I){var G=A(I.as,I.crossOrigin);f.d.m(R,{as:typeof I.as=="string"&&I.as!=="script"?I.as:void 0,crossOrigin:G,integrity:typeof I.integrity=="string"?I.integrity:void 0})}else f.d.m(R)},reactDom_production.requestFormReset=function(R){f.d.r(R)},reactDom_production.unstable_batchedUpdates=function(R,I){return R(I)},reactDom_production.useFormState=function(R,I,G){return _.H.useFormState(R,I,G)},reactDom_production.useFormStatus=function(){return _.H.useHostTransitionStatus()},reactDom_production.version="19.2.4",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(n){console.error(n)}}return u(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var u=requireScheduler(),n=requireReact(),s=requireReactDom();function f(T){var P="https://react.dev/errors/"+T;if(1<arguments.length){P+="?args[]="+encodeURIComponent(arguments[1]);for(var H=2;H<arguments.length;H++)P+="&args[]="+encodeURIComponent(arguments[H])}return"Minified React error #"+T+"; visit "+P+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(T){return!(!T||T.nodeType!==1&&T.nodeType!==9&&T.nodeType!==11)}function y(T){var P=T,H=T;if(T.alternate)for(;P.return;)P=P.return;else{T=P;do P=T,(P.flags&4098)!==0&&(H=P.return),T=P.return;while(T)}return P.tag===3?H:null}function _(T){if(T.tag===13){var P=T.memoizedState;if(P===null&&(T=T.alternate,T!==null&&(P=T.memoizedState)),P!==null)return P.dehydrated}return null}function A(T){if(T.tag===31){var P=T.memoizedState;if(P===null&&(T=T.alternate,T!==null&&(P=T.memoizedState)),P!==null)return P.dehydrated}return null}function R(T){if(y(T)!==T)throw Error(f(188))}function I(T){var P=T.alternate;if(!P){if(P=y(T),P===null)throw Error(f(188));return P!==T?null:T}for(var H=T,Z=P;;){var ce=H.return;if(ce===null)break;var ue=ce.alternate;if(ue===null){if(Z=ce.return,Z!==null){H=Z;continue}break}if(ce.child===ue.child){for(ue=ce.child;ue;){if(ue===H)return R(ce),T;if(ue===Z)return R(ce),P;ue=ue.sibling}throw Error(f(188))}if(H.return!==Z.return)H=ce,Z=ue;else{for(var Me=!1,Le=ce.child;Le;){if(Le===H){Me=!0,H=ce,Z=ue;break}if(Le===Z){Me=!0,Z=ce,H=ue;break}Le=Le.sibling}if(!Me){for(Le=ue.child;Le;){if(Le===H){Me=!0,H=ue,Z=ce;break}if(Le===Z){Me=!0,Z=ue,H=ce;break}Le=Le.sibling}if(!Me)throw Error(f(189))}}if(H.alternate!==Z)throw Error(f(190))}if(H.tag!==3)throw Error(f(188));return H.stateNode.current===H?T:P}function G(T){var P=T.tag;if(P===5||P===26||P===27||P===6)return T;for(T=T.child;T!==null;){if(P=G(T),P!==null)return P;T=T.sibling}return null}var Y=Object.assign,q=Symbol.for("react.element"),K=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),re=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),he=Symbol.for("react.activity"),Se=Symbol.for("react.memo_cache_sentinel"),ve=Symbol.iterator;function Re(T){return T===null||typeof T!="object"?null:(T=ve&&T[ve]||T["@@iterator"],typeof T=="function"?T:null)}var Ee=Symbol.for("react.client.reference");function Oe(T){if(T==null)return null;if(typeof T=="function")return T.$$typeof===Ee?null:T.displayName||T.name||null;if(typeof T=="string")return T;switch(T){case ne:return"Fragment";case J:return"Profiler";case te:return"StrictMode";case fe:return"Suspense";case pe:return"SuspenseList";case he:return"Activity"}if(typeof T=="object")switch(T.$$typeof){case Q:return"Portal";case re:return T.displayName||"Context";case ie:return(T._context.displayName||"Context")+".Consumer";case le:var P=T.render;return T=T.displayName,T||(T=P.displayName||P.name||"",T=T!==""?"ForwardRef("+T+")":"ForwardRef"),T;case de:return P=T.displayName||null,P!==null?P:Oe(T.type)||"Memo";case se:P=T._payload,T=T._init;try{return Oe(T(P))}catch{}}return null}var Ne=Array.isArray,ye=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Te=[],we=-1;function ge(T){return{current:T}}function De(T){0>we||(T.current=Te[we],Te[we]=null,we--)}function ze(T,P){we++,Te[we]=T.current,T.current=P}var He=ge(null),yt=ge(null),Ge=ge(null),lt=ge(null);function Mt(T,P){switch(ze(Ge,P),ze(yt,T),ze(He,null),P.nodeType){case 9:case 11:T=(T=P.documentElement)&&(T=T.namespaceURI)?Zp(T):0;break;default:if(T=P.tagName,P=P.namespaceURI)P=Zp(P),T=Qp(P,T);else switch(T){case"svg":T=1;break;case"math":T=2;break;default:T=0}}De(He),ze(He,T)}function hn(){De(He),De(yt),De(Ge)}function Fn(T){T.memoizedState!==null&&ze(lt,T);var P=He.current,H=Qp(P,T.type);P!==H&&(ze(yt,T),ze(He,H))}function Vn(T){yt.current===T&&(De(He),De(yt)),lt.current===T&&(De(lt),Bf._currentValue=_e)}var ni,In;function qe(T){if(ni===void 0)try{throw Error()}catch(H){var P=H.stack.trim().match(/\n( *(at )?)/);ni=P&&P[1]||"",In=-1<H.stack.indexOf(`
    at`)?" (<anonymous>)":-1<H.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ni+T+In}var vn=!1;function dn(T,P){if(!T||vn)return"";vn=!0;var H=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var Z={DetermineComponentFrameRoot:function(){try{if(P){var Cn=function(){throw Error()};if(Object.defineProperty(Cn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Cn,[])}catch(xn){var on=xn}Reflect.construct(T,[],Cn)}else{try{Cn.call()}catch(xn){on=xn}T.call(Cn.prototype)}}else{try{throw Error()}catch(xn){on=xn}(Cn=T())&&typeof Cn.catch=="function"&&Cn.catch(function(){})}}catch(xn){if(xn&&on&&typeof xn.stack=="string")return[xn.stack,on.stack]}return[null,null]}};Z.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var ce=Object.getOwnPropertyDescriptor(Z.DetermineComponentFrameRoot,"name");ce&&ce.configurable&&Object.defineProperty(Z.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ue=Z.DetermineComponentFrameRoot(),Me=ue[0],Le=ue[1];if(Me&&Le){var $e=Me.split(`
`),qt=Le.split(`
`);for(ce=Z=0;Z<$e.length&&!$e[Z].includes("DetermineComponentFrameRoot");)Z++;for(;ce<qt.length&&!qt[ce].includes("DetermineComponentFrameRoot");)ce++;if(Z===$e.length||ce===qt.length)for(Z=$e.length-1,ce=qt.length-1;1<=Z&&0<=ce&&$e[Z]!==qt[ce];)ce--;for(;1<=Z&&0<=ce;Z--,ce--)if($e[Z]!==qt[ce]){if(Z!==1||ce!==1)do if(Z--,ce--,0>ce||$e[Z]!==qt[ce]){var Sn=`
`+$e[Z].replace(" at new "," at ");return T.displayName&&Sn.includes("<anonymous>")&&(Sn=Sn.replace("<anonymous>",T.displayName)),Sn}while(1<=Z&&0<=ce);break}}}finally{vn=!1,Error.prepareStackTrace=H}return(H=T?T.displayName||T.name:"")?qe(H):""}function Mn(T,P){switch(T.tag){case 26:case 27:case 5:return qe(T.type);case 16:return qe("Lazy");case 13:return T.child!==P&&P!==null?qe("Suspense Fallback"):qe("Suspense");case 19:return qe("SuspenseList");case 0:case 15:return dn(T.type,!1);case 11:return dn(T.type.render,!1);case 1:return dn(T.type,!0);case 31:return qe("Activity");default:return""}}function je(T){try{var P="",H=null;do P+=Mn(T,H),H=T,T=T.return;while(T);return P}catch(Z){return`
Error generating stack: `+Z.message+`
`+Z.stack}}var qn=Object.prototype.hasOwnProperty,An=u.unstable_scheduleCallback,ri=u.unstable_cancelCallback,On=u.unstable_shouldYield,Be=u.unstable_requestPaint,Pe=u.unstable_now,Ke=u.unstable_getCurrentPriorityLevel,Ft=u.unstable_ImmediatePriority,bn=u.unstable_UserBlockingPriority,ln=u.unstable_NormalPriority,Zn=u.unstable_LowPriority,Gn=u.unstable_IdlePriority,fi=u.log,xi=u.unstable_setDisableYieldValue,wn=null,Tn=null;function oi(T){if(typeof fi=="function"&&xi(T),Tn&&typeof Tn.setStrictMode=="function")try{Tn.setStrictMode(wn,T)}catch{}}var Jn=Math.clz32?Math.clz32:dt,ei=Math.log,gi=Math.LN2;function dt(T){return T>>>=0,T===0?32:31-(ei(T)/gi|0)|0}var kt=256,Hn=262144,Kn=4194304;function Bn(T){var P=T&42;if(P!==0)return P;switch(T&-T){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return T&261888;case 262144:case 524288:case 1048576:case 2097152:return T&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return T&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return T}}function pn(T,P,H){var Z=T.pendingLanes;if(Z===0)return 0;var ce=0,ue=T.suspendedLanes,Me=T.pingedLanes;T=T.warmLanes;var Le=Z&134217727;return Le!==0?(Z=Le&~ue,Z!==0?ce=Bn(Z):(Me&=Le,Me!==0?ce=Bn(Me):H||(H=Le&~T,H!==0&&(ce=Bn(H))))):(Le=Z&~ue,Le!==0?ce=Bn(Le):Me!==0?ce=Bn(Me):H||(H=Z&~T,H!==0&&(ce=Bn(H)))),ce===0?0:P!==0&&P!==ce&&(P&ue)===0&&(ue=ce&-ce,H=P&-P,ue>=H||ue===32&&(H&4194048)!==0)?P:ce}function ci(T,P){return(T.pendingLanes&~(T.suspendedLanes&~T.pingedLanes)&P)===0}function Ai(T,P){switch(T){case 1:case 2:case 4:case 8:case 64:return P+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return P+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ji(){var T=Kn;return Kn<<=1,(Kn&62914560)===0&&(Kn=4194304),T}function Ii(T){for(var P=[],H=0;31>H;H++)P.push(T);return P}function Jr(T,P){T.pendingLanes|=P,P!==268435456&&(T.suspendedLanes=0,T.pingedLanes=0,T.warmLanes=0)}function fs(T,P,H,Z,ce,ue){var Me=T.pendingLanes;T.pendingLanes=H,T.suspendedLanes=0,T.pingedLanes=0,T.warmLanes=0,T.expiredLanes&=H,T.entangledLanes&=H,T.errorRecoveryDisabledLanes&=H,T.shellSuspendCounter=0;var Le=T.entanglements,$e=T.expirationTimes,qt=T.hiddenUpdates;for(H=Me&~H;0<H;){var Sn=31-Jn(H),Cn=1<<Sn;Le[Sn]=0,$e[Sn]=-1;var on=qt[Sn];if(on!==null)for(qt[Sn]=null,Sn=0;Sn<on.length;Sn++){var xn=on[Sn];xn!==null&&(xn.lane&=-536870913)}H&=~Cn}Z!==0&&As(T,Z,0),ue!==0&&ce===0&&T.tag!==0&&(T.suspendedLanes|=ue&~(Me&~P))}function As(T,P,H){T.pendingLanes|=P,T.suspendedLanes&=~P;var Z=31-Jn(P);T.entangledLanes|=P,T.entanglements[Z]=T.entanglements[Z]|1073741824|H&261930}function Hs(T,P){var H=T.entangledLanes|=P;for(T=T.entanglements;H;){var Z=31-Jn(H),ce=1<<Z;ce&P|T[Z]&P&&(T[Z]|=P),H&=~ce}}function na(T,P){var H=P&-P;return H=(H&42)!==0?1:Is(H),(H&(T.suspendedLanes|P))!==0?0:H}function Is(T){switch(T){case 2:T=1;break;case 8:T=4;break;case 32:T=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:T=128;break;case 268435456:T=134217728;break;default:T=0}return T}function $r(T){return T&=-T,2<T?8<T?(T&134217727)!==0?32:268435456:8:2}function es(){var T=Ae.p;return T!==0?T:(T=window.event,T===void 0?32:Em(T.type))}function bi(T,P){var H=Ae.p;try{return Ae.p=T,P()}finally{Ae.p=H}}var ds=Math.random().toString(36).slice(2),pr="__reactFiber$"+ds,Ie="__reactProps$"+ds,Fe="__reactContainer$"+ds,We="__reactEvents$"+ds,Nt="__reactListeners$"+ds,mn="__reactHandles$"+ds,yn="__reactResources$"+ds,jn="__reactMarker$"+ds;function Dn(T){delete T[pr],delete T[Ie],delete T[We],delete T[Nt],delete T[mn]}function Yn(T){var P=T[pr];if(P)return P;for(var H=T.parentNode;H;){if(P=H[Fe]||H[pr]){if(H=P.alternate,P.child!==null||H!==null&&H.child!==null)for(T=am(T);T!==null;){if(H=T[pr])return H;T=am(T)}return P}T=H,H=T.parentNode}return null}function $n(T){if(T=T[pr]||T[Fe]){var P=T.tag;if(P===5||P===6||P===13||P===31||P===26||P===27||P===3)return T}return null}function Xn(T){var P=T.tag;if(P===5||P===26||P===27||P===6)return T.stateNode;throw Error(f(33))}function ke(T){var P=T[yn];return P||(P=T[yn]={hoistableStyles:new Map,hoistableScripts:new Map}),P}function Xe(T){T[jn]=!0}var Qe=new Set,Ze={};function Je(T,P){En(T,P),En(T+"Capture",P)}function En(T,P){for(Ze[T]=P,T=0;T<P.length;T++)Qe.add(P[T])}var Pn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kn={},Nn={};function ai(T){return qn.call(Nn,T)?!0:qn.call(kn,T)?!1:Pn.test(T)?Nn[T]=!0:(kn[T]=!0,!1)}function li(T,P,H){if(ai(P))if(H===null)T.removeAttribute(P);else{switch(typeof H){case"undefined":case"function":case"symbol":T.removeAttribute(P);return;case"boolean":var Z=P.toLowerCase().slice(0,5);if(Z!=="data-"&&Z!=="aria-"){T.removeAttribute(P);return}}T.setAttribute(P,""+H)}}function mi(T,P,H){if(H===null)T.removeAttribute(P);else{switch(typeof H){case"undefined":case"function":case"symbol":case"boolean":T.removeAttribute(P);return}T.setAttribute(P,""+H)}}function zn(T,P,H,Z){if(Z===null)T.removeAttribute(H);else{switch(typeof Z){case"undefined":case"function":case"symbol":case"boolean":T.removeAttribute(H);return}T.setAttributeNS(P,H,""+Z)}}function di(T){switch(typeof T){case"bigint":case"boolean":case"number":case"string":case"undefined":return T;case"object":return T;default:return""}}function Vi(T){var P=T.type;return(T=T.nodeName)&&T.toLowerCase()==="input"&&(P==="checkbox"||P==="radio")}function Xi(T,P,H){var Z=Object.getOwnPropertyDescriptor(T.constructor.prototype,P);if(!T.hasOwnProperty(P)&&typeof Z<"u"&&typeof Z.get=="function"&&typeof Z.set=="function"){var ce=Z.get,ue=Z.set;return Object.defineProperty(T,P,{configurable:!0,get:function(){return ce.call(this)},set:function(Me){H=""+Me,ue.call(this,Me)}}),Object.defineProperty(T,P,{enumerable:Z.enumerable}),{getValue:function(){return H},setValue:function(Me){H=""+Me},stopTracking:function(){T._valueTracker=null,delete T[P]}}}}function ui(T){if(!T._valueTracker){var P=Vi(T)?"checked":"value";T._valueTracker=Xi(T,P,""+T[P])}}function pi(T){if(!T)return!1;var P=T._valueTracker;if(!P)return!0;var H=P.getValue(),Z="";return T&&(Z=Vi(T)?T.checked?"true":"false":T.value),T=Z,T!==H?(P.setValue(T),!0):!1}function Ln(T){if(T=T||(typeof document<"u"?document:void 0),typeof T>"u")return null;try{return T.activeElement||T.body}catch{return T.body}}var wi=/[\n"\\]/g;function si(T){return T.replace(wi,function(P){return"\\"+P.charCodeAt(0).toString(16)+" "})}function tr(T,P,H,Z,ce,ue,Me,Le){T.name="",Me!=null&&typeof Me!="function"&&typeof Me!="symbol"&&typeof Me!="boolean"?T.type=Me:T.removeAttribute("type"),P!=null?Me==="number"?(P===0&&T.value===""||T.value!=P)&&(T.value=""+di(P)):T.value!==""+di(P)&&(T.value=""+di(P)):Me!=="submit"&&Me!=="reset"||T.removeAttribute("value"),P!=null?Zi(T,Me,di(P)):H!=null?Zi(T,Me,di(H)):Z!=null&&T.removeAttribute("value"),ce==null&&ue!=null&&(T.defaultChecked=!!ue),ce!=null&&(T.checked=ce&&typeof ce!="function"&&typeof ce!="symbol"),Le!=null&&typeof Le!="function"&&typeof Le!="symbol"&&typeof Le!="boolean"?T.name=""+di(Le):T.removeAttribute("name")}function Ar(T,P,H,Z,ce,ue,Me,Le){if(ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(T.type=ue),P!=null||H!=null){if(!(ue!=="submit"&&ue!=="reset"||P!=null)){ui(T);return}H=H!=null?""+di(H):"",P=P!=null?""+di(P):H,Le||P===T.value||(T.value=P),T.defaultValue=P}Z=Z??ce,Z=typeof Z!="function"&&typeof Z!="symbol"&&!!Z,T.checked=Le?T.checked:!!Z,T.defaultChecked=!!Z,Me!=null&&typeof Me!="function"&&typeof Me!="symbol"&&typeof Me!="boolean"&&(T.name=Me),ui(T)}function Zi(T,P,H){P==="number"&&Ln(T.ownerDocument)===T||T.defaultValue===""+H||(T.defaultValue=""+H)}function xr(T,P,H,Z){if(T=T.options,P){P={};for(var ce=0;ce<H.length;ce++)P["$"+H[ce]]=!0;for(H=0;H<T.length;H++)ce=P.hasOwnProperty("$"+T[H].value),T[H].selected!==ce&&(T[H].selected=ce),ce&&Z&&(T[H].defaultSelected=!0)}else{for(H=""+di(H),P=null,ce=0;ce<T.length;ce++){if(T[ce].value===H){T[ce].selected=!0,Z&&(T[ce].defaultSelected=!0);return}P!==null||T[ce].disabled||(P=T[ce])}P!==null&&(P.selected=!0)}}function nr(T,P,H){if(P!=null&&(P=""+di(P),P!==T.value&&(T.value=P),H==null)){T.defaultValue!==P&&(T.defaultValue=P);return}T.defaultValue=H!=null?""+di(H):""}function mr(T,P,H,Z){if(P==null){if(Z!=null){if(H!=null)throw Error(f(92));if(Ne(Z)){if(1<Z.length)throw Error(f(93));Z=Z[0]}H=Z}H==null&&(H=""),P=H}H=di(P),T.defaultValue=H,Z=T.textContent,Z===H&&Z!==""&&Z!==null&&(T.value=Z),ui(T)}function Mr(T,P){if(P){var H=T.firstChild;if(H&&H===T.lastChild&&H.nodeType===3){H.nodeValue=P;return}}T.textContent=P}var Cr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ks(T,P,H){var Z=P.indexOf("--")===0;H==null||typeof H=="boolean"||H===""?Z?T.setProperty(P,""):P==="float"?T.cssFloat="":T[P]="":Z?T.setProperty(P,H):typeof H!="number"||H===0||Cr.has(P)?P==="float"?T.cssFloat=H:T[P]=(""+H).trim():T[P]=H+"px"}function ia(T,P,H){if(P!=null&&typeof P!="object")throw Error(f(62));if(T=T.style,H!=null){for(var Z in H)!H.hasOwnProperty(Z)||P!=null&&P.hasOwnProperty(Z)||(Z.indexOf("--")===0?T.setProperty(Z,""):Z==="float"?T.cssFloat="":T[Z]="");for(var ce in P)Z=P[ce],P.hasOwnProperty(ce)&&H[ce]!==Z&&ks(T,ce,Z)}else for(var ue in P)P.hasOwnProperty(ue)&&ks(T,ue,P[ue])}function Ya(T){if(T.indexOf("-")===-1)return!1;switch(T){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ka=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ml(T){return Ka.test(""+T)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":T}function Fa(){}var ac=null;function ra(T){return T=T.target||T.srcElement||window,T.correspondingUseElement&&(T=T.correspondingUseElement),T.nodeType===3?T.parentNode:T}var Ro=null,ma=null;function Xo(T){var P=$n(T);if(P&&(T=P.stateNode)){var H=T[Ie]||null;e:switch(T=P.stateNode,P.type){case"input":if(tr(T,H.value,H.defaultValue,H.defaultValue,H.checked,H.defaultChecked,H.type,H.name),P=H.name,H.type==="radio"&&P!=null){for(H=T;H.parentNode;)H=H.parentNode;for(H=H.querySelectorAll('input[name="'+si(""+P)+'"][type="radio"]'),P=0;P<H.length;P++){var Z=H[P];if(Z!==T&&Z.form===T.form){var ce=Z[Ie]||null;if(!ce)throw Error(f(90));tr(Z,ce.value,ce.defaultValue,ce.defaultValue,ce.checked,ce.defaultChecked,ce.type,ce.name)}}for(P=0;P<H.length;P++)Z=H[P],Z.form===T.form&&pi(Z)}break e;case"textarea":nr(T,H.value,H.defaultValue);break e;case"select":P=H.value,P!=null&&xr(T,!!H.multiple,P,!1)}}}var Cl=!1;function wo(T,P,H){if(Cl)return T(P,H);Cl=!0;try{var Z=T(P);return Z}finally{if(Cl=!1,(Ro!==null||ma!==null)&&(Xa(),Ro&&(P=Ro,T=ma,ma=Ro=null,Xo(P),T)))for(P=0;P<T.length;P++)Xo(T[P])}}function ga(T,P){var H=T.stateNode;if(H===null)return null;var Z=H[Ie]||null;if(Z===null)return null;H=Z[P];e:switch(P){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Z=!Z.disabled)||(T=T.type,Z=!(T==="button"||T==="input"||T==="select"||T==="textarea")),T=!Z;break e;default:T=!1}if(T)return null;if(H&&typeof H!="function")throw Error(f(231,P,typeof H));return H}var sa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pl=!1;if(sa)try{var cr={};Object.defineProperty(cr,"passive",{get:function(){Pl=!0}}),window.addEventListener("test",cr,cr),window.removeEventListener("test",cr,cr)}catch{Pl=!1}var Ds=null,oc=null,Za=null;function Yo(){if(Za)return Za;var T,P=oc,H=P.length,Z,ce="value"in Ds?Ds.value:Ds.textContent,ue=ce.length;for(T=0;T<H&&P[T]===ce[T];T++);var Me=H-T;for(Z=1;Z<=Me&&P[H-Z]===ce[ue-Z];Z++);return Za=ce.slice(T,1<Z?1-Z:void 0)}function Ko(T){var P=T.keyCode;return"charCode"in T?(T=T.charCode,T===0&&P===13&&(T=13)):T=P,T===10&&(T=13),32<=T||T===13?T:0}function Oa(){return!0}function Ba(){return!1}function ps(T){function P(H,Z,ce,ue,Me){this._reactName=H,this._targetInst=ce,this.type=Z,this.nativeEvent=ue,this.target=Me,this.currentTarget=null;for(var Le in T)T.hasOwnProperty(Le)&&(H=T[Le],this[Le]=H?H(ue):ue[Le]);return this.isDefaultPrevented=(ue.defaultPrevented!=null?ue.defaultPrevented:ue.returnValue===!1)?Oa:Ba,this.isPropagationStopped=Ba,this}return Y(P.prototype,{preventDefault:function(){this.defaultPrevented=!0;var H=this.nativeEvent;H&&(H.preventDefault?H.preventDefault():typeof H.returnValue!="unknown"&&(H.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var H=this.nativeEvent;H&&(H.stopPropagation?H.stopPropagation():typeof H.cancelBubble!="unknown"&&(H.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),P}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(T){return T.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=ps(Qa),Mo=Y({},Qa,{view:0,detail:0}),lc=ps(Mo),Ja,Il,ja,Zo=Y({},Mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Co,button:0,buttons:0,relatedTarget:function(T){return T.relatedTarget===void 0?T.fromElement===T.srcElement?T.toElement:T.fromElement:T.relatedTarget},movementX:function(T){return"movementX"in T?T.movementX:(T!==ja&&(ja&&T.type==="mousemove"?(Ja=T.screenX-ja.screenX,Il=T.screenY-ja.screenY):Il=Ja=0,ja=T),Ja)},movementY:function(T){return"movementY"in T?T.movementY:Il}}),cc=ps(Zo),Qo=Y({},Zo,{dataTransfer:0}),Zc=ps(Qo),uc=Y({},Mo,{relatedTarget:0}),Jo=ps(uc),hc=Y({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),Du=ps(hc),fc=Y({},Qa,{clipboardData:function(T){return"clipboardData"in T?T.clipboardData:window.clipboardData}}),Qc=ps(fc),el=Y({},Qa,{data:0}),ya=ps(el),kl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dc(T){var P=this.nativeEvent;return P.getModifierState?P.getModifierState(T):(T=eu[T])?!!P[T]:!1}function Co(){return dc}var Rs=Y({},Mo,{key:function(T){if(T.key){var P=kl[T.key]||T.key;if(P!=="Unidentified")return P}return T.type==="keypress"?(T=Ko(T),T===13?"Enter":String.fromCharCode(T)):T.type==="keydown"||T.type==="keyup"?Jc[T.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Co,charCode:function(T){return T.type==="keypress"?Ko(T):0},keyCode:function(T){return T.type==="keydown"||T.type==="keyup"?T.keyCode:0},which:function(T){return T.type==="keypress"?Ko(T):T.type==="keydown"||T.type==="keyup"?T.keyCode:0}}),eo=ps(Rs),Dl=Y({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),to=ps(Dl),ae=Y({},Mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Co}),be=ps(ae),Ce=Y({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ue=ps(Ce),xt=Y({},Zo,{deltaX:function(T){return"deltaX"in T?T.deltaX:"wheelDeltaX"in T?-T.wheelDeltaX:0},deltaY:function(T){return"deltaY"in T?T.deltaY:"wheelDeltaY"in T?-T.wheelDeltaY:"wheelDelta"in T?-T.wheelDelta:0},deltaZ:0,deltaMode:0}),un=ps(xt),ii=Y({},Qa,{newState:0,oldState:0}),ki=ps(ii),jr=[9,13,27,32],Qi=sa&&"CompositionEvent"in window,Rr=null;sa&&"documentMode"in document&&(Rr=document.documentMode);var Vs=sa&&"TextEvent"in window&&!Rr,za=sa&&(!Qi||Rr&&8<Rr&&11>=Rr),Ga=" ",Ws=!1;function Po(T,P){switch(T){case"keyup":return jr.indexOf(P.keyCode)!==-1;case"keydown":return P.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vl(T){return T=T.detail,typeof T=="object"&&"data"in T?T.data:null}var Nl=!1;function Gf(T,P){switch(T){case"compositionend":return Vl(P);case"keypress":return P.which!==32?null:(Ws=!0,Ga);case"textInput":return T=P.data,T===Ga&&Ws?null:T;default:return null}}function Ch(T,P){if(Nl)return T==="compositionend"||!Qi&&Po(T,P)?(T=Yo(),Za=oc=Ds=null,Nl=!1,T):null;switch(T){case"paste":return null;case"keypress":if(!(P.ctrlKey||P.altKey||P.metaKey)||P.ctrlKey&&P.altKey){if(P.char&&1<P.char.length)return P.char;if(P.which)return String.fromCharCode(P.which)}return null;case"compositionend":return za&&P.locale!=="ko"?null:P.data;default:return null}}var Ph={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ih(T){var P=T&&T.nodeName&&T.nodeName.toLowerCase();return P==="input"?!!Ph[T.type]:P==="textarea"}function Vu(T,P,H,Z){Ro?ma?ma.push(Z):ma=[Z]:Ro=Z,P=Zd(P,"onChange"),0<P.length&&(H=new Ua("onChange","change",null,H,Z),T.push({event:H,listeners:P}))}var tl=null,Ll=null;function Hf(T){Wp(T,0)}function pc(T){var P=Xn(T);if(pi(P))return T}function kh(T,P){if(T==="change")return P}var no=!1;if(sa){var tu;if(sa){var Dh="oninput"in document;if(!Dh){var Vh=document.createElement("div");Vh.setAttribute("oninput","return;"),Dh=typeof Vh.oninput=="function"}tu=Dh}else tu=!1;no=tu&&(!document.documentMode||9<document.documentMode)}function xa(){tl&&(tl.detachEvent("onpropertychange",nu),Ll=tl=null)}function nu(T){if(T.propertyName==="value"&&pc(Ll)){var P=[];Vu(P,Ll,T,ra(T)),wo(Hf,P)}}function Wf(T,P,H){T==="focusin"?(xa(),tl=P,Ll=H,tl.attachEvent("onpropertychange",nu)):T==="focusout"&&xa()}function Nh(T){if(T==="selectionchange"||T==="keyup"||T==="keydown")return pc(Ll)}function $f(T,P){if(T==="click")return pc(P)}function qf(T,P){if(T==="input"||T==="change")return pc(P)}function Lh(T,P){return T===P&&(T!==0||1/T===1/P)||T!==T&&P!==P}var Ns=typeof Object.is=="function"?Object.is:Lh;function mc(T,P){if(Ns(T,P))return!0;if(typeof T!="object"||T===null||typeof P!="object"||P===null)return!1;var H=Object.keys(T),Z=Object.keys(P);if(H.length!==Z.length)return!1;for(Z=0;Z<H.length;Z++){var ce=H[Z];if(!qn.call(P,ce)||!Ns(T[ce],P[ce]))return!1}return!0}function iu(T){for(;T&&T.firstChild;)T=T.firstChild;return T}function gc(T,P){var H=iu(T);T=0;for(var Z;H;){if(H.nodeType===3){if(Z=T+H.textContent.length,T<=P&&Z>=P)return{node:H,offset:P-T};T=Z}e:{for(;H;){if(H.nextSibling){H=H.nextSibling;break e}H=H.parentNode}H=void 0}H=iu(H)}}function vr(T,P){return T&&P?T===P?!0:T&&T.nodeType===3?!1:P&&P.nodeType===3?vr(T,P.parentNode):"contains"in T?T.contains(P):T.compareDocumentPosition?!!(T.compareDocumentPosition(P)&16):!1:!1}function Xf(T){T=T!=null&&T.ownerDocument!=null&&T.ownerDocument.defaultView!=null?T.ownerDocument.defaultView:window;for(var P=Ln(T.document);P instanceof T.HTMLIFrameElement;){try{var H=typeof P.contentWindow.location.href=="string"}catch{H=!1}if(H)T=P.contentWindow;else break;P=Ln(T.document)}return P}function Fh(T){var P=T&&T.nodeName&&T.nodeName.toLowerCase();return P&&(P==="input"&&(T.type==="text"||T.type==="search"||T.type==="tel"||T.type==="url"||T.type==="password")||P==="textarea"||T.contentEditable==="true")}var Yf=sa&&"documentMode"in document&&11>=document.documentMode,io=null,ro=null,yc=null,Nu=!1;function xc(T,P,H){var Z=H.window===H?H.document:H.nodeType===9?H:H.ownerDocument;Nu||io==null||io!==Ln(Z)||(Z=io,"selectionStart"in Z&&Fh(Z)?Z={start:Z.selectionStart,end:Z.selectionEnd}:(Z=(Z.ownerDocument&&Z.ownerDocument.defaultView||window).getSelection(),Z={anchorNode:Z.anchorNode,anchorOffset:Z.anchorOffset,focusNode:Z.focusNode,focusOffset:Z.focusOffset}),yc&&mc(yc,Z)||(yc=Z,Z=Zd(ro,"onSelect"),0<Z.length&&(P=new Ua("onSelect","select",null,P,H),T.push({event:P,listeners:Z}),P.target=io)))}function ws(T,P){var H={};return H[T.toLowerCase()]=P.toLowerCase(),H["Webkit"+T]="webkit"+P,H["Moz"+T]="moz"+P,H}var Fl={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionrun:ws("Transition","TransitionRun"),transitionstart:ws("Transition","TransitionStart"),transitioncancel:ws("Transition","TransitionCancel"),transitionend:ws("Transition","TransitionEnd")},ru={},Oh={};sa&&(Oh=document.createElement("div").style,"AnimationEvent"in window||(delete Fl.animationend.animation,delete Fl.animationiteration.animation,delete Fl.animationstart.animation),"TransitionEvent"in window||delete Fl.transitionend.transition);function Io(T){if(ru[T])return ru[T];if(!Fl[T])return T;var P=Fl[T],H;for(H in P)if(P.hasOwnProperty(H)&&H in Oh)return ru[T]=P[H];return T}var Lu=Io("animationend"),su=Io("animationiteration"),Bh=Io("animationstart"),Kf=Io("transitionrun"),pp=Io("transitionstart"),Zf=Io("transitioncancel"),Uh=Io("transitionend"),va=new Map,au="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");au.push("scrollEnd");function ba(T,P){va.set(T,P),Je(P,[T])}var ou=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},Ea=[],ko=0,ms=0;function lu(){for(var T=ko,P=ms=ko=0;P<T;){var H=Ea[P];Ea[P++]=null;var Z=Ea[P];Ea[P++]=null;var ce=Ea[P];Ea[P++]=null;var ue=Ea[P];if(Ea[P++]=null,Z!==null&&ce!==null){var Me=Z.pending;Me===null?ce.next=ce:(ce.next=Me.next,Me.next=ce),Z.pending=ce}ue!==0&&nl(H,ce,ue)}}function gs(T,P,H,Z){Ea[ko++]=T,Ea[ko++]=P,Ea[ko++]=H,Ea[ko++]=Z,ms|=Z,T.lanes|=Z,T=T.alternate,T!==null&&(T.lanes|=Z)}function Fu(T,P,H,Z){return gs(T,P,H,Z),Sa(T)}function Ls(T,P){return gs(T,null,null,P),Sa(T)}function nl(T,P,H){T.lanes|=H;var Z=T.alternate;Z!==null&&(Z.lanes|=H);for(var ce=!1,ue=T.return;ue!==null;)ue.childLanes|=H,Z=ue.alternate,Z!==null&&(Z.childLanes|=H),ue.tag===22&&(T=ue.stateNode,T===null||T._visibility&1||(ce=!0)),T=ue,ue=ue.return;return T.tag===3?(ue=T.stateNode,ce&&P!==null&&(ce=31-Jn(H),T=ue.hiddenUpdates,Z=T[ce],Z===null?T[ce]=[P]:Z.push(P),P.lane=H|536870912),ue):null}function Sa(T){if(50<El)throw El=0,nc=null,Error(f(185));for(var P=T.return;P!==null;)T=P,P=T.return;return T.tag===3?T.stateNode:null}var il={};function jh(T,P,H,Z){this.tag=T,this.key=H,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=P,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(T,P,H,Z){return new jh(T,P,H,Z)}function Ou(T){return T=T.prototype,!(!T||!T.isReactComponent)}function $s(T,P){var H=T.alternate;return H===null?(H=Vr(T.tag,P,T.key,T.mode),H.elementType=T.elementType,H.type=T.type,H.stateNode=T.stateNode,H.alternate=T,T.alternate=H):(H.pendingProps=P,H.type=T.type,H.flags=0,H.subtreeFlags=0,H.deletions=null),H.flags=T.flags&65011712,H.childLanes=T.childLanes,H.lanes=T.lanes,H.child=T.child,H.memoizedProps=T.memoizedProps,H.memoizedState=T.memoizedState,H.updateQueue=T.updateQueue,P=T.dependencies,H.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext},H.sibling=T.sibling,H.index=T.index,H.ref=T.ref,H.refCleanup=T.refCleanup,H}function _c(T,P){T.flags&=65011714;var H=T.alternate;return H===null?(T.childLanes=0,T.lanes=P,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=H.childLanes,T.lanes=H.lanes,T.child=H.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=H.memoizedProps,T.memoizedState=H.memoizedState,T.updateQueue=H.updateQueue,T.type=H.type,P=H.dependencies,T.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),T}function so(T,P,H,Z,ce,ue){var Me=0;if(Z=T,typeof T=="function")Ou(T)&&(Me=1);else if(typeof T=="string")Me=Qm(T,H,He.current)?26:T==="html"||T==="head"||T==="body"?27:5;else e:switch(T){case he:return T=Vr(31,H,P,ce),T.elementType=he,T.lanes=ue,T;case ne:return rl(H.children,ce,ue,P);case te:Me=8,ce|=24;break;case J:return T=Vr(12,H,P,ce|2),T.elementType=J,T.lanes=ue,T;case fe:return T=Vr(13,H,P,ce),T.elementType=fe,T.lanes=ue,T;case pe:return T=Vr(19,H,P,ce),T.elementType=pe,T.lanes=ue,T;default:if(typeof T=="object"&&T!==null)switch(T.$$typeof){case re:Me=10;break e;case ie:Me=9;break e;case le:Me=11;break e;case de:Me=14;break e;case se:Me=16,Z=null;break e}Me=29,H=Error(f(130,T===null?"null":typeof T,"")),Z=null}return P=Vr(Me,H,P,ce),P.elementType=T,P.type=Z,P.lanes=ue,P}function rl(T,P,H,Z){return T=Vr(7,T,Z,P),T.lanes=H,T}function Bu(T,P,H){return T=Vr(6,T,null,P),T.lanes=H,T}function vc(T){var P=Vr(18,null,null,0);return P.stateNode=T,P}function Uu(T,P,H){return P=Vr(4,T.children!==null?T.children:[],T.key,P),P.lanes=H,P.stateNode={containerInfo:T.containerInfo,pendingChildren:null,implementation:T.implementation},P}var cu=new WeakMap;function aa(T,P){if(typeof T=="object"&&T!==null){var H=cu.get(T);return H!==void 0?H:(P={value:T,source:P,stack:je(P)},cu.set(T,P),P)}return{value:T,source:P,stack:je(P)}}var sl=[],al=0,bc=null,Ec=0,qs=[],Pr=0,Do=null,Nr=1,Ha="";function ao(T,P){sl[al++]=Ec,sl[al++]=bc,bc=T,Ec=P}function Qf(T,P,H){qs[Pr++]=Nr,qs[Pr++]=Ha,qs[Pr++]=Do,Do=T;var Z=Nr;T=Ha;var ce=32-Jn(Z)-1;Z&=~(1<<ce),H+=1;var ue=32-Jn(P)+ce;if(30<ue){var Me=ce-ce%5;ue=(Z&(1<<Me)-1).toString(32),Z>>=Me,ce-=Me,Nr=1<<32-Jn(P)+ce|H<<ce|Z,Ha=ue+T}else Nr=1<<ue|H<<ce|Z,Ha=T}function oo(T){T.return!==null&&(ao(T,1),Qf(T,1,0))}function ju(T){for(;T===bc;)bc=sl[--al],sl[al]=null,Ec=sl[--al],sl[al]=null;for(;T===Do;)Do=qs[--Pr],qs[Pr]=null,Ha=qs[--Pr],qs[Pr]=null,Nr=qs[--Pr],qs[Pr]=null}function zu(T,P){qs[Pr++]=Nr,qs[Pr++]=Ha,qs[Pr++]=Do,Nr=P.id,Ha=P.overflow,Do=T}var zr=null,br=null,Yi=!1,Vo=null,oa=!1,Sc=Error(f(519));function lo(T){var P=Error(f(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw co(aa(P,T)),Sc}function Jf(T){var P=T.stateNode,H=T.type,Z=T.memoizedProps;switch(P[pr]=T,P[Ie]=Z,H){case"dialog":er("cancel",P),er("close",P);break;case"iframe":case"object":case"embed":er("load",P);break;case"video":case"audio":for(H=0;H<La.length;H++)er(La[H],P);break;case"source":er("error",P);break;case"img":case"image":case"link":er("error",P),er("load",P);break;case"details":er("toggle",P);break;case"input":er("invalid",P),Ar(P,Z.value,Z.defaultValue,Z.checked,Z.defaultChecked,Z.type,Z.name,!0);break;case"select":er("invalid",P);break;case"textarea":er("invalid",P),mr(P,Z.value,Z.defaultValue,Z.children)}H=Z.children,typeof H!="string"&&typeof H!="number"&&typeof H!="bigint"||P.textContent===""+H||Z.suppressHydrationWarning===!0||Yp(P.textContent,H)?(Z.popover!=null&&(er("beforetoggle",P),er("toggle",P)),Z.onScroll!=null&&er("scroll",P),Z.onScrollEnd!=null&&er("scrollend",P),Z.onClick!=null&&(P.onclick=Fa),P=!0):P=!1,P||lo(T,!0)}function ed(T){for(zr=T.return;zr;)switch(zr.tag){case 5:case 31:case 13:oa=!1;return;case 27:case 3:oa=!0;return;default:zr=zr.return}}function Tc(T){if(T!==zr)return!1;if(!Yi)return ed(T),Yi=!0,!1;var P=T.tag,H;if((H=P!==3&&P!==27)&&((H=P===5)&&(H=T.type,H=!(H!=="form"&&H!=="button")||Pp(T.type,T.memoizedProps)),H=!H),H&&br&&lo(T),ed(T),P===13){if(T=T.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(f(317));br=sm(T)}else if(P===31){if(T=T.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(f(317));br=sm(T)}else P===27?(P=br,Hc(T.type)?(T=Np,Np=null,br=T):br=P):br=zr?To(T.stateNode.nextSibling):null;return!0}function ol(){br=zr=null,Yi=!1}function Gu(){var T=Vo;return T!==null&&(Hr===null?Hr=T:Hr.push.apply(Hr,T),Vo=null),T}function co(T){Vo===null?Vo=[T]:Vo.push(T)}var Ac=ge(null),ll=null,uo=null;function No(T,P,H){ze(Ac,P._currentValue),P._currentValue=H}function ho(T){T._currentValue=Ac.current,De(Ac)}function Hu(T,P,H){for(;T!==null;){var Z=T.alternate;if((T.childLanes&P)!==P?(T.childLanes|=P,Z!==null&&(Z.childLanes|=P)):Z!==null&&(Z.childLanes&P)!==P&&(Z.childLanes|=P),T===H)break;T=T.return}}function Wu(T,P,H,Z){var ce=T.child;for(ce!==null&&(ce.return=T);ce!==null;){var ue=ce.dependencies;if(ue!==null){var Me=ce.child;ue=ue.firstContext;e:for(;ue!==null;){var Le=ue;ue=ce;for(var $e=0;$e<P.length;$e++)if(Le.context===P[$e]){ue.lanes|=H,Le=ue.alternate,Le!==null&&(Le.lanes|=H),Hu(ue.return,H,T),Z||(Me=null);break e}ue=Le.next}}else if(ce.tag===18){if(Me=ce.return,Me===null)throw Error(f(341));Me.lanes|=H,ue=Me.alternate,ue!==null&&(ue.lanes|=H),Hu(Me,H,T),Me=null}else Me=ce.child;if(Me!==null)Me.return=ce;else for(Me=ce;Me!==null;){if(Me===T){Me=null;break}if(ce=Me.sibling,ce!==null){ce.return=Me.return,Me=ce;break}Me=Me.return}ce=Me}}function fo(T,P,H,Z){T=null;for(var ce=P,ue=!1;ce!==null;){if(!ue){if((ce.flags&524288)!==0)ue=!0;else if((ce.flags&262144)!==0)break}if(ce.tag===10){var Me=ce.alternate;if(Me===null)throw Error(f(387));if(Me=Me.memoizedProps,Me!==null){var Le=ce.type;Ns(ce.pendingProps.value,Me.value)||(T!==null?T.push(Le):T=[Le])}}else if(ce===lt.current){if(Me=ce.alternate,Me===null)throw Error(f(387));Me.memoizedState.memoizedState!==ce.memoizedState.memoizedState&&(T!==null?T.push(Bf):T=[Bf])}ce=ce.return}T!==null&&Wu(P,T,H,Z),P.flags|=262144}function uu(T){for(T=T.firstContext;T!==null;){if(!Ns(T.context._currentValue,T.memoizedValue))return!0;T=T.next}return!1}function cl(T){ll=T,uo=null,T=T.dependencies,T!==null&&(T.firstContext=null)}function Ci(T){return nd(ll,T)}function Rc(T,P){return ll===null&&cl(T),nd(T,P)}function nd(T,P){var H=P._currentValue;if(P={context:P,memoizedValue:H,next:null},uo===null){if(T===null)throw Error(f(308));uo=P,T.dependencies={lanes:0,firstContext:P},T.flags|=524288}else uo=uo.next=P;return H}var rd=typeof AbortController<"u"?AbortController:function(){var T=[],P=this.signal={aborted:!1,addEventListener:function(H,Z){T.push(Z)}};this.abort=function(){P.aborted=!0,T.forEach(function(H){return H()})}},mp=u.unstable_scheduleCallback,gp=u.unstable_NormalPriority,ts={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zh(){return{controller:new rd,data:new Map,refCount:0}}function Ol(T){T.refCount--,T.refCount===0&&mp(gp,function(){T.controller.abort()})}var la=null,$u=0,Lo=0,Ta=null;function Gh(T,P){if(la===null){var H=la=[];$u=0,Lo=fn(),Ta={status:"pending",value:void 0,then:function(Z){H.push(Z)}}}return $u++,P.then(Hh,Hh),P}function Hh(){if(--$u===0&&la!==null){Ta!==null&&(Ta.status="fulfilled");var T=la;la=null,Lo=0,Ta=null;for(var P=0;P<T.length;P++)(0,T[P])()}}function Wh(T,P){var H=[],Z={status:"pending",value:null,reason:null,then:function(ce){H.push(ce)}};return T.then(function(){Z.status="fulfilled",Z.value=P;for(var ce=0;ce<H.length;ce++)(0,H[ce])(P)},function(ce){for(Z.status="rejected",Z.reason=ce,ce=0;ce<H.length;ce++)(0,H[ce])(void 0)}),Z}var sd=ye.S;ye.S=function(T,P){Df=Pe(),typeof P=="object"&&P!==null&&typeof P.then=="function"&&Gh(T,P),sd!==null&&sd(T,P)};var ul=ge(null);function qu(){var T=ul.current;return T!==null?T:Pi.pooledCache}function hu(T,P){P===null?ze(ul,ul.current):ze(ul,P.pool)}function $h(){var T=qu();return T===null?null:{parent:ts._currentValue,pool:T}}var Bl=Error(f(460)),fu=Error(f(474)),Oi=Error(f(542)),Xu={then:function(){}};function Xs(T){return T=T.status,T==="fulfilled"||T==="rejected"}function Yu(T,P,H){switch(H=T[H],H===void 0?T.push(P):H!==P&&(P.then(Fa,Fa),P=H),P.status){case"fulfilled":return P.value;case"rejected":throw T=P.reason,zl(T),T;default:if(typeof P.status=="string")P.then(Fa,Fa);else{if(T=Pi,T!==null&&100<T.shellSuspendCounter)throw Error(f(482));T=P,T.status="pending",T.then(function(Z){if(P.status==="pending"){var ce=P;ce.status="fulfilled",ce.value=Z}},function(Z){if(P.status==="pending"){var ce=P;ce.status="rejected",ce.reason=Z}})}switch(P.status){case"fulfilled":return P.value;case"rejected":throw T=P.reason,zl(T),T}throw po=P,Bl}}function Ul(T){try{var P=T._init;return P(T._payload)}catch(H){throw H!==null&&typeof H=="object"&&typeof H.then=="function"?(po=H,Bl):H}}var po=null;function jl(){if(po===null)throw Error(f(459));var T=po;return po=null,T}function zl(T){if(T===Bl||T===Oi)throw Error(f(483))}var Gl=null,Hl=0;function du(T){var P=Hl;return Hl+=1,Gl===null&&(Gl=[]),Yu(Gl,T,P)}function Aa(T,P){P=P.props.ref,T.ref=P!==void 0?P:null}function wc(T,P){throw P.$$typeof===q?Error(f(525)):(T=Object.prototype.toString.call(P),Error(f(31,T==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":T)))}function Ku(T){function P(bt,ht){if(T){var Ot=bt.deletions;Ot===null?(bt.deletions=[ht],bt.flags|=16):Ot.push(ht)}}function H(bt,ht){if(!T)return null;for(;ht!==null;)P(bt,ht),ht=ht.sibling;return null}function Z(bt){for(var ht=new Map;bt!==null;)bt.key!==null?ht.set(bt.key,bt):ht.set(bt.index,bt),bt=bt.sibling;return ht}function ce(bt,ht){return bt=$s(bt,ht),bt.index=0,bt.sibling=null,bt}function ue(bt,ht,Ot){return bt.index=Ot,T?(Ot=bt.alternate,Ot!==null?(Ot=Ot.index,Ot<ht?(bt.flags|=67108866,ht):Ot):(bt.flags|=67108866,ht)):(bt.flags|=1048576,ht)}function Me(bt){return T&&bt.alternate===null&&(bt.flags|=67108866),bt}function Le(bt,ht,Ot,Rn){return ht===null||ht.tag!==6?(ht=Bu(Ot,bt.mode,Rn),ht.return=bt,ht):(ht=ce(ht,Ot),ht.return=bt,ht)}function $e(bt,ht,Ot,Rn){var Si=Ot.type;return Si===ne?Sn(bt,ht,Ot.props.children,Rn,Ot.key):ht!==null&&(ht.elementType===Si||typeof Si=="object"&&Si!==null&&Si.$$typeof===se&&Ul(Si)===ht.type)?(ht=ce(ht,Ot.props),Aa(ht,Ot),ht.return=bt,ht):(ht=so(Ot.type,Ot.key,Ot.props,null,bt.mode,Rn),Aa(ht,Ot),ht.return=bt,ht)}function qt(bt,ht,Ot,Rn){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==Ot.containerInfo||ht.stateNode.implementation!==Ot.implementation?(ht=Uu(Ot,bt.mode,Rn),ht.return=bt,ht):(ht=ce(ht,Ot.children||[]),ht.return=bt,ht)}function Sn(bt,ht,Ot,Rn,Si){return ht===null||ht.tag!==7?(ht=rl(Ot,bt.mode,Rn,Si),ht.return=bt,ht):(ht=ce(ht,Ot),ht.return=bt,ht)}function Cn(bt,ht,Ot){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return ht=Bu(""+ht,bt.mode,Ot),ht.return=bt,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case K:return Ot=so(ht.type,ht.key,ht.props,null,bt.mode,Ot),Aa(Ot,ht),Ot.return=bt,Ot;case Q:return ht=Uu(ht,bt.mode,Ot),ht.return=bt,ht;case se:return ht=Ul(ht),Cn(bt,ht,Ot)}if(Ne(ht)||Re(ht))return ht=rl(ht,bt.mode,Ot,null),ht.return=bt,ht;if(typeof ht.then=="function")return Cn(bt,du(ht),Ot);if(ht.$$typeof===re)return Cn(bt,Rc(bt,ht),Ot);wc(bt,ht)}return null}function on(bt,ht,Ot,Rn){var Si=ht!==null?ht.key:null;if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number"||typeof Ot=="bigint")return Si!==null?null:Le(bt,ht,""+Ot,Rn);if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case K:return Ot.key===Si?$e(bt,ht,Ot,Rn):null;case Q:return Ot.key===Si?qt(bt,ht,Ot,Rn):null;case se:return Ot=Ul(Ot),on(bt,ht,Ot,Rn)}if(Ne(Ot)||Re(Ot))return Si!==null?null:Sn(bt,ht,Ot,Rn,null);if(typeof Ot.then=="function")return on(bt,ht,du(Ot),Rn);if(Ot.$$typeof===re)return on(bt,ht,Rc(bt,Ot),Rn);wc(bt,Ot)}return null}function xn(bt,ht,Ot,Rn,Si){if(typeof Rn=="string"&&Rn!==""||typeof Rn=="number"||typeof Rn=="bigint")return bt=bt.get(Ot)||null,Le(ht,bt,""+Rn,Si);if(typeof Rn=="object"&&Rn!==null){switch(Rn.$$typeof){case K:return bt=bt.get(Rn.key===null?Ot:Rn.key)||null,$e(ht,bt,Rn,Si);case Q:return bt=bt.get(Rn.key===null?Ot:Rn.key)||null,qt(ht,bt,Rn,Si);case se:return Rn=Ul(Rn),xn(bt,ht,Ot,Rn,Si)}if(Ne(Rn)||Re(Rn))return bt=bt.get(Ot)||null,Sn(ht,bt,Rn,Si,null);if(typeof Rn.then=="function")return xn(bt,ht,Ot,du(Rn),Si);if(Rn.$$typeof===re)return xn(bt,ht,Ot,Rc(ht,Rn),Si);wc(ht,Rn)}return null}function yi(bt,ht,Ot,Rn){for(var Si=null,or=null,_i=ht,zi=ht=0,rr=null;_i!==null&&zi<Ot.length;zi++){_i.index>zi?(rr=_i,_i=null):rr=_i.sibling;var lr=on(bt,_i,Ot[zi],Rn);if(lr===null){_i===null&&(_i=rr);break}T&&_i&&lr.alternate===null&&P(bt,_i),ht=ue(lr,ht,zi),or===null?Si=lr:or.sibling=lr,or=lr,_i=rr}if(zi===Ot.length)return H(bt,_i),Yi&&ao(bt,zi),Si;if(_i===null){for(;zi<Ot.length;zi++)_i=Cn(bt,Ot[zi],Rn),_i!==null&&(ht=ue(_i,ht,zi),or===null?Si=_i:or.sibling=_i,or=_i);return Yi&&ao(bt,zi),Si}for(_i=Z(_i);zi<Ot.length;zi++)rr=xn(_i,bt,zi,Ot[zi],Rn),rr!==null&&(T&&rr.alternate!==null&&_i.delete(rr.key===null?zi:rr.key),ht=ue(rr,ht,zi),or===null?Si=rr:or.sibling=rr,or=rr);return T&&_i.forEach(function(Yc){return P(bt,Yc)}),Yi&&ao(bt,zi),Si}function Mi(bt,ht,Ot,Rn){if(Ot==null)throw Error(f(151));for(var Si=null,or=null,_i=ht,zi=ht=0,rr=null,lr=Ot.next();_i!==null&&!lr.done;zi++,lr=Ot.next()){_i.index>zi?(rr=_i,_i=null):rr=_i.sibling;var Yc=on(bt,_i,lr.value,Rn);if(Yc===null){_i===null&&(_i=rr);break}T&&_i&&Yc.alternate===null&&P(bt,_i),ht=ue(Yc,ht,zi),or===null?Si=Yc:or.sibling=Yc,or=Yc,_i=rr}if(lr.done)return H(bt,_i),Yi&&ao(bt,zi),Si;if(_i===null){for(;!lr.done;zi++,lr=Ot.next())lr=Cn(bt,lr.value,Rn),lr!==null&&(ht=ue(lr,ht,zi),or===null?Si=lr:or.sibling=lr,or=lr);return Yi&&ao(bt,zi),Si}for(_i=Z(_i);!lr.done;zi++,lr=Ot.next())lr=xn(_i,bt,zi,lr.value,Rn),lr!==null&&(T&&lr.alternate!==null&&_i.delete(lr.key===null?zi:lr.key),ht=ue(lr,ht,zi),or===null?Si=lr:or.sibling=lr,or=lr);return T&&_i.forEach(function(f0){return P(bt,f0)}),Yi&&ao(bt,zi),Si}function Tr(bt,ht,Ot,Rn){if(typeof Ot=="object"&&Ot!==null&&Ot.type===ne&&Ot.key===null&&(Ot=Ot.props.children),typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case K:e:{for(var Si=Ot.key;ht!==null;){if(ht.key===Si){if(Si=Ot.type,Si===ne){if(ht.tag===7){H(bt,ht.sibling),Rn=ce(ht,Ot.props.children),Rn.return=bt,bt=Rn;break e}}else if(ht.elementType===Si||typeof Si=="object"&&Si!==null&&Si.$$typeof===se&&Ul(Si)===ht.type){H(bt,ht.sibling),Rn=ce(ht,Ot.props),Aa(Rn,Ot),Rn.return=bt,bt=Rn;break e}H(bt,ht);break}else P(bt,ht);ht=ht.sibling}Ot.type===ne?(Rn=rl(Ot.props.children,bt.mode,Rn,Ot.key),Rn.return=bt,bt=Rn):(Rn=so(Ot.type,Ot.key,Ot.props,null,bt.mode,Rn),Aa(Rn,Ot),Rn.return=bt,bt=Rn)}return Me(bt);case Q:e:{for(Si=Ot.key;ht!==null;){if(ht.key===Si)if(ht.tag===4&&ht.stateNode.containerInfo===Ot.containerInfo&&ht.stateNode.implementation===Ot.implementation){H(bt,ht.sibling),Rn=ce(ht,Ot.children||[]),Rn.return=bt,bt=Rn;break e}else{H(bt,ht);break}else P(bt,ht);ht=ht.sibling}Rn=Uu(Ot,bt.mode,Rn),Rn.return=bt,bt=Rn}return Me(bt);case se:return Ot=Ul(Ot),Tr(bt,ht,Ot,Rn)}if(Ne(Ot))return yi(bt,ht,Ot,Rn);if(Re(Ot)){if(Si=Re(Ot),typeof Si!="function")throw Error(f(150));return Ot=Si.call(Ot),Mi(bt,ht,Ot,Rn)}if(typeof Ot.then=="function")return Tr(bt,ht,du(Ot),Rn);if(Ot.$$typeof===re)return Tr(bt,ht,Rc(bt,Ot),Rn);wc(bt,Ot)}return typeof Ot=="string"&&Ot!==""||typeof Ot=="number"||typeof Ot=="bigint"?(Ot=""+Ot,ht!==null&&ht.tag===6?(H(bt,ht.sibling),Rn=ce(ht,Ot),Rn.return=bt,bt=Rn):(H(bt,ht),Rn=Bu(Ot,bt.mode,Rn),Rn.return=bt,bt=Rn),Me(bt)):H(bt,ht)}return function(bt,ht,Ot,Rn){try{Hl=0;var Si=Tr(bt,ht,Ot,Rn);return Gl=null,Si}catch(_i){if(_i===Bl||_i===Oi)throw _i;var or=Vr(29,_i,null,bt.mode);return or.lanes=Rn,or.return=bt,or}finally{}}}var Fo=Ku(!0),Zu=Ku(!1),Fs=!1;function pu(T){T.updateQueue={baseState:T.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qh(T,P){T=T.updateQueue,P.updateQueue===T&&(P.updateQueue={baseState:T.baseState,firstBaseUpdate:T.firstBaseUpdate,lastBaseUpdate:T.lastBaseUpdate,shared:T.shared,callbacks:null})}function Oo(T){return{lane:T,tag:0,payload:null,callback:null,next:null}}function hl(T,P,H){var Z=T.updateQueue;if(Z===null)return null;if(Z=Z.shared,(vi&2)!==0){var ce=Z.pending;return ce===null?P.next=P:(P.next=ce.next,ce.next=P),Z.pending=P,P=Sa(T),nl(T,null,H),P}return gs(T,Z,P,H),Sa(T)}function dl(T,P,H){if(P=P.updateQueue,P!==null&&(P=P.shared,(H&4194048)!==0)){var Z=P.lanes;Z&=T.pendingLanes,H|=Z,P.lanes=H,Hs(T,H)}}function Ei(T,P){var H=T.updateQueue,Z=T.alternate;if(Z!==null&&(Z=Z.updateQueue,H===Z)){var ce=null,ue=null;if(H=H.firstBaseUpdate,H!==null){do{var Me={lane:H.lane,tag:H.tag,payload:H.payload,callback:null,next:null};ue===null?ce=ue=Me:ue=ue.next=Me,H=H.next}while(H!==null);ue===null?ce=ue=P:ue=ue.next=P}else ce=ue=P;H={baseState:Z.baseState,firstBaseUpdate:ce,lastBaseUpdate:ue,shared:Z.shared,callbacks:Z.callbacks},T.updateQueue=H;return}T=H.lastBaseUpdate,T===null?H.firstBaseUpdate=P:T.next=P,H.lastBaseUpdate=P}var Xh=!1;function mu(){if(Xh){var T=Ta;if(T!==null)throw T}}function Mc(T,P,H,Z){Xh=!1;var ce=T.updateQueue;Fs=!1;var ue=ce.firstBaseUpdate,Me=ce.lastBaseUpdate,Le=ce.shared.pending;if(Le!==null){ce.shared.pending=null;var $e=Le,qt=$e.next;$e.next=null,Me===null?ue=qt:Me.next=qt,Me=$e;var Sn=T.alternate;Sn!==null&&(Sn=Sn.updateQueue,Le=Sn.lastBaseUpdate,Le!==Me&&(Le===null?Sn.firstBaseUpdate=qt:Le.next=qt,Sn.lastBaseUpdate=$e))}if(ue!==null){var Cn=ce.baseState;Me=0,Sn=qt=$e=null,Le=ue;do{var on=Le.lane&-536870913,xn=on!==Le.lane;if(xn?(Fi&on)===on:(Z&on)===on){on!==0&&on===Lo&&(Xh=!0),Sn!==null&&(Sn=Sn.next={lane:0,tag:Le.tag,payload:Le.payload,callback:null,next:null});e:{var yi=T,Mi=Le;on=P;var Tr=H;switch(Mi.tag){case 1:if(yi=Mi.payload,typeof yi=="function"){Cn=yi.call(Tr,Cn,on);break e}Cn=yi;break e;case 3:yi.flags=yi.flags&-65537|128;case 0:if(yi=Mi.payload,on=typeof yi=="function"?yi.call(Tr,Cn,on):yi,on==null)break e;Cn=Y({},Cn,on);break e;case 2:Fs=!0}}on=Le.callback,on!==null&&(T.flags|=64,xn&&(T.flags|=8192),xn=ce.callbacks,xn===null?ce.callbacks=[on]:xn.push(on))}else xn={lane:on,tag:Le.tag,payload:Le.payload,callback:Le.callback,next:null},Sn===null?(qt=Sn=xn,$e=Cn):Sn=Sn.next=xn,Me|=on;if(Le=Le.next,Le===null){if(Le=ce.shared.pending,Le===null)break;xn=Le,Le=xn.next,xn.next=null,ce.lastBaseUpdate=xn,ce.shared.pending=null}}while(!0);Sn===null&&($e=Cn),ce.baseState=$e,ce.firstBaseUpdate=qt,ce.lastBaseUpdate=Sn,ue===null&&(ce.shared.lanes=0),bo|=Me,T.lanes=Me,T.memoizedState=Cn}}function Cc(T,P){if(typeof T!="function")throw Error(f(191,T));T.call(P)}function ad(T,P){var H=T.callbacks;if(H!==null)for(T.callbacks=null,T=0;T<H.length;T++)Cc(H[T],P)}var Pc=ge(null),Qu=ge(0);function od(T,P){T=fa,ze(Qu,T),ze(Pc,P),fa=T|P.baseLanes}function Yh(){ze(Qu,fa),ze(Pc,Pc.current)}function gu(){fa=Qu.current,De(Pc),De(Qu)}var Ys=ge(null),Os=null;function Bo(T){var P=T.alternate;ze(Ki,Ki.current&1),ze(Ys,T),Os===null&&(P===null||Pc.current!==null||P.memoizedState!==null)&&(Os=T)}function Kh(T){ze(Ki,Ki.current),ze(Ys,T),Os===null&&(Os=T)}function ld(T){T.tag===22?(ze(Ki,Ki.current),ze(Ys,T),Os===null&&(Os=T)):Ks()}function Ks(){ze(Ki,Ki.current),ze(Ys,Ys.current)}function qr(T){De(Ys),Os===T&&(Os=null),De(Ki)}var Ki=ge(0);function ca(T){for(var P=T;P!==null;){if(P.tag===13){var H=P.memoizedState;if(H!==null&&(H=H.dehydrated,H===null||Dp(H)||Vp(H)))return P}else if(P.tag===19&&(P.memoizedProps.revealOrder==="forwards"||P.memoizedProps.revealOrder==="backwards"||P.memoizedProps.revealOrder==="unstable_legacy-backwards"||P.memoizedProps.revealOrder==="together")){if((P.flags&128)!==0)return P}else if(P.child!==null){P.child.return=P,P=P.child;continue}if(P===T)break;for(;P.sibling===null;){if(P.return===null||P.return===T)return null;P=P.return}P.sibling.return=P.return,P=P.sibling}return null}var Ir=0,Ni=null,gr=null,Wi=null,Ra=!1,Ic=!1,Wl=!1,Ju=0,yu=0,kc=null,Zh=0;function Lr(){throw Error(f(321))}function Qh(T,P){if(P===null)return!1;for(var H=0;H<P.length&&H<T.length;H++)if(!Ns(T[H],P[H]))return!1;return!0}function eh(T,P,H,Z,ce,ue){return Ir=ue,Ni=P,P.memoizedState=null,P.updateQueue=null,P.lanes=0,ye.H=T===null||T.memoizedState===null?jd:_f,Wl=!1,ue=H(Z,ce),Wl=!1,Ic&&(ue=$l(P,H,Z,ce)),cd(T),ue}function cd(T){ye.H=Dc;var P=gr!==null&&gr.next!==null;if(Ir=0,Wi=gr=Ni=null,Ra=!1,yu=0,kc=null,P)throw Error(f(300));T===null||ns||(T=T.dependencies,T!==null&&uu(T)&&(ns=!0))}function $l(T,P,H,Z){Ni=T;var ce=0;do{if(Ic&&(kc=null),yu=0,Ic=!1,25<=ce)throw Error(f(301));if(ce+=1,Wi=gr=null,T.updateQueue!=null){var ue=T.updateQueue;ue.lastEffect=null,ue.events=null,ue.stores=null,ue.memoCache!=null&&(ue.memoCache.index=0)}ye.H=wa,ue=P(H,Z)}while(Ic);return ue}function ql(){var T=ye.H,P=T.useState()[0];return P=typeof P.then=="function"?xu(P):P,T=T.useState()[0],(gr!==null?gr.memoizedState:null)!==T&&(Ni.flags|=1024),P}function Jh(){var T=Ju!==0;return Ju=0,T}function ef(T,P,H){P.updateQueue=T.updateQueue,P.flags&=-2053,T.lanes&=~H}function tf(T){if(Ra){for(T=T.memoizedState;T!==null;){var P=T.queue;P!==null&&(P.pending=null),T=T.next}Ra=!1}Ir=0,Wi=gr=Ni=null,Ic=!1,yu=Ju=0,kc=null}function os(){var T={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wi===null?Ni.memoizedState=Wi=T:Wi=Wi.next=T,Wi}function Xr(){if(gr===null){var T=Ni.alternate;T=T!==null?T.memoizedState:null}else T=gr.next;var P=Wi===null?Ni.memoizedState:Wi.next;if(P!==null)Wi=P,gr=T;else{if(T===null)throw Ni.alternate===null?Error(f(467)):Error(f(310));gr=T,T={memoizedState:gr.memoizedState,baseState:gr.baseState,baseQueue:gr.baseQueue,queue:gr.queue,next:null},Wi===null?Ni.memoizedState=Wi=T:Wi=Wi.next=T}return Wi}function th(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xu(T){var P=yu;return yu+=1,kc===null&&(kc=[]),T=Yu(kc,T,P),P=Ni,(Wi===null?P.memoizedState:Wi.next)===null&&(P=P.alternate,ye.H=P===null||P.memoizedState===null?jd:_f),T}function pl(T){if(T!==null&&typeof T=="object"){if(typeof T.then=="function")return xu(T);if(T.$$typeof===re)return Ci(T)}throw Error(f(438,String(T)))}function nf(T){var P=null,H=Ni.updateQueue;if(H!==null&&(P=H.memoCache),P==null){var Z=Ni.alternate;Z!==null&&(Z=Z.updateQueue,Z!==null&&(Z=Z.memoCache,Z!=null&&(P={data:Z.data.map(function(ce){return ce.slice()}),index:0})))}if(P==null&&(P={data:[],index:0}),H===null&&(H=th(),Ni.updateQueue=H),H.memoCache=P,H=P.data[P.index],H===void 0)for(H=P.data[P.index]=Array(T),Z=0;Z<T;Z++)H[Z]=Se;return P.index++,H}function Uo(T,P){return typeof P=="function"?P(T):P}function nh(T){var P=Xr();return rf(P,gr,T)}function rf(T,P,H){var Z=T.queue;if(Z===null)throw Error(f(311));Z.lastRenderedReducer=H;var ce=T.baseQueue,ue=Z.pending;if(ue!==null){if(ce!==null){var Me=ce.next;ce.next=ue.next,ue.next=Me}P.baseQueue=ce=ue,Z.pending=null}if(ue=T.baseState,ce===null)T.memoizedState=ue;else{P=ce.next;var Le=Me=null,$e=null,qt=P,Sn=!1;do{var Cn=qt.lane&-536870913;if(Cn!==qt.lane?(Fi&Cn)===Cn:(Ir&Cn)===Cn){var on=qt.revertLane;if(on===0)$e!==null&&($e=$e.next={lane:0,revertLane:0,gesture:null,action:qt.action,hasEagerState:qt.hasEagerState,eagerState:qt.eagerState,next:null}),Cn===Lo&&(Sn=!0);else if((Ir&on)===on){qt=qt.next,on===Lo&&(Sn=!0);continue}else Cn={lane:0,revertLane:qt.revertLane,gesture:null,action:qt.action,hasEagerState:qt.hasEagerState,eagerState:qt.eagerState,next:null},$e===null?(Le=$e=Cn,Me=ue):$e=$e.next=Cn,Ni.lanes|=on,bo|=on;Cn=qt.action,Wl&&H(ue,Cn),ue=qt.hasEagerState?qt.eagerState:H(ue,Cn)}else on={lane:Cn,revertLane:qt.revertLane,gesture:qt.gesture,action:qt.action,hasEagerState:qt.hasEagerState,eagerState:qt.eagerState,next:null},$e===null?(Le=$e=on,Me=ue):$e=$e.next=on,Ni.lanes|=Cn,bo|=Cn;qt=qt.next}while(qt!==null&&qt!==P);if($e===null?Me=ue:$e.next=Le,!Ns(ue,T.memoizedState)&&(ns=!0,Sn&&(H=Ta,H!==null)))throw H;T.memoizedState=ue,T.baseState=Me,T.baseQueue=$e,Z.lastRenderedState=ue}return ce===null&&(Z.lanes=0),[T.memoizedState,Z.dispatch]}function sf(T){var P=Xr(),H=P.queue;if(H===null)throw Error(f(311));H.lastRenderedReducer=T;var Z=H.dispatch,ce=H.pending,ue=P.memoizedState;if(ce!==null){H.pending=null;var Me=ce=ce.next;do ue=T(ue,Me.action),Me=Me.next;while(Me!==ce);Ns(ue,P.memoizedState)||(ns=!0),P.memoizedState=ue,P.baseQueue===null&&(P.baseState=ue),H.lastRenderedState=ue}return[ue,Z]}function ud(T,P,H){var Z=Ni,ce=Xr(),ue=Yi;if(ue){if(H===void 0)throw Error(f(407));H=H()}else H=P();var Me=!Ns((gr||ce).memoizedState,H);if(Me&&(ce.memoizedState=H,ns=!0),ce=ce.queue,df(pd.bind(null,Z,ce,T),[T]),ce.getSnapshot!==P||Me||Wi!==null&&Wi.memoizedState.tag&1){if(Z.flags|=2048,ml(9,{destroy:void 0},dd.bind(null,Z,ce,H,P),null),Pi===null)throw Error(f(349));ue||(Ir&127)!==0||hd(Z,P,H)}return H}function hd(T,P,H){T.flags|=16384,T={getSnapshot:P,value:H},P=Ni.updateQueue,P===null?(P=th(),Ni.updateQueue=P,P.stores=[T]):(H=P.stores,H===null?P.stores=[T]:H.push(T))}function dd(T,P,H,Z){P.value=H,P.getSnapshot=Z,md(P)&&gd(T)}function pd(T,P,H){return H(function(){md(P)&&gd(T)})}function md(T){var P=T.getSnapshot;T=T.value;try{var H=P();return!Ns(T,H)}catch{return!0}}function gd(T){var P=Ls(T,2);P!==null&&Ui(P,T,2)}function af(T){var P=os();if(typeof T=="function"){var H=T;if(T=H(),Wl){oi(!0);try{H()}finally{oi(!1)}}}return P.memoizedState=P.baseState=T,P.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:T},P}function of(T,P,H,Z){return T.baseState=H,rf(T,gr,typeof Z=="function"?Z:Uo)}function yp(T,P,H,Z,ce){if(ah(T))throw Error(f(485));if(T=P.action,T!==null){var ue={payload:ce,action:T,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Me){ue.listeners.push(Me)}};ye.T!==null?H(!0):ue.isTransition=!1,Z(ue),H=P.pending,H===null?(ue.next=P.pending=ue,yd(P,ue)):(ue.next=H.next,P.pending=H.next=ue)}}function yd(T,P){var H=P.action,Z=P.payload,ce=T.state;if(P.isTransition){var ue=ye.T,Me={};ye.T=Me;try{var Le=H(ce,Z),$e=ye.S;$e!==null&&$e(Me,Le),xd(T,P,Le)}catch(qt){lf(T,P,qt)}finally{ue!==null&&Me.types!==null&&(ue.types=Me.types),ye.T=ue}}else try{ue=H(ce,Z),xd(T,P,ue)}catch(qt){lf(T,P,qt)}}function xd(T,P,H){H!==null&&typeof H=="object"&&typeof H.then=="function"?H.then(function(Z){_d(T,P,Z)},function(Z){return lf(T,P,Z)}):_d(T,P,H)}function _d(T,P,H){P.status="fulfilled",P.value=H,vd(P),T.state=H,P=T.pending,P!==null&&(H=P.next,H===P?T.pending=null:(H=H.next,P.next=H,yd(T,H)))}function lf(T,P,H){var Z=T.pending;if(T.pending=null,Z!==null){Z=Z.next;do P.status="rejected",P.reason=H,vd(P),P=P.next;while(P!==Z)}T.action=null}function vd(T){T=T.listeners;for(var P=0;P<T.length;P++)(0,T[P])()}function cf(T,P){return P}function uf(T,P){if(Yi){var H=Pi.formState;if(H!==null){e:{var Z=Ni;if(Yi){if(br){t:{for(var ce=br,ue=oa;ce.nodeType!==8;){if(!ue){ce=null;break t}if(ce=To(ce.nextSibling),ce===null){ce=null;break t}}ue=ce.data,ce=ue==="F!"||ue==="F"?ce:null}if(ce){br=To(ce.nextSibling),Z=ce.data==="F!";break e}}lo(Z)}Z=!1}Z&&(P=H[0])}}return H=os(),H.memoizedState=H.baseState=P,Z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cf,lastRenderedState:P},H.queue=Z,H=Od.bind(null,Ni,Z),Z.dispatch=H,Z=af(!1),ue=xf.bind(null,Ni,!1,Z.queue),Z=os(),ce={state:P,dispatch:null,action:T,pending:null},Z.queue=ce,H=yp.bind(null,Ni,ce,ue,H),ce.dispatch=H,Z.memoizedState=T,[P,H,!1]}function bd(T){var P=Xr();return hf(P,gr,T)}function hf(T,P,H){if(P=rf(T,P,cf)[0],T=nh(Uo)[0],typeof P=="object"&&P!==null&&typeof P.then=="function")try{var Z=xu(P)}catch(Me){throw Me===Bl?Oi:Me}else Z=P;P=Xr();var ce=P.queue,ue=ce.dispatch;return H!==P.memoizedState&&(Ni.flags|=2048,ml(9,{destroy:void 0},Ed.bind(null,ce,H),null)),[Z,ue,T]}function Ed(T,P){T.action=P}function ff(T){var P=Xr(),H=gr;if(H!==null)return hf(P,H,T);Xr(),P=P.memoizedState,H=Xr();var Z=H.queue.dispatch;return H.memoizedState=T,[P,Z,!1]}function ml(T,P,H,Z){return T={tag:T,create:H,deps:Z,inst:P,next:null},P=Ni.updateQueue,P===null&&(P=th(),Ni.updateQueue=P),H=P.lastEffect,H===null?P.lastEffect=T.next=T:(Z=H.next,H.next=T,T.next=Z,P.lastEffect=T),T}function ih(){return Xr().memoizedState}function rh(T,P,H,Z){var ce=os();Ni.flags|=T,ce.memoizedState=ml(1|P,{destroy:void 0},H,Z===void 0?null:Z)}function sh(T,P,H,Z){var ce=Xr();Z=Z===void 0?null:Z;var ue=ce.memoizedState.inst;gr!==null&&Z!==null&&Qh(Z,gr.memoizedState.deps)?ce.memoizedState=ml(P,ue,H,Z):(Ni.flags|=T,ce.memoizedState=ml(1|P,ue,H,Z))}function Sd(T,P){rh(8390656,8,T,P)}function df(T,P){sh(2048,8,T,P)}function Td(T){Ni.flags|=4;var P=Ni.updateQueue;if(P===null)P=th(),Ni.updateQueue=P,P.events=[T];else{var H=P.events;H===null?P.events=[T]:H.push(T)}}function Ad(T){var P=Xr().memoizedState;return Td({ref:P,nextImpl:T}),function(){if((vi&2)!==0)throw Error(f(440));return P.impl.apply(void 0,arguments)}}function Rd(T,P){return sh(4,2,T,P)}function wd(T,P){return sh(4,4,T,P)}function Md(T,P){if(typeof P=="function"){T=T();var H=P(T);return function(){typeof H=="function"?H():P(null)}}if(P!=null)return T=T(),P.current=T,function(){P.current=null}}function Cd(T,P,H){H=H!=null?H.concat([T]):null,sh(4,4,Md.bind(null,P,T),H)}function pf(){}function Pd(T,P){var H=Xr();P=P===void 0?null:P;var Z=H.memoizedState;return P!==null&&Qh(P,Z[1])?Z[0]:(H.memoizedState=[T,P],T)}function Id(T,P){var H=Xr();P=P===void 0?null:P;var Z=H.memoizedState;if(P!==null&&Qh(P,Z[1]))return Z[0];if(Z=T(),Wl){oi(!0);try{T()}finally{oi(!1)}}return H.memoizedState=[Z,P],Z}function mf(T,P,H){return H===void 0||(Ir&1073741824)!==0&&(Fi&261930)===0?T.memoizedState=P:(T.memoizedState=H,T=Gi(),Ni.lanes|=T,bo|=T,H)}function kd(T,P,H,Z){return Ns(H,P)?H:Pc.current!==null?(T=mf(T,H,Z),Ns(T,P)||(ns=!0),T):(Ir&42)===0||(Ir&1073741824)!==0&&(Fi&261930)===0?(ns=!0,T.memoizedState=H):(T=Gi(),Ni.lanes|=T,bo|=T,P)}function Dd(T,P,H,Z,ce){var ue=Ae.p;Ae.p=ue!==0&&8>ue?ue:8;var Me=ye.T,Le={};ye.T=Le,xf(T,!1,P,H);try{var $e=ce(),qt=ye.S;if(qt!==null&&qt(Le,$e),$e!==null&&typeof $e=="object"&&typeof $e.then=="function"){var Sn=Wh($e,Z);_u(T,P,Sn,pa(T))}else _u(T,P,Z,pa(T))}catch(Cn){_u(T,P,{then:function(){},status:"rejected",reason:Cn},pa())}finally{Ae.p=ue,Me!==null&&Le.types!==null&&(Me.types=Le.types),ye.T=Me}}function xp(){}function gf(T,P,H,Z){if(T.tag!==5)throw Error(f(476));var ce=Vd(T).queue;Dd(T,ce,P,_e,H===null?xp:function(){return Nd(T),H(Z)})}function Vd(T){var P=T.memoizedState;if(P!==null)return P;P={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:_e},next:null};var H={};return P.next={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:H},next:null},T.memoizedState=P,T=T.alternate,T!==null&&(T.memoizedState=P),P}function Nd(T){var P=Vd(T);P.next===null&&(P=T.alternate.memoizedState),_u(T,P.next.queue,{},pa())}function yf(){return Ci(Bf)}function Ld(){return Xr().memoizedState}function Fd(){return Xr().memoizedState}function _p(T){for(var P=T.return;P!==null;){switch(P.tag){case 24:case 3:var H=pa();T=Oo(H);var Z=hl(P,T,H);Z!==null&&(Ui(Z,P,H),dl(Z,P,H)),P={cache:zh()},T.payload=P;return}P=P.return}}function vp(T,P,H){var Z=pa();H={lane:Z,revertLane:0,gesture:null,action:H,hasEagerState:!1,eagerState:null,next:null},ah(T)?Bd(P,H):(H=Fu(T,P,H,Z),H!==null&&(Ui(H,T,Z),Ud(H,P,Z)))}function Od(T,P,H){var Z=pa();_u(T,P,H,Z)}function _u(T,P,H,Z){var ce={lane:Z,revertLane:0,gesture:null,action:H,hasEagerState:!1,eagerState:null,next:null};if(ah(T))Bd(P,ce);else{var ue=T.alternate;if(T.lanes===0&&(ue===null||ue.lanes===0)&&(ue=P.lastRenderedReducer,ue!==null))try{var Me=P.lastRenderedState,Le=ue(Me,H);if(ce.hasEagerState=!0,ce.eagerState=Le,Ns(Le,Me))return gs(T,P,ce,0),Pi===null&&lu(),!1}catch{}finally{}if(H=Fu(T,P,ce,Z),H!==null)return Ui(H,T,Z),Ud(H,P,Z),!0}return!1}function xf(T,P,H,Z){if(Z={lane:2,revertLane:fn(),gesture:null,action:Z,hasEagerState:!1,eagerState:null,next:null},ah(T)){if(P)throw Error(f(479))}else P=Fu(T,H,Z,2),P!==null&&Ui(P,T,2)}function ah(T){var P=T.alternate;return T===Ni||P!==null&&P===Ni}function Bd(T,P){Ic=Ra=!0;var H=T.pending;H===null?P.next=P:(P.next=H.next,H.next=P),T.pending=P}function Ud(T,P,H){if((H&4194048)!==0){var Z=P.lanes;Z&=T.pendingLanes,H|=Z,P.lanes=H,Hs(T,H)}}var Dc={readContext:Ci,use:pl,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useLayoutEffect:Lr,useInsertionEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useSyncExternalStore:Lr,useId:Lr,useHostTransitionStatus:Lr,useFormState:Lr,useActionState:Lr,useOptimistic:Lr,useMemoCache:Lr,useCacheRefresh:Lr};Dc.useEffectEvent=Lr;var jd={readContext:Ci,use:pl,useCallback:function(T,P){return os().memoizedState=[T,P===void 0?null:P],T},useContext:Ci,useEffect:Sd,useImperativeHandle:function(T,P,H){H=H!=null?H.concat([T]):null,rh(4194308,4,Md.bind(null,P,T),H)},useLayoutEffect:function(T,P){return rh(4194308,4,T,P)},useInsertionEffect:function(T,P){rh(4,2,T,P)},useMemo:function(T,P){var H=os();P=P===void 0?null:P;var Z=T();if(Wl){oi(!0);try{T()}finally{oi(!1)}}return H.memoizedState=[Z,P],Z},useReducer:function(T,P,H){var Z=os();if(H!==void 0){var ce=H(P);if(Wl){oi(!0);try{H(P)}finally{oi(!1)}}}else ce=P;return Z.memoizedState=Z.baseState=ce,T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:T,lastRenderedState:ce},Z.queue=T,T=T.dispatch=vp.bind(null,Ni,T),[Z.memoizedState,T]},useRef:function(T){var P=os();return T={current:T},P.memoizedState=T},useState:function(T){T=af(T);var P=T.queue,H=Od.bind(null,Ni,P);return P.dispatch=H,[T.memoizedState,H]},useDebugValue:pf,useDeferredValue:function(T,P){var H=os();return mf(H,T,P)},useTransition:function(){var T=af(!1);return T=Dd.bind(null,Ni,T.queue,!0,!1),os().memoizedState=T,[!1,T]},useSyncExternalStore:function(T,P,H){var Z=Ni,ce=os();if(Yi){if(H===void 0)throw Error(f(407));H=H()}else{if(H=P(),Pi===null)throw Error(f(349));(Fi&127)!==0||hd(Z,P,H)}ce.memoizedState=H;var ue={value:H,getSnapshot:P};return ce.queue=ue,Sd(pd.bind(null,Z,ue,T),[T]),Z.flags|=2048,ml(9,{destroy:void 0},dd.bind(null,Z,ue,H,P),null),H},useId:function(){var T=os(),P=Pi.identifierPrefix;if(Yi){var H=Ha,Z=Nr;H=(Z&~(1<<32-Jn(Z)-1)).toString(32)+H,P="_"+P+"R_"+H,H=Ju++,0<H&&(P+="H"+H.toString(32)),P+="_"}else H=Zh++,P="_"+P+"r_"+H.toString(32)+"_";return T.memoizedState=P},useHostTransitionStatus:yf,useFormState:uf,useActionState:uf,useOptimistic:function(T){var P=os();P.memoizedState=P.baseState=T;var H={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return P.queue=H,P=xf.bind(null,Ni,!0,H),H.dispatch=P,[T,P]},useMemoCache:nf,useCacheRefresh:function(){return os().memoizedState=_p.bind(null,Ni)},useEffectEvent:function(T){var P=os(),H={impl:T};return P.memoizedState=H,function(){if((vi&2)!==0)throw Error(f(440));return H.impl.apply(void 0,arguments)}}},_f={readContext:Ci,use:pl,useCallback:Pd,useContext:Ci,useEffect:df,useImperativeHandle:Cd,useInsertionEffect:Rd,useLayoutEffect:wd,useMemo:Id,useReducer:nh,useRef:ih,useState:function(){return nh(Uo)},useDebugValue:pf,useDeferredValue:function(T,P){var H=Xr();return kd(H,gr.memoizedState,T,P)},useTransition:function(){var T=nh(Uo)[0],P=Xr().memoizedState;return[typeof T=="boolean"?T:xu(T),P]},useSyncExternalStore:ud,useId:Ld,useHostTransitionStatus:yf,useFormState:bd,useActionState:bd,useOptimistic:function(T,P){var H=Xr();return of(H,gr,T,P)},useMemoCache:nf,useCacheRefresh:Fd};_f.useEffectEvent=Ad;var wa={readContext:Ci,use:pl,useCallback:Pd,useContext:Ci,useEffect:df,useImperativeHandle:Cd,useInsertionEffect:Rd,useLayoutEffect:wd,useMemo:Id,useReducer:sf,useRef:ih,useState:function(){return sf(Uo)},useDebugValue:pf,useDeferredValue:function(T,P){var H=Xr();return gr===null?mf(H,T,P):kd(H,gr.memoizedState,T,P)},useTransition:function(){var T=sf(Uo)[0],P=Xr().memoizedState;return[typeof T=="boolean"?T:xu(T),P]},useSyncExternalStore:ud,useId:Ld,useHostTransitionStatus:yf,useFormState:ff,useActionState:ff,useOptimistic:function(T,P){var H=Xr();return gr!==null?of(H,gr,T,P):(H.baseState=T,[T,H.queue.dispatch])},useMemoCache:nf,useCacheRefresh:Fd};wa.useEffectEvent=Ad;function oh(T,P,H,Z){P=T.memoizedState,H=H(Z,P),H=H==null?P:Y({},P,H),T.memoizedState=H,T.lanes===0&&(T.updateQueue.baseState=H)}var vu={enqueueSetState:function(T,P,H){T=T._reactInternals;var Z=pa(),ce=Oo(Z);ce.payload=P,H!=null&&(ce.callback=H),P=hl(T,ce,Z),P!==null&&(Ui(P,T,Z),dl(P,T,Z))},enqueueReplaceState:function(T,P,H){T=T._reactInternals;var Z=pa(),ce=Oo(Z);ce.tag=1,ce.payload=P,H!=null&&(ce.callback=H),P=hl(T,ce,Z),P!==null&&(Ui(P,T,Z),dl(P,T,Z))},enqueueForceUpdate:function(T,P){T=T._reactInternals;var H=pa(),Z=Oo(H);Z.tag=2,P!=null&&(Z.callback=P),P=hl(T,Z,H),P!==null&&(Ui(P,T,H),dl(P,T,H))}};function vf(T,P,H,Z,ce,ue,Me){return T=T.stateNode,typeof T.shouldComponentUpdate=="function"?T.shouldComponentUpdate(Z,ue,Me):P.prototype&&P.prototype.isPureReactComponent?!mc(H,Z)||!mc(ce,ue):!0}function bf(T,P,H,Z){T=P.state,typeof P.componentWillReceiveProps=="function"&&P.componentWillReceiveProps(H,Z),typeof P.UNSAFE_componentWillReceiveProps=="function"&&P.UNSAFE_componentWillReceiveProps(H,Z),P.state!==T&&vu.enqueueReplaceState(P,P.state,null)}function gl(T,P){var H=P;if("ref"in P){H={};for(var Z in P)Z!=="ref"&&(H[Z]=P[Z])}if(T=T.defaultProps){H===P&&(H=Y({},H));for(var ce in T)H[ce]===void 0&&(H[ce]=T[ce])}return H}function zd(T){ou(T)}function Ef(T){console.error(T)}function Sf(T){ou(T)}function lh(T,P){try{var H=T.onUncaughtError;H(P.value,{componentStack:P.stack})}catch(Z){setTimeout(function(){throw Z})}}function Gd(T,P,H){try{var Z=T.onCaughtError;Z(H.value,{componentStack:H.stack,errorBoundary:P.tag===1?P.stateNode:null})}catch(ce){setTimeout(function(){throw ce})}}function Tf(T,P,H){return H=Oo(H),H.tag=3,H.payload={element:null},H.callback=function(){lh(T,P)},H}function Af(T){return T=Oo(T),T.tag=3,T}function Hd(T,P,H,Z){var ce=H.type.getDerivedStateFromError;if(typeof ce=="function"){var ue=Z.value;T.payload=function(){return ce(ue)},T.callback=function(){Gd(P,H,Z)}}var Me=H.stateNode;Me!==null&&typeof Me.componentDidCatch=="function"&&(T.callback=function(){Gd(P,H,Z),typeof ce!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var Le=Z.stack;this.componentDidCatch(Z.value,{componentStack:Le!==null?Le:""})})}function ls(T,P,H,Z,ce){if(H.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){if(P=H.alternate,P!==null&&fo(P,H,ce,!0),H=Ys.current,H!==null){switch(H.tag){case 31:case 13:return Os===null?Uc():H.alternate===null&&Fr===0&&(Fr=3),H.flags&=-257,H.flags|=65536,H.lanes=ce,Z===Xu?H.flags|=16384:(P=H.updateQueue,P===null?H.updateQueue=new Set([Z]):P.add(Z),ku(T,Z,ce)),!1;case 22:return H.flags|=65536,Z===Xu?H.flags|=16384:(P=H.updateQueue,P===null?(P={transitions:null,markerInstances:null,retryQueue:new Set([Z])},H.updateQueue=P):(H=P.retryQueue,H===null?P.retryQueue=new Set([Z]):H.add(Z)),ku(T,Z,ce)),!1}throw Error(f(435,H.tag))}return ku(T,Z,ce),Uc(),!1}if(Yi)return P=Ys.current,P!==null?((P.flags&65536)===0&&(P.flags|=256),P.flags|=65536,P.lanes=ce,Z!==Sc&&(T=Error(f(422),{cause:Z}),co(aa(T,H)))):(Z!==Sc&&(P=Error(f(423),{cause:Z}),co(aa(P,H))),T=T.current.alternate,T.flags|=65536,ce&=-ce,T.lanes|=ce,Z=aa(Z,H),ce=Tf(T.stateNode,Z,ce),Ei(T,ce),Fr!==4&&(Fr=2)),!1;var ue=Error(f(520),{cause:Z});if(ue=aa(ue,H),tc===null?tc=[ue]:tc.push(ue),Fr!==4&&(Fr=2),P===null)return!0;Z=aa(Z,H),H=P;do{switch(H.tag){case 3:return H.flags|=65536,T=ce&-ce,H.lanes|=T,T=Tf(H.stateNode,Z,T),Ei(H,T),!1;case 1:if(P=H.type,ue=H.stateNode,(H.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(Zr===null||!Zr.has(ue))))return H.flags|=65536,ce&=-ce,H.lanes|=ce,ce=Af(ce),Hd(ce,T,H,Z),Ei(H,ce),!1}H=H.return}while(H!==null);return!1}var ch=Error(f(461)),ns=!1;function ys(T,P,H,Z){P.child=T===null?Zu(P,null,H,Z):Fo(P,T.child,H,Z)}function Rf(T,P,H,Z,ce){H=H.render;var ue=P.ref;if("ref"in Z){var Me={};for(var Le in Z)Le!=="ref"&&(Me[Le]=Z[Le])}else Me=Z;return cl(P),Z=eh(T,P,H,Me,ue,ce),Le=Jh(),T!==null&&!ns?(ef(T,P,ce),Yr(T,P,ce)):(Yi&&Le&&oo(P),P.flags|=1,ys(T,P,Z,ce),P.child)}function Xl(T,P,H,Z,ce){if(T===null){var ue=H.type;return typeof ue=="function"&&!Ou(ue)&&ue.defaultProps===void 0&&H.compare===null?(P.tag=15,P.type=ue,uh(T,P,ue,Z,ce)):(T=so(H.type,null,Z,P,P.mode,ce),T.ref=P.ref,T.return=P,P.child=T)}if(ue=T.child,!gh(T,ce)){var Me=ue.memoizedProps;if(H=H.compare,H=H!==null?H:mc,H(Me,Z)&&T.ref===P.ref)return Yr(T,P,ce)}return P.flags|=1,T=$s(ue,Z),T.ref=P.ref,T.return=P,P.child=T}function uh(T,P,H,Z,ce){if(T!==null){var ue=T.memoizedProps;if(mc(ue,Z)&&T.ref===P.ref)if(ns=!1,P.pendingProps=Z=ue,gh(T,ce))(T.flags&131072)!==0&&(ns=!0);else return P.lanes=T.lanes,Yr(T,P,ce)}return Vc(T,P,H,Z,ce)}function Yl(T,P,H,Z){var ce=Z.children,ue=T!==null?T.memoizedState:null;if(T===null&&P.stateNode===null&&(P.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),Z.mode==="hidden"){if((P.flags&128)!==0){if(ue=ue!==null?ue.baseLanes|H:H,T!==null){for(Z=P.child=T.child,ce=0;Z!==null;)ce=ce|Z.lanes|Z.childLanes,Z=Z.sibling;Z=ce&~ue}else Z=0,P.child=null;return Zs(T,P,ue,H,Z)}if((H&536870912)!==0)P.memoizedState={baseLanes:0,cachePool:null},T!==null&&hu(P,ue!==null?ue.cachePool:null),ue!==null?od(P,ue):Yh(),ld(P);else return Z=P.lanes=536870912,Zs(T,P,ue!==null?ue.baseLanes|H:H,H,Z)}else ue!==null?(hu(P,ue.cachePool),od(P,ue),Ks(),P.memoizedState=null):(T!==null&&hu(P,null),Yh(),Ks());return ys(T,P,ce,H),P.child}function mo(T,P){return T!==null&&T.tag===22||P.stateNode!==null||(P.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),P.sibling}function Zs(T,P,H,Z,ce){var ue=qu();return ue=ue===null?null:{parent:ts._currentValue,pool:ue},P.memoizedState={baseLanes:H,cachePool:ue},T!==null&&hu(P,null),Yh(),ld(P),T!==null&&fo(T,P,Z,!0),P.childLanes=ce,null}function hh(T,P){return P=mh({mode:P.mode,children:P.children},T.mode),P.ref=T.ref,T.child=P,P.return=T,P}function Wd(T,P,H){return Fo(P,T.child,null,H),T=hh(P,P.pendingProps),T.flags|=2,qr(P),P.memoizedState=null,T}function fh(T,P,H){var Z=P.pendingProps,ce=(P.flags&128)!==0;if(P.flags&=-129,T===null){if(Yi){if(Z.mode==="hidden")return T=hh(P,Z),P.lanes=536870912,mo(null,T);if(Kh(P),(T=br)?(T=rm(T,oa),T=T!==null&&T.data==="&"?T:null,T!==null&&(P.memoizedState={dehydrated:T,treeContext:Do!==null?{id:Nr,overflow:Ha}:null,retryLane:536870912,hydrationErrors:null},H=vc(T),H.return=P,P.child=H,zr=P,br=null)):T=null,T===null)throw lo(P);return P.lanes=536870912,null}return hh(P,Z)}var ue=T.memoizedState;if(ue!==null){var Me=ue.dehydrated;if(Kh(P),ce)if(P.flags&256)P.flags&=-257,P=Wd(T,P,H);else if(P.memoizedState!==null)P.child=T.child,P.flags|=128,P=null;else throw Error(f(558));else if(ns||fo(T,P,H,!1),ce=(H&T.childLanes)!==0,ns||ce){if(Z=Pi,Z!==null&&(Me=na(Z,H),Me!==0&&Me!==ue.retryLane))throw ue.retryLane=Me,Ls(T,Me),Ui(Z,T,Me),ch;Uc(),P=Wd(T,P,H)}else T=ue.treeContext,br=To(Me.nextSibling),zr=P,Yi=!0,Vo=null,oa=!1,T!==null&&zu(P,T),P=hh(P,Z),P.flags|=4096;return P}return T=$s(T.child,{mode:Z.mode,children:Z.children}),T.ref=P.ref,P.child=T,T.return=P,T}function Kl(T,P){var H=P.ref;if(H===null)T!==null&&T.ref!==null&&(P.flags|=4194816);else{if(typeof H!="function"&&typeof H!="object")throw Error(f(284));(T===null||T.ref!==H)&&(P.flags|=4194816)}}function Vc(T,P,H,Z,ce){return cl(P),H=eh(T,P,H,Z,void 0,ce),Z=Jh(),T!==null&&!ns?(ef(T,P,ce),Yr(T,P,ce)):(Yi&&Z&&oo(P),P.flags|=1,ys(T,P,H,ce),P.child)}function bu(T,P,H,Z,ce,ue){return cl(P),P.updateQueue=null,H=$l(P,Z,H,ce),cd(T),Z=Jh(),T!==null&&!ns?(ef(T,P,ue),Yr(T,P,ue)):(Yi&&Z&&oo(P),P.flags|=1,ys(T,P,H,ue),P.child)}function dh(T,P,H,Z,ce){if(cl(P),P.stateNode===null){var ue=il,Me=H.contextType;typeof Me=="object"&&Me!==null&&(ue=Ci(Me)),ue=new H(Z,ue),P.memoizedState=ue.state!==null&&ue.state!==void 0?ue.state:null,ue.updater=vu,P.stateNode=ue,ue._reactInternals=P,ue=P.stateNode,ue.props=Z,ue.state=P.memoizedState,ue.refs={},pu(P),Me=H.contextType,ue.context=typeof Me=="object"&&Me!==null?Ci(Me):il,ue.state=P.memoizedState,Me=H.getDerivedStateFromProps,typeof Me=="function"&&(oh(P,H,Me,Z),ue.state=P.memoizedState),typeof H.getDerivedStateFromProps=="function"||typeof ue.getSnapshotBeforeUpdate=="function"||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(Me=ue.state,typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount(),Me!==ue.state&&vu.enqueueReplaceState(ue,ue.state,null),Mc(P,Z,ue,ce),mu(),ue.state=P.memoizedState),typeof ue.componentDidMount=="function"&&(P.flags|=4194308),Z=!0}else if(T===null){ue=P.stateNode;var Le=P.memoizedProps,$e=gl(H,Le);ue.props=$e;var qt=ue.context,Sn=H.contextType;Me=il,typeof Sn=="object"&&Sn!==null&&(Me=Ci(Sn));var Cn=H.getDerivedStateFromProps;Sn=typeof Cn=="function"||typeof ue.getSnapshotBeforeUpdate=="function",Le=P.pendingProps!==Le,Sn||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(Le||qt!==Me)&&bf(P,ue,Z,Me),Fs=!1;var on=P.memoizedState;ue.state=on,Mc(P,Z,ue,ce),mu(),qt=P.memoizedState,Le||on!==qt||Fs?(typeof Cn=="function"&&(oh(P,H,Cn,Z),qt=P.memoizedState),($e=Fs||vf(P,H,$e,Z,on,qt,Me))?(Sn||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount()),typeof ue.componentDidMount=="function"&&(P.flags|=4194308)):(typeof ue.componentDidMount=="function"&&(P.flags|=4194308),P.memoizedProps=Z,P.memoizedState=qt),ue.props=Z,ue.state=qt,ue.context=Me,Z=$e):(typeof ue.componentDidMount=="function"&&(P.flags|=4194308),Z=!1)}else{ue=P.stateNode,qh(T,P),Me=P.memoizedProps,Sn=gl(H,Me),ue.props=Sn,Cn=P.pendingProps,on=ue.context,qt=H.contextType,$e=il,typeof qt=="object"&&qt!==null&&($e=Ci(qt)),Le=H.getDerivedStateFromProps,(qt=typeof Le=="function"||typeof ue.getSnapshotBeforeUpdate=="function")||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(Me!==Cn||on!==$e)&&bf(P,ue,Z,$e),Fs=!1,on=P.memoizedState,ue.state=on,Mc(P,Z,ue,ce),mu();var xn=P.memoizedState;Me!==Cn||on!==xn||Fs||T!==null&&T.dependencies!==null&&uu(T.dependencies)?(typeof Le=="function"&&(oh(P,H,Le,Z),xn=P.memoizedState),(Sn=Fs||vf(P,H,Sn,Z,on,xn,$e)||T!==null&&T.dependencies!==null&&uu(T.dependencies))?(qt||typeof ue.UNSAFE_componentWillUpdate!="function"&&typeof ue.componentWillUpdate!="function"||(typeof ue.componentWillUpdate=="function"&&ue.componentWillUpdate(Z,xn,$e),typeof ue.UNSAFE_componentWillUpdate=="function"&&ue.UNSAFE_componentWillUpdate(Z,xn,$e)),typeof ue.componentDidUpdate=="function"&&(P.flags|=4),typeof ue.getSnapshotBeforeUpdate=="function"&&(P.flags|=1024)):(typeof ue.componentDidUpdate!="function"||Me===T.memoizedProps&&on===T.memoizedState||(P.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Me===T.memoizedProps&&on===T.memoizedState||(P.flags|=1024),P.memoizedProps=Z,P.memoizedState=xn),ue.props=Z,ue.state=xn,ue.context=$e,Z=Sn):(typeof ue.componentDidUpdate!="function"||Me===T.memoizedProps&&on===T.memoizedState||(P.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Me===T.memoizedProps&&on===T.memoizedState||(P.flags|=1024),Z=!1)}return ue=Z,Kl(T,P),Z=(P.flags&128)!==0,ue||Z?(ue=P.stateNode,H=Z&&typeof H.getDerivedStateFromError!="function"?null:ue.render(),P.flags|=1,T!==null&&Z?(P.child=Fo(P,T.child,null,ce),P.child=Fo(P,null,H,ce)):ys(T,P,H,ce),P.memoizedState=ue.state,T=P.child):T=Yr(T,P,ce),T}function $d(T,P,H,Z){return ol(),P.flags|=256,ys(T,P,H,Z),P.child}var wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ms(T){return{baseLanes:T,cachePool:$h()}}function ph(T,P,H){return T=T!==null?T.childLanes&~H:0,P&&(T|=js),T}function qd(T,P,H){var Z=P.pendingProps,ce=!1,ue=(P.flags&128)!==0,Me;if((Me=ue)||(Me=T!==null&&T.memoizedState===null?!1:(Ki.current&2)!==0),Me&&(ce=!0,P.flags&=-129),Me=(P.flags&32)!==0,P.flags&=-33,T===null){if(Yi){if(ce?Bo(P):Ks(),(T=br)?(T=rm(T,oa),T=T!==null&&T.data!=="&"?T:null,T!==null&&(P.memoizedState={dehydrated:T,treeContext:Do!==null?{id:Nr,overflow:Ha}:null,retryLane:536870912,hydrationErrors:null},H=vc(T),H.return=P,P.child=H,zr=P,br=null)):T=null,T===null)throw lo(P);return Vp(T)?P.lanes=32:P.lanes=536870912,null}var Le=Z.children;return Z=Z.fallback,ce?(Ks(),ce=P.mode,Le=mh({mode:"hidden",children:Le},ce),Z=rl(Z,ce,H,null),Le.return=P,Z.return=P,Le.sibling=Z,P.child=Le,Z=P.child,Z.memoizedState=Ms(H),Z.childLanes=ph(T,Me,H),P.memoizedState=wf,mo(null,Z)):(Bo(P),Eu(P,Le))}var $e=T.memoizedState;if($e!==null&&(Le=$e.dehydrated,Le!==null)){if(ue)P.flags&256?(Bo(P),P.flags&=-257,P=Mf(T,P,H)):P.memoizedState!==null?(Ks(),P.child=T.child,P.flags|=128,P=null):(Ks(),Le=Z.fallback,ce=P.mode,Z=mh({mode:"visible",children:Z.children},ce),Le=rl(Le,ce,H,null),Le.flags|=2,Z.return=P,Le.return=P,Z.sibling=Le,P.child=Z,Fo(P,T.child,null,H),Z=P.child,Z.memoizedState=Ms(H),Z.childLanes=ph(T,Me,H),P.memoizedState=wf,P=mo(null,Z));else if(Bo(P),Vp(Le)){if(Me=Le.nextSibling&&Le.nextSibling.dataset,Me)var qt=Me.dgst;Me=qt,Z=Error(f(419)),Z.stack="",Z.digest=Me,co({value:Z,source:null,stack:null}),P=Mf(T,P,H)}else if(ns||fo(T,P,H,!1),Me=(H&T.childLanes)!==0,ns||Me){if(Me=Pi,Me!==null&&(Z=na(Me,H),Z!==0&&Z!==$e.retryLane))throw $e.retryLane=Z,Ls(T,Z),Ui(Me,T,Z),ch;Dp(Le)||Uc(),P=Mf(T,P,H)}else Dp(Le)?(P.flags|=192,P.child=T.child,P=null):(T=$e.treeContext,br=To(Le.nextSibling),zr=P,Yi=!0,Vo=null,oa=!1,T!==null&&zu(P,T),P=Eu(P,Z.children),P.flags|=4096);return P}return ce?(Ks(),Le=Z.fallback,ce=P.mode,$e=T.child,qt=$e.sibling,Z=$s($e,{mode:"hidden",children:Z.children}),Z.subtreeFlags=$e.subtreeFlags&65011712,qt!==null?Le=$s(qt,Le):(Le=rl(Le,ce,H,null),Le.flags|=2),Le.return=P,Z.return=P,Z.sibling=Le,P.child=Z,mo(null,Z),Z=P.child,Le=T.child.memoizedState,Le===null?Le=Ms(H):(ce=Le.cachePool,ce!==null?($e=ts._currentValue,ce=ce.parent!==$e?{parent:$e,pool:$e}:ce):ce=$h(),Le={baseLanes:Le.baseLanes|H,cachePool:ce}),Z.memoizedState=Le,Z.childLanes=ph(T,Me,H),P.memoizedState=wf,mo(T.child,Z)):(Bo(P),H=T.child,T=H.sibling,H=$s(H,{mode:"visible",children:Z.children}),H.return=P,H.sibling=null,T!==null&&(Me=P.deletions,Me===null?(P.deletions=[T],P.flags|=16):Me.push(T)),P.child=H,P.memoizedState=null,H)}function Eu(T,P){return P=mh({mode:"visible",children:P},T.mode),P.return=T,T.child=P}function mh(T,P){return T=Vr(22,T,null,P),T.lanes=0,T}function Mf(T,P,H){return Fo(P,T.child,null,H),T=Eu(P,P.pendingProps.children),T.flags|=2,P.memoizedState=null,T}function Xd(T,P,H){T.lanes|=P;var Z=T.alternate;Z!==null&&(Z.lanes|=P),Hu(T.return,P,H)}function Zl(T,P,H,Z,ce,ue){var Me=T.memoizedState;Me===null?T.memoizedState={isBackwards:P,rendering:null,renderingStartTime:0,last:Z,tail:H,tailMode:ce,treeForkCount:ue}:(Me.isBackwards=P,Me.rendering=null,Me.renderingStartTime=0,Me.last=Z,Me.tail=H,Me.tailMode=ce,Me.treeForkCount=ue)}function Qs(T,P,H){var Z=P.pendingProps,ce=Z.revealOrder,ue=Z.tail;Z=Z.children;var Me=Ki.current,Le=(Me&2)!==0;if(Le?(Me=Me&1|2,P.flags|=128):Me&=1,ze(Ki,Me),ys(T,P,Z,H),Z=Yi?Ec:0,!Le&&T!==null&&(T.flags&128)!==0)e:for(T=P.child;T!==null;){if(T.tag===13)T.memoizedState!==null&&Xd(T,H,P);else if(T.tag===19)Xd(T,H,P);else if(T.child!==null){T.child.return=T,T=T.child;continue}if(T===P)break e;for(;T.sibling===null;){if(T.return===null||T.return===P)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}switch(ce){case"forwards":for(H=P.child,ce=null;H!==null;)T=H.alternate,T!==null&&ca(T)===null&&(ce=H),H=H.sibling;H=ce,H===null?(ce=P.child,P.child=null):(ce=H.sibling,H.sibling=null),Zl(P,!1,ce,H,ue,Z);break;case"backwards":case"unstable_legacy-backwards":for(H=null,ce=P.child,P.child=null;ce!==null;){if(T=ce.alternate,T!==null&&ca(T)===null){P.child=ce;break}T=ce.sibling,ce.sibling=H,H=ce,ce=T}Zl(P,!0,H,null,ue,Z);break;case"together":Zl(P,!1,null,null,void 0,Z);break;default:P.memoizedState=null}return P.child}function Yr(T,P,H){if(T!==null&&(P.dependencies=T.dependencies),bo|=P.lanes,(H&P.childLanes)===0)if(T!==null){if(fo(T,P,H,!1),(H&P.childLanes)===0)return null}else return null;if(T!==null&&P.child!==T.child)throw Error(f(153));if(P.child!==null){for(T=P.child,H=$s(T,T.pendingProps),P.child=H,H.return=P;T.sibling!==null;)T=T.sibling,H=H.sibling=$s(T,T.pendingProps),H.return=P;H.sibling=null}return P.child}function gh(T,P){return(T.lanes&P)!==0?!0:(T=T.dependencies,!!(T!==null&&uu(T)))}function bp(T,P,H){switch(P.tag){case 3:Mt(P,P.stateNode.containerInfo),No(P,ts,T.memoizedState.cache),ol();break;case 27:case 5:Fn(P);break;case 4:Mt(P,P.stateNode.containerInfo);break;case 10:No(P,P.type,P.memoizedProps.value);break;case 31:if(P.memoizedState!==null)return P.flags|=128,Kh(P),null;break;case 13:var Z=P.memoizedState;if(Z!==null)return Z.dehydrated!==null?(Bo(P),P.flags|=128,null):(H&P.child.childLanes)!==0?qd(T,P,H):(Bo(P),T=Yr(T,P,H),T!==null?T.sibling:null);Bo(P);break;case 19:var ce=(T.flags&128)!==0;if(Z=(H&P.childLanes)!==0,Z||(fo(T,P,H,!1),Z=(H&P.childLanes)!==0),ce){if(Z)return Qs(T,P,H);P.flags|=128}if(ce=P.memoizedState,ce!==null&&(ce.rendering=null,ce.tail=null,ce.lastEffect=null),ze(Ki,Ki.current),Z)break;return null;case 22:return P.lanes=0,Yl(T,P,H,P.pendingProps);case 24:No(P,ts,T.memoizedState.cache)}return Yr(T,P,H)}function yh(T,P,H){if(T!==null)if(T.memoizedProps!==P.pendingProps)ns=!0;else{if(!gh(T,H)&&(P.flags&128)===0)return ns=!1,bp(T,P,H);ns=(T.flags&131072)!==0}else ns=!1,Yi&&(P.flags&1048576)!==0&&Qf(P,Ec,P.index);switch(P.lanes=0,P.tag){case 16:e:{var Z=P.pendingProps;if(T=Ul(P.elementType),P.type=T,typeof T=="function")Ou(T)?(Z=gl(T,Z),P.tag=1,P=dh(null,P,T,Z,H)):(P.tag=0,P=Vc(null,P,T,Z,H));else{if(T!=null){var ce=T.$$typeof;if(ce===le){P.tag=11,P=Rf(null,P,T,Z,H);break e}else if(ce===de){P.tag=14,P=Xl(null,P,T,Z,H);break e}}throw P=Oe(T)||T,Error(f(306,P,""))}}return P;case 0:return Vc(T,P,P.type,P.pendingProps,H);case 1:return Z=P.type,ce=gl(Z,P.pendingProps),dh(T,P,Z,ce,H);case 3:e:{if(Mt(P,P.stateNode.containerInfo),T===null)throw Error(f(387));Z=P.pendingProps;var ue=P.memoizedState;ce=ue.element,qh(T,P),Mc(P,Z,null,H);var Me=P.memoizedState;if(Z=Me.cache,No(P,ts,Z),Z!==ue.cache&&Wu(P,[ts],H,!0),mu(),Z=Me.element,ue.isDehydrated)if(ue={element:Z,isDehydrated:!1,cache:Me.cache},P.updateQueue.baseState=ue,P.memoizedState=ue,P.flags&256){P=$d(T,P,Z,H);break e}else if(Z!==ce){ce=aa(Error(f(424)),P),co(ce),P=$d(T,P,Z,H);break e}else{switch(T=P.stateNode.containerInfo,T.nodeType){case 9:T=T.body;break;default:T=T.nodeName==="HTML"?T.ownerDocument.body:T}for(br=To(T.firstChild),zr=P,Yi=!0,Vo=null,oa=!0,H=Zu(P,null,Z,H),P.child=H;H;)H.flags=H.flags&-3|4096,H=H.sibling}else{if(ol(),Z===ce){P=Yr(T,P,H);break e}ys(T,P,Z,H)}P=P.child}return P;case 26:return Kl(T,P),T===null?(H=um(P.type,null,P.pendingProps,null))?P.memoizedState=H:Yi||(H=P.type,T=P.pendingProps,Z=Qd(Ge.current).createElement(H),Z[pr]=P,Z[Ie]=T,Gs(Z,H,T),Xe(Z),P.stateNode=Z):P.memoizedState=um(P.type,T.memoizedProps,P.pendingProps,T.memoizedState),null;case 27:return Fn(P),T===null&&Yi&&(Z=P.stateNode=om(P.type,P.pendingProps,Ge.current),zr=P,oa=!0,ce=br,Hc(P.type)?(Np=ce,br=To(Z.firstChild)):br=ce),ys(T,P,P.pendingProps.children,H),Kl(T,P),T===null&&(P.flags|=4194304),P.child;case 5:return T===null&&Yi&&((ce=Z=br)&&(Z=Bm(Z,P.type,P.pendingProps,oa),Z!==null?(P.stateNode=Z,zr=P,br=To(Z.firstChild),oa=!1,ce=!0):ce=!1),ce||lo(P)),Fn(P),ce=P.type,ue=P.pendingProps,Me=T!==null?T.memoizedProps:null,Z=ue.children,Pp(ce,ue)?Z=null:Me!==null&&Pp(ce,Me)&&(P.flags|=32),P.memoizedState!==null&&(ce=eh(T,P,ql,null,null,H),Bf._currentValue=ce),Kl(T,P),ys(T,P,Z,H),P.child;case 6:return T===null&&Yi&&((T=H=br)&&(H=Um(H,P.pendingProps,oa),H!==null?(P.stateNode=H,zr=P,br=null,T=!0):T=!1),T||lo(P)),null;case 13:return qd(T,P,H);case 4:return Mt(P,P.stateNode.containerInfo),Z=P.pendingProps,T===null?P.child=Fo(P,null,Z,H):ys(T,P,Z,H),P.child;case 11:return Rf(T,P,P.type,P.pendingProps,H);case 7:return ys(T,P,P.pendingProps,H),P.child;case 8:return ys(T,P,P.pendingProps.children,H),P.child;case 12:return ys(T,P,P.pendingProps.children,H),P.child;case 10:return Z=P.pendingProps,No(P,P.type,Z.value),ys(T,P,Z.children,H),P.child;case 9:return ce=P.type._context,Z=P.pendingProps.children,cl(P),ce=Ci(ce),Z=Z(ce),P.flags|=1,ys(T,P,Z,H),P.child;case 14:return Xl(T,P,P.type,P.pendingProps,H);case 15:return uh(T,P,P.type,P.pendingProps,H);case 19:return Qs(T,P,H);case 31:return fh(T,P,H);case 22:return Yl(T,P,H,P.pendingProps);case 24:return cl(P),Z=Ci(ts),T===null?(ce=qu(),ce===null&&(ce=Pi,ue=zh(),ce.pooledCache=ue,ue.refCount++,ue!==null&&(ce.pooledCacheLanes|=H),ce=ue),P.memoizedState={parent:Z,cache:ce},pu(P),No(P,ts,ce)):((T.lanes&H)!==0&&(qh(T,P),Mc(P,null,null,H),mu()),ce=T.memoizedState,ue=P.memoizedState,ce.parent!==Z?(ce={parent:Z,cache:Z},P.memoizedState=ce,P.lanes===0&&(P.memoizedState=P.updateQueue.baseState=ce),No(P,ts,Z)):(Z=ue.cache,No(P,ts,Z),Z!==ce.cache&&Wu(P,[ts],H,!0))),ys(T,P,P.pendingProps.children,H),P.child;case 29:throw P.pendingProps}throw Error(f(156,P.tag))}function go(T){T.flags|=4}function Su(T,P,H,Z,ce){if((P=(T.mode&32)!==0)&&(P=!1),P){if(T.flags|=16777216,(ce&335544128)===ce)if(T.stateNode.complete)T.flags|=8192;else if(Br())T.flags|=8192;else throw po=Xu,fu}else T.flags&=-16777217}function Cf(T,P){if(P.type!=="stylesheet"||(P.state.loading&4)!==0)T.flags&=-16777217;else if(T.flags|=16777216,!mm(P))if(Br())T.flags|=8192;else throw po=Xu,fu}function jo(T,P){P!==null&&(T.flags|=4),T.flags&16384&&(P=T.tag!==22?ji():536870912,T.lanes|=P,wr|=P)}function yo(T,P){if(!Yi)switch(T.tailMode){case"hidden":P=T.tail;for(var H=null;P!==null;)P.alternate!==null&&(H=P),P=P.sibling;H===null?T.tail=null:H.sibling=null;break;case"collapsed":H=T.tail;for(var Z=null;H!==null;)H.alternate!==null&&(Z=H),H=H.sibling;Z===null?P||T.tail===null?T.tail=null:T.tail.sibling=null:Z.sibling=null}}function yr(T){var P=T.alternate!==null&&T.alternate.child===T.child,H=0,Z=0;if(P)for(var ce=T.child;ce!==null;)H|=ce.lanes|ce.childLanes,Z|=ce.subtreeFlags&65011712,Z|=ce.flags&65011712,ce.return=T,ce=ce.sibling;else for(ce=T.child;ce!==null;)H|=ce.lanes|ce.childLanes,Z|=ce.subtreeFlags,Z|=ce.flags,ce.return=T,ce=ce.sibling;return T.subtreeFlags|=Z,T.childLanes=H,P}function Tu(T,P,H){var Z=P.pendingProps;switch(ju(P),P.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(P),null;case 1:return yr(P),null;case 3:return H=P.stateNode,Z=null,T!==null&&(Z=T.memoizedState.cache),P.memoizedState.cache!==Z&&(P.flags|=2048),ho(ts),hn(),H.pendingContext&&(H.context=H.pendingContext,H.pendingContext=null),(T===null||T.child===null)&&(Tc(P)?go(P):T===null||T.memoizedState.isDehydrated&&(P.flags&256)===0||(P.flags|=1024,Gu())),yr(P),null;case 26:var ce=P.type,ue=P.memoizedState;return T===null?(go(P),ue!==null?(yr(P),Cf(P,ue)):(yr(P),Su(P,ce,null,Z,H))):ue?ue!==T.memoizedState?(go(P),yr(P),Cf(P,ue)):(yr(P),P.flags&=-16777217):(T=T.memoizedProps,T!==Z&&go(P),yr(P),Su(P,ce,T,Z,H)),null;case 27:if(Vn(P),H=Ge.current,ce=P.type,T!==null&&P.stateNode!=null)T.memoizedProps!==Z&&go(P);else{if(!Z){if(P.stateNode===null)throw Error(f(166));return yr(P),null}T=He.current,Tc(P)?Jf(P):(T=om(ce,Z,H),P.stateNode=T,go(P))}return yr(P),null;case 5:if(Vn(P),ce=P.type,T!==null&&P.stateNode!=null)T.memoizedProps!==Z&&go(P);else{if(!Z){if(P.stateNode===null)throw Error(f(166));return yr(P),null}if(ue=He.current,Tc(P))Jf(P);else{var Me=Qd(Ge.current);switch(ue){case 1:ue=Me.createElementNS("http://www.w3.org/2000/svg",ce);break;case 2:ue=Me.createElementNS("http://www.w3.org/1998/Math/MathML",ce);break;default:switch(ce){case"svg":ue=Me.createElementNS("http://www.w3.org/2000/svg",ce);break;case"math":ue=Me.createElementNS("http://www.w3.org/1998/Math/MathML",ce);break;case"script":ue=Me.createElement("div"),ue.innerHTML="<script><\/script>",ue=ue.removeChild(ue.firstChild);break;case"select":ue=typeof Z.is=="string"?Me.createElement("select",{is:Z.is}):Me.createElement("select"),Z.multiple?ue.multiple=!0:Z.size&&(ue.size=Z.size);break;default:ue=typeof Z.is=="string"?Me.createElement(ce,{is:Z.is}):Me.createElement(ce)}}ue[pr]=P,ue[Ie]=Z;e:for(Me=P.child;Me!==null;){if(Me.tag===5||Me.tag===6)ue.appendChild(Me.stateNode);else if(Me.tag!==4&&Me.tag!==27&&Me.child!==null){Me.child.return=Me,Me=Me.child;continue}if(Me===P)break e;for(;Me.sibling===null;){if(Me.return===null||Me.return===P)break e;Me=Me.return}Me.sibling.return=Me.return,Me=Me.sibling}P.stateNode=ue;e:switch(Gs(ue,ce,Z),ce){case"button":case"input":case"select":case"textarea":Z=!!Z.autoFocus;break e;case"img":Z=!0;break e;default:Z=!1}Z&&go(P)}}return yr(P),Su(P,P.type,T===null?null:T.memoizedProps,P.pendingProps,H),null;case 6:if(T&&P.stateNode!=null)T.memoizedProps!==Z&&go(P);else{if(typeof Z!="string"&&P.stateNode===null)throw Error(f(166));if(T=Ge.current,Tc(P)){if(T=P.stateNode,H=P.memoizedProps,Z=null,ce=zr,ce!==null)switch(ce.tag){case 27:case 5:Z=ce.memoizedProps}T[pr]=P,T=!!(T.nodeValue===H||Z!==null&&Z.suppressHydrationWarning===!0||Yp(T.nodeValue,H)),T||lo(P,!0)}else T=Qd(T).createTextNode(Z),T[pr]=P,P.stateNode=T}return yr(P),null;case 31:if(H=P.memoizedState,T===null||T.memoizedState!==null){if(Z=Tc(P),H!==null){if(T===null){if(!Z)throw Error(f(318));if(T=P.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(f(557));T[pr]=P}else ol(),(P.flags&128)===0&&(P.memoizedState=null),P.flags|=4;yr(P),T=!1}else H=Gu(),T!==null&&T.memoizedState!==null&&(T.memoizedState.hydrationErrors=H),T=!0;if(!T)return P.flags&256?(qr(P),P):(qr(P),null);if((P.flags&128)!==0)throw Error(f(558))}return yr(P),null;case 13:if(Z=P.memoizedState,T===null||T.memoizedState!==null&&T.memoizedState.dehydrated!==null){if(ce=Tc(P),Z!==null&&Z.dehydrated!==null){if(T===null){if(!ce)throw Error(f(318));if(ce=P.memoizedState,ce=ce!==null?ce.dehydrated:null,!ce)throw Error(f(317));ce[pr]=P}else ol(),(P.flags&128)===0&&(P.memoizedState=null),P.flags|=4;yr(P),ce=!1}else ce=Gu(),T!==null&&T.memoizedState!==null&&(T.memoizedState.hydrationErrors=ce),ce=!0;if(!ce)return P.flags&256?(qr(P),P):(qr(P),null)}return qr(P),(P.flags&128)!==0?(P.lanes=H,P):(H=Z!==null,T=T!==null&&T.memoizedState!==null,H&&(Z=P.child,ce=null,Z.alternate!==null&&Z.alternate.memoizedState!==null&&Z.alternate.memoizedState.cachePool!==null&&(ce=Z.alternate.memoizedState.cachePool.pool),ue=null,Z.memoizedState!==null&&Z.memoizedState.cachePool!==null&&(ue=Z.memoizedState.cachePool.pool),ue!==ce&&(Z.flags|=2048)),H!==T&&H&&(P.child.flags|=8192),jo(P,P.updateQueue),yr(P),null);case 4:return hn(),T===null&&Ap(P.stateNode.containerInfo),yr(P),null;case 10:return ho(P.type),yr(P),null;case 19:if(De(Ki),Z=P.memoizedState,Z===null)return yr(P),null;if(ce=(P.flags&128)!==0,ue=Z.rendering,ue===null)if(ce)yo(Z,!1);else{if(Fr!==0||T!==null&&(T.flags&128)!==0)for(T=P.child;T!==null;){if(ue=ca(T),ue!==null){for(P.flags|=128,yo(Z,!1),T=ue.updateQueue,P.updateQueue=T,jo(P,T),P.subtreeFlags=0,T=H,H=P.child;H!==null;)_c(H,T),H=H.sibling;return ze(Ki,Ki.current&1|2),Yi&&ao(P,Z.treeForkCount),P.child}T=T.sibling}Z.tail!==null&&Pe()>Kr&&(P.flags|=128,ce=!0,yo(Z,!1),P.lanes=4194304)}else{if(!ce)if(T=ca(ue),T!==null){if(P.flags|=128,ce=!0,T=T.updateQueue,P.updateQueue=T,jo(P,T),yo(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!ue.alternate&&!Yi)return yr(P),null}else 2*Pe()-Z.renderingStartTime>Kr&&H!==536870912&&(P.flags|=128,ce=!0,yo(Z,!1),P.lanes=4194304);Z.isBackwards?(ue.sibling=P.child,P.child=ue):(T=Z.last,T!==null?T.sibling=ue:P.child=ue,Z.last=ue)}return Z.tail!==null?(T=Z.tail,Z.rendering=T,Z.tail=T.sibling,Z.renderingStartTime=Pe(),T.sibling=null,H=Ki.current,ze(Ki,ce?H&1|2:H&1),Yi&&ao(P,Z.treeForkCount),T):(yr(P),null);case 22:case 23:return qr(P),gu(),Z=P.memoizedState!==null,T!==null?T.memoizedState!==null!==Z&&(P.flags|=8192):Z&&(P.flags|=8192),Z?(H&536870912)!==0&&(P.flags&128)===0&&(yr(P),P.subtreeFlags&6&&(P.flags|=8192)):yr(P),H=P.updateQueue,H!==null&&jo(P,H.retryQueue),H=null,T!==null&&T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(H=T.memoizedState.cachePool.pool),Z=null,P.memoizedState!==null&&P.memoizedState.cachePool!==null&&(Z=P.memoizedState.cachePool.pool),Z!==H&&(P.flags|=2048),T!==null&&De(ul),null;case 24:return H=null,T!==null&&(H=T.memoizedState.cache),P.memoizedState.cache!==H&&(P.flags|=2048),ho(ts),yr(P),null;case 25:return null;case 30:return null}throw Error(f(156,P.tag))}function Ma(T,P){switch(ju(P),P.tag){case 1:return T=P.flags,T&65536?(P.flags=T&-65537|128,P):null;case 3:return ho(ts),hn(),T=P.flags,(T&65536)!==0&&(T&128)===0?(P.flags=T&-65537|128,P):null;case 26:case 27:case 5:return Vn(P),null;case 31:if(P.memoizedState!==null){if(qr(P),P.alternate===null)throw Error(f(340));ol()}return T=P.flags,T&65536?(P.flags=T&-65537|128,P):null;case 13:if(qr(P),T=P.memoizedState,T!==null&&T.dehydrated!==null){if(P.alternate===null)throw Error(f(340));ol()}return T=P.flags,T&65536?(P.flags=T&-65537|128,P):null;case 19:return De(Ki),null;case 4:return hn(),null;case 10:return ho(P.type),null;case 22:case 23:return qr(P),gu(),T!==null&&De(ul),T=P.flags,T&65536?(P.flags=T&-65537|128,P):null;case 24:return ho(ts),null;case 25:return null;default:return null}}function ua(T,P){switch(ju(P),P.tag){case 3:ho(ts),hn();break;case 26:case 27:case 5:Vn(P);break;case 4:hn();break;case 31:P.memoizedState!==null&&qr(P);break;case 13:qr(P);break;case 19:De(Ki);break;case 10:ho(P.type);break;case 22:case 23:qr(P),gu(),T!==null&&De(ul);break;case 24:ho(ts)}}function Ca(T,P){try{var H=P.updateQueue,Z=H!==null?H.lastEffect:null;if(Z!==null){var ce=Z.next;H=ce;do{if((H.tag&T)===T){Z=void 0;var ue=H.create,Me=H.inst;Z=ue(),Me.destroy=Z}H=H.next}while(H!==ce)}}catch(Le){sr(P,P.return,Le)}}function bs(T,P,H){try{var Z=P.updateQueue,ce=Z!==null?Z.lastEffect:null;if(ce!==null){var ue=ce.next;Z=ue;do{if((Z.tag&T)===T){var Me=Z.inst,Le=Me.destroy;if(Le!==void 0){Me.destroy=void 0,ce=P;var $e=H,qt=Le;try{qt()}catch(Sn){sr(ce,$e,Sn)}}}Z=Z.next}while(Z!==ue)}}catch(Sn){sr(P,P.return,Sn)}}function Wa(T){var P=T.updateQueue;if(P!==null){var H=T.stateNode;try{ad(P,H)}catch(Z){sr(T,T.return,Z)}}}function xs(T,P,H){H.props=gl(T.type,T.memoizedProps),H.state=T.memoizedState;try{H.componentWillUnmount()}catch(Z){sr(T,P,Z)}}function zo(T,P){try{var H=T.ref;if(H!==null){switch(T.tag){case 26:case 27:case 5:var Z=T.stateNode;break;case 30:Z=T.stateNode;break;default:Z=T.stateNode}typeof H=="function"?T.refCleanup=H(Z):H.current=Z}}catch(ce){sr(T,P,ce)}}function Es(T,P){var H=T.ref,Z=T.refCleanup;if(H!==null)if(typeof Z=="function")try{Z()}catch(ce){sr(T,P,ce)}finally{T.refCleanup=null,T=T.alternate,T!=null&&(T.refCleanup=null)}else if(typeof H=="function")try{H(null)}catch(ce){sr(T,P,ce)}else H.current=null}function Au(T){var P=T.type,H=T.memoizedProps,Z=T.stateNode;try{e:switch(P){case"button":case"input":case"select":case"textarea":H.autoFocus&&Z.focus();break e;case"img":H.src?Z.src=H.src:H.srcSet&&(Z.srcset=H.srcSet)}}catch(ce){sr(T,T.return,ce)}}function cs(T,P,H){try{var Z=T.stateNode;Dm(Z,T.type,H,P),Z[Ie]=P}catch(ce){sr(T,T.return,ce)}}function kr(T){return T.tag===5||T.tag===3||T.tag===26||T.tag===27&&Hc(T.type)||T.tag===4}function $i(T){e:for(;;){for(;T.sibling===null;){if(T.return===null||kr(T.return))return null;T=T.return}for(T.sibling.return=T.return,T=T.sibling;T.tag!==5&&T.tag!==6&&T.tag!==18;){if(T.tag===27&&Hc(T.type)||T.flags&2||T.child===null||T.tag===4)continue e;T.child.return=T,T=T.child}if(!(T.flags&2))return T.stateNode}}function xo(T,P,H){var Z=T.tag;if(Z===5||Z===6)T=T.stateNode,P?(H.nodeType===9?H.body:H.nodeName==="HTML"?H.ownerDocument.body:H).insertBefore(T,P):(P=H.nodeType===9?H.body:H.nodeName==="HTML"?H.ownerDocument.body:H,P.appendChild(T),H=H._reactRootContainer,H!=null||P.onclick!==null||(P.onclick=Fa));else if(Z!==4&&(Z===27&&Hc(T.type)&&(H=T.stateNode,P=null),T=T.child,T!==null))for(xo(T,P,H),T=T.sibling;T!==null;)xo(T,P,H),T=T.sibling}function Bs(T,P,H){var Z=T.tag;if(Z===5||Z===6)T=T.stateNode,P?H.insertBefore(T,P):H.appendChild(T);else if(Z!==4&&(Z===27&&Hc(T.type)&&(H=T.stateNode),T=T.child,T!==null))for(Bs(T,P,H),T=T.sibling;T!==null;)Bs(T,P,H),T=T.sibling}function xh(T){var P=T.stateNode,H=T.memoizedProps;try{for(var Z=T.type,ce=P.attributes;ce.length;)P.removeAttributeNode(ce[0]);Gs(P,Z,H),P[pr]=T,P[Ie]=H}catch(ue){sr(T,T.return,ue)}}var Pa=!1,Er=!1,$a=!1,Yd=typeof WeakSet=="function"?WeakSet:Set,_s=null;function Ep(T,P){if(T=T.containerInfo,Mp=ap,T=Xf(T),Fh(T)){if("selectionStart"in T)var H={start:T.selectionStart,end:T.selectionEnd};else e:{H=(H=T.ownerDocument)&&H.defaultView||window;var Z=H.getSelection&&H.getSelection();if(Z&&Z.rangeCount!==0){H=Z.anchorNode;var ce=Z.anchorOffset,ue=Z.focusNode;Z=Z.focusOffset;try{H.nodeType,ue.nodeType}catch{H=null;break e}var Me=0,Le=-1,$e=-1,qt=0,Sn=0,Cn=T,on=null;t:for(;;){for(var xn;Cn!==H||ce!==0&&Cn.nodeType!==3||(Le=Me+ce),Cn!==ue||Z!==0&&Cn.nodeType!==3||($e=Me+Z),Cn.nodeType===3&&(Me+=Cn.nodeValue.length),(xn=Cn.firstChild)!==null;)on=Cn,Cn=xn;for(;;){if(Cn===T)break t;if(on===H&&++qt===ce&&(Le=Me),on===ue&&++Sn===Z&&($e=Me),(xn=Cn.nextSibling)!==null)break;Cn=on,on=Cn.parentNode}Cn=xn}H=Le===-1||$e===-1?null:{start:Le,end:$e}}else H=null}H=H||{start:0,end:0}}else H=null;for(Cp={focusedElem:T,selectionRange:H},ap=!1,_s=P;_s!==null;)if(P=_s,T=P.child,(P.subtreeFlags&1028)!==0&&T!==null)T.return=P,_s=T;else for(;_s!==null;){switch(P=_s,ue=P.alternate,T=P.flags,P.tag){case 0:if((T&4)!==0&&(T=P.updateQueue,T=T!==null?T.events:null,T!==null))for(H=0;H<T.length;H++)ce=T[H],ce.ref.impl=ce.nextImpl;break;case 11:case 15:break;case 1:if((T&1024)!==0&&ue!==null){T=void 0,H=P,ce=ue.memoizedProps,ue=ue.memoizedState,Z=H.stateNode;try{var yi=gl(H.type,ce);T=Z.getSnapshotBeforeUpdate(yi,ue),Z.__reactInternalSnapshotBeforeUpdate=T}catch(Mi){sr(H,H.return,Mi)}}break;case 3:if((T&1024)!==0){if(T=P.stateNode.containerInfo,H=T.nodeType,H===9)kp(T);else if(H===1)switch(T.nodeName){case"HEAD":case"HTML":case"BODY":kp(T);break;default:T.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((T&1024)!==0)throw Error(f(163))}if(T=P.sibling,T!==null){T.return=P.return,_s=T;break}_s=P.return}}function Dr(T,P,H){var Z=H.flags;switch(H.tag){case 0:case 11:case 15:Da(T,H),Z&4&&Ca(5,H);break;case 1:if(Da(T,H),Z&4)if(T=H.stateNode,P===null)try{T.componentDidMount()}catch(Me){sr(H,H.return,Me)}else{var ce=gl(H.type,P.memoizedProps);P=P.memoizedState;try{T.componentDidUpdate(ce,P,T.__reactInternalSnapshotBeforeUpdate)}catch(Me){sr(H,H.return,Me)}}Z&64&&Wa(H),Z&512&&zo(H,H.return);break;case 3:if(Da(T,H),Z&64&&(T=H.updateQueue,T!==null)){if(P=null,H.child!==null)switch(H.child.tag){case 27:case 5:P=H.child.stateNode;break;case 1:P=H.child.stateNode}try{ad(T,P)}catch(Me){sr(H,H.return,Me)}}break;case 27:P===null&&Z&4&&xh(H);case 26:case 5:Da(T,H),P===null&&Z&4&&Au(H),Z&512&&zo(H,H.return);break;case 12:Da(T,H);break;case 31:Da(T,H),Z&4&&yl(T,H);break;case 13:Da(T,H),Z&4&&Nc(T,H),Z&64&&(T=H.memoizedState,T!==null&&(T=T.dehydrated,T!==null&&(H=ee.bind(null,H),jm(T,H))));break;case 22:if(Z=H.memoizedState!==null||Pa,!Z){P=P!==null&&P.memoizedState!==null||Er,ce=Pa;var ue=Er;Pa=Z,(Er=P)&&!ue?Us(T,H,(H.subtreeFlags&8772)!==0):Da(T,H),Pa=ce,Er=ue}break;case 30:break;default:Da(T,H)}}function Ru(T){var P=T.alternate;P!==null&&(T.alternate=null,Ru(P)),T.child=null,T.deletions=null,T.sibling=null,T.tag===5&&(P=T.stateNode,P!==null&&Dn(P)),T.stateNode=null,T.return=null,T.dependencies=null,T.memoizedProps=null,T.memoizedState=null,T.pendingProps=null,T.stateNode=null,T.updateQueue=null}var ur=null,Cs=!1;function Ia(T,P,H){for(H=H.child;H!==null;)_h(T,P,H),H=H.sibling}function _h(T,P,H){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(wn,H)}catch{}switch(H.tag){case 26:Er||Es(H,P),Ia(T,P,H),H.memoizedState?H.memoizedState.count--:H.stateNode&&(H=H.stateNode,H.parentNode.removeChild(H));break;case 27:Er||Es(H,P);var Z=ur,ce=Cs;Hc(H.type)&&(ur=H.stateNode,Cs=!1),Ia(T,P,H),Lf(H.stateNode),ur=Z,Cs=ce;break;case 5:Er||Es(H,P);case 6:if(Z=ur,ce=Cs,ur=null,Ia(T,P,H),ur=Z,Cs=ce,ur!==null)if(Cs)try{(ur.nodeType===9?ur.body:ur.nodeName==="HTML"?ur.ownerDocument.body:ur).removeChild(H.stateNode)}catch(ue){sr(H,P,ue)}else try{ur.removeChild(H.stateNode)}catch(ue){sr(H,P,ue)}break;case 18:ur!==null&&(Cs?(T=ur,tm(T.nodeType===9?T.body:T.nodeName==="HTML"?T.ownerDocument.body:T,H.stateNode),Mh(T)):tm(ur,H.stateNode));break;case 4:Z=ur,ce=Cs,ur=H.stateNode.containerInfo,Cs=!0,Ia(T,P,H),ur=Z,Cs=ce;break;case 0:case 11:case 14:case 15:bs(2,H,P),Er||bs(4,H,P),Ia(T,P,H);break;case 1:Er||(Es(H,P),Z=H.stateNode,typeof Z.componentWillUnmount=="function"&&xs(H,P,Z)),Ia(T,P,H);break;case 21:Ia(T,P,H);break;case 22:Er=(Z=Er)||H.memoizedState!==null,Ia(T,P,H),Er=Z;break;default:Ia(T,P,H)}}function yl(T,P){if(P.memoizedState===null&&(T=P.alternate,T!==null&&(T=T.memoizedState,T!==null))){T=T.dehydrated;try{Mh(T)}catch(H){sr(P,P.return,H)}}}function Nc(T,P){if(P.memoizedState===null&&(T=P.alternate,T!==null&&(T=T.memoizedState,T!==null&&(T=T.dehydrated,T!==null))))try{Mh(T)}catch(H){sr(P,P.return,H)}}function Pf(T){switch(T.tag){case 31:case 13:case 19:var P=T.stateNode;return P===null&&(P=T.stateNode=new Yd),P;case 22:return T=T.stateNode,P=T._retryCache,P===null&&(P=T._retryCache=new Yd),P;default:throw Error(f(435,T.tag))}}function Go(T,P){var H=Pf(T);P.forEach(function(Z){if(!H.has(Z)){H.add(Z);var ce=oe.bind(null,T,Z);Z.then(ce,ce)}})}function us(T,P){var H=P.deletions;if(H!==null)for(var Z=0;Z<H.length;Z++){var ce=H[Z],ue=T,Me=P,Le=Me;e:for(;Le!==null;){switch(Le.tag){case 27:if(Hc(Le.type)){ur=Le.stateNode,Cs=!1;break e}break;case 5:ur=Le.stateNode,Cs=!1;break e;case 3:case 4:ur=Le.stateNode.containerInfo,Cs=!0;break e}Le=Le.return}if(ur===null)throw Error(f(160));_h(ue,Me,ce),ur=null,Cs=!1,ue=ce.alternate,ue!==null&&(ue.return=null),ce.return=null}if(P.subtreeFlags&13886)for(P=P.child;P!==null;)xl(P,T),P=P.sibling}var ka=null;function xl(T,P){var H=T.alternate,Z=T.flags;switch(T.tag){case 0:case 11:case 14:case 15:us(P,T),hs(T),Z&4&&(bs(3,T,T.return),Ca(3,T),bs(5,T,T.return));break;case 1:us(P,T),hs(T),Z&512&&(Er||H===null||Es(H,H.return)),Z&64&&Pa&&(T=T.updateQueue,T!==null&&(Z=T.callbacks,Z!==null&&(H=T.shared.hiddenCallbacks,T.shared.hiddenCallbacks=H===null?Z:H.concat(Z))));break;case 26:var ce=ka;if(us(P,T),hs(T),Z&512&&(Er||H===null||Es(H,H.return)),Z&4){var ue=H!==null?H.memoizedState:null;if(Z=T.memoizedState,H===null)if(Z===null)if(T.stateNode===null){e:{Z=T.type,H=T.memoizedProps,ce=ce.ownerDocument||ce;t:switch(Z){case"title":ue=ce.getElementsByTagName("title")[0],(!ue||ue[jn]||ue[pr]||ue.namespaceURI==="http://www.w3.org/2000/svg"||ue.hasAttribute("itemprop"))&&(ue=ce.createElement(Z),ce.head.insertBefore(ue,ce.querySelector("head > title"))),Gs(ue,Z,H),ue[pr]=T,Xe(ue),Z=ue;break e;case"link":var Me=dm("link","href",ce).get(Z+(H.href||""));if(Me){for(var Le=0;Le<Me.length;Le++)if(ue=Me[Le],ue.getAttribute("href")===(H.href==null||H.href===""?null:H.href)&&ue.getAttribute("rel")===(H.rel==null?null:H.rel)&&ue.getAttribute("title")===(H.title==null?null:H.title)&&ue.getAttribute("crossorigin")===(H.crossOrigin==null?null:H.crossOrigin)){Me.splice(Le,1);break t}}ue=ce.createElement(Z),Gs(ue,Z,H),ce.head.appendChild(ue);break;case"meta":if(Me=dm("meta","content",ce).get(Z+(H.content||""))){for(Le=0;Le<Me.length;Le++)if(ue=Me[Le],ue.getAttribute("content")===(H.content==null?null:""+H.content)&&ue.getAttribute("name")===(H.name==null?null:H.name)&&ue.getAttribute("property")===(H.property==null?null:H.property)&&ue.getAttribute("http-equiv")===(H.httpEquiv==null?null:H.httpEquiv)&&ue.getAttribute("charset")===(H.charSet==null?null:H.charSet)){Me.splice(Le,1);break t}}ue=ce.createElement(Z),Gs(ue,Z,H),ce.head.appendChild(ue);break;default:throw Error(f(468,Z))}ue[pr]=T,Xe(ue),Z=ue}T.stateNode=Z}else pm(ce,T.type,T.stateNode);else T.stateNode=fm(ce,Z,T.memoizedProps);else ue!==Z?(ue===null?H.stateNode!==null&&(H=H.stateNode,H.parentNode.removeChild(H)):ue.count--,Z===null?pm(ce,T.type,T.stateNode):fm(ce,Z,T.memoizedProps)):Z===null&&T.stateNode!==null&&cs(T,T.memoizedProps,H.memoizedProps)}break;case 27:us(P,T),hs(T),Z&512&&(Er||H===null||Es(H,H.return)),H!==null&&Z&4&&cs(T,T.memoizedProps,H.memoizedProps);break;case 5:if(us(P,T),hs(T),Z&512&&(Er||H===null||Es(H,H.return)),T.flags&32){ce=T.stateNode;try{Mr(ce,"")}catch(yi){sr(T,T.return,yi)}}Z&4&&T.stateNode!=null&&(ce=T.memoizedProps,cs(T,ce,H!==null?H.memoizedProps:ce)),Z&1024&&($a=!0);break;case 6:if(us(P,T),hs(T),Z&4){if(T.stateNode===null)throw Error(f(162));Z=T.memoizedProps,H=T.stateNode;try{H.nodeValue=Z}catch(yi){sr(T,T.return,yi)}}break;case 3:if(tp=null,ce=ka,ka=Jd(P.containerInfo),us(P,T),ka=ce,hs(T),Z&4&&H!==null&&H.memoizedState.isDehydrated)try{Mh(P.containerInfo)}catch(yi){sr(T,T.return,yi)}$a&&($a=!1,bh(T));break;case 4:Z=ka,ka=Jd(T.stateNode.containerInfo),us(P,T),hs(T),ka=Z;break;case 12:us(P,T),hs(T);break;case 31:us(P,T),hs(T),Z&4&&(Z=T.updateQueue,Z!==null&&(T.updateQueue=null,Go(T,Z)));break;case 13:us(P,T),hs(T),T.child.flags&8192&&T.memoizedState!==null!=(H!==null&&H.memoizedState!==null)&&(Lc=Pe()),Z&4&&(Z=T.updateQueue,Z!==null&&(T.updateQueue=null,Go(T,Z)));break;case 22:ce=T.memoizedState!==null;var $e=H!==null&&H.memoizedState!==null,qt=Pa,Sn=Er;if(Pa=qt||ce,Er=Sn||$e,us(P,T),Er=Sn,Pa=qt,hs(T),Z&8192)e:for(P=T.stateNode,P._visibility=ce?P._visibility&-2:P._visibility|1,ce&&(H===null||$e||Pa||Er||_o(T)),H=null,P=T;;){if(P.tag===5||P.tag===26){if(H===null){$e=H=P;try{if(ue=$e.stateNode,ce)Me=ue.style,typeof Me.setProperty=="function"?Me.setProperty("display","none","important"):Me.display="none";else{Le=$e.stateNode;var Cn=$e.memoizedProps.style,on=Cn!=null&&Cn.hasOwnProperty("display")?Cn.display:null;Le.style.display=on==null||typeof on=="boolean"?"":(""+on).trim()}}catch(yi){sr($e,$e.return,yi)}}}else if(P.tag===6){if(H===null){$e=P;try{$e.stateNode.nodeValue=ce?"":$e.memoizedProps}catch(yi){sr($e,$e.return,yi)}}}else if(P.tag===18){if(H===null){$e=P;try{var xn=$e.stateNode;ce?im(xn,!0):im($e.stateNode,!1)}catch(yi){sr($e,$e.return,yi)}}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===T)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===T)break e;for(;P.sibling===null;){if(P.return===null||P.return===T)break e;H===P&&(H=null),P=P.return}H===P&&(H=null),P.sibling.return=P.return,P=P.sibling}Z&4&&(Z=T.updateQueue,Z!==null&&(H=Z.retryQueue,H!==null&&(Z.retryQueue=null,Go(T,H))));break;case 19:us(P,T),hs(T),Z&4&&(Z=T.updateQueue,Z!==null&&(T.updateQueue=null,Go(T,Z)));break;case 30:break;case 21:break;default:us(P,T),hs(T)}}function hs(T){var P=T.flags;if(P&2){try{for(var H,Z=T.return;Z!==null;){if(kr(Z)){H=Z;break}Z=Z.return}if(H==null)throw Error(f(160));switch(H.tag){case 27:var ce=H.stateNode,ue=$i(T);Bs(T,ue,ce);break;case 5:var Me=H.stateNode;H.flags&32&&(Mr(Me,""),H.flags&=-33);var Le=$i(T);Bs(T,Le,Me);break;case 3:case 4:var $e=H.stateNode.containerInfo,qt=$i(T);xo(T,qt,$e);break;default:throw Error(f(161))}}catch(Sn){sr(T,T.return,Sn)}T.flags&=-3}P&4096&&(T.flags&=-4097)}function bh(T){if(T.subtreeFlags&1024)for(T=T.child;T!==null;){var P=T;bh(P),P.tag===5&&P.flags&1024&&P.stateNode.reset(),T=T.sibling}}function Da(T,P){if(P.subtreeFlags&8772)for(P=P.child;P!==null;)Dr(T,P.alternate,P),P=P.sibling}function _o(T){for(T=T.child;T!==null;){var P=T;switch(P.tag){case 0:case 11:case 14:case 15:bs(4,P,P.return),_o(P);break;case 1:Es(P,P.return);var H=P.stateNode;typeof H.componentWillUnmount=="function"&&xs(P,P.return,H),_o(P);break;case 27:Lf(P.stateNode);case 26:case 5:Es(P,P.return),_o(P);break;case 22:P.memoizedState===null&&_o(P);break;case 30:_o(P);break;default:_o(P)}T=T.sibling}}function Us(T,P,H){for(H=H&&(P.subtreeFlags&8772)!==0,P=P.child;P!==null;){var Z=P.alternate,ce=T,ue=P,Me=ue.flags;switch(ue.tag){case 0:case 11:case 15:Us(ce,ue,H),Ca(4,ue);break;case 1:if(Us(ce,ue,H),Z=ue,ce=Z.stateNode,typeof ce.componentDidMount=="function")try{ce.componentDidMount()}catch(qt){sr(Z,Z.return,qt)}if(Z=ue,ce=Z.updateQueue,ce!==null){var Le=Z.stateNode;try{var $e=ce.shared.hiddenCallbacks;if($e!==null)for(ce.shared.hiddenCallbacks=null,ce=0;ce<$e.length;ce++)Cc($e[ce],Le)}catch(qt){sr(Z,Z.return,qt)}}H&&Me&64&&Wa(ue),zo(ue,ue.return);break;case 27:xh(ue);case 26:case 5:Us(ce,ue,H),H&&Z===null&&Me&4&&Au(ue),zo(ue,ue.return);break;case 12:Us(ce,ue,H);break;case 31:Us(ce,ue,H),H&&Me&4&&yl(ce,ue);break;case 13:Us(ce,ue,H),H&&Me&4&&Nc(ce,ue);break;case 22:ue.memoizedState===null&&Us(ce,ue,H),zo(ue,ue.return);break;case 30:break;default:Us(ce,ue,H)}P=P.sibling}}function _l(T,P){var H=null;T!==null&&T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(H=T.memoizedState.cachePool.pool),T=null,P.memoizedState!==null&&P.memoizedState.cachePool!==null&&(T=P.memoizedState.cachePool.pool),T!==H&&(T!=null&&T.refCount++,H!=null&&Ol(H))}function Ql(T,P){T=null,P.alternate!==null&&(T=P.alternate.memoizedState.cache),P=P.memoizedState.cache,P!==T&&(P.refCount++,T!=null&&Ol(T))}function Ss(T,P,H,Z){if(P.subtreeFlags&10256)for(P=P.child;P!==null;)If(T,P,H,Z),P=P.sibling}function If(T,P,H,Z){var ce=P.flags;switch(P.tag){case 0:case 11:case 15:Ss(T,P,H,Z),ce&2048&&Ca(9,P);break;case 1:Ss(T,P,H,Z);break;case 3:Ss(T,P,H,Z),ce&2048&&(T=null,P.alternate!==null&&(T=P.alternate.memoizedState.cache),P=P.memoizedState.cache,P!==T&&(P.refCount++,T!=null&&Ol(T)));break;case 12:if(ce&2048){Ss(T,P,H,Z),T=P.stateNode;try{var ue=P.memoizedProps,Me=ue.id,Le=ue.onPostCommit;typeof Le=="function"&&Le(Me,P.alternate===null?"mount":"update",T.passiveEffectDuration,-0)}catch($e){sr(P,P.return,$e)}}else Ss(T,P,H,Z);break;case 31:Ss(T,P,H,Z);break;case 13:Ss(T,P,H,Z);break;case 23:break;case 22:ue=P.stateNode,Me=P.alternate,P.memoizedState!==null?ue._visibility&2?Ss(T,P,H,Z):vo(T,P):ue._visibility&2?Ss(T,P,H,Z):(ue._visibility|=2,Ts(T,P,H,Z,(P.subtreeFlags&10256)!==0||!1)),ce&2048&&_l(Me,P);break;case 24:Ss(T,P,H,Z),ce&2048&&Ql(P.alternate,P);break;default:Ss(T,P,H,Z)}}function Ts(T,P,H,Z,ce){for(ce=ce&&((P.subtreeFlags&10256)!==0||!1),P=P.child;P!==null;){var ue=T,Me=P,Le=H,$e=Z,qt=Me.flags;switch(Me.tag){case 0:case 11:case 15:Ts(ue,Me,Le,$e,ce),Ca(8,Me);break;case 23:break;case 22:var Sn=Me.stateNode;Me.memoizedState!==null?Sn._visibility&2?Ts(ue,Me,Le,$e,ce):vo(ue,Me):(Sn._visibility|=2,Ts(ue,Me,Le,$e,ce)),ce&&qt&2048&&_l(Me.alternate,Me);break;case 24:Ts(ue,Me,Le,$e,ce),ce&&qt&2048&&Ql(Me.alternate,Me);break;default:Ts(ue,Me,Le,$e,ce)}P=P.sibling}}function vo(T,P){if(P.subtreeFlags&10256)for(P=P.child;P!==null;){var H=T,Z=P,ce=Z.flags;switch(Z.tag){case 22:vo(H,Z),ce&2048&&_l(Z.alternate,Z);break;case 24:vo(H,Z),ce&2048&&Ql(Z.alternate,Z);break;default:vo(H,Z)}P=P.sibling}}var Jl=8192;function ha(T,P,H){if(T.subtreeFlags&Jl)for(T=T.child;T!==null;)Eh(T,P,H),T=T.sibling}function Eh(T,P,H){switch(T.tag){case 26:ha(T,P,H),T.flags&Jl&&T.memoizedState!==null&&Jm(H,ka,T.memoizedState,T.memoizedProps);break;case 5:ha(T,P,H);break;case 3:case 4:var Z=ka;ka=Jd(T.stateNode.containerInfo),ha(T,P,H),ka=Z;break;case 22:T.memoizedState===null&&(Z=T.alternate,Z!==null&&Z.memoizedState!==null?(Z=Jl,Jl=16777216,ha(T,P,H),Jl=Z):ha(T,P,H));break;default:ha(T,P,H)}}function ec(T){var P=T.alternate;if(P!==null&&(T=P.child,T!==null)){P.child=null;do P=T.sibling,T.sibling=null,T=P;while(T!==null)}}function vl(T){var P=T.deletions;if((T.flags&16)!==0){if(P!==null)for(var H=0;H<P.length;H++){var Z=P[H];_s=Z,Gr(Z,T)}ec(T)}if(T.subtreeFlags&10256)for(T=T.child;T!==null;)Js(T),T=T.sibling}function Js(T){switch(T.tag){case 0:case 11:case 15:vl(T),T.flags&2048&&bs(9,T,T.return);break;case 3:vl(T);break;case 12:vl(T);break;case 22:var P=T.stateNode;T.memoizedState!==null&&P._visibility&2&&(T.return===null||T.return.tag!==13)?(P._visibility&=-3,ea(T)):vl(T);break;default:vl(T)}}function ea(T){var P=T.deletions;if((T.flags&16)!==0){if(P!==null)for(var H=0;H<P.length;H++){var Z=P[H];_s=Z,Gr(Z,T)}ec(T)}for(T=T.child;T!==null;){switch(P=T,P.tag){case 0:case 11:case 15:bs(8,P,P.return),ea(P);break;case 22:H=P.stateNode,H._visibility&2&&(H._visibility&=-3,ea(P));break;default:ea(P)}T=T.sibling}}function Gr(T,P){for(;_s!==null;){var H=_s;switch(H.tag){case 0:case 11:case 15:bs(8,H,P);break;case 23:case 22:if(H.memoizedState!==null&&H.memoizedState.cachePool!==null){var Z=H.memoizedState.cachePool.pool;Z!=null&&Z.refCount++}break;case 24:Ol(H.memoizedState.cache)}if(Z=H.child,Z!==null)Z.return=H,_s=Z;else e:for(H=T;_s!==null;){Z=_s;var ce=Z.sibling,ue=Z.return;if(Ru(Z),Z===H){_s=null;break e}if(ce!==null){ce.return=ue,_s=ce;break e}_s=ue}}}var Ho={getCacheForType:function(T){var P=Ci(ts),H=P.data.get(T);return H===void 0&&(H=T(),P.data.set(T,H)),H},cacheSignal:function(){return Ci(ts).controller.signal}},Li=typeof WeakMap=="function"?WeakMap:Map,vi=0,Pi=null,Bi=null,Fi=0,Ji=0,Ps=null,Va=!1,qa=!1,kf=!1,fa=0,Fr=0,bo=0,bl=0,wu=0,js=0,wr=0,tc=null,Hr=null,Wr=!1,Lc=0,Df=0,Kr=1/0,Or=null,Zr=null,hr=0,da=null,Fc=null,Na=0,Oc=0,Bc=null,Mu=null,El=0,nc=null;function pa(){return(vi&2)!==0&&Fi!==0?Fi&-Fi:ye.T!==null?fn():es()}function Gi(){if(js===0)if((Fi&536870912)===0||Yi){var T=Hn;Hn<<=1,(Hn&3932160)===0&&(Hn=262144),js=T}else js=536870912;return T=Ys.current,T!==null&&(T.flags|=32),js}function Ui(T,P,H){(T===Pi&&(Ji===2||Ji===9)||T.cancelPendingCommit!==null)&&(Tl(T,0),rs(T,Fi,js,!1)),Jr(T,H),((vi&2)===0||T!==Pi)&&(T===Pi&&((vi&2)===0&&(bl|=H),Fr===4&&rs(T,Fi,js,!1)),Wn(T))}function Hi(T,P,H){if((vi&6)!==0)throw Error(f(327));var Z=!H&&(P&127)===0&&(P&T.expiredLanes)===0||ci(T,P),ce=Z?Cu(T,P):zs(T,P,!0),ue=Z;do{if(ce===0){qa&&!Z&&rs(T,P,0,!1);break}else{if(H=T.current.alternate,ue&&!dr(H)){ce=zs(T,P,!1),ue=!1;continue}if(ce===2){if(ue=P,T.errorRecoveryDisabledLanes&ue)var Me=0;else Me=T.pendingLanes&-536870913,Me=Me!==0?Me:Me&536870912?536870912:0;if(Me!==0){P=Me;e:{var Le=T;ce=tc;var $e=Le.current.memoizedState.isDehydrated;if($e&&(Tl(Le,Me).flags|=256),Me=zs(Le,Me,!1),Me!==2){if(kf&&!$e){Le.errorRecoveryDisabledLanes|=ue,bl|=ue,ce=4;break e}ue=Hr,Hr=ce,ue!==null&&(Hr===null?Hr=ue:Hr.push.apply(Hr,ue))}ce=Me}if(ue=!1,ce!==2)continue}}if(ce===1){Tl(T,0),rs(T,P,0,!0);break}e:{switch(Z=T,ue=ce,ue){case 0:case 1:throw Error(f(345));case 4:if((P&4194048)!==P)break;case 6:rs(Z,P,js,!Va);break e;case 2:Hr=null;break;case 3:case 5:break;default:throw Error(f(329))}if((P&62914560)===P&&(ce=Lc+300-Pe(),10<ce)){if(rs(Z,P,js,!Va),pn(Z,0,!0)!==0)break e;Na=P,Z.timeoutHandle=Jp(qi.bind(null,Z,H,Hr,Or,Wr,P,js,bl,wr,Va,ue,"Throttled",-0,0),ce);break e}qi(Z,H,Hr,Or,Wr,P,js,bl,wr,Va,ue,null,-0,0)}}break}while(!0);Wn(T)}function qi(T,P,H,Z,ce,ue,Me,Le,$e,qt,Sn,Cn,on,xn){if(T.timeoutHandle=-1,Cn=P.subtreeFlags,Cn&8192||(Cn&16785408)===16785408){Cn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fa},Eh(P,ue,Cn);var yi=(ue&62914560)===ue?Lc-Pe():(ue&4194048)===ue?Df-Pe():0;if(yi=e0(Cn,yi),yi!==null){Na=ue,T.cancelPendingCommit=yi($o.bind(null,T,P,ue,H,Z,ce,Me,Le,$e,Sn,Cn,null,on,xn)),rs(T,ue,Me,!qt);return}}$o(T,P,ue,H,Z,ce,Me,Le,$e)}function dr(T){for(var P=T;;){var H=P.tag;if((H===0||H===11||H===15)&&P.flags&16384&&(H=P.updateQueue,H!==null&&(H=H.stores,H!==null)))for(var Z=0;Z<H.length;Z++){var ce=H[Z],ue=ce.getSnapshot;ce=ce.value;try{if(!Ns(ue(),ce))return!1}catch{return!1}}if(H=P.child,P.subtreeFlags&16384&&H!==null)H.return=P,P=H;else{if(P===T)break;for(;P.sibling===null;){if(P.return===null||P.return===T)return!0;P=P.return}P.sibling.return=P.return,P=P.sibling}}return!0}function rs(T,P,H,Z){P&=~wu,P&=~bl,T.suspendedLanes|=P,T.pingedLanes&=~P,Z&&(T.warmLanes|=P),Z=T.expirationTimes;for(var ce=P;0<ce;){var ue=31-Jn(ce),Me=1<<ue;Z[ue]=-1,ce&=~Me}H!==0&&As(T,H,P)}function Xa(){return(vi&6)===0?(hi(0),!1):!0}function Sl(){if(Bi!==null){if(Ji===0)var T=Bi.return;else T=Bi,uo=ll=null,tf(T),Gl=null,Hl=0,T=Bi;for(;T!==null;)ua(T.alternate,T),T=T.return;Bi=null}}function Tl(T,P){var H=T.timeoutHandle;H!==-1&&(T.timeoutHandle=-1,Lm(H)),H=T.cancelPendingCommit,H!==null&&(T.cancelPendingCommit=null,H()),Na=0,Sl(),Pi=T,Bi=H=$s(T.current,null),Fi=P,Ji=0,Ps=null,Va=!1,qa=ci(T,P),kf=!1,wr=js=wu=bl=bo=Fr=0,Hr=tc=null,Wr=!1,(P&8)!==0&&(P|=P&32);var Z=T.entangledLanes;if(Z!==0)for(T=T.entanglements,Z&=P;0<Z;){var ce=31-Jn(Z),ue=1<<ce;P|=T[ce],Z&=~ue}return fa=P,lu(),H}function Eo(T,P){Ni=null,ye.H=Dc,P===Bl||P===Oi?(P=jl(),Ji=3):P===fu?(P=jl(),Ji=4):Ji=P===ch?8:P!==null&&typeof P=="object"&&typeof P.then=="function"?6:1,Ps=P,Bi===null&&(Fr=1,lh(T,aa(P,T.current)))}function Br(){var T=Ys.current;return T===null?!0:(Fi&4194048)===Fi?Os===null:(Fi&62914560)===Fi||(Fi&536870912)!==0?T===Os:!1}function Wo(){var T=ye.H;return ye.H=Dc,T===null?Dc:T}function Al(){var T=ye.A;return ye.A=Ho,T}function Uc(){Fr=4,Va||(Fi&4194048)!==Fi&&Ys.current!==null||(qa=!0),(bo&134217727)===0&&(bl&134217727)===0||Pi===null||rs(Pi,Fi,js,!1)}function zs(T,P,H){var Z=vi;vi|=2;var ce=Wo(),ue=Al();(Pi!==T||Fi!==P)&&(Or=null,Tl(T,P)),P=!1;var Me=Fr;e:do try{if(Ji!==0&&Bi!==null){var Le=Bi,$e=Ps;switch(Ji){case 8:Sl(),Me=6;break e;case 3:case 2:case 9:case 6:Ys.current===null&&(P=!0);var qt=Ji;if(Ji=0,Ps=null,ic(T,Le,$e,qt),H&&qa){Me=0;break e}break;default:qt=Ji,Ji=0,Ps=null,ic(T,Le,$e,qt)}}jc(),Me=Fr;break}catch(Sn){Eo(T,Sn)}while(!0);return P&&T.shellSuspendCounter++,uo=ll=null,vi=Z,ye.H=ce,ye.A=ue,Bi===null&&(Pi=null,Fi=0,lu()),Me}function jc(){for(;Bi!==null;)Sh(Bi)}function Cu(T,P){var H=vi;vi|=2;var Z=Wo(),ce=Al();Pi!==T||Fi!==P?(Or=null,Kr=Pe()+500,Tl(T,P)):qa=ci(T,P);e:do try{if(Ji!==0&&Bi!==null){P=Bi;var ue=Ps;t:switch(Ji){case 1:Ji=0,Ps=null,ic(T,P,ue,1);break;case 2:case 9:if(Xs(ue)){Ji=0,Ps=null,Pu(P);break}P=function(){Ji!==2&&Ji!==9||Pi!==T||(Ji=7),Wn(T)},ue.then(P,P);break e;case 3:Ji=7;break e;case 4:Ji=5;break e;case 7:Xs(ue)?(Ji=0,Ps=null,Pu(P)):(Ji=0,Ps=null,ic(T,P,ue,7));break;case 5:var Me=null;switch(Bi.tag){case 26:Me=Bi.memoizedState;case 5:case 27:var Le=Bi;if(Me?mm(Me):Le.stateNode.complete){Ji=0,Ps=null;var $e=Le.sibling;if($e!==null)Bi=$e;else{var qt=Le.return;qt!==null?(Bi=qt,Rl(qt)):Bi=null}break t}}Ji=0,Ps=null,ic(T,P,ue,5);break;case 6:Ji=0,Ps=null,ic(T,P,ue,6);break;case 8:Sl(),Fr=6;break e;default:throw Error(f(462))}}ta();break}catch(Sn){Eo(T,Sn)}while(!0);return uo=ll=null,ye.H=Z,ye.A=ce,vi=H,Bi!==null?0:(Pi=null,Fi=0,lu(),Fr)}function ta(){for(;Bi!==null&&!On();)Sh(Bi)}function Sh(T){var P=yh(T.alternate,T,fa);T.memoizedProps=T.pendingProps,P===null?Rl(T):Bi=P}function Pu(T){var P=T,H=P.alternate;switch(P.tag){case 15:case 0:P=bu(H,P,P.pendingProps,P.type,void 0,Fi);break;case 11:P=bu(H,P,P.pendingProps,P.type.render,P.ref,Fi);break;case 5:tf(P);default:ua(H,P),P=Bi=_c(P,fa),P=yh(H,P,fa)}T.memoizedProps=T.pendingProps,P===null?Rl(T):Bi=P}function ic(T,P,H,Z){uo=ll=null,tf(P),Gl=null,Hl=0;var ce=P.return;try{if(ls(T,ce,P,H,Fi)){Fr=1,lh(T,aa(H,T.current)),Bi=null;return}}catch(ue){if(ce!==null)throw Bi=ce,ue;Fr=1,lh(T,aa(H,T.current)),Bi=null;return}P.flags&32768?(Yi||Z===1?T=!0:qa||(Fi&536870912)!==0?T=!1:(Va=T=!0,(Z===2||Z===9||Z===3||Z===6)&&(Z=Ys.current,Z!==null&&Z.tag===13&&(Z.flags|=16384))),Iu(P,T)):Rl(P)}function Rl(T){var P=T;do{if((P.flags&32768)!==0){Iu(P,Va);return}T=P.return;var H=Tu(P.alternate,P,fa);if(H!==null){Bi=H;return}if(P=P.sibling,P!==null){Bi=P;return}Bi=P=T}while(P!==null);Fr===0&&(Fr=5)}function Iu(T,P){do{var H=Ma(T.alternate,T);if(H!==null){H.flags&=32767,Bi=H;return}if(H=T.return,H!==null&&(H.flags|=32768,H.subtreeFlags=0,H.deletions=null),!P&&(T=T.sibling,T!==null)){Bi=T;return}Bi=T=H}while(T!==null);Fr=6,Bi=null}function $o(T,P,H,Z,ce,ue,Me,Le,$e){T.cancelPendingCommit=null;do zc();while(hr!==0);if((vi&6)!==0)throw Error(f(327));if(P!==null){if(P===T.current)throw Error(f(177));if(ue=P.lanes|P.childLanes,ue|=ms,fs(T,H,ue,Me,Le,$e),T===Pi&&(Bi=Pi=null,Fi=0),Fc=P,da=T,Na=H,Oc=ue,Bc=ce,Mu=Z,(P.subtreeFlags&10256)!==0||(P.flags&10256)!==0?(T.callbackNode=null,T.callbackPriority=0,me(ln,function(){return Th(),null})):(T.callbackNode=null,T.callbackPriority=0),Z=(P.flags&13878)!==0,(P.subtreeFlags&13878)!==0||Z){Z=ye.T,ye.T=null,ce=Ae.p,Ae.p=2,Me=vi,vi|=4;try{Ep(T,P,H)}finally{vi=Me,Ae.p=ce,ye.T=Z}}hr=1,ss(),qo(),rc()}}function ss(){if(hr===1){hr=0;var T=da,P=Fc,H=(P.flags&13878)!==0;if((P.subtreeFlags&13878)!==0||H){H=ye.T,ye.T=null;var Z=Ae.p;Ae.p=2;var ce=vi;vi|=4;try{xl(P,T);var ue=Cp,Me=Xf(T.containerInfo),Le=ue.focusedElem,$e=ue.selectionRange;if(Me!==Le&&Le&&Le.ownerDocument&&vr(Le.ownerDocument.documentElement,Le)){if($e!==null&&Fh(Le)){var qt=$e.start,Sn=$e.end;if(Sn===void 0&&(Sn=qt),"selectionStart"in Le)Le.selectionStart=qt,Le.selectionEnd=Math.min(Sn,Le.value.length);else{var Cn=Le.ownerDocument||document,on=Cn&&Cn.defaultView||window;if(on.getSelection){var xn=on.getSelection(),yi=Le.textContent.length,Mi=Math.min($e.start,yi),Tr=$e.end===void 0?Mi:Math.min($e.end,yi);!xn.extend&&Mi>Tr&&(Me=Tr,Tr=Mi,Mi=Me);var bt=gc(Le,Mi),ht=gc(Le,Tr);if(bt&&ht&&(xn.rangeCount!==1||xn.anchorNode!==bt.node||xn.anchorOffset!==bt.offset||xn.focusNode!==ht.node||xn.focusOffset!==ht.offset)){var Ot=Cn.createRange();Ot.setStart(bt.node,bt.offset),xn.removeAllRanges(),Mi>Tr?(xn.addRange(Ot),xn.extend(ht.node,ht.offset)):(Ot.setEnd(ht.node,ht.offset),xn.addRange(Ot))}}}}for(Cn=[],xn=Le;xn=xn.parentNode;)xn.nodeType===1&&Cn.push({element:xn,left:xn.scrollLeft,top:xn.scrollTop});for(typeof Le.focus=="function"&&Le.focus(),Le=0;Le<Cn.length;Le++){var Rn=Cn[Le];Rn.element.scrollLeft=Rn.left,Rn.element.scrollTop=Rn.top}}ap=!!Mp,Cp=Mp=null}finally{vi=ce,Ae.p=Z,ye.T=H}}T.current=P,hr=2}}function qo(){if(hr===2){hr=0;var T=da,P=Fc,H=(P.flags&8772)!==0;if((P.subtreeFlags&8772)!==0||H){H=ye.T,ye.T=null;var Z=Ae.p;Ae.p=2;var ce=vi;vi|=4;try{Dr(T,P.alternate,P)}finally{vi=ce,Ae.p=Z,ye.T=H}}hr=3}}function rc(){if(hr===4||hr===3){hr=0,Be();var T=da,P=Fc,H=Na,Z=Mu;(P.subtreeFlags&10256)!==0||(P.flags&10256)!==0?hr=5:(hr=0,Fc=da=null,So(T,T.pendingLanes));var ce=T.pendingLanes;if(ce===0&&(Zr=null),$r(H),P=P.stateNode,Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(wn,P,void 0,(P.current.flags&128)===128)}catch{}if(Z!==null){P=ye.T,ce=Ae.p,Ae.p=2,ye.T=null;try{for(var ue=T.onRecoverableError,Me=0;Me<Z.length;Me++){var Le=Z[Me];ue(Le.value,{componentStack:Le.stack})}}finally{ye.T=P,Ae.p=ce}}(Na&3)!==0&&zc(),Wn(T),ce=T.pendingLanes,(H&261930)!==0&&(ce&42)!==0?T===nc?El++:(El=0,nc=T):El=0,hi(0)}}function So(T,P){(T.pooledCacheLanes&=P)===0&&(P=T.pooledCache,P!=null&&(T.pooledCache=null,Ol(P)))}function zc(){return ss(),qo(),rc(),Th()}function Th(){if(hr!==5)return!1;var T=da,P=Oc;Oc=0;var H=$r(Na),Z=ye.T,ce=Ae.p;try{Ae.p=32>H?32:H,ye.T=null,H=Bc,Bc=null;var ue=da,Me=Na;if(hr=0,Fc=da=null,Na=0,(vi&6)!==0)throw Error(f(331));var Le=vi;if(vi|=4,Js(ue.current),If(ue,ue.current,Me,H),vi=Le,hi(0,!1),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(wn,ue)}catch{}return!0}finally{Ae.p=ce,ye.T=Z,So(T,P)}}function Vf(T,P,H){P=aa(H,P),P=Tf(T.stateNode,P,2),T=hl(T,P,2),T!==null&&(Jr(T,2),Wn(T))}function sr(T,P,H){if(T.tag===3)Vf(T,T,H);else for(;P!==null;){if(P.tag===3){Vf(P,T,H);break}else if(P.tag===1){var Z=P.stateNode;if(typeof P.type.getDerivedStateFromError=="function"||typeof Z.componentDidCatch=="function"&&(Zr===null||!Zr.has(Z))){T=aa(H,T),H=Af(2),Z=hl(P,H,2),Z!==null&&(Hd(H,Z,P,T),Jr(Z,2),Wn(Z));break}}P=P.return}}function ku(T,P,H){var Z=T.pingCache;if(Z===null){Z=T.pingCache=new Li;var ce=new Set;Z.set(P,ce)}else ce=Z.get(P),ce===void 0&&(ce=new Set,Z.set(P,ce));ce.has(H)||(kf=!0,ce.add(H),T=V.bind(null,T,P,H),P.then(T,T))}function V(T,P,H){var Z=T.pingCache;Z!==null&&Z.delete(P),T.pingedLanes|=T.suspendedLanes&H,T.warmLanes&=~H,Pi===T&&(Fi&H)===H&&(Fr===4||Fr===3&&(Fi&62914560)===Fi&&300>Pe()-Lc?(vi&2)===0&&Tl(T,0):wu|=H,wr===Fi&&(wr=0)),Wn(T)}function z(T,P){P===0&&(P=ji()),T=Ls(T,P),T!==null&&(Jr(T,P),Wn(T))}function ee(T){var P=T.memoizedState,H=0;P!==null&&(H=P.retryLane),z(T,H)}function oe(T,P){var H=0;switch(T.tag){case 31:case 13:var Z=T.stateNode,ce=T.memoizedState;ce!==null&&(H=ce.retryLane);break;case 19:Z=T.stateNode;break;case 22:Z=T.stateNode._retryCache;break;default:throw Error(f(314))}Z!==null&&Z.delete(P),z(T,H)}function me(T,P){return An(T,P)}var xe=null,Ve=null,Ye=!1,gn=!1,Un=!1,ti=0;function Wn(T){T!==Ve&&T.next===null&&(Ve===null?xe=Ve=T:Ve=Ve.next=T),gn=!0,Ye||(Ye=!0,wt())}function hi(T,P){if(!Un&&gn){Un=!0;do for(var H=!1,Z=xe;Z!==null;){if(T!==0){var ce=Z.pendingLanes;if(ce===0)var ue=0;else{var Me=Z.suspendedLanes,Le=Z.pingedLanes;ue=(1<<31-Jn(42|T)+1)-1,ue&=ce&~(Me&~Le),ue=ue&201326741?ue&201326741|1:ue?ue|2:0}ue!==0&&(H=!0,Kt(Z,ue))}else ue=Fi,ue=pn(Z,Z===Pi?ue:0,Z.cancelPendingCommit!==null||Z.timeoutHandle!==-1),(ue&3)===0||ci(Z,ue)||(H=!0,Kt(Z,ue));Z=Z.next}while(H);Un=!1}}function Di(){Qr()}function Qr(){gn=Ye=!1;var T=0;ti!==0&&Nm()&&(T=ti);for(var P=Pe(),H=null,Z=xe;Z!==null;){var ce=Z.next,ue=Gc(Z,P);ue===0?(Z.next=null,H===null?xe=ce:H.next=ce,ce===null&&(Ve=H)):(H=Z,(T!==0||(ue&3)!==0)&&(gn=!0)),Z=ce}hr!==0&&hr!==5||hi(T),ti!==0&&(ti=0)}function Gc(T,P){for(var H=T.suspendedLanes,Z=T.pingedLanes,ce=T.expirationTimes,ue=T.pendingLanes&-62914561;0<ue;){var Me=31-Jn(ue),Le=1<<Me,$e=ce[Me];$e===-1?((Le&H)===0||(Le&Z)!==0)&&(ce[Me]=Ai(Le,P)):$e<=P&&(T.expiredLanes|=Le),ue&=~Le}if(P=Pi,H=Fi,H=pn(T,T===P?H:0,T.cancelPendingCommit!==null||T.timeoutHandle!==-1),Z=T.callbackNode,H===0||T===P&&(Ji===2||Ji===9)||T.cancelPendingCommit!==null)return Z!==null&&Z!==null&&ri(Z),T.callbackNode=null,T.callbackPriority=0;if((H&3)===0||ci(T,H)){if(P=H&-H,P===T.callbackPriority)return P;switch(Z!==null&&ri(Z),$r(H)){case 2:case 8:H=bn;break;case 32:H=ln;break;case 268435456:H=Gn;break;default:H=ln}return Z=wl.bind(null,T),H=An(H,Z),T.callbackPriority=P,T.callbackNode=H,P}return Z!==null&&Z!==null&&ri(Z),T.callbackPriority=2,T.callbackNode=null,2}function wl(T,P){if(hr!==0&&hr!==5)return T.callbackNode=null,T.callbackPriority=0,null;var H=T.callbackNode;if(zc()&&T.callbackNode!==H)return null;var Z=Fi;return Z=pn(T,T===Pi?Z:0,T.cancelPendingCommit!==null||T.timeoutHandle!==-1),Z===0?null:(Hi(T,Z,P),Gc(T,Pe()),T.callbackNode!=null&&T.callbackNode===H?wl.bind(null,T):null)}function Kt(T,P){if(zc())return null;Hi(T,P,!0)}function wt(){Fm(function(){(vi&6)!==0?An(Ft,Di):Qr()})}function fn(){if(ti===0){var T=Lo;T===0&&(T=kt,kt<<=1,(kt&261888)===0&&(kt=256)),ti=T}return ti}function Qn(T){return T==null||typeof T=="symbol"||typeof T=="boolean"?null:typeof T=="function"?T:Ml(""+T)}function Ti(T,P){var H=P.ownerDocument.createElement("input");return H.name=P.name,H.value=P.value,T.id&&H.setAttribute("form",T.id),P.parentNode.insertBefore(H,P),T=new FormData(T),H.parentNode.removeChild(H),T}function Ur(T,P,H,Z,ce){if(P==="submit"&&H&&H.stateNode===ce){var ue=Qn((ce[Ie]||null).action),Me=Z.submitter;Me&&(P=(P=Me[Ie]||null)?Qn(P.formAction):Me.getAttribute("formAction"),P!==null&&(ue=P,Me=null));var Le=new Ua("action","action",null,Z,ce);T.push({event:Le,listeners:[{instance:null,listener:function(){if(Z.defaultPrevented){if(ti!==0){var $e=Me?Ti(ce,Me):new FormData(ce);gf(H,{pending:!0,data:$e,method:ce.method,action:ue},null,$e)}}else typeof ue=="function"&&(Le.preventDefault(),$e=Me?Ti(ce,Me):new FormData(ce),gf(H,{pending:!0,data:$e,method:ce.method,action:ue},ue,$e))},currentTarget:ce}]})}}for(var Ri=0;Ri<au.length;Ri++){var ir=au[Ri],vs=ir.toLowerCase(),ar=ir[0].toUpperCase()+ir.slice(1);ba(vs,"on"+ar)}ba(Lu,"onAnimationEnd"),ba(su,"onAnimationIteration"),ba(Bh,"onAnimationStart"),ba("dblclick","onDoubleClick"),ba("focusin","onFocus"),ba("focusout","onBlur"),ba(Kf,"onTransitionRun"),ba(pp,"onTransitionStart"),ba(Zf,"onTransitionCancel"),ba(Uh,"onTransitionEnd"),En("onMouseEnter",["mouseout","mouseover"]),En("onMouseLeave",["mouseout","mouseover"]),En("onPointerEnter",["pointerout","pointerover"]),En("onPointerLeave",["pointerout","pointerover"]),Je("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Je("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Je("onBeforeInput",["compositionend","keypress","textInput","paste"]),Je("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Je("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Je("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var La="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(La));function Wp(T,P){P=(P&4)!==0;for(var H=0;H<T.length;H++){var Z=T[H],ce=Z.event;Z=Z.listeners;e:{var ue=void 0;if(P)for(var Me=Z.length-1;0<=Me;Me--){var Le=Z[Me],$e=Le.instance,qt=Le.currentTarget;if(Le=Le.listener,$e!==ue&&ce.isPropagationStopped())break e;ue=Le,ce.currentTarget=qt;try{ue(ce)}catch(Sn){ou(Sn)}ce.currentTarget=null,ue=$e}else for(Me=0;Me<Z.length;Me++){if(Le=Z[Me],$e=Le.instance,qt=Le.currentTarget,Le=Le.listener,$e!==ue&&ce.isPropagationStopped())break e;ue=Le,ce.currentTarget=qt;try{ue(ce)}catch(Sn){ou(Sn)}ce.currentTarget=null,ue=$e}}}}function er(T,P){var H=P[We];H===void 0&&(H=P[We]=new Set);var Z=T+"__bubble";H.has(Z)||($p(P,T,2,!1),H.add(Z))}function Tp(T,P,H){var Z=0;P&&(Z|=4),$p(H,T,Z,P)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function Ap(T){if(!T[Kd]){T[Kd]=!0,Qe.forEach(function(H){H!=="selectionchange"&&(Sp.has(H)||Tp(H,!1,T),Tp(H,!0,T))});var P=T.nodeType===9?T:T.ownerDocument;P===null||P[Kd]||(P[Kd]=!0,Tp("selectionchange",!1,P))}}function $p(T,P,H,Z){switch(Em(P)){case 2:var ce=a0;break;case 8:ce=o0;break;default:ce=Up}H=ce.bind(null,P,H,T),ce=void 0,!Pl||P!=="touchstart"&&P!=="touchmove"&&P!=="wheel"||(ce=!0),Z?ce!==void 0?T.addEventListener(P,H,{capture:!0,passive:ce}):T.addEventListener(P,H,!0):ce!==void 0?T.addEventListener(P,H,{passive:ce}):T.addEventListener(P,H,!1)}function Rp(T,P,H,Z,ce){var ue=Z;if((P&1)===0&&(P&2)===0&&Z!==null)e:for(;;){if(Z===null)return;var Me=Z.tag;if(Me===3||Me===4){var Le=Z.stateNode.containerInfo;if(Le===ce)break;if(Me===4)for(Me=Z.return;Me!==null;){var $e=Me.tag;if(($e===3||$e===4)&&Me.stateNode.containerInfo===ce)return;Me=Me.return}for(;Le!==null;){if(Me=Yn(Le),Me===null)return;if($e=Me.tag,$e===5||$e===6||$e===26||$e===27){Z=ue=Me;continue e}Le=Le.parentNode}}Z=Z.return}wo(function(){var qt=ue,Sn=ra(H),Cn=[];e:{var on=va.get(T);if(on!==void 0){var xn=Ua,yi=T;switch(T){case"keypress":if(Ko(H)===0)break e;case"keydown":case"keyup":xn=eo;break;case"focusin":yi="focus",xn=Jo;break;case"focusout":yi="blur",xn=Jo;break;case"beforeblur":case"afterblur":xn=Jo;break;case"click":if(H.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xn=cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xn=Zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xn=be;break;case Lu:case su:case Bh:xn=Du;break;case Uh:xn=Ue;break;case"scroll":case"scrollend":xn=lc;break;case"wheel":xn=un;break;case"copy":case"cut":case"paste":xn=Qc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xn=to;break;case"toggle":case"beforetoggle":xn=ki}var Mi=(P&4)!==0,Tr=!Mi&&(T==="scroll"||T==="scrollend"),bt=Mi?on!==null?on+"Capture":null:on;Mi=[];for(var ht=qt,Ot;ht!==null;){var Rn=ht;if(Ot=Rn.stateNode,Rn=Rn.tag,Rn!==5&&Rn!==26&&Rn!==27||Ot===null||bt===null||(Rn=ga(ht,bt),Rn!=null&&Mi.push(Nf(ht,Rn,Ot))),Tr)break;ht=ht.return}0<Mi.length&&(on=new xn(on,yi,null,H,Sn),Cn.push({event:on,listeners:Mi}))}}if((P&7)===0){e:{if(on=T==="mouseover"||T==="pointerover",xn=T==="mouseout"||T==="pointerout",on&&H!==ac&&(yi=H.relatedTarget||H.fromElement)&&(Yn(yi)||yi[Fe]))break e;if((xn||on)&&(on=Sn.window===Sn?Sn:(on=Sn.ownerDocument)?on.defaultView||on.parentWindow:window,xn?(yi=H.relatedTarget||H.toElement,xn=qt,yi=yi?Yn(yi):null,yi!==null&&(Tr=y(yi),Mi=yi.tag,yi!==Tr||Mi!==5&&Mi!==27&&Mi!==6)&&(yi=null)):(xn=null,yi=qt),xn!==yi)){if(Mi=cc,Rn="onMouseLeave",bt="onMouseEnter",ht="mouse",(T==="pointerout"||T==="pointerover")&&(Mi=to,Rn="onPointerLeave",bt="onPointerEnter",ht="pointer"),Tr=xn==null?on:Xn(xn),Ot=yi==null?on:Xn(yi),on=new Mi(Rn,ht+"leave",xn,H,Sn),on.target=Tr,on.relatedTarget=Ot,Rn=null,Yn(Sn)===qt&&(Mi=new Mi(bt,ht+"enter",yi,H,Sn),Mi.target=Ot,Mi.relatedTarget=Tr,Rn=Mi),Tr=Rn,xn&&yi)t:{for(Mi=Pm,bt=xn,ht=yi,Ot=0,Rn=bt;Rn;Rn=Mi(Rn))Ot++;Rn=0;for(var Si=ht;Si;Si=Mi(Si))Rn++;for(;0<Ot-Rn;)bt=Mi(bt),Ot--;for(;0<Rn-Ot;)ht=Mi(ht),Rn--;for(;Ot--;){if(bt===ht||ht!==null&&bt===ht.alternate){Mi=bt;break t}bt=Mi(bt),ht=Mi(ht)}Mi=null}else Mi=null;xn!==null&&qp(Cn,on,xn,Mi,!1),yi!==null&&Tr!==null&&qp(Cn,Tr,yi,Mi,!0)}}e:{if(on=qt?Xn(qt):window,xn=on.nodeName&&on.nodeName.toLowerCase(),xn==="select"||xn==="input"&&on.type==="file")var or=kh;else if(Ih(on))if(no)or=qf;else{or=Nh;var _i=Wf}else xn=on.nodeName,!xn||xn.toLowerCase()!=="input"||on.type!=="checkbox"&&on.type!=="radio"?qt&&Ya(qt.elementType)&&(or=kh):or=$f;if(or&&(or=or(T,qt))){Vu(Cn,or,H,Sn);break e}_i&&_i(T,on,qt),T==="focusout"&&qt&&on.type==="number"&&qt.memoizedProps.value!=null&&Zi(on,"number",on.value)}switch(_i=qt?Xn(qt):window,T){case"focusin":(Ih(_i)||_i.contentEditable==="true")&&(io=_i,ro=qt,yc=null);break;case"focusout":yc=ro=io=null;break;case"mousedown":Nu=!0;break;case"contextmenu":case"mouseup":case"dragend":Nu=!1,xc(Cn,H,Sn);break;case"selectionchange":if(Yf)break;case"keydown":case"keyup":xc(Cn,H,Sn)}var zi;if(Qi)e:{switch(T){case"compositionstart":var rr="onCompositionStart";break e;case"compositionend":rr="onCompositionEnd";break e;case"compositionupdate":rr="onCompositionUpdate";break e}rr=void 0}else Nl?Po(T,H)&&(rr="onCompositionEnd"):T==="keydown"&&H.keyCode===229&&(rr="onCompositionStart");rr&&(za&&H.locale!=="ko"&&(Nl||rr!=="onCompositionStart"?rr==="onCompositionEnd"&&Nl&&(zi=Yo()):(Ds=Sn,oc="value"in Ds?Ds.value:Ds.textContent,Nl=!0)),_i=Zd(qt,rr),0<_i.length&&(rr=new ya(rr,T,null,H,Sn),Cn.push({event:rr,listeners:_i}),zi?rr.data=zi:(zi=Vl(H),zi!==null&&(rr.data=zi)))),(zi=Vs?Gf(T,H):Ch(T,H))&&(rr=Zd(qt,"onBeforeInput"),0<rr.length&&(_i=new ya("onBeforeInput","beforeinput",null,H,Sn),Cn.push({event:_i,listeners:rr}),_i.data=zi)),Ur(Cn,T,qt,H,Sn)}Wp(Cn,P)})}function Nf(T,P,H){return{instance:T,listener:P,currentTarget:H}}function Zd(T,P){for(var H=P+"Capture",Z=[];T!==null;){var ce=T,ue=ce.stateNode;if(ce=ce.tag,ce!==5&&ce!==26&&ce!==27||ue===null||(ce=ga(T,H),ce!=null&&Z.unshift(Nf(T,ce,ue)),ce=ga(T,P),ce!=null&&Z.push(Nf(T,ce,ue))),T.tag===3)return Z;T=T.return}return[]}function Pm(T){if(T===null)return null;do T=T.return;while(T&&T.tag!==5&&T.tag!==27);return T||null}function qp(T,P,H,Z,ce){for(var ue=P._reactName,Me=[];H!==null&&H!==Z;){var Le=H,$e=Le.alternate,qt=Le.stateNode;if(Le=Le.tag,$e!==null&&$e===Z)break;Le!==5&&Le!==26&&Le!==27||qt===null||($e=qt,ce?(qt=ga(H,ue),qt!=null&&Me.unshift(Nf(H,qt,$e))):ce||(qt=ga(H,ue),qt!=null&&Me.push(Nf(H,qt,$e)))),H=H.return}Me.length!==0&&T.push({event:P,listeners:Me})}var Im=/\r\n?/g,km=/\u0000|\uFFFD/g;function Xp(T){return(typeof T=="string"?T:""+T).replace(Im,`
`).replace(km,"")}function Yp(T,P){return P=Xp(P),Xp(T)===P}function Sr(T,P,H,Z,ce,ue){switch(H){case"children":typeof Z=="string"?P==="body"||P==="textarea"&&Z===""||Mr(T,Z):(typeof Z=="number"||typeof Z=="bigint")&&P!=="body"&&Mr(T,""+Z);break;case"className":mi(T,"class",Z);break;case"tabIndex":mi(T,"tabindex",Z);break;case"dir":case"role":case"viewBox":case"width":case"height":mi(T,H,Z);break;case"style":ia(T,Z,ue);break;case"data":if(P!=="object"){mi(T,"data",Z);break}case"src":case"href":if(Z===""&&(P!=="a"||H!=="href")){T.removeAttribute(H);break}if(Z==null||typeof Z=="function"||typeof Z=="symbol"||typeof Z=="boolean"){T.removeAttribute(H);break}Z=Ml(""+Z),T.setAttribute(H,Z);break;case"action":case"formAction":if(typeof Z=="function"){T.setAttribute(H,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ue=="function"&&(H==="formAction"?(P!=="input"&&Sr(T,P,"name",ce.name,ce,null),Sr(T,P,"formEncType",ce.formEncType,ce,null),Sr(T,P,"formMethod",ce.formMethod,ce,null),Sr(T,P,"formTarget",ce.formTarget,ce,null)):(Sr(T,P,"encType",ce.encType,ce,null),Sr(T,P,"method",ce.method,ce,null),Sr(T,P,"target",ce.target,ce,null)));if(Z==null||typeof Z=="symbol"||typeof Z=="boolean"){T.removeAttribute(H);break}Z=Ml(""+Z),T.setAttribute(H,Z);break;case"onClick":Z!=null&&(T.onclick=Fa);break;case"onScroll":Z!=null&&er("scroll",T);break;case"onScrollEnd":Z!=null&&er("scrollend",T);break;case"dangerouslySetInnerHTML":if(Z!=null){if(typeof Z!="object"||!("__html"in Z))throw Error(f(61));if(H=Z.__html,H!=null){if(ce.children!=null)throw Error(f(60));T.innerHTML=H}}break;case"multiple":T.multiple=Z&&typeof Z!="function"&&typeof Z!="symbol";break;case"muted":T.muted=Z&&typeof Z!="function"&&typeof Z!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(Z==null||typeof Z=="function"||typeof Z=="boolean"||typeof Z=="symbol"){T.removeAttribute("xlink:href");break}H=Ml(""+Z),T.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",H);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":Z!=null&&typeof Z!="function"&&typeof Z!="symbol"?T.setAttribute(H,""+Z):T.removeAttribute(H);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":Z&&typeof Z!="function"&&typeof Z!="symbol"?T.setAttribute(H,""):T.removeAttribute(H);break;case"capture":case"download":Z===!0?T.setAttribute(H,""):Z!==!1&&Z!=null&&typeof Z!="function"&&typeof Z!="symbol"?T.setAttribute(H,Z):T.removeAttribute(H);break;case"cols":case"rows":case"size":case"span":Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&!isNaN(Z)&&1<=Z?T.setAttribute(H,Z):T.removeAttribute(H);break;case"rowSpan":case"start":Z==null||typeof Z=="function"||typeof Z=="symbol"||isNaN(Z)?T.removeAttribute(H):T.setAttribute(H,Z);break;case"popover":er("beforetoggle",T),er("toggle",T),li(T,"popover",Z);break;case"xlinkActuate":zn(T,"http://www.w3.org/1999/xlink","xlink:actuate",Z);break;case"xlinkArcrole":zn(T,"http://www.w3.org/1999/xlink","xlink:arcrole",Z);break;case"xlinkRole":zn(T,"http://www.w3.org/1999/xlink","xlink:role",Z);break;case"xlinkShow":zn(T,"http://www.w3.org/1999/xlink","xlink:show",Z);break;case"xlinkTitle":zn(T,"http://www.w3.org/1999/xlink","xlink:title",Z);break;case"xlinkType":zn(T,"http://www.w3.org/1999/xlink","xlink:type",Z);break;case"xmlBase":zn(T,"http://www.w3.org/XML/1998/namespace","xml:base",Z);break;case"xmlLang":zn(T,"http://www.w3.org/XML/1998/namespace","xml:lang",Z);break;case"xmlSpace":zn(T,"http://www.w3.org/XML/1998/namespace","xml:space",Z);break;case"is":li(T,"is",Z);break;case"innerText":case"textContent":break;default:(!(2<H.length)||H[0]!=="o"&&H[0]!=="O"||H[1]!=="n"&&H[1]!=="N")&&(H=Kc.get(H)||H,li(T,H,Z))}}function wp(T,P,H,Z,ce,ue){switch(H){case"style":ia(T,Z,ue);break;case"dangerouslySetInnerHTML":if(Z!=null){if(typeof Z!="object"||!("__html"in Z))throw Error(f(61));if(H=Z.__html,H!=null){if(ce.children!=null)throw Error(f(60));T.innerHTML=H}}break;case"children":typeof Z=="string"?Mr(T,Z):(typeof Z=="number"||typeof Z=="bigint")&&Mr(T,""+Z);break;case"onScroll":Z!=null&&er("scroll",T);break;case"onScrollEnd":Z!=null&&er("scrollend",T);break;case"onClick":Z!=null&&(T.onclick=Fa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ze.hasOwnProperty(H))e:{if(H[0]==="o"&&H[1]==="n"&&(ce=H.endsWith("Capture"),P=H.slice(2,ce?H.length-7:void 0),ue=T[Ie]||null,ue=ue!=null?ue[H]:null,typeof ue=="function"&&T.removeEventListener(P,ue,ce),typeof Z=="function")){typeof ue!="function"&&ue!==null&&(H in T?T[H]=null:T.hasAttribute(H)&&T.removeAttribute(H)),T.addEventListener(P,Z,ce);break e}H in T?T[H]=Z:Z===!0?T.setAttribute(H,""):li(T,H,Z)}}}function Gs(T,P,H){switch(P){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":er("error",T),er("load",T);var Z=!1,ce=!1,ue;for(ue in H)if(H.hasOwnProperty(ue)){var Me=H[ue];if(Me!=null)switch(ue){case"src":Z=!0;break;case"srcSet":ce=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(f(137,P));default:Sr(T,P,ue,Me,H,null)}}ce&&Sr(T,P,"srcSet",H.srcSet,H,null),Z&&Sr(T,P,"src",H.src,H,null);return;case"input":er("invalid",T);var Le=ue=Me=ce=null,$e=null,qt=null;for(Z in H)if(H.hasOwnProperty(Z)){var Sn=H[Z];if(Sn!=null)switch(Z){case"name":ce=Sn;break;case"type":Me=Sn;break;case"checked":$e=Sn;break;case"defaultChecked":qt=Sn;break;case"value":ue=Sn;break;case"defaultValue":Le=Sn;break;case"children":case"dangerouslySetInnerHTML":if(Sn!=null)throw Error(f(137,P));break;default:Sr(T,P,Z,Sn,H,null)}}Ar(T,ue,Le,$e,qt,Me,ce,!1);return;case"select":er("invalid",T),Z=Me=ue=null;for(ce in H)if(H.hasOwnProperty(ce)&&(Le=H[ce],Le!=null))switch(ce){case"value":ue=Le;break;case"defaultValue":Me=Le;break;case"multiple":Z=Le;default:Sr(T,P,ce,Le,H,null)}P=ue,H=Me,T.multiple=!!Z,P!=null?xr(T,!!Z,P,!1):H!=null&&xr(T,!!Z,H,!0);return;case"textarea":er("invalid",T),ue=ce=Z=null;for(Me in H)if(H.hasOwnProperty(Me)&&(Le=H[Me],Le!=null))switch(Me){case"value":Z=Le;break;case"defaultValue":ce=Le;break;case"children":ue=Le;break;case"dangerouslySetInnerHTML":if(Le!=null)throw Error(f(91));break;default:Sr(T,P,Me,Le,H,null)}mr(T,Z,ce,ue);return;case"option":for($e in H)if(H.hasOwnProperty($e)&&(Z=H[$e],Z!=null))switch($e){case"selected":T.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Sr(T,P,$e,Z,H,null)}return;case"dialog":er("beforetoggle",T),er("toggle",T),er("cancel",T),er("close",T);break;case"iframe":case"object":er("load",T);break;case"video":case"audio":for(Z=0;Z<La.length;Z++)er(La[Z],T);break;case"image":er("error",T),er("load",T);break;case"details":er("toggle",T);break;case"embed":case"source":case"link":er("error",T),er("load",T);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(qt in H)if(H.hasOwnProperty(qt)&&(Z=H[qt],Z!=null))switch(qt){case"children":case"dangerouslySetInnerHTML":throw Error(f(137,P));default:Sr(T,P,qt,Z,H,null)}return;default:if(Ya(P)){for(Sn in H)H.hasOwnProperty(Sn)&&(Z=H[Sn],Z!==void 0&&wp(T,P,Sn,Z,H,void 0));return}}for(Le in H)H.hasOwnProperty(Le)&&(Z=H[Le],Z!=null&&Sr(T,P,Le,Z,H,null))}function Dm(T,P,H,Z){switch(P){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var ce=null,ue=null,Me=null,Le=null,$e=null,qt=null,Sn=null;for(xn in H){var Cn=H[xn];if(H.hasOwnProperty(xn)&&Cn!=null)switch(xn){case"checked":break;case"value":break;case"defaultValue":$e=Cn;default:Z.hasOwnProperty(xn)||Sr(T,P,xn,null,Z,Cn)}}for(var on in Z){var xn=Z[on];if(Cn=H[on],Z.hasOwnProperty(on)&&(xn!=null||Cn!=null))switch(on){case"type":ue=xn;break;case"name":ce=xn;break;case"checked":qt=xn;break;case"defaultChecked":Sn=xn;break;case"value":Me=xn;break;case"defaultValue":Le=xn;break;case"children":case"dangerouslySetInnerHTML":if(xn!=null)throw Error(f(137,P));break;default:xn!==Cn&&Sr(T,P,on,xn,Z,Cn)}}tr(T,Me,Le,$e,qt,Sn,ue,ce);return;case"select":xn=Me=Le=on=null;for(ue in H)if($e=H[ue],H.hasOwnProperty(ue)&&$e!=null)switch(ue){case"value":break;case"multiple":xn=$e;default:Z.hasOwnProperty(ue)||Sr(T,P,ue,null,Z,$e)}for(ce in Z)if(ue=Z[ce],$e=H[ce],Z.hasOwnProperty(ce)&&(ue!=null||$e!=null))switch(ce){case"value":on=ue;break;case"defaultValue":Le=ue;break;case"multiple":Me=ue;default:ue!==$e&&Sr(T,P,ce,ue,Z,$e)}P=Le,H=Me,Z=xn,on!=null?xr(T,!!H,on,!1):!!Z!=!!H&&(P!=null?xr(T,!!H,P,!0):xr(T,!!H,H?[]:"",!1));return;case"textarea":xn=on=null;for(Le in H)if(ce=H[Le],H.hasOwnProperty(Le)&&ce!=null&&!Z.hasOwnProperty(Le))switch(Le){case"value":break;case"children":break;default:Sr(T,P,Le,null,Z,ce)}for(Me in Z)if(ce=Z[Me],ue=H[Me],Z.hasOwnProperty(Me)&&(ce!=null||ue!=null))switch(Me){case"value":on=ce;break;case"defaultValue":xn=ce;break;case"children":break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(f(91));break;default:ce!==ue&&Sr(T,P,Me,ce,Z,ue)}nr(T,on,xn);return;case"option":for(var yi in H)if(on=H[yi],H.hasOwnProperty(yi)&&on!=null&&!Z.hasOwnProperty(yi))switch(yi){case"selected":T.selected=!1;break;default:Sr(T,P,yi,null,Z,on)}for($e in Z)if(on=Z[$e],xn=H[$e],Z.hasOwnProperty($e)&&on!==xn&&(on!=null||xn!=null))switch($e){case"selected":T.selected=on&&typeof on!="function"&&typeof on!="symbol";break;default:Sr(T,P,$e,on,Z,xn)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mi in H)on=H[Mi],H.hasOwnProperty(Mi)&&on!=null&&!Z.hasOwnProperty(Mi)&&Sr(T,P,Mi,null,Z,on);for(qt in Z)if(on=Z[qt],xn=H[qt],Z.hasOwnProperty(qt)&&on!==xn&&(on!=null||xn!=null))switch(qt){case"children":case"dangerouslySetInnerHTML":if(on!=null)throw Error(f(137,P));break;default:Sr(T,P,qt,on,Z,xn)}return;default:if(Ya(P)){for(var Tr in H)on=H[Tr],H.hasOwnProperty(Tr)&&on!==void 0&&!Z.hasOwnProperty(Tr)&&wp(T,P,Tr,void 0,Z,on);for(Sn in Z)on=Z[Sn],xn=H[Sn],!Z.hasOwnProperty(Sn)||on===xn||on===void 0&&xn===void 0||wp(T,P,Sn,on,Z,xn);return}}for(var bt in H)on=H[bt],H.hasOwnProperty(bt)&&on!=null&&!Z.hasOwnProperty(bt)&&Sr(T,P,bt,null,Z,on);for(Cn in Z)on=Z[Cn],xn=H[Cn],!Z.hasOwnProperty(Cn)||on===xn||on==null&&xn==null||Sr(T,P,Cn,on,Z,xn)}function Kp(T){switch(T){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vm(){if(typeof performance.getEntriesByType=="function"){for(var T=0,P=0,H=performance.getEntriesByType("resource"),Z=0;Z<H.length;Z++){var ce=H[Z],ue=ce.transferSize,Me=ce.initiatorType,Le=ce.duration;if(ue&&Le&&Kp(Me)){for(Me=0,Le=ce.responseEnd,Z+=1;Z<H.length;Z++){var $e=H[Z],qt=$e.startTime;if(qt>Le)break;var Sn=$e.transferSize,Cn=$e.initiatorType;Sn&&Kp(Cn)&&($e=$e.responseEnd,Me+=Sn*($e<Le?1:(Le-qt)/($e-qt)))}if(--Z,P+=8*(ue+Me)/(ce.duration/1e3),T++,10<T)break}}if(0<T)return P/T/1e6}return navigator.connection&&(T=navigator.connection.downlink,typeof T=="number")?T:5}var Mp=null,Cp=null;function Qd(T){return T.nodeType===9?T:T.ownerDocument}function Zp(T){switch(T){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qp(T,P){if(T===0)switch(P){case"svg":return 1;case"math":return 2;default:return 0}return T===1&&P==="foreignObject"?0:T}function Pp(T,P){return T==="textarea"||T==="noscript"||typeof P.children=="string"||typeof P.children=="number"||typeof P.children=="bigint"||typeof P.dangerouslySetInnerHTML=="object"&&P.dangerouslySetInnerHTML!==null&&P.dangerouslySetInnerHTML.__html!=null}var Ip=null;function Nm(){var T=window.event;return T&&T.type==="popstate"?T===Ip?!1:(Ip=T,!0):(Ip=null,!1)}var Jp=typeof setTimeout=="function"?setTimeout:void 0,Lm=typeof clearTimeout=="function"?clearTimeout:void 0,em=typeof Promise=="function"?Promise:void 0,Fm=typeof queueMicrotask=="function"?queueMicrotask:typeof em<"u"?function(T){return em.resolve(null).then(T).catch(Om)}:Jp;function Om(T){setTimeout(function(){throw T})}function Hc(T){return T==="head"}function tm(T,P){var H=P,Z=0;do{var ce=H.nextSibling;if(T.removeChild(H),ce&&ce.nodeType===8)if(H=ce.data,H==="/$"||H==="/&"){if(Z===0){T.removeChild(ce),Mh(P);return}Z--}else if(H==="$"||H==="$?"||H==="$~"||H==="$!"||H==="&")Z++;else if(H==="html")Lf(T.ownerDocument.documentElement);else if(H==="head"){H=T.ownerDocument.head,Lf(H);for(var ue=H.firstChild;ue;){var Me=ue.nextSibling,Le=ue.nodeName;ue[jn]||Le==="SCRIPT"||Le==="STYLE"||Le==="LINK"&&ue.rel.toLowerCase()==="stylesheet"||H.removeChild(ue),ue=Me}}else H==="body"&&Lf(T.ownerDocument.body);H=ce}while(H);Mh(P)}function im(T,P){var H=T;T=0;do{var Z=H.nextSibling;if(H.nodeType===1?P?(H._stashedDisplay=H.style.display,H.style.display="none"):(H.style.display=H._stashedDisplay||"",H.getAttribute("style")===""&&H.removeAttribute("style")):H.nodeType===3&&(P?(H._stashedText=H.nodeValue,H.nodeValue=""):H.nodeValue=H._stashedText||""),Z&&Z.nodeType===8)if(H=Z.data,H==="/$"){if(T===0)break;T--}else H!=="$"&&H!=="$?"&&H!=="$~"&&H!=="$!"||T++;H=Z}while(H)}function kp(T){var P=T.firstChild;for(P&&P.nodeType===10&&(P=P.nextSibling);P;){var H=P;switch(P=P.nextSibling,H.nodeName){case"HTML":case"HEAD":case"BODY":kp(H),Dn(H);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(H.rel.toLowerCase()==="stylesheet")continue}T.removeChild(H)}}function Bm(T,P,H,Z){for(;T.nodeType===1;){var ce=H;if(T.nodeName.toLowerCase()!==P.toLowerCase()){if(!Z&&(T.nodeName!=="INPUT"||T.type!=="hidden"))break}else if(Z){if(!T[jn])switch(P){case"meta":if(!T.hasAttribute("itemprop"))break;return T;case"link":if(ue=T.getAttribute("rel"),ue==="stylesheet"&&T.hasAttribute("data-precedence"))break;if(ue!==ce.rel||T.getAttribute("href")!==(ce.href==null||ce.href===""?null:ce.href)||T.getAttribute("crossorigin")!==(ce.crossOrigin==null?null:ce.crossOrigin)||T.getAttribute("title")!==(ce.title==null?null:ce.title))break;return T;case"style":if(T.hasAttribute("data-precedence"))break;return T;case"script":if(ue=T.getAttribute("src"),(ue!==(ce.src==null?null:ce.src)||T.getAttribute("type")!==(ce.type==null?null:ce.type)||T.getAttribute("crossorigin")!==(ce.crossOrigin==null?null:ce.crossOrigin))&&ue&&T.hasAttribute("async")&&!T.hasAttribute("itemprop"))break;return T;default:return T}}else if(P==="input"&&T.type==="hidden"){var ue=ce.name==null?null:""+ce.name;if(ce.type==="hidden"&&T.getAttribute("name")===ue)return T}else return T;if(T=To(T.nextSibling),T===null)break}return null}function Um(T,P,H){if(P==="")return null;for(;T.nodeType!==3;)if((T.nodeType!==1||T.nodeName!=="INPUT"||T.type!=="hidden")&&!H||(T=To(T.nextSibling),T===null))return null;return T}function rm(T,P){for(;T.nodeType!==8;)if((T.nodeType!==1||T.nodeName!=="INPUT"||T.type!=="hidden")&&!P||(T=To(T.nextSibling),T===null))return null;return T}function Dp(T){return T.data==="$?"||T.data==="$~"}function Vp(T){return T.data==="$!"||T.data==="$?"&&T.ownerDocument.readyState!=="loading"}function jm(T,P){var H=T.ownerDocument;if(T.data==="$~")T._reactRetry=P;else if(T.data!=="$?"||H.readyState!=="loading")P();else{var Z=function(){P(),H.removeEventListener("DOMContentLoaded",Z)};H.addEventListener("DOMContentLoaded",Z),T._reactRetry=Z}}function To(T){for(;T!=null;T=T.nextSibling){var P=T.nodeType;if(P===1||P===3)break;if(P===8){if(P=T.data,P==="$"||P==="$!"||P==="$?"||P==="$~"||P==="&"||P==="F!"||P==="F")break;if(P==="/$"||P==="/&")return null}}return T}var Np=null;function sm(T){T=T.nextSibling;for(var P=0;T;){if(T.nodeType===8){var H=T.data;if(H==="/$"||H==="/&"){if(P===0)return To(T.nextSibling);P--}else H!=="$"&&H!=="$!"&&H!=="$?"&&H!=="$~"&&H!=="&"||P++}T=T.nextSibling}return null}function am(T){T=T.previousSibling;for(var P=0;T;){if(T.nodeType===8){var H=T.data;if(H==="$"||H==="$!"||H==="$?"||H==="$~"||H==="&"){if(P===0)return T;P--}else H!=="/$"&&H!=="/&"||P++}T=T.previousSibling}return null}function om(T,P,H){switch(P=Qd(H),T){case"html":if(T=P.documentElement,!T)throw Error(f(452));return T;case"head":if(T=P.head,!T)throw Error(f(453));return T;case"body":if(T=P.body,!T)throw Error(f(454));return T;default:throw Error(f(451))}}function Lf(T){for(var P=T.attributes;P.length;)T.removeAttributeNode(P[0]);Dn(T)}var Ao=new Map,lm=new Set;function Jd(T){return typeof T.getRootNode=="function"?T.getRootNode():T.nodeType===9?T:T.ownerDocument}var sc=Ae.d;Ae.d={f:zm,r:Gm,D:Hm,C:Wm,L:$m,m:qm,X:Ym,S:Xm,M:Km};function zm(){var T=sc.f(),P=Xa();return T||P}function Gm(T){var P=$n(T);P!==null&&P.tag===5&&P.type==="form"?Nd(P):sc.r(T)}var Ah=typeof document>"u"?null:document;function cm(T,P,H){var Z=Ah;if(Z&&typeof P=="string"&&P){var ce=si(P);ce='link[rel="'+T+'"][href="'+ce+'"]',typeof H=="string"&&(ce+='[crossorigin="'+H+'"]'),lm.has(ce)||(lm.add(ce),T={rel:T,crossOrigin:H,href:P},Z.querySelector(ce)===null&&(P=Z.createElement("link"),Gs(P,"link",T),Xe(P),Z.head.appendChild(P)))}}function Hm(T){sc.D(T),cm("dns-prefetch",T,null)}function Wm(T,P){sc.C(T,P),cm("preconnect",T,P)}function $m(T,P,H){sc.L(T,P,H);var Z=Ah;if(Z&&T&&P){var ce='link[rel="preload"][as="'+si(P)+'"]';P==="image"&&H&&H.imageSrcSet?(ce+='[imagesrcset="'+si(H.imageSrcSet)+'"]',typeof H.imageSizes=="string"&&(ce+='[imagesizes="'+si(H.imageSizes)+'"]')):ce+='[href="'+si(T)+'"]';var ue=ce;switch(P){case"style":ue=Rh(T);break;case"script":ue=wh(T)}Ao.has(ue)||(T=Y({rel:"preload",href:P==="image"&&H&&H.imageSrcSet?void 0:T,as:P},H),Ao.set(ue,T),Z.querySelector(ce)!==null||P==="style"&&Z.querySelector(Ff(ue))||P==="script"&&Z.querySelector(Of(ue))||(P=Z.createElement("link"),Gs(P,"link",T),Xe(P),Z.head.appendChild(P)))}}function qm(T,P){sc.m(T,P);var H=Ah;if(H&&T){var Z=P&&typeof P.as=="string"?P.as:"script",ce='link[rel="modulepreload"][as="'+si(Z)+'"][href="'+si(T)+'"]',ue=ce;switch(Z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ue=wh(T)}if(!Ao.has(ue)&&(T=Y({rel:"modulepreload",href:T},P),Ao.set(ue,T),H.querySelector(ce)===null)){switch(Z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(H.querySelector(Of(ue)))return}Z=H.createElement("link"),Gs(Z,"link",T),Xe(Z),H.head.appendChild(Z)}}}function Xm(T,P,H){sc.S(T,P,H);var Z=Ah;if(Z&&T){var ce=ke(Z).hoistableStyles,ue=Rh(T);P=P||"default";var Me=ce.get(ue);if(!Me){var Le={loading:0,preload:null};if(Me=Z.querySelector(Ff(ue)))Le.loading=5;else{T=Y({rel:"stylesheet",href:T,"data-precedence":P},H),(H=Ao.get(ue))&&Lp(T,H);var $e=Me=Z.createElement("link");Xe($e),Gs($e,"link",T),$e._p=new Promise(function(qt,Sn){$e.onload=qt,$e.onerror=Sn}),$e.addEventListener("load",function(){Le.loading|=1}),$e.addEventListener("error",function(){Le.loading|=2}),Le.loading|=4,ep(Me,P,Z)}Me={type:"stylesheet",instance:Me,count:1,state:Le},ce.set(ue,Me)}}}function Ym(T,P){sc.X(T,P);var H=Ah;if(H&&T){var Z=ke(H).hoistableScripts,ce=wh(T),ue=Z.get(ce);ue||(ue=H.querySelector(Of(ce)),ue||(T=Y({src:T,async:!0},P),(P=Ao.get(ce))&&Fp(T,P),ue=H.createElement("script"),Xe(ue),Gs(ue,"link",T),H.head.appendChild(ue)),ue={type:"script",instance:ue,count:1,state:null},Z.set(ce,ue))}}function Km(T,P){sc.M(T,P);var H=Ah;if(H&&T){var Z=ke(H).hoistableScripts,ce=wh(T),ue=Z.get(ce);ue||(ue=H.querySelector(Of(ce)),ue||(T=Y({src:T,async:!0,type:"module"},P),(P=Ao.get(ce))&&Fp(T,P),ue=H.createElement("script"),Xe(ue),Gs(ue,"link",T),H.head.appendChild(ue)),ue={type:"script",instance:ue,count:1,state:null},Z.set(ce,ue))}}function um(T,P,H,Z){var ce=(ce=Ge.current)?Jd(ce):null;if(!ce)throw Error(f(446));switch(T){case"meta":case"title":return null;case"style":return typeof H.precedence=="string"&&typeof H.href=="string"?(P=Rh(H.href),H=ke(ce).hoistableStyles,Z=H.get(P),Z||(Z={type:"style",instance:null,count:0,state:null},H.set(P,Z)),Z):{type:"void",instance:null,count:0,state:null};case"link":if(H.rel==="stylesheet"&&typeof H.href=="string"&&typeof H.precedence=="string"){T=Rh(H.href);var ue=ke(ce).hoistableStyles,Me=ue.get(T);if(Me||(ce=ce.ownerDocument||ce,Me={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ue.set(T,Me),(ue=ce.querySelector(Ff(T)))&&!ue._p&&(Me.instance=ue,Me.state.loading=5),Ao.has(T)||(H={rel:"preload",as:"style",href:H.href,crossOrigin:H.crossOrigin,integrity:H.integrity,media:H.media,hrefLang:H.hrefLang,referrerPolicy:H.referrerPolicy},Ao.set(T,H),ue||Zm(ce,T,H,Me.state))),P&&Z===null)throw Error(f(528,""));return Me}if(P&&Z!==null)throw Error(f(529,""));return null;case"script":return P=H.async,H=H.src,typeof H=="string"&&P&&typeof P!="function"&&typeof P!="symbol"?(P=wh(H),H=ke(ce).hoistableScripts,Z=H.get(P),Z||(Z={type:"script",instance:null,count:0,state:null},H.set(P,Z)),Z):{type:"void",instance:null,count:0,state:null};default:throw Error(f(444,T))}}function Rh(T){return'href="'+si(T)+'"'}function Ff(T){return'link[rel="stylesheet"]['+T+"]"}function hm(T){return Y({},T,{"data-precedence":T.precedence,precedence:null})}function Zm(T,P,H,Z){T.querySelector('link[rel="preload"][as="style"]['+P+"]")?Z.loading=1:(P=T.createElement("link"),Z.preload=P,P.addEventListener("load",function(){return Z.loading|=1}),P.addEventListener("error",function(){return Z.loading|=2}),Gs(P,"link",H),Xe(P),T.head.appendChild(P))}function wh(T){return'[src="'+si(T)+'"]'}function Of(T){return"script[async]"+T}function fm(T,P,H){if(P.count++,P.instance===null)switch(P.type){case"style":var Z=T.querySelector('style[data-href~="'+si(H.href)+'"]');if(Z)return P.instance=Z,Xe(Z),Z;var ce=Y({},H,{"data-href":H.href,"data-precedence":H.precedence,href:null,precedence:null});return Z=(T.ownerDocument||T).createElement("style"),Xe(Z),Gs(Z,"style",ce),ep(Z,H.precedence,T),P.instance=Z;case"stylesheet":ce=Rh(H.href);var ue=T.querySelector(Ff(ce));if(ue)return P.state.loading|=4,P.instance=ue,Xe(ue),ue;Z=hm(H),(ce=Ao.get(ce))&&Lp(Z,ce),ue=(T.ownerDocument||T).createElement("link"),Xe(ue);var Me=ue;return Me._p=new Promise(function(Le,$e){Me.onload=Le,Me.onerror=$e}),Gs(ue,"link",Z),P.state.loading|=4,ep(ue,H.precedence,T),P.instance=ue;case"script":return ue=wh(H.src),(ce=T.querySelector(Of(ue)))?(P.instance=ce,Xe(ce),ce):(Z=H,(ce=Ao.get(ue))&&(Z=Y({},H),Fp(Z,ce)),T=T.ownerDocument||T,ce=T.createElement("script"),Xe(ce),Gs(ce,"link",Z),T.head.appendChild(ce),P.instance=ce);case"void":return null;default:throw Error(f(443,P.type))}else P.type==="stylesheet"&&(P.state.loading&4)===0&&(Z=P.instance,P.state.loading|=4,ep(Z,H.precedence,T));return P.instance}function ep(T,P,H){for(var Z=H.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),ce=Z.length?Z[Z.length-1]:null,ue=ce,Me=0;Me<Z.length;Me++){var Le=Z[Me];if(Le.dataset.precedence===P)ue=Le;else if(ue!==ce)break}ue?ue.parentNode.insertBefore(T,ue.nextSibling):(P=H.nodeType===9?H.head:H,P.insertBefore(T,P.firstChild))}function Lp(T,P){T.crossOrigin==null&&(T.crossOrigin=P.crossOrigin),T.referrerPolicy==null&&(T.referrerPolicy=P.referrerPolicy),T.title==null&&(T.title=P.title)}function Fp(T,P){T.crossOrigin==null&&(T.crossOrigin=P.crossOrigin),T.referrerPolicy==null&&(T.referrerPolicy=P.referrerPolicy),T.integrity==null&&(T.integrity=P.integrity)}var tp=null;function dm(T,P,H){if(tp===null){var Z=new Map,ce=tp=new Map;ce.set(H,Z)}else ce=tp,Z=ce.get(H),Z||(Z=new Map,ce.set(H,Z));if(Z.has(T))return Z;for(Z.set(T,null),H=H.getElementsByTagName(T),ce=0;ce<H.length;ce++){var ue=H[ce];if(!(ue[jn]||ue[pr]||T==="link"&&ue.getAttribute("rel")==="stylesheet")&&ue.namespaceURI!=="http://www.w3.org/2000/svg"){var Me=ue.getAttribute(P)||"";Me=T+Me;var Le=Z.get(Me);Le?Le.push(ue):Z.set(Me,[ue])}}return Z}function pm(T,P,H){T=T.ownerDocument||T,T.head.insertBefore(H,P==="title"?T.querySelector("head > title"):null)}function Qm(T,P,H){if(H===1||P.itemProp!=null)return!1;switch(T){case"meta":case"title":return!0;case"style":if(typeof P.precedence!="string"||typeof P.href!="string"||P.href==="")break;return!0;case"link":if(typeof P.rel!="string"||typeof P.href!="string"||P.href===""||P.onLoad||P.onError)break;switch(P.rel){case"stylesheet":return T=P.disabled,typeof P.precedence=="string"&&T==null;default:return!0}case"script":if(P.async&&typeof P.async!="function"&&typeof P.async!="symbol"&&!P.onLoad&&!P.onError&&P.src&&typeof P.src=="string")return!0}return!1}function mm(T){return!(T.type==="stylesheet"&&(T.state.loading&3)===0)}function Jm(T,P,H,Z){if(H.type==="stylesheet"&&(typeof Z.media!="string"||matchMedia(Z.media).matches!==!1)&&(H.state.loading&4)===0){if(H.instance===null){var ce=Rh(Z.href),ue=P.querySelector(Ff(ce));if(ue){P=ue._p,P!==null&&typeof P=="object"&&typeof P.then=="function"&&(T.count++,T=np.bind(T),P.then(T,T)),H.state.loading|=4,H.instance=ue,Xe(ue);return}ue=P.ownerDocument||P,Z=hm(Z),(ce=Ao.get(ce))&&Lp(Z,ce),ue=ue.createElement("link"),Xe(ue);var Me=ue;Me._p=new Promise(function(Le,$e){Me.onload=Le,Me.onerror=$e}),Gs(ue,"link",Z),H.instance=ue}T.stylesheets===null&&(T.stylesheets=new Map),T.stylesheets.set(H,P),(P=H.state.preload)&&(H.state.loading&3)===0&&(T.count++,H=np.bind(T),P.addEventListener("load",H),P.addEventListener("error",H))}}var Op=0;function e0(T,P){return T.stylesheets&&T.count===0&&sp(T,T.stylesheets),0<T.count||0<T.imgCount?function(H){var Z=setTimeout(function(){if(T.stylesheets&&sp(T,T.stylesheets),T.unsuspend){var ue=T.unsuspend;T.unsuspend=null,ue()}},6e4+P);0<T.imgBytes&&Op===0&&(Op=62500*Vm());var ce=setTimeout(function(){if(T.waitingForImages=!1,T.count===0&&(T.stylesheets&&sp(T,T.stylesheets),T.unsuspend)){var ue=T.unsuspend;T.unsuspend=null,ue()}},(T.imgBytes>Op?50:800)+P);return T.unsuspend=H,function(){T.unsuspend=null,clearTimeout(Z),clearTimeout(ce)}}:null}function np(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sp(this,this.stylesheets);else if(this.unsuspend){var T=this.unsuspend;this.unsuspend=null,T()}}}var rp=null;function sp(T,P){T.stylesheets=null,T.unsuspend!==null&&(T.count++,rp=new Map,P.forEach(i0,T),rp=null,np.call(T))}function i0(T,P){if(!(P.state.loading&4)){var H=rp.get(T);if(H)var Z=H.get(null);else{H=new Map,rp.set(T,H);for(var ce=T.querySelectorAll("link[data-precedence],style[data-precedence]"),ue=0;ue<ce.length;ue++){var Me=ce[ue];(Me.nodeName==="LINK"||Me.getAttribute("media")!=="not all")&&(H.set(Me.dataset.precedence,Me),Z=Me)}Z&&H.set(null,Z)}ce=P.instance,Me=ce.getAttribute("data-precedence"),ue=H.get(Me)||Z,ue===Z&&H.set(null,ce),H.set(Me,ce),this.count++,Z=np.bind(this),ce.addEventListener("load",Z),ce.addEventListener("error",Z),ue?ue.parentNode.insertBefore(ce,ue.nextSibling):(T=T.nodeType===9?T.head:T,T.insertBefore(ce,T.firstChild)),P.state.loading|=4}}var Bf={$$typeof:re,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function s0(T,P,H,Z,ce,ue,Me,Le,$e){this.tag=1,this.containerInfo=T,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.hiddenUpdates=Ii(null),this.identifierPrefix=Z,this.onUncaughtError=ce,this.onCaughtError=ue,this.onRecoverableError=Me,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$e,this.incompleteTransitions=new Map}function gm(T,P,H,Z,ce,ue,Me,Le,$e,qt,Sn,Cn){return T=new s0(T,P,H,Me,$e,qt,Sn,Cn,Le),P=1,ue===!0&&(P|=24),ue=Vr(3,null,null,P),T.current=ue,ue.stateNode=T,P=zh(),P.refCount++,T.pooledCache=P,P.refCount++,ue.memoizedState={element:Z,isDehydrated:H,cache:P},pu(ue),T}function ym(T){return T?(T=il,T):il}function xm(T,P,H,Z,ce,ue){ce=ym(ce),Z.context===null?Z.context=ce:Z.pendingContext=ce,Z=Oo(P),Z.payload={element:H},ue=ue===void 0?null:ue,ue!==null&&(Z.callback=ue),H=hl(T,Z,P),H!==null&&(Ui(H,T,P),dl(H,T,P))}function _m(T,P){if(T=T.memoizedState,T!==null&&T.dehydrated!==null){var H=T.retryLane;T.retryLane=H!==0&&H<P?H:P}}function Bp(T,P){_m(T,P),(T=T.alternate)&&_m(T,P)}function vm(T){if(T.tag===13||T.tag===31){var P=Ls(T,67108864);P!==null&&Ui(P,T,67108864),Bp(T,67108864)}}function bm(T){if(T.tag===13||T.tag===31){var P=pa();P=Is(P);var H=Ls(T,P);H!==null&&Ui(H,T,P),Bp(T,P)}}var ap=!0;function a0(T,P,H,Z){var ce=ye.T;ye.T=null;var ue=Ae.p;try{Ae.p=2,Up(T,P,H,Z)}finally{Ae.p=ue,ye.T=ce}}function o0(T,P,H,Z){var ce=ye.T;ye.T=null;var ue=Ae.p;try{Ae.p=8,Up(T,P,H,Z)}finally{Ae.p=ue,ye.T=ce}}function Up(T,P,H,Z){if(ap){var ce=jp(Z);if(ce===null)Rp(T,P,Z,lp,H),Sm(T,Z);else if(c0(ce,T,P,H,Z))Z.stopPropagation();else if(Sm(T,Z),P&4&&-1<l0.indexOf(T)){for(;ce!==null;){var ue=$n(ce);if(ue!==null)switch(ue.tag){case 3:if(ue=ue.stateNode,ue.current.memoizedState.isDehydrated){var Me=Bn(ue.pendingLanes);if(Me!==0){var Le=ue;for(Le.pendingLanes|=2,Le.entangledLanes|=2;Me;){var $e=1<<31-Jn(Me);Le.entanglements[1]|=$e,Me&=~$e}Wn(ue),(vi&6)===0&&(Kr=Pe()+500,hi(0))}}break;case 31:case 13:Le=Ls(ue,2),Le!==null&&Ui(Le,ue,2),Xa(),Bp(ue,2)}if(ue=jp(Z),ue===null&&Rp(T,P,Z,lp,H),ue===ce)break;ce=ue}ce!==null&&Z.stopPropagation()}else Rp(T,P,Z,null,H)}}function jp(T){return T=ra(T),zp(T)}var lp=null;function zp(T){if(lp=null,T=Yn(T),T!==null){var P=y(T);if(P===null)T=null;else{var H=P.tag;if(H===13){if(T=_(P),T!==null)return T;T=null}else if(H===31){if(T=A(P),T!==null)return T;T=null}else if(H===3){if(P.stateNode.current.memoizedState.isDehydrated)return P.tag===3?P.stateNode.containerInfo:null;T=null}else P!==T&&(T=null)}}return lp=T,null}function Em(T){switch(T){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ke()){case Ft:return 2;case bn:return 8;case ln:case Zn:return 32;case Gn:return 268435456;default:return 32}default:return 32}}var Gp=!1,Wc=null,$c=null,qc=null,Uf=new Map,jf=new Map,Xc=[],l0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sm(T,P){switch(T){case"focusin":case"focusout":Wc=null;break;case"dragenter":case"dragleave":$c=null;break;case"mouseover":case"mouseout":qc=null;break;case"pointerover":case"pointerout":Uf.delete(P.pointerId);break;case"gotpointercapture":case"lostpointercapture":jf.delete(P.pointerId)}}function zf(T,P,H,Z,ce,ue){return T===null||T.nativeEvent!==ue?(T={blockedOn:P,domEventName:H,eventSystemFlags:Z,nativeEvent:ue,targetContainers:[ce]},P!==null&&(P=$n(P),P!==null&&vm(P)),T):(T.eventSystemFlags|=Z,P=T.targetContainers,ce!==null&&P.indexOf(ce)===-1&&P.push(ce),T)}function c0(T,P,H,Z,ce){switch(P){case"focusin":return Wc=zf(Wc,T,P,H,Z,ce),!0;case"dragenter":return $c=zf($c,T,P,H,Z,ce),!0;case"mouseover":return qc=zf(qc,T,P,H,Z,ce),!0;case"pointerover":var ue=ce.pointerId;return Uf.set(ue,zf(Uf.get(ue)||null,T,P,H,Z,ce)),!0;case"gotpointercapture":return ue=ce.pointerId,jf.set(ue,zf(jf.get(ue)||null,T,P,H,Z,ce)),!0}return!1}function Tm(T){var P=Yn(T.target);if(P!==null){var H=y(P);if(H!==null){if(P=H.tag,P===13){if(P=_(H),P!==null){T.blockedOn=P,bi(T.priority,function(){bm(H)});return}}else if(P===31){if(P=A(H),P!==null){T.blockedOn=P,bi(T.priority,function(){bm(H)});return}}else if(P===3&&H.stateNode.current.memoizedState.isDehydrated){T.blockedOn=H.tag===3?H.stateNode.containerInfo:null;return}}}T.blockedOn=null}function cp(T){if(T.blockedOn!==null)return!1;for(var P=T.targetContainers;0<P.length;){var H=jp(T.nativeEvent);if(H===null){H=T.nativeEvent;var Z=new H.constructor(H.type,H);ac=Z,H.target.dispatchEvent(Z),ac=null}else return P=$n(H),P!==null&&vm(P),T.blockedOn=H,!1;P.shift()}return!0}function Am(T,P,H){cp(T)&&H.delete(P)}function u0(){Gp=!1,Wc!==null&&cp(Wc)&&(Wc=null),$c!==null&&cp($c)&&($c=null),qc!==null&&cp(qc)&&(qc=null),Uf.forEach(Am),jf.forEach(Am)}function up(T,P){T.blockedOn===P&&(T.blockedOn=null,Gp||(Gp=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,u0)))}var hp=null;function wm(T){hp!==T&&(hp=T,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){hp===T&&(hp=null);for(var P=0;P<T.length;P+=3){var H=T[P],Z=T[P+1],ce=T[P+2];if(typeof Z!="function"){if(zp(Z||H)===null)continue;break}var ue=$n(H);ue!==null&&(T.splice(P,3),P-=3,gf(ue,{pending:!0,data:ce,method:H.method,action:Z},Z,ce))}}))}function Mh(T){function P($e){return up($e,T)}Wc!==null&&up(Wc,T),$c!==null&&up($c,T),qc!==null&&up(qc,T),Uf.forEach(P),jf.forEach(P);for(var H=0;H<Xc.length;H++){var Z=Xc[H];Z.blockedOn===T&&(Z.blockedOn=null)}for(;0<Xc.length&&(H=Xc[0],H.blockedOn===null);)Tm(H),H.blockedOn===null&&Xc.shift();if(H=(T.ownerDocument||T).$$reactFormReplay,H!=null)for(Z=0;Z<H.length;Z+=3){var ce=H[Z],ue=H[Z+1],Me=ce[Ie]||null;if(typeof ue=="function")Me||wm(H);else if(Me){var Le=null;if(ue&&ue.hasAttribute("formAction")){if(ce=ue,Me=ue[Ie]||null)Le=Me.formAction;else if(zp(ce)!==null)continue}else Le=Me.action;typeof Le=="function"?H[Z+1]=Le:(H.splice(Z,3),Z-=3),wm(H)}}}function Mm(){function T(ue){ue.canIntercept&&ue.info==="react-transition"&&ue.intercept({handler:function(){return new Promise(function(Me){return ce=Me})},focusReset:"manual",scroll:"manual"})}function P(){ce!==null&&(ce(),ce=null),Z||setTimeout(H,20)}function H(){if(!Z&&!navigation.transition){var ue=navigation.currentEntry;ue&&ue.url!=null&&navigation.navigate(ue.url,{state:ue.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var Z=!1,ce=null;return navigation.addEventListener("navigate",T),navigation.addEventListener("navigatesuccess",P),navigation.addEventListener("navigateerror",P),setTimeout(H,100),function(){Z=!0,navigation.removeEventListener("navigate",T),navigation.removeEventListener("navigatesuccess",P),navigation.removeEventListener("navigateerror",P),ce!==null&&(ce(),ce=null)}}}function Hp(T){this._internalRoot=T}fp.prototype.render=Hp.prototype.render=function(T){var P=this._internalRoot;if(P===null)throw Error(f(409));var H=P.current,Z=pa();xm(H,Z,T,P,null,null)},fp.prototype.unmount=Hp.prototype.unmount=function(){var T=this._internalRoot;if(T!==null){this._internalRoot=null;var P=T.containerInfo;xm(T.current,2,null,T,null,null),Xa(),P[Fe]=null}};function fp(T){this._internalRoot=T}fp.prototype.unstable_scheduleHydration=function(T){if(T){var P=es();T={blockedOn:null,target:T,priority:P};for(var H=0;H<Xc.length&&P!==0&&P<Xc[H].priority;H++);Xc.splice(H,0,T),H===0&&Tm(T)}};var Cm=n.version;if(Cm!=="19.2.4")throw Error(f(527,Cm,"19.2.4"));Ae.findDOMNode=function(T){var P=T._reactInternals;if(P===void 0)throw typeof T.render=="function"?Error(f(188)):(T=Object.keys(T).join(","),Error(f(268,T)));return T=I(P),T=T!==null?G(T):null,T=T===null?null:T.stateNode,T};var h0={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ye,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dp.isDisabled&&dp.supportsFiber)try{wn=dp.inject(h0),Tn=dp}catch{}}return reactDomClient_production.createRoot=function(T,P){if(!d(T))throw Error(f(299));var H=!1,Z="",ce=zd,ue=Ef,Me=Sf;return P!=null&&(P.unstable_strictMode===!0&&(H=!0),P.identifierPrefix!==void 0&&(Z=P.identifierPrefix),P.onUncaughtError!==void 0&&(ce=P.onUncaughtError),P.onCaughtError!==void 0&&(ue=P.onCaughtError),P.onRecoverableError!==void 0&&(Me=P.onRecoverableError)),P=gm(T,1,!1,null,null,H,Z,null,ce,ue,Me,Mm),T[Fe]=P.current,Ap(T),new Hp(P)},reactDomClient_production.hydrateRoot=function(T,P,H){if(!d(T))throw Error(f(299));var Z=!1,ce="",ue=zd,Me=Ef,Le=Sf,$e=null;return H!=null&&(H.unstable_strictMode===!0&&(Z=!0),H.identifierPrefix!==void 0&&(ce=H.identifierPrefix),H.onUncaughtError!==void 0&&(ue=H.onUncaughtError),H.onCaughtError!==void 0&&(Me=H.onCaughtError),H.onRecoverableError!==void 0&&(Le=H.onRecoverableError),H.formState!==void 0&&($e=H.formState)),P=gm(T,1,!0,P,H??null,Z,ce,$e,ue,Me,Le,Mm),P.context=ym(null),H=P.current,Z=pa(),Z=Is(Z),ce=Oo(Z),ce.callback=null,hl(H,ce,Z),H=Z,P.current.lanes=H,Jr(P,H),Wn(P),T[Fe]=P.current,Ap(T),new fp(P)},reactDomClient_production.version="19.2.4",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(n){console.error(n)}}return u(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const LayoutGroupContext=reactExports.createContext({});function useConstant(u){const n=reactExports.useRef(null);return n.current===null&&(n.current=u()),n.current}const isBrowser$2=typeof window<"u",useIsomorphicLayoutEffect$2=isBrowser$2?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(u,n){u.indexOf(n)===-1&&u.push(n)}function removeItem(u,n){const s=u.indexOf(n);s>-1&&u.splice(s,1)}const clamp$1=(u,n,s)=>s>n?n:s<u?u:s;let invariant$1=()=>{};const MotionGlobalConfig={},isNumericalString=u=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(u);function isObject$1(u){return typeof u=="object"&&u!==null}const isZeroValueString=u=>/^0[^.\s]+$/u.test(u);function memo(u){let n;return()=>(n===void 0&&(n=u()),n)}const noop$1=u=>u,combineFunctions=(u,n)=>s=>n(u(s)),pipe=(...u)=>u.reduce(combineFunctions),progress=(u,n,s)=>{const f=n-u;return f===0?1:(s-u)/f};class SubscriptionManager{constructor(){this.subscriptions=[]}add(n){return addUniqueItem(this.subscriptions,n),()=>removeItem(this.subscriptions,n)}notify(n,s,f){const d=this.subscriptions.length;if(d)if(d===1)this.subscriptions[0](n,s,f);else for(let y=0;y<d;y++){const _=this.subscriptions[y];_&&_(n,s,f)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=u=>u*1e3,millisecondsToSeconds=u=>u/1e3;function velocityPerSecond(u,n){return n?u*(1e3/n):0}const calcBezier=(u,n,s)=>(((1-3*s+3*n)*u+(3*s-6*n))*u+3*n)*u,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(u,n,s,f,d){let y,_,A=0;do _=n+(s-n)/2,y=calcBezier(_,f,d)-u,y>0?s=_:n=_;while(Math.abs(y)>subdivisionPrecision&&++A<subdivisionMaxIterations);return _}function cubicBezier(u,n,s,f){if(u===n&&s===f)return noop$1;const d=y=>binarySubdivide(y,0,1,u,s);return y=>y===0||y===1?y:calcBezier(d(y),n,f)}const mirrorEasing=u=>n=>n<=.5?u(2*n)/2:(2-u(2*(1-n)))/2,reverseEasing=u=>n=>1-u(1-n),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=u=>(u*=2)<1?.5*backIn(u):.5*(2-Math.pow(2,-10*(u-1))),circIn=u=>1-Math.sin(Math.acos(u)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=u=>Array.isArray(u)&&typeof u[0]!="number",isBezierDefinition=u=>Array.isArray(u)&&typeof u[0]=="number",easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=u=>typeof u=="string",easingDefinitionToFunction=u=>{if(isBezierDefinition(u)){invariant$1(u.length===4);const[n,s,f,d]=u;return cubicBezier(n,s,f,d)}else if(isValidEasing(u))return easingLookup[u];return u},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(u,n){let s=new Set,f=new Set,d=!1,y=!1;const _=new WeakSet;let A={delta:0,timestamp:0,isProcessing:!1};function R(G){_.has(G)&&(I.schedule(G),u()),G(A)}const I={schedule:(G,Y=!1,q=!1)=>{const Q=q&&d?s:f;return Y&&_.add(G),Q.has(G)||Q.add(G),G},cancel:G=>{f.delete(G),_.delete(G)},process:G=>{if(A=G,d){y=!0;return}d=!0,[s,f]=[f,s],s.forEach(R),s.clear(),d=!1,y&&(y=!1,I.process(G))}};return I}const maxElapsed=40;function createRenderBatcher(u,n){let s=!1,f=!0;const d={delta:0,timestamp:0,isProcessing:!1},y=()=>s=!0,_=stepsOrder.reduce((re,le)=>(re[le]=createRenderStep(y),re),{}),{setup:A,read:R,resolveKeyframes:I,preUpdate:G,update:Y,preRender:q,render:K,postRender:Q}=_,ne=()=>{const re=MotionGlobalConfig.useManualTiming?d.timestamp:performance.now();s=!1,MotionGlobalConfig.useManualTiming||(d.delta=f?1e3/60:Math.max(Math.min(re-d.timestamp,maxElapsed),1)),d.timestamp=re,d.isProcessing=!0,A.process(d),R.process(d),I.process(d),G.process(d),Y.process(d),q.process(d),K.process(d),Q.process(d),d.isProcessing=!1,s&&n&&(f=!1,u(ne))},te=()=>{s=!0,f=!0,d.isProcessing||u(ne)};return{schedule:stepsOrder.reduce((re,le)=>{const fe=_[le];return re[le]=(pe,de=!1,se=!1)=>(s||te(),fe.schedule(pe,de,se)),re},{}),cancel:re=>{for(let le=0;le<stepsOrder.length;le++)_[stepsOrder[le]].cancel(re)},state:d,steps:_}}const{schedule:frame$1,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:u=>{now=u,queueMicrotask(clearTime)}},checkStringStartsWith=u=>n=>typeof n=="string"&&n.startsWith(u),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=u=>startsAsVariableToken(u)?singleCssVariableRegex.test(u.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function containsCSSVariable(u){return typeof u!="string"?!1:u.split("/*")[0].includes("var(--")}const number={test:u=>typeof u=="number",parse:parseFloat,transform:u=>u},alpha={...number,transform:u=>clamp$1(0,1,u)},scale={...number,default:1},sanitize=u=>Math.round(u*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(u){return u==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(u,n)=>s=>!!(typeof s=="string"&&singleColorRegex.test(s)&&s.startsWith(u)||n&&!isNullish(s)&&Object.prototype.hasOwnProperty.call(s,n)),splitColor=(u,n,s)=>f=>{if(typeof f!="string")return f;const[d,y,_,A]=f.match(floatRegex);return{[u]:parseFloat(d),[n]:parseFloat(y),[s]:parseFloat(_),alpha:A!==void 0?parseFloat(A):1}},clampRgbUnit=u=>clamp$1(0,255,u),rgbUnit={...number,transform:u=>Math.round(clampRgbUnit(u))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:u,green:n,blue:s,alpha:f=1})=>"rgba("+rgbUnit.transform(u)+", "+rgbUnit.transform(n)+", "+rgbUnit.transform(s)+", "+sanitize(alpha.transform(f))+")"};function parseHex(u){let n="",s="",f="",d="";return u.length>5?(n=u.substring(1,3),s=u.substring(3,5),f=u.substring(5,7),d=u.substring(7,9)):(n=u.substring(1,2),s=u.substring(2,3),f=u.substring(3,4),d=u.substring(4,5),n+=n,s+=s,f+=f,d+=d),{red:parseInt(n,16),green:parseInt(s,16),blue:parseInt(f,16),alpha:d?parseInt(d,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=u=>({test:n=>typeof n=="string"&&n.endsWith(u)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${u}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px$1=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:u=>percent.parse(u)/100,transform:u=>percent.transform(u*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:u,saturation:n,lightness:s,alpha:f=1})=>"hsla("+Math.round(u)+", "+percent.transform(sanitize(n))+", "+percent.transform(sanitize(s))+", "+sanitize(alpha.transform(f))+")"},color={test:u=>rgba.test(u)||hex.test(u)||hsla.test(u),parse:u=>rgba.test(u)?rgba.parse(u):hsla.test(u)?hsla.parse(u):hex.parse(u),transform:u=>typeof u=="string"?u:u.hasOwnProperty("red")?rgba.transform(u):hsla.transform(u),getAnimatableNone:u=>{const n=color.parse(u);return n.alpha=0,color.transform(n)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(u){var n,s;return isNaN(u)&&typeof u=="string"&&(((n=u.match(floatRegex))==null?void 0:n.length)||0)+(((s=u.match(colorRegex))==null?void 0:s.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(u){const n=u.toString(),s=[],f={color:[],number:[],var:[]},d=[];let y=0;const A=n.replace(complexRegex,R=>(color.test(R)?(f.color.push(y),d.push(COLOR_TOKEN),s.push(color.parse(R))):R.startsWith(VAR_FUNCTION_TOKEN)?(f.var.push(y),d.push(VAR_TOKEN),s.push(R)):(f.number.push(y),d.push(NUMBER_TOKEN),s.push(parseFloat(R))),++y,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:s,split:A,indexes:f,types:d}}function parseComplexValue(u){return analyseComplexValue(u).values}function createTransformer(u){const{split:n,types:s}=analyseComplexValue(u),f=n.length;return d=>{let y="";for(let _=0;_<f;_++)if(y+=n[_],d[_]!==void 0){const A=s[_];A===NUMBER_TOKEN?y+=sanitize(d[_]):A===COLOR_TOKEN?y+=color.transform(d[_]):y+=d[_]}return y}}const convertNumbersToZero=u=>typeof u=="number"?0:color.test(u)?color.getAnimatableNone(u):u;function getAnimatableNone$1(u){const n=parseComplexValue(u);return createTransformer(u)(n.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(u,n,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?u+(n-u)*6*s:s<1/2?n:s<2/3?u+(n-u)*(2/3-s)*6:u}function hslaToRgba({hue:u,saturation:n,lightness:s,alpha:f}){u/=360,n/=100,s/=100;let d=0,y=0,_=0;if(!n)d=y=_=s;else{const A=s<.5?s*(1+n):s+n-s*n,R=2*s-A;d=hueToRgb(R,A,u+1/3),y=hueToRgb(R,A,u),_=hueToRgb(R,A,u-1/3)}return{red:Math.round(d*255),green:Math.round(y*255),blue:Math.round(_*255),alpha:f}}function mixImmediate(u,n){return s=>s>0?n:u}const mixNumber$1=(u,n,s)=>u+(n-u)*s,mixLinearColor=(u,n,s)=>{const f=u*u,d=s*(n*n-f)+f;return d<0?0:Math.sqrt(d)},colorTypes=[hex,rgba,hsla],getColorType=u=>colorTypes.find(n=>n.test(u));function asRGBA(u){const n=getColorType(u);if(!n)return!1;let s=n.parse(u);return n===hsla&&(s=hslaToRgba(s)),s}const mixColor=(u,n)=>{const s=asRGBA(u),f=asRGBA(n);if(!s||!f)return mixImmediate(u,n);const d={...s};return y=>(d.red=mixLinearColor(s.red,f.red,y),d.green=mixLinearColor(s.green,f.green,y),d.blue=mixLinearColor(s.blue,f.blue,y),d.alpha=mixNumber$1(s.alpha,f.alpha,y),rgba.transform(d))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(u,n){return invisibleValues.has(u)?s=>s<=0?u:n:s=>s>=1?n:u}function mixNumber(u,n){return s=>mixNumber$1(u,n,s)}function getMixer(u){return typeof u=="number"?mixNumber:typeof u=="string"?isCSSVariableToken(u)?mixImmediate:color.test(u)?mixColor:mixComplex:Array.isArray(u)?mixArray:typeof u=="object"?color.test(u)?mixColor:mixObject:mixImmediate}function mixArray(u,n){const s=[...u],f=s.length,d=u.map((y,_)=>getMixer(y)(y,n[_]));return y=>{for(let _=0;_<f;_++)s[_]=d[_](y);return s}}function mixObject(u,n){const s={...u,...n},f={};for(const d in s)u[d]!==void 0&&n[d]!==void 0&&(f[d]=getMixer(u[d])(u[d],n[d]));return d=>{for(const y in f)s[y]=f[y](d);return s}}function matchOrder(u,n){const s=[],f={color:0,var:0,number:0};for(let d=0;d<n.values.length;d++){const y=n.types[d],_=u.indexes[y][f[y]],A=u.values[_]??0;s[d]=A,f[y]++}return s}const mixComplex=(u,n)=>{const s=complex.createTransformer(n),f=analyseComplexValue(u),d=analyseComplexValue(n);return f.indexes.var.length===d.indexes.var.length&&f.indexes.color.length===d.indexes.color.length&&f.indexes.number.length>=d.indexes.number.length?invisibleValues.has(u)&&!d.values.length||invisibleValues.has(n)&&!f.values.length?mixVisibility(u,n):pipe(mixArray(matchOrder(f,d),d.values),s):mixImmediate(u,n)};function mix(u,n,s){return typeof u=="number"&&typeof n=="number"&&typeof s=="number"?mixNumber$1(u,n,s):getMixer(u)(u,n)}const frameloopDriver=u=>{const n=({timestamp:s})=>u(s);return{start:(s=!0)=>frame$1.update(n,s),stop:()=>cancelFrame(n),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(u,n,s=10)=>{let f="";const d=Math.max(Math.round(n/s),2);for(let y=0;y<d;y++)f+=Math.round(u(y/(d-1))*1e4)/1e4+", ";return`linear(${f.substring(0,f.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(u){let n=0;const s=50;let f=u.next(n);for(;!f.done&&n<maxGeneratorDuration;)n+=s,f=u.next(n);return n>=maxGeneratorDuration?1/0:n}function createGeneratorEasing(u,n=100,s){const f=s({...u,keyframes:[0,n]}),d=Math.min(calcGeneratorDuration(f),maxGeneratorDuration);return{type:"keyframes",ease:y=>f.next(d*y).value/n,duration:millisecondsToSeconds(d)}}const velocitySampleDuration=5;function calcGeneratorVelocity(u,n,s){const f=Math.max(n-velocitySampleDuration,0);return velocityPerSecond(s-u(f),n-f)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:u=springDefaults.duration,bounce:n=springDefaults.bounce,velocity:s=springDefaults.velocity,mass:f=springDefaults.mass}){let d,y,_=1-n;_=clamp$1(springDefaults.minDamping,springDefaults.maxDamping,_),u=clamp$1(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(u)),_<1?(d=I=>{const G=I*_,Y=G*u,q=G-s,K=calcAngularFreq(I,_),Q=Math.exp(-Y);return safeMin-q/K*Q},y=I=>{const Y=I*_*u,q=Y*s+s,K=Math.pow(_,2)*Math.pow(I,2)*u,Q=Math.exp(-Y),ne=calcAngularFreq(Math.pow(I,2),_);return(-d(I)+safeMin>0?-1:1)*((q-K)*Q)/ne}):(d=I=>{const G=Math.exp(-I*u),Y=(I-s)*u+1;return-safeMin+G*Y},y=I=>{const G=Math.exp(-I*u),Y=(s-I)*(u*u);return G*Y});const A=5/u,R=approximateRoot(d,y,A);if(u=secondsToMilliseconds(u),isNaN(R))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:u};{const I=Math.pow(R,2)*f;return{stiffness:I,damping:_*2*Math.sqrt(f*I),duration:u}}}const rootIterations=12;function approximateRoot(u,n,s){let f=s;for(let d=1;d<rootIterations;d++)f=f-u(f)/n(f);return f}function calcAngularFreq(u,n){return u*Math.sqrt(1-n*n)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(u,n){return n.some(s=>u[s]!==void 0)}function getSpringOptions(u){let n={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...u};if(!isSpringType(u,physicsKeys)&&isSpringType(u,durationKeys))if(n.velocity=0,u.visualDuration){const s=u.visualDuration,f=2*Math.PI/(s*1.2),d=f*f,y=2*clamp$1(.05,1,1-(u.bounce||0))*Math.sqrt(d);n={...n,mass:springDefaults.mass,stiffness:d,damping:y}}else{const s=findSpring({...u,velocity:0});n={...n,...s,mass:springDefaults.mass},n.isResolvedFromDuration=!0}return n}function spring(u=springDefaults.visualDuration,n=springDefaults.bounce){const s=typeof u!="object"?{visualDuration:u,keyframes:[0,1],bounce:n}:u;let{restSpeed:f,restDelta:d}=s;const y=s.keyframes[0],_=s.keyframes[s.keyframes.length-1],A={done:!1,value:y},{stiffness:R,damping:I,mass:G,duration:Y,velocity:q,isResolvedFromDuration:K}=getSpringOptions({...s,velocity:-millisecondsToSeconds(s.velocity||0)}),Q=q||0,ne=I/(2*Math.sqrt(R*G)),te=_-y,J=millisecondsToSeconds(Math.sqrt(R/G)),ie=Math.abs(te)<5;f||(f=ie?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),d||(d=ie?springDefaults.restDelta.granular:springDefaults.restDelta.default);let re;if(ne<1){const fe=calcAngularFreq(J,ne);re=pe=>{const de=Math.exp(-ne*J*pe);return _-de*((Q+ne*J*te)/fe*Math.sin(fe*pe)+te*Math.cos(fe*pe))}}else if(ne===1)re=fe=>_-Math.exp(-J*fe)*(te+(Q+J*te)*fe);else{const fe=J*Math.sqrt(ne*ne-1);re=pe=>{const de=Math.exp(-ne*J*pe),se=Math.min(fe*pe,300);return _-de*((Q+ne*J*te)*Math.sinh(se)+fe*te*Math.cosh(se))/fe}}const le={calculatedDuration:K&&Y||null,next:fe=>{const pe=re(fe);if(K)A.done=fe>=Y;else{let de=fe===0?Q:0;ne<1&&(de=fe===0?secondsToMilliseconds(Q):calcGeneratorVelocity(re,fe,pe));const se=Math.abs(de)<=f,he=Math.abs(_-pe)<=d;A.done=se&&he}return A.value=A.done?_:pe,A},toString:()=>{const fe=Math.min(calcGeneratorDuration(le),maxGeneratorDuration),pe=generateLinearEasing(de=>le.next(fe*de).value,fe,30);return fe+"ms "+pe},toTransition:()=>{}};return le}spring.applyToOptions=u=>{const n=createGeneratorEasing(u,100,spring);return u.ease=n.ease,u.duration=secondsToMilliseconds(n.duration),u.type="keyframes",u};function inertia({keyframes:u,velocity:n=0,power:s=.8,timeConstant:f=325,bounceDamping:d=10,bounceStiffness:y=500,modifyTarget:_,min:A,max:R,restDelta:I=.5,restSpeed:G}){const Y=u[0],q={done:!1,value:Y},K=se=>A!==void 0&&se<A||R!==void 0&&se>R,Q=se=>A===void 0?R:R===void 0||Math.abs(A-se)<Math.abs(R-se)?A:R;let ne=s*n;const te=Y+ne,J=_===void 0?te:_(te);J!==te&&(ne=J-Y);const ie=se=>-ne*Math.exp(-se/f),re=se=>J+ie(se),le=se=>{const he=ie(se),Se=re(se);q.done=Math.abs(he)<=I,q.value=q.done?J:Se};let fe,pe;const de=se=>{K(q.value)&&(fe=se,pe=spring({keyframes:[q.value,Q(q.value)],velocity:calcGeneratorVelocity(re,se,q.value),damping:d,stiffness:y,restDelta:I,restSpeed:G}))};return de(0),{calculatedDuration:null,next:se=>{let he=!1;return!pe&&fe===void 0&&(he=!0,le(se),de(se)),fe!==void 0&&se>=fe?pe.next(se-fe):(!he&&le(se),q)}}}function createMixers(u,n,s){const f=[],d=s||MotionGlobalConfig.mix||mix,y=u.length-1;for(let _=0;_<y;_++){let A=d(u[_],u[_+1]);if(n){const R=Array.isArray(n)?n[_]||noop$1:n;A=pipe(R,A)}f.push(A)}return f}function interpolate(u,n,{clamp:s=!0,ease:f,mixer:d}={}){const y=u.length;if(invariant$1(y===n.length),y===1)return()=>n[0];if(y===2&&n[0]===n[1])return()=>n[1];const _=u[0]===u[1];u[0]>u[y-1]&&(u=[...u].reverse(),n=[...n].reverse());const A=createMixers(n,f,d),R=A.length,I=G=>{if(_&&G<u[0])return n[0];let Y=0;if(R>1)for(;Y<u.length-2&&!(G<u[Y+1]);Y++);const q=progress(u[Y],u[Y+1],G);return A[Y](q)};return s?G=>I(clamp$1(u[0],u[y-1],G)):I}function fillOffset(u,n){const s=u[u.length-1];for(let f=1;f<=n;f++){const d=progress(0,n,f);u.push(mixNumber$1(s,1,d))}}function defaultOffset(u){const n=[0];return fillOffset(n,u.length-1),n}function convertOffsetToTimes(u,n){return u.map(s=>s*n)}function defaultEasing(u,n){return u.map(()=>n||easeInOut).splice(0,u.length-1)}function keyframes({duration:u=300,keyframes:n,times:s,ease:f="easeInOut"}){const d=isEasingArray(f)?f.map(easingDefinitionToFunction):easingDefinitionToFunction(f),y={done:!1,value:n[0]},_=convertOffsetToTimes(s&&s.length===n.length?s:defaultOffset(n),u),A=interpolate(_,n,{ease:Array.isArray(d)?d:defaultEasing(n,d)});return{calculatedDuration:u,next:R=>(y.value=A(R),y.done=R>=u,y)}}const isNotNull$1=u=>u!==null;function getFinalKeyframe$1(u,{repeat:n,repeatType:s="loop"},f,d=1){const y=u.filter(isNotNull$1),A=d<0||n&&s!=="loop"&&n%2===1?0:y.length-1;return!A||f===void 0?y[A]:f}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(u){typeof u.type=="string"&&(u.type=transitionTypeMap[u.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,s){return this.finished.then(n,s)}}const percentToProgress=u=>u/100;class JSAnimation extends WithPromise{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var f,d;const{motionValue:s}=this.options;s&&s.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(d=(f=this.options).onStop)==null||d.call(f))},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;replaceTransitionType(n);const{type:s=keyframes,repeat:f=0,repeatDelay:d=0,repeatType:y,velocity:_=0}=n;let{keyframes:A}=n;const R=s||keyframes;R!==keyframes&&typeof A[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(A[0],A[1])),A=[0,100]);const I=R({...n,keyframes:A});y==="mirror"&&(this.mirroredGenerator=R({...n,keyframes:[...A].reverse(),velocity:-_})),I.calculatedDuration===null&&(I.calculatedDuration=calcGeneratorDuration(I));const{calculatedDuration:G}=I;this.calculatedDuration=G,this.resolvedDuration=G+d,this.totalDuration=this.resolvedDuration*(f+1)-d,this.generator=I}updateTime(n){const s=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(n,s=!1){const{generator:f,totalDuration:d,mixKeyframes:y,mirroredGenerator:_,resolvedDuration:A,calculatedDuration:R}=this;if(this.startTime===null)return f.next(0);const{delay:I=0,keyframes:G,repeat:Y,repeatType:q,repeatDelay:K,type:Q,onUpdate:ne,finalKeyframe:te}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-d/this.speed,this.startTime)),s?this.currentTime=n:this.updateTime(n);const J=this.currentTime-I*(this.playbackSpeed>=0?1:-1),ie=this.playbackSpeed>=0?J<0:J>d;this.currentTime=Math.max(J,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let re=this.currentTime,le=f;if(Y){const se=Math.min(this.currentTime,d)/A;let he=Math.floor(se),Se=se%1;!Se&&se>=1&&(Se=1),Se===1&&he--,he=Math.min(he,Y+1),!!(he%2)&&(q==="reverse"?(Se=1-Se,K&&(Se-=K/A)):q==="mirror"&&(le=_)),re=clamp$1(0,1,Se)*A}const fe=ie?{done:!1,value:G[0]}:le.next(re);y&&(fe.value=y(fe.value));let{done:pe}=fe;!ie&&R!==null&&(pe=this.playbackSpeed>=0?this.currentTime>=d:this.currentTime<=0);const de=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&pe);return de&&Q!==inertia&&(fe.value=getFinalKeyframe$1(G,this.options,te,this.speed)),ne&&ne(fe.value),de&&this.finish(),fe}then(n,s){return this.finished.then(n,s)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+millisecondsToSeconds(n)}get time(){return millisecondsToSeconds(this.currentTime)}set time(n){var s;n=secondsToMilliseconds(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(time.now());const s=this.playbackSpeed!==n;this.playbackSpeed=n,s&&(this.time=millisecondsToSeconds(this.currentTime))}play(){var d,y;if(this.isStopped)return;const{driver:n=frameloopDriver,startTime:s}=this.options;this.driver||(this.driver=n(_=>this.tick(_))),(y=(d=this.options).onPlay)==null||y.call(d);const f=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=f):this.holdTime!==null?this.startTime=f-this.holdTime:this.startTime||(this.startTime=s??f),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var n,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(n=this.options).onComplete)==null||s.call(n)}cancel(){var n,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(n=this.options).onCancel)==null||s.call(n)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),n.observe(this)}}function fillWildcards(u){for(let n=1;n<u.length;n++)u[n]??(u[n]=u[n-1])}const radToDeg$1=u=>u*180/Math.PI,rotate=u=>{const n=radToDeg$1(Math.atan2(u[1],u[0]));return rebaseAngle(n)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:u=>(Math.abs(u[0])+Math.abs(u[3]))/2,rotate,rotateZ:rotate,skewX:u=>radToDeg$1(Math.atan(u[1])),skewY:u=>radToDeg$1(Math.atan(u[2])),skew:u=>(Math.abs(u[1])+Math.abs(u[2]))/2},rebaseAngle=u=>(u=u%360,u<0&&(u+=360),u),rotateZ=rotate,scaleX=u=>Math.sqrt(u[0]*u[0]+u[1]*u[1]),scaleY=u=>Math.sqrt(u[4]*u[4]+u[5]*u[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:u=>(scaleX(u)+scaleY(u))/2,rotateX:u=>rebaseAngle(radToDeg$1(Math.atan2(u[6],u[5]))),rotateY:u=>rebaseAngle(radToDeg$1(Math.atan2(-u[2],u[0]))),rotateZ,rotate:rotateZ,skewX:u=>radToDeg$1(Math.atan(u[4])),skewY:u=>radToDeg$1(Math.atan(u[1])),skew:u=>(Math.abs(u[1])+Math.abs(u[4]))/2};function defaultTransformValue(u){return u.includes("scale")?1:0}function parseValueFromTransform(u,n){if(!u||u==="none")return defaultTransformValue(n);const s=u.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let f,d;if(s)f=matrix3dParsers,d=s;else{const A=u.match(/^matrix\(([-\d.e\s,]+)\)$/u);f=matrix2dParsers,d=A}if(!d)return defaultTransformValue(n);const y=f[n],_=d[1].split(",").map(convertTransformToNumber);return typeof y=="function"?y(_):_[y]}const readTransformValue=(u,n)=>{const{transform:s="none"}=getComputedStyle(u);return parseValueFromTransform(s,n)};function convertTransformToNumber(u){return parseFloat(u.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=u=>u===number||u===px$1,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(u=>!transformKeys.has(u));function removeNonTranslationalTransform(u){const n=[];return nonTranslationalTransformKeys.forEach(s=>{const f=u.getValue(s);f!==void 0&&(n.push([s,f.get()]),f.set(s.startsWith("scale")?1:0))}),n}const positionalValues={width:({x:u},{paddingLeft:n="0",paddingRight:s="0"})=>u.max-u.min-parseFloat(n)-parseFloat(s),height:({y:u},{paddingTop:n="0",paddingBottom:s="0"})=>u.max-u.min-parseFloat(n)-parseFloat(s),top:(u,{top:n})=>parseFloat(n),left:(u,{left:n})=>parseFloat(n),bottom:({y:u},{top:n})=>parseFloat(n)+(u.max-u.min),right:({x:u},{left:n})=>parseFloat(n)+(u.max-u.min),x:(u,{transform:n})=>parseValueFromTransform(n,"x"),y:(u,{transform:n})=>parseValueFromTransform(n,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const u=Array.from(toResolve).filter(f=>f.needsMeasurement),n=new Set(u.map(f=>f.element)),s=new Map;n.forEach(f=>{const d=removeNonTranslationalTransform(f);d.length&&(s.set(f,d),f.render())}),u.forEach(f=>f.measureInitialState()),n.forEach(f=>{f.render();const d=s.get(f);d&&d.forEach(([y,_])=>{var A;(A=f.getValue(y))==null||A.set(_)})}),u.forEach(f=>f.measureEndState()),u.forEach(f=>{f.suspendedScrollY!==void 0&&window.scrollTo(0,f.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(u=>u.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(u=>{u.readKeyframes(),u.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(n,s,f,d,y,_=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=s,this.name=f,this.motionValue=d,this.element=y,this.isAsync=_}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame$1.read(readAllKeyframes),frame$1.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:s,element:f,motionValue:d}=this;if(n[0]===null){const y=d==null?void 0:d.get(),_=n[n.length-1];if(y!==void 0)n[0]=y;else if(f&&s){const A=f.readValue(s,_);A!=null&&(n[0]=A)}n[0]===void 0&&(n[0]=_),d&&y===void 0&&d.set(n[0])}fillWildcards(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=u=>u.startsWith("--");function setStyle(u,n,s){isCSSVar(n)?u.style.setProperty(n,s):u.style[n]=s}const supportsFlags={};function memoSupports(u,n){const s=memo(u);return()=>supportsFlags[n]??s()}const supportsScrollTimeline=memoSupports(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([u,n,s,f])=>`cubic-bezier(${u}, ${n}, ${s}, ${f})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(u,n){if(u)return typeof u=="function"?supportsLinearEasing()?generateLinearEasing(u,n):"ease-out":isBezierDefinition(u)?cubicBezierAsString(u):Array.isArray(u)?u.map(s=>mapEasingToNativeEasing(s,n)||supportedWaapiEasing.easeOut):supportedWaapiEasing[u]}function startWaapiAnimation(u,n,s,{delay:f=0,duration:d=300,repeat:y=0,repeatType:_="loop",ease:A="easeOut",times:R}={},I=void 0){const G={[n]:s};R&&(G.offset=R);const Y=mapEasingToNativeEasing(A,d);Array.isArray(Y)&&(G.easing=Y);const q={delay:f,duration:d,easing:Array.isArray(Y)?"linear":Y,fill:"both",iterations:y+1,direction:_==="reverse"?"alternate":"normal"};return I&&(q.pseudoElement=I),u.animate(G,q)}function isGenerator(u){return typeof u=="function"&&"applyToOptions"in u}function applyGeneratorOptions({type:u,...n}){return isGenerator(u)&&supportsLinearEasing()?u.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class NativeAnimation extends WithPromise{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!n)return;const{element:s,name:f,keyframes:d,pseudoElement:y,allowFlatten:_=!1,finalKeyframe:A,onComplete:R}=n;this.isPseudoElement=!!y,this.allowFlatten=_,this.options=n,invariant$1(typeof n.type!="string");const I=applyGeneratorOptions(n);this.animation=startWaapiAnimation(s,f,d,I,y),I.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!y){const G=getFinalKeyframe$1(d,this.options,A,this.speed);this.updateMotionValue?this.updateMotionValue(G):setStyle(s,f,G),this.animation.cancel()}R==null||R(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var n,s;(s=(n=this.animation).finish)==null||s.call(n)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var s,f,d;const n=(s=this.options)==null?void 0:s.element;!this.isPseudoElement&&(n!=null&&n.isConnected)&&((d=(f=this.animation).commitStyles)==null||d.call(f))}get duration(){var s,f;const n=((f=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:f.call(s).duration)||0;return millisecondsToSeconds(Number(n))}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+millisecondsToSeconds(n)}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(n){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(n){this.manualStartTime=this.animation.startTime=n}attachTimeline({timeline:n,observe:s}){var f;return this.allowFlatten&&((f=this.animation.effect)==null||f.updateTiming({easing:"linear"})),this.animation.onfinish=null,n&&supportsScrollTimeline()?(this.animation.timeline=n,noop$1):s(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(u){return u in unsupportedEasingFunctions}function replaceStringEasing(u){typeof u.ease=="string"&&isUnsupportedEase(u.ease)&&(u.ease=unsupportedEasingFunctions[u.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(n){replaceStringEasing(n),replaceTransitionType(n),super(n),n.startTime!==void 0&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:s,onUpdate:f,onComplete:d,element:y,..._}=this.options;if(!s)return;if(n!==void 0){s.set(n);return}const A=new JSAnimation({..._,autoplay:!1}),R=Math.max(sampleDelta,time.now()-this.startTime),I=clamp$1(0,sampleDelta,R-sampleDelta);s.setWithVelocity(A.sample(Math.max(0,R-I)).value,A.sample(R).value,I),A.stop()}}const isAnimatable=(u,n)=>n==="zIndex"?!1:!!(typeof u=="number"||Array.isArray(u)||typeof u=="string"&&(complex.test(u)||u==="0")&&!u.startsWith("url("));function hasKeyframesChanged(u){const n=u[0];if(u.length===1)return!0;for(let s=0;s<u.length;s++)if(u[s]!==n)return!0}function canAnimate(u,n,s,f){const d=u[0];if(d===null)return!1;if(n==="display"||n==="visibility")return!0;const y=u[u.length-1],_=isAnimatable(d,n),A=isAnimatable(y,n);return!_||!A?!1:hasKeyframesChanged(u)||(s==="spring"||isGenerator(s))&&f}function makeAnimationInstant(u){u.duration=0,u.type="keyframes"}const acceleratedValues$1=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(u){var G;const{motionValue:n,name:s,repeatDelay:f,repeatType:d,damping:y,type:_}=u;if(!(((G=n==null?void 0:n.owner)==null?void 0:G.current)instanceof HTMLElement))return!1;const{onUpdate:R,transformTemplate:I}=n.owner.getProps();return supportsWaapi()&&s&&acceleratedValues$1.has(s)&&(s!=="transform"||!I)&&!R&&!f&&d!=="mirror"&&y!==0&&_!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:n=!0,delay:s=0,type:f="keyframes",repeat:d=0,repeatDelay:y=0,repeatType:_="loop",keyframes:A,name:R,motionValue:I,element:G,...Y}){var Q;super(),this.stop=()=>{var ne,te;this._animation&&(this._animation.stop(),(ne=this.stopTimeline)==null||ne.call(this)),(te=this.keyframeResolver)==null||te.cancel()},this.createdAt=time.now();const q={autoplay:n,delay:s,type:f,repeat:d,repeatDelay:y,repeatType:_,name:R,motionValue:I,element:G,...Y},K=(G==null?void 0:G.KeyframeResolver)||KeyframeResolver;this.keyframeResolver=new K(A,(ne,te,J)=>this.onKeyframesResolved(ne,te,q,!J),R,I,G),(Q=this.keyframeResolver)==null||Q.scheduleResolve()}onKeyframesResolved(n,s,f,d){var te,J;this.keyframeResolver=void 0;const{name:y,type:_,velocity:A,delay:R,isHandoff:I,onUpdate:G}=f;this.resolvedAt=time.now(),canAnimate(n,y,_,A)||((MotionGlobalConfig.instantAnimations||!R)&&(G==null||G(getFinalKeyframe$1(n,f,s))),n[0]=n[n.length-1],makeAnimationInstant(f),f.repeat=0);const q={startTime:d?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...f,keyframes:n},K=!I&&supportsBrowserAnimation(q),Q=(J=(te=q.motionValue)==null?void 0:te.owner)==null?void 0:J.current,ne=K?new NativeAnimationExtended({...q,element:Q}):new JSAnimation(q);ne.finished.then(()=>{this.notifyFinished()}).catch(noop$1),this.pendingTimeline&&(this.stopTimeline=ne.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=ne}get finished(){return this._animation?this.animation.finished:this._finished}then(n,s){return this.finished.finally(n).then(()=>{})}get animation(){var n;return this._animation||((n=this.keyframeResolver)==null||n.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var n;this._animation&&this.animation.cancel(),(n=this.keyframeResolver)==null||n.cancel()}}function calcChildStagger(u,n,s,f=0,d=1){const y=Array.from(u).sort((I,G)=>I.sortNodePosition(G)).indexOf(n),_=u.size,A=(_-1)*f;return typeof s=="function"?s(y,_):d===1?y*f:A-y*f}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(u){const n=splitCSSVariableRegex.exec(u);if(!n)return[,];const[,s,f,d]=n;return[`--${s??f}`,d]}function getVariableValue(u,n,s=1){const[f,d]=parseCSSVariable(u);if(!f)return;const y=window.getComputedStyle(n).getPropertyValue(f);if(y){const _=y.trim();return isNumericalString(_)?parseFloat(_):_}return isCSSVariableToken(d)?getVariableValue(d,n,s+1):d}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=u=>({type:"spring",stiffness:550,damping:u===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(u,{keyframes:n})=>n.length>2?keyframesTransition:transformProps.has(u)?u.startsWith("scale")?criticallyDampedSpring(n[1]):underDampedSpring:ease,isNotNull=u=>u!==null;function getFinalKeyframe(u,{repeat:n,repeatType:s="loop"},f){const d=u.filter(isNotNull),y=n&&s!=="loop"&&n%2===1?0:d.length-1;return d[y]}function resolveTransition(u,n){if(u!=null&&u.inherit&&n){const{inherit:s,...f}=u;return{...n,...f}}return u}function getValueTransition(u,n){const s=(u==null?void 0:u[n])??(u==null?void 0:u.default)??u;return s!==u?resolveTransition(s,u):s}function isTransitionDefined({when:u,delay:n,delayChildren:s,staggerChildren:f,staggerDirection:d,repeat:y,repeatType:_,repeatDelay:A,from:R,elapsed:I,...G}){return!!Object.keys(G).length}const animateMotionValue=(u,n,s,f={},d,y)=>_=>{const A=getValueTransition(f,u)||{},R=A.delay||f.delay||0;let{elapsed:I=0}=f;I=I-secondsToMilliseconds(R);const G={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:n.getVelocity(),...A,delay:-I,onUpdate:q=>{n.set(q),A.onUpdate&&A.onUpdate(q)},onComplete:()=>{_(),A.onComplete&&A.onComplete()},name:u,motionValue:n,element:y?void 0:d};isTransitionDefined(A)||Object.assign(G,getDefaultTransition(u,G)),G.duration&&(G.duration=secondsToMilliseconds(G.duration)),G.repeatDelay&&(G.repeatDelay=secondsToMilliseconds(G.repeatDelay)),G.from!==void 0&&(G.keyframes[0]=G.from);let Y=!1;if((G.type===!1||G.duration===0&&!G.repeatDelay)&&(makeAnimationInstant(G),G.delay===0&&(Y=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations||d!=null&&d.shouldSkipAnimations)&&(Y=!0,makeAnimationInstant(G),G.delay=0),G.allowFlatten=!A.type&&!A.ease,Y&&!y&&n.get()!==void 0){const q=getFinalKeyframe(G.keyframes,A);if(q!==void 0){frame$1.update(()=>{G.onUpdate(q),G.onComplete()});return}}return A.isSync?new JSAnimation(G):new AsyncMotionValueAnimation(G)};function getValueState(u){const n=[{},{}];return u==null||u.values.forEach((s,f)=>{n[0][f]=s.get(),n[1][f]=s.getVelocity()}),n}function resolveVariantFromProps(u,n,s,f){if(typeof n=="function"){const[d,y]=getValueState(f);n=n(s!==void 0?s:u.custom,d,y)}if(typeof n=="string"&&(n=u.variants&&u.variants[n]),typeof n=="function"){const[d,y]=getValueState(f);n=n(s!==void 0?s:u.custom,d,y)}return n}function resolveVariant(u,n,s){const f=u.getProps();return resolveVariantFromProps(f,n,s!==void 0?s:f.custom,u)}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),MAX_VELOCITY_DELTA=30,isFloat=u=>!isNaN(parseFloat(u));class MotionValue{constructor(n,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=f=>{var y;const d=time.now();if(this.updatedAt!==d&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(f),this.current!==this.prev&&((y=this.events.change)==null||y.notify(this.current),this.dependents))for(const _ of this.dependents)_.dirty()},this.hasAnimated=!1,this.setCurrent(n),this.owner=s.owner}setCurrent(n){this.current=n,this.updatedAt=time.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,s){this.events[n]||(this.events[n]=new SubscriptionManager);const f=this.events[n].add(s);return n==="change"?()=>{f(),frame$1.read(()=>{this.events.change.getSize()||this.stop()})}:f}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,s){this.passiveEffect=n,this.stopPassiveEffect=s}set(n){this.passiveEffect?this.passiveEffect(n,this.updateAndNotify):this.updateAndNotify(n)}setWithVelocity(n,s,f){this.set(s),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-f}jump(n,s=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var n;(n=this.events.change)==null||n.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(n){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=n(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var n,s;(n=this.dependents)==null||n.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(u,n){return new MotionValue(u,n)}const isKeyframesTarget=u=>Array.isArray(u);function setMotionValue(u,n,s){u.hasValue(n)?u.getValue(n).set(s):u.addValue(n,motionValue(s))}function resolveFinalValueInKeyframes(u){return isKeyframesTarget(u)?u[u.length-1]||0:u}function setTarget(u,n){const s=resolveVariant(u,n);let{transitionEnd:f={},transition:d={},...y}=s||{};y={...y,...f};for(const _ in y){const A=resolveFinalValueInKeyframes(y[_]);setMotionValue(u,_,A)}}const isMotionValue=u=>!!(u&&u.getVelocity);function isWillChangeMotionValue(u){return!!(isMotionValue(u)&&u.add)}function addValueToWillChange(u,n){const s=u.getValue("willChange");if(isWillChangeMotionValue(s))return s.add(n);if(!s&&MotionGlobalConfig.WillChange){const f=new MotionGlobalConfig.WillChange("auto");u.addValue("willChange",f),f.add(n)}}function camelToDash(u){return u.replace(/([A-Z])/g,n=>`-${n.toLowerCase()}`)}const optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(u){return u.props[optimizedAppearDataAttribute]}function shouldBlockAnimation({protectedKeys:u,needsAnimating:n},s){const f=u.hasOwnProperty(s)&&n[s]!==!0;return n[s]=!1,f}function animateTarget(u,n,{delay:s=0,transitionOverride:f,type:d}={}){let{transition:y,transitionEnd:_,...A}=n;const R=u.getDefaultTransition();y=y?resolveTransition(y,R):R;const I=y==null?void 0:y.reduceMotion;f&&(y=f);const G=[],Y=d&&u.animationState&&u.animationState.getState()[d];for(const q in A){const K=u.getValue(q,u.latestValues[q]??null),Q=A[q];if(Q===void 0||Y&&shouldBlockAnimation(Y,q))continue;const ne={delay:s,...getValueTransition(y||{},q)},te=K.get();if(te!==void 0&&!K.isAnimating&&!Array.isArray(Q)&&Q===te&&!ne.velocity)continue;let J=!1;if(window.MotionHandoffAnimation){const le=getOptimisedAppearId(u);if(le){const fe=window.MotionHandoffAnimation(le,q,frame$1);fe!==null&&(ne.startTime=fe,J=!0)}}addValueToWillChange(u,q);const ie=I??u.shouldReduceMotion;K.start(animateMotionValue(q,K,Q,ie&&positionalKeys.has(q)?{type:!1}:ne,u,J));const re=K.animation;re&&G.push(re)}if(_){const q=()=>frame$1.update(()=>{_&&setTarget(u,_)});G.length?Promise.all(G).then(q):q()}return G}function animateVariant(u,n,s={}){var R;const f=resolveVariant(u,n,s.type==="exit"?(R=u.presenceContext)==null?void 0:R.custom:void 0);let{transition:d=u.getDefaultTransition()||{}}=f||{};s.transitionOverride&&(d=s.transitionOverride);const y=f?()=>Promise.all(animateTarget(u,f,s)):()=>Promise.resolve(),_=u.variantChildren&&u.variantChildren.size?(I=0)=>{const{delayChildren:G=0,staggerChildren:Y,staggerDirection:q}=d;return animateChildren(u,n,I,G,Y,q,s)}:()=>Promise.resolve(),{when:A}=d;if(A){const[I,G]=A==="beforeChildren"?[y,_]:[_,y];return I().then(()=>G())}else return Promise.all([y(),_(s.delay)])}function animateChildren(u,n,s=0,f=0,d=0,y=1,_){const A=[];for(const R of u.variantChildren)R.notify("AnimationStart",n),A.push(animateVariant(R,n,{..._,delay:s+(typeof f=="function"?0:f)+calcChildStagger(u.variantChildren,R,f,d,y)}).then(()=>R.notify("AnimationComplete",n)));return Promise.all(A)}function animateVisualElement(u,n,s={}){u.notify("AnimationStart",n);let f;if(Array.isArray(n)){const d=n.map(y=>animateVariant(u,y,s));f=Promise.all(d)}else if(typeof n=="string")f=animateVariant(u,n,s);else{const d=typeof n=="function"?resolveVariant(u,n,s.custom):n;f=Promise.all(animateTarget(u,d,s))}return f.then(()=>{u.notify("AnimationComplete",n)})}const auto={test:u=>u==="auto",parse:u=>u},testValueType=u=>n=>n.test(u),dimensionValueTypes=[number,px$1,percent,degrees,vw,vh,auto],findDimensionValueType=u=>dimensionValueTypes.find(testValueType(u));function isNone(u){return typeof u=="number"?u===0:u!==null?u==="none"||u==="0"||isZeroValueString(u):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(u){const[n,s]=u.slice(0,-1).split("(");if(n==="drop-shadow")return u;const[f]=s.match(floatRegex)||[];if(!f)return u;const d=s.replace(f,"");let y=maxDefaults.has(n)?1:0;return f!==s&&(y*=100),n+"("+y+d+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:u=>{const n=u.match(functionRegex);return n?n.map(applyDefaultFilter).join(" "):u}},mask={...complex,getAnimatableNone:u=>{const n=complex.parse(u);return complex.createTransformer(u)(n.map(f=>typeof f=="number"?0:typeof f=="object"?{...f,alpha:1}:f))}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px$1,translateX:px$1,translateY:px$1,translateZ:px$1,x:px$1,y:px$1,z:px$1,perspective:px$1,transformPerspective:px$1,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px$1},numberValueTypes={borderWidth:px$1,borderTopWidth:px$1,borderRightWidth:px$1,borderBottomWidth:px$1,borderLeftWidth:px$1,borderRadius:px$1,borderTopLeftRadius:px$1,borderTopRightRadius:px$1,borderBottomRightRadius:px$1,borderBottomLeftRadius:px$1,width:px$1,maxWidth:px$1,height:px$1,maxHeight:px$1,top:px$1,right:px$1,bottom:px$1,left:px$1,inset:px$1,insetBlock:px$1,insetBlockStart:px$1,insetBlockEnd:px$1,insetInline:px$1,insetInlineStart:px$1,insetInlineEnd:px$1,padding:px$1,paddingTop:px$1,paddingRight:px$1,paddingBottom:px$1,paddingLeft:px$1,paddingBlock:px$1,paddingBlockStart:px$1,paddingBlockEnd:px$1,paddingInline:px$1,paddingInlineStart:px$1,paddingInlineEnd:px$1,margin:px$1,marginTop:px$1,marginRight:px$1,marginBottom:px$1,marginLeft:px$1,marginBlock:px$1,marginBlockStart:px$1,marginBlockEnd:px$1,marginInline:px$1,marginInlineStart:px$1,marginInlineEnd:px$1,fontSize:px$1,backgroundPositionX:px$1,backgroundPositionY:px$1,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter,mask,WebkitMask:mask},getDefaultValueType=u=>defaultValueTypes[u],customTypes=new Set([filter,mask]);function getAnimatableNone(u,n){let s=getDefaultValueType(u);return customTypes.has(s)||(s=complex),s.getAnimatableNone?s.getAnimatableNone(n):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(u,n,s){let f=0,d;for(;f<u.length&&!d;){const y=u[f];typeof y=="string"&&!invalidTemplates.has(y)&&analyseComplexValue(y).values.length&&(d=u[f]),f++}if(d&&s)for(const y of n)u[y]=getAnimatableNone(s,d)}class DOMKeyframesResolver extends KeyframeResolver{constructor(n,s,f,d,y){super(n,s,f,d,y,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:s,name:f}=this;if(!s||!s.current)return;super.readKeyframes();for(let G=0;G<n.length;G++){let Y=n[G];if(typeof Y=="string"&&(Y=Y.trim(),isCSSVariableToken(Y))){const q=getVariableValue(Y,s.current);q!==void 0&&(n[G]=q),G===n.length-1&&(this.finalKeyframe=Y)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(f)||n.length!==2)return;const[d,y]=n,_=findDimensionValueType(d),A=findDimensionValueType(y),R=containsCSSVariable(d),I=containsCSSVariable(y);if(R!==I&&positionalValues[f]){this.needsMeasurement=!0;return}if(_!==A)if(isNumOrPxType(_)&&isNumOrPxType(A))for(let G=0;G<n.length;G++){const Y=n[G];typeof Y=="string"&&(n[G]=parseFloat(Y))}else positionalValues[f]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:s}=this,f=[];for(let d=0;d<n.length;d++)(n[d]===null||isNone(n[d]))&&f.push(d);f.length&&makeNoneKeyframesAnimatable(n,f,s)}measureInitialState(){const{element:n,unresolvedKeyframes:s,name:f}=this;if(!n||!n.current)return;f==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[f](n.measureViewportBox(),window.getComputedStyle(n.current)),s[0]=this.measuredOrigin;const d=s[s.length-1];d!==void 0&&n.getValue(f,d).jump(d,!1)}measureEndState(){var A;const{element:n,name:s,unresolvedKeyframes:f}=this;if(!n||!n.current)return;const d=n.getValue(s);d&&d.jump(this.measuredOrigin,!1);const y=f.length-1,_=f[y];f[y]=positionalValues[s](n.measureViewportBox(),window.getComputedStyle(n.current)),_!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=_),(A=this.removedTransforms)!=null&&A.length&&this.removedTransforms.forEach(([R,I])=>{n.getValue(R).set(I)}),this.resolveNoneKeyframes()}}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function resolveElements(u,n,s){if(u==null)return[];if(u instanceof EventTarget)return[u];if(typeof u=="string"){let f=document;const d=(s==null?void 0:s[u])??f.querySelectorAll(u);return d?Array.from(d):[]}return Array.from(u).filter(f=>f!=null)}const getValueAsType=(u,n)=>n&&typeof u=="number"?n.transform(u):u;function isHTMLElement(u){return isObject$1(u)&&"offsetHeight"in u}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(u){return u==="x"||u==="y"?isDragging[u]?null:(isDragging[u]=!0,()=>{isDragging[u]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(u,n){const s=resolveElements(u),f=new AbortController,d={passive:!0,...n,signal:f.signal};return[s,d,()=>f.abort()]}function isValidHover(u){return!(u.pointerType==="touch"||isDragActive())}function hover(u,n,s={}){const[f,d,y]=setupGesture(u,s);return f.forEach(_=>{let A=!1,R=!1,I;const G=()=>{_.removeEventListener("pointerleave",Q)},Y=te=>{I&&(I(te),I=void 0),G()},q=te=>{A=!1,window.removeEventListener("pointerup",q),window.removeEventListener("pointercancel",q),R&&(R=!1,Y(te))},K=()=>{A=!0,window.addEventListener("pointerup",q,d),window.addEventListener("pointercancel",q,d)},Q=te=>{if(te.pointerType!=="touch"){if(A){R=!0;return}Y(te)}},ne=te=>{if(!isValidHover(te))return;R=!1;const J=n(_,te);typeof J=="function"&&(I=J,_.addEventListener("pointerleave",Q,d))};_.addEventListener("pointerenter",ne,d),_.addEventListener("pointerdown",K,d)}),y}const isNodeOrChild=(u,n)=>n?u===n?!0:isNodeOrChild(u,n.parentElement):!1,isPrimaryPointer=u=>u.pointerType==="mouse"?typeof u.button!="number"||u.button<=0:u.isPrimary!==!1,keyboardAccessibleElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(u){return keyboardAccessibleElements.has(u.tagName)||u.isContentEditable===!0}const textInputElements=new Set(["INPUT","SELECT","TEXTAREA"]);function isElementTextInput(u){return textInputElements.has(u.tagName)||u.isContentEditable===!0}const isPressing=new WeakSet;function filterEvents(u){return n=>{n.key==="Enter"&&u(n)}}function firePointerEvent(u,n){u.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(u,n)=>{const s=u.currentTarget;if(!s)return;const f=filterEvents(()=>{if(isPressing.has(s))return;firePointerEvent(s,"down");const d=filterEvents(()=>{firePointerEvent(s,"up")}),y=()=>firePointerEvent(s,"cancel");s.addEventListener("keyup",d,n),s.addEventListener("blur",y,n)});s.addEventListener("keydown",f,n),s.addEventListener("blur",()=>s.removeEventListener("keydown",f),n)};function isValidPressEvent(u){return isPrimaryPointer(u)&&!isDragActive()}const claimedPointerDownEvents=new WeakSet;function press(u,n,s={}){const[f,d,y]=setupGesture(u,s),_=A=>{const R=A.currentTarget;if(!isValidPressEvent(A)||claimedPointerDownEvents.has(A))return;isPressing.add(R),s.stopPropagation&&claimedPointerDownEvents.add(A);const I=n(R,A),G=(K,Q)=>{window.removeEventListener("pointerup",Y),window.removeEventListener("pointercancel",q),isPressing.has(R)&&isPressing.delete(R),isValidPressEvent(K)&&typeof I=="function"&&I(K,{success:Q})},Y=K=>{G(K,R===window||R===document||s.useGlobalTarget||isNodeOrChild(R,K.target))},q=K=>{G(K,!1)};window.addEventListener("pointerup",Y,d),window.addEventListener("pointercancel",q,d)};return f.forEach(A=>{(s.useGlobalTarget?window:A).addEventListener("pointerdown",_,d),isHTMLElement(A)&&(A.addEventListener("focus",I=>enableKeyboardPress(I,d)),!isElementKeyboardAccessible(A)&&!A.hasAttribute("tabindex")&&(A.tabIndex=0))}),y}function isSVGElement(u){return isObject$1(u)&&"ownerSVGElement"in u}const resizeHandlers=new WeakMap;let observer;const getSize=(u,n,s)=>(f,d)=>d&&d[0]?d[0][u+"Size"]:isSVGElement(f)&&"getBBox"in f?f.getBBox()[n]:f[s],getWidth=getSize("inline","width","offsetWidth"),getHeight=getSize("block","height","offsetHeight");function notifyTarget({target:u,borderBoxSize:n}){var s;(s=resizeHandlers.get(u))==null||s.forEach(f=>{f(u,{get width(){return getWidth(u,n)},get height(){return getHeight(u,n)}})})}function notifyAll(u){u.forEach(notifyTarget)}function createResizeObserver(){typeof ResizeObserver>"u"||(observer=new ResizeObserver(notifyAll))}function resizeElement(u,n){observer||createResizeObserver();const s=resolveElements(u);return s.forEach(f=>{let d=resizeHandlers.get(f);d||(d=new Set,resizeHandlers.set(f,d)),d.add(n),observer==null||observer.observe(f)}),()=>{s.forEach(f=>{const d=resizeHandlers.get(f);d==null||d.delete(n),d!=null&&d.size||observer==null||observer.unobserve(f)})}}const windowCallbacks=new Set;let windowResizeHandler;function createWindowResizeHandler(){windowResizeHandler=()=>{const u={get width(){return window.innerWidth},get height(){return window.innerHeight}};windowCallbacks.forEach(n=>n(u))},window.addEventListener("resize",windowResizeHandler)}function resizeWindow(u){return windowCallbacks.add(u),windowResizeHandler||createWindowResizeHandler(),()=>{windowCallbacks.delete(u),!windowCallbacks.size&&typeof windowResizeHandler=="function"&&(window.removeEventListener("resize",windowResizeHandler),windowResizeHandler=void 0)}}function resize(u,n){return typeof u=="function"?resizeWindow(u):resizeElement(u,n)}function isSVGSVGElement(u){return isSVGElement(u)&&u.tagName==="svg"}const valueTypes=[...dimensionValueTypes,color,complex],findValueType=u=>valueTypes.find(testValueType(u)),createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),visualElementStore=new WeakMap;function isAnimationControls(u){return u!==null&&typeof u=="object"&&typeof u.start=="function"}function isVariantLabel(u){return typeof u=="string"||Array.isArray(u)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(u){return isAnimationControls(u.animate)||variantProps.some(n=>isVariantLabel(u[n]))}function isVariantNode(u){return!!(isControllingVariants(u)||u.variants)}function updateMotionValuesFromProps(u,n,s){for(const f in n){const d=n[f],y=s[f];if(isMotionValue(d))u.addValue(f,d);else if(isMotionValue(y))u.addValue(f,motionValue(d,{owner:u}));else if(y!==d)if(u.hasValue(f)){const _=u.getValue(f);_.liveStyle===!0?_.jump(d):_.hasAnimated||_.set(d)}else{const _=u.getStaticValue(f);u.addValue(f,motionValue(_!==void 0?_:d,{owner:u}))}}for(const f in s)n[f]===void 0&&u.removeValue(f);return n}const prefersReducedMotion={current:null},hasReducedMotionListener={current:!1},isBrowser$1=typeof window<"u";function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const u=window.matchMedia("(prefers-reduced-motion)"),n=()=>prefersReducedMotion.current=u.matches;u.addEventListener("change",n),n()}else prefersReducedMotion.current=!1}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let featureDefinitions={};function setFeatureDefinitions(u){featureDefinitions=u}function getFeatureDefinitions(){return featureDefinitions}class VisualElement{scrapeMotionValuesFromProps(n,s,f){return{}}constructor({parent:n,props:s,presenceContext:f,reducedMotionConfig:d,skipAnimations:y,blockInitialAnimation:_,visualState:A},R={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const K=time.now();this.renderScheduledAt<K&&(this.renderScheduledAt=K,frame$1.render(this.render,!1,!0))};const{latestValues:I,renderState:G}=A;this.latestValues=I,this.baseTarget={...I},this.initialValues=s.initial?{...I}:{},this.renderState=G,this.parent=n,this.props=s,this.presenceContext=f,this.depth=n?n.depth+1:0,this.reducedMotionConfig=d,this.skipAnimationsConfig=y,this.options=R,this.blockInitialAnimation=!!_,this.isControllingVariants=isControllingVariants(s),this.isVariantNode=isVariantNode(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:Y,...q}=this.scrapeMotionValuesFromProps(s,{},this);for(const K in q){const Q=q[K];I[K]!==void 0&&isMotionValue(Q)&&Q.set(I[K])}}mount(n){var s,f;if(this.hasBeenMounted)for(const d in this.initialValues)(s=this.values.get(d))==null||s.jump(this.initialValues[d]),this.latestValues[d]=this.initialValues[d];this.current=n,visualElementStore.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((d,y)=>this.bindToMotionValue(y,d)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=prefersReducedMotion.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(f=this.parent)==null||f.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var n;this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(n=this.parent)==null||n.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const f=this.features[s];f&&(f.unmount(),f.isMounted=!1)}this.current=null}addChild(n){this.children.add(n),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(n)}removeChild(n){this.children.delete(n),this.enteringChildren&&this.enteringChildren.delete(n)}bindToMotionValue(n,s){if(this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)(),s.accelerate&&acceleratedValues.has(n)&&this.current instanceof HTMLElement){const{factory:_,keyframes:A,times:R,ease:I,duration:G}=s.accelerate,Y=new NativeAnimation({element:this.current,name:n,keyframes:A,times:R,ease:I,duration:secondsToMilliseconds(G)}),q=_(Y);this.valueSubscriptions.set(n,()=>{q(),Y.cancel()});return}const f=transformProps.has(n);f&&this.onBindTransform&&this.onBindTransform();const d=s.on("change",_=>{this.latestValues[n]=_,this.props.onUpdate&&frame$1.preRender(this.notifyUpdate),f&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let y;typeof window<"u"&&window.MotionCheckAppearSync&&(y=window.MotionCheckAppearSync(this,n,s)),this.valueSubscriptions.set(n,()=>{d(),y&&y(),s.owner&&s.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in featureDefinitions){const s=featureDefinitions[n];if(!s)continue;const{isEnabled:f,Feature:d}=s;if(!this.features[n]&&d&&f(this.props)&&(this.features[n]=new d(this)),this.features[n]){const y=this.features[n];y.isMounted?y.update():(y.mount(),y.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,s){this.latestValues[n]=s}update(n,s){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let f=0;f<propEventHandlers.length;f++){const d=propEventHandlers[f];this.propEventSubscriptions[d]&&(this.propEventSubscriptions[d](),delete this.propEventSubscriptions[d]);const y="on"+d,_=n[y];_&&(this.propEventSubscriptions[d]=this.on(d,_))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(n,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(n),()=>s.variantChildren.delete(n)}addValue(n,s){const f=this.values.get(n);s!==f&&(f&&this.removeValue(n),this.bindToMotionValue(n,s),this.values.set(n,s),this.latestValues[n]=s.get())}removeValue(n){this.values.delete(n);const s=this.valueSubscriptions.get(n);s&&(s(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,s){if(this.props.values&&this.props.values[n])return this.props.values[n];let f=this.values.get(n);return f===void 0&&s!==void 0&&(f=motionValue(s===null?void 0:s,{owner:this}),this.addValue(n,f)),f}readValue(n,s){let f=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return f!=null&&(typeof f=="string"&&(isNumericalString(f)||isZeroValueString(f))?f=parseFloat(f):!findValueType(f)&&complex.test(s)&&(f=getAnimatableNone(n,s)),this.setBaseTarget(n,isMotionValue(f)?f.get():f)),isMotionValue(f)?f.get():f}setBaseTarget(n,s){this.baseTarget[n]=s}getBaseTarget(n){var y;const{initial:s}=this.props;let f;if(typeof s=="string"||typeof s=="object"){const _=resolveVariantFromProps(this.props,s,(y=this.presenceContext)==null?void 0:y.custom);_&&(f=_[n])}if(s&&f!==void 0)return f;const d=this.getBaseTargetFromProps(this.props,n);return d!==void 0&&!isMotionValue(d)?d:this.initialValues[n]!==void 0&&f===void 0?void 0:this.baseTarget[n]}on(n,s){return this.events[n]||(this.events[n]=new SubscriptionManager),this.events[n].add(s)}notify(n,...s){this.events[n]&&this.events[n].notify(...s)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(n,s){return n.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(n,s){const f=n.style;return f?f[s]:void 0}removeValueFromRenderState(n,{vars:s,style:f}){delete s[n],delete f[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;isMotionValue(n)&&(this.childSubscription=n.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}class Feature{constructor(n){this.isMounted=!1,this.node=n}update(){}}function convertBoundingBoxToBox({top:u,left:n,right:s,bottom:f}){return{x:{min:n,max:s},y:{min:u,max:f}}}function convertBoxToBoundingBox({x:u,y:n}){return{top:n.min,right:u.max,bottom:n.max,left:u.min}}function transformBoxPoints(u,n){if(!n)return u;const s=n({x:u.left,y:u.top}),f=n({x:u.right,y:u.bottom});return{top:s.y,left:s.x,bottom:f.y,right:f.x}}function isIdentityScale(u){return u===void 0||u===1}function hasScale({scale:u,scaleX:n,scaleY:s}){return!isIdentityScale(u)||!isIdentityScale(n)||!isIdentityScale(s)}function hasTransform(u){return hasScale(u)||has2DTranslate(u)||u.z||u.rotate||u.rotateX||u.rotateY||u.skewX||u.skewY}function has2DTranslate(u){return is2DTranslate(u.x)||is2DTranslate(u.y)}function is2DTranslate(u){return u&&u!=="0%"}function scalePoint(u,n,s){const f=u-s,d=n*f;return s+d}function applyPointDelta(u,n,s,f,d){return d!==void 0&&(u=scalePoint(u,d,f)),scalePoint(u,s,f)+n}function applyAxisDelta(u,n=0,s=1,f,d){u.min=applyPointDelta(u.min,n,s,f,d),u.max=applyPointDelta(u.max,n,s,f,d)}function applyBoxDelta(u,{x:n,y:s}){applyAxisDelta(u.x,n.translate,n.scale,n.originPoint),applyAxisDelta(u.y,s.translate,s.scale,s.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(u,n,s,f=!1){const d=s.length;if(!d)return;n.x=n.y=1;let y,_;for(let A=0;A<d;A++){y=s[A],_=y.projectionDelta;const{visualElement:R}=y.options;R&&R.props.style&&R.props.style.display==="contents"||(f&&y.options.layoutScroll&&y.scroll&&y!==y.root&&transformBox(u,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),_&&(n.x*=_.x.scale,n.y*=_.y.scale,applyBoxDelta(u,_)),f&&hasTransform(y.latestValues)&&transformBox(u,y.latestValues))}n.x<TREE_SCALE_SNAP_MAX&&n.x>TREE_SCALE_SNAP_MIN&&(n.x=1),n.y<TREE_SCALE_SNAP_MAX&&n.y>TREE_SCALE_SNAP_MIN&&(n.y=1)}function translateAxis(u,n){u.min=u.min+n,u.max=u.max+n}function transformAxis(u,n,s,f,d=.5){const y=mixNumber$1(u.min,u.max,d);applyAxisDelta(u,n,s,y,f)}function transformBox(u,n){transformAxis(u.x,n.x,n.scaleX,n.scale,n.originX),transformAxis(u.y,n.y,n.scaleY,n.scale,n.originY)}function measureViewportBox(u,n){return convertBoundingBoxToBox(transformBoxPoints(u.getBoundingClientRect(),n))}function measurePageBox(u,n,s){const f=measureViewportBox(u,s),{scroll:d}=n;return d&&(translateAxis(f.x,d.offset.x),translateAxis(f.y,d.offset.y)),f}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(u,n,s){let f="",d=!0;for(let y=0;y<numTransforms;y++){const _=transformPropOrder[y],A=u[_];if(A===void 0)continue;let R=!0;if(typeof A=="number")R=A===(_.startsWith("scale")?1:0);else{const I=parseFloat(A);R=_.startsWith("scale")?I===1:I===0}if(!R||s){const I=getValueAsType(A,numberValueTypes[_]);if(!R){d=!1;const G=translateAlias[_]||_;f+=`${G}(${I}) `}s&&(n[_]=I)}}return f=f.trim(),s?f=s(n,d?"":f):d&&(f="none"),f}function buildHTMLStyles(u,n,s){const{style:f,vars:d,transformOrigin:y}=u;let _=!1,A=!1;for(const R in n){const I=n[R];if(transformProps.has(R)){_=!0;continue}else if(isCSSVariableName(R)){d[R]=I;continue}else{const G=getValueAsType(I,numberValueTypes[R]);R.startsWith("origin")?(A=!0,y[R]=G):f[R]=G}}if(n.transform||(_||s?f.transform=buildTransform(n,u.transform,s):f.transform&&(f.transform="none")),A){const{originX:R="50%",originY:I="50%",originZ:G=0}=y;f.transformOrigin=`${R} ${I} ${G}`}}function renderHTML(u,{style:n,vars:s},f,d){const y=u.style;let _;for(_ in n)y[_]=n[_];d==null||d.applyProjectionStyles(y,f);for(_ in s)y.setProperty(_,s[_])}function pixelsToPercent(u,n){return n.max===n.min?0:u/(n.max-n.min)*100}const correctBorderRadius={correct:(u,n)=>{if(!n.target)return u;if(typeof u=="string")if(px$1.test(u))u=parseFloat(u);else return u;const s=pixelsToPercent(u,n.target.x),f=pixelsToPercent(u,n.target.y);return`${s}% ${f}%`}},correctBoxShadow={correct:(u,{treeScale:n,projectionDelta:s})=>{const f=u,d=complex.parse(u);if(d.length>5)return f;const y=complex.createTransformer(u),_=typeof d[0]!="number"?1:0,A=s.x.scale*n.x,R=s.y.scale*n.y;d[0+_]/=A,d[1+_]/=R;const I=mixNumber$1(A,R,.5);return typeof d[2+_]=="number"&&(d[2+_]/=I),typeof d[3+_]=="number"&&(d[3+_]/=I),y(d)}},scaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function isForcedMotionValue(u,{layout:n,layoutId:s}){return transformProps.has(u)||u.startsWith("origin")||(n||s!==void 0)&&(!!scaleCorrectors[u]||u==="opacity")}function scrapeMotionValuesFromProps$1(u,n,s){var _;const f=u.style,d=n==null?void 0:n.style,y={};if(!f)return y;for(const A in f)(isMotionValue(f[A])||d&&isMotionValue(d[A])||isForcedMotionValue(A,u)||((_=s==null?void 0:s.getValue(A))==null?void 0:_.liveStyle)!==void 0)&&(y[A]=f[A]);return y}function getComputedStyle$1(u){return window.getComputedStyle(u)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(n,s){var f;if(transformProps.has(s))return(f=this.projection)!=null&&f.isProjecting?defaultTransformValue(s):readTransformValue(n,s);{const d=getComputedStyle$1(n),y=(isCSSVariableName(s)?d.getPropertyValue(s):d[s])||0;return typeof y=="string"?y.trim():y}}measureInstanceViewportBox(n,{transformPagePoint:s}){return measureViewportBox(n,s)}build(n,s,f){buildHTMLStyles(n,s,f.transformTemplate)}scrapeMotionValuesFromProps(n,s,f){return scrapeMotionValuesFromProps$1(n,s,f)}}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(u,n,s=1,f=0,d=!0){u.pathLength=1;const y=d?dashKeys:camelKeys;u[y.offset]=`${-f}`,u[y.array]=`${n} ${s}`}const cssMotionPathProperties=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function buildSVGAttrs(u,{attrX:n,attrY:s,attrScale:f,pathLength:d,pathSpacing:y=1,pathOffset:_=0,...A},R,I,G){if(buildHTMLStyles(u,A,I),R){u.style.viewBox&&(u.attrs.viewBox=u.style.viewBox);return}u.attrs=u.style,u.style={};const{attrs:Y,style:q}=u;Y.transform&&(q.transform=Y.transform,delete Y.transform),(q.transform||Y.transformOrigin)&&(q.transformOrigin=Y.transformOrigin??"50% 50%",delete Y.transformOrigin),q.transform&&(q.transformBox=(G==null?void 0:G.transformBox)??"fill-box",delete Y.transformBox);for(const K of cssMotionPathProperties)Y[K]!==void 0&&(q[K]=Y[K],delete Y[K]);n!==void 0&&(Y.x=n),s!==void 0&&(Y.y=s),f!==void 0&&(Y.scale=f),d!==void 0&&buildSVGPath(Y,d,y,_,!1)}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),isSVGTag=u=>typeof u=="string"&&u.toLowerCase()==="svg";function renderSVG(u,n,s,f){renderHTML(u,n,void 0,f);for(const d in n.attrs)u.setAttribute(camelCaseAttributes.has(d)?d:camelToDash(d),n.attrs[d])}function scrapeMotionValuesFromProps(u,n,s){const f=scrapeMotionValuesFromProps$1(u,n,s);for(const d in u)if(isMotionValue(u[d])||isMotionValue(n[d])){const y=transformPropOrder.indexOf(d)!==-1?"attr"+d.charAt(0).toUpperCase()+d.substring(1):d;f[y]=u[d]}return f}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(n,s){return n[s]}readValueFromInstance(n,s){if(transformProps.has(s)){const f=getDefaultValueType(s);return f&&f.default||0}return s=camelCaseAttributes.has(s)?s:camelToDash(s),n.getAttribute(s)}scrapeMotionValuesFromProps(n,s,f){return scrapeMotionValuesFromProps(n,s,f)}build(n,s,f){buildSVGAttrs(n,s,this.isSVGTag,f.transformTemplate,f.style)}renderInstance(n,s,f,d){renderSVG(n,s,f,d)}mount(n){this.isSVGTag=isSVGTag(n.tagName),super.mount(n)}}const numVariantProps=variantProps.length;function getVariantContext(u){if(!u)return;if(!u.isControllingVariants){const s=u.parent?getVariantContext(u.parent)||{}:{};return u.props.initial!==void 0&&(s.initial=u.props.initial),s}const n={};for(let s=0;s<numVariantProps;s++){const f=variantProps[s],d=u.props[f];(isVariantLabel(d)||d===!1)&&(n[f]=d)}return n}function shallowCompare(u,n){if(!Array.isArray(n))return!1;const s=n.length;if(s!==u.length)return!1;for(let f=0;f<s;f++)if(n[f]!==u[f])return!1;return!0}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function createAnimateFunction(u){return n=>Promise.all(n.map(({animation:s,options:f})=>animateVisualElement(u,s,f)))}function createAnimationState(u){let n=createAnimateFunction(u),s=createState(),f=!0;const d=R=>(I,G)=>{var q;const Y=resolveVariant(u,G,R==="exit"?(q=u.presenceContext)==null?void 0:q.custom:void 0);if(Y){const{transition:K,transitionEnd:Q,...ne}=Y;I={...I,...ne,...Q}}return I};function y(R){n=R(u)}function _(R){const{props:I}=u,G=getVariantContext(u.parent)||{},Y=[],q=new Set;let K={},Q=1/0;for(let te=0;te<numAnimationTypes;te++){const J=reversePriorityOrder[te],ie=s[J],re=I[J]!==void 0?I[J]:G[J],le=isVariantLabel(re),fe=J===R?ie.isActive:null;fe===!1&&(Q=te);let pe=re===G[J]&&re!==I[J]&&le;if(pe&&f&&u.manuallyAnimateOnMount&&(pe=!1),ie.protectedKeys={...K},!ie.isActive&&fe===null||!re&&!ie.prevProp||isAnimationControls(re)||typeof re=="boolean")continue;if(J==="exit"&&ie.isActive&&fe!==!0){ie.prevResolvedValues&&(K={...K,...ie.prevResolvedValues});continue}const de=checkVariantsDidChange(ie.prevProp,re);let se=de||J===R&&ie.isActive&&!pe&&le||te>Q&&le,he=!1;const Se=Array.isArray(re)?re:[re];let ve=Se.reduce(d(J),{});fe===!1&&(ve={});const{prevResolvedValues:Re={}}=ie,Ee={...Re,...ve},Oe=Ae=>{se=!0,q.has(Ae)&&(he=!0,q.delete(Ae)),ie.needsAnimating[Ae]=!0;const _e=u.getValue(Ae);_e&&(_e.liveStyle=!1)};for(const Ae in Ee){const _e=ve[Ae],Te=Re[Ae];if(K.hasOwnProperty(Ae))continue;let we=!1;isKeyframesTarget(_e)&&isKeyframesTarget(Te)?we=!shallowCompare(_e,Te):we=_e!==Te,we?_e!=null?Oe(Ae):q.add(Ae):_e!==void 0&&q.has(Ae)?Oe(Ae):ie.protectedKeys[Ae]=!0}ie.prevProp=re,ie.prevResolvedValues=ve,ie.isActive&&(K={...K,...ve}),f&&u.blockInitialAnimation&&(se=!1);const Ne=pe&&de;se&&(!Ne||he)&&Y.push(...Se.map(Ae=>{const _e={type:J};if(typeof Ae=="string"&&f&&!Ne&&u.manuallyAnimateOnMount&&u.parent){const{parent:Te}=u,we=resolveVariant(Te,Ae);if(Te.enteringChildren&&we){const{delayChildren:ge}=we.transition||{};_e.delay=calcChildStagger(Te.enteringChildren,u,ge)}}return{animation:Ae,options:_e}}))}if(q.size){const te={};if(typeof I.initial!="boolean"){const J=resolveVariant(u,Array.isArray(I.initial)?I.initial[0]:I.initial);J&&J.transition&&(te.transition=J.transition)}q.forEach(J=>{const ie=u.getBaseTarget(J),re=u.getValue(J);re&&(re.liveStyle=!0),te[J]=ie??null}),Y.push({animation:te})}let ne=!!Y.length;return f&&(I.initial===!1||I.initial===I.animate)&&!u.manuallyAnimateOnMount&&(ne=!1),f=!1,ne?n(Y):Promise.resolve()}function A(R,I){var Y;if(s[R].isActive===I)return Promise.resolve();(Y=u.variantChildren)==null||Y.forEach(q=>{var K;return(K=q.animationState)==null?void 0:K.setActive(R,I)}),s[R].isActive=I;const G=_(R);for(const q in s)s[q].protectedKeys={};return G}return{animateChanges:_,setActive:A,setAnimateFunction:y,getState:()=>s,reset:()=>{s=createState()}}}function checkVariantsDidChange(u,n){return typeof n=="string"?n!==u:Array.isArray(n)?!shallowCompare(n,u):!1}function createTypeState(u=!1){return{isActive:u,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}function copyAxisInto(u,n){u.min=n.min,u.max=n.max}function copyBoxInto(u,n){copyAxisInto(u.x,n.x),copyAxisInto(u.y,n.y)}function copyAxisDeltaInto(u,n){u.translate=n.translate,u.scale=n.scale,u.originPoint=n.originPoint,u.origin=n.origin}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(u){return u.max-u.min}function isNear(u,n,s){return Math.abs(u-n)<=s}function calcAxisDelta(u,n,s,f=.5){u.origin=f,u.originPoint=mixNumber$1(n.min,n.max,u.origin),u.scale=calcLength(s)/calcLength(n),u.translate=mixNumber$1(s.min,s.max,u.origin)-u.originPoint,(u.scale>=SCALE_MIN&&u.scale<=SCALE_MAX||isNaN(u.scale))&&(u.scale=1),(u.translate>=TRANSLATE_MIN&&u.translate<=TRANSLATE_MAX||isNaN(u.translate))&&(u.translate=0)}function calcBoxDelta(u,n,s,f){calcAxisDelta(u.x,n.x,s.x,f?f.originX:void 0),calcAxisDelta(u.y,n.y,s.y,f?f.originY:void 0)}function calcRelativeAxis(u,n,s){u.min=s.min+n.min,u.max=u.min+calcLength(n)}function calcRelativeBox(u,n,s){calcRelativeAxis(u.x,n.x,s.x),calcRelativeAxis(u.y,n.y,s.y)}function calcRelativeAxisPosition(u,n,s){u.min=n.min-s.min,u.max=u.min+calcLength(n)}function calcRelativePosition(u,n,s){calcRelativeAxisPosition(u.x,n.x,s.x),calcRelativeAxisPosition(u.y,n.y,s.y)}function removePointDelta(u,n,s,f,d){return u-=n,u=scalePoint(u,1/s,f),d!==void 0&&(u=scalePoint(u,1/d,f)),u}function removeAxisDelta(u,n=0,s=1,f=.5,d,y=u,_=u){if(percent.test(n)&&(n=parseFloat(n),n=mixNumber$1(_.min,_.max,n/100)-_.min),typeof n!="number")return;let A=mixNumber$1(y.min,y.max,f);u===y&&(A-=n),u.min=removePointDelta(u.min,n,s,A,d),u.max=removePointDelta(u.max,n,s,A,d)}function removeAxisTransforms(u,n,[s,f,d],y,_){removeAxisDelta(u,n[s],n[f],n[d],n.scale,y,_)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(u,n,s,f){removeAxisTransforms(u.x,n,xKeys,s?s.x:void 0,f?f.x:void 0),removeAxisTransforms(u.y,n,yKeys,s?s.y:void 0,f?f.y:void 0)}function isAxisDeltaZero(u){return u.translate===0&&u.scale===1}function isDeltaZero(u){return isAxisDeltaZero(u.x)&&isAxisDeltaZero(u.y)}function axisEquals(u,n){return u.min===n.min&&u.max===n.max}function boxEquals(u,n){return axisEquals(u.x,n.x)&&axisEquals(u.y,n.y)}function axisEqualsRounded(u,n){return Math.round(u.min)===Math.round(n.min)&&Math.round(u.max)===Math.round(n.max)}function boxEqualsRounded(u,n){return axisEqualsRounded(u.x,n.x)&&axisEqualsRounded(u.y,n.y)}function aspectRatio(u){return calcLength(u.x)/calcLength(u.y)}function axisDeltaEquals(u,n){return u.translate===n.translate&&u.scale===n.scale&&u.originPoint===n.originPoint}function eachAxis(u){return[u("x"),u("y")]}function buildProjectionTransform(u,n,s){let f="";const d=u.x.translate/n.x,y=u.y.translate/n.y,_=(s==null?void 0:s.z)||0;if((d||y||_)&&(f=`translate3d(${d}px, ${y}px, ${_}px) `),(n.x!==1||n.y!==1)&&(f+=`scale(${1/n.x}, ${1/n.y}) `),s){const{transformPerspective:I,rotate:G,rotateX:Y,rotateY:q,skewX:K,skewY:Q}=s;I&&(f=`perspective(${I}px) ${f}`),G&&(f+=`rotate(${G}deg) `),Y&&(f+=`rotateX(${Y}deg) `),q&&(f+=`rotateY(${q}deg) `),K&&(f+=`skewX(${K}deg) `),Q&&(f+=`skewY(${Q}deg) `)}const A=u.x.scale*n.x,R=u.y.scale*n.y;return(A!==1||R!==1)&&(f+=`scale(${A}, ${R})`),f||"none"}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber$1=u=>typeof u=="string"?parseFloat(u):u,isPx=u=>typeof u=="number"||px$1.test(u);function mixValues(u,n,s,f,d,y){d?(u.opacity=mixNumber$1(0,s.opacity??1,easeCrossfadeIn(f)),u.opacityExit=mixNumber$1(n.opacity??1,0,easeCrossfadeOut(f))):y&&(u.opacity=mixNumber$1(n.opacity??1,s.opacity??1,f));for(let _=0;_<numBorders;_++){const A=`border${borders[_]}Radius`;let R=getRadius(n,A),I=getRadius(s,A);if(R===void 0&&I===void 0)continue;R||(R=0),I||(I=0),R===0||I===0||isPx(R)===isPx(I)?(u[A]=Math.max(mixNumber$1(asNumber$1(R),asNumber$1(I),f),0),(percent.test(I)||percent.test(R))&&(u[A]+="%")):u[A]=I}(n.rotate||s.rotate)&&(u.rotate=mixNumber$1(n.rotate||0,s.rotate||0,f))}function getRadius(u,n){return u[n]!==void 0?u[n]:u.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$1);function compress(u,n,s){return f=>f<u?0:f>n?1:s(progress(u,n,f))}function animateSingleValue(u,n,s){const f=isMotionValue(u)?u:motionValue(u);return f.start(animateMotionValue("",f,n,s)),f.animation}function addDomEvent(u,n,s,f={passive:!0}){return u.addEventListener(n,s,f),()=>u.removeEventListener(n,s)}const compareByDepth=(u,n)=>u.depth-n.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(n){addUniqueItem(this.children,n),this.isDirty=!0}remove(n){removeItem(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(n)}}function delay(u,n){const s=time.now(),f=({timestamp:d})=>{const y=d-s;y>=n&&(cancelFrame(f),u(y-n))};return frame$1.setup(f,!0),()=>cancelFrame(f)}function resolveMotionValue(u){return isMotionValue(u)?u.get():u}class NodeStack{constructor(){this.members=[]}add(n){addUniqueItem(this.members,n);for(let s=this.members.length-1;s>=0;s--){const f=this.members[s];if(f===n||f===this.lead||f===this.prevLead)continue;const d=f.instance;d&&d.isConnected===!1&&f.isPresent!==!1&&!f.snapshot&&removeItem(this.members,f)}n.scheduleRender()}remove(n){if(removeItem(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(n){const s=this.members.findIndex(d=>n===d);if(s===0)return!1;let f;for(let d=s;d>=0;d--){const y=this.members[d],_=y.instance;if(y.isPresent!==!1&&(!_||_.isConnected!==!1)){f=y;break}}return f?(this.promote(f),!0):!1}promote(n,s){const f=this.lead;if(n!==f&&(this.prevLead=f,this.lead=n,n.show(),f)){f.instance&&f.scheduleRender(),n.scheduleRender();const d=f.options.layoutDependency,y=n.options.layoutDependency;if(!(d!==void 0&&y!==void 0&&d===y)){const R=f.instance;R&&R.isConnected===!1&&!f.snapshot||(n.resumeFrom=f,s&&(n.resumeFrom.preserveOpacity=!0),f.snapshot&&(n.snapshot=f.snapshot,n.snapshot.latestValues=f.animationValues||f.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0))}const{crossfade:A}=n.options;A===!1&&f.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:s,resumingFrom:f}=n;s.onExitComplete&&s.onExitComplete(),f&&f.options.onExitComplete&&f.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1},transformAxes=["","X","Y","Z"],animationTarget=1e3;let id$1=0;function resetDistortingTransform(u,n,s,f){const{latestValues:d}=n;d[u]&&(s[u]=d[u],n.setStaticValue(u,0),f&&(f[u]=0))}function cancelTreeOptimisedTransformAnimations(u){if(u.hasCheckedOptimisedAppear=!0,u.root===u)return;const{visualElement:n}=u.options;if(!n)return;const s=getOptimisedAppearId(n);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:d,layoutId:y}=u.options;window.MotionCancelOptimisedAnimation(s,"transform",frame$1,!(d||y))}const{parent:f}=u;f&&!f.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(f)}function createProjectionNode$1({attachResizeListener:u,defaultParent:n,measureScroll:s,checkIsScrollRoot:f,resetTransform:d}){return class{constructor(_={},A=n==null?void 0:n()){this.id=id$1++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=_,this.root=A?A.root||A:this,this.path=A?[...A.path,A]:[],this.parent=A,this.depth=A?A.depth+1:0;for(let R=0;R<this.path.length;R++)this.path[R].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(_,A){return this.eventHandlers.has(_)||this.eventHandlers.set(_,new SubscriptionManager),this.eventHandlers.get(_).add(A)}notifyListeners(_,...A){const R=this.eventHandlers.get(_);R&&R.notify(...A)}hasListeners(_){return this.eventHandlers.has(_)}mount(_){if(this.instance)return;this.isSVG=isSVGElement(_)&&!isSVGSVGElement(_),this.instance=_;const{layoutId:A,layout:R,visualElement:I}=this.options;if(I&&!I.current&&I.mount(_),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(R||A)&&(this.isLayoutDirty=!0),u){let G,Y=0;const q=()=>this.root.updateBlockedByResize=!1;frame$1.read(()=>{Y=window.innerWidth}),u(_,()=>{const K=window.innerWidth;K!==Y&&(Y=K,this.root.updateBlockedByResize=!0,G&&G(),G=delay(q,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}A&&this.root.registerSharedNode(A,this),this.options.animate!==!1&&I&&(A||R)&&this.addEventListener("didUpdate",({delta:G,hasLayoutChanged:Y,hasRelativeLayoutChanged:q,layout:K})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const Q=this.options.transition||I.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:ne,onLayoutAnimationComplete:te}=I.getProps(),J=!this.targetLayout||!boxEqualsRounded(this.targetLayout,K),ie=!Y&&q;if(this.options.layoutRoot||this.resumeFrom||ie||Y&&(J||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const re={...getValueTransition(Q,"layout"),onPlay:ne,onComplete:te};(I.shouldReduceMotion||this.options.layoutRoot)&&(re.delay=0,re.type=!1),this.startAnimation(re),this.setAnimationOrigin(G,ie)}else Y||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=K})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const _=this.getStack();_&&_.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:_}=this.options;return _&&_.getProps().transformTemplate}willUpdate(_=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let G=0;G<this.path.length;G++){const Y=this.path[G];Y.shouldResetTransform=!0,Y.updateScroll("snapshot"),Y.options.layoutRoot&&Y.willUpdate(!1)}const{layoutId:A,layout:R}=this.options;if(A===void 0&&!R)return;const I=this.getTransformTemplate();this.prevTransformTemplateValue=I?I(this.latestValues,""):void 0,this.updateSnapshot(),_&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const A=time.now();frameData.delta=clamp$1(0,1e3/60,A-frameData.timestamp),frameData.timestamp=A,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame$1.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame$1.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let R=0;R<this.path.length;R++)this.path[R].updateScroll();const _=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:A}=this.options;A&&A.notify("LayoutMeasure",this.layout.layoutBox,_?_.layoutBox:void 0)}updateScroll(_="measure"){let A=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===_&&(A=!1),A&&this.instance){const R=f(this.instance);this.scroll={animationId:this.root.animationId,phase:_,isRoot:R,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:R}}}resetTransform(){if(!d)return;const _=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,A=this.projectionDelta&&!isDeltaZero(this.projectionDelta),R=this.getTransformTemplate(),I=R?R(this.latestValues,""):void 0,G=I!==this.prevTransformTemplateValue;_&&this.instance&&(A||hasTransform(this.latestValues)||G)&&(d(this.instance,I),this.shouldResetTransform=!1,this.scheduleRender())}measure(_=!0){const A=this.measurePageBox();let R=this.removeElementScroll(A);return _&&(R=this.removeTransform(R)),roundBox(R),{animationId:this.root.animationId,measuredBox:A,layoutBox:R,latestValues:{},source:this.id}}measurePageBox(){var I;const{visualElement:_}=this.options;if(!_)return createBox();const A=_.measureViewportBox();if(!(((I=this.scroll)==null?void 0:I.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:G}=this.root;G&&(translateAxis(A.x,G.offset.x),translateAxis(A.y,G.offset.y))}return A}removeElementScroll(_){var R;const A=createBox();if(copyBoxInto(A,_),(R=this.scroll)!=null&&R.wasRoot)return A;for(let I=0;I<this.path.length;I++){const G=this.path[I],{scroll:Y,options:q}=G;G!==this.root&&Y&&q.layoutScroll&&(Y.wasRoot&&copyBoxInto(A,_),translateAxis(A.x,Y.offset.x),translateAxis(A.y,Y.offset.y))}return A}applyTransform(_,A=!1){const R=createBox();copyBoxInto(R,_);for(let I=0;I<this.path.length;I++){const G=this.path[I];!A&&G.options.layoutScroll&&G.scroll&&G!==G.root&&transformBox(R,{x:-G.scroll.offset.x,y:-G.scroll.offset.y}),hasTransform(G.latestValues)&&transformBox(R,G.latestValues)}return hasTransform(this.latestValues)&&transformBox(R,this.latestValues),R}removeTransform(_){const A=createBox();copyBoxInto(A,_);for(let R=0;R<this.path.length;R++){const I=this.path[R];if(!I.instance||!hasTransform(I.latestValues))continue;hasScale(I.latestValues)&&I.updateSnapshot();const G=createBox(),Y=I.measurePageBox();copyBoxInto(G,Y),removeBoxTransforms(A,I.latestValues,I.snapshot?I.snapshot.layoutBox:void 0,G)}return hasTransform(this.latestValues)&&removeBoxTransforms(A,this.latestValues),A}setTargetDelta(_){this.targetDelta=_,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(_){this.options={...this.options,..._,crossfade:_.crossfade!==void 0?_.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(_=!1){var K;const A=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=A.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=A.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=A.isSharedProjectionDirty);const R=!!this.resumingFrom||this!==A;if(!(_||R&&this.isSharedProjectionDirty||this.isProjectionDirty||(K=this.parent)!=null&&K.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:G,layoutId:Y}=this.options;if(!this.layout||!(G||Y))return;this.resolvedRelativeTargetAt=frameData.timestamp;const q=this.getClosestProjectingParent();q&&this.linkedParentVersion!==q.layoutVersion&&!q.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(q&&q.layout?this.createRelativeTarget(q,this.layout.layoutBox,q.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,q&&!!q.resumingFrom==!!this.resumingFrom&&!q.options.layoutScroll&&q.target&&this.animationProgress!==1?this.createRelativeTarget(q,this.target,q.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(_,A,R){this.relativeParent=_,this.linkedParentVersion=_.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,A,R),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var Q;const _=this.getLead(),A=!!this.resumingFrom||this!==_;let R=!0;if((this.isProjectionDirty||(Q=this.parent)!=null&&Q.isProjectionDirty)&&(R=!1),A&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(R=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(R=!1),R)return;const{layout:I,layoutId:G}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(I||G))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const Y=this.treeScale.x,q=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,A),_.layout&&!_.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(_.target=_.layout.layoutBox,_.targetWithTransforms=createBox());const{target:K}=_;if(!K){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,K,this.latestValues),(this.treeScale.x!==Y||this.treeScale.y!==q||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",K))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(_=!0){var A;if((A=this.options.visualElement)==null||A.scheduleRender(),_){const R=this.getStack();R&&R.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(_,A=!1){const R=this.snapshot,I=R?R.latestValues:{},G={...this.latestValues},Y=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!A;const q=createBox(),K=R?R.source:void 0,Q=this.layout?this.layout.source:void 0,ne=K!==Q,te=this.getStack(),J=!te||te.members.length<=1,ie=!!(ne&&!J&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let re;this.mixTargetDelta=le=>{const fe=le/1e3;mixAxisDelta(Y.x,_.x,fe),mixAxisDelta(Y.y,_.y,fe),this.setTargetDelta(Y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(q,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,q,fe),re&&boxEquals(this.relativeTarget,re)&&(this.isProjectionDirty=!1),re||(re=createBox()),copyBoxInto(re,this.relativeTarget)),ne&&(this.animationValues=G,mixValues(G,I,this.latestValues,fe,ie,J)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=fe},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(_){var A,R,I;this.notifyListeners("animationStart"),(A=this.currentAnimation)==null||A.stop(),(I=(R=this.resumingFrom)==null?void 0:R.currentAnimation)==null||I.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame$1.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.motionValue.jump(0,!1),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{..._,velocity:0,isSync:!0,onUpdate:G=>{this.mixTargetDelta(G),_.onUpdate&&_.onUpdate(G)},onStop:()=>{},onComplete:()=>{_.onComplete&&_.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const _=this.getStack();_&&_.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const _=this.getLead();let{targetWithTransforms:A,target:R,layout:I,latestValues:G}=_;if(!(!A||!R||!I)){if(this!==_&&this.layout&&I&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,I.layoutBox)){R=this.target||createBox();const Y=calcLength(this.layout.layoutBox.x);R.x.min=_.target.x.min,R.x.max=R.x.min+Y;const q=calcLength(this.layout.layoutBox.y);R.y.min=_.target.y.min,R.y.max=R.y.min+q}copyBoxInto(A,R),transformBox(A,G),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,A,G)}}registerSharedNode(_,A){this.sharedNodes.has(_)||this.sharedNodes.set(_,new NodeStack),this.sharedNodes.get(_).add(A);const I=A.options.initialPromotionConfig;A.promote({transition:I?I.transition:void 0,preserveFollowOpacity:I&&I.shouldPreserveFollowOpacity?I.shouldPreserveFollowOpacity(A):void 0})}isLead(){const _=this.getStack();return _?_.lead===this:!0}getLead(){var A;const{layoutId:_}=this.options;return _?((A=this.getStack())==null?void 0:A.lead)||this:this}getPrevLead(){var A;const{layoutId:_}=this.options;return _?(A=this.getStack())==null?void 0:A.prevLead:void 0}getStack(){const{layoutId:_}=this.options;if(_)return this.root.sharedNodes.get(_)}promote({needsReset:_,transition:A,preserveFollowOpacity:R}={}){const I=this.getStack();I&&I.promote(this,R),_&&(this.projectionDelta=void 0,this.needsReset=!0),A&&this.setOptions({transition:A})}relegate(){const _=this.getStack();return _?_.relegate(this):!1}resetSkewAndRotation(){const{visualElement:_}=this.options;if(!_)return;let A=!1;const{latestValues:R}=_;if((R.z||R.rotate||R.rotateX||R.rotateY||R.rotateZ||R.skewX||R.skewY)&&(A=!0),!A)return;const I={};R.z&&resetDistortingTransform("z",_,I,this.animationValues);for(let G=0;G<transformAxes.length;G++)resetDistortingTransform(`rotate${transformAxes[G]}`,_,I,this.animationValues),resetDistortingTransform(`skew${transformAxes[G]}`,_,I,this.animationValues);_.render();for(const G in I)_.setStaticValue(G,I[G]),this.animationValues&&(this.animationValues[G]=I[G]);_.scheduleRender()}applyProjectionStyles(_,A){if(!this.instance||this.isSVG)return;if(!this.isVisible){_.visibility="hidden";return}const R=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,_.visibility="",_.opacity="",_.pointerEvents=resolveMotionValue(A==null?void 0:A.pointerEvents)||"",_.transform=R?R(this.latestValues,""):"none";return}const I=this.getLead();if(!this.projectionDelta||!this.layout||!I.target){this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=resolveMotionValue(A==null?void 0:A.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(_.transform=R?R({},""):"none",this.hasProjected=!1);return}_.visibility="";const G=I.animationValues||I.latestValues;this.applyTransformsToTarget();let Y=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,G);R&&(Y=R(G,Y)),_.transform=Y;const{x:q,y:K}=this.projectionDelta;_.transformOrigin=`${q.origin*100}% ${K.origin*100}% 0`,I.animationValues?_.opacity=I===this?G.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:G.opacityExit:_.opacity=I===this?G.opacity!==void 0?G.opacity:"":G.opacityExit!==void 0?G.opacityExit:0;for(const Q in scaleCorrectors){if(G[Q]===void 0)continue;const{correct:ne,applyTo:te,isCSSVariable:J}=scaleCorrectors[Q],ie=Y==="none"?G[Q]:ne(G[Q],I);if(te){const re=te.length;for(let le=0;le<re;le++)_[te[le]]=ie}else J?this.options.visualElement.renderState.vars[Q]=ie:_[Q]=ie}this.options.layoutId&&(_.pointerEvents=I===this?resolveMotionValue(A==null?void 0:A.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(_=>{var A;return(A=_.currentAnimation)==null?void 0:A.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(u){u.updateLayout()}function notifyLayoutUpdate(u){var s;const n=((s=u.resumeFrom)==null?void 0:s.snapshot)||u.snapshot;if(u.isLead()&&u.layout&&n&&u.hasListeners("didUpdate")){const{layoutBox:f,measuredBox:d}=u.layout,{animationType:y}=u.options,_=n.source!==u.layout.source;y==="size"?eachAxis(Y=>{const q=_?n.measuredBox[Y]:n.layoutBox[Y],K=calcLength(q);q.min=f[Y].min,q.max=q.min+K}):shouldAnimatePositionOnly(y,n.layoutBox,f)&&eachAxis(Y=>{const q=_?n.measuredBox[Y]:n.layoutBox[Y],K=calcLength(f[Y]);q.max=q.min+K,u.relativeTarget&&!u.currentAnimation&&(u.isProjectionDirty=!0,u.relativeTarget[Y].max=u.relativeTarget[Y].min+K)});const A=createDelta();calcBoxDelta(A,f,n.layoutBox);const R=createDelta();_?calcBoxDelta(R,u.applyTransform(d,!0),n.measuredBox):calcBoxDelta(R,f,n.layoutBox);const I=!isDeltaZero(A);let G=!1;if(!u.resumeFrom){const Y=u.getClosestProjectingParent();if(Y&&!Y.resumeFrom){const{snapshot:q,layout:K}=Y;if(q&&K){const Q=createBox();calcRelativePosition(Q,n.layoutBox,q.layoutBox);const ne=createBox();calcRelativePosition(ne,f,K.layoutBox),boxEqualsRounded(Q,ne)||(G=!0),Y.options.layoutRoot&&(u.relativeTarget=ne,u.relativeTargetOrigin=Q,u.relativeParent=Y)}}}u.notifyListeners("didUpdate",{layout:f,snapshot:n,delta:R,layoutDelta:A,hasLayoutChanged:I,hasRelativeLayoutChanged:G})}else if(u.isLead()){const{onExitComplete:f}=u.options;f&&f()}u.options.transition=void 0}function propagateDirtyNodes(u){u.parent&&(u.isProjecting()||(u.isProjectionDirty=u.parent.isProjectionDirty),u.isSharedProjectionDirty||(u.isSharedProjectionDirty=!!(u.isProjectionDirty||u.parent.isProjectionDirty||u.parent.isSharedProjectionDirty)),u.isTransformDirty||(u.isTransformDirty=u.parent.isTransformDirty))}function cleanDirtyNodes(u){u.isProjectionDirty=u.isSharedProjectionDirty=u.isTransformDirty=!1}function clearSnapshot(u){u.clearSnapshot()}function clearMeasurements(u){u.clearMeasurements()}function clearIsLayoutDirty(u){u.isLayoutDirty=!1}function resetTransformStyle(u){const{visualElement:n}=u.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),u.resetTransform()}function finishAnimation(u){u.finishAnimation(),u.targetDelta=u.relativeTarget=u.target=void 0,u.isProjectionDirty=!0}function resolveTargetDelta(u){u.resolveTargetDelta()}function calcProjection(u){u.calcProjection()}function resetSkewAndRotation(u){u.resetSkewAndRotation()}function removeLeadSnapshots(u){u.removeLeadSnapshot()}function mixAxisDelta(u,n,s){u.translate=mixNumber$1(n.translate,0,s),u.scale=mixNumber$1(n.scale,1,s),u.origin=n.origin,u.originPoint=n.originPoint}function mixAxis(u,n,s,f){u.min=mixNumber$1(n.min,s.min,f),u.max=mixNumber$1(n.max,s.max,f)}function mixBox(u,n,s,f){mixAxis(u.x,n.x,s.x,f),mixAxis(u.y,n.y,s.y,f)}function hasOpacityCrossfade(u){return u.animationValues&&u.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=u=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(u),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$1;function roundAxis(u){u.min=roundPoint(u.min),u.max=roundPoint(u.max)}function roundBox(u){roundAxis(u.x),roundAxis(u.y)}function shouldAnimatePositionOnly(u,n,s){return u==="position"||u==="preserve-aspect"&&!isNear(aspectRatio(n),aspectRatio(s),.2)}function checkNodeWasScrollRoot(u){var n;return u!==u.root&&((n=u.scroll)==null?void 0:n.wasRoot)}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(u,n)=>addDomEvent(u,"resize",n),measureScroll:()=>{var u,n;return{x:document.documentElement.scrollLeft||((u=document.body)==null?void 0:u.scrollLeft)||0,y:document.documentElement.scrollTop||((n=document.body)==null?void 0:n.scrollTop)||0}},checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:u=>({x:u.scrollLeft,y:u.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const u=new DocumentProjectionNode({});u.mount(window),u.setOptions({layoutScroll:!0}),rootProjectionNode.current=u}return rootProjectionNode.current},resetTransform:(u,n)=>{u.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:u=>window.getComputedStyle(u).position==="fixed"}),MotionConfigContext=reactExports.createContext({transformPagePoint:u=>u,isStatic:!1,reducedMotion:"never"});function setRef(u,n){if(typeof u=="function")return u(n);u!=null&&(u.current=n)}function composeRefs(...u){return n=>{let s=!1;const f=u.map(d=>{const y=setRef(d,n);return!s&&typeof y=="function"&&(s=!0),y});if(s)return()=>{for(let d=0;d<f.length;d++){const y=f[d];typeof y=="function"?y():setRef(u[d],null)}}}}function useComposedRefs(...u){return reactExports.useCallback(composeRefs(...u),u)}class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(n){const s=this.props.childRef.current;if(s&&n.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const f=s.offsetParent,d=isHTMLElement(f)&&f.offsetWidth||0,y=isHTMLElement(f)&&f.offsetHeight||0,_=this.props.sizeRef.current;_.height=s.offsetHeight||0,_.width=s.offsetWidth||0,_.top=s.offsetTop,_.left=s.offsetLeft,_.right=d-_.width-_.left,_.bottom=y-_.height-_.top}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:u,isPresent:n,anchorX:s,anchorY:f,root:d,pop:y}){var q;const _=reactExports.useId(),A=reactExports.useRef(null),R=reactExports.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:I}=reactExports.useContext(MotionConfigContext),G=((q=u.props)==null?void 0:q.ref)??(u==null?void 0:u.ref),Y=useComposedRefs(A,G);return reactExports.useInsertionEffect(()=>{const{width:K,height:Q,top:ne,left:te,right:J,bottom:ie}=R.current;if(n||y===!1||!A.current||!K||!Q)return;const re=s==="left"?`left: ${te}`:`right: ${J}`,le=f==="bottom"?`bottom: ${ie}`:`top: ${ne}`;A.current.dataset.motionPopId=_;const fe=document.createElement("style");I&&(fe.nonce=I);const pe=d??document.head;return pe.appendChild(fe),fe.sheet&&fe.sheet.insertRule(`
          [data-motion-pop-id="${_}"] {
            position: absolute !important;
            width: ${K}px !important;
            height: ${Q}px !important;
            ${re}px !important;
            ${le}px !important;
          }
        `),()=>{pe.contains(fe)&&pe.removeChild(fe)}},[n]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:n,childRef:A,sizeRef:R,pop:y,children:y===!1?u:reactExports.cloneElement(u,{ref:Y})})}const PresenceChild=({children:u,initial:n,isPresent:s,onExitComplete:f,custom:d,presenceAffectsLayout:y,mode:_,anchorX:A,anchorY:R,root:I})=>{const G=useConstant(newChildrenMap),Y=reactExports.useId();let q=!0,K=reactExports.useMemo(()=>(q=!1,{id:Y,initial:n,isPresent:s,custom:d,onExitComplete:Q=>{G.set(Q,!0);for(const ne of G.values())if(!ne)return;f&&f()},register:Q=>(G.set(Q,!1),()=>G.delete(Q))}),[s,G,f]);return y&&q&&(K={...K}),reactExports.useMemo(()=>{G.forEach((Q,ne)=>G.set(ne,!1))},[s]),reactExports.useEffect(()=>{!s&&!G.size&&f&&f()},[s]),u=jsxRuntimeExports.jsx(PopChild,{pop:_==="popLayout",isPresent:s,anchorX:A,anchorY:R,root:I,children:u}),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:K,children:u})};function newChildrenMap(){return new Map}function usePresence(u=!0){const n=reactExports.useContext(PresenceContext);if(n===null)return[!0,null];const{isPresent:s,onExitComplete:f,register:d}=n,y=reactExports.useId();reactExports.useEffect(()=>{if(u)return d(y)},[u]);const _=reactExports.useCallback(()=>u&&f&&f(y),[y,f,u]);return!s&&f?[!1,_]:[!0]}const getChildKey=u=>u.key||"";function onlyElements(u){const n=[];return reactExports.Children.forEach(u,s=>{reactExports.isValidElement(s)&&n.push(s)}),n}const AnimatePresence=({children:u,custom:n,initial:s=!0,onExitComplete:f,presenceAffectsLayout:d=!0,mode:y="sync",propagate:_=!1,anchorX:A="left",anchorY:R="top",root:I})=>{const[G,Y]=usePresence(_),q=reactExports.useMemo(()=>onlyElements(u),[u]),K=_&&!G?[]:q.map(getChildKey),Q=reactExports.useRef(!0),ne=reactExports.useRef(q),te=useConstant(()=>new Map),J=reactExports.useRef(new Set),[ie,re]=reactExports.useState(q),[le,fe]=reactExports.useState(q);useIsomorphicLayoutEffect$2(()=>{Q.current=!1,ne.current=q;for(let se=0;se<le.length;se++){const he=getChildKey(le[se]);K.includes(he)?(te.delete(he),J.current.delete(he)):te.get(he)!==!0&&te.set(he,!1)}},[le,K.length,K.join("-")]);const pe=[];if(q!==ie){let se=[...q];for(let he=0;he<le.length;he++){const Se=le[he],ve=getChildKey(Se);K.includes(ve)||(se.splice(he,0,Se),pe.push(Se))}return y==="wait"&&pe.length&&(se=pe),fe(onlyElements(se)),re(q),null}const{forceRender:de}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:le.map(se=>{const he=getChildKey(se),Se=_&&!G?!1:q===le||K.includes(he),ve=()=>{if(J.current.has(he))return;if(J.current.add(he),te.has(he))te.set(he,!0);else return;let Re=!0;te.forEach(Ee=>{Ee||(Re=!1)}),Re&&(de==null||de(),fe(ne.current),_&&(Y==null||Y()),f&&f())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:Se,initial:!Q.current||s?void 0:!1,custom:n,presenceAffectsLayout:d,mode:y,root:I,onExitComplete:Se?void 0:ve,anchorX:A,anchorY:R,children:se},he)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let isInitialized=!1;function initFeatureDefinitions(){if(isInitialized)return;const u={};for(const n in featureProps)u[n]={isEnabled:s=>featureProps[n].some(f=>!!s[f])};setFeatureDefinitions(u),isInitialized=!0}function getInitializedFeatureDefinitions(){return initFeatureDefinitions(),getFeatureDefinitions()}function loadFeatures(u){const n=getInitializedFeatureDefinitions();for(const s in u)n[s]={...n[s],...u[s]};setFeatureDefinitions(n)}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function isValidMotionProp(u){return u.startsWith("while")||u.startsWith("drag")&&u!=="draggable"||u.startsWith("layout")||u.startsWith("onTap")||u.startsWith("onPan")||u.startsWith("onLayout")||validMotionProps.has(u)}let shouldForward=u=>!isValidMotionProp(u);function loadExternalIsValidProp(u){typeof u=="function"&&(shouldForward=n=>n.startsWith("on")?!isValidMotionProp(n):u(n))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(u,n,s){const f={};for(const d in u)d==="values"&&typeof u.values=="object"||(shouldForward(d)||s===!0&&isValidMotionProp(d)||!n&&!isValidMotionProp(d)||u.draggable&&d.startsWith("onDrag"))&&(f[d]=u[d]);return f}const MotionContext=reactExports.createContext({});function getCurrentTreeVariants(u,n){if(isControllingVariants(u)){const{initial:s,animate:f}=u;return{initial:s===!1||isVariantLabel(s)?s:void 0,animate:isVariantLabel(f)?f:void 0}}return u.inherit!==!1?n:{}}function useCreateMotionContext(u){const{initial:n,animate:s}=getCurrentTreeVariants(u,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:n,animate:s}),[variantLabelsAsDependency(n),variantLabelsAsDependency(s)])}function variantLabelsAsDependency(u){return Array.isArray(u)?u.join(" "):u}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(u,n,s){for(const f in n)!isMotionValue(n[f])&&!isForcedMotionValue(f,s)&&(u[f]=n[f])}function useInitialMotionValues({transformTemplate:u},n){return reactExports.useMemo(()=>{const s=createHtmlRenderState();return buildHTMLStyles(s,n,u),Object.assign({},s.vars,s.style)},[n])}function useStyle(u,n){const s=u.style||{},f={};return copyRawValuesOnly(f,s,u),Object.assign(f,useInitialMotionValues(u,n)),f}function useHTMLProps(u,n){const s={},f=useStyle(u,n);return u.drag&&u.dragListener!==!1&&(s.draggable=!1,f.userSelect=f.WebkitUserSelect=f.WebkitTouchCallout="none",f.touchAction=u.drag===!0?"none":`pan-${u.drag==="x"?"y":"x"}`),u.tabIndex===void 0&&(u.onTap||u.onTapStart||u.whileTap)&&(s.tabIndex=0),s.style=f,s}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}});function useSVGProps(u,n,s,f){const d=reactExports.useMemo(()=>{const y=createSvgRenderState();return buildSVGAttrs(y,n,isSVGTag(f),u.transformTemplate,u.style),{...y.attrs,style:{...y.style}}},[n]);if(u.style){const y={};copyRawValuesOnly(y,u.style,u),d.style={...y,...d.style}}return d}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(u){return typeof u!="string"||u.includes("-")?!1:!!(lowercaseSVGElements.indexOf(u)>-1||/[A-Z]/u.test(u))}function useRender(u,n,s,{latestValues:f},d,y=!1,_){const R=(_??isSVGComponent(u)?useSVGProps:useHTMLProps)(n,f,d,u),I=filterProps(n,typeof u=="string",y),G=u!==reactExports.Fragment?{...I,...R,ref:s}:{},{children:Y}=n,q=reactExports.useMemo(()=>isMotionValue(Y)?Y.get():Y,[Y]);return reactExports.createElement(u,{...G,children:q})}function makeState({scrapeMotionValuesFromProps:u,createRenderState:n},s,f,d){return{latestValues:makeLatestValues(s,f,d,u),renderState:n()}}function makeLatestValues(u,n,s,f){const d={},y=f(u,{});for(const q in y)d[q]=resolveMotionValue(y[q]);let{initial:_,animate:A}=u;const R=isControllingVariants(u),I=isVariantNode(u);n&&I&&!R&&u.inherit!==!1&&(_===void 0&&(_=n.initial),A===void 0&&(A=n.animate));let G=s?s.initial===!1:!1;G=G||_===!1;const Y=G?A:_;if(Y&&typeof Y!="boolean"&&!isAnimationControls(Y)){const q=Array.isArray(Y)?Y:[Y];for(let K=0;K<q.length;K++){const Q=resolveVariantFromProps(u,q[K]);if(Q){const{transitionEnd:ne,transition:te,...J}=Q;for(const ie in J){let re=J[ie];if(Array.isArray(re)){const le=G?re.length-1:0;re=re[le]}re!==null&&(d[ie]=re)}for(const ie in ne)d[ie]=ne[ie]}}}return d}const makeUseVisualState=u=>(n,s)=>{const f=reactExports.useContext(MotionContext),d=reactExports.useContext(PresenceContext),y=()=>makeState(u,n,f,d);return s?y():useConstant(y)},useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState}),useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function useMotionRef(u,n,s){const f=reactExports.useRef(s);reactExports.useInsertionEffect(()=>{f.current=s});const d=reactExports.useRef(null);return reactExports.useCallback(y=>{var A;y&&((A=u.onMount)==null||A.call(u,y)),n&&(y?n.mount(y):n.unmount());const _=f.current;if(typeof _=="function")if(y){const R=_(y);typeof R=="function"&&(d.current=R)}else d.current?(d.current(),d.current=null):_(y);else _&&(_.current=y)},[n])}const SwitchLayoutGroupContext=reactExports.createContext({});function isRefObject(u){return u&&typeof u=="object"&&Object.prototype.hasOwnProperty.call(u,"current")}function useVisualElement(u,n,s,f,d,y){var re,le;const{visualElement:_}=reactExports.useContext(MotionContext),A=reactExports.useContext(LazyContext),R=reactExports.useContext(PresenceContext),I=reactExports.useContext(MotionConfigContext),G=I.reducedMotion,Y=I.skipAnimations,q=reactExports.useRef(null),K=reactExports.useRef(!1);f=f||A.renderer,!q.current&&f&&(q.current=f(u,{visualState:n,parent:_,props:s,presenceContext:R,blockInitialAnimation:R?R.initial===!1:!1,reducedMotionConfig:G,skipAnimations:Y,isSVG:y}),K.current&&q.current&&(q.current.manuallyAnimateOnMount=!0));const Q=q.current,ne=reactExports.useContext(SwitchLayoutGroupContext);Q&&!Q.projection&&d&&(Q.type==="html"||Q.type==="svg")&&createProjectionNode(q.current,s,d,ne);const te=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{Q&&te.current&&Q.update(s,R)});const J=s[optimizedAppearDataAttribute],ie=reactExports.useRef(!!J&&!((re=window.MotionHandoffIsComplete)!=null&&re.call(window,J))&&((le=window.MotionHasOptimisedAnimation)==null?void 0:le.call(window,J)));return useIsomorphicLayoutEffect$2(()=>{K.current=!0,Q&&(te.current=!0,window.MotionIsMounted=!0,Q.updateFeatures(),Q.scheduleRenderMicrotask(),ie.current&&Q.animationState&&Q.animationState.animateChanges())}),reactExports.useEffect(()=>{Q&&(!ie.current&&Q.animationState&&Q.animationState.animateChanges(),ie.current&&(queueMicrotask(()=>{var fe;(fe=window.MotionHandoffMarkAsComplete)==null||fe.call(window,J)}),ie.current=!1),Q.enteringChildren=void 0)}),Q}function createProjectionNode(u,n,s,f){const{layoutId:d,layout:y,drag:_,dragConstraints:A,layoutScroll:R,layoutRoot:I,layoutCrossfade:G}=n;u.projection=new s(u.latestValues,n["data-framer-portal-id"]?void 0:getClosestProjectingNode(u.parent)),u.projection.setOptions({layoutId:d,layout:y,alwaysMeasureLayout:!!_||A&&isRefObject(A),visualElement:u,animationType:typeof y=="string"?y:"both",initialPromotionConfig:f,crossfade:G,layoutScroll:R,layoutRoot:I})}function getClosestProjectingNode(u){if(u)return u.options.allowProjection!==!1?u.projection:getClosestProjectingNode(u.parent)}function createMotionComponent(u,{forwardMotionProps:n=!1,type:s}={},f,d){f&&loadFeatures(f);const y=s?s==="svg":isSVGComponent(u),_=y?useSVGVisualState:useHTMLVisualState;function A(I,G){let Y;const q={...reactExports.useContext(MotionConfigContext),...I,layoutId:useLayoutId(I)},{isStatic:K}=q,Q=useCreateMotionContext(I),ne=_(I,K);if(!K&&isBrowser$2){useStrictMode();const te=getProjectionFunctionality(q);Y=te.MeasureLayout,Q.visualElement=useVisualElement(u,ne,q,d,te.ProjectionNode,y)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:Q,children:[Y&&Q.visualElement?jsxRuntimeExports.jsx(Y,{visualElement:Q.visualElement,...q}):null,useRender(u,I,useMotionRef(ne,Q.visualElement,G),ne,K,n,y)]})}A.displayName=`motion.${typeof u=="string"?u:`create(${u.displayName??u.name??""})`}`;const R=reactExports.forwardRef(A);return R[motionComponentSymbol]=u,R}function useLayoutId({layoutId:u}){const n=reactExports.useContext(LayoutGroupContext).id;return n&&u!==void 0?n+"-"+u:u}function useStrictMode(u,n){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(u){const n=getInitializedFeatureDefinitions(),{drag:s,layout:f}=n;if(!s&&!f)return{};const d={...s,...f};return{MeasureLayout:s!=null&&s.isEnabled(u)||f!=null&&f.isEnabled(u)?d.MeasureLayout:void 0,ProjectionNode:d.ProjectionNode}}function createMotionProxy(u,n){if(typeof Proxy>"u")return createMotionComponent;const s=new Map,f=(y,_)=>createMotionComponent(y,_,u,n),d=(y,_)=>f(y,_);return new Proxy(d,{get:(y,_)=>_==="create"?f:(s.has(_)||s.set(_,createMotionComponent(_,void 0,u,n)),s.get(_))})}const createDomVisualElement=(u,n)=>n.isSVG??isSVGComponent(u)?new SVGVisualElement(n):new HTMLVisualElement(n,{allowProjection:u!==reactExports.Fragment});class AnimationFeature extends Feature{constructor(n){super(n),n.animationState||(n.animationState=createAnimationState(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();isAnimationControls(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:s}=this.node.prevProps||{};n!==s&&this.updateAnimationControlsSubscription()}unmount(){var n;this.node.animationState.reset(),(n=this.unmountControls)==null||n.call(this)}}let id=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:s}=this.node.presenceContext,{isPresent:f}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===f)return;const d=this.node.animationState.setActive("exit",!n);s&&!n&&d.then(()=>{s(this.id)})}mount(){const{register:n,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function extractEventInfo(u){return{point:{x:u.pageX,y:u.pageY}}}const addPointerInfo=u=>n=>isPrimaryPointer(n)&&u(n,extractEventInfo(n));function addPointerEvent(u,n,s,f){return addDomEvent(u,n,addPointerInfo(s),f)}const getContextWindow=({current:u})=>u?u.ownerDocument.defaultView:null,distance=(u,n)=>Math.abs(u-n);function distance2D(u,n){const s=distance(u.x,n.x),f=distance(u.y,n.y);return Math.sqrt(s**2+f**2)}const overflowStyles=new Set(["auto","scroll"]);class PanSession{constructor(n,s,{transformPagePoint:f,contextWindow:d=window,dragSnapToOrigin:y=!1,distanceThreshold:_=3,element:A}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=K=>{this.handleScroll(K.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const K=getPanInfo(this.lastMoveEventInfo,this.history),Q=this.startEvent!==null,ne=distance2D(K.offset,{x:0,y:0})>=this.distanceThreshold;if(!Q&&!ne)return;const{point:te}=K,{timestamp:J}=frameData;this.history.push({...te,timestamp:J});const{onStart:ie,onMove:re}=this.handlers;Q||(ie&&ie(this.lastMoveEvent,K),this.startEvent=this.lastMoveEvent),re&&re(this.lastMoveEvent,K)},this.handlePointerMove=(K,Q)=>{this.lastMoveEvent=K,this.lastMoveEventInfo=transformPoint(Q,this.transformPagePoint),frame$1.update(this.updatePoint,!0)},this.handlePointerUp=(K,Q)=>{this.end();const{onEnd:ne,onSessionEnd:te,resumeAnimation:J}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&J&&J(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const ie=getPanInfo(K.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(Q,this.transformPagePoint),this.history);this.startEvent&&ne&&ne(K,ie),te&&te(K,ie)},!isPrimaryPointer(n))return;this.dragSnapToOrigin=y,this.handlers=s,this.transformPagePoint=f,this.distanceThreshold=_,this.contextWindow=d||window;const R=extractEventInfo(n),I=transformPoint(R,this.transformPagePoint),{point:G}=I,{timestamp:Y}=frameData;this.history=[{...G,timestamp:Y}];const{onSessionStart:q}=s;q&&q(n,getPanInfo(I,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp)),A&&this.startScrollTracking(A)}startScrollTracking(n){let s=n.parentElement;for(;s;){const f=getComputedStyle(s);(overflowStyles.has(f.overflowX)||overflowStyles.has(f.overflowY))&&this.scrollPositions.set(s,{x:s.scrollLeft,y:s.scrollTop}),s=s.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(n){const s=this.scrollPositions.get(n);if(!s)return;const f=n===window,d=f?{x:window.scrollX,y:window.scrollY}:{x:n.scrollLeft,y:n.scrollTop},y={x:d.x-s.x,y:d.y-s.y};y.x===0&&y.y===0||(f?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=y.x,this.lastMoveEventInfo.point.y+=y.y):this.history.length>0&&(this.history[0].x-=y.x,this.history[0].y-=y.y),this.scrollPositions.set(n,d),frame$1.update(this.updatePoint,!0))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),cancelFrame(this.updatePoint)}}function transformPoint(u,n){return n?{point:n(u.point)}:u}function subtractPoint(u,n){return{x:u.x-n.x,y:u.y-n.y}}function getPanInfo({point:u},n){return{point:u,delta:subtractPoint(u,lastDevicePoint(n)),offset:subtractPoint(u,startDevicePoint(n)),velocity:getVelocity(n,.1)}}function startDevicePoint(u){return u[0]}function lastDevicePoint(u){return u[u.length-1]}function getVelocity(u,n){if(u.length<2)return{x:0,y:0};let s=u.length-1,f=null;const d=lastDevicePoint(u);for(;s>=0&&(f=u[s],!(d.timestamp-f.timestamp>secondsToMilliseconds(n)));)s--;if(!f)return{x:0,y:0};f===u[0]&&u.length>2&&d.timestamp-f.timestamp>secondsToMilliseconds(n)*2&&(f=u[1]);const y=millisecondsToSeconds(d.timestamp-f.timestamp);if(y===0)return{x:0,y:0};const _={x:(d.x-f.x)/y,y:(d.y-f.y)/y};return _.x===1/0&&(_.x=0),_.y===1/0&&(_.y=0),_}function applyConstraints(u,{min:n,max:s},f){return n!==void 0&&u<n?u=f?mixNumber$1(n,u,f.min):Math.max(u,n):s!==void 0&&u>s&&(u=f?mixNumber$1(s,u,f.max):Math.min(u,s)),u}function calcRelativeAxisConstraints(u,n,s){return{min:n!==void 0?u.min+n:void 0,max:s!==void 0?u.max+s-(u.max-u.min):void 0}}function calcRelativeConstraints(u,{top:n,left:s,bottom:f,right:d}){return{x:calcRelativeAxisConstraints(u.x,s,d),y:calcRelativeAxisConstraints(u.y,n,f)}}function calcViewportAxisConstraints(u,n){let s=n.min-u.min,f=n.max-u.max;return n.max-n.min<u.max-u.min&&([s,f]=[f,s]),{min:s,max:f}}function calcViewportConstraints(u,n){return{x:calcViewportAxisConstraints(u.x,n.x),y:calcViewportAxisConstraints(u.y,n.y)}}function calcOrigin(u,n){let s=.5;const f=calcLength(u),d=calcLength(n);return d>f?s=progress(n.min,n.max-f,u.min):f>d&&(s=progress(u.min,u.max-d,n.min)),clamp$1(0,1,s)}function rebaseAxisConstraints(u,n){const s={};return n.min!==void 0&&(s.min=n.min-u.min),n.max!==void 0&&(s.max=n.max-u.min),s}const defaultElastic=.35;function resolveDragElastic(u=defaultElastic){return u===!1?u=0:u===!0&&(u=defaultElastic),{x:resolveAxisElastic(u,"left","right"),y:resolveAxisElastic(u,"top","bottom")}}function resolveAxisElastic(u,n,s){return{min:resolvePointElastic(u,n),max:resolvePointElastic(u,s)}}function resolvePointElastic(u,n){return typeof u=="number"?u:u[n]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:s=!1,distanceThreshold:f}={}){const{presenceContext:d}=this.visualElement;if(d&&d.isPresent===!1)return;const y=Y=>{s&&this.snapToCursor(extractEventInfo(Y).point),this.stopAnimation()},_=(Y,q)=>{const{drag:K,dragPropagation:Q,onDragStart:ne}=this.getProps();if(K&&!Q&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(K),!this.openDragLock))return;this.latestPointerEvent=Y,this.latestPanInfo=q,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(J=>{let ie=this.getAxisMotionValue(J).get()||0;if(percent.test(ie)){const{projection:re}=this.visualElement;if(re&&re.layout){const le=re.layout.layoutBox[J];le&&(ie=calcLength(le)*(parseFloat(ie)/100))}}this.originPoint[J]=ie}),ne&&frame$1.update(()=>ne(Y,q),!1,!0),addValueToWillChange(this.visualElement,"transform");const{animationState:te}=this.visualElement;te&&te.setActive("whileDrag",!0)},A=(Y,q)=>{this.latestPointerEvent=Y,this.latestPanInfo=q;const{dragPropagation:K,dragDirectionLock:Q,onDirectionLock:ne,onDrag:te}=this.getProps();if(!K&&!this.openDragLock)return;const{offset:J}=q;if(Q&&this.currentDirection===null){this.currentDirection=getCurrentDirection(J),this.currentDirection!==null&&ne&&ne(this.currentDirection);return}this.updateAxis("x",q.point,J),this.updateAxis("y",q.point,J),this.visualElement.render(),te&&frame$1.update(()=>te(Y,q),!1,!0)},R=(Y,q)=>{this.latestPointerEvent=Y,this.latestPanInfo=q,this.stop(Y,q),this.latestPointerEvent=null,this.latestPanInfo=null},I=()=>{const{dragSnapToOrigin:Y}=this.getProps();(Y||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:G}=this.getProps();this.panSession=new PanSession(n,{onSessionStart:y,onStart:_,onMove:A,onSessionEnd:R,resumeAnimation:I},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:G,distanceThreshold:f,contextWindow:getContextWindow(this.visualElement),element:this.visualElement.current})}stop(n,s){const f=n||this.latestPointerEvent,d=s||this.latestPanInfo,y=this.isDragging;if(this.cancel(),!y||!d||!f)return;const{velocity:_}=d;this.startAnimation(_);const{onDragEnd:A}=this.getProps();A&&frame$1.postRender(()=>A(f,d))}cancel(){this.isDragging=!1;const{projection:n,animationState:s}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:f}=this.getProps();!f&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(n,s,f){const{drag:d}=this.getProps();if(!f||!shouldDrag(n,d,this.currentDirection))return;const y=this.getAxisMotionValue(n);let _=this.originPoint[n]+f[n];this.constraints&&this.constraints[n]&&(_=applyConstraints(_,this.constraints[n],this.elastic[n])),y.set(_)}resolveConstraints(){var y;const{dragConstraints:n,dragElastic:s}=this.getProps(),f=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(y=this.visualElement.projection)==null?void 0:y.layout,d=this.constraints;n&&isRefObject(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&f?this.constraints=calcRelativeConstraints(f.layoutBox,n):this.constraints=!1,this.elastic=resolveDragElastic(s),d!==this.constraints&&!isRefObject(n)&&f&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(_=>{this.constraints!==!1&&this.getAxisMotionValue(_)&&(this.constraints[_]=rebaseAxisConstraints(f.layoutBox[_],this.constraints[_]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:s}=this.getProps();if(!n||!isRefObject(n))return!1;const f=n.current,{projection:d}=this.visualElement;if(!d||!d.layout)return!1;const y=measurePageBox(f,d.root,this.visualElement.getTransformPagePoint());let _=calcViewportConstraints(d.layout.layoutBox,y);if(s){const A=s(convertBoxToBoundingBox(_));this.hasMutatedConstraints=!!A,A&&(_=convertBoundingBoxToBox(A))}return _}startAnimation(n){const{drag:s,dragMomentum:f,dragElastic:d,dragTransition:y,dragSnapToOrigin:_,onDragTransitionEnd:A}=this.getProps(),R=this.constraints||{},I=eachAxis(G=>{if(!shouldDrag(G,s,this.currentDirection))return;let Y=R&&R[G]||{};_&&(Y={min:0,max:0});const q=d?200:1e6,K=d?40:1e7,Q={type:"inertia",velocity:f?n[G]:0,bounceStiffness:q,bounceDamping:K,timeConstant:750,restDelta:1,restSpeed:10,...y,...Y};return this.startAxisValueAnimation(G,Q)});return Promise.all(I).then(A)}startAxisValueAnimation(n,s){const f=this.getAxisMotionValue(n);return addValueToWillChange(this.visualElement,n),f.start(animateMotionValue(n,f,0,s,this.visualElement,!1))}stopAnimation(){eachAxis(n=>this.getAxisMotionValue(n).stop())}getAxisMotionValue(n){const s=`_drag${n.toUpperCase()}`,f=this.visualElement.getProps(),d=f[s];return d||this.visualElement.getValue(n,(f.initial?f.initial[n]:void 0)||0)}snapToCursor(n){eachAxis(s=>{const{drag:f}=this.getProps();if(!shouldDrag(s,f,this.currentDirection))return;const{projection:d}=this.visualElement,y=this.getAxisMotionValue(s);if(d&&d.layout){const{min:_,max:A}=d.layout.layoutBox[s],R=y.get()||0;y.set(n[s]-mixNumber$1(_,A,.5)+R)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:s}=this.getProps(),{projection:f}=this.visualElement;if(!isRefObject(s)||!f||!this.constraints)return;this.stopAnimation();const d={x:0,y:0};eachAxis(_=>{const A=this.getAxisMotionValue(_);if(A&&this.constraints!==!1){const R=A.get();d[_]=calcOrigin({min:R,max:R},this.constraints[_])}});const{transformTemplate:y}=this.visualElement.getProps();this.visualElement.current.style.transform=y?y({},""):"none",f.root&&f.root.updateScroll(),f.updateLayout(),this.constraints=!1,this.resolveConstraints(),eachAxis(_=>{if(!shouldDrag(_,n,null))return;const A=this.getAxisMotionValue(_),{min:R,max:I}=this.constraints[_];A.set(mixNumber$1(R,I,d[_]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const n=this.visualElement.current,s=addPointerEvent(n,"pointerdown",I=>{const{drag:G,dragListener:Y=!0}=this.getProps(),q=I.target,K=q!==n&&isElementTextInput(q);G&&Y&&!K&&this.start(I)});let f;const d=()=>{const{dragConstraints:I}=this.getProps();isRefObject(I)&&I.current&&(this.constraints=this.resolveRefConstraints(),f||(f=startResizeObservers(n,I.current,()=>this.scalePositionWithinConstraints())))},{projection:y}=this.visualElement,_=y.addEventListener("measure",d);y&&!y.layout&&(y.root&&y.root.updateScroll(),y.updateLayout()),frame$1.read(d);const A=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),R=y.addEventListener("didUpdate",(({delta:I,hasLayoutChanged:G})=>{this.isDragging&&G&&(eachAxis(Y=>{const q=this.getAxisMotionValue(Y);q&&(this.originPoint[Y]+=I[Y].translate,q.set(q.get()+I[Y].translate))}),this.visualElement.render())}));return()=>{A(),s(),_(),R&&R(),f&&f()}}getProps(){const n=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:f=!1,dragPropagation:d=!1,dragConstraints:y=!1,dragElastic:_=defaultElastic,dragMomentum:A=!0}=n;return{...n,drag:s,dragDirectionLock:f,dragPropagation:d,dragConstraints:y,dragElastic:_,dragMomentum:A}}}function skipFirstCall(u){let n=!0;return()=>{if(n){n=!1;return}u()}}function startResizeObservers(u,n,s){const f=resize(u,skipFirstCall(s)),d=resize(n,skipFirstCall(s));return()=>{f(),d()}}function shouldDrag(u,n,s){return(n===!0||n===u)&&(s===null||s===u)}function getCurrentDirection(u,n=10){let s=null;return Math.abs(u.y)>n?s="y":Math.abs(u.x)>n&&(s="x"),s}class DragGesture extends Feature{constructor(n){super(n),this.removeGroupControls=noop$1,this.removeListeners=noop$1,this.controls=new VisualElementDragControls(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$1}update(){const{dragControls:n}=this.node.getProps(),{dragControls:s}=this.node.prevProps||{};n!==s&&(this.removeGroupControls(),n&&(this.removeGroupControls=n.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const asyncHandler=u=>(n,s)=>{u&&frame$1.update(()=>u(n,s),!1,!0)};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$1}onPointerDown(n){this.session=new PanSession(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:s,onPan:f,onPanEnd:d}=this.node.getProps();return{onSessionStart:asyncHandler(n),onStart:asyncHandler(s),onMove:asyncHandler(f),onEnd:(y,_)=>{delete this.session,d&&frame$1.postRender(()=>d(y,_))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:f,layoutId:d}=this.props,{projection:y}=n;y&&(s.group&&s.group.add(y),f&&f.register&&d&&f.register(y),hasTakenAnySnapshot&&y.root.didUpdate(),y.addEventListener("animationComplete",()=>{this.safeToRemove()}),y.setOptions({...y.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:s,visualElement:f,drag:d,isPresent:y}=this.props,{projection:_}=f;return _&&(_.isPresent=y,n.layoutDependency!==s&&_.setOptions({..._.options,layoutDependency:s}),hasTakenAnySnapshot=!0,d||n.layoutDependency!==s||s===void 0||n.isPresent!==y?_.willUpdate():this.safeToRemove(),n.isPresent!==y&&(y?_.promote():_.relegate()||frame$1.postRender(()=>{const A=_.getStack();(!A||!A.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),microtask.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:f}=this.props,{projection:d}=n;hasTakenAnySnapshot=!0,d&&(d.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(d),f&&f.deregister&&f.deregister(d))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function MeasureLayout(u){const[n,s]=usePresence(),f=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...u,layoutGroup:f,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:n,safeToRemove:s})}const drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(u,n,s){const{props:f}=u;u.animationState&&f.whileHover&&u.animationState.setActive("whileHover",s==="Start");const d="onHover"+s,y=f[d];y&&frame$1.postRender(()=>y(n,extractEventInfo(n)))}class HoverGesture extends Feature{mount(){const{current:n}=this.node;n&&(this.unmount=hover(n,(s,f)=>(handleHoverEvent(this.node,f,"Start"),d=>handleHoverEvent(this.node,d,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(u,n,s){const{props:f}=u;if(u.current instanceof HTMLButtonElement&&u.current.disabled)return;u.animationState&&f.whileTap&&u.animationState.setActive("whileTap",s==="Start");const d="onTap"+(s==="End"?"":s),y=f[d];y&&frame$1.postRender(()=>y(n,extractEventInfo(n)))}class PressGesture extends Feature{mount(){const{current:n}=this.node;if(!n)return;const{globalTapTarget:s,propagate:f}=this.node.props;this.unmount=press(n,(d,y)=>(handlePressEvent(this.node,y,"Start"),(_,{success:A})=>handlePressEvent(this.node,_,A?"End":"Cancel")),{useGlobalTarget:s,stopPropagation:(f==null?void 0:f.tap)===!1})}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=u=>{const n=observerCallbacks.get(u.target);n&&n(u)},fireAllObserverCallbacks=u=>{u.forEach(fireObserverCallback)};function initIntersectionObserver({root:u,...n}){const s=u||document;observers.has(s)||observers.set(s,{});const f=observers.get(s),d=JSON.stringify(n);return f[d]||(f[d]=new IntersectionObserver(fireAllObserverCallbacks,{root:u,...n})),f[d]}function observeIntersection(u,n,s){const f=initIntersectionObserver(n);return observerCallbacks.set(u,s),f.observe(u),()=>{observerCallbacks.delete(u),f.unobserve(u)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:s,margin:f,amount:d="some",once:y}=n,_={root:s?s.current:void 0,rootMargin:f,threshold:typeof d=="number"?d:thresholdNames[d]},A=R=>{const{isIntersecting:I}=R;if(this.isInView===I||(this.isInView=I,y&&!I&&this.hasEnteredView))return;I&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",I);const{onViewportEnter:G,onViewportLeave:Y}=this.node.getProps(),q=I?G:Y;q&&q(R)};return observeIntersection(this.node.current,_,A)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:s}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(n,s))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:u={}},{viewport:n={}}={}){return s=>u[s]!==n[s]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement);function useReducedMotion(){!hasReducedMotionListener.current&&initPrefersReducedMotion();const[u]=reactExports.useState(prefersReducedMotion.current);return u}/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=u=>u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=u=>u.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,s,f)=>f?f.toUpperCase():s.toLowerCase()),toPascalCase$1=u=>{const n=toCamelCase(u);return n.charAt(0).toUpperCase()+n.slice(1)},mergeClasses=(...u)=>u.filter((n,s,f)=>!!n&&n.trim()!==""&&f.indexOf(n)===s).join(" ").trim(),hasA11yProp=u=>{for(const n in u)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:u="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:f,className:d="",children:y,iconNode:_,...A},R)=>reactExports.createElement("svg",{ref:R,...defaultAttributes,width:n,height:n,stroke:u,strokeWidth:f?Number(s)*24/Number(n):s,className:mergeClasses("lucide",d),...!y&&!hasA11yProp(A)&&{"aria-hidden":"true"},...A},[..._.map(([I,G])=>reactExports.createElement(I,G)),...Array.isArray(y)?y:[y]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(u,n)=>{const s=reactExports.forwardRef(({className:f,...d},y)=>reactExports.createElement(Icon,{ref:y,iconNode:n,className:mergeClasses(`lucide-${toKebabCase(toPascalCase$1(u))}`,`lucide-${u}`,f),...d}));return s.displayName=toPascalCase$1(u),s};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$X=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$X);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$W=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$W);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$V=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Award=createLucideIcon("award",__iconNode$V);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$U=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$U);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$T=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Building2=createLucideIcon("building-2",__iconNode$T);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$S=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$S);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$R=[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]],Cat=createLucideIcon("cat",__iconNode$R);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Q=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$Q);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$P=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$P);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$O=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ChevronLeft=createLucideIcon("chevron-left",__iconNode$O);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$N=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ChevronRight=createLucideIcon("chevron-right",__iconNode$N);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$M=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ChevronUp=createLucideIcon("chevron-up",__iconNode$M);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$L=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$L);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],CircleCheck=createLucideIcon("circle-check",__iconNode$K);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],CirclePlay=createLucideIcon("circle-play",__iconNode$J);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Compass=createLucideIcon("compass",__iconNode$I);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$H);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Cpu=createLucideIcon("cpu",__iconNode$G);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Database=createLucideIcon("database",__iconNode$F);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$E);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ExternalLink=createLucideIcon("external-link",__iconNode$D);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$C);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Flame=createLucideIcon("flame",__iconNode$B);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Github=createLucideIcon("github",__iconNode$A);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Globe=createLucideIcon("globe",__iconNode$z);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}],["path",{d:"M3.22 13H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"auskq0"}]],HeartPulse=createLucideIcon("heart-pulse",__iconNode$y);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],History=createLucideIcon("history",__iconNode$x);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Info=createLucideIcon("info",__iconNode$w);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers$1=createLucideIcon("layers",__iconNode$v);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Lightbulb=createLucideIcon("lightbulb",__iconNode$u);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],Linkedin=createLucideIcon("linkedin",__iconNode$t);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$s);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$r);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$q);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Menu=createLucideIcon("menu",__iconNode$p);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M12 3v3",key:"1n5kay"}],["path",{d:"M4 6a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h13a2 2 0 0 0 1.152-.365l3.424-2.317a1 1 0 0 0 0-1.635l-3.424-2.318A2 2 0 0 0 17 6z",key:"1btarq"}]],Milestone=createLucideIcon("milestone",__iconNode$o);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],MousePointer2=createLucideIcon("mouse-pointer-2",__iconNode$n);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],PanelsTopLeft=createLucideIcon("panels-top-left",__iconNode$m);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],PenTool=createLucideIcon("pen-tool",__iconNode$l);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$k);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],Quote=createLucideIcon("quote",__iconNode$j);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Rocket=createLucideIcon("rocket",__iconNode$i);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Search=createLucideIcon("search",__iconNode$h);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Server=createLucideIcon("server",__iconNode$g);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Share2=createLucideIcon("share-2",__iconNode$f);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],ShieldAlert=createLucideIcon("shield-alert",__iconNode$e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Shield=createLucideIcon("shield",__iconNode$d);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],ShoppingBag=createLucideIcon("shopping-bag",__iconNode$c);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Sparkles=createLucideIcon("sparkles",__iconNode$b);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Star=createLucideIcon("star",__iconNode$a);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$9);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],TrendingUp=createLucideIcon("trending-up",__iconNode$8);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode$7);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Trophy=createLucideIcon("trophy",__iconNode$6);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],Twitter=createLucideIcon("twitter",__iconNode$5);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User$1=createLucideIcon("user",__iconNode$4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Users=createLucideIcon("users",__iconNode$3);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Wallet=createLucideIcon("wallet",__iconNode$2);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X$1=createLucideIcon("x",__iconNode$1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zap=createLucideIcon("zap",__iconNode);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(u={}){function n(f,d){let{pathname:y,search:_,hash:A}=f.location;return createLocation("",{pathname:y,search:_,hash:A},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function s(f,d){return typeof d=="string"?d:createPath(d)}return getUrlBasedHistory(n,s,null,u)}function invariant(u,n){if(u===!1||u===null||typeof u>"u")throw new Error(n)}function warning(u,n){if(!u){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(u,n){return{usr:u.state,key:u.key,idx:n}}function createLocation(u,n,s=null,f){return{pathname:typeof u=="string"?u:u.pathname,search:"",hash:"",...typeof n=="string"?parsePath(n):n,state:s,key:n&&n.key||f||createKey()}}function createPath({pathname:u="/",search:n="",hash:s=""}){return n&&n!=="?"&&(u+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(u+=s.charAt(0)==="#"?s:"#"+s),u}function parsePath(u){let n={};if(u){let s=u.indexOf("#");s>=0&&(n.hash=u.substring(s),u=u.substring(0,s));let f=u.indexOf("?");f>=0&&(n.search=u.substring(f),u=u.substring(0,f)),u&&(n.pathname=u)}return n}function getUrlBasedHistory(u,n,s,f={}){let{window:d=document.defaultView,v5Compat:y=!1}=f,_=d.history,A="POP",R=null,I=G();I==null&&(I=0,_.replaceState({..._.state,idx:I},""));function G(){return(_.state||{idx:null}).idx}function Y(){A="POP";let te=G(),J=te==null?null:te-I;I=te,R&&R({action:A,location:ne.location,delta:J})}function q(te,J){A="PUSH";let ie=createLocation(ne.location,te,J);I=G()+1;let re=getHistoryState(ie,I),le=ne.createHref(ie);try{_.pushState(re,"",le)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;d.location.assign(le)}y&&R&&R({action:A,location:ne.location,delta:1})}function K(te,J){A="REPLACE";let ie=createLocation(ne.location,te,J);I=G();let re=getHistoryState(ie,I),le=ne.createHref(ie);_.replaceState(re,"",le),y&&R&&R({action:A,location:ne.location,delta:0})}function Q(te){return createBrowserURLImpl(te)}let ne={get action(){return A},get location(){return u(d,_)},listen(te){if(R)throw new Error("A history only accepts one active listener");return d.addEventListener(PopStateEventType,Y),R=te,()=>{d.removeEventListener(PopStateEventType,Y),R=null}},createHref(te){return n(d,te)},createURL:Q,encodeLocation(te){let J=Q(te);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:q,replace:K,go(te){return _.go(te)}};return ne}function createBrowserURLImpl(u,n=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(s,"No window.location.(origin|href) available to create URL");let f=typeof u=="string"?u:createPath(u);return f=f.replace(/ $/,"%20"),!n&&f.startsWith("//")&&(f=s+f),new URL(f,s)}function matchRoutes(u,n,s="/"){return matchRoutesImpl(u,n,s,!1)}function matchRoutesImpl(u,n,s,f){let d=typeof n=="string"?parsePath(n):n,y=stripBasename(d.pathname||"/",s);if(y==null)return null;let _=flattenRoutes(u);rankRouteBranches(_);let A=null;for(let R=0;A==null&&R<_.length;++R){let I=decodePath(y);A=matchRouteBranch(_[R],I,f)}return A}function flattenRoutes(u,n=[],s=[],f="",d=!1){let y=(_,A,R=d,I)=>{let G={relativePath:I===void 0?_.path||"":I,caseSensitive:_.caseSensitive===!0,childrenIndex:A,route:_};if(G.relativePath.startsWith("/")){if(!G.relativePath.startsWith(f)&&R)return;invariant(G.relativePath.startsWith(f),`Absolute route path "${G.relativePath}" nested under path "${f}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),G.relativePath=G.relativePath.slice(f.length)}let Y=joinPaths([f,G.relativePath]),q=s.concat(G);_.children&&_.children.length>0&&(invariant(_.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${Y}".`),flattenRoutes(_.children,n,q,Y,R)),!(_.path==null&&!_.index)&&n.push({path:Y,score:computeScore(Y,_.index),routesMeta:q})};return u.forEach((_,A)=>{var R;if(_.path===""||!((R=_.path)!=null&&R.includes("?")))y(_,A);else for(let I of explodeOptionalSegments(_.path))y(_,A,!0,I)}),n}function explodeOptionalSegments(u){let n=u.split("/");if(n.length===0)return[];let[s,...f]=n,d=s.endsWith("?"),y=s.replace(/\?$/,"");if(f.length===0)return d?[y,""]:[y];let _=explodeOptionalSegments(f.join("/")),A=[];return A.push(..._.map(R=>R===""?y:[y,R].join("/"))),d&&A.push(..._),A.map(R=>u.startsWith("/")&&R===""?"/":R)}function rankRouteBranches(u){u.sort((n,s)=>n.score!==s.score?s.score-n.score:compareIndexes(n.routesMeta.map(f=>f.childrenIndex),s.routesMeta.map(f=>f.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=u=>u==="*";function computeScore(u,n){let s=u.split("/"),f=s.length;return s.some(isSplat)&&(f+=splatPenalty),n&&(f+=indexRouteValue),s.filter(d=>!isSplat(d)).reduce((d,y)=>d+(paramRe.test(y)?dynamicSegmentValue:y===""?emptySegmentValue:staticSegmentValue),f)}function compareIndexes(u,n){return u.length===n.length&&u.slice(0,-1).every((f,d)=>f===n[d])?u[u.length-1]-n[n.length-1]:0}function matchRouteBranch(u,n,s=!1){let{routesMeta:f}=u,d={},y="/",_=[];for(let A=0;A<f.length;++A){let R=f[A],I=A===f.length-1,G=y==="/"?n:n.slice(y.length)||"/",Y=matchPath({path:R.relativePath,caseSensitive:R.caseSensitive,end:I},G),q=R.route;if(!Y&&I&&s&&!f[f.length-1].route.index&&(Y=matchPath({path:R.relativePath,caseSensitive:R.caseSensitive,end:!1},G)),!Y)return null;Object.assign(d,Y.params),_.push({params:d,pathname:joinPaths([y,Y.pathname]),pathnameBase:normalizePathname(joinPaths([y,Y.pathnameBase])),route:q}),Y.pathnameBase!=="/"&&(y=joinPaths([y,Y.pathnameBase]))}return _}function matchPath(u,n){typeof u=="string"&&(u={path:u,caseSensitive:!1,end:!0});let[s,f]=compilePath(u.path,u.caseSensitive,u.end),d=n.match(s);if(!d)return null;let y=d[0],_=y.replace(/(.)\/+$/,"$1"),A=d.slice(1);return{params:f.reduce((I,{paramName:G,isOptional:Y},q)=>{if(G==="*"){let Q=A[q]||"";_=y.slice(0,y.length-Q.length).replace(/(.)\/+$/,"$1")}const K=A[q];return Y&&!K?I[G]=void 0:I[G]=(K||"").replace(/%2F/g,"/"),I},{}),pathname:y,pathnameBase:_,pattern:u}}function compilePath(u,n=!1,s=!0){warning(u==="*"||!u.endsWith("*")||u.endsWith("/*"),`Route path "${u}" will be treated as if it were "${u.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${u.replace(/\*$/,"/*")}".`);let f=[],d="^"+u.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(_,A,R)=>(f.push({paramName:A,isOptional:R!=null}),R?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return u.endsWith("*")?(f.push({paramName:"*"}),d+=u==="*"||u==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?d+="\\/*$":u!==""&&u!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,n?void 0:"i"),f]}function decodePath(u){try{return u.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return warning(!1,`The URL path "${u}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),u}}function stripBasename(u,n){if(n==="/")return u;if(!u.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,f=u.charAt(s);return f&&f!=="/"?null:u.slice(s)||"/"}var ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function resolvePath(u,n="/"){let{pathname:s,search:f="",hash:d=""}=typeof u=="string"?parsePath(u):u,y;return s?(s=s.replace(/\/\/+/g,"/"),s.startsWith("/")?y=resolvePathname(s.substring(1),"/"):y=resolvePathname(s,n)):y=n,{pathname:y,search:normalizeSearch(f),hash:normalizeHash(d)}}function resolvePathname(u,n){let s=n.replace(/\/+$/,"").split("/");return u.split("/").forEach(d=>{d===".."?s.length>1&&s.pop():d!=="."&&s.push(d)}),s.length>1?s.join("/"):"/"}function getInvalidPathError(u,n,s,f){return`Cannot include a '${u}' character in a manually specified \`to.${n}\` field [${JSON.stringify(f)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(u){return u.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function getResolveToMatches(u){let n=getPathContributingMatches(u);return n.map((s,f)=>f===n.length-1?s.pathname:s.pathnameBase)}function resolveTo(u,n,s,f=!1){let d;typeof u=="string"?d=parsePath(u):(d={...u},invariant(!d.pathname||!d.pathname.includes("?"),getInvalidPathError("?","pathname","search",d)),invariant(!d.pathname||!d.pathname.includes("#"),getInvalidPathError("#","pathname","hash",d)),invariant(!d.search||!d.search.includes("#"),getInvalidPathError("#","search","hash",d)));let y=u===""||d.pathname==="",_=y?"/":d.pathname,A;if(_==null)A=s;else{let Y=n.length-1;if(!f&&_.startsWith("..")){let q=_.split("/");for(;q[0]==="..";)q.shift(),Y-=1;d.pathname=q.join("/")}A=Y>=0?n[Y]:"/"}let R=resolvePath(d,A),I=_&&_!=="/"&&_.endsWith("/"),G=(y||_===".")&&s.endsWith("/");return!R.pathname.endsWith("/")&&(I||G)&&(R.pathname+="/"),R}var joinPaths=u=>u.join("/").replace(/\/\/+/g,"/"),normalizePathname=u=>u.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=u=>!u||u==="?"?"":u.startsWith("?")?u:"?"+u,normalizeHash=u=>!u||u==="#"?"":u.startsWith("#")?u:"#"+u,ErrorResponseImpl=class{constructor(u,n,s,f=!1){this.status=u,this.statusText=n||"",this.internal=f,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function isRouteErrorResponse(u){return u!=null&&typeof u.status=="number"&&typeof u.statusText=="string"&&typeof u.internal=="boolean"&&"data"in u}function getRoutePattern(u){return u.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function parseToInfo(u,n){let s=u;if(typeof s!="string"||!ABSOLUTE_URL_REGEX.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let f=s,d=!1;if(isBrowser)try{let y=new URL(window.location.href),_=s.startsWith("//")?new URL(y.protocol+s):new URL(s),A=stripBasename(_.pathname,n);_.origin===y.origin&&A!=null?s=A+_.search+_.hash:d=!0}catch{warning(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:f,isExternal:d,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var RSCRouterContext=reactExports.createContext(!1),ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";var ERROR_DIGEST_BASE="REACT_ROUTER_ERROR",ERROR_DIGEST_REDIRECT="REDIRECT",ERROR_DIGEST_ROUTE_ERROR_RESPONSE="ROUTE_ERROR_RESPONSE";function decodeRedirectErrorDigest(u){if(u.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_REDIRECT}:{`))try{let n=JSON.parse(u.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function decodeRouteErrorResponseDigest(u){if(u.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_ROUTE_ERROR_RESPONSE}:{`))try{let n=JSON.parse(u.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new ErrorResponseImpl(n.status,n.statusText,n.data)}catch{}}function useHref(u,{relative:n}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:f}=reactExports.useContext(NavigationContext),{hash:d,pathname:y,search:_}=useResolvedPath(u,{relative:n}),A=y;return s!=="/"&&(A=y==="/"?s:joinPaths([s,y])),f.createHref({pathname:A,search:_,hash:d})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(u){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(u)}function useNavigate(){let{isDataRoute:u}=reactExports.useContext(RouteContext);return u?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let u=reactExports.useContext(DataRouterContext),{basename:n,navigator:s}=reactExports.useContext(NavigationContext),{matches:f}=reactExports.useContext(RouteContext),{pathname:d}=useLocation(),y=JSON.stringify(getResolveToMatches(f)),_=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{_.current=!0}),reactExports.useCallback((R,I={})=>{if(warning(_.current,navigateEffectWarning),!_.current)return;if(typeof R=="number"){s.go(R);return}let G=resolveTo(R,JSON.parse(y),d,I.relative==="path");u==null&&n!=="/"&&(G.pathname=G.pathname==="/"?n:joinPaths([n,G.pathname])),(I.replace?s.replace:s.push)(G,I.state,I)},[n,s,y,d,u])}reactExports.createContext(null);function useResolvedPath(u,{relative:n}={}){let{matches:s}=reactExports.useContext(RouteContext),{pathname:f}=useLocation(),d=JSON.stringify(getResolveToMatches(s));return reactExports.useMemo(()=>resolveTo(u,JSON.parse(d),f,n==="path"),[u,d,f,n])}function useRoutes(u,n){return useRoutesImpl(u,n)}function useRoutesImpl(u,n,s,f,d){var ie;invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:y}=reactExports.useContext(NavigationContext),{matches:_}=reactExports.useContext(RouteContext),A=_[_.length-1],R=A?A.params:{},I=A?A.pathname:"/",G=A?A.pathnameBase:"/",Y=A&&A.route;{let re=Y&&Y.path||"";warningOnce(I,!Y||re.endsWith("*")||re.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${I}" (under <Route path="${re}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${re}"> to <Route path="${re==="/"?"*":`${re}/*`}">.`)}let q=useLocation(),K;if(n){let re=typeof n=="string"?parsePath(n):n;invariant(G==="/"||((ie=re.pathname)==null?void 0:ie.startsWith(G)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${G}" but pathname "${re.pathname}" was given in the \`location\` prop.`),K=re}else K=q;let Q=K.pathname||"/",ne=Q;if(G!=="/"){let re=G.replace(/^\//,"").split("/");ne="/"+Q.replace(/^\//,"").split("/").slice(re.length).join("/")}let te=matchRoutes(u,{pathname:ne});warning(Y||te!=null,`No routes matched location "${K.pathname}${K.search}${K.hash}" `),warning(te==null||te[te.length-1].route.element!==void 0||te[te.length-1].route.Component!==void 0||te[te.length-1].route.lazy!==void 0,`Matched leaf route at location "${K.pathname}${K.search}${K.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let J=_renderMatches(te&&te.map(re=>Object.assign({},re,{params:Object.assign({},R,re.params),pathname:joinPaths([G,y.encodeLocation?y.encodeLocation(re.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:re.pathname]),pathnameBase:re.pathnameBase==="/"?G:joinPaths([G,y.encodeLocation?y.encodeLocation(re.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:re.pathnameBase])})),_,s,f,d);return n&&J?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...K},navigationType:"POP"}},J):J}function DefaultErrorComponent(){let u=useRouteError(),n=isRouteErrorResponse(u)?`${u.status} ${u.statusText}`:u instanceof Error?u.message:JSON.stringify(u),s=u instanceof Error?u.stack:null,f="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:f},y={padding:"2px 4px",backgroundColor:f},_=null;return console.error("Error handled by React Router default ErrorBoundary:",u),_=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:y},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:y},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},n),s?reactExports.createElement("pre",{style:d},s):null,_)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(u){super(u),this.state={location:u.location,revalidation:u.revalidation,error:u.error}}static getDerivedStateFromError(u){return{error:u}}static getDerivedStateFromProps(u,n){return n.location!==u.location||n.revalidation!=="idle"&&u.revalidation==="idle"?{error:u.error,location:u.location,revalidation:u.revalidation}:{error:u.error!==void 0?u.error:n.error,location:n.location,revalidation:u.revalidation||n.revalidation}}componentDidCatch(u,n){this.props.onError?this.props.onError(u,n):console.error("React Router caught the following error during render",u)}render(){let u=this.state.error;if(this.context&&typeof u=="object"&&u&&"digest"in u&&typeof u.digest=="string"){const s=decodeRouteErrorResponseDigest(u.digest);s&&(u=s)}let n=u!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:u,children:this.props.component})):this.props.children;return this.context?reactExports.createElement(RSCErrorHandler,{error:u},n):n}};RenderErrorBoundary.contextType=RSCRouterContext;var errorRedirectHandledMap=new WeakMap;function RSCErrorHandler({children:u,error:n}){let{basename:s}=reactExports.useContext(NavigationContext);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let f=decodeRedirectErrorDigest(n.digest);if(f){let d=errorRedirectHandledMap.get(n);if(d)throw d;let y=parseToInfo(f.location,s);if(isBrowser&&!errorRedirectHandledMap.get(n))if(y.isExternal||f.reloadDocument)window.location.href=y.absoluteURL||y.to;else{const _=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(y.to,{replace:f.replace}));throw errorRedirectHandledMap.set(n,_),_}return reactExports.createElement("meta",{httpEquiv:"refresh",content:`0;url=${y.absoluteURL||y.to}`})}}return u}function RenderedRoute({routeContext:u,match:n,children:s}){let f=reactExports.useContext(DataRouterContext);return f&&f.static&&f.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(f.staticContext._deepestRenderedBoundaryId=n.route.id),reactExports.createElement(RouteContext.Provider,{value:u},s)}function _renderMatches(u,n=[],s=null,f=null,d=null){if(u==null){if(!s)return null;if(s.errors)u=s.matches;else if(n.length===0&&!s.initialized&&s.matches.length>0)u=s.matches;else return null}let y=u,_=s==null?void 0:s.errors;if(_!=null){let G=y.findIndex(Y=>Y.route.id&&(_==null?void 0:_[Y.route.id])!==void 0);invariant(G>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(_).join(",")}`),y=y.slice(0,Math.min(y.length,G+1))}let A=!1,R=-1;if(s)for(let G=0;G<y.length;G++){let Y=y[G];if((Y.route.HydrateFallback||Y.route.hydrateFallbackElement)&&(R=G),Y.route.id){let{loaderData:q,errors:K}=s,Q=Y.route.loader&&!q.hasOwnProperty(Y.route.id)&&(!K||K[Y.route.id]===void 0);if(Y.route.lazy||Q){A=!0,R>=0?y=y.slice(0,R+1):y=[y[0]];break}}}let I=s&&f?(G,Y)=>{var q,K;f(G,{location:s.location,params:((K=(q=s.matches)==null?void 0:q[0])==null?void 0:K.params)??{},unstable_pattern:getRoutePattern(s.matches),errorInfo:Y})}:void 0;return y.reduceRight((G,Y,q)=>{let K,Q=!1,ne=null,te=null;s&&(K=_&&Y.route.id?_[Y.route.id]:void 0,ne=Y.route.errorElement||defaultErrorElement,A&&(R<0&&q===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Q=!0,te=null):R===q&&(Q=!0,te=Y.route.hydrateFallbackElement||null)));let J=n.concat(y.slice(0,q+1)),ie=()=>{let re;return K?re=ne:Q?re=te:Y.route.Component?re=reactExports.createElement(Y.route.Component,null):Y.route.element?re=Y.route.element:re=G,reactExports.createElement(RenderedRoute,{match:Y,routeContext:{outlet:G,matches:J,isDataRoute:s!=null},children:re})};return s&&(Y.route.ErrorBoundary||Y.route.errorElement||q===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:ne,error:K,children:ie(),routeContext:{outlet:null,matches:J,isDataRoute:!0},onError:I}):ie()},null)}function getDataRouterConsoleError(u){return`${u} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(u){let n=reactExports.useContext(DataRouterContext);return invariant(n,getDataRouterConsoleError(u)),n}function useDataRouterState(u){let n=reactExports.useContext(DataRouterStateContext);return invariant(n,getDataRouterConsoleError(u)),n}function useRouteContext(u){let n=reactExports.useContext(RouteContext);return invariant(n,getDataRouterConsoleError(u)),n}function useCurrentRouteId(u){let n=useRouteContext(u),s=n.matches[n.matches.length-1];return invariant(s.route.id,`${u} can only be used on routes that contain a unique "id"`),s.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var f;let u=reactExports.useContext(RouteErrorContext),n=useDataRouterState("useRouteError"),s=useCurrentRouteId("useRouteError");return u!==void 0?u:(f=n.errors)==null?void 0:f[s]}function useNavigateStable(){let{router:u}=useDataRouterContext("useNavigate"),n=useCurrentRouteId("useNavigate"),s=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{s.current=!0}),reactExports.useCallback(async(d,y={})=>{warning(s.current,navigateEffectWarning),s.current&&(typeof d=="number"?await u.navigate(d):await u.navigate(d,{fromRouteId:n,...y}))},[u,n])}var alreadyWarned={};function warningOnce(u,n,s){!n&&!alreadyWarned[u]&&(alreadyWarned[u]=!0,warning(!1,s))}reactExports.memo(DataRoutes);function DataRoutes({routes:u,future:n,state:s,onError:f}){return useRoutesImpl(u,void 0,s,f,n)}function Navigate({to:u,replace:n,state:s,relative:f}){invariant(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:d}=reactExports.useContext(NavigationContext);warning(!d,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:y}=reactExports.useContext(RouteContext),{pathname:_}=useLocation(),A=useNavigate(),R=resolveTo(u,getResolveToMatches(y),_,f==="path"),I=JSON.stringify(R);return reactExports.useEffect(()=>{A(JSON.parse(I),{replace:n,state:s,relative:f})},[A,I,f,n,s]),null}function Route(u){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:u="/",children:n=null,location:s,navigationType:f="POP",navigator:d,static:y=!1,unstable_useTransitions:_}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let A=u.replace(/^\/*/,"/"),R=reactExports.useMemo(()=>({basename:A,navigator:d,static:y,unstable_useTransitions:_,future:{}}),[A,d,y,_]);typeof s=="string"&&(s=parsePath(s));let{pathname:I="/",search:G="",hash:Y="",state:q=null,key:K="default"}=s,Q=reactExports.useMemo(()=>{let ne=stripBasename(I,A);return ne==null?null:{location:{pathname:ne,search:G,hash:Y,state:q,key:K},navigationType:f}},[A,I,G,Y,q,K,f]);return warning(Q!=null,`<Router basename="${A}"> is not able to match the URL "${I}${G}${Y}" because it does not start with the basename, so the <Router> won't render anything.`),Q==null?null:reactExports.createElement(NavigationContext.Provider,{value:R},reactExports.createElement(LocationContext.Provider,{children:n,value:Q}))}function Routes({children:u,location:n}){return useRoutes(createRoutesFromChildren(u),n)}function createRoutesFromChildren(u,n=[]){let s=[];return reactExports.Children.forEach(u,(f,d)=>{if(!reactExports.isValidElement(f))return;let y=[...n,d];if(f.type===reactExports.Fragment){s.push.apply(s,createRoutesFromChildren(f.props.children,y));return}invariant(f.type===Route,`[${typeof f.type=="string"?f.type:f.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!f.props.index||!f.props.children,"An index route cannot have child routes.");let _={id:f.props.id||y.join("-"),caseSensitive:f.props.caseSensitive,element:f.props.element,Component:f.props.Component,index:f.props.index,path:f.props.path,middleware:f.props.middleware,loader:f.props.loader,action:f.props.action,hydrateFallbackElement:f.props.hydrateFallbackElement,HydrateFallback:f.props.HydrateFallback,errorElement:f.props.errorElement,ErrorBoundary:f.props.ErrorBoundary,hasErrorBoundary:f.props.hasErrorBoundary===!0||f.props.ErrorBoundary!=null||f.props.errorElement!=null,shouldRevalidate:f.props.shouldRevalidate,handle:f.props.handle,lazy:f.props.lazy};f.props.children&&(_.children=createRoutesFromChildren(f.props.children,y)),s.push(_)}),s}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(u){return typeof HTMLElement<"u"&&u instanceof HTMLElement}function isButtonElement(u){return isHtmlElement(u)&&u.tagName.toLowerCase()==="button"}function isFormElement(u){return isHtmlElement(u)&&u.tagName.toLowerCase()==="form"}function isInputElement(u){return isHtmlElement(u)&&u.tagName.toLowerCase()==="input"}function isModifiedEvent(u){return!!(u.metaKey||u.altKey||u.ctrlKey||u.shiftKey)}function shouldProcessLinkClick(u,n){return u.button===0&&(!n||n==="_self")&&!isModifiedEvent(u)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(u){return u!=null&&!supportedFormEncTypes.has(u)?(warning(!1,`"${u}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):u}function getFormSubmissionInfo(u,n){let s,f,d,y,_;if(isFormElement(u)){let A=u.getAttribute("action");f=A?stripBasename(A,n):null,s=u.getAttribute("method")||defaultMethod,d=getFormEncType(u.getAttribute("enctype"))||defaultEncType,y=new FormData(u)}else if(isButtonElement(u)||isInputElement(u)&&(u.type==="submit"||u.type==="image")){let A=u.form;if(A==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let R=u.getAttribute("formaction")||A.getAttribute("action");if(f=R?stripBasename(R,n):null,s=u.getAttribute("formmethod")||A.getAttribute("method")||defaultMethod,d=getFormEncType(u.getAttribute("formenctype"))||getFormEncType(A.getAttribute("enctype"))||defaultEncType,y=new FormData(A,u),!isFormDataSubmitterSupported()){let{name:I,type:G,value:Y}=u;if(G==="image"){let q=I?`${I}.`:"";y.append(`${q}x`,"0"),y.append(`${q}y`,"0")}else I&&y.append(I,Y)}}else{if(isHtmlElement(u))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=defaultMethod,f=null,d=defaultEncType,_=u}return y&&d==="text/plain"&&(_=y,y=void 0),{action:f,method:s.toLowerCase(),encType:d,formData:y,body:_}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(u,n){if(u===!1||u===null||typeof u>"u")throw new Error(n)}function singleFetchUrl(u,n,s,f){let d=typeof u=="string"?new URL(u,typeof window>"u"?"server://singlefetch/":window.location.origin):u;return s?d.pathname.endsWith("/")?d.pathname=`${d.pathname}_.${f}`:d.pathname=`${d.pathname}.${f}`:d.pathname==="/"?d.pathname=`_root.${f}`:n&&stripBasename(d.pathname,n)==="/"?d.pathname=`${n.replace(/\/$/,"")}/_root.${f}`:d.pathname=`${d.pathname.replace(/\/$/,"")}.${f}`,d}async function loadRouteModule(u,n){if(u.id in n)return n[u.id];try{let s=await import(u.module);return n[u.id]=s,s}catch(s){return console.error(`Error loading route module \`${u.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(u){return u==null?!1:u.href==null?u.rel==="preload"&&typeof u.imageSrcSet=="string"&&typeof u.imageSizes=="string":typeof u.rel=="string"&&typeof u.href=="string"}async function getKeyedPrefetchLinks(u,n,s){let f=await Promise.all(u.map(async d=>{let y=n.routes[d.route.id];if(y){let _=await loadRouteModule(y,s);return _.links?_.links():[]}return[]}));return dedupeLinkDescriptors(f.flat(1).filter(isHtmlLinkDescriptor).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function getNewMatchesForLinks(u,n,s,f,d,y){let _=(R,I)=>s[I]?R.route.id!==s[I].route.id:!0,A=(R,I)=>{var G;return s[I].pathname!==R.pathname||((G=s[I].route.path)==null?void 0:G.endsWith("*"))&&s[I].params["*"]!==R.params["*"]};return y==="assets"?n.filter((R,I)=>_(R,I)||A(R,I)):y==="data"?n.filter((R,I)=>{var Y;let G=f.routes[R.route.id];if(!G||!G.hasLoader)return!1;if(_(R,I)||A(R,I))return!0;if(R.route.shouldRevalidate){let q=R.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:((Y=s[0])==null?void 0:Y.params)||{},nextUrl:new URL(u,window.origin),nextParams:R.params,defaultShouldRevalidate:!0});if(typeof q=="boolean")return q}return!0}):[]}function getModuleLinkHrefs(u,n,{includeHydrateFallback:s}={}){return dedupeHrefs(u.map(f=>{let d=n.routes[f.route.id];if(!d)return[];let y=[d.module];return d.clientActionModule&&(y=y.concat(d.clientActionModule)),d.clientLoaderModule&&(y=y.concat(d.clientLoaderModule)),s&&d.hydrateFallbackModule&&(y=y.concat(d.hydrateFallbackModule)),d.imports&&(y=y.concat(d.imports)),y}).flat(1))}function dedupeHrefs(u){return[...new Set(u)]}function sortKeys(u){let n={},s=Object.keys(u).sort();for(let f of s)n[f]=u[f];return n}function dedupeLinkDescriptors(u,n){let s=new Set;return new Set(n),u.reduce((f,d)=>{let y=JSON.stringify(sortKeys(d));return s.has(y)||(s.add(y),f.push({key:y,link:d})),f},[])}function useDataRouterContext2(){let u=reactExports.useContext(DataRouterContext);return invariant2(u,"You must render this element inside a <DataRouterContext.Provider> element"),u}function useDataRouterStateContext(){let u=reactExports.useContext(DataRouterStateContext);return invariant2(u,"You must render this element inside a <DataRouterStateContext.Provider> element"),u}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let u=reactExports.useContext(FrameworkContext);return invariant2(u,"You must render this element inside a <HydratedRouter> element"),u}function usePrefetchBehavior(u,n){let s=reactExports.useContext(FrameworkContext),[f,d]=reactExports.useState(!1),[y,_]=reactExports.useState(!1),{onFocus:A,onBlur:R,onMouseEnter:I,onMouseLeave:G,onTouchStart:Y}=n,q=reactExports.useRef(null);reactExports.useEffect(()=>{if(u==="render"&&_(!0),u==="viewport"){let ne=J=>{J.forEach(ie=>{_(ie.isIntersecting)})},te=new IntersectionObserver(ne,{threshold:.5});return q.current&&te.observe(q.current),()=>{te.disconnect()}}},[u]),reactExports.useEffect(()=>{if(f){let ne=setTimeout(()=>{_(!0)},100);return()=>{clearTimeout(ne)}}},[f]);let K=()=>{d(!0)},Q=()=>{d(!1),_(!1)};return s?u!=="intent"?[y,q,{}]:[y,q,{onFocus:composeEventHandlers(A,K),onBlur:composeEventHandlers(R,Q),onMouseEnter:composeEventHandlers(I,K),onMouseLeave:composeEventHandlers(G,Q),onTouchStart:composeEventHandlers(Y,K)}]:[!1,q,{}]}function composeEventHandlers(u,n){return s=>{u&&u(s),s.defaultPrevented||n(s)}}function PrefetchPageLinks({page:u,...n}){let{router:s}=useDataRouterContext2(),f=reactExports.useMemo(()=>matchRoutes(s.routes,u,s.basename),[s.routes,u,s.basename]);return f?reactExports.createElement(PrefetchPageLinksImpl,{page:u,matches:f,...n}):null}function useKeyedPrefetchLinks(u){let{manifest:n,routeModules:s}=useFrameworkContext(),[f,d]=reactExports.useState([]);return reactExports.useEffect(()=>{let y=!1;return getKeyedPrefetchLinks(u,n,s).then(_=>{y||d(_)}),()=>{y=!0}},[u,n,s]),f}function PrefetchPageLinksImpl({page:u,matches:n,...s}){let f=useLocation(),{future:d,manifest:y,routeModules:_}=useFrameworkContext(),{basename:A}=useDataRouterContext2(),{loaderData:R,matches:I}=useDataRouterStateContext(),G=reactExports.useMemo(()=>getNewMatchesForLinks(u,n,I,y,f,"data"),[u,n,I,y,f]),Y=reactExports.useMemo(()=>getNewMatchesForLinks(u,n,I,y,f,"assets"),[u,n,I,y,f]),q=reactExports.useMemo(()=>{if(u===f.pathname+f.search+f.hash)return[];let ne=new Set,te=!1;if(n.forEach(ie=>{var le;let re=y.routes[ie.route.id];!re||!re.hasLoader||(!G.some(fe=>fe.route.id===ie.route.id)&&ie.route.id in R&&((le=_[ie.route.id])!=null&&le.shouldRevalidate)||re.hasClientLoader?te=!0:ne.add(ie.route.id))}),ne.size===0)return[];let J=singleFetchUrl(u,A,d.unstable_trailingSlashAwareDataRequests,"data");return te&&ne.size>0&&J.searchParams.set("_routes",n.filter(ie=>ne.has(ie.route.id)).map(ie=>ie.route.id).join(",")),[J.pathname+J.search]},[A,d.unstable_trailingSlashAwareDataRequests,R,f,y,G,n,u,_]),K=reactExports.useMemo(()=>getModuleLinkHrefs(Y,y),[Y,y]),Q=useKeyedPrefetchLinks(Y);return reactExports.createElement(reactExports.Fragment,null,q.map(ne=>reactExports.createElement("link",{key:ne,rel:"prefetch",as:"fetch",href:ne,...s})),K.map(ne=>reactExports.createElement("link",{key:ne,rel:"modulepreload",href:ne,...s})),Q.map(({key:ne,link:te})=>reactExports.createElement("link",{key:ne,nonce:s.nonce,...te,crossOrigin:te.crossOrigin??s.crossOrigin})))}function mergeRefs(...u){return n=>{u.forEach(s=>{typeof s=="function"?s(n):s!=null&&(s.current=n)})}}var isBrowser2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser2&&(window.__reactRouterVersion="7.13.0")}catch{}function BrowserRouter({basename:u,children:n,unstable_useTransitions:s,window:f}){let d=reactExports.useRef();d.current==null&&(d.current=createBrowserHistory({window:f,v5Compat:!0}));let y=d.current,[_,A]=reactExports.useState({action:y.action,location:y.location}),R=reactExports.useCallback(I=>{s===!1?A(I):reactExports.startTransition(()=>A(I))},[s]);return reactExports.useLayoutEffect(()=>y.listen(R),[y,R]),reactExports.createElement(Router,{basename:u,children:n,location:_.location,navigationType:_.action,navigator:y,unstable_useTransitions:s})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:n,discover:s="render",prefetch:f="none",relative:d,reloadDocument:y,replace:_,state:A,target:R,to:I,preventScrollReset:G,viewTransition:Y,unstable_defaultShouldRevalidate:q,...K},Q){let{basename:ne,unstable_useTransitions:te}=reactExports.useContext(NavigationContext),J=typeof I=="string"&&ABSOLUTE_URL_REGEX2.test(I),ie=parseToInfo(I,ne);I=ie.to;let re=useHref(I,{relative:d}),[le,fe,pe]=usePrefetchBehavior(f,K),de=useLinkClickHandler(I,{replace:_,state:A,target:R,preventScrollReset:G,relative:d,viewTransition:Y,unstable_defaultShouldRevalidate:q,unstable_useTransitions:te});function se(Se){n&&n(Se),Se.defaultPrevented||de(Se)}let he=reactExports.createElement("a",{...K,...pe,href:ie.absoluteURL||re,onClick:ie.isExternal||y?n:se,ref:mergeRefs(Q,fe),target:R,"data-discover":!J&&s==="render"?"true":void 0});return le&&!J?reactExports.createElement(reactExports.Fragment,null,he,reactExports.createElement(PrefetchPageLinks,{page:re})):he});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":n="page",caseSensitive:s=!1,className:f="",end:d=!1,style:y,to:_,viewTransition:A,children:R,...I},G){let Y=useResolvedPath(_,{relative:I.relative}),q=useLocation(),K=reactExports.useContext(DataRouterStateContext),{navigator:Q,basename:ne}=reactExports.useContext(NavigationContext),te=K!=null&&useViewTransitionState(Y)&&A===!0,J=Q.encodeLocation?Q.encodeLocation(Y).pathname:Y.pathname,ie=q.pathname,re=K&&K.navigation&&K.navigation.location?K.navigation.location.pathname:null;s||(ie=ie.toLowerCase(),re=re?re.toLowerCase():null,J=J.toLowerCase()),re&&ne&&(re=stripBasename(re,ne)||re);const le=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let fe=ie===J||!d&&ie.startsWith(J)&&ie.charAt(le)==="/",pe=re!=null&&(re===J||!d&&re.startsWith(J)&&re.charAt(J.length)==="/"),de={isActive:fe,isPending:pe,isTransitioning:te},se=fe?n:void 0,he;typeof f=="function"?he=f(de):he=[f,fe?"active":null,pe?"pending":null,te?"transitioning":null].filter(Boolean).join(" ");let Se=typeof y=="function"?y(de):y;return reactExports.createElement(Link,{...I,"aria-current":se,className:he,ref:G,style:Se,to:_,viewTransition:A},typeof R=="function"?R(de):R)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:u="render",fetcherKey:n,navigate:s,reloadDocument:f,replace:d,state:y,method:_=defaultMethod,action:A,onSubmit:R,relative:I,preventScrollReset:G,viewTransition:Y,unstable_defaultShouldRevalidate:q,...K},Q)=>{let{unstable_useTransitions:ne}=reactExports.useContext(NavigationContext),te=useSubmit(),J=useFormAction(A,{relative:I}),ie=_.toLowerCase()==="get"?"get":"post",re=typeof A=="string"&&ABSOLUTE_URL_REGEX2.test(A),le=fe=>{if(R&&R(fe),fe.defaultPrevented)return;fe.preventDefault();let pe=fe.nativeEvent.submitter,de=(pe==null?void 0:pe.getAttribute("formmethod"))||_,se=()=>te(pe||fe.currentTarget,{fetcherKey:n,method:de,navigate:s,replace:d,state:y,relative:I,preventScrollReset:G,viewTransition:Y,unstable_defaultShouldRevalidate:q});ne&&s!==!1?reactExports.startTransition(()=>se()):se()};return reactExports.createElement("form",{ref:Q,method:ie,action:J,onSubmit:f?R:le,...K,"data-discover":!re&&u==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(u){return`${u} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(u){let n=reactExports.useContext(DataRouterContext);return invariant(n,getDataRouterConsoleError2(u)),n}function useLinkClickHandler(u,{target:n,replace:s,state:f,preventScrollReset:d,relative:y,viewTransition:_,unstable_defaultShouldRevalidate:A,unstable_useTransitions:R}={}){let I=useNavigate(),G=useLocation(),Y=useResolvedPath(u,{relative:y});return reactExports.useCallback(q=>{if(shouldProcessLinkClick(q,n)){q.preventDefault();let K=s!==void 0?s:createPath(G)===createPath(Y),Q=()=>I(u,{replace:K,state:f,preventScrollReset:d,relative:y,viewTransition:_,unstable_defaultShouldRevalidate:A});R?reactExports.startTransition(()=>Q()):Q()}},[G,I,Y,s,f,n,u,d,y,_,A,R])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:u}=useDataRouterContext3("useSubmit"),{basename:n}=reactExports.useContext(NavigationContext),s=useRouteId(),f=u.fetch,d=u.navigate;return reactExports.useCallback(async(y,_={})=>{let{action:A,method:R,encType:I,formData:G,body:Y}=getFormSubmissionInfo(y,n);if(_.navigate===!1){let q=_.fetcherKey||getUniqueFetcherId();await f(q,s,_.action||A,{unstable_defaultShouldRevalidate:_.unstable_defaultShouldRevalidate,preventScrollReset:_.preventScrollReset,formData:G,body:Y,formMethod:_.method||R,formEncType:_.encType||I,flushSync:_.flushSync})}else await d(_.action||A,{unstable_defaultShouldRevalidate:_.unstable_defaultShouldRevalidate,preventScrollReset:_.preventScrollReset,formData:G,body:Y,formMethod:_.method||R,formEncType:_.encType||I,replace:_.replace,state:_.state,fromRouteId:s,flushSync:_.flushSync,viewTransition:_.viewTransition})},[f,d,n,s])}function useFormAction(u,{relative:n}={}){let{basename:s}=reactExports.useContext(NavigationContext),f=reactExports.useContext(RouteContext);invariant(f,"useFormAction must be used inside a RouteContext");let[d]=f.matches.slice(-1),y={...useResolvedPath(u||".",{relative:n})},_=useLocation();if(u==null){y.search=_.search;let A=new URLSearchParams(y.search),R=A.getAll("index");if(R.some(G=>G==="")){A.delete("index"),R.filter(Y=>Y).forEach(Y=>A.append("index",Y));let G=A.toString();y.search=G?`?${G}`:""}}return(!u||u===".")&&d.route.index&&(y.search=y.search?y.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(y.pathname=y.pathname==="/"?s:joinPaths([s,y.pathname])),createPath(y)}function useViewTransitionState(u,{relative:n}={}){let s=reactExports.useContext(ViewTransitionContext);invariant(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:f}=useDataRouterContext3("useViewTransitionState"),d=useResolvedPath(u,{relative:n});if(!s.isTransitioning)return!1;let y=stripBasename(s.currentLocation.pathname,f)||s.currentLocation.pathname,_=stripBasename(s.nextLocation.pathname,f)||s.nextLocation.pathname;return matchPath(d.pathname,_)!=null||matchPath(d.pathname,y)!=null}const getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(u){const n=[];let s=0;for(let f=0;f<u.length;f++){let d=u.charCodeAt(f);d<128?n[s++]=d:d<2048?(n[s++]=d>>6|192,n[s++]=d&63|128):(d&64512)===55296&&f+1<u.length&&(u.charCodeAt(f+1)&64512)===56320?(d=65536+((d&1023)<<10)+(u.charCodeAt(++f)&1023),n[s++]=d>>18|240,n[s++]=d>>12&63|128,n[s++]=d>>6&63|128,n[s++]=d&63|128):(n[s++]=d>>12|224,n[s++]=d>>6&63|128,n[s++]=d&63|128)}return n},byteArrayToString=function(u){const n=[];let s=0,f=0;for(;s<u.length;){const d=u[s++];if(d<128)n[f++]=String.fromCharCode(d);else if(d>191&&d<224){const y=u[s++];n[f++]=String.fromCharCode((d&31)<<6|y&63)}else if(d>239&&d<365){const y=u[s++],_=u[s++],A=u[s++],R=((d&7)<<18|(y&63)<<12|(_&63)<<6|A&63)-65536;n[f++]=String.fromCharCode(55296+(R>>10)),n[f++]=String.fromCharCode(56320+(R&1023))}else{const y=u[s++],_=u[s++];n[f++]=String.fromCharCode((d&15)<<12|(y&63)<<6|_&63)}}return n.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(u,n){if(!Array.isArray(u))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,f=[];for(let d=0;d<u.length;d+=3){const y=u[d],_=d+1<u.length,A=_?u[d+1]:0,R=d+2<u.length,I=R?u[d+2]:0,G=y>>2,Y=(y&3)<<4|A>>4;let q=(A&15)<<2|I>>6,K=I&63;R||(K=64,_||(q=64)),f.push(s[G],s[Y],s[q],s[K])}return f.join("")},encodeString(u,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(u):this.encodeByteArray(stringToByteArray$1(u),n)},decodeString(u,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(u):byteArrayToString(this.decodeStringToByteArray(u,n))},decodeStringToByteArray(u,n){this.init_();const s=n?this.charToByteMapWebSafe_:this.charToByteMap_,f=[];for(let d=0;d<u.length;){const y=s[u.charAt(d++)],A=d<u.length?s[u.charAt(d)]:0;++d;const I=d<u.length?s[u.charAt(d)]:64;++d;const Y=d<u.length?s[u.charAt(d)]:64;if(++d,y==null||A==null||I==null||Y==null)throw new DecodeBase64StringError;const q=y<<2|A>>4;if(f.push(q),I!==64){const K=A<<4&240|I>>2;if(f.push(K),Y!==64){const Q=I<<6&192|Y;f.push(Q)}}}return f},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let u=0;u<this.ENCODED_VALS.length;u++)this.byteToCharMap_[u]=this.ENCODED_VALS.charAt(u),this.charToByteMap_[this.byteToCharMap_[u]]=u,this.byteToCharMapWebSafe_[u]=this.ENCODED_VALS_WEBSAFE.charAt(u),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[u]]=u,u>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(u)]=u,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(u)]=u)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(u){const n=stringToByteArray$1(u);return base64.encodeByteArray(n,!0)},base64urlEncodeWithoutPadding=function(u){return base64Encode(u).replace(/\./g,"")},base64Decode=function(u){try{return base64.decodeString(u,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const u=define_process_env_default.__FIREBASE_DEFAULTS__;if(u)return JSON.parse(u)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let u;try{u=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const n=u&&base64Decode(u[1]);return n&&JSON.parse(n)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(u){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${u}`);return}},getDefaultEmulatorHost=u=>{var n,s;return(s=(n=getDefaults())==null?void 0:n.emulatorHosts)==null?void 0:s[u]},getDefaultEmulatorHostnameAndPort=u=>{const n=getDefaultEmulatorHost(u);if(!n)return;const s=n.lastIndexOf(":");if(s<=0||s+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);const f=parseInt(n.substring(s+1),10);return n[0]==="["?[n.substring(1,s-1),f]:[n.substring(0,s),f]},getDefaultAppConfig=()=>{var u;return(u=getDefaults())==null?void 0:u.config},getExperimentalSetting=u=>{var n;return(n=getDefaults())==null?void 0:n[`_${u}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,s)=>{this.resolve=n,this.reject=s})}wrapCallback(n){return(s,f)=>{s?this.reject(s):this.resolve(f),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(s):n(s,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(u){try{return(u.startsWith("http://")||u.startsWith("https://")?new URL(u).hostname:u).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(u){return(await fetch(u,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(u,n){if(u.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},f=n||"demo-project",d=u.iat||0,y=u.sub||u.user_id;if(!y)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _={iss:`https://securetoken.google.com/${f}`,aud:f,iat:d,exp:d+3600,auth_time:d,sub:y,user_id:y,firebase:{sign_in_provider:"custom",identities:{}},...u};return[base64urlEncodeWithoutPadding(JSON.stringify(s)),base64urlEncodeWithoutPadding(JSON.stringify(_)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const u={prod:[],emulator:[]};for(const n of Object.keys(emulatorStatus))emulatorStatus[n]?u.emulator.push(n):u.prod.push(n);return u}function getOrCreateEl(u){let n=document.getElementById(u),s=!1;return n||(n=document.createElement("div"),n.setAttribute("id",u),s=!0),{created:s,element:n}}let previouslyDismissed=!1;function updateEmulatorBanner(u,n){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[u]===n||emulatorStatus[u]||previouslyDismissed)return;emulatorStatus[u]=n;function s(q){return`__firebase__banner__${q}`}const f="__firebase__banner",y=getEmulatorSummary().prod.length>0;function _(){const q=document.getElementById(f);q&&q.remove()}function A(q){q.style.display="flex",q.style.background="#7faaf0",q.style.position="fixed",q.style.bottom="5px",q.style.left="5px",q.style.padding=".5em",q.style.borderRadius="5px",q.style.alignItems="center"}function R(q,K){q.setAttribute("width","24"),q.setAttribute("id",K),q.setAttribute("height","24"),q.setAttribute("viewBox","0 0 24 24"),q.setAttribute("fill","none"),q.style.marginLeft="-6px"}function I(){const q=document.createElement("span");return q.style.cursor="pointer",q.style.marginLeft="16px",q.style.fontSize="24px",q.innerHTML=" &times;",q.onclick=()=>{previouslyDismissed=!0,_()},q}function G(q,K){q.setAttribute("id",K),q.innerText="Learn more",q.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",q.setAttribute("target","__blank"),q.style.paddingLeft="5px",q.style.textDecoration="underline"}function Y(){const q=getOrCreateEl(f),K=s("text"),Q=document.getElementById(K)||document.createElement("span"),ne=s("learnmore"),te=document.getElementById(ne)||document.createElement("a"),J=s("preprendIcon"),ie=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(q.created){const re=q.element;A(re),G(te,ne);const le=I();R(ie,J),re.append(ie,Q,te,le),document.body.appendChild(re)}y?(Q.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",K)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",Y):Y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){var n;const u=(n=getDefaults())==null?void 0:n.forceEnvironment;if(u==="node")return!0;if(u==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const u=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof u=="object"&&u.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const u=getUA();return u.indexOf("MSIE ")>=0||u.indexOf("Trident/")>=0}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((u,n)=>{try{let s=!0;const f="validate-browser-context-for-indexeddb-analytics-module",d=self.indexedDB.open(f);d.onsuccess=()=>{d.result.close(),s||self.indexedDB.deleteDatabase(f),u(!0)},d.onupgradeneeded=()=>{s=!1},d.onerror=()=>{var y;n(((y=d.error)==null?void 0:y.message)||"")}}catch(s){n(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(n,s,f){super(s),this.code=n,this.customData=f,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(n,s,f){this.service=n,this.serviceName=s,this.errors=f}create(n,...s){const f=s[0]||{},d=`${this.service}/${n}`,y=this.errors[n],_=y?replaceTemplate(y,f):"Error",A=`${this.serviceName}: ${_} (${d}).`;return new FirebaseError(d,A,f)}}function replaceTemplate(u,n){return u.replace(PATTERN,(s,f)=>{const d=n[f];return d!=null?String(d):`<${f}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$1(u){for(const n in u)if(Object.prototype.hasOwnProperty.call(u,n))return!1;return!0}function deepEqual(u,n){if(u===n)return!0;const s=Object.keys(u),f=Object.keys(n);for(const d of s){if(!f.includes(d))return!1;const y=u[d],_=n[d];if(isObject(y)&&isObject(_)){if(!deepEqual(y,_))return!1}else if(y!==_)return!1}for(const d of f)if(!s.includes(d))return!1;return!0}function isObject(u){return u!==null&&typeof u=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(u){const n=[];for(const[s,f]of Object.entries(u))Array.isArray(f)?f.forEach(d=>{n.push(encodeURIComponent(s)+"="+encodeURIComponent(d))}):n.push(encodeURIComponent(s)+"="+encodeURIComponent(f));return n.length?"&"+n.join("&"):""}function querystringDecode(u){const n={};return u.replace(/^\?/,"").split("&").forEach(f=>{if(f){const[d,y]=f.split("=");n[decodeURIComponent(d)]=decodeURIComponent(y)}}),n}function extractQuerystring(u){const n=u.indexOf("?");if(!n)return"";const s=u.indexOf("#",n);return u.substring(n,s>0?s:void 0)}function createSubscribe(u,n){const s=new ObserverProxy(u,n);return s.subscribe.bind(s)}class ObserverProxy{constructor(n,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{n(this)}).catch(f=>{this.error(f)})}next(n){this.forEachObserver(s=>{s.next(n)})}error(n){this.forEachObserver(s=>{s.error(n)}),this.close(n)}complete(){this.forEachObserver(n=>{n.complete()}),this.close()}subscribe(n,s,f){let d;if(n===void 0&&s===void 0&&f===void 0)throw new Error("Missing Observer.");implementsAnyMethods(n,["next","error","complete"])?d=n:d={next:n,error:s,complete:f},d.next===void 0&&(d.next=noop),d.error===void 0&&(d.error=noop),d.complete===void 0&&(d.complete=noop);const y=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?d.error(this.finalError):d.complete()}catch{}}),this.observers.push(d),y}unsubscribeOne(n){this.observers===void 0||this.observers[n]===void 0||(delete this.observers[n],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(n){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,n)}sendOne(n,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[n]!==void 0)try{s(this.observers[n])}catch(f){typeof console<"u"&&console.error&&console.error(f)}})}close(n){this.finalized||(this.finalized=!0,n!==void 0&&(this.finalError=n),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(u,n){if(typeof u!="object"||u===null)return!1;for(const s of n)if(s in u&&typeof u[s]=="function")return!0;return!1}function noop(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(u){return u&&u._delegate?u._delegate:u}class Component{constructor(n,s,f){this.name=n,this.instanceFactory=s,this.type=f,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Provider$1=class{constructor(n,s){this.name=n,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const s=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(s)){const f=new Deferred;if(this.instancesDeferred.set(s,f),this.isInitialized(s)||this.shouldAutoInitialize())try{const d=this.getOrInitializeService({instanceIdentifier:s});d&&f.resolve(d)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(n){const s=this.normalizeInstanceIdentifier(n==null?void 0:n.identifier),f=(n==null?void 0:n.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(d){if(f)return null;throw d}else{if(f)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(isComponentEager(n))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[s,f]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(s);try{const y=this.getOrInitializeService({instanceIdentifier:d});f.resolve(y)}catch{}}}}clearInstance(n=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}async delete(){const n=Array.from(this.instances.values());await Promise.all([...n.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...n.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(n=DEFAULT_ENTRY_NAME$1){return this.instances.has(n)}getOptions(n=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(n)||{}}initialize(n={}){const{options:s={}}=n,f=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(f))throw Error(`${this.name}(${f}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const d=this.getOrInitializeService({instanceIdentifier:f,options:s});for(const[y,_]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(y);f===A&&_.resolve(d)}return d}onInit(n,s){const f=this.normalizeInstanceIdentifier(s),d=this.onInitCallbacks.get(f)??new Set;d.add(n),this.onInitCallbacks.set(f,d);const y=this.instances.get(f);return y&&n(y,f),()=>{d.delete(n)}}invokeOnInitCallbacks(n,s){const f=this.onInitCallbacks.get(s);if(f)for(const d of f)try{d(n,s)}catch{}}getOrInitializeService({instanceIdentifier:n,options:s={}}){let f=this.instances.get(n);if(!f&&this.component&&(f=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(n),options:s}),this.instances.set(n,f),this.instancesOptions.set(n,s),this.invokeOnInitCallbacks(f,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,f)}catch{}return f||null}normalizeInstanceIdentifier(n=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?n:DEFAULT_ENTRY_NAME$1:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function normalizeIdentifierForFactory(u){return u===DEFAULT_ENTRY_NAME$1?void 0:u}function isComponentEager(u){return u.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(n){this.name=n,this.providers=new Map}addComponent(n){const s=this.getProvider(n.name);if(s.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);s.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const s=new Provider$1(n,this);return this.providers.set(n,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(u){u[u.DEBUG=0]="DEBUG",u[u.VERBOSE=1]="VERBOSE",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(u,n,...s)=>{if(n<u.logLevel)return;const f=new Date().toISOString(),d=ConsoleMethod[n];if(d)console[d](`[${f}]  ${u.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)};class Logger{constructor(n){this.name=n,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in LogLevel))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?levelStringToEnum[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...n),this._logHandler(this,LogLevel.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...n),this._logHandler(this,LogLevel.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...n),this._logHandler(this,LogLevel.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...n),this._logHandler(this,LogLevel.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...n),this._logHandler(this,LogLevel.ERROR,...n)}}const instanceOfAny=(u,n)=>n.some(s=>u instanceof s);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(u){const n=new Promise((s,f)=>{const d=()=>{u.removeEventListener("success",y),u.removeEventListener("error",_)},y=()=>{s(wrap(u.result)),d()},_=()=>{f(u.error),d()};u.addEventListener("success",y),u.addEventListener("error",_)});return n.then(s=>{s instanceof IDBCursor&&cursorRequestMap.set(s,u)}).catch(()=>{}),reverseTransformCache.set(n,u),n}function cacheDonePromiseForTransaction(u){if(transactionDoneMap.has(u))return;const n=new Promise((s,f)=>{const d=()=>{u.removeEventListener("complete",y),u.removeEventListener("error",_),u.removeEventListener("abort",_)},y=()=>{s(),d()},_=()=>{f(u.error||new DOMException("AbortError","AbortError")),d()};u.addEventListener("complete",y),u.addEventListener("error",_),u.addEventListener("abort",_)});transactionDoneMap.set(u,n)}let idbProxyTraps={get(u,n,s){if(u instanceof IDBTransaction){if(n==="done")return transactionDoneMap.get(u);if(n==="objectStoreNames")return u.objectStoreNames||transactionStoreNamesMap.get(u);if(n==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return wrap(u[n])},set(u,n,s){return u[n]=s,!0},has(u,n){return u instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in u}};function replaceTraps(u){idbProxyTraps=u(idbProxyTraps)}function wrapFunction(u){return u===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...s){const f=u.call(unwrap(this),n,...s);return transactionStoreNamesMap.set(f,n.sort?n.sort():[n]),wrap(f)}:getCursorAdvanceMethods().includes(u)?function(...n){return u.apply(unwrap(this),n),wrap(cursorRequestMap.get(this))}:function(...n){return wrap(u.apply(unwrap(this),n))}}function transformCachableValue(u){return typeof u=="function"?wrapFunction(u):(u instanceof IDBTransaction&&cacheDonePromiseForTransaction(u),instanceOfAny(u,getIdbProxyableTypes())?new Proxy(u,idbProxyTraps):u)}function wrap(u){if(u instanceof IDBRequest)return promisifyRequest(u);if(transformCache.has(u))return transformCache.get(u);const n=transformCachableValue(u);return n!==u&&(transformCache.set(u,n),reverseTransformCache.set(n,u)),n}const unwrap=u=>reverseTransformCache.get(u);function openDB(u,n,{blocked:s,upgrade:f,blocking:d,terminated:y}={}){const _=indexedDB.open(u,n),A=wrap(_);return f&&_.addEventListener("upgradeneeded",R=>{f(wrap(_.result),R.oldVersion,R.newVersion,wrap(_.transaction),R)}),s&&_.addEventListener("blocked",R=>s(R.oldVersion,R.newVersion,R)),A.then(R=>{y&&R.addEventListener("close",()=>y()),d&&R.addEventListener("versionchange",I=>d(I.oldVersion,I.newVersion,I))}).catch(()=>{}),A}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(u,n){if(!(u instanceof IDBDatabase&&!(n in u)&&typeof n=="string"))return;if(cachedMethods.get(n))return cachedMethods.get(n);const s=n.replace(/FromIndex$/,""),f=n!==s,d=writeMethods.includes(s);if(!(s in(f?IDBIndex:IDBObjectStore).prototype)||!(d||readMethods.includes(s)))return;const y=async function(_,...A){const R=this.transaction(_,d?"readwrite":"readonly");let I=R.store;return f&&(I=I.index(A.shift())),(await Promise.all([I[s](...A),d&&R.done]))[0]};return cachedMethods.set(n,y),y}replaceTraps(u=>({...u,get:(n,s,f)=>getMethod(n,s)||u.get(n,s,f),has:(n,s)=>!!getMethod(n,s)||u.has(n,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(isVersionServiceProvider(s)){const f=s.getImmediate();return`${f.library}/${f.version}`}else return null}).filter(s=>s).join(" ")}}function isVersionServiceProvider(u){const n=u.getComponent();return(n==null?void 0:n.type)==="VERSION"}const name$q="@firebase/app",version$1$1="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$3="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(u,n){try{u.container.addComponent(n)}catch(s){logger.debug(`Component ${n.name} failed to register with FirebaseApp ${u.name}`,s)}}function _registerComponent(u){const n=u.name;if(_components.has(n))return logger.debug(`There were multiple attempts to register component ${n}.`),!1;_components.set(n,u);for(const s of _apps.values())_addComponent(s,u);for(const s of _serverApps.values())_addComponent(s,u);return!0}function _getProvider(u,n){const s=u.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),u.container.getProvider(n)}function _isFirebaseServerApp(u){return u==null?!1:u.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(n,s,f){this._isDeleted=!1,this._options={...n},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=f,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$3;function initializeApp(u,n={}){let s=u;typeof n!="object"&&(n={name:n});const f={name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0,...n},d=f.name;if(typeof d!="string"||!d)throw ERROR_FACTORY.create("bad-app-name",{appName:String(d)});if(s||(s=getDefaultAppConfig()),!s)throw ERROR_FACTORY.create("no-options");const y=_apps.get(d);if(y){if(deepEqual(s,y.options)&&deepEqual(f,y.config))return y;throw ERROR_FACTORY.create("duplicate-app",{appName:d})}const _=new ComponentContainer(d);for(const R of _components.values())_.addComponent(R);const A=new FirebaseAppImpl(s,f,_);return _apps.set(d,A),A}function getApp(u=DEFAULT_ENTRY_NAME){const n=_apps.get(u);if(!n&&u===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!n)throw ERROR_FACTORY.create("no-app",{appName:u});return n}function getApps(){return Array.from(_apps.values())}function registerVersion(u,n,s){let f=PLATFORM_LOG_STRING[u]??u;s&&(f+=`-${s}`);const d=f.match(/\s|\//),y=n.match(/\s|\//);if(d||y){const _=[`Unable to register library "${f}" with version "${n}":`];d&&_.push(`library name "${f}" contains illegal characters (whitespace or "/")`),d&&y&&_.push("and"),y&&_.push(`version name "${n}" contains illegal characters (whitespace or "/")`),logger.warn(_.join(" "));return}_registerComponent(new Component(`${f}-version`,()=>({library:f,version:n}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(u,n)=>{switch(n){case 0:try{u.createObjectStore(STORE_NAME)}catch(s){console.warn(s)}}}}).catch(u=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:u.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(u){try{const s=(await getDbPromise()).transaction(STORE_NAME),f=await s.objectStore(STORE_NAME).get(computeKey(u));return await s.done,f}catch(n){if(n instanceof FirebaseError)logger.warn(n.message);else{const s=ERROR_FACTORY.create("idb-get",{originalErrorMessage:n==null?void 0:n.message});logger.warn(s.message)}}}async function writeHeartbeatsToIndexedDB(u,n){try{const f=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await f.objectStore(STORE_NAME).put(n,computeKey(u)),await f.done}catch(s){if(s instanceof FirebaseError)logger.warn(s.message);else{const f=ERROR_FACTORY.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});logger.warn(f.message)}}}function computeKey(u){return`${u.name}!${u.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(n){this.container=n,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(s),this._heartbeatsCachePromise=this._storage.read().then(f=>(this._heartbeatsCache=f,f))}async triggerHeartbeat(){var n,s;try{const d=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),y=getUTCDateString();if(((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===y||this._heartbeatsCache.heartbeats.some(_=>_.date===y))return;if(this._heartbeatsCache.heartbeats.push({date:y,agent:d}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const _=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(_,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(f){logger.warn(f)}}async getHeartbeatsHeader(){var n;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=getUTCDateString(),{heartbeatsToSend:f,unsentEntries:d}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),y=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:f}));return this._heartbeatsCache.lastSentHeartbeatDate=s,d.length>0?(this._heartbeatsCache.heartbeats=d,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),y}catch(s){return logger.warn(s),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(u,n=MAX_HEADER_BYTES){const s=[];let f=u.slice();for(const d of u){const y=s.find(_=>_.agent===d.agent);if(y){if(y.dates.push(d.date),countBytes(s)>n){y.dates.pop();break}}else if(s.push({agent:d.agent,dates:[d.date]}),countBytes(s)>n){s.pop();break}f=f.slice(1)}return{heartbeatsToSend:s,unsentEntries:f}}class HeartbeatStorageImpl{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await readHeartbeatsFromIndexedDB(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(n){if(await this._canUseIndexedDBPromise){const f=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:n.lastSentHeartbeatDate??f.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return}async add(n){if(await this._canUseIndexedDBPromise){const f=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:n.lastSentHeartbeatDate??f.lastSentHeartbeatDate,heartbeats:[...f.heartbeats,...n.heartbeats]})}else return}}function countBytes(u){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:u})).length}function getEarliestHeartbeatIdx(u){if(u.length===0)return-1;let n=0,s=u[0].date;for(let f=1;f<u.length;f++)u[f].date<s&&(s=u[f].date,n=f);return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(u){_registerComponent(new Component("platform-logger",n=>new PlatformLoggerServiceImpl(n),"PRIVATE")),_registerComponent(new Component("heartbeat",n=>new HeartbeatServiceImpl(n),"PRIVATE")),registerVersion(name$q,version$1$1,u),registerVersion(name$q,version$1$1,"esm2020"),registerVersion("fire-js","")}registerCoreComponents("");function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(u,...n){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${u}`,...n)}function _logError(u,...n){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${u}`,...n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(u,...n){throw createErrorInternal(u,...n)}function _createError(u,...n){return createErrorInternal(u,...n)}function _errorWithCustomMessage(u,n,s){const f={...prodErrorMap(),[n]:s};return new ErrorFactory("auth","Firebase",f).create(n,{appName:u.name})}function _serverAppCurrentUserOperationNotSupportedError(u){return _errorWithCustomMessage(u,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _assertInstanceOf(u,n,s){const f=s;if(!(n instanceof f))throw f.name!==n.constructor.name&&_fail(u,"argument-error"),_errorWithCustomMessage(u,"argument-error",`Type of ${n.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(u,...n){if(typeof u!="string"){const s=n[0],f=[...n.slice(1)];return f[0]&&(f[0].appName=u.name),u._errorFactory.create(s,...f)}return _DEFAULT_AUTH_ERROR_FACTORY.create(u,...n)}function _assert(u,n,...s){if(!u)throw createErrorInternal(n,...s)}function debugFail(u){const n="INTERNAL ASSERTION FAILED: "+u;throw _logError(n),new Error(n)}function debugAssert(u,n){u||debugFail(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var u;return typeof self<"u"&&((u=self.location)==null?void 0:u.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var u;return typeof self<"u"&&((u=self.location)==null?void 0:u.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const u=navigator;return u.languages&&u.languages[0]||u.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(n,s){this.shortDelay=n,this.longDelay=s,debugAssert(s>n,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(u,n){debugAssert(u.emulator,"Emulator should always be set here");const{url:s}=u.emulator;return n?`${s}${n.startsWith("/")?n.slice(1):n}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(n,s,f){this.fetchImpl=n,s&&(this.headersImpl=s),f&&(this.responseImpl=f)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(u,n){return u.tenantId&&!n.tenantId?{...n,tenantId:u.tenantId}:n}async function _performApiRequest(u,n,s,f,d={}){return _performFetchWithErrorHandling(u,d,async()=>{let y={},_={};f&&(n==="GET"?_=f:y={body:JSON.stringify(f)});const A=querystring({key:u.config.apiKey,..._}).slice(1),R=await u._getAdditionalHeaders();R["Content-Type"]="application/json",u.languageCode&&(R["X-Firebase-Locale"]=u.languageCode);const I={method:n,headers:R,...y};return isCloudflareWorker()||(I.referrerPolicy="no-referrer"),u.emulatorConfig&&isCloudWorkstation(u.emulatorConfig.host)&&(I.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(u,u.config.apiHost,s,A),I)})}async function _performFetchWithErrorHandling(u,n,s){u._canInitEmulator=!1;const f={...SERVER_ERROR_MAP,...n};try{const d=new NetworkTimeout(u),y=await Promise.race([s(),d.promise]);d.clearNetworkTimeout();const _=await y.json();if("needConfirmation"in _)throw _makeTaggedError(u,"account-exists-with-different-credential",_);if(y.ok&&!("errorMessage"in _))return _;{const A=y.ok?_.errorMessage:_.error.message,[R,I]=A.split(" : ");if(R==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(u,"credential-already-in-use",_);if(R==="EMAIL_EXISTS")throw _makeTaggedError(u,"email-already-in-use",_);if(R==="USER_DISABLED")throw _makeTaggedError(u,"user-disabled",_);const G=f[R]||R.toLowerCase().replace(/[_\s]+/g,"-");if(I)throw _errorWithCustomMessage(u,G,I);_fail(u,G)}}catch(d){if(d instanceof FirebaseError)throw d;_fail(u,"network-request-failed",{message:String(d)})}}async function _performSignInRequest(u,n,s,f,d={}){const y=await _performApiRequest(u,n,s,f,d);return"mfaPendingCredential"in y&&_fail(u,"multi-factor-auth-required",{_serverResponse:y}),y}async function _getFinalTarget(u,n,s,f){const d=`${n}${s}?${f}`,y=u,_=y.config.emulator?_emulatorUrl(u.config,d):`${u.config.apiScheme}://${d}`;return CookieAuthProxiedEndpoints.includes(s)&&(await y._persistenceManagerAvailable,y._getPersistenceType()==="COOKIE")?y._getPersistence()._getFinalTarget(_).toString():_}function _parseEnforcementState(u){switch(u){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(n){this.auth=n,this.timer=null,this.promise=new Promise((s,f)=>{this.timer=setTimeout(()=>f(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(u,n,s){const f={appName:u.name};s.email&&(f.email=s.email),s.phoneNumber&&(f.phoneNumber=s.phoneNumber);const d=_createError(u,n,f);return d.customData._tokenResponse=s,d}function isEnterprise(u){return u!==void 0&&u.enterprise!==void 0}class RecaptchaConfig{constructor(n){if(this.siteKey="",this.recaptchaEnforcementState=[],n.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=n.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=n.recaptchaEnforcementState}getProviderEnforcementState(n){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===n)return _parseEnforcementState(s.enforcementState);return null}isProviderEnabled(n){return this.getProviderEnforcementState(n)==="ENFORCE"||this.getProviderEnforcementState(n)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function getRecaptchaConfig(u,n){return _performApiRequest(u,"GET","/v2/recaptchaConfig",_addTidIfNecessary(u,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(u,n){return _performApiRequest(u,"POST","/v1/accounts:delete",n)}async function getAccountInfo(u,n){return _performApiRequest(u,"POST","/v1/accounts:lookup",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(u){if(u)try{const n=new Date(Number(u));if(!isNaN(n.getTime()))return n.toUTCString()}catch{}}async function getIdTokenResult(u,n=!1){const s=getModularInstance(u),f=await s.getIdToken(n),d=_parseToken(f);_assert(d&&d.exp&&d.auth_time&&d.iat,s.auth,"internal-error");const y=typeof d.firebase=="object"?d.firebase:void 0,_=y==null?void 0:y.sign_in_provider;return{claims:d,token:f,authTime:utcTimestampToDateString(secondsStringToMilliseconds(d.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(d.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(d.exp)),signInProvider:_||null,signInSecondFactor:(y==null?void 0:y.sign_in_second_factor)||null}}function secondsStringToMilliseconds(u){return Number(u)*1e3}function _parseToken(u){const[n,s,f]=u.split(".");if(n===void 0||s===void 0||f===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const d=base64Decode(s);return d?JSON.parse(d):(_logError("Failed to decode base64 JWT payload"),null)}catch(d){return _logError("Caught error parsing JWT payload as JSON",d==null?void 0:d.toString()),null}}function _tokenExpiresIn(u){const n=_parseToken(u);return _assert(n,"internal-error"),_assert(typeof n.exp<"u","internal-error"),_assert(typeof n.iat<"u","internal-error"),Number(n.exp)-Number(n.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(u,n,s=!1){if(s)return n;try{return await n}catch(f){throw f instanceof FirebaseError&&isUserInvalidated(f)&&u.auth.currentUser===u&&await u.auth.signOut(),f}}function isUserInvalidated({code:u}){return u==="auth/user-disabled"||u==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(n){this.user=n,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(n){if(n){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const f=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,f)}}schedule(n=!1){if(!this.isRunning)return;const s=this.getInterval(n);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(n){(n==null?void 0:n.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(n,s){this.createdAt=n,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(n){this.createdAt=n.createdAt,this.lastLoginAt=n.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(u){var Y;const n=u.auth,s=await u.getIdToken(),f=await _logoutIfInvalidated(u,getAccountInfo(n,{idToken:s}));_assert(f==null?void 0:f.users.length,n,"internal-error");const d=f.users[0];u._notifyReloadListener(d);const y=(Y=d.providerUserInfo)!=null&&Y.length?extractProviderData(d.providerUserInfo):[],_=mergeProviderData(u.providerData,y),A=u.isAnonymous,R=!(u.email&&d.passwordHash)&&!(_!=null&&_.length),I=A?R:!1,G={uid:d.localId,displayName:d.displayName||null,photoURL:d.photoUrl||null,email:d.email||null,emailVerified:d.emailVerified||!1,phoneNumber:d.phoneNumber||null,tenantId:d.tenantId||null,providerData:_,metadata:new UserMetadata(d.createdAt,d.lastLoginAt),isAnonymous:I};Object.assign(u,G)}async function reload(u){const n=getModularInstance(u);await _reloadWithoutSaving(n),await n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)}function mergeProviderData(u,n){return[...u.filter(f=>!n.some(d=>d.providerId===f.providerId)),...n]}function extractProviderData(u){return u.map(({providerId:n,...s})=>({providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(u,n){const s=await _performFetchWithErrorHandling(u,{},async()=>{const f=querystring({grant_type:"refresh_token",refresh_token:n}).slice(1),{tokenApiHost:d,apiKey:y}=u.config,_=await _getFinalTarget(u,d,"/v1/token",`key=${y}`),A=await u._getAdditionalHeaders();A["Content-Type"]="application/x-www-form-urlencoded";const R={method:"POST",headers:A,body:f};return u.emulatorConfig&&isCloudWorkstation(u.emulatorConfig.host)&&(R.credentials="include"),FetchProvider.fetch()(_,R)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function revokeToken(u,n){return _performApiRequest(u,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(u,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(n){_assert(n.idToken,"internal-error"),_assert(typeof n.idToken<"u","internal-error"),_assert(typeof n.refreshToken<"u","internal-error");const s="expiresIn"in n&&typeof n.expiresIn<"u"?Number(n.expiresIn):_tokenExpiresIn(n.idToken);this.updateTokensAndExpiration(n.idToken,n.refreshToken,s)}updateFromIdToken(n){_assert(n.length!==0,"internal-error");const s=_tokenExpiresIn(n);this.updateTokensAndExpiration(n,null,s)}async getToken(n,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,n,"user-token-expired"),this.refreshToken?(await this.refresh(n,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(n,s){const{accessToken:f,refreshToken:d,expiresIn:y}=await requestStsToken(n,s);this.updateTokensAndExpiration(f,d,Number(y))}updateTokensAndExpiration(n,s,f){this.refreshToken=s||null,this.accessToken=n||null,this.expirationTime=Date.now()+f*1e3}static fromJSON(n,s){const{refreshToken:f,accessToken:d,expirationTime:y}=s,_=new StsTokenManager;return f&&(_assert(typeof f=="string","internal-error",{appName:n}),_.refreshToken=f),d&&(_assert(typeof d=="string","internal-error",{appName:n}),_.accessToken=d),y&&(_assert(typeof y=="number","internal-error",{appName:n}),_.expirationTime=y),_}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(n){this.accessToken=n.accessToken,this.refreshToken=n.refreshToken,this.expirationTime=n.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(u,n){_assert(typeof u=="string"||typeof u>"u","internal-error",{appName:n})}class UserImpl{constructor({uid:n,auth:s,stsTokenManager:f,...d}){this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=f,this.accessToken=f.accessToken,this.displayName=d.displayName||null,this.email=d.email||null,this.emailVerified=d.emailVerified||!1,this.phoneNumber=d.phoneNumber||null,this.photoURL=d.photoURL||null,this.isAnonymous=d.isAnonymous||!1,this.tenantId=d.tenantId||null,this.providerData=d.providerData?[...d.providerData]:[],this.metadata=new UserMetadata(d.createdAt||void 0,d.lastLoginAt||void 0)}async getIdToken(n){const s=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,n));return _assert(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(n){return getIdTokenResult(this,n)}reload(){return reload(this)}_assign(n){this!==n&&(_assert(this.uid===n.uid,this.auth,"internal-error"),this.displayName=n.displayName,this.photoURL=n.photoURL,this.email=n.email,this.emailVerified=n.emailVerified,this.phoneNumber=n.phoneNumber,this.isAnonymous=n.isAnonymous,this.tenantId=n.tenantId,this.providerData=n.providerData.map(s=>({...s})),this.metadata._copy(n.metadata),this.stsTokenManager._assign(n.stsTokenManager))}_clone(n){const s=new UserImpl({...this,auth:n,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(n){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=n,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(n){this.reloadListener?this.reloadListener(n):this.reloadUserInfo=n}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(n,s=!1){let f=!1;n.idToken&&n.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(n),f=!0),s&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),f&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const n=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:n})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(n=>({...n})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(n,s){const f=s.displayName??void 0,d=s.email??void 0,y=s.phoneNumber??void 0,_=s.photoURL??void 0,A=s.tenantId??void 0,R=s._redirectEventId??void 0,I=s.createdAt??void 0,G=s.lastLoginAt??void 0,{uid:Y,emailVerified:q,isAnonymous:K,providerData:Q,stsTokenManager:ne}=s;_assert(Y&&ne,n,"internal-error");const te=StsTokenManager.fromJSON(this.name,ne);_assert(typeof Y=="string",n,"internal-error"),assertStringOrUndefined(f,n.name),assertStringOrUndefined(d,n.name),_assert(typeof q=="boolean",n,"internal-error"),_assert(typeof K=="boolean",n,"internal-error"),assertStringOrUndefined(y,n.name),assertStringOrUndefined(_,n.name),assertStringOrUndefined(A,n.name),assertStringOrUndefined(R,n.name),assertStringOrUndefined(I,n.name),assertStringOrUndefined(G,n.name);const J=new UserImpl({uid:Y,auth:n,email:d,emailVerified:q,displayName:f,isAnonymous:K,photoURL:_,phoneNumber:y,tenantId:A,stsTokenManager:te,createdAt:I,lastLoginAt:G});return Q&&Array.isArray(Q)&&(J.providerData=Q.map(ie=>({...ie}))),R&&(J._redirectEventId=R),J}static async _fromIdTokenResponse(n,s,f=!1){const d=new StsTokenManager;d.updateFromServerResponse(s);const y=new UserImpl({uid:s.localId,auth:n,stsTokenManager:d,isAnonymous:f});return await _reloadWithoutSaving(y),y}static async _fromGetAccountInfoResponse(n,s,f){const d=s.users[0];_assert(d.localId!==void 0,"internal-error");const y=d.providerUserInfo!==void 0?extractProviderData(d.providerUserInfo):[],_=!(d.email&&d.passwordHash)&&!(y!=null&&y.length),A=new StsTokenManager;A.updateFromIdToken(f);const R=new UserImpl({uid:d.localId,auth:n,stsTokenManager:A,isAnonymous:_}),I={uid:d.localId,displayName:d.displayName||null,photoURL:d.photoUrl||null,email:d.email||null,emailVerified:d.emailVerified||!1,phoneNumber:d.phoneNumber||null,tenantId:d.tenantId||null,providerData:y,metadata:new UserMetadata(d.createdAt,d.lastLoginAt),isAnonymous:!(d.email&&d.passwordHash)&&!(y!=null&&y.length)};return Object.assign(R,I),R}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(u){debugAssert(u instanceof Function,"Expected a class definition");let n=instanceCache.get(u);return n?(debugAssert(n instanceof u,"Instance stored in cache mismatched with class"),n):(n=new u,instanceCache.set(u,n),n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,s){this.storage[n]=s}async _get(n){const s=this.storage[n];return s===void 0?null:s}async _remove(n){delete this.storage[n]}_addListener(n,s){}_removeListener(n,s){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(u,n,s){return`firebase:${u}:${n}:${s}`}class PersistenceUserManager{constructor(n,s,f){this.persistence=n,this.auth=s,this.userKey=f;const{config:d,name:y}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,d.apiKey,y),this.fullPersistenceKey=_persistenceKeyName("persistence",d.apiKey,y),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(n){return this.persistence._set(this.fullUserKey,n.toJSON())}async getCurrentUser(){const n=await this.persistence._get(this.fullUserKey);if(!n)return null;if(typeof n=="string"){const s=await getAccountInfo(this.auth,{idToken:n}).catch(()=>{});return s?UserImpl._fromGetAccountInfoResponse(this.auth,s,n):null}return UserImpl._fromJSON(this.auth,n)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(n){if(this.persistence===n)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=n,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(n,s,f="authUser"){if(!s.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),n,f);const d=(await Promise.all(s.map(async I=>{if(await I._isAvailable())return I}))).filter(I=>I);let y=d[0]||_getInstance(inMemoryPersistence);const _=_persistenceKeyName(f,n.config.apiKey,n.name);let A=null;for(const I of s)try{const G=await I._get(_);if(G){let Y;if(typeof G=="string"){const q=await getAccountInfo(n,{idToken:G}).catch(()=>{});if(!q)break;Y=await UserImpl._fromGetAccountInfoResponse(n,q,G)}else Y=UserImpl._fromJSON(n,G);I!==y&&(A=Y),y=I;break}}catch{}const R=d.filter(I=>I._shouldAllowMigration);return!y._shouldAllowMigration||!R.length?new PersistenceUserManager(y,n,f):(y=R[0],A&&await y._set(_,A.toJSON()),await Promise.all(s.map(async I=>{if(I!==y)try{await I._remove(_)}catch{}})),new PersistenceUserManager(y,n,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(u){const n=u.toLowerCase();if(n.includes("opera/")||n.includes("opr/")||n.includes("opios/"))return"Opera";if(_isIEMobile(n))return"IEMobile";if(n.includes("msie")||n.includes("trident/"))return"IE";if(n.includes("edge/"))return"Edge";if(_isFirefox(n))return"Firefox";if(n.includes("silk/"))return"Silk";if(_isBlackBerry(n))return"Blackberry";if(_isWebOS(n))return"Webos";if(_isSafari(n))return"Safari";if((n.includes("chrome/")||_isChromeIOS(n))&&!n.includes("edge/"))return"Chrome";if(_isAndroid(n))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,f=u.match(s);if((f==null?void 0:f.length)===2)return f[1]}return"Other"}function _isFirefox(u=getUA()){return/firefox\//i.test(u)}function _isSafari(u=getUA()){const n=u.toLowerCase();return n.includes("safari/")&&!n.includes("chrome/")&&!n.includes("crios/")&&!n.includes("android")}function _isChromeIOS(u=getUA()){return/crios\//i.test(u)}function _isIEMobile(u=getUA()){return/iemobile/i.test(u)}function _isAndroid(u=getUA()){return/android/i.test(u)}function _isBlackBerry(u=getUA()){return/blackberry/i.test(u)}function _isWebOS(u=getUA()){return/webos/i.test(u)}function _isIOS(u=getUA()){return/iphone|ipad|ipod/i.test(u)||/macintosh/i.test(u)&&/mobile/i.test(u)}function _isIOSStandalone(u=getUA()){var n;return _isIOS(u)&&!!((n=window.navigator)!=null&&n.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(u=getUA()){return _isIOS(u)||_isAndroid(u)||_isWebOS(u)||_isBlackBerry(u)||/windows phone/i.test(u)||_isIEMobile(u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(u,n=[]){let s;switch(u){case"Browser":s=_getBrowserName(getUA());break;case"Worker":s=`${_getBrowserName(getUA())}-${u}`;break;default:s=u}const f=n.length?n.join(","):"FirebaseCore-web";return`${s}/JsCore/${SDK_VERSION}/${f}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(n){this.auth=n,this.queue=[]}pushCallback(n,s){const f=y=>new Promise((_,A)=>{try{const R=n(y);_(R)}catch(R){A(R)}});f.onAbort=s,this.queue.push(f);const d=this.queue.length-1;return()=>{this.queue[d]=()=>Promise.resolve()}}async runMiddleware(n){if(this.auth.currentUser===n)return;const s=[];try{for(const f of this.queue)await f(n),f.onAbort&&s.push(f.onAbort)}catch(f){s.reverse();for(const d of s)try{d()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:f==null?void 0:f.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(u,n={}){return _performApiRequest(u,"GET","/v2/passwordPolicy",_addTidIfNecessary(u,n))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(n){var f;const s=n.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??MINIMUM_MIN_PASSWORD_LENGTH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=n.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((f=n.allowedNonAlphanumericCharacters)==null?void 0:f.join(""))??"",this.forceUpgradeOnSignin=n.forceUpgradeOnSignin??!1,this.schemaVersion=n.schemaVersion}validatePassword(n){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(n,s),this.validatePasswordCharacterOptions(n,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(n,s){const f=this.customStrengthOptions.minPasswordLength,d=this.customStrengthOptions.maxPasswordLength;f&&(s.meetsMinPasswordLength=n.length>=f),d&&(s.meetsMaxPasswordLength=n.length<=d)}validatePasswordCharacterOptions(n,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let f;for(let d=0;d<n.length;d++)f=n.charAt(d),this.updatePasswordCharacterOptionsStatuses(s,f>="a"&&f<="z",f>="A"&&f<="Z",f>="0"&&f<="9",this.allowedNonAlphanumericCharacters.includes(f))}updatePasswordCharacterOptionsStatuses(n,s,f,d,y){this.customStrengthOptions.containsLowercaseLetter&&(n.containsLowercaseLetter||(n.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(n.containsUppercaseLetter||(n.containsUppercaseLetter=f)),this.customStrengthOptions.containsNumericCharacter&&(n.containsNumericCharacter||(n.containsNumericCharacter=d)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(n.containsNonAlphanumericCharacter||(n.containsNonAlphanumericCharacter=y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(n,s,f,d){this.app=n,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=f,this.config=d,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=n.name,this.clientVersion=d.sdkClientVersion,this._persistenceManagerAvailable=new Promise(y=>this._resolvePersistenceManagerAvailable=y)}_initializeWithPersistence(n,s){return s&&(this._popupRedirectResolver=_getInstance(s)),this._initializationPromise=this.queue(async()=>{var f,d,y;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,n),(f=this._resolvePersistenceManagerAvailable)==null||f.call(this),!this._deleted)){if((d=this._popupRedirectResolver)!=null&&d._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((y=this.currentUser)==null?void 0:y.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const n=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!n)){if(this.currentUser&&n&&this.currentUser.uid===n.uid){this._currentUser._assign(n),await this.currentUser.getIdToken();return}await this._updateCurrentUser(n,!0)}}async initializeCurrentUserFromIdToken(n){try{const s=await getAccountInfo(this,{idToken:n}),f=await UserImpl._fromGetAccountInfoResponse(this,s,n);await this.directlySetCurrentUser(f)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(n){var y;if(_isFirebaseServerApp(this.app)){const _=this.app.settings.authIdToken;return _?new Promise(A=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(_).then(A,A))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let f=s,d=!1;if(n&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const _=(y=this.redirectUser)==null?void 0:y._redirectEventId,A=f==null?void 0:f._redirectEventId,R=await this.tryRedirectSignIn(n);(!_||_===A)&&(R!=null&&R.user)&&(f=R.user,d=!0)}if(!f)return this.directlySetCurrentUser(null);if(!f._redirectEventId){if(d)try{await this.beforeStateQueue.runMiddleware(f)}catch(_){f=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(_))}return f?this.reloadAndSetCurrentUserOrClear(f):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===f._redirectEventId?this.directlySetCurrentUser(f):this.reloadAndSetCurrentUserOrClear(f)}async tryRedirectSignIn(n){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,n,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(n){try{await _reloadWithoutSaving(n)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(n)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(n){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const s=n?getModularInstance(n):null;return s&&_assert(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(n,s=!1){if(!this._deleted)return n&&_assert(this.tenantId===n.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(n),this.queue(async()=>{await this.directlySetCurrentUser(n),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(n){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(n))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(n){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(n)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const n=await _getPasswordPolicy(this),s=new PasswordPolicyImpl(n);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(n){this._errorFactory=new ErrorFactory("auth","Firebase",n())}onAuthStateChanged(n,s,f){return this.registerStateListener(this.authStateSubscription,n,s,f)}beforeAuthStateChanged(n,s){return this.beforeStateQueue.pushCallback(n,s)}onIdTokenChanged(n,s,f){return this.registerStateListener(this.idTokenSubscription,n,s,f)}authStateReady(){return new Promise((n,s)=>{if(this.currentUser)n();else{const f=this.onAuthStateChanged(()=>{f(),n()},s)}})}async revokeAccessToken(n){if(this.currentUser){const s=await this.currentUser.getIdToken(),f={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:n,idToken:s};this.tenantId!=null&&(f.tenantId=this.tenantId),await revokeToken(this,f)}}toJSON(){var n;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(n=this._currentUser)==null?void 0:n.toJSON()}}async _setRedirectUser(n,s){const f=await this.getOrInitRedirectPersistenceManager(s);return n===null?f.removeCurrentUser():f.setCurrentUser(n)}async getOrInitRedirectPersistenceManager(n){if(!this.redirectPersistenceManager){const s=n&&_getInstance(n)||this._popupRedirectResolver;_assert(s,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(n){var s,f;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)==null?void 0:s._redirectEventId)===n?this._currentUser:((f=this.redirectUser)==null?void 0:f._redirectEventId)===n?this.redirectUser:null}async _persistUserIfCurrent(n){if(n===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(n))}_notifyListenersIfCurrent(n){n===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=((s=this.currentUser)==null?void 0:s.uid)??null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(n,s,f,d){if(this._deleted)return()=>{};const y=typeof s=="function"?s:s.next.bind(s);let _=!1;const A=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(A,this,"internal-error"),A.then(()=>{_||y(this.currentUser)}),typeof s=="function"){const R=n.addObserver(s,f,d);return()=>{_=!0,R()}}else{const R=n.addObserver(s);return()=>{_=!0,R()}}}async directlySetCurrentUser(n){this.currentUser&&this.currentUser!==n&&this._currentUser._stopProactiveRefresh(),n&&this.isProactiveRefreshEnabled&&n._startProactiveRefresh(),this.currentUser=n,n?await this.assertedPersistence.setCurrentUser(n):await this.assertedPersistence.removeCurrentUser()}queue(n){return this.operations=this.operations.then(n,n),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(n){!n||this.frameworks.includes(n)||(this.frameworks.push(n),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var d;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((d=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:d.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const f=await this._getAppCheckToken();return f&&(n["X-Firebase-AppCheck"]=f),n}async _getAppCheckToken(){var s;if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((s=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getToken());return n!=null&&n.error&&_logWarn(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _castAuth(u){return getModularInstance(u)}class Subscription{constructor(n){this.auth=n,this.observer=null,this.addObserver=createSubscribe(s=>this.observer=s)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(u){externalJSProvider=u}function _loadJS(u){return externalJSProvider.loadJS(u)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(u){return`__${u}${Math.floor(Math.random()*1e6)}`}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(n){n()}execute(n,s){return Promise.resolve("token")}render(n,s){return""}}class MockGreCAPTCHA{ready(n){n()}execute(n,s){return Promise.resolve("token")}render(n,s){return""}}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(n){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(n)}async verify(n="verify",s=!1){async function f(y){if(!s){if(y.tenantId==null&&y._agentRecaptchaConfig!=null)return y._agentRecaptchaConfig.siteKey;if(y.tenantId!=null&&y._tenantRecaptchaConfigs[y.tenantId]!==void 0)return y._tenantRecaptchaConfigs[y.tenantId].siteKey}return new Promise(async(_,A)=>{getRecaptchaConfig(y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(R=>{if(R.recaptchaKey===void 0)A(new Error("recaptcha Enterprise site key undefined"));else{const I=new RecaptchaConfig(R);return y.tenantId==null?y._agentRecaptchaConfig=I:y._tenantRecaptchaConfigs[y.tenantId]=I,_(I.siteKey)}}).catch(R=>{A(R)})})}function d(y,_,A){const R=window.grecaptcha;isEnterprise(R)?R.enterprise.ready(()=>{R.enterprise.execute(y,{action:n}).then(I=>{_(I)}).catch(()=>{_(FAKE_TOKEN)})}):A(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MockGreCAPTCHATopLevel().execute("siteKey",{action:"verify"}):new Promise((y,_)=>{f(this.auth).then(A=>{if(!s&&isEnterprise(window.grecaptcha))d(A,y,_);else{if(typeof window>"u"){_(new Error("RecaptchaVerifier is only supported in browser"));return}let R=_recaptchaEnterpriseScriptUrl();R.length!==0&&(R+=A),_loadJS(R).then(()=>{d(A,y,_)}).catch(I=>{_(I)})}}).catch(A=>{_(A)})})}}async function injectRecaptchaFields(u,n,s,f=!1,d=!1){const y=new RecaptchaEnterpriseVerifier(u);let _;if(d)_=FAKE_TOKEN;else try{_=await y.verify(s)}catch{_=await y.verify(s,!0)}const A={...n};if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in A){const R=A.phoneEnrollmentInfo.phoneNumber,I=A.phoneEnrollmentInfo.recaptchaToken;Object.assign(A,{phoneEnrollmentInfo:{phoneNumber:R,recaptchaToken:I,captchaResponse:_,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in A){const R=A.phoneSignInInfo.recaptchaToken;Object.assign(A,{phoneSignInInfo:{recaptchaToken:R,captchaResponse:_,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return A}return f?Object.assign(A,{captchaResp:_}):Object.assign(A,{captchaResponse:_}),Object.assign(A,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(A,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),A}async function handleRecaptchaFlow(u,n,s,f,d){var y;if((y=u._getRecaptchaConfig())!=null&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const _=await injectRecaptchaFields(u,n,s,s==="getOobCode");return f(u,_)}else return f(u,n).catch(async _=>{if(_.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const A=await injectRecaptchaFields(u,n,s,s==="getOobCode");return f(u,A)}else return Promise.reject(_)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(u,n){const s=_getProvider(u,"auth");if(s.isInitialized()){const d=s.getImmediate(),y=s.getOptions();if(deepEqual(y,n??{}))return d;_fail(d,"already-initialized")}return s.initialize({options:n})}function _initializeAuthInstance(u,n){const s=(n==null?void 0:n.persistence)||[],f=(Array.isArray(s)?s:[s]).map(_getInstance);n!=null&&n.errorMap&&u._updateErrorMap(n.errorMap),u._initializeWithPersistence(f,n==null?void 0:n.popupRedirectResolver)}function connectAuthEmulator(u,n,s){const f=_castAuth(u);_assert(/^https?:\/\//.test(n),f,"invalid-emulator-scheme");const d=!1,y=extractProtocol(n),{host:_,port:A}=extractHostAndPort(n),R=A===null?"":`:${A}`,I={url:`${y}//${_}${R}/`},G=Object.freeze({host:_,port:A,protocol:y.replace(":",""),options:Object.freeze({disableWarnings:d})});if(!f._canInitEmulator){_assert(f.config.emulator&&f.emulatorConfig,f,"emulator-config-failed"),_assert(deepEqual(I,f.config.emulator)&&deepEqual(G,f.emulatorConfig),f,"emulator-config-failed");return}f.config.emulator=I,f.emulatorConfig=G,f.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(_)?(pingServer(`${y}//${_}${R}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(u){const n=u.indexOf(":");return n<0?"":u.substr(0,n+1)}function extractHostAndPort(u){const n=extractProtocol(u),s=/(\/\/)?([^?#/]+)/.exec(u.substr(n.length));if(!s)return{host:"",port:null};const f=s[2].split("@").pop()||"",d=/^(\[[^\]]+\])(:|$)/.exec(f);if(d){const y=d[1];return{host:y,port:parsePort(f.substr(y.length+1))}}else{const[y,_]=f.split(":");return{host:y,port:parsePort(_)}}}function parsePort(u){if(!u)return null;const n=Number(u);return isNaN(n)?null:n}function emitEmulatorWarning(){function u(){const n=document.createElement("p"),s=n.style;n.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",n.classList.add("firebase-emulator-warning"),document.body.appendChild(n)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",u):u())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(n,s){this.providerId=n,this.signInMethod=s}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(n){return debugFail("not implemented")}_linkToIdToken(n,s){return debugFail("not implemented")}_getReauthenticationResolver(n){return debugFail("not implemented")}}async function linkEmailPassword(u,n){return _performApiRequest(u,"POST","/v1/accounts:signUp",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(u,n){return _performSignInRequest(u,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(u,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(u,n){return _performSignInRequest(u,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(u,n))}async function signInWithEmailLinkForLinking(u,n){return _performSignInRequest(u,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(u,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(n,s,f,d=null){super("password",f),this._email=n,this._password=s,this._tenantId=d}static _fromEmailAndPassword(n,s){return new EmailAuthCredential(n,s,"password")}static _fromEmailAndCode(n,s,f=null){return new EmailAuthCredential(n,s,"emailLink",f)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(n){const s=typeof n=="string"?JSON.parse(n):n;if(s!=null&&s.email&&(s!=null&&s.password)){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(n){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(n,s,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(n,{email:this._email,oobCode:this._password});default:_fail(n,"internal-error")}}async _linkToIdToken(n,s){switch(this.signInMethod){case"password":const f={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(n,f,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(n,{idToken:s,email:this._email,oobCode:this._password});default:_fail(n,"internal-error")}}_getReauthenticationResolver(n){return this._getIdTokenResponse(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(u,n){return _performSignInRequest(u,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(u,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(n){const s=new OAuthCredential(n.providerId,n.signInMethod);return n.idToken||n.accessToken?(n.idToken&&(s.idToken=n.idToken),n.accessToken&&(s.accessToken=n.accessToken),n.nonce&&!n.pendingToken&&(s.nonce=n.nonce),n.pendingToken&&(s.pendingToken=n.pendingToken)):n.oauthToken&&n.oauthTokenSecret?(s.accessToken=n.oauthToken,s.secret=n.oauthTokenSecret):_fail("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(n){const s=typeof n=="string"?JSON.parse(n):n,{providerId:f,signInMethod:d,...y}=s;if(!f||!d)return null;const _=new OAuthCredential(f,d);return _.idToken=y.idToken||void 0,_.accessToken=y.accessToken||void 0,_.secret=y.secret,_.nonce=y.nonce,_.pendingToken=y.pendingToken||null,_}_getIdTokenResponse(n){const s=this.buildRequest();return signInWithIdp(n,s)}_linkToIdToken(n,s){const f=this.buildRequest();return f.idToken=s,signInWithIdp(n,f)}_getReauthenticationResolver(n){const s=this.buildRequest();return s.autoCreate=!1,signInWithIdp(n,s)}buildRequest(){const n={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)n.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),n.postBody=querystring(s)}return n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(u){switch(u){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(u){const n=querystringDecode(extractQuerystring(u)).link,s=n?querystringDecode(extractQuerystring(n)).deep_link_id:null,f=querystringDecode(extractQuerystring(u)).deep_link_id;return(f?querystringDecode(extractQuerystring(f)).link:null)||f||s||n||u}class ActionCodeURL{constructor(n){const s=querystringDecode(extractQuerystring(n)),f=s.apiKey??null,d=s.oobCode??null,y=parseMode(s.mode??null);_assert(f&&d&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=d,this.continueUrl=s.continueUrl??null,this.languageCode=s.lang??null,this.tenantId=s.tenantId??null}static parseLink(n){const s=parseDeepLink(n);try{return new ActionCodeURL(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(n,s){return EmailAuthCredential._fromEmailAndPassword(n,s)}static credentialWithLink(n,s){const f=ActionCodeURL.parseLink(s);return _assert(f,"argument-error"),EmailAuthCredential._fromEmailAndCode(n,f.code,f.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(n){this.providerId=n,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(n){this.defaultLanguageCode=n}setCustomParameters(n){return this.customParameters=n,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(n){return this.scopes.includes(n)||this.scopes.push(n),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(n){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:n})}static credentialFromResult(n){return FacebookAuthProvider.credentialFromTaggedObject(n)}static credentialFromError(n){return FacebookAuthProvider.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n||!("oauthAccessToken"in n)||!n.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(n.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(n,s){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:s})}static credentialFromResult(n){return GoogleAuthProvider.credentialFromTaggedObject(n)}static credentialFromError(n){return GoogleAuthProvider.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:s,oauthAccessToken:f}=n;if(!s&&!f)return null;try{return GoogleAuthProvider.credential(s,f)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(n){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:n})}static credentialFromResult(n){return GithubAuthProvider.credentialFromTaggedObject(n)}static credentialFromError(n){return GithubAuthProvider.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n||!("oauthAccessToken"in n)||!n.oauthAccessToken)return null;try{return GithubAuthProvider.credential(n.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(n,s){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:n,oauthTokenSecret:s})}static credentialFromResult(n){return TwitterAuthProvider.credentialFromTaggedObject(n)}static credentialFromError(n){return TwitterAuthProvider.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthAccessToken:s,oauthTokenSecret:f}=n;if(!s||!f)return null;try{return TwitterAuthProvider.credential(s,f)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(u,n){return _performSignInRequest(u,"POST","/v1/accounts:signUp",_addTidIfNecessary(u,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(n){this.user=n.user,this.providerId=n.providerId,this._tokenResponse=n._tokenResponse,this.operationType=n.operationType}static async _fromIdTokenResponse(n,s,f,d=!1){const y=await UserImpl._fromIdTokenResponse(n,f,d),_=providerIdForResponse(f);return new UserCredentialImpl({user:y,providerId:_,_tokenResponse:f,operationType:s})}static async _forOperation(n,s,f){await n._updateTokensIfNecessary(f,!0);const d=providerIdForResponse(f);return new UserCredentialImpl({user:n,providerId:d,_tokenResponse:f,operationType:s})}}function providerIdForResponse(u){return u.providerId?u.providerId:"phoneNumber"in u?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(n,s,f,d){super(s.code,s.message),this.operationType=f,this.user=d,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:n.name,tenantId:n.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:f}}static _fromErrorAndOperation(n,s,f,d){return new MultiFactorError(n,s,f,d)}}function _processCredentialSavingMfaContextIfNecessary(u,n,s,f){return(n==="reauthenticate"?s._getReauthenticationResolver(u):s._getIdTokenResponse(u)).catch(y=>{throw y.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(u,y,n,f):y})}async function _link$1(u,n,s=!1){const f=await _logoutIfInvalidated(u,n._linkToIdToken(u.auth,await u.getIdToken()),s);return UserCredentialImpl._forOperation(u,"link",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(u,n,s=!1){const{auth:f}=u;if(_isFirebaseServerApp(f.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(f));const d="reauthenticate";try{const y=await _logoutIfInvalidated(u,_processCredentialSavingMfaContextIfNecessary(f,d,n,u),s);_assert(y.idToken,f,"internal-error");const _=_parseToken(y.idToken);_assert(_,f,"internal-error");const{sub:A}=_;return _assert(u.uid===A,f,"user-mismatch"),UserCredentialImpl._forOperation(u,d,y)}catch(y){throw(y==null?void 0:y.code)==="auth/user-not-found"&&_fail(f,"user-mismatch"),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(u,n,s=!1){if(_isFirebaseServerApp(u.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(u));const f="signIn",d=await _processCredentialSavingMfaContextIfNecessary(u,f,n),y=await UserCredentialImpl._fromIdTokenResponse(u,f,d);return s||await u._updateCurrentUser(y.user),y}async function signInWithCredential(u,n){return _signInWithCredential(_castAuth(u),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function recachePasswordPolicy(u){const n=_castAuth(u);n._getPasswordPolicyInternal()&&await n._updatePasswordPolicy()}async function createUserWithEmailAndPassword(u,n,s){if(_isFirebaseServerApp(u.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(u));const f=_castAuth(u),_=await handleRecaptchaFlow(f,{returnSecureToken:!0,email:n,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",signUp).catch(R=>{throw R.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(u),R}),A=await UserCredentialImpl._fromIdTokenResponse(f,"signIn",_);return await f._updateCurrentUser(A.user),A}function signInWithEmailAndPassword(u,n,s){return _isFirebaseServerApp(u.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(u)):signInWithCredential(getModularInstance(u),EmailAuthProvider.credential(n,s)).catch(async f=>{throw f.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(u),f})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateProfile$1(u,n){return _performApiRequest(u,"POST","/v1/accounts:update",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateProfile(u,{displayName:n,photoURL:s}){if(n===void 0&&s===void 0)return;const f=getModularInstance(u),y={idToken:await f.getIdToken(),displayName:n,photoUrl:s,returnSecureToken:!0},_=await _logoutIfInvalidated(f,updateProfile$1(f.auth,y));f.displayName=_.displayName||null,f.photoURL=_.photoUrl||null;const A=f.providerData.find(({providerId:R})=>R==="password");A&&(A.displayName=f.displayName,A.photoURL=f.photoURL),await f._updateTokensIfNecessary(_)}function onIdTokenChanged(u,n,s,f){return getModularInstance(u).onIdTokenChanged(n,s,f)}function beforeAuthStateChanged(u,n,s){return getModularInstance(u).beforeAuthStateChanged(n,s)}function onAuthStateChanged(u,n,s,f){return getModularInstance(u).onAuthStateChanged(n,s,f)}function signOut(u){return getModularInstance(u).signOut()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(n,s){this.storageRetriever=n,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(n,s){return this.storage.setItem(n,JSON.stringify(s)),Promise.resolve()}_get(n){const s=this.storage.getItem(n);return Promise.resolve(s?JSON.parse(s):null)}_remove(n){return this.storage.removeItem(n),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,s)=>this.onStorageEvent(n,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const s of Object.keys(this.listeners)){const f=this.storage.getItem(s),d=this.localCache[s];f!==d&&n(s,d,f)}}onStorageEvent(n,s=!1){if(!n.key){this.forAllChangedKeys((_,A,R)=>{this.notifyListeners(_,R)});return}const f=n.key;s?this.detachListener():this.stopPolling();const d=()=>{const _=this.storage.getItem(f);!s&&this.localCache[f]===_||this.notifyListeners(f,_)},y=this.storage.getItem(f);_isIE10()&&y!==n.newValue&&n.newValue!==n.oldValue?setTimeout(d,IE10_LOCAL_STORAGE_SYNC_DELAY):d()}notifyListeners(n,s){this.localCache[n]=s;const f=this.listeners[n];if(f)for(const d of Array.from(f))d(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,s,f)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:s,newValue:f}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(s)}_removeListener(n,s){this.listeners[n]&&(this.listeners[n].delete(s),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,s){await super._set(n,s),this.localCache[n]=JSON.stringify(s)}async _get(n){const s=await super._get(n);return this.localCache[n]=JSON.stringify(s),s}async _remove(n){await super._remove(n),delete this.localCache[n]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,s){}_removeListener(n,s){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(u){return Promise.all(u.map(async n=>{try{return{fulfilled:!0,value:await n}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const s=this.receivers.find(d=>d.isListeningto(n));if(s)return s;const f=new Receiver(n);return this.receivers.push(f),f}isListeningto(n){return this.eventTarget===n}async handleEvent(n){const s=n,{eventId:f,eventType:d,data:y}=s.data,_=this.handlersMap[d];if(!(_!=null&&_.size))return;s.ports[0].postMessage({status:"ack",eventId:f,eventType:d});const A=Array.from(_).map(async I=>I(s.origin,y)),R=await _allSettled(A);s.ports[0].postMessage({status:"done",eventId:f,eventType:d,response:R})}_subscribe(n,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(s)}_unsubscribe(n,s){this.handlersMap[n]&&s&&this.handlersMap[n].delete(s),(!s||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(u="",n=10){let s="";for(let f=0;f<n;f++)s+=Math.floor(Math.random()*10);return u+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(n){this.target=n,this.handlers=new Set}removeMessageHandler(n){n.messageChannel&&(n.messageChannel.port1.removeEventListener("message",n.onMessage),n.messageChannel.port1.close()),this.handlers.delete(n)}async _send(n,s,f=50){const d=typeof MessageChannel<"u"?new MessageChannel:null;if(!d)throw new Error("connection_unavailable");let y,_;return new Promise((A,R)=>{const I=_generateEventId("",20);d.port1.start();const G=setTimeout(()=>{R(new Error("unsupported_event"))},f);_={messageChannel:d,onMessage(Y){const q=Y;if(q.data.eventId===I)switch(q.data.status){case"ack":clearTimeout(G),y=setTimeout(()=>{R(new Error("timeout"))},3e3);break;case"done":clearTimeout(y),A(q.data.response);break;default:clearTimeout(G),clearTimeout(y),R(new Error("invalid_response"));break}}},this.handlers.add(_),d.port1.addEventListener("message",_.onMessage),this.target.postMessage({eventType:n,eventId:I,data:s},[d.port2])}).finally(()=>{_&&this.removeMessageHandler(_)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(u){_window().location.href=u}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var u;return((u=navigator==null?void 0:navigator.serviceWorker)==null?void 0:u.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(n){this.request=n}toPromise(){return new Promise((n,s)=>{this.request.addEventListener("success",()=>{n(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function getObjectStore(u,n){return u.transaction([DB_OBJECTSTORE_NAME],n?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const u=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(u).toPromise()}function _openDatabase(){const u=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((n,s)=>{u.addEventListener("error",()=>{s(u.error)}),u.addEventListener("upgradeneeded",()=>{const f=u.result;try{f.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(d){s(d)}}),u.addEventListener("success",async()=>{const f=u.result;f.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?n(f):(f.close(),await _deleteDatabase(),n(await _openDatabase()))})})}async function _putObject(u,n,s){const f=getObjectStore(u,!0).put({[DB_DATA_KEYPATH]:n,value:s});return new DBPromise(f).toPromise()}async function getObject(u,n){const s=getObjectStore(u,!1).get(n),f=await new DBPromise(s).toPromise();return f===void 0?null:f.value}function _deleteObject(u,n){const s=getObjectStore(u,!0).delete(n);return new DBPromise(s).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(n){let s=0;for(;;)try{const f=await this._openDb();return await n(f)}catch(f){if(s++>_TRANSACTION_RETRY_COUNT)throw f;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(n,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(n,s)=>["keyChanged"])}async initializeSender(){var s,f;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(s=n[0])!=null&&s.fulfilled&&(f=n[0])!=null&&f.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const n=await _openDatabase();return await _putObject(n,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(n,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,s){return this._withPendingWrite(async()=>(await this._withRetries(f=>_putObject(f,n,s)),this.localCache[n]=s,this.notifyServiceWorker(n)))}async _get(n){const s=await this._withRetries(f=>getObject(f,n));return this.localCache[n]=s,s}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(s=>_deleteObject(s,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){const n=await this._withRetries(d=>{const y=getObjectStore(d,!1).getAll();return new DBPromise(y).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];const s=[],f=new Set;if(n.length!==0)for(const{fbase_key:d,value:y}of n)f.add(d),JSON.stringify(this.localCache[d])!==JSON.stringify(y)&&(this.notifyListeners(d,y),s.push(d));for(const d of Object.keys(this.localCache))this.localCache[d]&&!f.has(d)&&(this.notifyListeners(d,null),s.push(d));return s}notifyListeners(n,s){this.localCache[n]=s;const f=this.listeners[n];if(f)for(const d of Array.from(f))d(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(s)}_removeListener(n,s){this.listeners[n]&&(this.listeners[n].delete(s),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(u,n){return n?_getInstance(n):(_assert(u._popupRedirectResolver,u,"argument-error"),u._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(n){super("custom","custom"),this.params=n}_getIdTokenResponse(n){return signInWithIdp(n,this._buildIdpRequest())}_linkToIdToken(n,s){return signInWithIdp(n,this._buildIdpRequest(s))}_getReauthenticationResolver(n){return signInWithIdp(n,this._buildIdpRequest())}_buildIdpRequest(n){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return n&&(s.idToken=n),s}}function _signIn(u){return _signInWithCredential(u.auth,new IdpCredential(u),u.bypassAuthState)}function _reauth(u){const{auth:n,user:s}=u;return _assert(s,n,"internal-error"),_reauthenticate(s,new IdpCredential(u),u.bypassAuthState)}async function _link(u){const{auth:n,user:s}=u;return _assert(s,n,"internal-error"),_link$1(s,new IdpCredential(u),u.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(n,s,f,d,y=!1){this.auth=n,this.resolver=f,this.user=d,this.bypassAuthState=y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(n,s)=>{this.pendingPromise={resolve:n,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(f){this.reject(f)}})}async onAuthEvent(n){const{urlResponse:s,sessionId:f,postBody:d,tenantId:y,error:_,type:A}=n;if(_){this.reject(_);return}const R={auth:this.auth,requestUri:s,sessionId:f,tenantId:y||void 0,postBody:d||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(A)(R))}catch(I){this.reject(I)}}onError(n){this.reject(n)}getIdpTask(n){switch(n){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(n){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(n),this.unregisterAndCleanUp()}reject(n){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(n),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(u,n,s){if(_isFirebaseServerApp(u.app))return Promise.reject(_createError(u,"operation-not-supported-in-this-environment"));const f=_castAuth(u);_assertInstanceOf(u,n,FederatedAuthProvider);const d=_withDefaultResolver(f,s);return new PopupOperation(f,"signInViaPopup",n,d).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(n,s,f,d,y){super(n,s,d,y),this.provider=f,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const n=await this.execute();return _assert(n,this.auth,"internal-error"),n}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const n=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var n;return((n=this.authWindow)==null?void 0:n.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const n=()=>{var s,f;if((f=(s=this.authWindow)==null?void 0:s.window)!=null&&f.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,_POLL_WINDOW_CLOSE_TIMEOUT.get())};n()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(n,s,f=!1){super(n,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,f),this.eventId=null}async execute(){let n=redirectOutcomeMap.get(this.auth._key());if(!n){try{const f=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;n=()=>Promise.resolve(f)}catch(s){n=()=>Promise.reject(s)}redirectOutcomeMap.set(this.auth._key(),n)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),n()}async onAuthEvent(n){if(n.type==="signInViaRedirect")return super.onAuthEvent(n);if(n.type==="unknown"){this.resolve(null);return}if(n.eventId){const s=await this.auth._redirectUserForId(n.eventId);if(s)return this.user=s,super.onAuthEvent(n);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(u,n){const s=pendingRedirectKey(n),f=resolverPersistence(u);if(!await f._isAvailable())return!1;const d=await f._get(s)==="true";return await f._remove(s),d}function _overrideRedirectResult(u,n){redirectOutcomeMap.set(u._key(),n)}function resolverPersistence(u){return _getInstance(u._redirectPersistence)}function pendingRedirectKey(u){return _persistenceKeyName(PENDING_REDIRECT_KEY,u.config.apiKey,u.name)}async function _getRedirectResult(u,n,s=!1){if(_isFirebaseServerApp(u.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(u));const f=_castAuth(u),d=_withDefaultResolver(f,n),_=await new RedirectAction(f,d,s).execute();return _&&!s&&(delete _.user._redirectEventId,await f._persistUserIfCurrent(_.user),await f._setRedirectUser(null,n)),_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=600*1e3;class AuthEventManager{constructor(n){this.auth=n,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(n){this.consumers.add(n),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,n)&&(this.sendToConsumer(this.queuedRedirectEvent,n),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(n){this.consumers.delete(n)}onEvent(n){if(this.hasEventBeenHandled(n))return!1;let s=!1;return this.consumers.forEach(f=>{this.isEventForConsumer(n,f)&&(s=!0,this.sendToConsumer(n,f),this.saveEventToCache(n))}),this.hasHandledPotentialRedirect||!isRedirectEvent(n)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=n,s=!0)),s}sendToConsumer(n,s){var f;if(n.error&&!isNullRedirectEvent(n)){const d=((f=n.error.code)==null?void 0:f.split("auth/")[1])||"internal-error";s.onError(_createError(this.auth,d))}else s.onAuthEvent(n)}isEventForConsumer(n,s){const f=s.eventId===null||!!n.eventId&&n.eventId===s.eventId;return s.filter.includes(n.type)&&f}hasEventBeenHandled(n){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(n))}saveEventToCache(n){this.cachedEventUids.add(eventUid(n)),this.lastProcessedEventTime=Date.now()}}function eventUid(u){return[u.type,u.eventId,u.sessionId,u.tenantId].filter(n=>n).join("-")}function isNullRedirectEvent({type:u,error:n}){return u==="unknown"&&(n==null?void 0:n.code)==="auth/no-auth-event"}function isRedirectEvent(u){switch(u.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(u);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(u,n={}){return _performApiRequest(u,"GET","/v1/projects",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(u){if(u.config.emulator)return;const{authorizedDomains:n}=await _getProjectConfig(u);for(const s of n)try{if(matchDomain(s))return}catch{}_fail(u,"unauthorized-domain")}function matchDomain(u){const n=_getCurrentUrl(),{protocol:s,hostname:f}=new URL(n);if(u.startsWith("chrome-extension://")){const _=new URL(u);return _.hostname===""&&f===""?s==="chrome-extension:"&&u.replace("chrome-extension://","")===n.replace("chrome-extension://",""):s==="chrome-extension:"&&_.hostname===f}if(!HTTP_REGEX.test(s))return!1;if(IP_ADDRESS_REGEX.test(u))return f===u;const d=u.replace(/\./g,"\\.");return new RegExp("^(.+\\."+d+"|"+d+")$","i").test(f)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const u=_window().___jsl;if(u!=null&&u.H){for(const n of Object.keys(u.H))if(u.H[n].r=u.H[n].r||[],u.H[n].L=u.H[n].L||[],u.H[n].r=[...u.H[n].L],u.CP)for(let s=0;s<u.CP.length;s++)u.CP[s]=null}}function loadGapi(u){return new Promise((n,s)=>{var d,y,_;function f(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{n(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),s(_createError(u,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if((y=(d=_window().gapi)==null?void 0:d.iframes)!=null&&y.Iframe)n(gapi.iframes.getContext());else if((_=_window().gapi)!=null&&_.load)f();else{const A=_generateCallbackName("iframefcb");return _window()[A]=()=>{gapi.load?f():s(_createError(u,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${A}`).catch(R=>s(R))}}).catch(n=>{throw cachedGApiLoader=null,n})}let cachedGApiLoader=null;function _loadGapi(u){return cachedGApiLoader=cachedGApiLoader||loadGapi(u),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(u){const n=u.config;_assert(n.authDomain,u,"auth-domain-config-required");const s=n.emulator?_emulatorUrl(n,EMULATED_IFRAME_PATH):`https://${u.config.authDomain}/${IFRAME_PATH}`,f={apiKey:n.apiKey,appName:u.name,v:SDK_VERSION},d=EID_FROM_APIHOST.get(u.config.apiHost);d&&(f.eid=d);const y=u._getFrameworks();return y.length&&(f.fw=y.join(",")),`${s}?${querystring(f).slice(1)}`}async function _openIframe(u){const n=await _loadGapi(u),s=_window().gapi;return _assert(s,u,"internal-error"),n.open({where:document.body,url:getIframeUrl(u),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},f=>new Promise(async(d,y)=>{await f.restyle({setHideOnLeave:!1});const _=_createError(u,"network-request-failed"),A=_window().setTimeout(()=>{y(_)},PING_TIMEOUT.get());function R(){_window().clearTimeout(A),d(f)}f.ping(R).then(R,()=>{y(_)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(n){this.window=n,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(u,n,s,f=DEFAULT_WIDTH,d=DEFAULT_HEIGHT){const y=Math.max((window.screen.availHeight-d)/2,0).toString(),_=Math.max((window.screen.availWidth-f)/2,0).toString();let A="";const R={...BASE_POPUP_OPTIONS,width:f.toString(),height:d.toString(),top:y,left:_},I=getUA().toLowerCase();s&&(A=_isChromeIOS(I)?TARGET_BLANK:s),_isFirefox(I)&&(n=n||FIREFOX_EMPTY_URL,R.scrollbars="yes");const G=Object.entries(R).reduce((q,[K,Q])=>`${q}${K}=${Q},`,"");if(_isIOSStandalone(I)&&A!=="_self")return openAsNewWindowIOS(n||"",A),new AuthPopup(null);const Y=window.open(n||"",A,G);_assert(Y,u,"popup-blocked");try{Y.focus()}catch{}return new AuthPopup(Y)}function openAsNewWindowIOS(u,n){const s=document.createElement("a");s.href=u,s.target=n;const f=document.createEvent("MouseEvent");f.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(f)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(u,n,s,f,d,y){_assert(u.config.authDomain,u,"auth-domain-config-required"),_assert(u.config.apiKey,u,"invalid-api-key");const _={apiKey:u.config.apiKey,appName:u.name,authType:s,redirectUrl:f,v:SDK_VERSION,eventId:d};if(n instanceof FederatedAuthProvider){n.setDefaultLanguage(u.languageCode),_.providerId=n.providerId||"",isEmpty$1(n.getCustomParameters())||(_.customParameters=JSON.stringify(n.getCustomParameters()));for(const[G,Y]of Object.entries({}))_[G]=Y}if(n instanceof BaseOAuthProvider){const G=n.getScopes().filter(Y=>Y!=="");G.length>0&&(_.scopes=G.join(","))}u.tenantId&&(_.tid=u.tenantId);const A=_;for(const G of Object.keys(A))A[G]===void 0&&delete A[G];const R=await u._getAppCheckToken(),I=R?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(R)}`:"";return`${getHandlerBase(u)}?${querystring(A).slice(1)}${I}`}function getHandlerBase({config:u}){return u.emulator?_emulatorUrl(u,EMULATOR_WIDGET_PATH):`https://${u.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(n,s,f,d){var _;debugAssert((_=this.eventManagers[n._key()])==null?void 0:_.manager,"_initialize() not called before _openPopup()");const y=await _getRedirectUrl(n,s,f,_getCurrentUrl(),d);return _open(n,y,_generateEventId())}async _openRedirect(n,s,f,d){await this._originValidation(n);const y=await _getRedirectUrl(n,s,f,_getCurrentUrl(),d);return _setWindowLocation(y),new Promise(()=>{})}_initialize(n){const s=n._key();if(this.eventManagers[s]){const{manager:d,promise:y}=this.eventManagers[s];return d?Promise.resolve(d):(debugAssert(y,"If manager is not set, promise should be"),y)}const f=this.initAndGetManager(n);return this.eventManagers[s]={promise:f},f.catch(()=>{delete this.eventManagers[s]}),f}async initAndGetManager(n){const s=await _openIframe(n),f=new AuthEventManager(n);return s.register("authEvent",d=>(_assert(d==null?void 0:d.authEvent,n,"invalid-auth-event"),{status:f.onEvent(d.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[n._key()]={manager:f},this.iframes[n._key()]=s,f}_isIframeWebStorageSupported(n,s){this.iframes[n._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},d=>{var _;const y=(_=d==null?void 0:d[0])==null?void 0:_[WEB_STORAGE_SUPPORT_KEY];y!==void 0&&s(!!y),_fail(n,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(n){const s=n._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=_validateOrigin(n)),this.originValidationPromises[s]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$1="@firebase/auth",version$2="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(n){this.auth=n,this.internalListeners=new Map}getUid(){var n;return this.assertAuthConfigured(),((n=this.auth.currentUser)==null?void 0:n.uid)||null}async getToken(n){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(n)}:null}addAuthTokenListener(n){if(this.assertAuthConfigured(),this.internalListeners.has(n))return;const s=this.auth.onIdTokenChanged(f=>{n((f==null?void 0:f.stsTokenManager.accessToken)||null)});this.internalListeners.set(n,s),this.updateProactiveRefresh()}removeAuthTokenListener(n){this.assertAuthConfigured();const s=this.internalListeners.get(n);s&&(this.internalListeners.delete(n),s(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(u){switch(u){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(u){_registerComponent(new Component("auth",(n,{options:s})=>{const f=n.getProvider("app").getImmediate(),d=n.getProvider("heartbeat"),y=n.getProvider("app-check-internal"),{apiKey:_,authDomain:A}=f.options;_assert(_&&!_.includes(":"),"invalid-api-key",{appName:f.name});const R={apiKey:_,authDomain:A,clientPlatform:u,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(u)},I=new AuthImpl(f,d,y,R);return _initializeAuthInstance(I,s),I},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,s,f)=>{n.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",n=>{const s=_castAuth(n.getProvider("auth").getImmediate());return(f=>new AuthInterop(f))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$1,version$2,getVersionForPlatform(u)),registerVersion(name$1,version$2,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=300,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=u=>async n=>{const s=n&&await n.getIdTokenResult(),f=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(f&&f>authIdTokenMaxAge)return;const d=s==null?void 0:s.token;lastPostedIdToken!==d&&(lastPostedIdToken=d,await fetch(u,{method:d?"POST":"DELETE",headers:d?{Authorization:`Bearer ${d}`}:{}}))};function getAuth(u=getApp()){const n=_getProvider(u,"auth");if(n.isInitialized())return n.getImmediate();const s=initializeAuth(u,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),f=getExperimentalSetting("authTokenSyncURL");if(f&&typeof isSecureContext=="boolean"&&isSecureContext){const y=new URL(f,location.origin);if(location.origin===y.origin){const _=mintCookieFactory(y.toString());beforeAuthStateChanged(s,_,()=>_(s.currentUser)),onIdTokenChanged(s,A=>_(A))}}const d=getDefaultEmulatorHost("auth");return d&&connectAuthEmulator(s,`http://${d}`),s}function getScriptParentElement(){var u;return((u=document.getElementsByTagName("head"))==null?void 0:u[0])??document}_setExternalJSProvider({loadJS(u){return new Promise((n,s)=>{const f=document.createElement("script");f.setAttribute("src",u),f.onload=n,f.onerror=d=>{const y=_createError("internal-error");y.customData=d,s(y)},f.type="text/javascript",f.charset="UTF-8",getScriptParentElement().appendChild(f)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");const index_esm=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL,AuthCredential,EmailAuthCredential,EmailAuthProvider,FacebookAuthProvider,GithubAuthProvider,GoogleAuthProvider,OAuthCredential,TwitterAuthProvider,beforeAuthStateChanged,browserLocalPersistence,browserPopupRedirectResolver,browserSessionPersistence,connectAuthEmulator,createUserWithEmailAndPassword,getAuth,getIdTokenResult,inMemoryPersistence,indexedDBLocalPersistence,initializeAuth,onAuthStateChanged,onIdTokenChanged,prodErrorMap,reload,signInWithCredential,signInWithEmailAndPassword,signInWithPopup,signOut,updateProfile},Symbol.toStringTag,{value:"Module"}));var name="firebase",version$1="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name,version$1,"app");var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var u;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function n(de,se){function he(){}he.prototype=se.prototype,de.F=se.prototype,de.prototype=new he,de.prototype.constructor=de,de.D=function(Se,ve,Re){for(var Ee=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)Ee[Oe-2]=arguments[Oe];return se.prototype[ve].apply(Se,Ee)}}function s(){this.blockSize=-1}function f(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}n(f,s),f.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function d(de,se,he){he||(he=0);const Se=Array(16);if(typeof se=="string")for(var ve=0;ve<16;++ve)Se[ve]=se.charCodeAt(he++)|se.charCodeAt(he++)<<8|se.charCodeAt(he++)<<16|se.charCodeAt(he++)<<24;else for(ve=0;ve<16;++ve)Se[ve]=se[he++]|se[he++]<<8|se[he++]<<16|se[he++]<<24;se=de.g[0],he=de.g[1],ve=de.g[2];let Re=de.g[3],Ee;Ee=se+(Re^he&(ve^Re))+Se[0]+3614090360&4294967295,se=he+(Ee<<7&4294967295|Ee>>>25),Ee=Re+(ve^se&(he^ve))+Se[1]+3905402710&4294967295,Re=se+(Ee<<12&4294967295|Ee>>>20),Ee=ve+(he^Re&(se^he))+Se[2]+606105819&4294967295,ve=Re+(Ee<<17&4294967295|Ee>>>15),Ee=he+(se^ve&(Re^se))+Se[3]+3250441966&4294967295,he=ve+(Ee<<22&4294967295|Ee>>>10),Ee=se+(Re^he&(ve^Re))+Se[4]+4118548399&4294967295,se=he+(Ee<<7&4294967295|Ee>>>25),Ee=Re+(ve^se&(he^ve))+Se[5]+1200080426&4294967295,Re=se+(Ee<<12&4294967295|Ee>>>20),Ee=ve+(he^Re&(se^he))+Se[6]+2821735955&4294967295,ve=Re+(Ee<<17&4294967295|Ee>>>15),Ee=he+(se^ve&(Re^se))+Se[7]+4249261313&4294967295,he=ve+(Ee<<22&4294967295|Ee>>>10),Ee=se+(Re^he&(ve^Re))+Se[8]+1770035416&4294967295,se=he+(Ee<<7&4294967295|Ee>>>25),Ee=Re+(ve^se&(he^ve))+Se[9]+2336552879&4294967295,Re=se+(Ee<<12&4294967295|Ee>>>20),Ee=ve+(he^Re&(se^he))+Se[10]+4294925233&4294967295,ve=Re+(Ee<<17&4294967295|Ee>>>15),Ee=he+(se^ve&(Re^se))+Se[11]+2304563134&4294967295,he=ve+(Ee<<22&4294967295|Ee>>>10),Ee=se+(Re^he&(ve^Re))+Se[12]+1804603682&4294967295,se=he+(Ee<<7&4294967295|Ee>>>25),Ee=Re+(ve^se&(he^ve))+Se[13]+4254626195&4294967295,Re=se+(Ee<<12&4294967295|Ee>>>20),Ee=ve+(he^Re&(se^he))+Se[14]+2792965006&4294967295,ve=Re+(Ee<<17&4294967295|Ee>>>15),Ee=he+(se^ve&(Re^se))+Se[15]+1236535329&4294967295,he=ve+(Ee<<22&4294967295|Ee>>>10),Ee=se+(ve^Re&(he^ve))+Se[1]+4129170786&4294967295,se=he+(Ee<<5&4294967295|Ee>>>27),Ee=Re+(he^ve&(se^he))+Se[6]+3225465664&4294967295,Re=se+(Ee<<9&4294967295|Ee>>>23),Ee=ve+(se^he&(Re^se))+Se[11]+643717713&4294967295,ve=Re+(Ee<<14&4294967295|Ee>>>18),Ee=he+(Re^se&(ve^Re))+Se[0]+3921069994&4294967295,he=ve+(Ee<<20&4294967295|Ee>>>12),Ee=se+(ve^Re&(he^ve))+Se[5]+3593408605&4294967295,se=he+(Ee<<5&4294967295|Ee>>>27),Ee=Re+(he^ve&(se^he))+Se[10]+38016083&4294967295,Re=se+(Ee<<9&4294967295|Ee>>>23),Ee=ve+(se^he&(Re^se))+Se[15]+3634488961&4294967295,ve=Re+(Ee<<14&4294967295|Ee>>>18),Ee=he+(Re^se&(ve^Re))+Se[4]+3889429448&4294967295,he=ve+(Ee<<20&4294967295|Ee>>>12),Ee=se+(ve^Re&(he^ve))+Se[9]+568446438&4294967295,se=he+(Ee<<5&4294967295|Ee>>>27),Ee=Re+(he^ve&(se^he))+Se[14]+3275163606&4294967295,Re=se+(Ee<<9&4294967295|Ee>>>23),Ee=ve+(se^he&(Re^se))+Se[3]+4107603335&4294967295,ve=Re+(Ee<<14&4294967295|Ee>>>18),Ee=he+(Re^se&(ve^Re))+Se[8]+1163531501&4294967295,he=ve+(Ee<<20&4294967295|Ee>>>12),Ee=se+(ve^Re&(he^ve))+Se[13]+2850285829&4294967295,se=he+(Ee<<5&4294967295|Ee>>>27),Ee=Re+(he^ve&(se^he))+Se[2]+4243563512&4294967295,Re=se+(Ee<<9&4294967295|Ee>>>23),Ee=ve+(se^he&(Re^se))+Se[7]+1735328473&4294967295,ve=Re+(Ee<<14&4294967295|Ee>>>18),Ee=he+(Re^se&(ve^Re))+Se[12]+2368359562&4294967295,he=ve+(Ee<<20&4294967295|Ee>>>12),Ee=se+(he^ve^Re)+Se[5]+4294588738&4294967295,se=he+(Ee<<4&4294967295|Ee>>>28),Ee=Re+(se^he^ve)+Se[8]+2272392833&4294967295,Re=se+(Ee<<11&4294967295|Ee>>>21),Ee=ve+(Re^se^he)+Se[11]+1839030562&4294967295,ve=Re+(Ee<<16&4294967295|Ee>>>16),Ee=he+(ve^Re^se)+Se[14]+4259657740&4294967295,he=ve+(Ee<<23&4294967295|Ee>>>9),Ee=se+(he^ve^Re)+Se[1]+2763975236&4294967295,se=he+(Ee<<4&4294967295|Ee>>>28),Ee=Re+(se^he^ve)+Se[4]+1272893353&4294967295,Re=se+(Ee<<11&4294967295|Ee>>>21),Ee=ve+(Re^se^he)+Se[7]+4139469664&4294967295,ve=Re+(Ee<<16&4294967295|Ee>>>16),Ee=he+(ve^Re^se)+Se[10]+3200236656&4294967295,he=ve+(Ee<<23&4294967295|Ee>>>9),Ee=se+(he^ve^Re)+Se[13]+681279174&4294967295,se=he+(Ee<<4&4294967295|Ee>>>28),Ee=Re+(se^he^ve)+Se[0]+3936430074&4294967295,Re=se+(Ee<<11&4294967295|Ee>>>21),Ee=ve+(Re^se^he)+Se[3]+3572445317&4294967295,ve=Re+(Ee<<16&4294967295|Ee>>>16),Ee=he+(ve^Re^se)+Se[6]+76029189&4294967295,he=ve+(Ee<<23&4294967295|Ee>>>9),Ee=se+(he^ve^Re)+Se[9]+3654602809&4294967295,se=he+(Ee<<4&4294967295|Ee>>>28),Ee=Re+(se^he^ve)+Se[12]+3873151461&4294967295,Re=se+(Ee<<11&4294967295|Ee>>>21),Ee=ve+(Re^se^he)+Se[15]+530742520&4294967295,ve=Re+(Ee<<16&4294967295|Ee>>>16),Ee=he+(ve^Re^se)+Se[2]+3299628645&4294967295,he=ve+(Ee<<23&4294967295|Ee>>>9),Ee=se+(ve^(he|~Re))+Se[0]+4096336452&4294967295,se=he+(Ee<<6&4294967295|Ee>>>26),Ee=Re+(he^(se|~ve))+Se[7]+1126891415&4294967295,Re=se+(Ee<<10&4294967295|Ee>>>22),Ee=ve+(se^(Re|~he))+Se[14]+2878612391&4294967295,ve=Re+(Ee<<15&4294967295|Ee>>>17),Ee=he+(Re^(ve|~se))+Se[5]+4237533241&4294967295,he=ve+(Ee<<21&4294967295|Ee>>>11),Ee=se+(ve^(he|~Re))+Se[12]+1700485571&4294967295,se=he+(Ee<<6&4294967295|Ee>>>26),Ee=Re+(he^(se|~ve))+Se[3]+2399980690&4294967295,Re=se+(Ee<<10&4294967295|Ee>>>22),Ee=ve+(se^(Re|~he))+Se[10]+4293915773&4294967295,ve=Re+(Ee<<15&4294967295|Ee>>>17),Ee=he+(Re^(ve|~se))+Se[1]+2240044497&4294967295,he=ve+(Ee<<21&4294967295|Ee>>>11),Ee=se+(ve^(he|~Re))+Se[8]+1873313359&4294967295,se=he+(Ee<<6&4294967295|Ee>>>26),Ee=Re+(he^(se|~ve))+Se[15]+4264355552&4294967295,Re=se+(Ee<<10&4294967295|Ee>>>22),Ee=ve+(se^(Re|~he))+Se[6]+2734768916&4294967295,ve=Re+(Ee<<15&4294967295|Ee>>>17),Ee=he+(Re^(ve|~se))+Se[13]+1309151649&4294967295,he=ve+(Ee<<21&4294967295|Ee>>>11),Ee=se+(ve^(he|~Re))+Se[4]+4149444226&4294967295,se=he+(Ee<<6&4294967295|Ee>>>26),Ee=Re+(he^(se|~ve))+Se[11]+3174756917&4294967295,Re=se+(Ee<<10&4294967295|Ee>>>22),Ee=ve+(se^(Re|~he))+Se[2]+718787259&4294967295,ve=Re+(Ee<<15&4294967295|Ee>>>17),Ee=he+(Re^(ve|~se))+Se[9]+3951481745&4294967295,de.g[0]=de.g[0]+se&4294967295,de.g[1]=de.g[1]+(ve+(Ee<<21&4294967295|Ee>>>11))&4294967295,de.g[2]=de.g[2]+ve&4294967295,de.g[3]=de.g[3]+Re&4294967295}f.prototype.v=function(de,se){se===void 0&&(se=de.length);const he=se-this.blockSize,Se=this.C;let ve=this.h,Re=0;for(;Re<se;){if(ve==0)for(;Re<=he;)d(this,de,Re),Re+=this.blockSize;if(typeof de=="string"){for(;Re<se;)if(Se[ve++]=de.charCodeAt(Re++),ve==this.blockSize){d(this,Se),ve=0;break}}else for(;Re<se;)if(Se[ve++]=de[Re++],ve==this.blockSize){d(this,Se),ve=0;break}}this.h=ve,this.o+=se},f.prototype.A=function(){var de=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);de[0]=128;for(var se=1;se<de.length-8;++se)de[se]=0;se=this.o*8;for(var he=de.length-8;he<de.length;++he)de[he]=se&255,se/=256;for(this.v(de),de=Array(16),se=0,he=0;he<4;++he)for(let Se=0;Se<32;Se+=8)de[se++]=this.g[he]>>>Se&255;return de};function y(de,se){var he=A;return Object.prototype.hasOwnProperty.call(he,de)?he[de]:he[de]=se(de)}function _(de,se){this.h=se;const he=[];let Se=!0;for(let ve=de.length-1;ve>=0;ve--){const Re=de[ve]|0;Se&&Re==se||(he[ve]=Re,Se=!1)}this.g=he}var A={};function R(de){return-128<=de&&de<128?y(de,function(se){return new _([se|0],se<0?-1:0)}):new _([de|0],de<0?-1:0)}function I(de){if(isNaN(de)||!isFinite(de))return Y;if(de<0)return te(I(-de));const se=[];let he=1;for(let Se=0;de>=he;Se++)se[Se]=de/he|0,he*=4294967296;return new _(se,0)}function G(de,se){if(de.length==0)throw Error("number format error: empty string");if(se=se||10,se<2||36<se)throw Error("radix out of range: "+se);if(de.charAt(0)=="-")return te(G(de.substring(1),se));if(de.indexOf("-")>=0)throw Error('number format error: interior "-" character');const he=I(Math.pow(se,8));let Se=Y;for(let Re=0;Re<de.length;Re+=8){var ve=Math.min(8,de.length-Re);const Ee=parseInt(de.substring(Re,Re+ve),se);ve<8?(ve=I(Math.pow(se,ve)),Se=Se.j(ve).add(I(Ee))):(Se=Se.j(he),Se=Se.add(I(Ee)))}return Se}var Y=R(0),q=R(1),K=R(16777216);u=_.prototype,u.m=function(){if(ne(this))return-te(this).m();let de=0,se=1;for(let he=0;he<this.g.length;he++){const Se=this.i(he);de+=(Se>=0?Se:4294967296+Se)*se,se*=4294967296}return de},u.toString=function(de){if(de=de||10,de<2||36<de)throw Error("radix out of range: "+de);if(Q(this))return"0";if(ne(this))return"-"+te(this).toString(de);const se=I(Math.pow(de,6));var he=this;let Se="";for(;;){const ve=le(he,se).g;he=J(he,ve.j(se));let Re=((he.g.length>0?he.g[0]:he.h)>>>0).toString(de);if(he=ve,Q(he))return Re+Se;for(;Re.length<6;)Re="0"+Re;Se=Re+Se}},u.i=function(de){return de<0?0:de<this.g.length?this.g[de]:this.h};function Q(de){if(de.h!=0)return!1;for(let se=0;se<de.g.length;se++)if(de.g[se]!=0)return!1;return!0}function ne(de){return de.h==-1}u.l=function(de){return de=J(this,de),ne(de)?-1:Q(de)?0:1};function te(de){const se=de.g.length,he=[];for(let Se=0;Se<se;Se++)he[Se]=~de.g[Se];return new _(he,~de.h).add(q)}u.abs=function(){return ne(this)?te(this):this},u.add=function(de){const se=Math.max(this.g.length,de.g.length),he=[];let Se=0;for(let ve=0;ve<=se;ve++){let Re=Se+(this.i(ve)&65535)+(de.i(ve)&65535),Ee=(Re>>>16)+(this.i(ve)>>>16)+(de.i(ve)>>>16);Se=Ee>>>16,Re&=65535,Ee&=65535,he[ve]=Ee<<16|Re}return new _(he,he[he.length-1]&-2147483648?-1:0)};function J(de,se){return de.add(te(se))}u.j=function(de){if(Q(this)||Q(de))return Y;if(ne(this))return ne(de)?te(this).j(te(de)):te(te(this).j(de));if(ne(de))return te(this.j(te(de)));if(this.l(K)<0&&de.l(K)<0)return I(this.m()*de.m());const se=this.g.length+de.g.length,he=[];for(var Se=0;Se<2*se;Se++)he[Se]=0;for(Se=0;Se<this.g.length;Se++)for(let ve=0;ve<de.g.length;ve++){const Re=this.i(Se)>>>16,Ee=this.i(Se)&65535,Oe=de.i(ve)>>>16,Ne=de.i(ve)&65535;he[2*Se+2*ve]+=Ee*Ne,ie(he,2*Se+2*ve),he[2*Se+2*ve+1]+=Re*Ne,ie(he,2*Se+2*ve+1),he[2*Se+2*ve+1]+=Ee*Oe,ie(he,2*Se+2*ve+1),he[2*Se+2*ve+2]+=Re*Oe,ie(he,2*Se+2*ve+2)}for(de=0;de<se;de++)he[de]=he[2*de+1]<<16|he[2*de];for(de=se;de<2*se;de++)he[de]=0;return new _(he,0)};function ie(de,se){for(;(de[se]&65535)!=de[se];)de[se+1]+=de[se]>>>16,de[se]&=65535,se++}function re(de,se){this.g=de,this.h=se}function le(de,se){if(Q(se))throw Error("division by zero");if(Q(de))return new re(Y,Y);if(ne(de))return se=le(te(de),se),new re(te(se.g),te(se.h));if(ne(se))return se=le(de,te(se)),new re(te(se.g),se.h);if(de.g.length>30){if(ne(de)||ne(se))throw Error("slowDivide_ only works with positive integers.");for(var he=q,Se=se;Se.l(de)<=0;)he=fe(he),Se=fe(Se);var ve=pe(he,1),Re=pe(Se,1);for(Se=pe(Se,2),he=pe(he,2);!Q(Se);){var Ee=Re.add(Se);Ee.l(de)<=0&&(ve=ve.add(he),Re=Ee),Se=pe(Se,1),he=pe(he,1)}return se=J(de,ve.j(se)),new re(ve,se)}for(ve=Y;de.l(se)>=0;){for(he=Math.max(1,Math.floor(de.m()/se.m())),Se=Math.ceil(Math.log(he)/Math.LN2),Se=Se<=48?1:Math.pow(2,Se-48),Re=I(he),Ee=Re.j(se);ne(Ee)||Ee.l(de)>0;)he-=Se,Re=I(he),Ee=Re.j(se);Q(Re)&&(Re=q),ve=ve.add(Re),de=J(de,Ee)}return new re(ve,de)}u.B=function(de){return le(this,de).h},u.and=function(de){const se=Math.max(this.g.length,de.g.length),he=[];for(let Se=0;Se<se;Se++)he[Se]=this.i(Se)&de.i(Se);return new _(he,this.h&de.h)},u.or=function(de){const se=Math.max(this.g.length,de.g.length),he=[];for(let Se=0;Se<se;Se++)he[Se]=this.i(Se)|de.i(Se);return new _(he,this.h|de.h)},u.xor=function(de){const se=Math.max(this.g.length,de.g.length),he=[];for(let Se=0;Se<se;Se++)he[Se]=this.i(Se)^de.i(Se);return new _(he,this.h^de.h)};function fe(de){const se=de.g.length+1,he=[];for(let Se=0;Se<se;Se++)he[Se]=de.i(Se)<<1|de.i(Se-1)>>>31;return new _(he,de.h)}function pe(de,se){const he=se>>5;se%=32;const Se=de.g.length-he,ve=[];for(let Re=0;Re<Se;Re++)ve[Re]=se>0?de.i(Re+he)>>>se|de.i(Re+he+1)<<32-se:de.i(Re+he);return new _(ve,de.h)}f.prototype.digest=f.prototype.A,f.prototype.reset=f.prototype.u,f.prototype.update=f.prototype.v,Md5=f,_.prototype.add=_.prototype.add,_.prototype.multiply=_.prototype.j,_.prototype.modulo=_.prototype.B,_.prototype.compare=_.prototype.l,_.prototype.toNumber=_.prototype.m,_.prototype.toString=_.prototype.toString,_.prototype.getBits=_.prototype.i,_.fromNumber=I,_.fromString=G,Integer=_}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var u,n=Object.defineProperty;function s(ae){ae=[typeof globalThis=="object"&&globalThis,ae,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var be=0;be<ae.length;++be){var Ce=ae[be];if(Ce&&Ce.Math==Math)return Ce}throw Error("Cannot find global object")}var f=s(this);function d(ae,be){if(be)e:{var Ce=f;ae=ae.split(".");for(var Ue=0;Ue<ae.length-1;Ue++){var xt=ae[Ue];if(!(xt in Ce))break e;Ce=Ce[xt]}ae=ae[ae.length-1],Ue=Ce[ae],be=be(Ue),be!=Ue&&be!=null&&n(Ce,ae,{configurable:!0,writable:!0,value:be})}}d("Symbol.dispose",function(ae){return ae||Symbol("Symbol.dispose")}),d("Array.prototype.values",function(ae){return ae||function(){return this[Symbol.iterator]()}}),d("Object.entries",function(ae){return ae||function(be){var Ce=[],Ue;for(Ue in be)Object.prototype.hasOwnProperty.call(be,Ue)&&Ce.push([Ue,be[Ue]]);return Ce}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var y=y||{},_=this||self;function A(ae){var be=typeof ae;return be=="object"&&ae!=null||be=="function"}function R(ae,be,Ce){return ae.call.apply(ae.bind,arguments)}function I(ae,be,Ce){return I=R,I.apply(null,arguments)}function G(ae,be){var Ce=Array.prototype.slice.call(arguments,1);return function(){var Ue=Ce.slice();return Ue.push.apply(Ue,arguments),ae.apply(this,Ue)}}function Y(ae,be){function Ce(){}Ce.prototype=be.prototype,ae.Z=be.prototype,ae.prototype=new Ce,ae.prototype.constructor=ae,ae.Ob=function(Ue,xt,un){for(var ii=Array(arguments.length-2),ki=2;ki<arguments.length;ki++)ii[ki-2]=arguments[ki];return be.prototype[xt].apply(Ue,ii)}}var q=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?ae=>ae&&AsyncContext.Snapshot.wrap(ae):ae=>ae;function K(ae){const be=ae.length;if(be>0){const Ce=Array(be);for(let Ue=0;Ue<be;Ue++)Ce[Ue]=ae[Ue];return Ce}return[]}function Q(ae,be){for(let Ue=1;Ue<arguments.length;Ue++){const xt=arguments[Ue];var Ce=typeof xt;if(Ce=Ce!="object"?Ce:xt?Array.isArray(xt)?"array":Ce:"null",Ce=="array"||Ce=="object"&&typeof xt.length=="number"){Ce=ae.length||0;const un=xt.length||0;ae.length=Ce+un;for(let ii=0;ii<un;ii++)ae[Ce+ii]=xt[ii]}else ae.push(xt)}}class ne{constructor(be,Ce){this.i=be,this.j=Ce,this.h=0,this.g=null}get(){let be;return this.h>0?(this.h--,be=this.g,this.g=be.next,be.next=null):be=this.i(),be}}function te(ae){_.setTimeout(()=>{throw ae},0)}function J(){var ae=de;let be=null;return ae.g&&(be=ae.g,ae.g=ae.g.next,ae.g||(ae.h=null),be.next=null),be}class ie{constructor(){this.h=this.g=null}add(be,Ce){const Ue=re.get();Ue.set(be,Ce),this.h?this.h.next=Ue:this.g=Ue,this.h=Ue}}var re=new ne(()=>new le,ae=>ae.reset());class le{constructor(){this.next=this.g=this.h=null}set(be,Ce){this.h=be,this.g=Ce,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,pe=!1,de=new ie,se=()=>{const ae=Promise.resolve(void 0);fe=()=>{ae.then(he)}};function he(){for(var ae;ae=J();){try{ae.h.call(ae.g)}catch(Ce){te(Ce)}var be=re;be.j(ae),be.h<100&&(be.h++,ae.next=be.g,be.g=ae)}pe=!1}function Se(){this.u=this.u,this.C=this.C}Se.prototype.u=!1,Se.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Se.prototype[Symbol.dispose]=function(){this.dispose()},Se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(ae,be){this.type=ae,this.g=this.target=be,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Re=(function(){if(!_.addEventListener||!Object.defineProperty)return!1;var ae=!1,be=Object.defineProperty({},"passive",{get:function(){ae=!0}});try{const Ce=()=>{};_.addEventListener("test",Ce,be),_.removeEventListener("test",Ce,be)}catch{}return ae})();function Ee(ae){return/^[\s\xa0]*$/.test(ae)}function Oe(ae,be){ve.call(this,ae?ae.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,ae&&this.init(ae,be)}Y(Oe,ve),Oe.prototype.init=function(ae,be){const Ce=this.type=ae.type,Ue=ae.changedTouches&&ae.changedTouches.length?ae.changedTouches[0]:null;this.target=ae.target||ae.srcElement,this.g=be,be=ae.relatedTarget,be||(Ce=="mouseover"?be=ae.fromElement:Ce=="mouseout"&&(be=ae.toElement)),this.relatedTarget=be,Ue?(this.clientX=Ue.clientX!==void 0?Ue.clientX:Ue.pageX,this.clientY=Ue.clientY!==void 0?Ue.clientY:Ue.pageY,this.screenX=Ue.screenX||0,this.screenY=Ue.screenY||0):(this.clientX=ae.clientX!==void 0?ae.clientX:ae.pageX,this.clientY=ae.clientY!==void 0?ae.clientY:ae.pageY,this.screenX=ae.screenX||0,this.screenY=ae.screenY||0),this.button=ae.button,this.key=ae.key||"",this.ctrlKey=ae.ctrlKey,this.altKey=ae.altKey,this.shiftKey=ae.shiftKey,this.metaKey=ae.metaKey,this.pointerId=ae.pointerId||0,this.pointerType=ae.pointerType,this.state=ae.state,this.i=ae,ae.defaultPrevented&&Oe.Z.h.call(this)},Oe.prototype.h=function(){Oe.Z.h.call(this);const ae=this.i;ae.preventDefault?ae.preventDefault():ae.returnValue=!1};var Ne="closure_listenable_"+(Math.random()*1e6|0),ye=0;function Ae(ae,be,Ce,Ue,xt){this.listener=ae,this.proxy=null,this.src=be,this.type=Ce,this.capture=!!Ue,this.ha=xt,this.key=++ye,this.da=this.fa=!1}function _e(ae){ae.da=!0,ae.listener=null,ae.proxy=null,ae.src=null,ae.ha=null}function Te(ae,be,Ce){for(const Ue in ae)be.call(Ce,ae[Ue],Ue,ae)}function we(ae,be){for(const Ce in ae)be.call(void 0,ae[Ce],Ce,ae)}function ge(ae){const be={};for(const Ce in ae)be[Ce]=ae[Ce];return be}const De="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ze(ae,be){let Ce,Ue;for(let xt=1;xt<arguments.length;xt++){Ue=arguments[xt];for(Ce in Ue)ae[Ce]=Ue[Ce];for(let un=0;un<De.length;un++)Ce=De[un],Object.prototype.hasOwnProperty.call(Ue,Ce)&&(ae[Ce]=Ue[Ce])}}function He(ae){this.src=ae,this.g={},this.h=0}He.prototype.add=function(ae,be,Ce,Ue,xt){const un=ae.toString();ae=this.g[un],ae||(ae=this.g[un]=[],this.h++);const ii=Ge(ae,be,Ue,xt);return ii>-1?(be=ae[ii],Ce||(be.fa=!1)):(be=new Ae(be,this.src,un,!!Ue,xt),be.fa=Ce,ae.push(be)),be};function yt(ae,be){const Ce=be.type;if(Ce in ae.g){var Ue=ae.g[Ce],xt=Array.prototype.indexOf.call(Ue,be,void 0),un;(un=xt>=0)&&Array.prototype.splice.call(Ue,xt,1),un&&(_e(be),ae.g[Ce].length==0&&(delete ae.g[Ce],ae.h--))}}function Ge(ae,be,Ce,Ue){for(let xt=0;xt<ae.length;++xt){const un=ae[xt];if(!un.da&&un.listener==be&&un.capture==!!Ce&&un.ha==Ue)return xt}return-1}var lt="closure_lm_"+(Math.random()*1e6|0),Mt={};function hn(ae,be,Ce,Ue,xt){if(Array.isArray(be)){for(let un=0;un<be.length;un++)hn(ae,be[un],Ce,Ue,xt);return null}return Ce=je(Ce),ae&&ae[Ne]?ae.J(be,Ce,A(Ue)?!!Ue.capture:!1,xt):Fn(ae,be,Ce,!1,Ue,xt)}function Fn(ae,be,Ce,Ue,xt,un){if(!be)throw Error("Invalid event type");const ii=A(xt)?!!xt.capture:!!xt;let ki=dn(ae);if(ki||(ae[lt]=ki=new He(ae)),Ce=ki.add(be,Ce,Ue,ii,un),Ce.proxy)return Ce;if(Ue=Vn(),Ce.proxy=Ue,Ue.src=ae,Ue.listener=Ce,ae.addEventListener)Re||(xt=ii),xt===void 0&&(xt=!1),ae.addEventListener(be.toString(),Ue,xt);else if(ae.attachEvent)ae.attachEvent(qe(be.toString()),Ue);else if(ae.addListener&&ae.removeListener)ae.addListener(Ue);else throw Error("addEventListener and attachEvent are unavailable.");return Ce}function Vn(){function ae(Ce){return be.call(ae.src,ae.listener,Ce)}const be=vn;return ae}function ni(ae,be,Ce,Ue,xt){if(Array.isArray(be))for(var un=0;un<be.length;un++)ni(ae,be[un],Ce,Ue,xt);else Ue=A(Ue)?!!Ue.capture:!!Ue,Ce=je(Ce),ae&&ae[Ne]?(ae=ae.i,un=String(be).toString(),un in ae.g&&(be=ae.g[un],Ce=Ge(be,Ce,Ue,xt),Ce>-1&&(_e(be[Ce]),Array.prototype.splice.call(be,Ce,1),be.length==0&&(delete ae.g[un],ae.h--)))):ae&&(ae=dn(ae))&&(be=ae.g[be.toString()],ae=-1,be&&(ae=Ge(be,Ce,Ue,xt)),(Ce=ae>-1?be[ae]:null)&&In(Ce))}function In(ae){if(typeof ae!="number"&&ae&&!ae.da){var be=ae.src;if(be&&be[Ne])yt(be.i,ae);else{var Ce=ae.type,Ue=ae.proxy;be.removeEventListener?be.removeEventListener(Ce,Ue,ae.capture):be.detachEvent?be.detachEvent(qe(Ce),Ue):be.addListener&&be.removeListener&&be.removeListener(Ue),(Ce=dn(be))?(yt(Ce,ae),Ce.h==0&&(Ce.src=null,be[lt]=null)):_e(ae)}}}function qe(ae){return ae in Mt?Mt[ae]:Mt[ae]="on"+ae}function vn(ae,be){if(ae.da)ae=!0;else{be=new Oe(be,this);const Ce=ae.listener,Ue=ae.ha||ae.src;ae.fa&&In(ae),ae=Ce.call(Ue,be)}return ae}function dn(ae){return ae=ae[lt],ae instanceof He?ae:null}var Mn="__closure_events_fn_"+(Math.random()*1e9>>>0);function je(ae){return typeof ae=="function"?ae:(ae[Mn]||(ae[Mn]=function(be){return ae.handleEvent(be)}),ae[Mn])}function qn(){Se.call(this),this.i=new He(this),this.M=this,this.G=null}Y(qn,Se),qn.prototype[Ne]=!0,qn.prototype.removeEventListener=function(ae,be,Ce,Ue){ni(this,ae,be,Ce,Ue)};function An(ae,be){var Ce,Ue=ae.G;if(Ue)for(Ce=[];Ue;Ue=Ue.G)Ce.push(Ue);if(ae=ae.M,Ue=be.type||be,typeof be=="string")be=new ve(be,ae);else if(be instanceof ve)be.target=be.target||ae;else{var xt=be;be=new ve(Ue,ae),ze(be,xt)}xt=!0;let un,ii;if(Ce)for(ii=Ce.length-1;ii>=0;ii--)un=be.g=Ce[ii],xt=ri(un,Ue,!0,be)&&xt;if(un=be.g=ae,xt=ri(un,Ue,!0,be)&&xt,xt=ri(un,Ue,!1,be)&&xt,Ce)for(ii=0;ii<Ce.length;ii++)un=be.g=Ce[ii],xt=ri(un,Ue,!1,be)&&xt}qn.prototype.N=function(){if(qn.Z.N.call(this),this.i){var ae=this.i;for(const be in ae.g){const Ce=ae.g[be];for(let Ue=0;Ue<Ce.length;Ue++)_e(Ce[Ue]);delete ae.g[be],ae.h--}}this.G=null},qn.prototype.J=function(ae,be,Ce,Ue){return this.i.add(String(ae),be,!1,Ce,Ue)},qn.prototype.K=function(ae,be,Ce,Ue){return this.i.add(String(ae),be,!0,Ce,Ue)};function ri(ae,be,Ce,Ue){if(be=ae.i.g[String(be)],!be)return!0;be=be.concat();let xt=!0;for(let un=0;un<be.length;++un){const ii=be[un];if(ii&&!ii.da&&ii.capture==Ce){const ki=ii.listener,jr=ii.ha||ii.src;ii.fa&&yt(ae.i,ii),xt=ki.call(jr,Ue)!==!1&&xt}}return xt&&!Ue.defaultPrevented}function On(ae,be){if(typeof ae!="function")if(ae&&typeof ae.handleEvent=="function")ae=I(ae.handleEvent,ae);else throw Error("Invalid listener argument");return Number(be)>2147483647?-1:_.setTimeout(ae,be||0)}function Be(ae){ae.g=On(()=>{ae.g=null,ae.i&&(ae.i=!1,Be(ae))},ae.l);const be=ae.h;ae.h=null,ae.m.apply(null,be)}class Pe extends Se{constructor(be,Ce){super(),this.m=be,this.l=Ce,this.h=null,this.i=!1,this.g=null}j(be){this.h=arguments,this.g?this.i=!0:Be(this)}N(){super.N(),this.g&&(_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ke(ae){Se.call(this),this.h=ae,this.g={}}Y(Ke,Se);var Ft=[];function bn(ae){Te(ae.g,function(be,Ce){this.g.hasOwnProperty(Ce)&&In(be)},ae),ae.g={}}Ke.prototype.N=function(){Ke.Z.N.call(this),bn(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ln=_.JSON.stringify,Zn=_.JSON.parse,Gn=class{stringify(ae){return _.JSON.stringify(ae,void 0)}parse(ae){return _.JSON.parse(ae,void 0)}};function fi(){}function xi(){}var wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Tn(){ve.call(this,"d")}Y(Tn,ve);function oi(){ve.call(this,"c")}Y(oi,ve);var Jn={},ei=null;function gi(){return ei=ei||new qn}Jn.Ia="serverreachability";function dt(ae){ve.call(this,Jn.Ia,ae)}Y(dt,ve);function kt(ae){const be=gi();An(be,new dt(be))}Jn.STAT_EVENT="statevent";function Hn(ae,be){ve.call(this,Jn.STAT_EVENT,ae),this.stat=be}Y(Hn,ve);function Kn(ae){const be=gi();An(be,new Hn(be,ae))}Jn.Ja="timingevent";function Bn(ae,be){ve.call(this,Jn.Ja,ae),this.size=be}Y(Bn,ve);function pn(ae,be){if(typeof ae!="function")throw Error("Fn must not be null and must be a function");return _.setTimeout(function(){ae()},be)}function ci(){this.g=!0}ci.prototype.ua=function(){this.g=!1};function Ai(ae,be,Ce,Ue,xt,un){ae.info(function(){if(ae.g)if(un){var ii="",ki=un.split("&");for(let Qi=0;Qi<ki.length;Qi++){var jr=ki[Qi].split("=");if(jr.length>1){const Rr=jr[0];jr=jr[1];const Vs=Rr.split("_");ii=Vs.length>=2&&Vs[1]=="type"?ii+(Rr+"="+jr+"&"):ii+(Rr+"=redacted&")}}}else ii=null;else ii=un;return"XMLHTTP REQ ("+Ue+") [attempt "+xt+"]: "+be+`
`+Ce+`
`+ii})}function ji(ae,be,Ce,Ue,xt,un,ii){ae.info(function(){return"XMLHTTP RESP ("+Ue+") [ attempt "+xt+"]: "+be+`
`+Ce+`
`+un+" "+ii})}function Ii(ae,be,Ce,Ue){ae.info(function(){return"XMLHTTP TEXT ("+be+"): "+fs(ae,Ce)+(Ue?" "+Ue:"")})}function Jr(ae,be){ae.info(function(){return"TIMEOUT: "+be})}ci.prototype.info=function(){};function fs(ae,be){if(!ae.g)return be;if(!be)return null;try{const un=JSON.parse(be);if(un){for(ae=0;ae<un.length;ae++)if(Array.isArray(un[ae])){var Ce=un[ae];if(!(Ce.length<2)){var Ue=Ce[1];if(Array.isArray(Ue)&&!(Ue.length<1)){var xt=Ue[0];if(xt!="noop"&&xt!="stop"&&xt!="close")for(let ii=1;ii<Ue.length;ii++)Ue[ii]=""}}}}return ln(un)}catch{return be}}var As={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Hs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},na;function Is(){}Y(Is,fi),Is.prototype.g=function(){return new XMLHttpRequest},na=new Is;function $r(ae){return encodeURIComponent(String(ae))}function es(ae){var be=1;ae=ae.split(":");const Ce=[];for(;be>0&&ae.length;)Ce.push(ae.shift()),be--;return ae.length&&Ce.push(ae.join(":")),Ce}function bi(ae,be,Ce,Ue){this.j=ae,this.i=be,this.l=Ce,this.S=Ue||1,this.V=new Ke(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ds}function ds(){this.i=null,this.g="",this.h=!1}var pr={},Ie={};function Fe(ae,be,Ce){ae.M=1,ae.A=pi(zn(be)),ae.u=Ce,ae.R=!0,We(ae,null)}function We(ae,be){ae.F=Date.now(),jn(ae),ae.B=zn(ae.A);var Ce=ae.B,Ue=ae.S;Array.isArray(Ue)||(Ue=[String(Ue)]),Ya(Ce.i,"t",Ue),ae.C=0,Ce=ae.j.L,ae.h=new ds,ae.g=eu(ae.j,Ce?be:null,!ae.u),ae.P>0&&(ae.O=new Pe(I(ae.Y,ae,ae.g),ae.P)),be=ae.V,Ce=ae.g,Ue=ae.ba;var xt="readystatechange";Array.isArray(xt)||(xt&&(Ft[0]=xt.toString()),xt=Ft);for(let un=0;un<xt.length;un++){const ii=hn(Ce,xt[un],Ue||be.handleEvent,!1,be.h||be);if(!ii)break;be.g[ii.key]=ii}be=ae.J?ge(ae.J):{},ae.u?(ae.v||(ae.v="POST"),be["Content-Type"]="application/x-www-form-urlencoded",ae.g.ea(ae.B,ae.v,ae.u,be)):(ae.v="GET",ae.g.ea(ae.B,ae.v,null,be)),kt(),Ai(ae.i,ae.v,ae.B,ae.l,ae.S,ae.u)}bi.prototype.ba=function(ae){ae=ae.target;const be=this.O;be&&Ba(ae)==3?be.j():this.Y(ae)},bi.prototype.Y=function(ae){try{if(ae==this.g)e:{const ki=Ba(this.g),jr=this.g.ya(),Qi=this.g.ca();if(!(ki<3)&&(ki!=3||this.g&&(this.h.h||this.g.la()||ps(this.g)))){this.K||ki!=4||jr==7||(jr==8||Qi<=0?kt(3):kt(2)),Yn(this);var be=this.g.ca();this.X=be;var Ce=Nt(this);if(this.o=be==200,ji(this.i,this.v,this.B,this.l,this.S,ki,be),this.o){if(this.U&&!this.L){t:{if(this.g){var Ue,xt=this.g;if((Ue=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ee(Ue)){var un=Ue;break t}}un=null}if(ae=un)Ii(this.i,this.l,ae,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ke(this,ae);else{this.o=!1,this.m=3,Kn(12),Xn(this),$n(this);break e}}if(this.R){ae=!0;let Rr;for(;!this.K&&this.C<Ce.length;)if(Rr=yn(this,Ce),Rr==Ie){ki==4&&(this.m=4,Kn(14),ae=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(Rr==pr){this.m=4,Kn(15),Ii(this.i,this.l,Ce,"[Invalid Chunk]"),ae=!1;break}else Ii(this.i,this.l,Rr,null),ke(this,Rr);if(mn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ki!=4||Ce.length!=0||this.h.h||(this.m=1,Kn(16),ae=!1),this.o=this.o&&ae,!ae)Ii(this.i,this.l,Ce,"[Invalid Chunked Response]"),Xn(this),$n(this);else if(Ce.length>0&&!this.W){this.W=!0;var ii=this.j;ii.g==this&&ii.aa&&!ii.P&&(ii.j.info("Great, no buffering proxy detected. Bytes received: "+Ce.length),hc(ii),ii.P=!0,Kn(11))}}else Ii(this.i,this.l,Ce,null),ke(this,Ce);ki==4&&Xn(this),this.o&&!this.K&&(ki==4?Qc(this.j,this):(this.o=!1,jn(this)))}else Qa(this.g),be==400&&Ce.indexOf("Unknown SID")>0?(this.m=3,Kn(12)):(this.m=0,Kn(13)),Xn(this),$n(this)}}}catch{}finally{}};function Nt(ae){if(!mn(ae))return ae.g.la();const be=ps(ae.g);if(be==="")return"";let Ce="";const Ue=be.length,xt=Ba(ae.g)==4;if(!ae.h.i){if(typeof TextDecoder>"u")return Xn(ae),$n(ae),"";ae.h.i=new _.TextDecoder}for(let un=0;un<Ue;un++)ae.h.h=!0,Ce+=ae.h.i.decode(be[un],{stream:!(xt&&un==Ue-1)});return be.length=0,ae.h.g+=Ce,ae.C=0,ae.h.g}function mn(ae){return ae.g?ae.v=="GET"&&ae.M!=2&&ae.j.Aa:!1}function yn(ae,be){var Ce=ae.C,Ue=be.indexOf(`
`,Ce);return Ue==-1?Ie:(Ce=Number(be.substring(Ce,Ue)),isNaN(Ce)?pr:(Ue+=1,Ue+Ce>be.length?Ie:(be=be.slice(Ue,Ue+Ce),ae.C=Ue+Ce,be)))}bi.prototype.cancel=function(){this.K=!0,Xn(this)};function jn(ae){ae.T=Date.now()+ae.H,Dn(ae,ae.H)}function Dn(ae,be){if(ae.D!=null)throw Error("WatchDog timer not null");ae.D=pn(I(ae.aa,ae),be)}function Yn(ae){ae.D&&(_.clearTimeout(ae.D),ae.D=null)}bi.prototype.aa=function(){this.D=null;const ae=Date.now();ae-this.T>=0?(Jr(this.i,this.B),this.M!=2&&(kt(),Kn(17)),Xn(this),this.m=2,$n(this)):Dn(this,this.T-ae)};function $n(ae){ae.j.I==0||ae.K||Qc(ae.j,ae)}function Xn(ae){Yn(ae);var be=ae.O;be&&typeof be.dispose=="function"&&be.dispose(),ae.O=null,bn(ae.V),ae.g&&(be=ae.g,ae.g=null,be.abort(),be.dispose())}function ke(ae,be){try{var Ce=ae.j;if(Ce.I!=0&&(Ce.g==ae||En(Ce.h,ae))){if(!ae.L&&En(Ce.h,ae)&&Ce.I==3){try{var Ue=Ce.Ba.g.parse(be)}catch{Ue=null}if(Array.isArray(Ue)&&Ue.length==3){var xt=Ue;if(xt[0]==0){e:if(!Ce.v){if(Ce.g)if(Ce.g.F+3e3<ae.F)fc(Ce),Ja(Ce);else break e;Jo(Ce),Kn(18)}}else Ce.xa=xt[1],0<Ce.xa-Ce.K&&xt[2]<37500&&Ce.F&&Ce.A==0&&!Ce.C&&(Ce.C=pn(I(Ce.Va,Ce),6e3));Je(Ce.h)<=1&&Ce.ta&&(Ce.ta=void 0)}else ya(Ce,11)}else if((ae.L||Ce.g==ae)&&fc(Ce),!Ee(be))for(xt=Ce.Ba.g.parse(be),be=0;be<xt.length;be++){let Qi=xt[be];const Rr=Qi[0];if(!(Rr<=Ce.K))if(Ce.K=Rr,Qi=Qi[1],Ce.I==2)if(Qi[0]=="c"){Ce.M=Qi[1],Ce.ba=Qi[2];const Vs=Qi[3];Vs!=null&&(Ce.ka=Vs,Ce.j.info("VER="+Ce.ka));const za=Qi[4];za!=null&&(Ce.za=za,Ce.j.info("SVER="+Ce.za));const Ga=Qi[5];Ga!=null&&typeof Ga=="number"&&Ga>0&&(Ue=1.5*Ga,Ce.O=Ue,Ce.j.info("backChannelRequestTimeoutMs_="+Ue)),Ue=Ce;const Ws=ae.g;if(Ws){const Po=Ws.g?Ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Po){var un=Ue.h;un.g||Po.indexOf("spdy")==-1&&Po.indexOf("quic")==-1&&Po.indexOf("h2")==-1||(un.j=un.l,un.g=new Set,un.h&&(Pn(un,un.h),un.h=null))}if(Ue.G){const Vl=Ws.g?Ws.g.getResponseHeader("X-HTTP-Session-Id"):null;Vl&&(Ue.wa=Vl,ui(Ue.J,Ue.G,Vl))}}Ce.I=3,Ce.l&&Ce.l.ra(),Ce.aa&&(Ce.T=Date.now()-ae.F,Ce.j.info("Handshake RTT: "+Ce.T+"ms")),Ue=Ce;var ii=ae;if(Ue.na=Jc(Ue,Ue.L?Ue.ba:null,Ue.W),ii.L){kn(Ue.h,ii);var ki=ii,jr=Ue.O;jr&&(ki.H=jr),ki.D&&(Yn(ki),jn(ki)),Ue.g=ii}else uc(Ue);Ce.i.length>0&&ja(Ce)}else Qi[0]!="stop"&&Qi[0]!="close"||ya(Ce,7);else Ce.I==3&&(Qi[0]=="stop"||Qi[0]=="close"?Qi[0]=="stop"?ya(Ce,7):lc(Ce):Qi[0]!="noop"&&Ce.l&&Ce.l.qa(Qi),Ce.A=0)}}kt(4)}catch{}}var Xe=class{constructor(ae,be){this.g=ae,this.map=be}};function Qe(ae){this.l=ae||10,_.PerformanceNavigationTiming?(ae=_.performance.getEntriesByType("navigation"),ae=ae.length>0&&(ae[0].nextHopProtocol=="hq"||ae[0].nextHopProtocol=="h2")):ae=!!(_.chrome&&_.chrome.loadTimes&&_.chrome.loadTimes()&&_.chrome.loadTimes().wasFetchedViaSpdy),this.j=ae?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ze(ae){return ae.h?!0:ae.g?ae.g.size>=ae.j:!1}function Je(ae){return ae.h?1:ae.g?ae.g.size:0}function En(ae,be){return ae.h?ae.h==be:ae.g?ae.g.has(be):!1}function Pn(ae,be){ae.g?ae.g.add(be):ae.h=be}function kn(ae,be){ae.h&&ae.h==be?ae.h=null:ae.g&&ae.g.has(be)&&ae.g.delete(be)}Qe.prototype.cancel=function(){if(this.i=Nn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const ae of this.g.values())ae.cancel();this.g.clear()}};function Nn(ae){if(ae.h!=null)return ae.i.concat(ae.h.G);if(ae.g!=null&&ae.g.size!==0){let be=ae.i;for(const Ce of ae.g.values())be=be.concat(Ce.G);return be}return K(ae.i)}var ai=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function li(ae,be){if(ae){ae=ae.split("&");for(let Ce=0;Ce<ae.length;Ce++){const Ue=ae[Ce].indexOf("=");let xt,un=null;Ue>=0?(xt=ae[Ce].substring(0,Ue),un=ae[Ce].substring(Ue+1)):xt=ae[Ce],be(xt,un?decodeURIComponent(un.replace(/\+/g," ")):"")}}}function mi(ae){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let be;ae instanceof mi?(this.l=ae.l,di(this,ae.j),this.o=ae.o,this.g=ae.g,Vi(this,ae.u),this.h=ae.h,Xi(this,Kc(ae.i)),this.m=ae.m):ae&&(be=String(ae).match(ai))?(this.l=!1,di(this,be[1]||"",!0),this.o=Ln(be[2]||""),this.g=Ln(be[3]||"",!0),Vi(this,be[4]),this.h=Ln(be[5]||"",!0),Xi(this,be[6]||"",!0),this.m=Ln(be[7]||"")):(this.l=!1,this.i=new mr(null,this.l))}mi.prototype.toString=function(){const ae=[];var be=this.j;be&&ae.push(wi(be,tr,!0),":");var Ce=this.g;return(Ce||be=="file")&&(ae.push("//"),(be=this.o)&&ae.push(wi(be,tr,!0),"@"),ae.push($r(Ce).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Ce=this.u,Ce!=null&&ae.push(":",String(Ce))),(Ce=this.h)&&(this.g&&Ce.charAt(0)!="/"&&ae.push("/"),ae.push(wi(Ce,Ce.charAt(0)=="/"?Zi:Ar,!0))),(Ce=this.i.toString())&&ae.push("?",Ce),(Ce=this.m)&&ae.push("#",wi(Ce,nr)),ae.join("")},mi.prototype.resolve=function(ae){const be=zn(this);let Ce=!!ae.j;Ce?di(be,ae.j):Ce=!!ae.o,Ce?be.o=ae.o:Ce=!!ae.g,Ce?be.g=ae.g:Ce=ae.u!=null;var Ue=ae.h;if(Ce)Vi(be,ae.u);else if(Ce=!!ae.h){if(Ue.charAt(0)!="/")if(this.g&&!this.h)Ue="/"+Ue;else{var xt=be.h.lastIndexOf("/");xt!=-1&&(Ue=be.h.slice(0,xt+1)+Ue)}if(xt=Ue,xt==".."||xt==".")Ue="";else if(xt.indexOf("./")!=-1||xt.indexOf("/.")!=-1){Ue=xt.lastIndexOf("/",0)==0,xt=xt.split("/");const un=[];for(let ii=0;ii<xt.length;){const ki=xt[ii++];ki=="."?Ue&&ii==xt.length&&un.push(""):ki==".."?((un.length>1||un.length==1&&un[0]!="")&&un.pop(),Ue&&ii==xt.length&&un.push("")):(un.push(ki),Ue=!0)}Ue=un.join("/")}else Ue=xt}return Ce?be.h=Ue:Ce=ae.i.toString()!=="",Ce?Xi(be,Kc(ae.i)):Ce=!!ae.m,Ce&&(be.m=ae.m),be};function zn(ae){return new mi(ae)}function di(ae,be,Ce){ae.j=Ce?Ln(be,!0):be,ae.j&&(ae.j=ae.j.replace(/:$/,""))}function Vi(ae,be){if(be){if(be=Number(be),isNaN(be)||be<0)throw Error("Bad port number "+be);ae.u=be}else ae.u=null}function Xi(ae,be,Ce){be instanceof mr?(ae.i=be,Ml(ae.i,ae.l)):(Ce||(be=wi(be,xr)),ae.i=new mr(be,ae.l))}function ui(ae,be,Ce){ae.i.set(be,Ce)}function pi(ae){return ui(ae,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),ae}function Ln(ae,be){return ae?be?decodeURI(ae.replace(/%25/g,"%2525")):decodeURIComponent(ae):""}function wi(ae,be,Ce){return typeof ae=="string"?(ae=encodeURI(ae).replace(be,si),Ce&&(ae=ae.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ae):null}function si(ae){return ae=ae.charCodeAt(0),"%"+(ae>>4&15).toString(16)+(ae&15).toString(16)}var tr=/[#\/\?@]/g,Ar=/[#\?:]/g,Zi=/[#\?]/g,xr=/[#\?@]/g,nr=/#/g;function mr(ae,be){this.h=this.g=null,this.i=ae||null,this.j=!!be}function Mr(ae){ae.g||(ae.g=new Map,ae.h=0,ae.i&&li(ae.i,function(be,Ce){ae.add(decodeURIComponent(be.replace(/\+/g," ")),Ce)}))}u=mr.prototype,u.add=function(ae,be){Mr(this),this.i=null,ae=Ka(this,ae);let Ce=this.g.get(ae);return Ce||this.g.set(ae,Ce=[]),Ce.push(be),this.h+=1,this};function Cr(ae,be){Mr(ae),be=Ka(ae,be),ae.g.has(be)&&(ae.i=null,ae.h-=ae.g.get(be).length,ae.g.delete(be))}function ks(ae,be){return Mr(ae),be=Ka(ae,be),ae.g.has(be)}u.forEach=function(ae,be){Mr(this),this.g.forEach(function(Ce,Ue){Ce.forEach(function(xt){ae.call(be,xt,Ue,this)},this)},this)};function ia(ae,be){Mr(ae);let Ce=[];if(typeof be=="string")ks(ae,be)&&(Ce=Ce.concat(ae.g.get(Ka(ae,be))));else for(ae=Array.from(ae.g.values()),be=0;be<ae.length;be++)Ce=Ce.concat(ae[be]);return Ce}u.set=function(ae,be){return Mr(this),this.i=null,ae=Ka(this,ae),ks(this,ae)&&(this.h-=this.g.get(ae).length),this.g.set(ae,[be]),this.h+=1,this},u.get=function(ae,be){return ae?(ae=ia(this,ae),ae.length>0?String(ae[0]):be):be};function Ya(ae,be,Ce){Cr(ae,be),Ce.length>0&&(ae.i=null,ae.g.set(Ka(ae,be),K(Ce)),ae.h+=Ce.length)}u.toString=function(){if(this.i)return this.i;if(!this.g)return"";const ae=[],be=Array.from(this.g.keys());for(let Ue=0;Ue<be.length;Ue++){var Ce=be[Ue];const xt=$r(Ce);Ce=ia(this,Ce);for(let un=0;un<Ce.length;un++){let ii=xt;Ce[un]!==""&&(ii+="="+$r(Ce[un])),ae.push(ii)}}return this.i=ae.join("&")};function Kc(ae){const be=new mr;return be.i=ae.i,ae.g&&(be.g=new Map(ae.g),be.h=ae.h),be}function Ka(ae,be){return be=String(be),ae.j&&(be=be.toLowerCase()),be}function Ml(ae,be){be&&!ae.j&&(Mr(ae),ae.i=null,ae.g.forEach(function(Ce,Ue){const xt=Ue.toLowerCase();Ue!=xt&&(Cr(this,Ue),Ya(this,xt,Ce))},ae)),ae.j=be}function Fa(ae,be){const Ce=new ci;if(_.Image){const Ue=new Image;Ue.onload=G(ra,Ce,"TestLoadImage: loaded",!0,be,Ue),Ue.onerror=G(ra,Ce,"TestLoadImage: error",!1,be,Ue),Ue.onabort=G(ra,Ce,"TestLoadImage: abort",!1,be,Ue),Ue.ontimeout=G(ra,Ce,"TestLoadImage: timeout",!1,be,Ue),_.setTimeout(function(){Ue.ontimeout&&Ue.ontimeout()},1e4),Ue.src=ae}else be(!1)}function ac(ae,be){const Ce=new ci,Ue=new AbortController,xt=setTimeout(()=>{Ue.abort(),ra(Ce,"TestPingServer: timeout",!1,be)},1e4);fetch(ae,{signal:Ue.signal}).then(un=>{clearTimeout(xt),un.ok?ra(Ce,"TestPingServer: ok",!0,be):ra(Ce,"TestPingServer: server error",!1,be)}).catch(()=>{clearTimeout(xt),ra(Ce,"TestPingServer: error",!1,be)})}function ra(ae,be,Ce,Ue,xt){try{xt&&(xt.onload=null,xt.onerror=null,xt.onabort=null,xt.ontimeout=null),Ue(Ce)}catch{}}function Ro(){this.g=new Gn}function ma(ae){this.i=ae.Sb||null,this.h=ae.ab||!1}Y(ma,fi),ma.prototype.g=function(){return new Xo(this.i,this.h)};function Xo(ae,be){qn.call(this),this.H=ae,this.o=be,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}Y(Xo,qn),u=Xo.prototype,u.open=function(ae,be){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=ae,this.D=be,this.readyState=1,ga(this)},u.send=function(ae){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const be={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};ae&&(be.body=ae),(this.H||_).fetch(new Request(this.D,be)).then(this.Pa.bind(this),this.ga.bind(this))},u.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wo(this)),this.readyState=0},u.Pa=function(ae){if(this.g&&(this.l=ae,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=ae.headers,this.readyState=2,ga(this)),this.g&&(this.readyState=3,ga(this),this.g)))if(this.responseType==="arraybuffer")ae.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof _.ReadableStream<"u"&&"body"in ae){if(this.j=ae.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Cl(this)}else ae.text().then(this.Oa.bind(this),this.ga.bind(this))};function Cl(ae){ae.j.read().then(ae.Ma.bind(ae)).catch(ae.ga.bind(ae))}u.Ma=function(ae){if(this.g){if(this.o&&ae.value)this.response.push(ae.value);else if(!this.o){var be=ae.value?ae.value:new Uint8Array(0);(be=this.B.decode(be,{stream:!ae.done}))&&(this.response=this.responseText+=be)}ae.done?wo(this):ga(this),this.readyState==3&&Cl(this)}},u.Oa=function(ae){this.g&&(this.response=this.responseText=ae,wo(this))},u.Na=function(ae){this.g&&(this.response=ae,wo(this))},u.ga=function(){this.g&&wo(this)};function wo(ae){ae.readyState=4,ae.l=null,ae.j=null,ae.B=null,ga(ae)}u.setRequestHeader=function(ae,be){this.A.append(ae,be)},u.getResponseHeader=function(ae){return this.h&&this.h.get(ae.toLowerCase())||""},u.getAllResponseHeaders=function(){if(!this.h)return"";const ae=[],be=this.h.entries();for(var Ce=be.next();!Ce.done;)Ce=Ce.value,ae.push(Ce[0]+": "+Ce[1]),Ce=be.next();return ae.join(`\r
`)};function ga(ae){ae.onreadystatechange&&ae.onreadystatechange.call(ae)}Object.defineProperty(Xo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(ae){this.m=ae?"include":"same-origin"}});function sa(ae){let be="";return Te(ae,function(Ce,Ue){be+=Ue,be+=":",be+=Ce,be+=`\r
`}),be}function Pl(ae,be,Ce){e:{for(Ue in Ce){var Ue=!1;break e}Ue=!0}Ue||(Ce=sa(Ce),typeof ae=="string"?Ce!=null&&$r(Ce):ui(ae,be,Ce))}function cr(ae){qn.call(this),this.headers=new Map,this.L=ae||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}Y(cr,qn);var Ds=/^https?$/i,oc=["POST","PUT"];u=cr.prototype,u.Fa=function(ae){this.H=ae},u.ea=function(ae,be,Ce,Ue){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+ae);be=be?be.toUpperCase():"GET",this.D=ae,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():na.g(),this.g.onreadystatechange=q(I(this.Ca,this));try{this.B=!0,this.g.open(be,String(ae),!0),this.B=!1}catch(un){Za(this,un);return}if(ae=Ce||"",Ce=new Map(this.headers),Ue)if(Object.getPrototypeOf(Ue)===Object.prototype)for(var xt in Ue)Ce.set(xt,Ue[xt]);else if(typeof Ue.keys=="function"&&typeof Ue.get=="function")for(const un of Ue.keys())Ce.set(un,Ue.get(un));else throw Error("Unknown input type for opt_headers: "+String(Ue));Ue=Array.from(Ce.keys()).find(un=>un.toLowerCase()=="content-type"),xt=_.FormData&&ae instanceof _.FormData,!(Array.prototype.indexOf.call(oc,be,void 0)>=0)||Ue||xt||Ce.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[un,ii]of Ce)this.g.setRequestHeader(un,ii);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(ae),this.v=!1}catch(un){Za(this,un)}};function Za(ae,be){ae.h=!1,ae.g&&(ae.j=!0,ae.g.abort(),ae.j=!1),ae.l=be,ae.o=5,Yo(ae),Oa(ae)}function Yo(ae){ae.A||(ae.A=!0,An(ae,"complete"),An(ae,"error"))}u.abort=function(ae){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=ae||7,An(this,"complete"),An(this,"abort"),Oa(this))},u.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oa(this,!0)),cr.Z.N.call(this)},u.Ca=function(){this.u||(this.B||this.v||this.j?Ko(this):this.Xa())},u.Xa=function(){Ko(this)};function Ko(ae){if(ae.h&&typeof y<"u"){if(ae.v&&Ba(ae)==4)setTimeout(ae.Ca.bind(ae),0);else if(An(ae,"readystatechange"),Ba(ae)==4){ae.h=!1;try{const un=ae.ca();e:switch(un){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var be=!0;break e;default:be=!1}var Ce;if(!(Ce=be)){var Ue;if(Ue=un===0){let ii=String(ae.D).match(ai)[1]||null;!ii&&_.self&&_.self.location&&(ii=_.self.location.protocol.slice(0,-1)),Ue=!Ds.test(ii?ii.toLowerCase():"")}Ce=Ue}if(Ce)An(ae,"complete"),An(ae,"success");else{ae.o=6;try{var xt=Ba(ae)>2?ae.g.statusText:""}catch{xt=""}ae.l=xt+" ["+ae.ca()+"]",Yo(ae)}}finally{Oa(ae)}}}}function Oa(ae,be){if(ae.g){ae.m&&(clearTimeout(ae.m),ae.m=null);const Ce=ae.g;ae.g=null,be||An(ae,"ready");try{Ce.onreadystatechange=null}catch{}}}u.isActive=function(){return!!this.g};function Ba(ae){return ae.g?ae.g.readyState:0}u.ca=function(){try{return Ba(this)>2?this.g.status:-1}catch{return-1}},u.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},u.La=function(ae){if(this.g){var be=this.g.responseText;return ae&&be.indexOf(ae)==0&&(be=be.substring(ae.length)),Zn(be)}};function ps(ae){try{if(!ae.g)return null;if("response"in ae.g)return ae.g.response;switch(ae.F){case"":case"text":return ae.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in ae.g)return ae.g.mozResponseArrayBuffer}return null}catch{return null}}function Qa(ae){const be={};ae=(ae.g&&Ba(ae)>=2&&ae.g.getAllResponseHeaders()||"").split(`\r
`);for(let Ue=0;Ue<ae.length;Ue++){if(Ee(ae[Ue]))continue;var Ce=es(ae[Ue]);const xt=Ce[0];if(Ce=Ce[1],typeof Ce!="string")continue;Ce=Ce.trim();const un=be[xt]||[];be[xt]=un,un.push(Ce)}we(be,function(Ue){return Ue.join(", ")})}u.ya=function(){return this.o},u.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ua(ae,be,Ce){return Ce&&Ce.internalChannelParams&&Ce.internalChannelParams[ae]||be}function Mo(ae){this.za=0,this.i=[],this.j=new ci,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ua("failFast",!1,ae),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ua("baseRetryDelayMs",5e3,ae),this.Za=Ua("retryDelaySeedMs",1e4,ae),this.Ta=Ua("forwardChannelMaxRetries",2,ae),this.va=Ua("forwardChannelRequestTimeoutMs",2e4,ae),this.ma=ae&&ae.xmlHttpFactory||void 0,this.Ua=ae&&ae.Rb||void 0,this.Aa=ae&&ae.useFetchStreams||!1,this.O=void 0,this.L=ae&&ae.supportsCrossDomainXhr||!1,this.M="",this.h=new Qe(ae&&ae.concurrentRequestLimit),this.Ba=new Ro,this.S=ae&&ae.fastHandshake||!1,this.R=ae&&ae.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=ae&&ae.Pb||!1,ae&&ae.ua&&this.j.ua(),ae&&ae.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&ae&&ae.detectBufferingProxy||!1,this.ia=void 0,ae&&ae.longPollingTimeout&&ae.longPollingTimeout>0&&(this.ia=ae.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}u=Mo.prototype,u.ka=8,u.I=1,u.connect=function(ae,be,Ce,Ue){Kn(0),this.W=ae,this.H=be||{},Ce&&Ue!==void 0&&(this.H.OSID=Ce,this.H.OAID=Ue),this.F=this.X,this.J=Jc(this,null,this.W),ja(this)};function lc(ae){if(Il(ae),ae.I==3){var be=ae.V++,Ce=zn(ae.J);if(ui(Ce,"SID",ae.M),ui(Ce,"RID",be),ui(Ce,"TYPE","terminate"),Qo(ae,Ce),be=new bi(ae,ae.j,be),be.M=2,be.A=pi(zn(Ce)),Ce=!1,_.navigator&&_.navigator.sendBeacon)try{Ce=_.navigator.sendBeacon(be.A.toString(),"")}catch{}!Ce&&_.Image&&(new Image().src=be.A,Ce=!0),Ce||(be.g=eu(be.j,null),be.g.ea(be.A)),be.F=Date.now(),jn(be)}kl(ae)}function Ja(ae){ae.g&&(hc(ae),ae.g.cancel(),ae.g=null)}function Il(ae){Ja(ae),ae.v&&(_.clearTimeout(ae.v),ae.v=null),fc(ae),ae.h.cancel(),ae.m&&(typeof ae.m=="number"&&_.clearTimeout(ae.m),ae.m=null)}function ja(ae){if(!Ze(ae.h)&&!ae.m){ae.m=!0;var be=ae.Ea;fe||se(),pe||(fe(),pe=!0),de.add(be,ae),ae.D=0}}function Zo(ae,be){return Je(ae.h)>=ae.h.j-(ae.m?1:0)?!1:ae.m?(ae.i=be.G.concat(ae.i),!0):ae.I==1||ae.I==2||ae.D>=(ae.Sa?0:ae.Ta)?!1:(ae.m=pn(I(ae.Ea,ae,be),el(ae,ae.D)),ae.D++,!0)}u.Ea=function(ae){if(this.m)if(this.m=null,this.I==1){if(!ae){this.V=Math.floor(Math.random()*1e5),ae=this.V++;const xt=new bi(this,this.j,ae);let un=this.o;if(this.U&&(un?(un=ge(un),ze(un,this.U)):un=this.U),this.u!==null||this.R||(xt.J=un,un=null),this.S)e:{for(var be=0,Ce=0;Ce<this.i.length;Ce++){t:{var Ue=this.i[Ce];if("__data__"in Ue.map&&(Ue=Ue.map.__data__,typeof Ue=="string")){Ue=Ue.length;break t}Ue=void 0}if(Ue===void 0)break;if(be+=Ue,be>4096){be=Ce;break e}if(be===4096||Ce===this.i.length-1){be=Ce+1;break e}}be=1e3}else be=1e3;be=Zc(this,xt,be),Ce=zn(this.J),ui(Ce,"RID",ae),ui(Ce,"CVER",22),this.G&&ui(Ce,"X-HTTP-Session-Id",this.G),Qo(this,Ce),un&&(this.R?be="headers="+$r(sa(un))+"&"+be:this.u&&Pl(Ce,this.u,un)),Pn(this.h,xt),this.Ra&&ui(Ce,"TYPE","init"),this.S?(ui(Ce,"$req",be),ui(Ce,"SID","null"),xt.U=!0,Fe(xt,Ce,null)):Fe(xt,Ce,be),this.I=2}}else this.I==3&&(ae?cc(this,ae):this.i.length==0||Ze(this.h)||cc(this))};function cc(ae,be){var Ce;be?Ce=be.l:Ce=ae.V++;const Ue=zn(ae.J);ui(Ue,"SID",ae.M),ui(Ue,"RID",Ce),ui(Ue,"AID",ae.K),Qo(ae,Ue),ae.u&&ae.o&&Pl(Ue,ae.u,ae.o),Ce=new bi(ae,ae.j,Ce,ae.D+1),ae.u===null&&(Ce.J=ae.o),be&&(ae.i=be.G.concat(ae.i)),be=Zc(ae,Ce,1e3),Ce.H=Math.round(ae.va*.5)+Math.round(ae.va*.5*Math.random()),Pn(ae.h,Ce),Fe(Ce,Ue,be)}function Qo(ae,be){ae.H&&Te(ae.H,function(Ce,Ue){ui(be,Ue,Ce)}),ae.l&&Te({},function(Ce,Ue){ui(be,Ue,Ce)})}function Zc(ae,be,Ce){Ce=Math.min(ae.i.length,Ce);const Ue=ae.l?I(ae.l.Ka,ae.l,ae):null;e:{var xt=ae.i;let ki=-1;for(;;){const jr=["count="+Ce];ki==-1?Ce>0?(ki=xt[0].g,jr.push("ofs="+ki)):ki=0:jr.push("ofs="+ki);let Qi=!0;for(let Rr=0;Rr<Ce;Rr++){var un=xt[Rr].g;const Vs=xt[Rr].map;if(un-=ki,un<0)ki=Math.max(0,xt[Rr].g-100),Qi=!1;else try{un="req"+un+"_"||"";try{var ii=Vs instanceof Map?Vs:Object.entries(Vs);for(const[za,Ga]of ii){let Ws=Ga;A(Ga)&&(Ws=ln(Ga)),jr.push(un+za+"="+encodeURIComponent(Ws))}}catch(za){throw jr.push(un+"type="+encodeURIComponent("_badmap")),za}}catch{Ue&&Ue(Vs)}}if(Qi){ii=jr.join("&");break e}}ii=void 0}return ae=ae.i.splice(0,Ce),be.G=ae,ii}function uc(ae){if(!ae.g&&!ae.v){ae.Y=1;var be=ae.Da;fe||se(),pe||(fe(),pe=!0),de.add(be,ae),ae.A=0}}function Jo(ae){return ae.g||ae.v||ae.A>=3?!1:(ae.Y++,ae.v=pn(I(ae.Da,ae),el(ae,ae.A)),ae.A++,!0)}u.Da=function(){if(this.v=null,Du(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var ae=4*this.T;this.j.info("BP detection timer enabled: "+ae),this.B=pn(I(this.Wa,this),ae)}},u.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Kn(10),Ja(this),Du(this))};function hc(ae){ae.B!=null&&(_.clearTimeout(ae.B),ae.B=null)}function Du(ae){ae.g=new bi(ae,ae.j,"rpc",ae.Y),ae.u===null&&(ae.g.J=ae.o),ae.g.P=0;var be=zn(ae.na);ui(be,"RID","rpc"),ui(be,"SID",ae.M),ui(be,"AID",ae.K),ui(be,"CI",ae.F?"0":"1"),!ae.F&&ae.ia&&ui(be,"TO",ae.ia),ui(be,"TYPE","xmlhttp"),Qo(ae,be),ae.u&&ae.o&&Pl(be,ae.u,ae.o),ae.O&&(ae.g.H=ae.O);var Ce=ae.g;ae=ae.ba,Ce.M=1,Ce.A=pi(zn(be)),Ce.u=null,Ce.R=!0,We(Ce,ae)}u.Va=function(){this.C!=null&&(this.C=null,Ja(this),Jo(this),Kn(19))};function fc(ae){ae.C!=null&&(_.clearTimeout(ae.C),ae.C=null)}function Qc(ae,be){var Ce=null;if(ae.g==be){fc(ae),hc(ae),ae.g=null;var Ue=2}else if(En(ae.h,be))Ce=be.G,kn(ae.h,be),Ue=1;else return;if(ae.I!=0){if(be.o)if(Ue==1){Ce=be.u?be.u.length:0,be=Date.now()-be.F;var xt=ae.D;Ue=gi(),An(Ue,new Bn(Ue,Ce)),ja(ae)}else uc(ae);else if(xt=be.m,xt==3||xt==0&&be.X>0||!(Ue==1&&Zo(ae,be)||Ue==2&&Jo(ae)))switch(Ce&&Ce.length>0&&(be=ae.h,be.i=be.i.concat(Ce)),xt){case 1:ya(ae,5);break;case 4:ya(ae,10);break;case 3:ya(ae,6);break;default:ya(ae,2)}}}function el(ae,be){let Ce=ae.Qa+Math.floor(Math.random()*ae.Za);return ae.isActive()||(Ce*=2),Ce*be}function ya(ae,be){if(ae.j.info("Error code "+be),be==2){var Ce=I(ae.bb,ae),Ue=ae.Ua;const xt=!Ue;Ue=new mi(Ue||"//www.google.com/images/cleardot.gif"),_.location&&_.location.protocol=="http"||di(Ue,"https"),pi(Ue),xt?Fa(Ue.toString(),Ce):ac(Ue.toString(),Ce)}else Kn(2);ae.I=0,ae.l&&ae.l.pa(be),kl(ae),Il(ae)}u.bb=function(ae){ae?(this.j.info("Successfully pinged google.com"),Kn(2)):(this.j.info("Failed to ping google.com"),Kn(1))};function kl(ae){if(ae.I=0,ae.ja=[],ae.l){const be=Nn(ae.h);(be.length!=0||ae.i.length!=0)&&(Q(ae.ja,be),Q(ae.ja,ae.i),ae.h.i.length=0,K(ae.i),ae.i.length=0),ae.l.oa()}}function Jc(ae,be,Ce){var Ue=Ce instanceof mi?zn(Ce):new mi(Ce);if(Ue.g!="")be&&(Ue.g=be+"."+Ue.g),Vi(Ue,Ue.u);else{var xt=_.location;Ue=xt.protocol,be=be?be+"."+xt.hostname:xt.hostname,xt=+xt.port;const un=new mi(null);Ue&&di(un,Ue),be&&(un.g=be),xt&&Vi(un,xt),Ce&&(un.h=Ce),Ue=un}return Ce=ae.G,be=ae.wa,Ce&&be&&ui(Ue,Ce,be),ui(Ue,"VER",ae.ka),Qo(ae,Ue),Ue}function eu(ae,be,Ce){if(be&&!ae.L)throw Error("Can't create secondary domain capable XhrIo object.");return be=ae.Aa&&!ae.ma?new cr(new ma({ab:Ce})):new cr(ae.ma),be.Fa(ae.L),be}u.isActive=function(){return!!this.l&&this.l.isActive(this)};function dc(){}u=dc.prototype,u.ra=function(){},u.qa=function(){},u.pa=function(){},u.oa=function(){},u.isActive=function(){return!0},u.Ka=function(){};function Co(){}Co.prototype.g=function(ae,be){return new Rs(ae,be)};function Rs(ae,be){qn.call(this),this.g=new Mo(be),this.l=ae,this.h=be&&be.messageUrlParams||null,ae=be&&be.messageHeaders||null,be&&be.clientProtocolHeaderRequired&&(ae?ae["X-Client-Protocol"]="webchannel":ae={"X-Client-Protocol":"webchannel"}),this.g.o=ae,ae=be&&be.initMessageHeaders||null,be&&be.messageContentType&&(ae?ae["X-WebChannel-Content-Type"]=be.messageContentType:ae={"X-WebChannel-Content-Type":be.messageContentType}),be&&be.sa&&(ae?ae["X-WebChannel-Client-Profile"]=be.sa:ae={"X-WebChannel-Client-Profile":be.sa}),this.g.U=ae,(ae=be&&be.Qb)&&!Ee(ae)&&(this.g.u=ae),this.A=be&&be.supportsCrossDomainXhr||!1,this.v=be&&be.sendRawJson||!1,(be=be&&be.httpSessionIdParam)&&!Ee(be)&&(this.g.G=be,ae=this.h,ae!==null&&be in ae&&(ae=this.h,be in ae&&delete ae[be])),this.j=new to(this)}Y(Rs,qn),Rs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rs.prototype.close=function(){lc(this.g)},Rs.prototype.o=function(ae){var be=this.g;if(typeof ae=="string"){var Ce={};Ce.__data__=ae,ae=Ce}else this.v&&(Ce={},Ce.__data__=ln(ae),ae=Ce);be.i.push(new Xe(be.Ya++,ae)),be.I==3&&ja(be)},Rs.prototype.N=function(){this.g.l=null,delete this.j,lc(this.g),delete this.g,Rs.Z.N.call(this)};function eo(ae){Tn.call(this),ae.__headers__&&(this.headers=ae.__headers__,this.statusCode=ae.__status__,delete ae.__headers__,delete ae.__status__);var be=ae.__sm__;if(be){e:{for(const Ce in be){ae=Ce;break e}ae=void 0}(this.i=ae)&&(ae=this.i,be=be!==null&&ae in be?be[ae]:void 0),this.data=be}else this.data=ae}Y(eo,Tn);function Dl(){oi.call(this),this.status=1}Y(Dl,oi);function to(ae){this.g=ae}Y(to,dc),to.prototype.ra=function(){An(this.g,"a")},to.prototype.qa=function(ae){An(this.g,new eo(ae))},to.prototype.pa=function(ae){An(this.g,new Dl)},to.prototype.oa=function(){An(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,Rs.prototype.send=Rs.prototype.o,Rs.prototype.open=Rs.prototype.m,Rs.prototype.close=Rs.prototype.close,createWebChannelTransport=function(){return new Co},getStatEventTarget=function(){return gi()},Event$1=Jn,Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},As.NO_ERROR=0,As.TIMEOUT=8,As.HTTP_ERROR=6,ErrorCode=As,Hs.COMPLETE="complete",EventType=Hs,xi.EventType=wn,wn.OPEN="a",wn.CLOSE="b",wn.ERROR="c",wn.MESSAGE="d",qn.prototype.listen=qn.prototype.J,WebChannel=xi,cr.prototype.listenOnce=cr.prototype.K,cr.prototype.getLastError=cr.prototype.Ha,cr.prototype.getLastErrorCode=cr.prototype.ya,cr.prototype.getStatus=cr.prototype.ca,cr.prototype.getResponseJson=cr.prototype.La,cr.prototype.getResponseText=cr.prototype.la,cr.prototype.send=cr.prototype.ea,cr.prototype.setWithCredentials=cr.prototype.Fa,XhrIo=cr}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(n){this.uid=n}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S="12.9.0";function __PRIVATE_setSDKVersion(u){S=u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$1=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return D$1.logLevel}function __PRIVATE_logDebug(u,...n){if(D$1.logLevel<=LogLevel.DEBUG){const s=n.map(__PRIVATE_argToString);D$1.debug(`Firestore (${S}): ${u}`,...s)}}function __PRIVATE_logError(u,...n){if(D$1.logLevel<=LogLevel.ERROR){const s=n.map(__PRIVATE_argToString);D$1.error(`Firestore (${S}): ${u}`,...s)}}function __PRIVATE_logWarn(u,...n){if(D$1.logLevel<=LogLevel.WARN){const s=n.map(__PRIVATE_argToString);D$1.warn(`Firestore (${S}): ${u}`,...s)}}function __PRIVATE_argToString(u){if(typeof u=="string")return u;try{return(function(s){return JSON.stringify(s)})(u)}catch{return u}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(u,n,s){let f="Unexpected state";typeof n=="string"?f=n:s=n,__PRIVATE__fail(u,f,s)}function __PRIVATE__fail(u,n,s){let f=`FIRESTORE (${S}) INTERNAL ASSERTION FAILED: ${n} (ID: ${u.toString(16)})`;if(s!==void 0)try{f+=" CONTEXT: "+JSON.stringify(s)}catch{f+=" CONTEXT: "+s}throw __PRIVATE_logError(f),new Error(f)}function __PRIVATE_hardAssert(u,n,s,f){let d="Unexpected state";typeof s=="string"?d=s:f=s,u||__PRIVATE__fail(n,d,f)}function __PRIVATE_debugCast(u,n){return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(n,s){super(n,s),this.code=n,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise(((n,s)=>{this.resolve=n,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(n,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${n}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,s){n.enqueueRetryable((()=>s(User.UNAUTHENTICATED)))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,s){this.changeListener=s,n.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(n){this.t=n,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,s){__PRIVATE_hardAssert(this.o===void 0,42304);let f=this.i;const d=R=>this.i!==f?(f=this.i,s(R)):Promise.resolve();let y=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),y.resolve(),y=new __PRIVATE_Deferred,n.enqueueRetryable((()=>d(this.currentUser)))};const _=()=>{const R=y;n.enqueueRetryable((async()=>{await R.promise,await d(this.currentUser)}))},A=R=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=R,this.o&&(this.auth.addAuthTokenListener(this.o),_())};this.t.onInit((R=>A(R))),setTimeout((()=>{if(!this.auth){const R=this.t.getImmediate({optional:!0});R?A(R):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),y.resolve(),y=new __PRIVATE_Deferred)}}),0),_()}getToken(){const n=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((f=>this.i!==n?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):f?(__PRIVATE_hardAssert(typeof f.accessToken=="string",31837,{l:f}),new __PRIVATE_OAuthToken(f.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const n=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(n===null||typeof n=="string",2055,{h:n}),new User(n)}}class __PRIVATE_FirstPartyToken{constructor(n,s,f){this.P=n,this.T=s,this.I=f,this.type="FirstParty",this.user=User.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const n=this.A();return n&&this.R.set("Authorization",n),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(n,s,f){this.P=n,this.T=s,this.I=f}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(n,s){n.enqueueRetryable((()=>s(User.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(n){this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(n,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(n)&&n.settings.appCheckToken&&(this.p=n.settings.appCheckToken)}start(n,s){__PRIVATE_hardAssert(this.o===void 0,3512);const f=y=>{y.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${y.error.message}`);const _=y.token!==this.m;return this.m=y.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${_?"new":"existing"} token.`),_?s(y.token):Promise.resolve()};this.o=y=>{n.enqueueRetryable((()=>f(y)))};const d=y=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=y,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((y=>d(y))),setTimeout((()=>{if(!this.appCheck){const y=this.V.getImmediate({optional:!0});y?d(y):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const n=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(n).then((s=>s?(__PRIVATE_hardAssert(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new AppCheckToken(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(u){const n=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(u);if(n&&typeof n.getRandomValues=="function")n.getRandomValues(s);else for(let f=0;f<u;f++)s[f]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let f="";for(;f.length<20;){const d=__PRIVATE_randomBytes(40);for(let y=0;y<d.length;++y)f.length<20&&d[y]<s&&(f+=n.charAt(d[y]%62))}return f}}function __PRIVATE_primitiveComparator(u,n){return u<n?-1:u>n?1:0}function __PRIVATE_compareUtf8Strings(u,n){const s=Math.min(u.length,n.length);for(let f=0;f<s;f++){const d=u.charAt(f),y=n.charAt(f);if(d!==y)return __PRIVATE_isSurrogate(d)===__PRIVATE_isSurrogate(y)?__PRIVATE_primitiveComparator(d,y):__PRIVATE_isSurrogate(d)?1:-1}return __PRIVATE_primitiveComparator(u.length,n.length)}const v$2=55296,F=57343;function __PRIVATE_isSurrogate(u){const n=u.charCodeAt(0);return n>=v$2&&n<=F}function __PRIVATE_arrayEquals(u,n,s){return u.length===n.length&&u.every(((f,d)=>s(f,n[d])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M="__name__";class BasePath{constructor(n,s,f){s===void 0?s=0:s>n.length&&fail(637,{offset:s,range:n.length}),f===void 0?f=n.length-s:f>n.length-s&&fail(1746,{length:f,range:n.length-s}),this.segments=n,this.offset=s,this.len=f}get length(){return this.len}isEqual(n){return BasePath.comparator(this,n)===0}child(n){const s=this.segments.slice(this.offset,this.limit());return n instanceof BasePath?n.forEach((f=>{s.push(f)})):s.push(n),this.construct(s)}limit(){return this.offset+this.length}popFirst(n){return n=n===void 0?1:n,this.construct(this.segments,this.offset+n,this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return this.length===0}isPrefixOf(n){if(n.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==n.get(s))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==n.get(s))return!1;return!0}forEach(n){for(let s=this.offset,f=this.limit();s<f;s++)n(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,s){const f=Math.min(n.length,s.length);for(let d=0;d<f;d++){const y=BasePath.compareSegments(n.get(d),s.get(d));if(y!==0)return y}return __PRIVATE_primitiveComparator(n.length,s.length)}static compareSegments(n,s){const f=BasePath.isNumericId(n),d=BasePath.isNumericId(s);return f&&!d?-1:!f&&d?1:f&&d?BasePath.extractNumericId(n).compare(BasePath.extractNumericId(s)):__PRIVATE_compareUtf8Strings(n,s)}static isNumericId(n){return n.startsWith("__id")&&n.endsWith("__")}static extractNumericId(n){return Integer.fromString(n.substring(4,n.length-2))}}class ResourcePath extends BasePath{construct(n,s,f){return new ResourcePath(n,s,f)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...n){const s=[];for(const f of n){if(f.indexOf("//")>=0)throw new FirestoreError(C.INVALID_ARGUMENT,`Invalid segment (${f}). Paths must not contain // in them.`);s.push(...f.split("/").filter((d=>d.length>0)))}return new ResourcePath(s)}static emptyPath(){return new ResourcePath([])}}const x$2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(n,s,f){return new FieldPath$1(n,s,f)}static isValidIdentifier(n){return x$2.test(n)}canonicalString(){return this.toArray().map((n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(n)||(n="`"+n+"`"),n))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M}static keyField(){return new FieldPath$1([M])}static fromServerFormat(n){const s=[];let f="",d=0;const y=()=>{if(f.length===0)throw new FirestoreError(C.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(f),f=""};let _=!1;for(;d<n.length;){const A=n[d];if(A==="\\"){if(d+1===n.length)throw new FirestoreError(C.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const R=n[d+1];if(R!=="\\"&&R!=="."&&R!=="`")throw new FirestoreError(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);f+=R,d+=2}else A==="`"?(_=!_,d++):A!=="."||_?(f+=A,d++):(y(),d++)}if(y(),_)throw new FirestoreError(C.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new FieldPath$1(s)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(n){this.path=n}static fromPath(n){return new DocumentKey(ResourcePath.fromString(n))}static fromName(n){return new DocumentKey(ResourcePath.fromString(n).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(n){return n!==null&&ResourcePath.comparator(this.path,n.path)===0}toString(){return this.path.toString()}static comparator(n,s){return ResourcePath.comparator(n.path,s.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new DocumentKey(new ResourcePath(n.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(u,n,s){if(!s)throw new FirestoreError(C.INVALID_ARGUMENT,`Function ${u}() cannot be called with an empty ${n}.`)}function __PRIVATE_validateIsNotUsedTogether(u,n,s,f){if(n===!0&&f===!0)throw new FirestoreError(C.INVALID_ARGUMENT,`${u} and ${s} cannot be used together.`)}function __PRIVATE_validateDocumentPath(u){if(!DocumentKey.isDocumentKey(u))throw new FirestoreError(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${u} has ${u.length}.`)}function __PRIVATE_validateCollectionPath(u){if(DocumentKey.isDocumentKey(u))throw new FirestoreError(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${u} has ${u.length}.`)}function __PRIVATE_isPlainObject(u){return typeof u=="object"&&u!==null&&(Object.getPrototypeOf(u)===Object.prototype||Object.getPrototypeOf(u)===null)}function __PRIVATE_valueDescription(u){if(u===void 0)return"undefined";if(u===null)return"null";if(typeof u=="string")return u.length>20&&(u=`${u.substring(0,20)}...`),JSON.stringify(u);if(typeof u=="number"||typeof u=="boolean")return""+u;if(typeof u=="object"){if(u instanceof Array)return"an array";{const n=(function(f){return f.constructor?f.constructor.name:null})(u);return n?`a custom ${n} object`:"an object"}}return typeof u=="function"?"a function":fail(12329,{type:typeof u})}function __PRIVATE_cast(u,n){if("_delegate"in u&&(u=u._delegate),!(u instanceof n)){if(n.name===u.constructor.name)throw new FirestoreError(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=__PRIVATE_valueDescription(u);throw new FirestoreError(C.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${s}`)}}return u}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function property(u,n){const s={typeString:u};return n&&(s.value=n),s}function __PRIVATE_validateJSON(u,n){if(!__PRIVATE_isPlainObject(u))throw new FirestoreError(C.INVALID_ARGUMENT,"JSON must be an object");let s;for(const f in n)if(n[f]){const d=n[f].typeString,y="value"in n[f]?{value:n[f].value}:void 0;if(!(f in u)){s=`JSON missing required field: '${f}'`;break}const _=u[f];if(d&&typeof _!==d){s=`JSON field '${f}' must be a ${d}.`;break}if(y!==void 0&&_!==y.value){s=`Expected '${f}' field to equal '${y.value}'`;break}}if(s)throw new FirestoreError(C.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=-62135596800,N=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(n){return Timestamp.fromMillis(n.getTime())}static fromMillis(n){const s=Math.floor(n/1e3),f=Math.floor((n-1e3*s)*N);return new Timestamp(s,f)}constructor(n,s){if(this.seconds=n,this.nanoseconds=s,s<0)throw new FirestoreError(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new FirestoreError(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(n<O)throw new FirestoreError(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new FirestoreError(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/N}_compareTo(n){return this.seconds===n.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,n.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Timestamp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(n){if(__PRIVATE_validateJSON(n,Timestamp._jsonSchema))return new Timestamp(n.seconds,n.nanoseconds)}valueOf(){const n=this.seconds-O;return String(n).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Timestamp._jsonSchemaVersion="firestore/timestamp/1.0",Timestamp._jsonSchema={type:property("string",Timestamp._jsonSchemaVersion),seconds:property("number"),nanoseconds:property("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(n){return new SnapshotVersion(n)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(n){this.timestamp=n}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(u,n){const s=u.toTimestamp().seconds,f=u.toTimestamp().nanoseconds+1,d=SnapshotVersion.fromTimestamp(f===1e9?new Timestamp(s+1,0):new Timestamp(s,f));return new IndexOffset(d,DocumentKey.empty(),n)}function __PRIVATE_newIndexOffsetFromDocument(u){return new IndexOffset(u.readTime,u.key,B)}class IndexOffset{constructor(n,s,f){this.readTime=n,this.documentKey=s,this.largestBatchId=f}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),B)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),B)}}function __PRIVATE_indexOffsetComparator(u,n){let s=u.readTime.compareTo(n.readTime);return s!==0?s:(s=DocumentKey.comparator(u.documentKey,n.documentKey),s!==0?s:__PRIVATE_primitiveComparator(u.largestBatchId,n.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((n=>n()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(u){if(u.code!==C.FAILED_PRECONDITION||u.message!==L)throw u;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(n){return this.next(void 0,n)}next(n,s){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(n,this.result):new PersistencePromise(((f,d)=>{this.nextCallback=y=>{this.wrapSuccess(n,y).next(f,d)},this.catchCallback=y=>{this.wrapFailure(s,y).next(f,d)}}))}toPromise(){return new Promise(((n,s)=>{this.next(n,s)}))}wrapUserFunction(n){try{const s=n();return s instanceof PersistencePromise?s:PersistencePromise.resolve(s)}catch(s){return PersistencePromise.reject(s)}}wrapSuccess(n,s){return n?this.wrapUserFunction((()=>n(s))):PersistencePromise.resolve(s)}wrapFailure(n,s){return n?this.wrapUserFunction((()=>n(s))):PersistencePromise.reject(s)}static resolve(n){return new PersistencePromise(((s,f)=>{s(n)}))}static reject(n){return new PersistencePromise(((s,f)=>{f(n)}))}static waitFor(n){return new PersistencePromise(((s,f)=>{let d=0,y=0,_=!1;n.forEach((A=>{++d,A.next((()=>{++y,_&&y===d&&s()}),(R=>f(R)))})),_=!0,y===d&&s()}))}static or(n){let s=PersistencePromise.resolve(!1);for(const f of n)s=s.next((d=>d?PersistencePromise.resolve(d):f()));return s}static forEach(n,s){const f=[];return n.forEach(((d,y)=>{f.push(s.call(this,d,y))})),this.waitFor(f)}static mapArray(n,s){return new PersistencePromise(((f,d)=>{const y=n.length,_=new Array(y);let A=0;for(let R=0;R<y;R++){const I=R;s(n[I]).next((G=>{_[I]=G,++A,A===y&&f(_)}),(G=>d(G)))}}))}static doWhile(n,s){return new PersistencePromise(((f,d)=>{const y=()=>{n()===!0?s().next((()=>{y()}),d):f()};y()}))}}function __PRIVATE_getAndroidVersion(u){const n=u.match(/Android ([\d.]+)/i),s=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function __PRIVATE_isIndexedDbTransactionError(u){return u.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(n,s){this.previousValue=n,s&&(s.sequenceNumberHandler=f=>this.ae(f),this.ue=f=>s.writeSequenceNumber(f))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ue&&this.ue(n),n}}__PRIVATE_ListenSequence.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U=-1;function __PRIVATE_isNullOrUndefined(u){return u==null}function __PRIVATE_isNegativeZero(u){return u===0&&1/u==-1/0}function isSafeInteger(u){return typeof u=="number"&&Number.isInteger(u)&&!__PRIVATE_isNegativeZero(u)&&u<=Number.MAX_SAFE_INTEGER&&u>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $="";function __PRIVATE_encodeResourcePath(u){let n="";for(let s=0;s<u.length;s++)n.length>0&&(n=__PRIVATE_encodeSeparator(n)),n=__PRIVATE_encodeSegment(u.get(s),n);return __PRIVATE_encodeSeparator(n)}function __PRIVATE_encodeSegment(u,n){let s=n;const f=u.length;for(let d=0;d<f;d++){const y=u.charAt(d);switch(y){case"\0":s+="";break;case $:s+="";break;default:s+=y}}return s}function __PRIVATE_encodeSeparator(u){return u+$+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(u){let n=0;for(const s in u)Object.prototype.hasOwnProperty.call(u,s)&&n++;return n}function forEach(u,n){for(const s in u)Object.prototype.hasOwnProperty.call(u,s)&&n(s,u[s])}function isEmpty(u){for(const n in u)if(Object.prototype.hasOwnProperty.call(u,n))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(n,s){this.comparator=n,this.root=s||LLRBNode.EMPTY}insert(n,s){return new SortedMap(this.comparator,this.root.insert(n,s,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(n){return new SortedMap(this.comparator,this.root.remove(n,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(n){let s=this.root;for(;!s.isEmpty();){const f=this.comparator(n,s.key);if(f===0)return s.value;f<0?s=s.left:f>0&&(s=s.right)}return null}indexOf(n){let s=0,f=this.root;for(;!f.isEmpty();){const d=this.comparator(n,f.key);if(d===0)return s+f.left.size;d<0?f=f.left:(s+=f.left.size+1,f=f.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal(((s,f)=>(n(s,f),!1)))}toString(){const n=[];return this.inorderTraversal(((s,f)=>(n.push(`${s}:${f}`),!1))),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new SortedMapIterator(this.root,n,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new SortedMapIterator(this.root,n,this.comparator,!0)}}class SortedMapIterator{constructor(n,s,f,d){this.isReverse=d,this.nodeStack=[];let y=1;for(;!n.isEmpty();)if(y=s?f(n.key,s):1,s&&d&&(y*=-1),y<0)n=this.isReverse?n.left:n.right;else{if(y===0){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const s={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class LLRBNode{constructor(n,s,f,d,y){this.key=n,this.value=s,this.color=f??LLRBNode.RED,this.left=d??LLRBNode.EMPTY,this.right=y??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,s,f,d,y){return new LLRBNode(n??this.key,s??this.value,f??this.color,d??this.left,y??this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,s,f){let d=this;const y=f(n,d.key);return d=y<0?d.copy(null,null,null,d.left.insert(n,s,f),null):y===0?d.copy(null,s,null,null,null):d.copy(null,null,null,null,d.right.insert(n,s,f)),d.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,s){let f,d=this;if(s(n,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(n,s),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),s(n,d.key)===0){if(d.right.isEmpty())return LLRBNode.EMPTY;f=d.right.min(),d=d.copy(f.key,f.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(n,s))}return d.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,s)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const n=this.left.check();if(n!==this.right.check())throw fail(27949);return n+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(n,s,f,d,y){return this}insert(n,s,f){return new LLRBNode(n,s)}remove(n,s){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(n){this.comparator=n,this.data=new SortedMap(this.comparator)}has(n){return this.data.get(n)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal(((s,f)=>(n(s),!1)))}forEachInRange(n,s){const f=this.data.getIteratorFrom(n[0]);for(;f.hasNext();){const d=f.getNext();if(this.comparator(d.key,n[1])>=0)return;s(d.key)}}forEachWhile(n,s){let f;for(f=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();f.hasNext();)if(!n(f.getNext().key))return}firstAfterOrEqual(n){const s=this.data.getIteratorFrom(n);return s.hasNext()?s.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(n){return new SortedSetIterator(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let s=this;return s.size<n.size&&(s=n,n=this),n.forEach((f=>{s=s.add(f)})),s}isEqual(n){if(!(n instanceof SortedSet)||this.size!==n.size)return!1;const s=this.data.getIterator(),f=n.data.getIterator();for(;s.hasNext();){const d=s.getNext().key,y=f.getNext().key;if(this.comparator(d,y)!==0)return!1}return!0}toArray(){const n=[];return this.forEach((s=>{n.push(s)})),n}toString(){const n=[];return this.forEach((s=>n.push(s))),"SortedSet("+n.toString()+")"}copy(n){const s=new SortedSet(this.comparator);return s.data=n,s}}class SortedSetIterator{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(n){this.fields=n,n.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(n){let s=new SortedSet(FieldPath$1.comparator);for(const f of this.fields)s=s.add(f);for(const f of n)s=s.add(f);return new FieldMask(s.toArray())}covers(n){for(const s of this.fields)if(s.isPrefixOf(n))return!0;return!1}isEqual(n){return __PRIVATE_arrayEquals(this.fields,n.fields,((s,f)=>s.isEqual(f)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(n){this.binaryString=n}static fromBase64String(n){const s=(function(d){try{return atob(d)}catch(y){throw typeof DOMException<"u"&&y instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+y):y}})(n);return new ByteString(s)}static fromUint8Array(n){const s=(function(d){let y="";for(let _=0;_<d.length;++_)y+=String.fromCharCode(d[_]);return y})(n);return new ByteString(s)}[Symbol.iterator](){let n=0;return{next:()=>n<this.binaryString.length?{value:this.binaryString.charCodeAt(n++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const f=new Uint8Array(s.length);for(let d=0;d<s.length;d++)f[d]=s.charCodeAt(d);return f})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return __PRIVATE_primitiveComparator(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const et$1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(u){if(__PRIVATE_hardAssert(!!u,39018),typeof u=="string"){let n=0;const s=et$1.exec(u);if(__PRIVATE_hardAssert(!!s,46558,{timestamp:u}),s[1]){let d=s[1];d=(d+"000000000").substr(0,9),n=Number(d)}const f=new Date(u);return{seconds:Math.floor(f.getTime()/1e3),nanos:n}}return{seconds:__PRIVATE_normalizeNumber(u.seconds),nanos:__PRIVATE_normalizeNumber(u.nanos)}}function __PRIVATE_normalizeNumber(u){return typeof u=="number"?u:typeof u=="string"?Number(u):0}function __PRIVATE_normalizeByteString(u){return typeof u=="string"?ByteString.fromBase64String(u):ByteString.fromUint8Array(u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tt="server_timestamp",nt="__type__",rt="__previous_value__",it="__local_write_time__";function __PRIVATE_isServerTimestamp(u){var s,f;return((f=(((s=u==null?void 0:u.mapValue)==null?void 0:s.fields)||{})[nt])==null?void 0:f.stringValue)===tt}function __PRIVATE_getPreviousValue(u){const n=u.mapValue.fields[rt];return __PRIVATE_isServerTimestamp(n)?__PRIVATE_getPreviousValue(n):n}function __PRIVATE_getLocalWriteTime(u){const n=__PRIVATE_normalizeTimestamp(u.mapValue.fields[it].timestampValue);return new Timestamp(n.seconds,n.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(n,s,f,d,y,_,A,R,I,G,Y){this.databaseId=n,this.appId=s,this.persistenceKey=f,this.host=d,this.ssl=y,this.forceLongPolling=_,this.autoDetectLongPolling=A,this.longPollingOptions=R,this.useFetchStreams=I,this.isUsingEmulator=G,this.apiKey=Y}}const st="(default)";class DatabaseId{constructor(n,s){this.projectId=n,this.database=s||st}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===st}isEqual(n){return n instanceof DatabaseId&&n.projectId===this.projectId&&n.database===this.database}}function __PRIVATE_databaseIdFromApp(u,n){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new FirestoreError(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(u.options.projectId,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot="__type__",_t="__max__",at={mapValue:{}},ut="__vector__",ct="value";function __PRIVATE_typeOrder(u){return"nullValue"in u?0:"booleanValue"in u?1:"integerValue"in u||"doubleValue"in u?2:"timestampValue"in u?3:"stringValue"in u?5:"bytesValue"in u?6:"referenceValue"in u?7:"geoPointValue"in u?8:"arrayValue"in u?9:"mapValue"in u?__PRIVATE_isServerTimestamp(u)?4:__PRIVATE_isMaxValue(u)?9007199254740991:__PRIVATE_isVectorValue(u)?10:11:fail(28295,{value:u})}function __PRIVATE_valueEquals(u,n){if(u===n)return!0;const s=__PRIVATE_typeOrder(u);if(s!==__PRIVATE_typeOrder(n))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return u.booleanValue===n.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(u).isEqual(__PRIVATE_getLocalWriteTime(n));case 3:return(function(d,y){if(typeof d.timestampValue=="string"&&typeof y.timestampValue=="string"&&d.timestampValue.length===y.timestampValue.length)return d.timestampValue===y.timestampValue;const _=__PRIVATE_normalizeTimestamp(d.timestampValue),A=__PRIVATE_normalizeTimestamp(y.timestampValue);return _.seconds===A.seconds&&_.nanos===A.nanos})(u,n);case 5:return u.stringValue===n.stringValue;case 6:return(function(d,y){return __PRIVATE_normalizeByteString(d.bytesValue).isEqual(__PRIVATE_normalizeByteString(y.bytesValue))})(u,n);case 7:return u.referenceValue===n.referenceValue;case 8:return(function(d,y){return __PRIVATE_normalizeNumber(d.geoPointValue.latitude)===__PRIVATE_normalizeNumber(y.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(d.geoPointValue.longitude)===__PRIVATE_normalizeNumber(y.geoPointValue.longitude)})(u,n);case 2:return(function(d,y){if("integerValue"in d&&"integerValue"in y)return __PRIVATE_normalizeNumber(d.integerValue)===__PRIVATE_normalizeNumber(y.integerValue);if("doubleValue"in d&&"doubleValue"in y){const _=__PRIVATE_normalizeNumber(d.doubleValue),A=__PRIVATE_normalizeNumber(y.doubleValue);return _===A?__PRIVATE_isNegativeZero(_)===__PRIVATE_isNegativeZero(A):isNaN(_)&&isNaN(A)}return!1})(u,n);case 9:return __PRIVATE_arrayEquals(u.arrayValue.values||[],n.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return(function(d,y){const _=d.mapValue.fields||{},A=y.mapValue.fields||{};if(__PRIVATE_objectSize(_)!==__PRIVATE_objectSize(A))return!1;for(const R in _)if(_.hasOwnProperty(R)&&(A[R]===void 0||!__PRIVATE_valueEquals(_[R],A[R])))return!1;return!0})(u,n);default:return fail(52216,{left:u})}}function __PRIVATE_arrayValueContains(u,n){return(u.values||[]).find((s=>__PRIVATE_valueEquals(s,n)))!==void 0}function __PRIVATE_valueCompare(u,n){if(u===n)return 0;const s=__PRIVATE_typeOrder(u),f=__PRIVATE_typeOrder(n);if(s!==f)return __PRIVATE_primitiveComparator(s,f);switch(s){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(u.booleanValue,n.booleanValue);case 2:return(function(y,_){const A=__PRIVATE_normalizeNumber(y.integerValue||y.doubleValue),R=__PRIVATE_normalizeNumber(_.integerValue||_.doubleValue);return A<R?-1:A>R?1:A===R?0:isNaN(A)?isNaN(R)?0:-1:1})(u,n);case 3:return __PRIVATE_compareTimestamps(u.timestampValue,n.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(u),__PRIVATE_getLocalWriteTime(n));case 5:return __PRIVATE_compareUtf8Strings(u.stringValue,n.stringValue);case 6:return(function(y,_){const A=__PRIVATE_normalizeByteString(y),R=__PRIVATE_normalizeByteString(_);return A.compareTo(R)})(u.bytesValue,n.bytesValue);case 7:return(function(y,_){const A=y.split("/"),R=_.split("/");for(let I=0;I<A.length&&I<R.length;I++){const G=__PRIVATE_primitiveComparator(A[I],R[I]);if(G!==0)return G}return __PRIVATE_primitiveComparator(A.length,R.length)})(u.referenceValue,n.referenceValue);case 8:return(function(y,_){const A=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(y.latitude),__PRIVATE_normalizeNumber(_.latitude));return A!==0?A:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(y.longitude),__PRIVATE_normalizeNumber(_.longitude))})(u.geoPointValue,n.geoPointValue);case 9:return __PRIVATE_compareArrays(u.arrayValue,n.arrayValue);case 10:return(function(y,_){var q,K,Q,ne;const A=y.fields||{},R=_.fields||{},I=(q=A[ct])==null?void 0:q.arrayValue,G=(K=R[ct])==null?void 0:K.arrayValue,Y=__PRIVATE_primitiveComparator(((Q=I==null?void 0:I.values)==null?void 0:Q.length)||0,((ne=G==null?void 0:G.values)==null?void 0:ne.length)||0);return Y!==0?Y:__PRIVATE_compareArrays(I,G)})(u.mapValue,n.mapValue);case 11:return(function(y,_){if(y===at.mapValue&&_===at.mapValue)return 0;if(y===at.mapValue)return 1;if(_===at.mapValue)return-1;const A=y.fields||{},R=Object.keys(A),I=_.fields||{},G=Object.keys(I);R.sort(),G.sort();for(let Y=0;Y<R.length&&Y<G.length;++Y){const q=__PRIVATE_compareUtf8Strings(R[Y],G[Y]);if(q!==0)return q;const K=__PRIVATE_valueCompare(A[R[Y]],I[G[Y]]);if(K!==0)return K}return __PRIVATE_primitiveComparator(R.length,G.length)})(u.mapValue,n.mapValue);default:throw fail(23264,{he:s})}}function __PRIVATE_compareTimestamps(u,n){if(typeof u=="string"&&typeof n=="string"&&u.length===n.length)return __PRIVATE_primitiveComparator(u,n);const s=__PRIVATE_normalizeTimestamp(u),f=__PRIVATE_normalizeTimestamp(n),d=__PRIVATE_primitiveComparator(s.seconds,f.seconds);return d!==0?d:__PRIVATE_primitiveComparator(s.nanos,f.nanos)}function __PRIVATE_compareArrays(u,n){const s=u.values||[],f=n.values||[];for(let d=0;d<s.length&&d<f.length;++d){const y=__PRIVATE_valueCompare(s[d],f[d]);if(y)return y}return __PRIVATE_primitiveComparator(s.length,f.length)}function canonicalId(u){return __PRIVATE_canonifyValue(u)}function __PRIVATE_canonifyValue(u){return"nullValue"in u?"null":"booleanValue"in u?""+u.booleanValue:"integerValue"in u?""+u.integerValue:"doubleValue"in u?""+u.doubleValue:"timestampValue"in u?(function(s){const f=__PRIVATE_normalizeTimestamp(s);return`time(${f.seconds},${f.nanos})`})(u.timestampValue):"stringValue"in u?u.stringValue:"bytesValue"in u?(function(s){return __PRIVATE_normalizeByteString(s).toBase64()})(u.bytesValue):"referenceValue"in u?(function(s){return DocumentKey.fromName(s).toString()})(u.referenceValue):"geoPointValue"in u?(function(s){return`geo(${s.latitude},${s.longitude})`})(u.geoPointValue):"arrayValue"in u?(function(s){let f="[",d=!0;for(const y of s.values||[])d?d=!1:f+=",",f+=__PRIVATE_canonifyValue(y);return f+"]"})(u.arrayValue):"mapValue"in u?(function(s){const f=Object.keys(s.fields||{}).sort();let d="{",y=!0;for(const _ of f)y?y=!1:d+=",",d+=`${_}:${__PRIVATE_canonifyValue(s.fields[_])}`;return d+"}"})(u.mapValue):fail(61005,{value:u})}function __PRIVATE_estimateByteSize(u){switch(__PRIVATE_typeOrder(u)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const n=__PRIVATE_getPreviousValue(u);return n?16+__PRIVATE_estimateByteSize(n):16;case 5:return 2*u.stringValue.length;case 6:return __PRIVATE_normalizeByteString(u.bytesValue).approximateByteSize();case 7:return u.referenceValue.length;case 9:return(function(f){return(f.values||[]).reduce(((d,y)=>d+__PRIVATE_estimateByteSize(y)),0)})(u.arrayValue);case 10:case 11:return(function(f){let d=0;return forEach(f.fields,((y,_)=>{d+=y.length+__PRIVATE_estimateByteSize(_)})),d})(u.mapValue);default:throw fail(13486,{value:u})}}function __PRIVATE_refValue(u,n){return{referenceValue:`projects/${u.projectId}/databases/${u.database}/documents/${n.path.canonicalString()}`}}function isInteger$1(u){return!!u&&"integerValue"in u}function isArray$1(u){return!!u&&"arrayValue"in u}function __PRIVATE_isNullValue(u){return!!u&&"nullValue"in u}function __PRIVATE_isNanValue(u){return!!u&&"doubleValue"in u&&isNaN(Number(u.doubleValue))}function __PRIVATE_isMapValue(u){return!!u&&"mapValue"in u}function __PRIVATE_isVectorValue(u){var s,f;return((f=(((s=u==null?void 0:u.mapValue)==null?void 0:s.fields)||{})[ot])==null?void 0:f.stringValue)===ut}function __PRIVATE_deepClone(u){if(u.geoPointValue)return{geoPointValue:{...u.geoPointValue}};if(u.timestampValue&&typeof u.timestampValue=="object")return{timestampValue:{...u.timestampValue}};if(u.mapValue){const n={mapValue:{fields:{}}};return forEach(u.mapValue.fields,((s,f)=>n.mapValue.fields[s]=__PRIVATE_deepClone(f))),n}if(u.arrayValue){const n={arrayValue:{values:[]}};for(let s=0;s<(u.arrayValue.values||[]).length;++s)n.arrayValue.values[s]=__PRIVATE_deepClone(u.arrayValue.values[s]);return n}return{...u}}function __PRIVATE_isMaxValue(u){return(((u.mapValue||{}).fields||{}).__type__||{}).stringValue===_t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(n){this.value=n}static empty(){return new ObjectValue({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let s=this.value;for(let f=0;f<n.length-1;++f)if(s=(s.mapValue.fields||{})[n.get(f)],!__PRIVATE_isMapValue(s))return null;return s=(s.mapValue.fields||{})[n.lastSegment()],s||null}}set(n,s){this.getFieldsMap(n.popLast())[n.lastSegment()]=__PRIVATE_deepClone(s)}setAll(n){let s=FieldPath$1.emptyPath(),f={},d=[];n.forEach(((_,A)=>{if(!s.isImmediateParentOf(A)){const R=this.getFieldsMap(s);this.applyChanges(R,f,d),f={},d=[],s=A.popLast()}_?f[A.lastSegment()]=__PRIVATE_deepClone(_):d.push(A.lastSegment())}));const y=this.getFieldsMap(s);this.applyChanges(y,f,d)}delete(n){const s=this.field(n.popLast());__PRIVATE_isMapValue(s)&&s.mapValue.fields&&delete s.mapValue.fields[n.lastSegment()]}isEqual(n){return __PRIVATE_valueEquals(this.value,n.value)}getFieldsMap(n){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let f=0;f<n.length;++f){let d=s.mapValue.fields[n.get(f)];__PRIVATE_isMapValue(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},s.mapValue.fields[n.get(f)]=d),s=d}return s.mapValue.fields}applyChanges(n,s,f){forEach(s,((d,y)=>n[d]=y));for(const d of f)delete n[d]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(u){const n=[];return forEach(u.fields,((s,f)=>{const d=new FieldPath$1([s]);if(__PRIVATE_isMapValue(f)){const y=__PRIVATE_extractFieldMask(f.mapValue).fields;if(y.length===0)n.push(d);else for(const _ of y)n.push(d.child(_))}else n.push(d)})),new FieldMask(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(n,s,f,d,y,_,A){this.key=n,this.documentType=s,this.version=f,this.readTime=d,this.createTime=y,this.data=_,this.documentState=A}static newInvalidDocument(n){return new MutableDocument(n,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(n,s,f,d){return new MutableDocument(n,1,s,SnapshotVersion.min(),f,d,0)}static newNoDocument(n,s){return new MutableDocument(n,2,s,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(n,s){return new MutableDocument(n,3,s,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(n,s){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=n),this.version=n,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(n){return this.readTime=n,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(n){return n instanceof MutableDocument&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(n,s){this.position=n,this.inclusive=s}}function __PRIVATE_boundCompareToDocument(u,n,s){let f=0;for(let d=0;d<u.position.length;d++){const y=n[d],_=u.position[d];if(y.field.isKeyField()?f=DocumentKey.comparator(DocumentKey.fromName(_.referenceValue),s.key):f=__PRIVATE_valueCompare(_,s.data.field(y.field)),y.dir==="desc"&&(f*=-1),f!==0)break}return f}function __PRIVATE_boundEquals(u,n){if(u===null)return n===null;if(n===null||u.inclusive!==n.inclusive||u.position.length!==n.position.length)return!1;for(let s=0;s<u.position.length;s++)if(!__PRIVATE_valueEquals(u.position[s],n.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(n,s="asc"){this.field=n,this.dir=s}}function __PRIVATE_orderByEquals(u,n){return u.dir===n.dir&&u.field.isEqual(n.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(n,s,f){super(),this.field=n,this.op=s,this.value=f}static create(n,s,f){return n.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(n,s,f):new __PRIVATE_KeyFieldFilter(n,s,f):s==="array-contains"?new __PRIVATE_ArrayContainsFilter(n,f):s==="in"?new __PRIVATE_InFilter(n,f):s==="not-in"?new __PRIVATE_NotInFilter(n,f):s==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(n,f):new FieldFilter(n,s,f)}static createKeyFieldInFilter(n,s,f){return s==="in"?new __PRIVATE_KeyFieldInFilter(n,f):new __PRIVATE_KeyFieldNotInFilter(n,f)}matches(n){const s=n.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(s,this.value)):s!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(s)&&this.matchesComparison(__PRIVATE_valueCompare(s,this.value))}matchesComparison(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(n,s){super(),this.filters=n,this.op=s,this.Pe=null}static create(n,s){return new CompositeFilter(n,s)}matches(n){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find((s=>!s.matches(n)))===void 0:this.filters.find((s=>s.matches(n)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((n,s)=>n.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(u){return u.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(u){return __PRIVATE_compositeFilterIsFlat(u)&&__PRIVATE_compositeFilterIsConjunction(u)}function __PRIVATE_compositeFilterIsFlat(u){for(const n of u.filters)if(n instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(u){if(u instanceof FieldFilter)return u.field.canonicalString()+u.op.toString()+canonicalId(u.value);if(__PRIVATE_compositeFilterIsFlatConjunction(u))return u.filters.map((n=>__PRIVATE_canonifyFilter(n))).join(",");{const n=u.filters.map((s=>__PRIVATE_canonifyFilter(s))).join(",");return`${u.op}(${n})`}}function __PRIVATE_filterEquals(u,n){return u instanceof FieldFilter?(function(f,d){return d instanceof FieldFilter&&f.op===d.op&&f.field.isEqual(d.field)&&__PRIVATE_valueEquals(f.value,d.value)})(u,n):u instanceof CompositeFilter?(function(f,d){return d instanceof CompositeFilter&&f.op===d.op&&f.filters.length===d.filters.length?f.filters.reduce(((y,_,A)=>y&&__PRIVATE_filterEquals(_,d.filters[A])),!0):!1})(u,n):void fail(19439)}function __PRIVATE_stringifyFilter(u){return u instanceof FieldFilter?(function(s){return`${s.field.canonicalString()} ${s.op} ${canonicalId(s.value)}`})(u):u instanceof CompositeFilter?(function(s){return s.op.toString()+" {"+s.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"})(u):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(n,s,f){super(n,s,f),this.key=DocumentKey.fromName(f.referenceValue)}matches(n){const s=DocumentKey.comparator(n.key,this.key);return this.matchesComparison(s)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(n,s){super(n,"in",s),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",s)}matches(n){return this.keys.some((s=>s.isEqual(n.key)))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(n,s){super(n,"not-in",s),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",s)}matches(n){return!this.keys.some((s=>s.isEqual(n.key)))}}function __PRIVATE_extractDocumentKeysFromArrayValue(u,n){var s;return(((s=n.arrayValue)==null?void 0:s.values)||[]).map((f=>DocumentKey.fromName(f.referenceValue)))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(n,s){super(n,"array-contains",s)}matches(n){const s=n.data.field(this.field);return isArray$1(s)&&__PRIVATE_arrayValueContains(s.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(n,s){super(n,"in",s)}matches(n){const s=n.data.field(this.field);return s!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,s)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(n,s){super(n,"not-in",s)}matches(n){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=n.data.field(this.field);return s!==null&&s.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,s)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(n,s){super(n,"array-contains-any",s)}matches(n){const s=n.data.field(this.field);return!(!isArray$1(s)||!s.arrayValue.values)&&s.arrayValue.values.some((f=>__PRIVATE_arrayValueContains(this.value.arrayValue,f)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(n,s=null,f=[],d=[],y=null,_=null,A=null){this.path=n,this.collectionGroup=s,this.orderBy=f,this.filters=d,this.limit=y,this.startAt=_,this.endAt=A,this.Te=null}}function __PRIVATE_newTarget(u,n=null,s=[],f=[],d=null,y=null,_=null){return new __PRIVATE_TargetImpl(u,n,s,f,d,y,_)}function __PRIVATE_canonifyTarget(u){const n=__PRIVATE_debugCast(u);if(n.Te===null){let s=n.path.canonicalString();n.collectionGroup!==null&&(s+="|cg:"+n.collectionGroup),s+="|f:",s+=n.filters.map((f=>__PRIVATE_canonifyFilter(f))).join(","),s+="|ob:",s+=n.orderBy.map((f=>(function(y){return y.field.canonicalString()+y.dir})(f))).join(","),__PRIVATE_isNullOrUndefined(n.limit)||(s+="|l:",s+=n.limit),n.startAt&&(s+="|lb:",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((f=>canonicalId(f))).join(",")),n.endAt&&(s+="|ub:",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((f=>canonicalId(f))).join(",")),n.Te=s}return n.Te}function __PRIVATE_targetEquals(u,n){if(u.limit!==n.limit||u.orderBy.length!==n.orderBy.length)return!1;for(let s=0;s<u.orderBy.length;s++)if(!__PRIVATE_orderByEquals(u.orderBy[s],n.orderBy[s]))return!1;if(u.filters.length!==n.filters.length)return!1;for(let s=0;s<u.filters.length;s++)if(!__PRIVATE_filterEquals(u.filters[s],n.filters[s]))return!1;return u.collectionGroup===n.collectionGroup&&!!u.path.isEqual(n.path)&&!!__PRIVATE_boundEquals(u.startAt,n.startAt)&&__PRIVATE_boundEquals(u.endAt,n.endAt)}function __PRIVATE_targetIsDocumentTarget(u){return DocumentKey.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(n,s=null,f=[],d=[],y=null,_="F",A=null,R=null){this.path=n,this.collectionGroup=s,this.explicitOrderBy=f,this.filters=d,this.limit=y,this.limitType=_,this.startAt=A,this.endAt=R,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(u,n,s,f,d,y,_,A){return new __PRIVATE_QueryImpl(u,n,s,f,d,y,_,A)}function __PRIVATE_newQueryForPath(u){return new __PRIVATE_QueryImpl(u)}function __PRIVATE_queryMatchesAllDocuments(u){return u.filters.length===0&&u.limit===null&&u.startAt==null&&u.endAt==null&&(u.explicitOrderBy.length===0||u.explicitOrderBy.length===1&&u.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isDocumentQuery$1(u){return DocumentKey.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}function __PRIVATE_isCollectionGroupQuery(u){return u.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(u){const n=__PRIVATE_debugCast(u);if(n.Ie===null){n.Ie=[];const s=new Set;for(const y of n.explicitOrderBy)n.Ie.push(y),s.add(y.field.canonicalString());const f=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";(function(_){let A=new SortedSet(FieldPath$1.comparator);return _.filters.forEach((R=>{R.getFlattenedFilters().forEach((I=>{I.isInequality()&&(A=A.add(I.field))}))})),A})(n).forEach((y=>{s.has(y.canonicalString())||y.isKeyField()||n.Ie.push(new OrderBy(y,f))})),s.has(FieldPath$1.keyField().canonicalString())||n.Ie.push(new OrderBy(FieldPath$1.keyField(),f))}return n.Ie}function __PRIVATE_queryToTarget(u){const n=__PRIVATE_debugCast(u);return n.Ee||(n.Ee=__PRIVATE__queryToTarget(n,__PRIVATE_queryNormalizedOrderBy(u))),n.Ee}function __PRIVATE__queryToTarget(u,n){if(u.limitType==="F")return __PRIVATE_newTarget(u.path,u.collectionGroup,n,u.filters,u.limit,u.startAt,u.endAt);{n=n.map((d=>{const y=d.dir==="desc"?"asc":"desc";return new OrderBy(d.field,y)}));const s=u.endAt?new Bound(u.endAt.position,u.endAt.inclusive):null,f=u.startAt?new Bound(u.startAt.position,u.startAt.inclusive):null;return __PRIVATE_newTarget(u.path,u.collectionGroup,n,u.filters,u.limit,s,f)}}function __PRIVATE_queryWithAddedFilter(u,n){const s=u.filters.concat([n]);return new __PRIVATE_QueryImpl(u.path,u.collectionGroup,u.explicitOrderBy.slice(),s,u.limit,u.limitType,u.startAt,u.endAt)}function __PRIVATE_queryWithAddedOrderBy(u,n){const s=u.explicitOrderBy.concat([n]);return new __PRIVATE_QueryImpl(u.path,u.collectionGroup,s,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}function __PRIVATE_queryWithLimit(u,n,s){return new __PRIVATE_QueryImpl(u.path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),n,s,u.startAt,u.endAt)}function __PRIVATE_queryEquals(u,n){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(u),__PRIVATE_queryToTarget(n))&&u.limitType===n.limitType}function __PRIVATE_canonifyQuery(u){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(u))}|lt:${u.limitType}`}function __PRIVATE_stringifyQuery(u){return`Query(target=${(function(s){let f=s.path.canonicalString();return s.collectionGroup!==null&&(f+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(f+=`, filters: [${s.filters.map((d=>__PRIVATE_stringifyFilter(d))).join(", ")}]`),__PRIVATE_isNullOrUndefined(s.limit)||(f+=", limit: "+s.limit),s.orderBy.length>0&&(f+=`, orderBy: [${s.orderBy.map((d=>(function(_){return`${_.field.canonicalString()} (${_.dir})`})(d))).join(", ")}]`),s.startAt&&(f+=", startAt: ",f+=s.startAt.inclusive?"b:":"a:",f+=s.startAt.position.map((d=>canonicalId(d))).join(",")),s.endAt&&(f+=", endAt: ",f+=s.endAt.inclusive?"a:":"b:",f+=s.endAt.position.map((d=>canonicalId(d))).join(",")),`Target(${f})`})(__PRIVATE_queryToTarget(u))}; limitType=${u.limitType})`}function __PRIVATE_queryMatches(u,n){return n.isFoundDocument()&&(function(f,d){const y=d.key.path;return f.collectionGroup!==null?d.key.hasCollectionId(f.collectionGroup)&&f.path.isPrefixOf(y):DocumentKey.isDocumentKey(f.path)?f.path.isEqual(y):f.path.isImmediateParentOf(y)})(u,n)&&(function(f,d){for(const y of __PRIVATE_queryNormalizedOrderBy(f))if(!y.field.isKeyField()&&d.data.field(y.field)===null)return!1;return!0})(u,n)&&(function(f,d){for(const y of f.filters)if(!y.matches(d))return!1;return!0})(u,n)&&(function(f,d){return!(f.startAt&&!(function(_,A,R){const I=__PRIVATE_boundCompareToDocument(_,A,R);return _.inclusive?I<=0:I<0})(f.startAt,__PRIVATE_queryNormalizedOrderBy(f),d)||f.endAt&&!(function(_,A,R){const I=__PRIVATE_boundCompareToDocument(_,A,R);return _.inclusive?I>=0:I>0})(f.endAt,__PRIVATE_queryNormalizedOrderBy(f),d))})(u,n)}function __PRIVATE_queryCollectionGroup(u){return u.collectionGroup||(u.path.length%2==1?u.path.lastSegment():u.path.get(u.path.length-2))}function __PRIVATE_newQueryComparator(u){return(n,s)=>{let f=!1;for(const d of __PRIVATE_queryNormalizedOrderBy(u)){const y=__PRIVATE_compareDocs(d,n,s);if(y!==0)return y;f=f||d.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(u,n,s){const f=u.field.isKeyField()?DocumentKey.comparator(n.key,s.key):(function(y,_,A){const R=_.data.field(y),I=A.data.field(y);return R!==null&&I!==null?__PRIVATE_valueCompare(R,I):fail(42886)})(u.field,n,s);switch(u.dir){case"asc":return f;case"desc":return-1*f;default:return fail(19790,{direction:u.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(n,s){this.mapKeyFn=n,this.equalsFn=s,this.inner={},this.innerSize=0}get(n){const s=this.mapKeyFn(n),f=this.inner[s];if(f!==void 0){for(const[d,y]of f)if(this.equalsFn(d,n))return y}}has(n){return this.get(n)!==void 0}set(n,s){const f=this.mapKeyFn(n),d=this.inner[f];if(d===void 0)return this.inner[f]=[[n,s]],void this.innerSize++;for(let y=0;y<d.length;y++)if(this.equalsFn(d[y][0],n))return void(d[y]=[n,s]);d.push([n,s]),this.innerSize++}delete(n){const s=this.mapKeyFn(n),f=this.inner[s];if(f===void 0)return!1;for(let d=0;d<f.length;d++)if(this.equalsFn(f[d][0],n))return f.length===1?delete this.inner[s]:f.splice(d,1),this.innerSize--,!0;return!1}forEach(n){forEach(this.inner,((s,f)=>{for(const[d,y]of f)n(d,y)}))}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return Pt}const Tt=new SortedMap(DocumentKey.comparator);function documentMap(...u){let n=Tt;for(const s of u)n=n.insert(s.key,s);return n}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(u){let n=Tt;return u.forEach(((s,f)=>n=n.insert(s,f.overlayedDocument))),n}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap((u=>u.toString()),((u,n)=>u.isEqual(n)))}const It=new SortedMap(DocumentKey.comparator),Et=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...u){let n=Et;for(const s of u)n=n.add(s);return n}const Rt=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return Rt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(u,n){if(u.useProto3Json){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(n)?"-0":n}}function __PRIVATE_toInteger(u){return{integerValue:""+u}}function toNumber(u,n){return isSafeInteger(n)?__PRIVATE_toInteger(n):__PRIVATE_toDouble(u,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(u,n,s){return u instanceof __PRIVATE_ServerTimestampTransform?(function(d,y){const _={fields:{[nt]:{stringValue:tt},[it]:{timestampValue:{seconds:d.seconds,nanos:d.nanoseconds}}}};return y&&__PRIVATE_isServerTimestamp(y)&&(y=__PRIVATE_getPreviousValue(y)),y&&(_.fields[rt]=y),{mapValue:_}})(s,n):u instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(u,n):u instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(u,n):(function(d,y){const _=__PRIVATE_computeTransformOperationBaseValue(d,y),A=asNumber(_)+asNumber(d.Ae);return isInteger$1(_)&&isInteger$1(d.Ae)?__PRIVATE_toInteger(A):__PRIVATE_toDouble(d.serializer,A)})(u,n)}function __PRIVATE_applyTransformOperationToRemoteDocument(u,n,s){return u instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(u,n):u instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(u,n):s}function __PRIVATE_computeTransformOperationBaseValue(u,n){return u instanceof __PRIVATE_NumericIncrementTransformOperation?(function(f){return isInteger$1(f)||(function(y){return!!y&&"doubleValue"in y})(f)})(n)?n:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(n){super(),this.elements=n}}function __PRIVATE_applyArrayUnionTransformOperation(u,n){const s=__PRIVATE_coercedFieldValuesArray(n);for(const f of u.elements)s.some((d=>__PRIVATE_valueEquals(d,f)))||s.push(f);return{arrayValue:{values:s}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(n){super(),this.elements=n}}function __PRIVATE_applyArrayRemoveTransformOperation(u,n){let s=__PRIVATE_coercedFieldValuesArray(n);for(const f of u.elements)s=s.filter((d=>!__PRIVATE_valueEquals(d,f)));return{arrayValue:{values:s}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(n,s){super(),this.serializer=n,this.Ae=s}}function asNumber(u){return __PRIVATE_normalizeNumber(u.integerValue||u.doubleValue)}function __PRIVATE_coercedFieldValuesArray(u){return isArray$1(u)&&u.arrayValue.values?u.arrayValue.values.slice():[]}function __PRIVATE_fieldTransformEquals(u,n){return u.field.isEqual(n.field)&&(function(f,d){return f instanceof __PRIVATE_ArrayUnionTransformOperation&&d instanceof __PRIVATE_ArrayUnionTransformOperation||f instanceof __PRIVATE_ArrayRemoveTransformOperation&&d instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(f.elements,d.elements,__PRIVATE_valueEquals):f instanceof __PRIVATE_NumericIncrementTransformOperation&&d instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(f.Ae,d.Ae):f instanceof __PRIVATE_ServerTimestampTransform&&d instanceof __PRIVATE_ServerTimestampTransform})(u.transform,n.transform)}class MutationResult{constructor(n,s){this.version=n,this.transformResults=s}}class Precondition{constructor(n,s){this.updateTime=n,this.exists=s}static none(){return new Precondition}static exists(n){return new Precondition(void 0,n)}static updateTime(n){return new Precondition(n)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(u,n){return u.updateTime!==void 0?n.isFoundDocument()&&n.version.isEqual(u.updateTime):u.exists===void 0||u.exists===n.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(u,n){if(!u.hasLocalMutations||n&&n.fields.length===0)return null;if(n===null)return u.isNoDocument()?new __PRIVATE_DeleteMutation(u.key,Precondition.none()):new __PRIVATE_SetMutation(u.key,u.data,Precondition.none());{const s=u.data,f=ObjectValue.empty();let d=new SortedSet(FieldPath$1.comparator);for(let y of n.fields)if(!d.has(y)){let _=s.field(y);_===null&&y.length>1&&(y=y.popLast(),_=s.field(y)),_===null?f.delete(y):f.set(y,_),d=d.add(y)}return new __PRIVATE_PatchMutation(u.key,f,new FieldMask(d.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(u,n,s){u instanceof __PRIVATE_SetMutation?(function(d,y,_){const A=d.value.clone(),R=__PRIVATE_serverTransformResults(d.fieldTransforms,y,_.transformResults);A.setAll(R),y.convertToFoundDocument(_.version,A).setHasCommittedMutations()})(u,n,s):u instanceof __PRIVATE_PatchMutation?(function(d,y,_){if(!__PRIVATE_preconditionIsValidForDocument(d.precondition,y))return void y.convertToUnknownDocument(_.version);const A=__PRIVATE_serverTransformResults(d.fieldTransforms,y,_.transformResults),R=y.data;R.setAll(__PRIVATE_getPatch(d)),R.setAll(A),y.convertToFoundDocument(_.version,R).setHasCommittedMutations()})(u,n,s):(function(d,y,_){y.convertToNoDocument(_.version).setHasCommittedMutations()})(0,n,s)}function __PRIVATE_mutationApplyToLocalView(u,n,s,f){return u instanceof __PRIVATE_SetMutation?(function(y,_,A,R){if(!__PRIVATE_preconditionIsValidForDocument(y.precondition,_))return A;const I=y.value.clone(),G=__PRIVATE_localTransformResults(y.fieldTransforms,R,_);return I.setAll(G),_.convertToFoundDocument(_.version,I).setHasLocalMutations(),null})(u,n,s,f):u instanceof __PRIVATE_PatchMutation?(function(y,_,A,R){if(!__PRIVATE_preconditionIsValidForDocument(y.precondition,_))return A;const I=__PRIVATE_localTransformResults(y.fieldTransforms,R,_),G=_.data;return G.setAll(__PRIVATE_getPatch(y)),G.setAll(I),_.convertToFoundDocument(_.version,G).setHasLocalMutations(),A===null?null:A.unionWith(y.fieldMask.fields).unionWith(y.fieldTransforms.map((Y=>Y.field)))})(u,n,s,f):(function(y,_,A){return __PRIVATE_preconditionIsValidForDocument(y.precondition,_)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):A})(u,n,s)}function __PRIVATE_mutationExtractBaseValue(u,n){let s=null;for(const f of u.fieldTransforms){const d=n.data.field(f.field),y=__PRIVATE_computeTransformOperationBaseValue(f.transform,d||null);y!=null&&(s===null&&(s=ObjectValue.empty()),s.set(f.field,y))}return s||null}function __PRIVATE_mutationEquals(u,n){return u.type===n.type&&!!u.key.isEqual(n.key)&&!!u.precondition.isEqual(n.precondition)&&!!(function(f,d){return f===void 0&&d===void 0||!(!f||!d)&&__PRIVATE_arrayEquals(f,d,((y,_)=>__PRIVATE_fieldTransformEquals(y,_)))})(u.fieldTransforms,n.fieldTransforms)&&(u.type===0?u.value.isEqual(n.value):u.type!==1||u.data.isEqual(n.data)&&u.fieldMask.isEqual(n.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(n,s,f,d=[]){super(),this.key=n,this.value=s,this.precondition=f,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(n,s,f,d,y=[]){super(),this.key=n,this.data=s,this.fieldMask=f,this.precondition=d,this.fieldTransforms=y,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(u){const n=new Map;return u.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const f=u.data.field(s);n.set(s,f)}})),n}function __PRIVATE_serverTransformResults(u,n,s){const f=new Map;__PRIVATE_hardAssert(u.length===s.length,32656,{Ve:s.length,de:u.length});for(let d=0;d<s.length;d++){const y=u[d],_=y.transform,A=n.data.field(y.field);f.set(y.field,__PRIVATE_applyTransformOperationToRemoteDocument(_,A,s[d]))}return f}function __PRIVATE_localTransformResults(u,n,s){const f=new Map;for(const d of u){const y=d.transform,_=s.data.field(d.field);f.set(d.field,__PRIVATE_applyTransformOperationToLocalView(y,_,n))}return f}class __PRIVATE_DeleteMutation extends Mutation{constructor(n,s){super(),this.key=n,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(n,s){super(),this.key=n,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(n,s,f,d){this.batchId=n,this.localWriteTime=s,this.baseMutations=f,this.mutations=d}applyToRemoteDocument(n,s){const f=s.mutationResults;for(let d=0;d<this.mutations.length;d++){const y=this.mutations[d];y.key.isEqual(n.key)&&__PRIVATE_mutationApplyToRemoteDocument(y,n,f[d])}}applyToLocalView(n,s){for(const f of this.baseMutations)f.key.isEqual(n.key)&&(s=__PRIVATE_mutationApplyToLocalView(f,n,s,this.localWriteTime));for(const f of this.mutations)f.key.isEqual(n.key)&&(s=__PRIVATE_mutationApplyToLocalView(f,n,s,this.localWriteTime));return s}applyToLocalDocumentSet(n,s){const f=__PRIVATE_newMutationMap();return this.mutations.forEach((d=>{const y=n.get(d.key),_=y.overlayedDocument;let A=this.applyToLocalView(_,y.mutatedFields);A=s.has(d.key)?null:A;const R=__PRIVATE_calculateOverlayMutation(_,A);R!==null&&f.set(d.key,R),_.isValidDocument()||_.convertToNoDocument(SnapshotVersion.min())})),f}keys(){return this.mutations.reduce(((n,s)=>n.add(s.key)),__PRIVATE_documentKeySet())}isEqual(n){return this.batchId===n.batchId&&__PRIVATE_arrayEquals(this.mutations,n.mutations,((s,f)=>__PRIVATE_mutationEquals(s,f)))&&__PRIVATE_arrayEquals(this.baseMutations,n.baseMutations,((s,f)=>__PRIVATE_mutationEquals(s,f)))}}class MutationBatchResult{constructor(n,s,f,d){this.batch=n,this.commitVersion=s,this.mutationResults=f,this.docVersions=d}static from(n,s,f){__PRIVATE_hardAssert(n.mutations.length===f.length,58842,{me:n.mutations.length,fe:f.length});let d=(function(){return It})();const y=n.mutations;for(let _=0;_<y.length;_++)d=d.insert(y[_].key,f[_].version);return new MutationBatchResult(n,s,f,d)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(n,s){this.largestBatchId=n,this.mutation=s}getKey(){return this.mutation.key}isEqual(n){return n!==null&&this.mutation===n.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(n,s){this.count=n,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,Vt;function __PRIVATE_isPermanentError(u){switch(u){case C.OK:return fail(64938);case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0;default:return fail(15467,{code:u})}}function __PRIVATE_mapCodeFromRpcCode(u){if(u===void 0)return __PRIVATE_logError("GRPC error has no .code"),C.UNKNOWN;switch(u){case At.OK:return C.OK;case At.CANCELLED:return C.CANCELLED;case At.UNKNOWN:return C.UNKNOWN;case At.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case At.INTERNAL:return C.INTERNAL;case At.UNAVAILABLE:return C.UNAVAILABLE;case At.UNAUTHENTICATED:return C.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case At.NOT_FOUND:return C.NOT_FOUND;case At.ALREADY_EXISTS:return C.ALREADY_EXISTS;case At.PERMISSION_DENIED:return C.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case At.ABORTED:return C.ABORTED;case At.OUT_OF_RANGE:return C.OUT_OF_RANGE;case At.UNIMPLEMENTED:return C.UNIMPLEMENTED;case At.DATA_LOSS:return C.DATA_LOSS;default:return fail(39323,{code:u})}}(Vt=At||(At={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(u){const n=__PRIVATE_newTextEncoder().encode(u),s=new Md5;return s.update(n),new Uint8Array(s.digest())}function __PRIVATE_get64BitUints(u){const n=new DataView(u.buffer),s=n.getUint32(0,!0),f=n.getUint32(4,!0),d=n.getUint32(8,!0),y=n.getUint32(12,!0);return[new Integer([s,f],0),new Integer([d,y],0)]}class BloomFilter{constructor(n,s,f){if(this.bitmap=n,this.padding=s,this.hashCount=f,s<0||s>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${s}`);if(f<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${f}`);if(n.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${f}`);if(n.length===0&&s!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*n.length-s,this.pe=Integer.fromNumber(this.ge)}ye(n,s,f){let d=n.add(s.multiply(Integer.fromNumber(f)));return d.compare(mt)===1&&(d=new Integer([d.getBits(0),d.getBits(1)],0)),d.modulo(this.pe).toNumber()}we(n){return!!(this.bitmap[Math.floor(n/8)]&1<<n%8)}mightContain(n){if(this.ge===0)return!1;const s=__PRIVATE_getMd5HashValue(n),[f,d]=__PRIVATE_get64BitUints(s);for(let y=0;y<this.hashCount;y++){const _=this.ye(f,d,y);if(!this.we(_))return!1}return!0}static create(n,s,f){const d=n%8==0?0:8-n%8,y=new Uint8Array(Math.ceil(n/8)),_=new BloomFilter(y,d,s);return f.forEach((A=>_.insert(A))),_}insert(n){if(this.ge===0)return;const s=__PRIVATE_getMd5HashValue(n),[f,d]=__PRIVATE_get64BitUints(s);for(let y=0;y<this.hashCount;y++){const _=this.ye(f,d,y);this.be(_)}}be(n){const s=Math.floor(n/8),f=n%8;this.bitmap[s]|=1<<f}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(n,s,f,d,y){this.snapshotVersion=n,this.targetChanges=s,this.targetMismatches=f,this.documentUpdates=d,this.resolvedLimboDocuments=y}static createSynthesizedRemoteEventForCurrentChange(n,s,f){const d=new Map;return d.set(n,TargetChange.createSynthesizedTargetChangeForCurrentChange(n,s,f)),new RemoteEvent(SnapshotVersion.min(),d,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(n,s,f,d,y){this.resumeToken=n,this.current=s,this.addedDocuments=f,this.modifiedDocuments=d,this.removedDocuments=y}static createSynthesizedTargetChangeForCurrentChange(n,s,f){return new TargetChange(f,s,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(n,s,f,d){this.Se=n,this.removedTargetIds=s,this.key=f,this.De=d}}class __PRIVATE_ExistenceFilterChange{constructor(n,s){this.targetId=n,this.Ce=s}}class __PRIVATE_WatchTargetChange{constructor(n,s,f=ByteString.EMPTY_BYTE_STRING,d=null){this.state=n,this.targetIds=s,this.resumeToken=f,this.cause=d}}class __PRIVATE_TargetState{constructor(){this.ve=0,this.Fe=__PRIVATE_snapshotChangesMap(),this.Me=ByteString.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(n){n.approximateByteSize()>0&&(this.Oe=!0,this.Me=n)}ke(){let n=__PRIVATE_documentKeySet(),s=__PRIVATE_documentKeySet(),f=__PRIVATE_documentKeySet();return this.Fe.forEach(((d,y)=>{switch(y){case 0:n=n.add(d);break;case 2:s=s.add(d);break;case 1:f=f.add(d);break;default:fail(38017,{changeType:y})}})),new TargetChange(this.Me,this.xe,n,s,f)}Ke(){this.Oe=!1,this.Fe=__PRIVATE_snapshotChangesMap()}qe(n,s){this.Oe=!0,this.Fe=this.Fe.insert(n,s)}Ue(n){this.Oe=!0,this.Fe=this.Fe.remove(n)}$e(){this.ve+=1}We(){this.ve-=1,__PRIVATE_hardAssert(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(n){this.Ge=n,this.ze=new Map,this.je=__PRIVATE_mutableDocumentMap(),this.He=__PRIVATE_documentTargetMap(),this.Je=__PRIVATE_documentTargetMap(),this.Ze=new SortedMap(__PRIVATE_primitiveComparator)}Xe(n){for(const s of n.Se)n.De&&n.De.isFoundDocument()?this.Ye(s,n.De):this.et(s,n.key,n.De);for(const s of n.removedTargetIds)this.et(s,n.key,n.De)}tt(n){this.forEachTarget(n,(s=>{const f=this.nt(s);switch(n.state){case 0:this.rt(s)&&f.Le(n.resumeToken);break;case 1:f.We(),f.Ne||f.Ke(),f.Le(n.resumeToken);break;case 2:f.We(),f.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(f.Qe(),f.Le(n.resumeToken));break;case 4:this.rt(s)&&(this.it(s),f.Le(n.resumeToken));break;default:fail(56790,{state:n.state})}}))}forEachTarget(n,s){n.targetIds.length>0?n.targetIds.forEach(s):this.ze.forEach(((f,d)=>{this.rt(d)&&s(d)}))}st(n){const s=n.targetId,f=n.Ce.count,d=this.ot(s);if(d){const y=d.target;if(__PRIVATE_targetIsDocumentTarget(y))if(f===0){const _=new DocumentKey(y.path);this.et(s,_,MutableDocument.newNoDocument(_,SnapshotVersion.min()))}else __PRIVATE_hardAssert(f===1,20013,{expectedCount:f});else{const _=this._t(s);if(_!==f){const A=this.ut(n),R=A?this.ct(A,n,_):1;if(R!==0){this.it(s);const I=R===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(s,I)}}}}}ut(n){const s=n.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:f="",padding:d=0},hashCount:y=0}=s;let _,A;try{_=__PRIVATE_normalizeByteString(f).toUint8Array()}catch(R){if(R instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+R.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw R}try{A=new BloomFilter(_,d,y)}catch(R){return __PRIVATE_logWarn(R instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",R),null}return A.ge===0?null:A}ct(n,s,f){return s.Ce.count===f-this.Pt(n,s.targetId)?0:2}Pt(n,s){const f=this.Ge.getRemoteKeysForTarget(s);let d=0;return f.forEach((y=>{const _=this.Ge.ht(),A=`projects/${_.projectId}/databases/${_.database}/documents/${y.path.canonicalString()}`;n.mightContain(A)||(this.et(s,y,null),d++)})),d}Tt(n){const s=new Map;this.ze.forEach(((y,_)=>{const A=this.ot(_);if(A){if(y.current&&__PRIVATE_targetIsDocumentTarget(A.target)){const R=new DocumentKey(A.target.path);this.It(R).has(_)||this.Et(_,R)||this.et(_,R,MutableDocument.newNoDocument(R,n))}y.Be&&(s.set(_,y.ke()),y.Ke())}}));let f=__PRIVATE_documentKeySet();this.Je.forEach(((y,_)=>{let A=!0;_.forEachWhile((R=>{const I=this.ot(R);return!I||I.purpose==="TargetPurposeLimboResolution"||(A=!1,!1)})),A&&(f=f.add(y))})),this.je.forEach(((y,_)=>_.setReadTime(n)));const d=new RemoteEvent(n,s,this.Ze,this.je,f);return this.je=__PRIVATE_mutableDocumentMap(),this.He=__PRIVATE_documentTargetMap(),this.Je=__PRIVATE_documentTargetMap(),this.Ze=new SortedMap(__PRIVATE_primitiveComparator),d}Ye(n,s){if(!this.rt(n))return;const f=this.Et(n,s.key)?2:0;this.nt(n).qe(s.key,f),this.je=this.je.insert(s.key,s),this.He=this.He.insert(s.key,this.It(s.key).add(n)),this.Je=this.Je.insert(s.key,this.Rt(s.key).add(n))}et(n,s,f){if(!this.rt(n))return;const d=this.nt(n);this.Et(n,s)?d.qe(s,1):d.Ue(s),this.Je=this.Je.insert(s,this.Rt(s).delete(n)),this.Je=this.Je.insert(s,this.Rt(s).add(n)),f&&(this.je=this.je.insert(s,f))}removeTarget(n){this.ze.delete(n)}_t(n){const s=this.nt(n).ke();return this.Ge.getRemoteKeysForTarget(n).size+s.addedDocuments.size-s.removedDocuments.size}$e(n){this.nt(n).$e()}nt(n){let s=this.ze.get(n);return s||(s=new __PRIVATE_TargetState,this.ze.set(n,s)),s}Rt(n){let s=this.Je.get(n);return s||(s=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(n,s)),s}It(n){let s=this.He.get(n);return s||(s=new SortedSet(__PRIVATE_primitiveComparator),this.He=this.He.insert(n,s)),s}rt(n){const s=this.ot(n)!==null;return s||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",n),s}ot(n){const s=this.ze.get(n);return s&&s.Ne?null:this.Ge.At(n)}it(n){this.ze.set(n,new __PRIVATE_TargetState),this.Ge.getRemoteKeysForTarget(n).forEach((s=>{this.et(n,s,null)}))}Et(n,s){return this.Ge.getRemoteKeysForTarget(n).has(s)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const ft={asc:"ASCENDING",desc:"DESCENDING"},gt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pt={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(n,s){this.databaseId=n,this.useProto3Json=s}}function __PRIVATE_toInt32Proto(u,n){return u.useProto3Json||__PRIVATE_isNullOrUndefined(n)?n:{value:n}}function toTimestamp(u,n){return u.useProto3Json?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function __PRIVATE_toBytes(u,n){return u.useProto3Json?n.toBase64():n.toUint8Array()}function __PRIVATE_toVersion(u,n){return toTimestamp(u,n.toTimestamp())}function __PRIVATE_fromVersion(u){return __PRIVATE_hardAssert(!!u,49232),SnapshotVersion.fromTimestamp((function(s){const f=__PRIVATE_normalizeTimestamp(s);return new Timestamp(f.seconds,f.nanos)})(u))}function __PRIVATE_toResourceName(u,n){return __PRIVATE_toResourcePath(u,n).canonicalString()}function __PRIVATE_toResourcePath(u,n){const s=(function(d){return new ResourcePath(["projects",d.projectId,"databases",d.database])})(u).child("documents");return n===void 0?s:s.child(n)}function __PRIVATE_fromResourceName(u){const n=ResourcePath.fromString(u);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(n),10190,{key:n.toString()}),n}function __PRIVATE_toName(u,n){return __PRIVATE_toResourceName(u.databaseId,n.path)}function fromName(u,n){const s=__PRIVATE_fromResourceName(n);if(s.get(1)!==u.databaseId.projectId)throw new FirestoreError(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+u.databaseId.projectId);if(s.get(3)!==u.databaseId.database)throw new FirestoreError(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+u.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(s))}function __PRIVATE_toQueryPath(u,n){return __PRIVATE_toResourceName(u.databaseId,n)}function __PRIVATE_fromQueryPath(u){const n=__PRIVATE_fromResourceName(u);return n.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(n)}function __PRIVATE_getEncodedDatabaseId(u){return new ResourcePath(["projects",u.databaseId.projectId,"databases",u.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(u){return __PRIVATE_hardAssert(u.length>4&&u.get(4)==="documents",29091,{key:u.toString()}),u.popFirst(5)}function __PRIVATE_toMutationDocument(u,n,s){return{name:__PRIVATE_toName(u,n),fields:s.value.mapValue.fields}}function __PRIVATE_fromWatchChange(u,n){let s;if("targetChange"in n){n.targetChange;const f=(function(I){return I==="NO_CHANGE"?0:I==="ADD"?1:I==="REMOVE"?2:I==="CURRENT"?3:I==="RESET"?4:fail(39313,{state:I})})(n.targetChange.targetChangeType||"NO_CHANGE"),d=n.targetChange.targetIds||[],y=(function(I,G){return I.useProto3Json?(__PRIVATE_hardAssert(G===void 0||typeof G=="string",58123),ByteString.fromBase64String(G||"")):(__PRIVATE_hardAssert(G===void 0||G instanceof Buffer||G instanceof Uint8Array,16193),ByteString.fromUint8Array(G||new Uint8Array))})(u,n.targetChange.resumeToken),_=n.targetChange.cause,A=_&&(function(I){const G=I.code===void 0?C.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(I.code);return new FirestoreError(G,I.message||"")})(_);s=new __PRIVATE_WatchTargetChange(f,d,y,A||null)}else if("documentChange"in n){n.documentChange;const f=n.documentChange;f.document,f.document.name,f.document.updateTime;const d=fromName(u,f.document.name),y=__PRIVATE_fromVersion(f.document.updateTime),_=f.document.createTime?__PRIVATE_fromVersion(f.document.createTime):SnapshotVersion.min(),A=new ObjectValue({mapValue:{fields:f.document.fields}}),R=MutableDocument.newFoundDocument(d,y,_,A),I=f.targetIds||[],G=f.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange(I,G,R.key,R)}else if("documentDelete"in n){n.documentDelete;const f=n.documentDelete;f.document;const d=fromName(u,f.document),y=f.readTime?__PRIVATE_fromVersion(f.readTime):SnapshotVersion.min(),_=MutableDocument.newNoDocument(d,y),A=f.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange([],A,_.key,_)}else if("documentRemove"in n){n.documentRemove;const f=n.documentRemove;f.document;const d=fromName(u,f.document),y=f.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange([],y,d,null)}else{if(!("filter"in n))return fail(11601,{Vt:n});{n.filter;const f=n.filter;f.targetId;const{count:d=0,unchangedNames:y}=f,_=new ExistenceFilter(d,y),A=f.targetId;s=new __PRIVATE_ExistenceFilterChange(A,_)}}return s}function toMutation(u,n){let s;if(n instanceof __PRIVATE_SetMutation)s={update:__PRIVATE_toMutationDocument(u,n.key,n.value)};else if(n instanceof __PRIVATE_DeleteMutation)s={delete:__PRIVATE_toName(u,n.key)};else if(n instanceof __PRIVATE_PatchMutation)s={update:__PRIVATE_toMutationDocument(u,n.key,n.data),updateMask:__PRIVATE_toDocumentMask(n.fieldMask)};else{if(!(n instanceof __PRIVATE_VerifyMutation))return fail(16599,{dt:n.type});s={verify:__PRIVATE_toName(u,n.key)}}return n.fieldTransforms.length>0&&(s.updateTransforms=n.fieldTransforms.map((f=>(function(y,_){const A=_.transform;if(A instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(A instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:A.elements}};if(A instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:A.elements}};if(A instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:_.field.canonicalString(),increment:A.Ae};throw fail(20930,{transform:_.transform})})(0,f)))),n.precondition.isNone||(s.currentDocument=(function(d,y){return y.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(d,y.updateTime)}:y.exists!==void 0?{exists:y.exists}:fail(27497)})(u,n.precondition)),s}function __PRIVATE_fromWriteResults(u,n){return u&&u.length>0?(__PRIVATE_hardAssert(n!==void 0,14353),u.map((s=>(function(d,y){let _=d.updateTime?__PRIVATE_fromVersion(d.updateTime):__PRIVATE_fromVersion(y);return _.isEqual(SnapshotVersion.min())&&(_=__PRIVATE_fromVersion(y)),new MutationResult(_,d.transformResults||[])})(s,n)))):[]}function __PRIVATE_toDocumentsTarget(u,n){return{documents:[__PRIVATE_toQueryPath(u,n.path)]}}function __PRIVATE_toQueryTarget(u,n){const s={structuredQuery:{}},f=n.path;let d;n.collectionGroup!==null?(d=f,s.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(d=f.popLast(),s.structuredQuery.from=[{collectionId:f.lastSegment()}]),s.parent=__PRIVATE_toQueryPath(u,d);const y=(function(I){if(I.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(I,"and"))})(n.filters);y&&(s.structuredQuery.where=y);const _=(function(I){if(I.length!==0)return I.map((G=>(function(q){return{field:__PRIVATE_toFieldPathReference(q.field),direction:__PRIVATE_toDirection(q.dir)}})(G)))})(n.orderBy);_&&(s.structuredQuery.orderBy=_);const A=__PRIVATE_toInt32Proto(u,n.limit);return A!==null&&(s.structuredQuery.limit=A),n.startAt&&(s.structuredQuery.startAt=(function(I){return{before:I.inclusive,values:I.position}})(n.startAt)),n.endAt&&(s.structuredQuery.endAt=(function(I){return{before:!I.inclusive,values:I.position}})(n.endAt)),{ft:s,parent:d}}function __PRIVATE_convertQueryTargetToQuery(u){let n=__PRIVATE_fromQueryPath(u.parent);const s=u.structuredQuery,f=s.from?s.from.length:0;let d=null;if(f>0){__PRIVATE_hardAssert(f===1,65062);const G=s.from[0];G.allDescendants?d=G.collectionId:n=n.child(G.collectionId)}let y=[];s.where&&(y=(function(Y){const q=__PRIVATE_fromFilter(Y);return q instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(q)?q.getFilters():[q]})(s.where));let _=[];s.orderBy&&(_=(function(Y){return Y.map((q=>(function(Q){return new OrderBy(__PRIVATE_fromFieldPathReference(Q.field),(function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(q)))})(s.orderBy));let A=null;s.limit&&(A=(function(Y){let q;return q=typeof Y=="object"?Y.value:Y,__PRIVATE_isNullOrUndefined(q)?null:q})(s.limit));let R=null;s.startAt&&(R=(function(Y){const q=!!Y.before,K=Y.values||[];return new Bound(K,q)})(s.startAt));let I=null;return s.endAt&&(I=(function(Y){const q=!Y.before,K=Y.values||[];return new Bound(K,q)})(s.endAt)),__PRIVATE_newQuery(n,d,_,y,A,"F",R,I)}function __PRIVATE_toListenRequestLabels(u,n){const s=(function(d){switch(d){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:d})}})(n.purpose);return s==null?null:{"goog-listen-tags":s}}function __PRIVATE_fromFilter(u){return u.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const f=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(f,"==",{doubleValue:NaN});case"IS_NULL":const d=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(d,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const y=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(y,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const _=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(_,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}})(u):u.fieldFilter!==void 0?(function(s){return FieldFilter.create(__PRIVATE_fromFieldPathReference(s.fieldFilter.field),(function(d){switch(d){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(u):u.compositeFilter!==void 0?(function(s){return CompositeFilter.create(s.compositeFilter.filters.map((f=>__PRIVATE_fromFilter(f))),(function(d){switch(d){case"AND":return"and";case"OR":return"or";default:return fail(1026)}})(s.compositeFilter.op))})(u):fail(30097,{filter:u})}function __PRIVATE_toDirection(u){return ft[u]}function __PRIVATE_toOperatorName(u){return gt[u]}function __PRIVATE_toCompositeOperatorName(u){return pt[u]}function __PRIVATE_toFieldPathReference(u){return{fieldPath:u.canonicalString()}}function __PRIVATE_fromFieldPathReference(u){return FieldPath$1.fromServerFormat(u.fieldPath)}function __PRIVATE_toFilter(u){return u instanceof FieldFilter?(function(s){if(s.op==="=="){if(__PRIVATE_isNanValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(__PRIVATE_isNanValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:__PRIVATE_toOperatorName(s.op),value:s.value}}})(u):u instanceof CompositeFilter?(function(s){const f=s.getFilters().map((d=>__PRIVATE_toFilter(d)));return f.length===1?f[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(s.op),filters:f}}})(u):fail(54877,{filter:u})}function __PRIVATE_toDocumentMask(u){const n=[];return u.fields.forEach((s=>n.push(s.canonicalString()))),{fieldPaths:n}}function __PRIVATE_isValidResourceName(u){return u.length>=4&&u.get(0)==="projects"&&u.get(2)==="databases"}function __PRIVATE_isProtoValueSerializable(u){return!!u&&typeof u._toProto=="function"&&u._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(n,s,f,d,y=SnapshotVersion.min(),_=SnapshotVersion.min(),A=ByteString.EMPTY_BYTE_STRING,R=null){this.target=n,this.targetId=s,this.purpose=f,this.sequenceNumber=d,this.snapshotVersion=y,this.lastLimboFreeSnapshotVersion=_,this.resumeToken=A,this.expectedCount=R}withSequenceNumber(n){return new TargetData(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(n,s){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,n,null)}withExpectedCount(n){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,n)}withLastLimboFreeSnapshotVersion(n){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(n){this.yt=n}}function __PRIVATE_fromBundledQuery(u){const n=__PRIVATE_convertQueryTargetToQuery({parent:u.parent,structuredQuery:u.structuredQuery});return u.limitType==="LAST"?__PRIVATE_queryWithLimit(n,n.limit,"L"):n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Sn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(n,s){return this.Sn.add(s),PersistencePromise.resolve()}getCollectionParents(n,s){return PersistencePromise.resolve(this.Sn.getEntries(s))}addFieldIndex(n,s){return PersistencePromise.resolve()}deleteFieldIndex(n,s){return PersistencePromise.resolve()}deleteAllFieldIndexes(n){return PersistencePromise.resolve()}createTargetIndexes(n,s){return PersistencePromise.resolve()}getDocumentsMatchingTarget(n,s){return PersistencePromise.resolve(null)}getIndexType(n,s){return PersistencePromise.resolve(0)}getFieldIndexes(n,s){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(n){return PersistencePromise.resolve(null)}getMinOffset(n,s){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(n,s){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(n,s,f){return PersistencePromise.resolve()}updateIndexEntries(n,s){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(n){const s=n.lastSegment(),f=n.popLast(),d=this.index[s]||new SortedSet(ResourcePath.comparator),y=!d.has(f);return this.index[s]=d.add(f),y}has(n){const s=n.lastSegment(),f=n.popLast(),d=this.index[s];return d&&d.has(f)}getEntries(n){return(this.index[n]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dt=41943040;class LruParams{static withCacheSize(n){return new LruParams(n,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(n,s,f){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=f}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Dt,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(n){this.sr=n}next(){return this.sr+=2,this.sr}static _r(){return new __PRIVATE_TargetIdGenerator(0)}static ar(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="LruGarbageCollector",vt=1048576;function __PRIVATE_bufferEntryComparator([u,n],[s,f]){const d=__PRIVATE_primitiveComparator(u,s);return d===0?__PRIVATE_primitiveComparator(n,f):d}class __PRIVATE_RollingSequenceNumberBuffer{constructor(n){this.Pr=n,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.Tr=0}Ir(){return++this.Tr}Er(n){const s=[n,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(s);else{const f=this.buffer.last();__PRIVATE_bufferEntryComparator(s,f)<0&&(this.buffer=this.buffer.delete(f).add(s))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(n,s,f){this.garbageCollector=n,this.asyncQueue=s,this.localStore=f,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(n){__PRIVATE_logDebug(Ct,`Garbage collection scheduled in ${n}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){__PRIVATE_isIndexedDbTransactionError(s)?__PRIVATE_logDebug(Ct,"Ignoring IndexedDB error during garbage collection: ",s):await __PRIVATE_ignoreIfPrimaryLeaseLoss(s)}await this.Ar(3e5)}))}}class __PRIVATE_LruGarbageCollectorImpl{constructor(n,s){this.Vr=n,this.params=s}calculateTargetCount(n,s){return this.Vr.dr(n).next((f=>Math.floor(s/100*f)))}nthSequenceNumber(n,s){if(s===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.ce);const f=new __PRIVATE_RollingSequenceNumberBuffer(s);return this.Vr.forEachTarget(n,(d=>f.Er(d.sequenceNumber))).next((()=>this.Vr.mr(n,(d=>f.Er(d))))).next((()=>f.maxValue))}removeTargets(n,s,f){return this.Vr.removeTargets(n,s,f)}removeOrphanedDocuments(n,s){return this.Vr.removeOrphanedDocuments(n,s)}collect(n,s){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(St)):this.getCacheSize(n).next((f=>f<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${f} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),St):this.gr(n,s)))}getCacheSize(n){return this.Vr.getCacheSize(n)}gr(n,s){let f,d,y,_,A,R,I;const G=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next((Y=>(Y>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Y}`),d=this.params.maximumSequenceNumbersToCollect):d=Y,_=Date.now(),this.nthSequenceNumber(n,d)))).next((Y=>(f=Y,A=Date.now(),this.removeTargets(n,f,s)))).next((Y=>(y=Y,R=Date.now(),this.removeOrphanedDocuments(n,f)))).next((Y=>(I=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${_-G}ms
	Determined least recently used ${d} in `+(A-_)+`ms
	Removed ${y} targets in `+(R-A)+`ms
	Removed ${Y} documents in `+(I-R)+`ms
Total Duration: ${I-G}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:y,documentsRemoved:Y}))))}}function __PRIVATE_newLruGarbageCollector(u,n){return new __PRIVATE_LruGarbageCollectorImpl(u,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap((n=>n.toString()),((n,s)=>n.isEqual(s))),this.changesApplied=!1}addEntry(n){this.assertNotApplied(),this.changes.set(n.key,n)}removeEntry(n,s){this.assertNotApplied(),this.changes.set(n,MutableDocument.newInvalidDocument(n).setReadTime(s))}getEntry(n,s){this.assertNotApplied();const f=this.changes.get(s);return f!==void 0?PersistencePromise.resolve(f):this.getFromCache(n,s)}getEntries(n,s){return this.getAllFromCache(n,s)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(n,s){this.overlayedDocument=n,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(n,s,f,d){this.remoteDocumentCache=n,this.mutationQueue=s,this.documentOverlayCache=f,this.indexManager=d}getDocument(n,s){let f=null;return this.documentOverlayCache.getOverlay(n,s).next((d=>(f=d,this.remoteDocumentCache.getEntry(n,s)))).next((d=>(f!==null&&__PRIVATE_mutationApplyToLocalView(f.mutation,d,FieldMask.empty(),Timestamp.now()),d)))}getDocuments(n,s){return this.remoteDocumentCache.getEntries(n,s).next((f=>this.getLocalViewOfDocuments(n,f,__PRIVATE_documentKeySet()).next((()=>f))))}getLocalViewOfDocuments(n,s,f=__PRIVATE_documentKeySet()){const d=__PRIVATE_newOverlayMap();return this.populateOverlays(n,d,s).next((()=>this.computeViews(n,s,d,f).next((y=>{let _=documentMap();return y.forEach(((A,R)=>{_=_.insert(A,R.overlayedDocument)})),_}))))}getOverlayedDocuments(n,s){const f=__PRIVATE_newOverlayMap();return this.populateOverlays(n,f,s).next((()=>this.computeViews(n,s,f,__PRIVATE_documentKeySet())))}populateOverlays(n,s,f){const d=[];return f.forEach((y=>{s.has(y)||d.push(y)})),this.documentOverlayCache.getOverlays(n,d).next((y=>{y.forEach(((_,A)=>{s.set(_,A)}))}))}computeViews(n,s,f,d){let y=__PRIVATE_mutableDocumentMap();const _=__PRIVATE_newDocumentKeyMap(),A=(function(){return __PRIVATE_newDocumentKeyMap()})();return s.forEach(((R,I)=>{const G=f.get(I.key);d.has(I.key)&&(G===void 0||G.mutation instanceof __PRIVATE_PatchMutation)?y=y.insert(I.key,I):G!==void 0?(_.set(I.key,G.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(G.mutation,I,G.mutation.getFieldMask(),Timestamp.now())):_.set(I.key,FieldMask.empty())})),this.recalculateAndSaveOverlays(n,y).next((R=>(R.forEach(((I,G)=>_.set(I,G))),s.forEach(((I,G)=>A.set(I,new OverlayedDocument(G,_.get(I)??null)))),A)))}recalculateAndSaveOverlays(n,s){const f=__PRIVATE_newDocumentKeyMap();let d=new SortedMap(((_,A)=>_-A)),y=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(n,s).next((_=>{for(const A of _)A.keys().forEach((R=>{const I=s.get(R);if(I===null)return;let G=f.get(R)||FieldMask.empty();G=A.applyToLocalView(I,G),f.set(R,G);const Y=(d.get(A.batchId)||__PRIVATE_documentKeySet()).add(R);d=d.insert(A.batchId,Y)}))})).next((()=>{const _=[],A=d.getReverseIterator();for(;A.hasNext();){const R=A.getNext(),I=R.key,G=R.value,Y=__PRIVATE_newMutationMap();G.forEach((q=>{if(!y.has(q)){const K=__PRIVATE_calculateOverlayMutation(s.get(q),f.get(q));K!==null&&Y.set(q,K),y=y.add(q)}})),_.push(this.documentOverlayCache.saveOverlays(n,I,Y))}return PersistencePromise.waitFor(_)})).next((()=>f))}recalculateAndSaveOverlaysForDocumentKeys(n,s){return this.remoteDocumentCache.getEntries(n,s).next((f=>this.recalculateAndSaveOverlays(n,f)))}getDocumentsMatchingQuery(n,s,f,d){return __PRIVATE_isDocumentQuery$1(s)?this.getDocumentsMatchingDocumentQuery(n,s.path):__PRIVATE_isCollectionGroupQuery(s)?this.getDocumentsMatchingCollectionGroupQuery(n,s,f,d):this.getDocumentsMatchingCollectionQuery(n,s,f,d)}getNextDocuments(n,s,f,d){return this.remoteDocumentCache.getAllFromCollectionGroup(n,s,f,d).next((y=>{const _=d-y.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(n,s,f.largestBatchId,d-y.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let A=B,R=y;return _.next((I=>PersistencePromise.forEach(I,((G,Y)=>(A<Y.largestBatchId&&(A=Y.largestBatchId),y.get(G)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(n,G).next((q=>{R=R.insert(G,q)}))))).next((()=>this.populateOverlays(n,I,y))).next((()=>this.computeViews(n,R,I,__PRIVATE_documentKeySet()))).next((G=>({batchId:A,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(G)})))))}))}getDocumentsMatchingDocumentQuery(n,s){return this.getDocument(n,new DocumentKey(s)).next((f=>{let d=documentMap();return f.isFoundDocument()&&(d=d.insert(f.key,f)),d}))}getDocumentsMatchingCollectionGroupQuery(n,s,f,d){const y=s.collectionGroup;let _=documentMap();return this.indexManager.getCollectionParents(n,y).next((A=>PersistencePromise.forEach(A,(R=>{const I=(function(Y,q){return new __PRIVATE_QueryImpl(q,null,Y.explicitOrderBy.slice(),Y.filters.slice(),Y.limit,Y.limitType,Y.startAt,Y.endAt)})(s,R.child(y));return this.getDocumentsMatchingCollectionQuery(n,I,f,d).next((G=>{G.forEach(((Y,q)=>{_=_.insert(Y,q)}))}))})).next((()=>_))))}getDocumentsMatchingCollectionQuery(n,s,f,d){let y;return this.documentOverlayCache.getOverlaysForCollection(n,s.path,f.largestBatchId).next((_=>(y=_,this.remoteDocumentCache.getDocumentsMatchingQuery(n,s,f,y,d)))).next((_=>{y.forEach(((R,I)=>{const G=I.getKey();_.get(G)===null&&(_=_.insert(G,MutableDocument.newInvalidDocument(G)))}));let A=documentMap();return _.forEach(((R,I)=>{const G=y.get(R);G!==void 0&&__PRIVATE_mutationApplyToLocalView(G.mutation,I,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(s,I)&&(A=A.insert(R,I))})),A}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(n){this.serializer=n,this.Nr=new Map,this.Br=new Map}getBundleMetadata(n,s){return PersistencePromise.resolve(this.Nr.get(s))}saveBundleMetadata(n,s){return this.Nr.set(s.id,(function(d){return{id:d.id,version:d.version,createTime:__PRIVATE_fromVersion(d.createTime)}})(s)),PersistencePromise.resolve()}getNamedQuery(n,s){return PersistencePromise.resolve(this.Br.get(s))}saveNamedQuery(n,s){return this.Br.set(s.name,(function(d){return{name:d.name,query:__PRIVATE_fromBundledQuery(d.bundledQuery),readTime:__PRIVATE_fromVersion(d.readTime)}})(s)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.Lr=new Map}getOverlay(n,s){return PersistencePromise.resolve(this.overlays.get(s))}getOverlays(n,s){const f=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(s,(d=>this.getOverlay(n,d).next((y=>{y!==null&&f.set(d,y)})))).next((()=>f))}saveOverlays(n,s,f){return f.forEach(((d,y)=>{this.bt(n,s,y)})),PersistencePromise.resolve()}removeOverlaysForBatchId(n,s,f){const d=this.Lr.get(f);return d!==void 0&&(d.forEach((y=>this.overlays=this.overlays.remove(y))),this.Lr.delete(f)),PersistencePromise.resolve()}getOverlaysForCollection(n,s,f){const d=__PRIVATE_newOverlayMap(),y=s.length+1,_=new DocumentKey(s.child("")),A=this.overlays.getIteratorFrom(_);for(;A.hasNext();){const R=A.getNext().value,I=R.getKey();if(!s.isPrefixOf(I.path))break;I.path.length===y&&R.largestBatchId>f&&d.set(R.getKey(),R)}return PersistencePromise.resolve(d)}getOverlaysForCollectionGroup(n,s,f,d){let y=new SortedMap(((I,G)=>I-G));const _=this.overlays.getIterator();for(;_.hasNext();){const I=_.getNext().value;if(I.getKey().getCollectionGroup()===s&&I.largestBatchId>f){let G=y.get(I.largestBatchId);G===null&&(G=__PRIVATE_newOverlayMap(),y=y.insert(I.largestBatchId,G)),G.set(I.getKey(),I)}}const A=__PRIVATE_newOverlayMap(),R=y.getIterator();for(;R.hasNext()&&(R.getNext().value.forEach(((I,G)=>A.set(I,G))),!(A.size()>=d)););return PersistencePromise.resolve(A)}bt(n,s,f){const d=this.overlays.get(f.key);if(d!==null){const _=this.Lr.get(d.largestBatchId).delete(f.key);this.Lr.set(d.largestBatchId,_)}this.overlays=this.overlays.insert(f.key,new Overlay(s,f));let y=this.Lr.get(s);y===void 0&&(y=__PRIVATE_documentKeySet(),this.Lr.set(s,y)),this.Lr.set(s,y.add(f.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(n){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(n,s){return this.sessionToken=s,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.kr=new SortedSet(__PRIVATE_DocReference.Kr),this.qr=new SortedSet(__PRIVATE_DocReference.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(n,s){const f=new __PRIVATE_DocReference(n,s);this.kr=this.kr.add(f),this.qr=this.qr.add(f)}$r(n,s){n.forEach((f=>this.addReference(f,s)))}removeReference(n,s){this.Wr(new __PRIVATE_DocReference(n,s))}Qr(n,s){n.forEach((f=>this.removeReference(f,s)))}Gr(n){const s=new DocumentKey(new ResourcePath([])),f=new __PRIVATE_DocReference(s,n),d=new __PRIVATE_DocReference(s,n+1),y=[];return this.qr.forEachInRange([f,d],(_=>{this.Wr(_),y.push(_.key)})),y}zr(){this.kr.forEach((n=>this.Wr(n)))}Wr(n){this.kr=this.kr.delete(n),this.qr=this.qr.delete(n)}jr(n){const s=new DocumentKey(new ResourcePath([])),f=new __PRIVATE_DocReference(s,n),d=new __PRIVATE_DocReference(s,n+1);let y=__PRIVATE_documentKeySet();return this.qr.forEachInRange([f,d],(_=>{y=y.add(_.key)})),y}containsKey(n){const s=new __PRIVATE_DocReference(n,0),f=this.kr.firstAfterOrEqual(s);return f!==null&&n.isEqual(f.key)}}class __PRIVATE_DocReference{constructor(n,s){this.key=n,this.Hr=s}static Kr(n,s){return DocumentKey.comparator(n.key,s.key)||__PRIVATE_primitiveComparator(n.Hr,s.Hr)}static Ur(n,s){return __PRIVATE_primitiveComparator(n.Hr,s.Hr)||DocumentKey.comparator(n.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(n,s){this.indexManager=n,this.referenceDelegate=s,this.mutationQueue=[],this.Yn=1,this.Jr=new SortedSet(__PRIVATE_DocReference.Kr)}checkEmpty(n){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(n,s,f,d){const y=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const _=new MutationBatch(y,s,f,d);this.mutationQueue.push(_);for(const A of d)this.Jr=this.Jr.add(new __PRIVATE_DocReference(A.key,y)),this.indexManager.addToCollectionParentIndex(n,A.key.path.popLast());return PersistencePromise.resolve(_)}lookupMutationBatch(n,s){return PersistencePromise.resolve(this.Zr(s))}getNextMutationBatchAfterBatchId(n,s){const f=s+1,d=this.Xr(f),y=d<0?0:d;return PersistencePromise.resolve(this.mutationQueue.length>y?this.mutationQueue[y]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?U:this.Yn-1)}getAllMutationBatches(n){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(n,s){const f=new __PRIVATE_DocReference(s,0),d=new __PRIVATE_DocReference(s,Number.POSITIVE_INFINITY),y=[];return this.Jr.forEachInRange([f,d],(_=>{const A=this.Zr(_.Hr);y.push(A)})),PersistencePromise.resolve(y)}getAllMutationBatchesAffectingDocumentKeys(n,s){let f=new SortedSet(__PRIVATE_primitiveComparator);return s.forEach((d=>{const y=new __PRIVATE_DocReference(d,0),_=new __PRIVATE_DocReference(d,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([y,_],(A=>{f=f.add(A.Hr)}))})),PersistencePromise.resolve(this.Yr(f))}getAllMutationBatchesAffectingQuery(n,s){const f=s.path,d=f.length+1;let y=f;DocumentKey.isDocumentKey(y)||(y=y.child(""));const _=new __PRIVATE_DocReference(new DocumentKey(y),0);let A=new SortedSet(__PRIVATE_primitiveComparator);return this.Jr.forEachWhile((R=>{const I=R.key.path;return!!f.isPrefixOf(I)&&(I.length===d&&(A=A.add(R.Hr)),!0)}),_),PersistencePromise.resolve(this.Yr(A))}Yr(n){const s=[];return n.forEach((f=>{const d=this.Zr(f);d!==null&&s.push(d)})),s}removeMutationBatch(n,s){__PRIVATE_hardAssert(this.ei(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let f=this.Jr;return PersistencePromise.forEach(s.mutations,(d=>{const y=new __PRIVATE_DocReference(d.key,s.batchId);return f=f.delete(y),this.referenceDelegate.markPotentiallyOrphaned(n,d.key)})).next((()=>{this.Jr=f}))}nr(n){}containsKey(n,s){const f=new __PRIVATE_DocReference(s,0),d=this.Jr.firstAfterOrEqual(f);return PersistencePromise.resolve(s.isEqual(d&&d.key))}performConsistencyCheck(n){return this.mutationQueue.length,PersistencePromise.resolve()}ei(n,s){return this.Xr(n)}Xr(n){return this.mutationQueue.length===0?0:n-this.mutationQueue[0].batchId}Zr(n){const s=this.Xr(n);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(n){this.ti=n,this.docs=(function(){return new SortedMap(DocumentKey.comparator)})(),this.size=0}setIndexManager(n){this.indexManager=n}addEntry(n,s){const f=s.key,d=this.docs.get(f),y=d?d.size:0,_=this.ti(s);return this.docs=this.docs.insert(f,{document:s.mutableCopy(),size:_}),this.size+=_-y,this.indexManager.addToCollectionParentIndex(n,f.path.popLast())}removeEntry(n){const s=this.docs.get(n);s&&(this.docs=this.docs.remove(n),this.size-=s.size)}getEntry(n,s){const f=this.docs.get(s);return PersistencePromise.resolve(f?f.document.mutableCopy():MutableDocument.newInvalidDocument(s))}getEntries(n,s){let f=__PRIVATE_mutableDocumentMap();return s.forEach((d=>{const y=this.docs.get(d);f=f.insert(d,y?y.document.mutableCopy():MutableDocument.newInvalidDocument(d))})),PersistencePromise.resolve(f)}getDocumentsMatchingQuery(n,s,f,d){let y=__PRIVATE_mutableDocumentMap();const _=s.path,A=new DocumentKey(_.child("__id-9223372036854775808__")),R=this.docs.getIteratorFrom(A);for(;R.hasNext();){const{key:I,value:{document:G}}=R.getNext();if(!_.isPrefixOf(I.path))break;I.path.length>_.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(G),f)<=0||(d.has(G.key)||__PRIVATE_queryMatches(s,G))&&(y=y.insert(G.key,G.mutableCopy()))}return PersistencePromise.resolve(y)}getAllFromCollectionGroup(n,s,f,d){fail(9500)}ni(n,s){return PersistencePromise.forEach(this.docs,(f=>s(f)))}newChangeBuffer(n){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(n){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(n){super(),this.Mr=n}applyChanges(n){const s=[];return this.changes.forEach(((f,d)=>{d.isValidDocument()?s.push(this.Mr.addEntry(n,d)):this.Mr.removeEntry(f)})),PersistencePromise.waitFor(s)}getFromCache(n,s){return this.Mr.getEntry(n,s)}getAllFromCache(n,s){return this.Mr.getEntries(n,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(n){this.persistence=n,this.ri=new ObjectMap((s=>__PRIVATE_canonifyTarget(s)),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.ii=0,this.si=new __PRIVATE_ReferenceSet,this.targetCount=0,this.oi=__PRIVATE_TargetIdGenerator._r()}forEachTarget(n,s){return this.ri.forEach(((f,d)=>s(d))),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(n){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return PersistencePromise.resolve(this.ii)}allocateTargetId(n){return this.highestTargetId=this.oi.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(n,s,f){return f&&(this.lastRemoteSnapshotVersion=f),s>this.ii&&(this.ii=s),PersistencePromise.resolve()}lr(n){this.ri.set(n.target,n);const s=n.targetId;s>this.highestTargetId&&(this.oi=new __PRIVATE_TargetIdGenerator(s),this.highestTargetId=s),n.sequenceNumber>this.ii&&(this.ii=n.sequenceNumber)}addTargetData(n,s){return this.lr(s),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(n,s){return this.lr(s),PersistencePromise.resolve()}removeTargetData(n,s){return this.ri.delete(s.target),this.si.Gr(s.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(n,s,f){let d=0;const y=[];return this.ri.forEach(((_,A)=>{A.sequenceNumber<=s&&f.get(A.targetId)===null&&(this.ri.delete(_),y.push(this.removeMatchingKeysForTargetId(n,A.targetId)),d++)})),PersistencePromise.waitFor(y).next((()=>d))}getTargetCount(n){return PersistencePromise.resolve(this.targetCount)}getTargetData(n,s){const f=this.ri.get(s)||null;return PersistencePromise.resolve(f)}addMatchingKeys(n,s,f){return this.si.$r(s,f),PersistencePromise.resolve()}removeMatchingKeys(n,s,f){this.si.Qr(s,f);const d=this.persistence.referenceDelegate,y=[];return d&&s.forEach((_=>{y.push(d.markPotentiallyOrphaned(n,_))})),PersistencePromise.waitFor(y)}removeMatchingKeysForTargetId(n,s){return this.si.Gr(s),PersistencePromise.resolve()}getMatchingKeysForTargetId(n,s){const f=this.si.jr(s);return PersistencePromise.resolve(f)}containsKey(n,s){return PersistencePromise.resolve(this.si.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(n,s){this._i={},this.overlays={},this.ai=new __PRIVATE_ListenSequence(0),this.ui=!1,this.ui=!0,this.ci=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=n(this),this.li=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=(function(d){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(d)})((f=>this.referenceDelegate.hi(f))),this.serializer=new __PRIVATE_LocalSerializer(s),this.Pi=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(n){return this.indexManager}getDocumentOverlayCache(n){let s=this.overlays[n.toKey()];return s||(s=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[n.toKey()]=s),s}getMutationQueue(n,s){let f=this._i[n.toKey()];return f||(f=new __PRIVATE_MemoryMutationQueue(s,this.referenceDelegate),this._i[n.toKey()]=f),f}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(n,s,f){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",n);const d=new __PRIVATE_MemoryTransaction(this.ai.next());return this.referenceDelegate.Ti(),f(d).next((y=>this.referenceDelegate.Ii(d).next((()=>y)))).toPromise().then((y=>(d.raiseOnCommittedEvent(),y)))}Ei(n,s){return PersistencePromise.or(Object.values(this._i).map((f=>()=>f.containsKey(n,s))))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(n){super(),this.currentSequenceNumber=n}}class __PRIVATE_MemoryEagerDelegate{constructor(n){this.persistence=n,this.Ri=new __PRIVATE_ReferenceSet,this.Ai=null}static Vi(n){return new __PRIVATE_MemoryEagerDelegate(n)}get di(){if(this.Ai)return this.Ai;throw fail(60996)}addReference(n,s,f){return this.Ri.addReference(f,s),this.di.delete(f.toString()),PersistencePromise.resolve()}removeReference(n,s,f){return this.Ri.removeReference(f,s),this.di.add(f.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(n,s){return this.di.add(s.toString()),PersistencePromise.resolve()}removeTarget(n,s){this.Ri.Gr(s.targetId).forEach((d=>this.di.add(d.toString())));const f=this.persistence.getTargetCache();return f.getMatchingKeysForTargetId(n,s.targetId).next((d=>{d.forEach((y=>this.di.add(y.toString())))})).next((()=>f.removeTargetData(n,s)))}Ti(){this.Ai=new Set}Ii(n){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.di,(f=>{const d=DocumentKey.fromPath(f);return this.mi(n,d).next((y=>{y||s.removeEntry(d,SnapshotVersion.min())}))})).next((()=>(this.Ai=null,s.apply(n))))}updateLimboDocument(n,s){return this.mi(n,s).next((f=>{f?this.di.delete(s.toString()):this.di.add(s.toString())}))}hi(n){return 0}mi(n,s){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(n,s),()=>this.persistence.Ei(n,s)])}}class __PRIVATE_MemoryLruDelegate{constructor(n,s){this.persistence=n,this.fi=new ObjectMap((f=>__PRIVATE_encodeResourcePath(f.path)),((f,d)=>f.isEqual(d))),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,s)}static Vi(n,s){return new __PRIVATE_MemoryLruDelegate(n,s)}Ti(){}Ii(n){return PersistencePromise.resolve()}forEachTarget(n,s){return this.persistence.getTargetCache().forEachTarget(n,s)}dr(n){const s=this.pr(n);return this.persistence.getTargetCache().getTargetCount(n).next((f=>s.next((d=>f+d))))}pr(n){let s=0;return this.mr(n,(f=>{s++})).next((()=>s))}mr(n,s){return PersistencePromise.forEach(this.fi,((f,d)=>this.wr(n,f,d).next((y=>y?PersistencePromise.resolve():s(d)))))}removeTargets(n,s,f){return this.persistence.getTargetCache().removeTargets(n,s,f)}removeOrphanedDocuments(n,s){let f=0;const d=this.persistence.getRemoteDocumentCache(),y=d.newChangeBuffer();return d.ni(n,(_=>this.wr(n,_,s).next((A=>{A||(f++,y.removeEntry(_,SnapshotVersion.min()))})))).next((()=>y.apply(n))).next((()=>f))}markPotentiallyOrphaned(n,s){return this.fi.set(s,n.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(n,s){const f=s.withSequenceNumber(n.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(n,f)}addReference(n,s,f){return this.fi.set(f,n.currentSequenceNumber),PersistencePromise.resolve()}removeReference(n,s,f){return this.fi.set(f,n.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(n,s){return this.fi.set(s,n.currentSequenceNumber),PersistencePromise.resolve()}hi(n){let s=n.key.toString().length;return n.isFoundDocument()&&(s+=__PRIVATE_estimateByteSize(n.data.value)),s}wr(n,s,f){return PersistencePromise.or([()=>this.persistence.Ei(n,s),()=>this.persistence.getTargetCache().containsKey(n,s),()=>{const d=this.fi.get(s);return PersistencePromise.resolve(d!==void 0&&d>f)}])}getCacheSize(n){return this.persistence.getRemoteDocumentCache().getSize(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(n,s,f,d){this.targetId=n,this.fromCache=s,this.Ts=f,this.Is=d}static Es(n,s){let f=__PRIVATE_documentKeySet(),d=__PRIVATE_documentKeySet();for(const y of s.docChanges)switch(y.type){case 0:f=f.add(y.doc.key);break;case 1:d=d.add(y.doc.key)}return new __PRIVATE_LocalViewChanges(n,s.fromCache,f,d)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(n){this._documentReadCount+=n}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4})()}initialize(n,s){this.fs=n,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(n,s,f,d){const y={result:null};return this.gs(n,s).next((_=>{y.result=_})).next((()=>{if(!y.result)return this.ps(n,s,d,f).next((_=>{y.result=_}))})).next((()=>{if(y.result)return;const _=new QueryContext;return this.ys(n,s,_).next((A=>{if(y.result=A,this.As)return this.ws(n,s,_,A.size)}))})).next((()=>y.result))}ws(n,s,f,d){return f.documentReadCount<this.Vs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(s),"scans",f.documentReadCount,"local documents and returns",d,"documents as results."),f.documentReadCount>this.ds*d?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(n,__PRIVATE_queryToTarget(s))):PersistencePromise.resolve())}gs(n,s){if(__PRIVATE_queryMatchesAllDocuments(s))return PersistencePromise.resolve(null);let f=__PRIVATE_queryToTarget(s);return this.indexManager.getIndexType(n,f).next((d=>d===0?null:(s.limit!==null&&d===1&&(s=__PRIVATE_queryWithLimit(s,null,"F"),f=__PRIVATE_queryToTarget(s)),this.indexManager.getDocumentsMatchingTarget(n,f).next((y=>{const _=__PRIVATE_documentKeySet(...y);return this.fs.getDocuments(n,_).next((A=>this.indexManager.getMinOffset(n,f).next((R=>{const I=this.bs(s,A);return this.Ss(s,I,_,R.readTime)?this.gs(n,__PRIVATE_queryWithLimit(s,null,"F")):this.Ds(n,I,s,R)}))))})))))}ps(n,s,f,d){return __PRIVATE_queryMatchesAllDocuments(s)||d.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.fs.getDocuments(n,f).next((y=>{const _=this.bs(s,y);return this.Ss(s,_,f,d)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),__PRIVATE_stringifyQuery(s)),this.Ds(n,_,s,__PRIVATE_newIndexOffsetSuccessorFromReadTime(d,B)).next((A=>A)))}))}bs(n,s){let f=new SortedSet(__PRIVATE_newQueryComparator(n));return s.forEach(((d,y)=>{__PRIVATE_queryMatches(n,y)&&(f=f.add(y))})),f}Ss(n,s,f,d){if(n.limit===null)return!1;if(f.size!==s.size)return!0;const y=n.limitType==="F"?s.last():s.first();return!!y&&(y.hasPendingWrites||y.version.compareTo(d)>0)}ys(n,s,f){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(s)),this.fs.getDocumentsMatchingQuery(n,s,IndexOffset.min(),f)}Ds(n,s,f,d){return this.fs.getDocumentsMatchingQuery(n,f,d).next((y=>(s.forEach((_=>{y=y.insert(_.key,_)})),y)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="LocalStore",Lt=3e8;class __PRIVATE_LocalStoreImpl{constructor(n,s,f,d){this.persistence=n,this.Cs=s,this.serializer=d,this.vs=new SortedMap(__PRIVATE_primitiveComparator),this.Fs=new ObjectMap((y=>__PRIVATE_canonifyTarget(y)),__PRIVATE_targetEquals),this.Ms=new Map,this.xs=n.getRemoteDocumentCache(),this.li=n.getTargetCache(),this.Pi=n.getBundleCache(),this.Os(f)}Os(n){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(n),this.indexManager=this.persistence.getIndexManager(n),this.mutationQueue=this.persistence.getMutationQueue(n,this.indexManager),this.localDocuments=new LocalDocumentsView(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>n.collect(s,this.vs)))}}function __PRIVATE_newLocalStore(u,n,s,f){return new __PRIVATE_LocalStoreImpl(u,n,s,f)}async function __PRIVATE_localStoreHandleUserChange(u,n){const s=__PRIVATE_debugCast(u);return await s.persistence.runTransaction("Handle user change","readonly",(f=>{let d;return s.mutationQueue.getAllMutationBatches(f).next((y=>(d=y,s.Os(n),s.mutationQueue.getAllMutationBatches(f)))).next((y=>{const _=[],A=[];let R=__PRIVATE_documentKeySet();for(const I of d){_.push(I.batchId);for(const G of I.mutations)R=R.add(G.key)}for(const I of y){A.push(I.batchId);for(const G of I.mutations)R=R.add(G.key)}return s.localDocuments.getDocuments(f,R).next((I=>({Ns:I,removedBatchIds:_,addedBatchIds:A})))}))}))}function __PRIVATE_localStoreAcknowledgeBatch(u,n){const s=__PRIVATE_debugCast(u);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(f=>{const d=n.batch.keys(),y=s.xs.newChangeBuffer({trackRemovals:!0});return(function(A,R,I,G){const Y=I.batch,q=Y.keys();let K=PersistencePromise.resolve();return q.forEach((Q=>{K=K.next((()=>G.getEntry(R,Q))).next((ne=>{const te=I.docVersions.get(Q);__PRIVATE_hardAssert(te!==null,48541),ne.version.compareTo(te)<0&&(Y.applyToRemoteDocument(ne,I),ne.isValidDocument()&&(ne.setReadTime(I.commitVersion),G.addEntry(ne)))}))})),K.next((()=>A.mutationQueue.removeMutationBatch(R,Y)))})(s,f,n,y).next((()=>y.apply(f))).next((()=>s.mutationQueue.performConsistencyCheck(f))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(f,d,n.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,(function(A){let R=__PRIVATE_documentKeySet();for(let I=0;I<A.mutationResults.length;++I)A.mutationResults[I].transformResults.length>0&&(R=R.add(A.batch.mutations[I].key));return R})(n)))).next((()=>s.localDocuments.getDocuments(f,d)))}))}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(u){const n=__PRIVATE_debugCast(u);return n.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>n.li.getLastRemoteSnapshotVersion(s)))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(u,n){const s=__PRIVATE_debugCast(u),f=n.snapshotVersion;let d=s.vs;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(y=>{const _=s.xs.newChangeBuffer({trackRemovals:!0});d=s.vs;const A=[];n.targetChanges.forEach(((G,Y)=>{const q=d.get(Y);if(!q)return;A.push(s.li.removeMatchingKeys(y,G.removedDocuments,Y).next((()=>s.li.addMatchingKeys(y,G.addedDocuments,Y))));let K=q.withSequenceNumber(y.currentSequenceNumber);n.targetMismatches.get(Y)!==null?K=K.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):G.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(G.resumeToken,f)),d=d.insert(Y,K),(function(ne,te,J){return ne.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=Lt?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(q,K,G)&&A.push(s.li.updateTargetData(y,K))}));let R=__PRIVATE_mutableDocumentMap(),I=__PRIVATE_documentKeySet();if(n.documentUpdates.forEach((G=>{n.resolvedLimboDocuments.has(G)&&A.push(s.persistence.referenceDelegate.updateLimboDocument(y,G))})),A.push(__PRIVATE_populateDocumentChangeBuffer(y,_,n.documentUpdates).next((G=>{R=G.Bs,I=G.Ls}))),!f.isEqual(SnapshotVersion.min())){const G=s.li.getLastRemoteSnapshotVersion(y).next((Y=>s.li.setTargetsMetadata(y,y.currentSequenceNumber,f)));A.push(G)}return PersistencePromise.waitFor(A).next((()=>_.apply(y))).next((()=>s.localDocuments.getLocalViewOfDocuments(y,R,I))).next((()=>R))})).then((y=>(s.vs=d,y)))}function __PRIVATE_populateDocumentChangeBuffer(u,n,s){let f=__PRIVATE_documentKeySet(),d=__PRIVATE_documentKeySet();return s.forEach((y=>f=f.add(y))),n.getEntries(u,f).next((y=>{let _=__PRIVATE_mutableDocumentMap();return s.forEach(((A,R)=>{const I=y.get(A);R.isFoundDocument()!==I.isFoundDocument()&&(d=d.add(A)),R.isNoDocument()&&R.version.isEqual(SnapshotVersion.min())?(n.removeEntry(A,R.readTime),_=_.insert(A,R)):!I.isValidDocument()||R.version.compareTo(I.version)>0||R.version.compareTo(I.version)===0&&I.hasPendingWrites?(n.addEntry(R),_=_.insert(A,R)):__PRIVATE_logDebug(Bt,"Ignoring outdated watch update for ",A,". Current version:",I.version," Watch version:",R.version)})),{Bs:_,Ls:d}}))}function __PRIVATE_localStoreGetNextMutationBatch(u,n){const s=__PRIVATE_debugCast(u);return s.persistence.runTransaction("Get next mutation batch","readonly",(f=>(n===void 0&&(n=U),s.mutationQueue.getNextMutationBatchAfterBatchId(f,n))))}function __PRIVATE_localStoreAllocateTarget(u,n){const s=__PRIVATE_debugCast(u);return s.persistence.runTransaction("Allocate target","readwrite",(f=>{let d;return s.li.getTargetData(f,n).next((y=>y?(d=y,PersistencePromise.resolve(d)):s.li.allocateTargetId(f).next((_=>(d=new TargetData(n,_,"TargetPurposeListen",f.currentSequenceNumber),s.li.addTargetData(f,d).next((()=>d)))))))})).then((f=>{const d=s.vs.get(f.targetId);return(d===null||f.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(s.vs=s.vs.insert(f.targetId,f),s.Fs.set(n,f.targetId)),f}))}async function __PRIVATE_localStoreReleaseTarget(u,n,s){const f=__PRIVATE_debugCast(u),d=f.vs.get(n),y=s?"readwrite":"readwrite-primary";try{s||await f.persistence.runTransaction("Release target",y,(_=>f.persistence.referenceDelegate.removeTarget(_,d)))}catch(_){if(!__PRIVATE_isIndexedDbTransactionError(_))throw _;__PRIVATE_logDebug(Bt,`Failed to update sequence numbers for target ${n}: ${_}`)}f.vs=f.vs.remove(n),f.Fs.delete(d.target)}function __PRIVATE_localStoreExecuteQuery(u,n,s){const f=__PRIVATE_debugCast(u);let d=SnapshotVersion.min(),y=__PRIVATE_documentKeySet();return f.persistence.runTransaction("Execute query","readwrite",(_=>(function(R,I,G){const Y=__PRIVATE_debugCast(R),q=Y.Fs.get(G);return q!==void 0?PersistencePromise.resolve(Y.vs.get(q)):Y.li.getTargetData(I,G)})(f,_,__PRIVATE_queryToTarget(n)).next((A=>{if(A)return d=A.lastLimboFreeSnapshotVersion,f.li.getMatchingKeysForTargetId(_,A.targetId).next((R=>{y=R}))})).next((()=>f.Cs.getDocumentsMatchingQuery(_,n,s?d:SnapshotVersion.min(),s?y:__PRIVATE_documentKeySet()))).next((A=>(__PRIVATE_setMaxReadTime(f,__PRIVATE_queryCollectionGroup(n),A),{documents:A,ks:y})))))}function __PRIVATE_setMaxReadTime(u,n,s){let f=u.Ms.get(n)||SnapshotVersion.min();s.forEach(((d,y)=>{y.readTime.compareTo(f)>0&&(f=y.readTime)})),u.Ms.set(n,f)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}Qs(n){this.activeTargetIds=this.activeTargetIds.add(n)}Gs(n){this.activeTargetIds=this.activeTargetIds.delete(n)}Ws(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class __PRIVATE_MemorySharedClientState{constructor(){this.vo=new __PRIVATE_LocalClientState,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,s,f){}addLocalQueryTarget(n,s=!0){return s&&this.vo.Qs(n),this.Fo[n]||"not-current"}updateQueryState(n,s,f){this.Fo[n]=s}removeLocalQueryTarget(n){this.vo.Gs(n)}isLocalQueryTarget(n){return this.vo.activeTargetIds.has(n)}clearQueryState(n){delete this.Fo[n]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(n){return this.vo.activeTargetIds.has(n)}start(){return this.vo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(n,s,f){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(n){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{Mo(n){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(n){this.Lo.push(n)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){__PRIVATE_logDebug($t,"Network connectivity changed: AVAILABLE");for(const n of this.Lo)n(0)}Bo(){__PRIVATE_logDebug($t,"Network connectivity changed: UNAVAILABLE");for(const n of this.Lo)n(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wt=null;function __PRIVATE_generateUniqueDebugId(){return Wt===null?Wt=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wt++,"0x"+Wt.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="RestConnection",Gt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class __PRIVATE_RestConnection{get Ko(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",f=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.qo=s+"://"+n.host,this.Uo=`projects/${f}/databases/${d}`,this.$o=this.databaseId.database===st?`project_id=${f}`:`project_id=${f}&database_id=${d}`}Wo(n,s,f,d,y){const _=__PRIVATE_generateUniqueDebugId(),A=this.Qo(n,s.toUriEncodedString());__PRIVATE_logDebug(Qt,`Sending RPC '${n}' ${_}:`,A,f);const R={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(R,d,y);const{host:I}=new URL(A),G=isCloudWorkstation(I);return this.zo(n,A,R,f,G).then((Y=>(__PRIVATE_logDebug(Qt,`Received RPC '${n}' ${_}: `,Y),Y)),(Y=>{throw __PRIVATE_logWarn(Qt,`RPC '${n}' ${_} failed with error: `,Y,"url: ",A,"request:",f),Y}))}jo(n,s,f,d,y,_){return this.Wo(n,s,f,d,y)}Go(n,s,f){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+S})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((d,y)=>n[y]=d)),f&&f.headers.forEach(((d,y)=>n[y]=d))}Qo(n,s){const f=Gt[n];let d=`${this.qo}/v1/${s}:${f}`;return this.databaseInfo.apiKey&&(d=`${d}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),d}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(n){this.Ho=n.Ho,this.Jo=n.Jo}Zo(n){this.Xo=n}Yo(n){this.e_=n}t_(n){this.n_=n}onMessage(n){this.r_=n}close(){this.Jo()}send(n){this.Ho(n)}i_(){this.Xo()}s_(){this.e_()}o_(n){this.n_(n)}__(n){this.r_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection",__PRIVATE_unguardedEventListen=(u,n,s)=>{u.listen(n,(f=>{try{s(f)}catch(d){setTimeout((()=>{throw d}),0)}}))};class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(n){super(n),this.a_=[],this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams,this.longPollingOptions=n.longPollingOptions}static u_(){if(!__PRIVATE_WebChannelConnection.c_){const n=getStatEventTarget();__PRIVATE_unguardedEventListen(n,Event$1.STAT_EVENT,(s=>{s.stat===Stat.PROXY?__PRIVATE_logDebug(zt,"STAT_EVENT: detected buffering proxy"):s.stat===Stat.NOPROXY&&__PRIVATE_logDebug(zt,"STAT_EVENT: detected no buffering proxy")})),__PRIVATE_WebChannelConnection.c_=!0}}zo(n,s,f,d,y){const _=__PRIVATE_generateUniqueDebugId();return new Promise(((A,R)=>{const I=new XhrIo;I.setWithCredentials(!0),I.listenOnce(EventType.COMPLETE,(()=>{try{switch(I.getLastErrorCode()){case ErrorCode.NO_ERROR:const Y=I.getResponseJson();__PRIVATE_logDebug(zt,`XHR for RPC '${n}' ${_} received:`,JSON.stringify(Y)),A(Y);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(zt,`RPC '${n}' ${_} timed out`),R(new FirestoreError(C.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const q=I.getStatus();if(__PRIVATE_logDebug(zt,`RPC '${n}' ${_} failed with status:`,q,"response text:",I.getResponseText()),q>0){let K=I.getResponseJson();Array.isArray(K)&&(K=K[0]);const Q=K==null?void 0:K.error;if(Q&&Q.status&&Q.message){const ne=(function(J){const ie=J.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(ie)>=0?ie:C.UNKNOWN})(Q.status);R(new FirestoreError(ne,Q.message))}else R(new FirestoreError(C.UNKNOWN,"Server responded with status "+I.getStatus()))}else R(new FirestoreError(C.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{l_:n,streamId:_,h_:I.getLastErrorCode(),P_:I.getLastError()})}}finally{__PRIVATE_logDebug(zt,`RPC '${n}' ${_} completed.`)}}));const G=JSON.stringify(d);__PRIVATE_logDebug(zt,`RPC '${n}' ${_} sending request:`,d),I.send(s,"POST",G,f,15)}))}T_(n,s,f){const d=__PRIVATE_generateUniqueDebugId(),y=[this.qo,"/","google.firestore.v1.Firestore","/",n,"/channel"],_=this.createWebChannelTransport(),A={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},R=this.longPollingOptions.timeoutSeconds;R!==void 0&&(A.longPollingTimeout=Math.round(1e3*R)),this.useFetchStreams&&(A.useFetchStreams=!0),this.Go(A.initMessageHeaders,s,f),A.encodeInitMessageHeaders=!0;const I=y.join("");__PRIVATE_logDebug(zt,`Creating RPC '${n}' stream ${d}: ${I}`,A);const G=_.createWebChannel(I,A);this.I_(G);let Y=!1,q=!1;const K=new __PRIVATE_StreamBridge({Ho:Q=>{q?__PRIVATE_logDebug(zt,`Not sending because RPC '${n}' stream ${d} is closed:`,Q):(Y||(__PRIVATE_logDebug(zt,`Opening RPC '${n}' stream ${d} transport.`),G.open(),Y=!0),__PRIVATE_logDebug(zt,`RPC '${n}' stream ${d} sending:`,Q),G.send(Q))},Jo:()=>G.close()});return __PRIVATE_unguardedEventListen(G,WebChannel.EventType.OPEN,(()=>{q||(__PRIVATE_logDebug(zt,`RPC '${n}' stream ${d} transport opened.`),K.i_())})),__PRIVATE_unguardedEventListen(G,WebChannel.EventType.CLOSE,(()=>{q||(q=!0,__PRIVATE_logDebug(zt,`RPC '${n}' stream ${d} transport closed`),K.o_(),this.E_(G))})),__PRIVATE_unguardedEventListen(G,WebChannel.EventType.ERROR,(Q=>{q||(q=!0,__PRIVATE_logWarn(zt,`RPC '${n}' stream ${d} transport errored. Name:`,Q.name,"Message:",Q.message),K.o_(new FirestoreError(C.UNAVAILABLE,"The operation could not be completed")))})),__PRIVATE_unguardedEventListen(G,WebChannel.EventType.MESSAGE,(Q=>{var ne;if(!q){const te=Q.data[0];__PRIVATE_hardAssert(!!te,16349);const J=te,ie=(J==null?void 0:J.error)||((ne=J[0])==null?void 0:ne.error);if(ie){__PRIVATE_logDebug(zt,`RPC '${n}' stream ${d} received error:`,ie);const re=ie.status;let le=(function(de){const se=At[de];if(se!==void 0)return __PRIVATE_mapCodeFromRpcCode(se)})(re),fe=ie.message;re==="NOT_FOUND"&&fe.includes("database")&&fe.includes("does not exist")&&fe.includes(this.databaseId.database)&&__PRIVATE_logWarn(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),le===void 0&&(le=C.INTERNAL,fe="Unknown error status: "+re+" with message "+ie.message),q=!0,K.o_(new FirestoreError(le,fe)),G.close()}else __PRIVATE_logDebug(zt,`RPC '${n}' stream ${d} received:`,te),K.__(te)}})),__PRIVATE_WebChannelConnection.u_(),setTimeout((()=>{K.s_()}),0),K}terminate(){this.a_.forEach((n=>n.close())),this.a_=[]}I_(n){this.a_.push(n)}E_(n){this.a_=this.a_.filter((s=>s===n))}Go(n,s,f){super.Go(n,s,f),this.databaseInfo.apiKey&&(n["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return createWebChannelTransport()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newConnection(u){return new __PRIVATE_WebChannelConnection(u)}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(u){return new JsonProtoSerializer(u,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */__PRIVATE_WebChannelConnection.c_=!1;class __PRIVATE_ExponentialBackoff{constructor(n,s,f=1e3,d=1.5,y=6e4){this.Ci=n,this.timerId=s,this.R_=f,this.A_=d,this.V_=y,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(n){this.cancel();const s=Math.floor(this.d_+this.y_()),f=Math.max(0,Date.now()-this.f_),d=Math.max(0,s-f);d>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.d_} ms, delay with jitter: ${s} ms, last attempt: ${f} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,d,(()=>(this.f_=Date.now(),n()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="PersistentStream";class __PRIVATE_PersistentStream{constructor(n,s,f,d,y,_,A,R){this.Ci=n,this.b_=f,this.S_=d,this.connection=y,this.authCredentialsProvider=_,this.appCheckCredentialsProvider=A,this.listener=R,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new __PRIVATE_ExponentialBackoff(n,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(n){this.q_(),this.stream.send(n)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(n,s){this.q_(),this.U_(),this.M_.cancel(),this.D_++,n!==4?this.M_.reset():s&&s.code===C.RESOURCE_EXHAUSTED?(__PRIVATE_logError(s.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=n,await this.listener.t_(s)}W_(){}auth(){this.state=1;const n=this.Q_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([f,d])=>{this.D_===s&&this.G_(f,d)}),(f=>{n((()=>{const d=new FirestoreError(C.UNKNOWN,"Fetching auth token failed: "+f.message);return this.z_(d)}))}))}G_(n,s){const f=this.Q_(this.D_);this.stream=this.j_(n,s),this.stream.Zo((()=>{f((()=>this.listener.Zo()))})),this.stream.Yo((()=>{f((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((d=>{f((()=>this.z_(d)))})),this.stream.onMessage((d=>{f((()=>++this.F_==1?this.H_(d):this.onNext(d)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(n){return __PRIVATE_logDebug(jt,`close with error: ${n}`),this.stream=null,this.close(4,n)}Q_(n){return s=>{this.Ci.enqueueAndForget((()=>this.D_===n?s():(__PRIVATE_logDebug(jt,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(n,s,f,d,y,_){super(n,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,f,d,_),this.serializer=y}j_(n,s){return this.connection.T_("Listen",n,s)}H_(n){return this.onNext(n)}onNext(n){this.M_.reset();const s=__PRIVATE_fromWatchChange(this.serializer,n),f=(function(y){if(!("targetChange"in y))return SnapshotVersion.min();const _=y.targetChange;return _.targetIds&&_.targetIds.length?SnapshotVersion.min():_.readTime?__PRIVATE_fromVersion(_.readTime):SnapshotVersion.min()})(n);return this.listener.J_(s,f)}Z_(n){const s={};s.database=__PRIVATE_getEncodedDatabaseId(this.serializer),s.addTarget=(function(y,_){let A;const R=_.target;if(A=__PRIVATE_targetIsDocumentTarget(R)?{documents:__PRIVATE_toDocumentsTarget(y,R)}:{query:__PRIVATE_toQueryTarget(y,R).ft},A.targetId=_.targetId,_.resumeToken.approximateByteSize()>0){A.resumeToken=__PRIVATE_toBytes(y,_.resumeToken);const I=__PRIVATE_toInt32Proto(y,_.expectedCount);I!==null&&(A.expectedCount=I)}else if(_.snapshotVersion.compareTo(SnapshotVersion.min())>0){A.readTime=toTimestamp(y,_.snapshotVersion.toTimestamp());const I=__PRIVATE_toInt32Proto(y,_.expectedCount);I!==null&&(A.expectedCount=I)}return A})(this.serializer,n);const f=__PRIVATE_toListenRequestLabels(this.serializer,n);f&&(s.labels=f),this.K_(s)}X_(n){const s={};s.database=__PRIVATE_getEncodedDatabaseId(this.serializer),s.removeTarget=n,this.K_(s)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(n,s,f,d,y,_){super(n,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,f,d,_),this.serializer=y}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(n,s){return this.connection.T_("Write",n,s)}H_(n){return __PRIVATE_hardAssert(!!n.streamToken,31322),this.lastStreamToken=n.streamToken,__PRIVATE_hardAssert(!n.writeResults||n.writeResults.length===0,55816),this.listener.ta()}onNext(n){__PRIVATE_hardAssert(!!n.streamToken,12678),this.lastStreamToken=n.streamToken,this.M_.reset();const s=__PRIVATE_fromWriteResults(n.writeResults,n.commitTime),f=__PRIVATE_fromVersion(n.commitTime);return this.listener.na(f,s)}ra(){const n={};n.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.K_(n)}ea(n){const s={streamToken:this.lastStreamToken,writes:n.map((f=>toMutation(this.serializer,f)))};this.K_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(n,s,f,d){super(),this.authCredentials=n,this.appCheckCredentials=s,this.connection=f,this.serializer=d,this.ia=!1}sa(){if(this.ia)throw new FirestoreError(C.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(n,s,f,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([y,_])=>this.connection.Wo(n,__PRIVATE_toResourcePath(s,f),d,y,_))).catch((y=>{throw y.name==="FirebaseError"?(y.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new FirestoreError(C.UNKNOWN,y.toString())}))}jo(n,s,f,d,y){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([_,A])=>this.connection.jo(n,__PRIVATE_toResourcePath(s,f),d,_,A,y))).catch((_=>{throw _.name==="FirebaseError"?(_.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new FirestoreError(C.UNKNOWN,_.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function __PRIVATE_newDatastore(u,n,s,f){return new __PRIVATE_DatastoreImpl(u,n,s,f)}class __PRIVATE_OnlineStateTracker{constructor(n,s){this.asyncQueue=n,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(n){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.ca("Offline")))}set(n){this.Pa(),this.oa=0,n==="Online"&&(this.aa=!1),this.ca(n)}ca(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}la(n){const s=`Could not reach Cloud Firestore backend. ${n}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(__PRIVATE_logError(s),this.aa=!1):__PRIVATE_logDebug("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht$1="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(n,s,f,d,y){this.localStore=n,this.datastore=s,this.asyncQueue=f,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=y,this.Aa.Mo((_=>{f.enqueueAndForget((async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(Ht$1,"Restarting streams for network reachability change."),await(async function(R){const I=__PRIVATE_debugCast(R);I.Ea.add(4),await __PRIVATE_disableNetworkInternal(I),I.Va.set("Unknown"),I.Ea.delete(4),await __PRIVATE_enableNetworkInternal(I)})(this))}))})),this.Va=new __PRIVATE_OnlineStateTracker(f,d)}}async function __PRIVATE_enableNetworkInternal(u){if(__PRIVATE_canUseNetwork(u))for(const n of u.Ra)await n(!0)}async function __PRIVATE_disableNetworkInternal(u){for(const n of u.Ra)await n(!1)}function __PRIVATE_remoteStoreListen(u,n){const s=__PRIVATE_debugCast(u);s.Ia.has(n.targetId)||(s.Ia.set(n.targetId,n),__PRIVATE_shouldStartWatchStream(s)?__PRIVATE_startWatchStream(s):__PRIVATE_ensureWatchStream(s).O_()&&__PRIVATE_sendWatchRequest(s,n))}function __PRIVATE_remoteStoreUnlisten(u,n){const s=__PRIVATE_debugCast(u),f=__PRIVATE_ensureWatchStream(s);s.Ia.delete(n),f.O_()&&__PRIVATE_sendUnwatchRequest(s,n),s.Ia.size===0&&(f.O_()?f.L_():__PRIVATE_canUseNetwork(s)&&s.Va.set("Unknown"))}function __PRIVATE_sendWatchRequest(u,n){if(u.da.$e(n.targetId),n.resumeToken.approximateByteSize()>0||n.snapshotVersion.compareTo(SnapshotVersion.min())>0){const s=u.remoteSyncer.getRemoteKeysForTarget(n.targetId).size;n=n.withExpectedCount(s)}__PRIVATE_ensureWatchStream(u).Z_(n)}function __PRIVATE_sendUnwatchRequest(u,n){u.da.$e(n),__PRIVATE_ensureWatchStream(u).X_(n)}function __PRIVATE_startWatchStream(u){u.da=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:n=>u.remoteSyncer.getRemoteKeysForTarget(n),At:n=>u.Ia.get(n)||null,ht:()=>u.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(u).start(),u.Va.ua()}function __PRIVATE_shouldStartWatchStream(u){return __PRIVATE_canUseNetwork(u)&&!__PRIVATE_ensureWatchStream(u).x_()&&u.Ia.size>0}function __PRIVATE_canUseNetwork(u){return __PRIVATE_debugCast(u).Ea.size===0}function __PRIVATE_cleanUpWatchStreamState(u){u.da=void 0}async function __PRIVATE_onWatchStreamConnected(u){u.Va.set("Online")}async function __PRIVATE_onWatchStreamOpen(u){u.Ia.forEach(((n,s)=>{__PRIVATE_sendWatchRequest(u,n)}))}async function __PRIVATE_onWatchStreamClose(u,n){__PRIVATE_cleanUpWatchStreamState(u),__PRIVATE_shouldStartWatchStream(u)?(u.Va.ha(n),__PRIVATE_startWatchStream(u)):u.Va.set("Unknown")}async function __PRIVATE_onWatchStreamChange(u,n,s){if(u.Va.set("Online"),n instanceof __PRIVATE_WatchTargetChange&&n.state===2&&n.cause)try{await(async function(d,y){const _=y.cause;for(const A of y.targetIds)d.Ia.has(A)&&(await d.remoteSyncer.rejectListen(A,_),d.Ia.delete(A),d.da.removeTarget(A))})(u,n)}catch(f){__PRIVATE_logDebug(Ht$1,"Failed to remove targets %s: %s ",n.targetIds.join(","),f),await __PRIVATE_disableNetworkUntilRecovery(u,f)}else if(n instanceof __PRIVATE_DocumentWatchChange?u.da.Xe(n):n instanceof __PRIVATE_ExistenceFilterChange?u.da.st(n):u.da.tt(n),!s.isEqual(SnapshotVersion.min()))try{const f=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(u.localStore);s.compareTo(f)>=0&&await(function(y,_){const A=y.da.Tt(_);return A.targetChanges.forEach(((R,I)=>{if(R.resumeToken.approximateByteSize()>0){const G=y.Ia.get(I);G&&y.Ia.set(I,G.withResumeToken(R.resumeToken,_))}})),A.targetMismatches.forEach(((R,I)=>{const G=y.Ia.get(R);if(!G)return;y.Ia.set(R,G.withResumeToken(ByteString.EMPTY_BYTE_STRING,G.snapshotVersion)),__PRIVATE_sendUnwatchRequest(y,R);const Y=new TargetData(G.target,R,I,G.sequenceNumber);__PRIVATE_sendWatchRequest(y,Y)})),y.remoteSyncer.applyRemoteEvent(A)})(u,s)}catch(f){__PRIVATE_logDebug(Ht$1,"Failed to raise snapshot:",f),await __PRIVATE_disableNetworkUntilRecovery(u,f)}}async function __PRIVATE_disableNetworkUntilRecovery(u,n,s){if(!__PRIVATE_isIndexedDbTransactionError(n))throw n;u.Ea.add(1),await __PRIVATE_disableNetworkInternal(u),u.Va.set("Offline"),s||(s=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(u.localStore)),u.asyncQueue.enqueueRetryable((async()=>{__PRIVATE_logDebug(Ht$1,"Retrying IndexedDB access"),await s(),u.Ea.delete(1),await __PRIVATE_enableNetworkInternal(u)}))}function __PRIVATE_executeWithRecovery(u,n){return n().catch((s=>__PRIVATE_disableNetworkUntilRecovery(u,s,n)))}async function __PRIVATE_fillWritePipeline(u){const n=__PRIVATE_debugCast(u),s=__PRIVATE_ensureWriteStream(n);let f=n.Ta.length>0?n.Ta[n.Ta.length-1].batchId:U;for(;__PRIVATE_canAddToWritePipeline(n);)try{const d=await __PRIVATE_localStoreGetNextMutationBatch(n.localStore,f);if(d===null){n.Ta.length===0&&s.L_();break}f=d.batchId,__PRIVATE_addToWritePipeline(n,d)}catch(d){await __PRIVATE_disableNetworkUntilRecovery(n,d)}__PRIVATE_shouldStartWriteStream(n)&&__PRIVATE_startWriteStream(n)}function __PRIVATE_canAddToWritePipeline(u){return __PRIVATE_canUseNetwork(u)&&u.Ta.length<10}function __PRIVATE_addToWritePipeline(u,n){u.Ta.push(n);const s=__PRIVATE_ensureWriteStream(u);s.O_()&&s.Y_&&s.ea(n.mutations)}function __PRIVATE_shouldStartWriteStream(u){return __PRIVATE_canUseNetwork(u)&&!__PRIVATE_ensureWriteStream(u).x_()&&u.Ta.length>0}function __PRIVATE_startWriteStream(u){__PRIVATE_ensureWriteStream(u).start()}async function __PRIVATE_onWriteStreamOpen(u){__PRIVATE_ensureWriteStream(u).ra()}async function __PRIVATE_onWriteHandshakeComplete(u){const n=__PRIVATE_ensureWriteStream(u);for(const s of u.Ta)n.ea(s.mutations)}async function __PRIVATE_onMutationResult(u,n,s){const f=u.Ta.shift(),d=MutationBatchResult.from(f,n,s);await __PRIVATE_executeWithRecovery(u,(()=>u.remoteSyncer.applySuccessfulWrite(d))),await __PRIVATE_fillWritePipeline(u)}async function __PRIVATE_onWriteStreamClose(u,n){n&&__PRIVATE_ensureWriteStream(u).Y_&&await(async function(f,d){if((function(_){return __PRIVATE_isPermanentError(_)&&_!==C.ABORTED})(d.code)){const y=f.Ta.shift();__PRIVATE_ensureWriteStream(f).B_(),await __PRIVATE_executeWithRecovery(f,(()=>f.remoteSyncer.rejectFailedWrite(y.batchId,d))),await __PRIVATE_fillWritePipeline(f)}})(u,n),__PRIVATE_shouldStartWriteStream(u)&&__PRIVATE_startWriteStream(u)}async function __PRIVATE_remoteStoreHandleCredentialChange(u,n){const s=__PRIVATE_debugCast(u);s.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(Ht$1,"RemoteStore received new credentials");const f=__PRIVATE_canUseNetwork(s);s.Ea.add(3),await __PRIVATE_disableNetworkInternal(s),f&&s.Va.set("Unknown"),await s.remoteSyncer.handleCredentialChange(n),s.Ea.delete(3),await __PRIVATE_enableNetworkInternal(s)}async function __PRIVATE_remoteStoreApplyPrimaryState(u,n){const s=__PRIVATE_debugCast(u);n?(s.Ea.delete(2),await __PRIVATE_enableNetworkInternal(s)):n||(s.Ea.add(2),await __PRIVATE_disableNetworkInternal(s),s.Va.set("Unknown"))}function __PRIVATE_ensureWatchStream(u){return u.ma||(u.ma=(function(s,f,d){const y=__PRIVATE_debugCast(s);return y.sa(),new __PRIVATE_PersistentListenStream(f,y.connection,y.authCredentials,y.appCheckCredentials,y.serializer,d)})(u.datastore,u.asyncQueue,{Zo:__PRIVATE_onWatchStreamConnected.bind(null,u),Yo:__PRIVATE_onWatchStreamOpen.bind(null,u),t_:__PRIVATE_onWatchStreamClose.bind(null,u),J_:__PRIVATE_onWatchStreamChange.bind(null,u)}),u.Ra.push((async n=>{n?(u.ma.B_(),__PRIVATE_shouldStartWatchStream(u)?__PRIVATE_startWatchStream(u):u.Va.set("Unknown")):(await u.ma.stop(),__PRIVATE_cleanUpWatchStreamState(u))}))),u.ma}function __PRIVATE_ensureWriteStream(u){return u.fa||(u.fa=(function(s,f,d){const y=__PRIVATE_debugCast(s);return y.sa(),new __PRIVATE_PersistentWriteStream(f,y.connection,y.authCredentials,y.appCheckCredentials,y.serializer,d)})(u.datastore,u.asyncQueue,{Zo:()=>Promise.resolve(),Yo:__PRIVATE_onWriteStreamOpen.bind(null,u),t_:__PRIVATE_onWriteStreamClose.bind(null,u),ta:__PRIVATE_onWriteHandshakeComplete.bind(null,u),na:__PRIVATE_onMutationResult.bind(null,u)}),u.Ra.push((async n=>{n?(u.fa.B_(),await __PRIVATE_fillWritePipeline(u)):(await u.fa.stop(),u.Ta.length>0&&(__PRIVATE_logDebug(Ht$1,`Stopping write stream with ${u.Ta.length} pending writes`),u.Ta=[]))}))),u.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(n,s,f,d,y){this.asyncQueue=n,this.timerId=s,this.targetTimeMs=f,this.op=d,this.removalCallback=y,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((_=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(n,s,f,d,y){const _=Date.now()+f,A=new DelayedOperation(n,s,_,d,y);return A.start(f),A}start(n){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(C.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((n=>this.deferred.resolve(n)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(u,n){if(__PRIVATE_logError("AsyncQueue",`${n}: ${u}`),__PRIVATE_isIndexedDbTransactionError(u))return new FirestoreError(C.UNAVAILABLE,`${n}: ${u}`);throw u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(n){return new DocumentSet(n.comparator)}constructor(n){this.comparator=n?(s,f)=>n(s,f)||DocumentKey.comparator(s.key,f.key):(s,f)=>DocumentKey.comparator(s.key,f.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(n){return this.keyedMap.get(n)!=null}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const s=this.keyedMap.get(n);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal(((s,f)=>(n(s),!1)))}add(n){const s=this.delete(n.key);return s.copy(s.keyedMap.insert(n.key,n),s.sortedSet.insert(n,null))}delete(n){const s=this.get(n);return s?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(s)):this}isEqual(n){if(!(n instanceof DocumentSet)||this.size!==n.size)return!1;const s=this.sortedSet.getIterator(),f=n.sortedSet.getIterator();for(;s.hasNext();){const d=s.getNext().key,y=f.getNext().key;if(!d.isEqual(y))return!1}return!0}toString(){const n=[];return this.forEach((s=>{n.push(s.toString())})),n.length===0?"DocumentSet ()":`DocumentSet (
  `+n.join(`  
`)+`
)`}copy(n,s){const f=new DocumentSet;return f.comparator=this.comparator,f.keyedMap=n,f.sortedSet=s,f}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.ga=new SortedMap(DocumentKey.comparator)}track(n){const s=n.doc.key,f=this.ga.get(s);f?n.type!==0&&f.type===3?this.ga=this.ga.insert(s,n):n.type===3&&f.type!==1?this.ga=this.ga.insert(s,{type:f.type,doc:n.doc}):n.type===2&&f.type===2?this.ga=this.ga.insert(s,{type:2,doc:n.doc}):n.type===2&&f.type===0?this.ga=this.ga.insert(s,{type:0,doc:n.doc}):n.type===1&&f.type===0?this.ga=this.ga.remove(s):n.type===1&&f.type===2?this.ga=this.ga.insert(s,{type:1,doc:f.doc}):n.type===0&&f.type===1?this.ga=this.ga.insert(s,{type:2,doc:n.doc}):fail(63341,{Vt:n,pa:f}):this.ga=this.ga.insert(s,n)}ya(){const n=[];return this.ga.inorderTraversal(((s,f)=>{n.push(f)})),n}}class ViewSnapshot{constructor(n,s,f,d,y,_,A,R,I){this.query=n,this.docs=s,this.oldDocs=f,this.docChanges=d,this.mutatedKeys=y,this.fromCache=_,this.syncStateChanged=A,this.excludesMetadataChanges=R,this.hasCachedResults=I}static fromInitialDocuments(n,s,f,d,y){const _=[];return s.forEach((A=>{_.push({type:0,doc:A})})),new ViewSnapshot(n,s,DocumentSet.emptySet(s),_,f,d,!0,!1,y)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.hasCachedResults===n.hasCachedResults&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&__PRIVATE_queryEquals(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const s=this.docChanges,f=n.docChanges;if(s.length!==f.length)return!1;for(let d=0;d<s.length;d++)if(s[d].type!==f[d].type||!s[d].doc.isEqual(f[d].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((n=>n.Da()))}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,f){const d=__PRIVATE_debugCast(s),y=d.queries;d.queries=__PRIVATE_newQueriesObjectMap(),y.forEach(((_,A)=>{for(const R of A.ba)R.onError(f)}))})(this,new FirestoreError(C.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap((u=>__PRIVATE_canonifyQuery(u)),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(u,n){const s=__PRIVATE_debugCast(u);let f=3;const d=n.query;let y=s.queries.get(d);y?!y.Sa()&&n.Da()&&(f=2):(y=new __PRIVATE_QueryListenersInfo,f=n.Da()?0:1);try{switch(f){case 0:y.wa=await s.onListen(d,!0);break;case 1:y.wa=await s.onListen(d,!1);break;case 2:await s.onFirstRemoteStoreListen(d)}}catch(_){const A=__PRIVATE_wrapInUserErrorIfRecoverable(_,`Initialization of query '${__PRIVATE_stringifyQuery(n.query)}' failed`);return void n.onError(A)}s.queries.set(d,y),y.ba.push(n),n.va(s.onlineState),y.wa&&n.Fa(y.wa)&&__PRIVATE_raiseSnapshotsInSyncEvent(s)}async function __PRIVATE_eventManagerUnlisten(u,n){const s=__PRIVATE_debugCast(u),f=n.query;let d=3;const y=s.queries.get(f);if(y){const _=y.ba.indexOf(n);_>=0&&(y.ba.splice(_,1),y.ba.length===0?d=n.Da()?0:1:!y.Sa()&&n.Da()&&(d=2))}switch(d){case 0:return s.queries.delete(f),s.onUnlisten(f,!0);case 1:return s.queries.delete(f),s.onUnlisten(f,!1);case 2:return s.onLastRemoteStoreUnlisten(f);default:return}}function __PRIVATE_eventManagerOnWatchChange(u,n){const s=__PRIVATE_debugCast(u);let f=!1;for(const d of n){const y=d.query,_=s.queries.get(y);if(_){for(const A of _.ba)A.Fa(d)&&(f=!0);_.wa=d}}f&&__PRIVATE_raiseSnapshotsInSyncEvent(s)}function __PRIVATE_eventManagerOnWatchError(u,n,s){const f=__PRIVATE_debugCast(u),d=f.queries.get(n);if(d)for(const y of d.ba)y.onError(s);f.queries.delete(n)}function __PRIVATE_raiseSnapshotsInSyncEvent(u){u.Ca.forEach((n=>{n.next()}))}var Jt,Zt;(Zt=Jt||(Jt={})).Ma="default",Zt.Cache="cache";class __PRIVATE_QueryListener{constructor(n,s,f){this.query=n,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=f||{}}Fa(n){if(!this.options.includeMetadataChanges){const f=[];for(const d of n.docChanges)d.type!==3&&f.push(d);n=new ViewSnapshot(n.query,n.docs,n.oldDocs,f,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0,n.hasCachedResults)}let s=!1;return this.Oa?this.Ba(n)&&(this.xa.next(n),s=!0):this.La(n,this.onlineState)&&(this.ka(n),s=!0),this.Na=n,s}onError(n){this.xa.error(n)}va(n){this.onlineState=n;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,n)&&(this.ka(this.Na),s=!0),s}La(n,s){if(!n.fromCache||!this.Da())return!0;const f=s!=="Offline";return(!this.options.Ka||!f)&&(!n.docs.isEmpty()||n.hasCachedResults||s==="Offline")}Ba(n){if(n.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==n.hasPendingWrites;return!(!n.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(n){n=ViewSnapshot.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache,n.hasCachedResults),this.Oa=!0,this.xa.next(n)}Da(){return this.options.source!==Jt.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(n){this.key=n}}class __PRIVATE_RemovedLimboDocument{constructor(n){this.key=n}}class __PRIVATE_View{constructor(n,s){this.query=n,this.Za=s,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.eu=__PRIVATE_newQueryComparator(n),this.tu=new DocumentSet(this.eu)}get nu(){return this.Za}ru(n,s){const f=s?s.iu:new __PRIVATE_DocumentChangeSet,d=s?s.tu:this.tu;let y=s?s.mutatedKeys:this.mutatedKeys,_=d,A=!1;const R=this.query.limitType==="F"&&d.size===this.query.limit?d.last():null,I=this.query.limitType==="L"&&d.size===this.query.limit?d.first():null;if(n.inorderTraversal(((G,Y)=>{const q=d.get(G),K=__PRIVATE_queryMatches(this.query,Y)?Y:null,Q=!!q&&this.mutatedKeys.has(q.key),ne=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let te=!1;q&&K?q.data.isEqual(K.data)?Q!==ne&&(f.track({type:3,doc:K}),te=!0):this.su(q,K)||(f.track({type:2,doc:K}),te=!0,(R&&this.eu(K,R)>0||I&&this.eu(K,I)<0)&&(A=!0)):!q&&K?(f.track({type:0,doc:K}),te=!0):q&&!K&&(f.track({type:1,doc:q}),te=!0,(R||I)&&(A=!0)),te&&(K?(_=_.add(K),y=ne?y.add(G):y.delete(G)):(_=_.delete(G),y=y.delete(G)))})),this.query.limit!==null)for(;_.size>this.query.limit;){const G=this.query.limitType==="F"?_.last():_.first();_=_.delete(G.key),y=y.delete(G.key),f.track({type:1,doc:G})}return{tu:_,iu:f,Ss:A,mutatedKeys:y}}su(n,s){return n.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(n,s,f,d){const y=this.tu;this.tu=n.tu,this.mutatedKeys=n.mutatedKeys;const _=n.iu.ya();_.sort(((G,Y)=>(function(K,Q){const ne=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Vt:te})}};return ne(K)-ne(Q)})(G.type,Y.type)||this.eu(G.doc,Y.doc))),this.ou(f),d=d??!1;const A=s&&!d?this._u():[],R=this.Ya.size===0&&this.current&&!d?1:0,I=R!==this.Xa;return this.Xa=R,_.length!==0||I?{snapshot:new ViewSnapshot(this.query,n.tu,y,_,n.mutatedKeys,R===0,I,!1,!!f&&f.resumeToken.approximateByteSize()>0),au:A}:{au:A}}va(n){return this.current&&n==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(n){return!this.Za.has(n)&&!!this.tu.has(n)&&!this.tu.get(n).hasLocalMutations}ou(n){n&&(n.addedDocuments.forEach((s=>this.Za=this.Za.add(s))),n.modifiedDocuments.forEach((s=>{})),n.removedDocuments.forEach((s=>this.Za=this.Za.delete(s))),this.current=n.current)}_u(){if(!this.current)return[];const n=this.Ya;this.Ya=__PRIVATE_documentKeySet(),this.tu.forEach((f=>{this.uu(f.key)&&(this.Ya=this.Ya.add(f.key))}));const s=[];return n.forEach((f=>{this.Ya.has(f)||s.push(new __PRIVATE_RemovedLimboDocument(f))})),this.Ya.forEach((f=>{n.has(f)||s.push(new __PRIVATE_AddedLimboDocument(f))})),s}cu(n){this.Za=n.ks,this.Ya=__PRIVATE_documentKeySet();const s=this.ru(n.documents);return this.applyChanges(s,!0)}lu(){return ViewSnapshot.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Xt="SyncEngine";class __PRIVATE_QueryView{constructor(n,s,f){this.query=n,this.targetId=s,this.view=f}}class LimboResolution{constructor(n){this.key=n,this.hu=!1}}class __PRIVATE_SyncEngineImpl{constructor(n,s,f,d,y,_){this.localStore=n,this.remoteStore=s,this.eventManager=f,this.sharedClientState=d,this.currentUser=y,this.maxConcurrentLimboResolutions=_,this.Pu={},this.Tu=new ObjectMap((A=>__PRIVATE_canonifyQuery(A)),__PRIVATE_queryEquals),this.Iu=new Map,this.Eu=new Set,this.Ru=new SortedMap(DocumentKey.comparator),this.Au=new Map,this.Vu=new __PRIVATE_ReferenceSet,this.du={},this.mu=new Map,this.fu=__PRIVATE_TargetIdGenerator.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function __PRIVATE_syncEngineListen(u,n,s=!0){const f=__PRIVATE_ensureWatchCallbacks(u);let d;const y=f.Tu.get(n);return y?(f.sharedClientState.addLocalQueryTarget(y.targetId),d=y.view.lu()):d=await __PRIVATE_allocateTargetAndMaybeListen(f,n,s,!0),d}async function __PRIVATE_triggerRemoteStoreListen(u,n){const s=__PRIVATE_ensureWatchCallbacks(u);await __PRIVATE_allocateTargetAndMaybeListen(s,n,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(u,n,s,f){const d=await __PRIVATE_localStoreAllocateTarget(u.localStore,__PRIVATE_queryToTarget(n)),y=d.targetId,_=u.sharedClientState.addLocalQueryTarget(y,s);let A;return f&&(A=await __PRIVATE_initializeViewAndComputeSnapshot(u,n,y,_==="current",d.resumeToken)),u.isPrimaryClient&&s&&__PRIVATE_remoteStoreListen(u.remoteStore,d),A}async function __PRIVATE_initializeViewAndComputeSnapshot(u,n,s,f,d){u.pu=(Y,q,K)=>(async function(ne,te,J,ie){let re=te.view.ru(J);re.Ss&&(re=await __PRIVATE_localStoreExecuteQuery(ne.localStore,te.query,!1).then((({documents:de})=>te.view.ru(de,re))));const le=ie&&ie.targetChanges.get(te.targetId),fe=ie&&ie.targetMismatches.get(te.targetId)!=null,pe=te.view.applyChanges(re,ne.isPrimaryClient,le,fe);return __PRIVATE_updateTrackedLimbos(ne,te.targetId,pe.au),pe.snapshot})(u,Y,q,K);const y=await __PRIVATE_localStoreExecuteQuery(u.localStore,n,!0),_=new __PRIVATE_View(n,y.ks),A=_.ru(y.documents),R=TargetChange.createSynthesizedTargetChangeForCurrentChange(s,f&&u.onlineState!=="Offline",d),I=_.applyChanges(A,u.isPrimaryClient,R);__PRIVATE_updateTrackedLimbos(u,s,I.au);const G=new __PRIVATE_QueryView(n,s,_);return u.Tu.set(n,G),u.Iu.has(s)?u.Iu.get(s).push(n):u.Iu.set(s,[n]),I.snapshot}async function __PRIVATE_syncEngineUnlisten(u,n,s){const f=__PRIVATE_debugCast(u),d=f.Tu.get(n),y=f.Iu.get(d.targetId);if(y.length>1)return f.Iu.set(d.targetId,y.filter((_=>!__PRIVATE_queryEquals(_,n)))),void f.Tu.delete(n);f.isPrimaryClient?(f.sharedClientState.removeLocalQueryTarget(d.targetId),f.sharedClientState.isActiveQueryTarget(d.targetId)||await __PRIVATE_localStoreReleaseTarget(f.localStore,d.targetId,!1).then((()=>{f.sharedClientState.clearQueryState(d.targetId),s&&__PRIVATE_remoteStoreUnlisten(f.remoteStore,d.targetId),__PRIVATE_removeAndCleanupTarget(f,d.targetId)})).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(f,d.targetId),await __PRIVATE_localStoreReleaseTarget(f.localStore,d.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(u,n){const s=__PRIVATE_debugCast(u),f=s.Tu.get(n),d=s.Iu.get(f.targetId);s.isPrimaryClient&&d.length===1&&(s.sharedClientState.removeLocalQueryTarget(f.targetId),__PRIVATE_remoteStoreUnlisten(s.remoteStore,f.targetId))}async function __PRIVATE_syncEngineWrite(u,n,s){const f=__PRIVATE_syncEngineEnsureWriteCallbacks(u);try{const d=await(function(_,A){const R=__PRIVATE_debugCast(_),I=Timestamp.now(),G=A.reduce(((K,Q)=>K.add(Q.key)),__PRIVATE_documentKeySet());let Y,q;return R.persistence.runTransaction("Locally write mutations","readwrite",(K=>{let Q=__PRIVATE_mutableDocumentMap(),ne=__PRIVATE_documentKeySet();return R.xs.getEntries(K,G).next((te=>{Q=te,Q.forEach(((J,ie)=>{ie.isValidDocument()||(ne=ne.add(J))}))})).next((()=>R.localDocuments.getOverlayedDocuments(K,Q))).next((te=>{Y=te;const J=[];for(const ie of A){const re=__PRIVATE_mutationExtractBaseValue(ie,Y.get(ie.key).overlayedDocument);re!=null&&J.push(new __PRIVATE_PatchMutation(ie.key,re,__PRIVATE_extractFieldMask(re.value.mapValue),Precondition.exists(!0)))}return R.mutationQueue.addMutationBatch(K,I,J,A)})).next((te=>{q=te;const J=te.applyToLocalDocumentSet(Y,ne);return R.documentOverlayCache.saveOverlays(K,te.batchId,J)}))})).then((()=>({batchId:q.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(Y)})))})(f.localStore,n);f.sharedClientState.addPendingMutation(d.batchId),(function(_,A,R){let I=_.du[_.currentUser.toKey()];I||(I=new SortedMap(__PRIVATE_primitiveComparator)),I=I.insert(A,R),_.du[_.currentUser.toKey()]=I})(f,d.batchId,s),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(f,d.changes),await __PRIVATE_fillWritePipeline(f.remoteStore)}catch(d){const y=__PRIVATE_wrapInUserErrorIfRecoverable(d,"Failed to persist write");s.reject(y)}}async function __PRIVATE_syncEngineApplyRemoteEvent(u,n){const s=__PRIVATE_debugCast(u);try{const f=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(s.localStore,n);n.targetChanges.forEach(((d,y)=>{const _=s.Au.get(y);_&&(__PRIVATE_hardAssert(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1,22616),d.addedDocuments.size>0?_.hu=!0:d.modifiedDocuments.size>0?__PRIVATE_hardAssert(_.hu,14607):d.removedDocuments.size>0&&(__PRIVATE_hardAssert(_.hu,42227),_.hu=!1))})),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,f,n)}catch(f){await __PRIVATE_ignoreIfPrimaryLeaseLoss(f)}}function __PRIVATE_syncEngineApplyOnlineStateChange(u,n,s){const f=__PRIVATE_debugCast(u);if(f.isPrimaryClient&&s===0||!f.isPrimaryClient&&s===1){const d=[];f.Tu.forEach(((y,_)=>{const A=_.view.va(n);A.snapshot&&d.push(A.snapshot)})),(function(_,A){const R=__PRIVATE_debugCast(_);R.onlineState=A;let I=!1;R.queries.forEach(((G,Y)=>{for(const q of Y.ba)q.va(A)&&(I=!0)})),I&&__PRIVATE_raiseSnapshotsInSyncEvent(R)})(f.eventManager,n),d.length&&f.Pu.J_(d),f.onlineState=n,f.isPrimaryClient&&f.sharedClientState.setOnlineState(n)}}async function __PRIVATE_syncEngineRejectListen(u,n,s){const f=__PRIVATE_debugCast(u);f.sharedClientState.updateQueryState(n,"rejected",s);const d=f.Au.get(n),y=d&&d.key;if(y){let _=new SortedMap(DocumentKey.comparator);_=_.insert(y,MutableDocument.newNoDocument(y,SnapshotVersion.min()));const A=__PRIVATE_documentKeySet().add(y),R=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),_,A);await __PRIVATE_syncEngineApplyRemoteEvent(f,R),f.Ru=f.Ru.remove(y),f.Au.delete(n),__PRIVATE_pumpEnqueuedLimboResolutions(f)}else await __PRIVATE_localStoreReleaseTarget(f.localStore,n,!1).then((()=>__PRIVATE_removeAndCleanupTarget(f,n,s))).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(u,n){const s=__PRIVATE_debugCast(u),f=n.batch.batchId;try{const d=await __PRIVATE_localStoreAcknowledgeBatch(s.localStore,n);__PRIVATE_processUserCallback(s,f,null),__PRIVATE_triggerPendingWritesCallbacks(s,f),s.sharedClientState.updateMutationState(f,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,d)}catch(d){await __PRIVATE_ignoreIfPrimaryLeaseLoss(d)}}async function __PRIVATE_syncEngineRejectFailedWrite(u,n,s){const f=__PRIVATE_debugCast(u);try{const d=await(function(_,A){const R=__PRIVATE_debugCast(_);return R.persistence.runTransaction("Reject batch","readwrite-primary",(I=>{let G;return R.mutationQueue.lookupMutationBatch(I,A).next((Y=>(__PRIVATE_hardAssert(Y!==null,37113),G=Y.keys(),R.mutationQueue.removeMutationBatch(I,Y)))).next((()=>R.mutationQueue.performConsistencyCheck(I))).next((()=>R.documentOverlayCache.removeOverlaysForBatchId(I,G,A))).next((()=>R.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(I,G))).next((()=>R.localDocuments.getDocuments(I,G)))}))})(f.localStore,n);__PRIVATE_processUserCallback(f,n,s),__PRIVATE_triggerPendingWritesCallbacks(f,n),f.sharedClientState.updateMutationState(n,"rejected",s),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(f,d)}catch(d){await __PRIVATE_ignoreIfPrimaryLeaseLoss(d)}}function __PRIVATE_triggerPendingWritesCallbacks(u,n){(u.mu.get(n)||[]).forEach((s=>{s.resolve()})),u.mu.delete(n)}function __PRIVATE_processUserCallback(u,n,s){const f=__PRIVATE_debugCast(u);let d=f.du[f.currentUser.toKey()];if(d){const y=d.get(n);y&&(s?y.reject(s):y.resolve(),d=d.remove(n)),f.du[f.currentUser.toKey()]=d}}function __PRIVATE_removeAndCleanupTarget(u,n,s=null){u.sharedClientState.removeLocalQueryTarget(n);for(const f of u.Iu.get(n))u.Tu.delete(f),s&&u.Pu.yu(f,s);u.Iu.delete(n),u.isPrimaryClient&&u.Vu.Gr(n).forEach((f=>{u.Vu.containsKey(f)||__PRIVATE_removeLimboTarget(u,f)}))}function __PRIVATE_removeLimboTarget(u,n){u.Eu.delete(n.path.canonicalString());const s=u.Ru.get(n);s!==null&&(__PRIVATE_remoteStoreUnlisten(u.remoteStore,s),u.Ru=u.Ru.remove(n),u.Au.delete(s),__PRIVATE_pumpEnqueuedLimboResolutions(u))}function __PRIVATE_updateTrackedLimbos(u,n,s){for(const f of s)f instanceof __PRIVATE_AddedLimboDocument?(u.Vu.addReference(f.key,n),__PRIVATE_trackLimboChange(u,f)):f instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(Xt,"Document no longer in limbo: "+f.key),u.Vu.removeReference(f.key,n),u.Vu.containsKey(f.key)||__PRIVATE_removeLimboTarget(u,f.key)):fail(19791,{wu:f})}function __PRIVATE_trackLimboChange(u,n){const s=n.key,f=s.path.canonicalString();u.Ru.get(s)||u.Eu.has(f)||(__PRIVATE_logDebug(Xt,"New document in limbo: "+s),u.Eu.add(f),__PRIVATE_pumpEnqueuedLimboResolutions(u))}function __PRIVATE_pumpEnqueuedLimboResolutions(u){for(;u.Eu.size>0&&u.Ru.size<u.maxConcurrentLimboResolutions;){const n=u.Eu.values().next().value;u.Eu.delete(n);const s=new DocumentKey(ResourcePath.fromString(n)),f=u.fu.next();u.Au.set(f,new LimboResolution(s)),u.Ru=u.Ru.insert(s,f),__PRIVATE_remoteStoreListen(u.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(s.path)),f,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.ce))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(u,n,s){const f=__PRIVATE_debugCast(u),d=[],y=[],_=[];f.Tu.isEmpty()||(f.Tu.forEach(((A,R)=>{_.push(f.pu(R,n,s).then((I=>{var G;if((I||s)&&f.isPrimaryClient){const Y=I?!I.fromCache:(G=s==null?void 0:s.targetChanges.get(R.targetId))==null?void 0:G.current;f.sharedClientState.updateQueryState(R.targetId,Y?"current":"not-current")}if(I){d.push(I);const Y=__PRIVATE_LocalViewChanges.Es(R.targetId,I);y.push(Y)}})))})),await Promise.all(_),f.Pu.J_(d),await(async function(R,I){const G=__PRIVATE_debugCast(R);try{await G.persistence.runTransaction("notifyLocalViewChanges","readwrite",(Y=>PersistencePromise.forEach(I,(q=>PersistencePromise.forEach(q.Ts,(K=>G.persistence.referenceDelegate.addReference(Y,q.targetId,K))).next((()=>PersistencePromise.forEach(q.Is,(K=>G.persistence.referenceDelegate.removeReference(Y,q.targetId,K)))))))))}catch(Y){if(!__PRIVATE_isIndexedDbTransactionError(Y))throw Y;__PRIVATE_logDebug(Bt,"Failed to update sequence numbers: "+Y)}for(const Y of I){const q=Y.targetId;if(!Y.fromCache){const K=G.vs.get(q),Q=K.snapshotVersion,ne=K.withLastLimboFreeSnapshotVersion(Q);G.vs=G.vs.insert(q,ne)}}})(f.localStore,y))}async function __PRIVATE_syncEngineHandleCredentialChange(u,n){const s=__PRIVATE_debugCast(u);if(!s.currentUser.isEqual(n)){__PRIVATE_logDebug(Xt,"User change. New user:",n.toKey());const f=await __PRIVATE_localStoreHandleUserChange(s.localStore,n);s.currentUser=n,(function(y,_){y.mu.forEach((A=>{A.forEach((R=>{R.reject(new FirestoreError(C.CANCELLED,_))}))})),y.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(n,f.removedBatchIds,f.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,f.Ns)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(u,n){const s=__PRIVATE_debugCast(u),f=s.Au.get(n);if(f&&f.hu)return __PRIVATE_documentKeySet().add(f.key);{let d=__PRIVATE_documentKeySet();const y=s.Iu.get(n);if(!y)return d;for(const _ of y){const A=s.Tu.get(_);d=d.unionWith(A.view.nu)}return d}}function __PRIVATE_ensureWatchCallbacks(u){const n=__PRIVATE_debugCast(u);return n.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,n),n.Pu.J_=__PRIVATE_eventManagerOnWatchChange.bind(null,n.eventManager),n.Pu.yu=__PRIVATE_eventManagerOnWatchError.bind(null,n.eventManager),n}function __PRIVATE_syncEngineEnsureWriteCallbacks(u){const n=__PRIVATE_debugCast(u);return n.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,n),n}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=__PRIVATE_newSerializer(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,s){return null}Mu(n,s){return null}vu(n){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,n.initialUser,this.serializer)}Cu(n){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.Vi,this.serializer)}Du(n){return new __PRIVATE_MemorySharedClientState}async terminate(){var n,s;(n=this.gcScheduler)==null||n.stop(),(s=this.indexBackfillerScheduler)==null||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(n){super(),this.cacheSizeBytes=n}Fu(n,s){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const f=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(f,n.asyncQueue,s)}Cu(n){const s=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence((f=>__PRIVATE_MemoryLruDelegate.Vi(f,s)),this.serializer)}}class OnlineComponentProvider{async initialize(n,s){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=f=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,f,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new __PRIVATE_EventManagerImpl})()}createDatastore(n){const s=__PRIVATE_newSerializer(n.databaseInfo.databaseId),f=__PRIVATE_newConnection(n.databaseInfo);return __PRIVATE_newDatastore(n.authCredentials,n.appCheckCredentials,f,s)}createRemoteStore(n){return(function(f,d,y,_,A){return new __PRIVATE_RemoteStoreImpl(f,d,y,_,A)})(this.localStore,this.datastore,n.asyncQueue,(s=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,s,0)),(function(){return __PRIVATE_BrowserConnectivityMonitor.v()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor})())}createSyncEngine(n,s){return(function(d,y,_,A,R,I,G){const Y=new __PRIVATE_SyncEngineImpl(d,y,_,A,R,I);return G&&(Y.gu=!0),Y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,s)}async terminate(){var n,s;await(async function(d){const y=__PRIVATE_debugCast(d);__PRIVATE_logDebug(Ht$1,"RemoteStore shutting down."),y.Ea.add(5),await __PRIVATE_disableNetworkInternal(y),y.Aa.shutdown(),y.Va.set("Unknown")})(this.remoteStore),(n=this.datastore)==null||n.terminate(),(s=this.eventManager)==null||s.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(n){this.observer=n,this.muted=!1}next(n){this.muted||this.observer.next&&this.Ou(this.observer.next,n)}error(n){this.muted||(this.observer.error?this.Ou(this.observer.error,n):__PRIVATE_logError("Uncaught Error in snapshot listener:",n.toString()))}Nu(){this.muted=!0}Ou(n,s){setTimeout((()=>{this.muted||n(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="FirestoreClient";class FirestoreClient{constructor(n,s,f,d,y){this.authCredentials=n,this.appCheckCredentials=s,this.asyncQueue=f,this._databaseInfo=d,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=y,this.authCredentials.start(f,(async _=>{__PRIVATE_logDebug(Yt,"Received user=",_.uid),await this.authCredentialListener(_),this.user=_})),this.appCheckCredentials.start(f,(_=>(__PRIVATE_logDebug(Yt,"Received new app check token=",_),this.appCheckCredentialListener(_,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(n){this.authCredentialListener=n}setAppCheckTokenChangeListener(n){this.appCheckCredentialListener=n}terminate(){this.asyncQueue.enterRestrictedMode();const n=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),n.resolve()}catch(s){const f=__PRIVATE_wrapInUserErrorIfRecoverable(s,"Failed to shutdown persistence");n.reject(f)}})),n.promise}}async function __PRIVATE_setOfflineComponentProvider(u,n){u.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(Yt,"Initializing OfflineComponentProvider");const s=u.configuration;await n.initialize(s);let f=s.initialUser;u.setCredentialChangeListener((async d=>{f.isEqual(d)||(await __PRIVATE_localStoreHandleUserChange(n.localStore,d),f=d)})),n.persistence.setDatabaseDeletedListener((()=>u.terminate())),u._offlineComponents=n}async function __PRIVATE_setOnlineComponentProvider(u,n){u.asyncQueue.verifyOperationInProgress();const s=await __PRIVATE_ensureOfflineComponents(u);__PRIVATE_logDebug(Yt,"Initializing OnlineComponentProvider"),await n.initialize(s,u.configuration),u.setCredentialChangeListener((f=>__PRIVATE_remoteStoreHandleCredentialChange(n.remoteStore,f))),u.setAppCheckTokenChangeListener(((f,d)=>__PRIVATE_remoteStoreHandleCredentialChange(n.remoteStore,d))),u._onlineComponents=n}async function __PRIVATE_ensureOfflineComponents(u){if(!u._offlineComponents)if(u._uninitializedComponentsProvider){__PRIVATE_logDebug(Yt,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(u,u._uninitializedComponentsProvider._offline)}catch(n){const s=n;if(!(function(d){return d.name==="FirebaseError"?d.code===C.FAILED_PRECONDITION||d.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||d.code===22||d.code===20||d.code===11})(s))throw s;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+s),await __PRIVATE_setOfflineComponentProvider(u,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(Yt,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(u,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return u._offlineComponents}async function __PRIVATE_ensureOnlineComponents(u){return u._onlineComponents||(u._uninitializedComponentsProvider?(__PRIVATE_logDebug(Yt,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(u,u._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(Yt,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(u,new OnlineComponentProvider))),u._onlineComponents}function __PRIVATE_getSyncEngine(u){return __PRIVATE_ensureOnlineComponents(u).then((n=>n.syncEngine))}async function __PRIVATE_getEventManager(u){const n=await __PRIVATE_ensureOnlineComponents(u),s=n.eventManager;return s.onListen=__PRIVATE_syncEngineListen.bind(null,n.syncEngine),s.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,n.syncEngine),s.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,n.syncEngine),s.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,n.syncEngine),s}function __PRIVATE_firestoreClientListen(u,n,s,f){const d=new __PRIVATE_AsyncObserver(f),y=new __PRIVATE_QueryListener(n,d,s);return u.asyncQueue.enqueueAndForget((async()=>__PRIVATE_eventManagerListen(await __PRIVATE_getEventManager(u),y))),()=>{d.Nu(),u.asyncQueue.enqueueAndForget((async()=>__PRIVATE_eventManagerUnlisten(await __PRIVATE_getEventManager(u),y)))}}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(u,n,s={}){const f=new __PRIVATE_Deferred;return u.asyncQueue.enqueueAndForget((async()=>(function(y,_,A,R,I){const G=new __PRIVATE_AsyncObserver({next:q=>{G.Nu(),_.enqueueAndForget((()=>__PRIVATE_eventManagerUnlisten(y,Y)));const K=q.docs.has(A);!K&&q.fromCache?I.reject(new FirestoreError(C.UNAVAILABLE,"Failed to get document because the client is offline.")):K&&q.fromCache&&R&&R.source==="server"?I.reject(new FirestoreError(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):I.resolve(q)},error:q=>I.reject(q)}),Y=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(A.path),G,{includeMetadataChanges:!0,Ka:!0});return __PRIVATE_eventManagerListen(y,Y)})(await __PRIVATE_getEventManager(u),u.asyncQueue,n,s,f))),f.promise}function __PRIVATE_firestoreClientWrite(u,n){const s=new __PRIVATE_Deferred;return u.asyncQueue.enqueueAndForget((async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(u),n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(u){const n={};return u.timeoutSeconds!==void 0&&(n.timeoutSeconds=u.timeoutSeconds),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="ComponentProvider",tn=new Map;function __PRIVATE_makeDatabaseInfo(u,n,s,f,d){return new DatabaseInfo(u,n,s,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator,f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="firestore.googleapis.com",rn=!0;class FirestoreSettingsImpl{constructor(n){if(n.host===void 0){if(n.ssl!==void 0)throw new FirestoreError(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nn,this.ssl=rn}else this.host=n.host,this.ssl=n.ssl??rn;if(this.isUsingEmulator=n.emulatorOptions!==void 0,this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,this.localCache=n.localCache,n.cacheSizeBytes===void 0)this.cacheSizeBytes=Dt;else{if(n.cacheSizeBytes!==-1&&n.cacheSizeBytes<vt)throw new FirestoreError(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:n.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions(n.experimentalLongPollingOptions??{}),(function(f){if(f.timeoutSeconds!==void 0){if(isNaN(f.timeoutSeconds))throw new FirestoreError(C.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (must not be NaN)`);if(f.timeoutSeconds<5)throw new FirestoreError(C.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (minimum allowed value is 5)`);if(f.timeoutSeconds>30)throw new FirestoreError(C.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!n.useFetchStreams}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&(function(f,d){return f.timeoutSeconds===d.timeoutSeconds})(this.experimentalLongPollingOptions,n.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class Firestore$1{constructor(n,s,f,d){this._authCredentials=n,this._appCheckCredentials=s,this._databaseId=f,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(n){if(this._settingsFrozen)throw new FirestoreError(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(n),this._emulatorOptions=n.emulatorOptions||{},n.credentials!==void 0&&(this._authCredentials=(function(f){if(!f)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(f.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(f.sessionIndex||"0",f.iamToken||null,f.authTokenFactory||null);case"provider":return f.client;default:throw new FirestoreError(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(n.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const f=tn.get(s);f&&(__PRIVATE_logDebug(en,"Removing Datastore"),tn.delete(s),f.terminate())})(this),Promise.resolve()}}function connectFirestoreEmulator(u,n,s,f={}){var I;u=__PRIVATE_cast(u,Firestore$1);const d=isCloudWorkstation(n),y=u._getSettings(),_={...y,emulatorOptions:u._getEmulatorOptions()},A=`${n}:${s}`;d&&(pingServer(`https://${A}`),updateEmulatorBanner("Firestore",!0)),y.host!==nn&&y.host!==A&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const R={...y,host:A,ssl:d,emulatorOptions:f};if(!deepEqual(R,_)&&(u._setSettings(R),f.mockUserToken)){let G,Y;if(typeof f.mockUserToken=="string")G=f.mockUserToken,Y=User.MOCK_USER;else{G=createMockUserToken(f.mockUserToken,(I=u._app)==null?void 0:I.options.projectId);const q=f.mockUserToken.sub||f.mockUserToken.user_id;if(!q)throw new FirestoreError(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");Y=new User(q)}u._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(G,Y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(n,s,f){this.converter=s,this._query=f,this.type="query",this.firestore=n}withConverter(n){return new Query(this.firestore,n,this._query)}}class DocumentReference{constructor(n,s,f){this.converter=s,this._key=f,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new DocumentReference(this.firestore,n,this._key)}toJSON(){return{type:DocumentReference._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(n,s,f){if(__PRIVATE_validateJSON(s,DocumentReference._jsonSchema))return new DocumentReference(n,f||null,new DocumentKey(ResourcePath.fromString(s.referencePath)))}}DocumentReference._jsonSchemaVersion="firestore/documentReference/1.0",DocumentReference._jsonSchema={type:property("string",DocumentReference._jsonSchemaVersion),referencePath:property("string")};class CollectionReference extends Query{constructor(n,s,f){super(n,s,__PRIVATE_newQueryForPath(f)),this._path=f,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(n))}withConverter(n){return new CollectionReference(this.firestore,n,this._path)}}function collection(u,n,...s){if(u=getModularInstance(u),__PRIVATE_validateNonEmptyArgument("collection","path",n),u instanceof Firestore$1){const f=ResourcePath.fromString(n,...s);return __PRIVATE_validateCollectionPath(f),new CollectionReference(u,null,f)}{if(!(u instanceof DocumentReference||u instanceof CollectionReference))throw new FirestoreError(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const f=u._path.child(ResourcePath.fromString(n,...s));return __PRIVATE_validateCollectionPath(f),new CollectionReference(u.firestore,null,f)}}function doc(u,n,...s){if(u=getModularInstance(u),arguments.length===1&&(n=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",n),u instanceof Firestore$1){const f=ResourcePath.fromString(n,...s);return __PRIVATE_validateDocumentPath(f),new DocumentReference(u,null,new DocumentKey(f))}{if(!(u instanceof DocumentReference||u instanceof CollectionReference))throw new FirestoreError(C.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const f=u._path.child(ResourcePath.fromString(n,...s));return __PRIVATE_validateDocumentPath(f),new DocumentReference(u.firestore,u instanceof CollectionReference?u.converter:null,new DocumentKey(f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(n=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this._c=()=>{const f=getDocument();f&&__PRIVATE_logDebug(sn,"Visibility state changed to "+f.visibilityState),this.M_.w_()},this.ac=n;const s=getDocument();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.uc(),this.cc(n)}enterRestrictedMode(n){if(!this.ec){this.ec=!0,this.sc=n||!1;const s=getDocument();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(n){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new __PRIVATE_Deferred;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(n().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(n){this.enqueueAndForget((()=>(this.Yu.push(n),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(n){if(!__PRIVATE_isIndexedDbTransactionError(n))throw n;__PRIVATE_logDebug(sn,"Operation failed with retryable error: "+n)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(n){const s=this.ac.then((()=>(this.rc=!0,n().catch((f=>{throw this.nc=f,this.rc=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(f)),f})).then((f=>(this.rc=!1,f))))));return this.ac=s,s}enqueueAfterDelay(n,s,f){this.uc(),this.oc.indexOf(n)>-1&&(s=0);const d=DelayedOperation.createAndSchedule(this,n,s,f,(y=>this.hc(y)));return this.tc.push(d),d}uc(){this.nc&&fail(47125,{Pc:__PRIVATE_getMessageOrStack(this.nc)})}verifyOperationInProgress(){}async Tc(){let n;do n=this.ac,await n;while(n!==this.ac)}Ic(n){for(const s of this.tc)if(s.timerId===n)return!0;return!1}Ec(n){return this.Tc().then((()=>{this.tc.sort(((s,f)=>s.targetTimeMs-f.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),n!=="all"&&s.timerId===n)break;return this.Tc()}))}Rc(n){this.oc.push(n)}hc(n){const s=this.tc.indexOf(n);this.tc.splice(s,1)}}function __PRIVATE_getMessageOrStack(u){let n=u.message||"";return u.stack&&(n=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),n}class Firestore extends Firestore$1{constructor(n,s,f,d){super(n,s,f,d),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=(d==null?void 0:d.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const n=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(n),this._firestoreClient=void 0,await n}}}function getFirestore(u,n){const s=typeof u=="object"?u:getApp(),f=typeof u=="string"?u:st,d=_getProvider(s,"firestore").getImmediate({identifier:f});if(!d._initialized){const y=getDefaultEmulatorHostnameAndPort("firestore");y&&connectFirestoreEmulator(d,...y)}return d}function ensureFirestoreConfigured(u){if(u._terminated)throw new FirestoreError(C.FAILED_PRECONDITION,"The client has already been terminated.");return u._firestoreClient||__PRIVATE_configureFirestore(u),u._firestoreClient}function __PRIVATE_configureFirestore(u){var f,d,y,_;const n=u._freezeSettings(),s=__PRIVATE_makeDatabaseInfo(u._databaseId,((f=u._app)==null?void 0:f.options.appId)||"",u._persistenceKey,(d=u._app)==null?void 0:d.options.apiKey,n);u._componentsProvider||(y=n.localCache)!=null&&y._offlineComponentProvider&&((_=n.localCache)!=null&&_._onlineComponentProvider)&&(u._componentsProvider={_offline:n.localCache._offlineComponentProvider,_online:n.localCache._onlineComponentProvider}),u._firestoreClient=new FirestoreClient(u._authCredentials,u._appCheckCredentials,u._queue,s,u._componentsProvider&&(function(R){const I=R==null?void 0:R._online.build();return{_offline:R==null?void 0:R._offline.build(I),_online:I}})(u._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(n){this._byteString=n}static fromBase64String(n){try{return new Bytes(ByteString.fromBase64String(n))}catch(s){throw new FirestoreError(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(n){return new Bytes(ByteString.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}toJSON(){return{type:Bytes._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(n){if(__PRIVATE_validateJSON(n,Bytes._jsonSchema))return Bytes.fromBase64String(n.bytes)}}Bytes._jsonSchemaVersion="firestore/bytes/1.0",Bytes._jsonSchema={type:property("string",Bytes._jsonSchemaVersion),bytes:property("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...n){for(let s=0;s<n.length;++s)if(n[s].length===0)throw new FirestoreError(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(n){this._methodName=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(n,s){if(!isFinite(n)||n<-90||n>90)throw new FirestoreError(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(s)||s<-180||s>180)throw new FirestoreError(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=n,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}_compareTo(n){return __PRIVATE_primitiveComparator(this._lat,n._lat)||__PRIVATE_primitiveComparator(this._long,n._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:GeoPoint._jsonSchemaVersion}}static fromJSON(n){if(__PRIVATE_validateJSON(n,GeoPoint._jsonSchema))return new GeoPoint(n.latitude,n.longitude)}}GeoPoint._jsonSchemaVersion="firestore/geoPoint/1.0",GeoPoint._jsonSchema={type:property("string",GeoPoint._jsonSchemaVersion),latitude:property("number"),longitude:property("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(n){this._values=(n||[]).map((s=>s))}toArray(){return this._values.map((n=>n))}isEqual(n){return(function(f,d){if(f.length!==d.length)return!1;for(let y=0;y<f.length;++y)if(f[y]!==d[y])return!1;return!0})(this._values,n._values)}toJSON(){return{type:VectorValue._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(n){if(__PRIVATE_validateJSON(n,VectorValue._jsonSchema)){if(Array.isArray(n.vectorValues)&&n.vectorValues.every((s=>typeof s=="number")))return new VectorValue(n.vectorValues);throw new FirestoreError(C.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}VectorValue._jsonSchemaVersion="firestore/vectorValue/1.0",VectorValue._jsonSchema={type:property("string",VectorValue._jsonSchemaVersion),vectorValues:property("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=/^__.*__$/;class ParsedSetData{constructor(n,s,f){this.data=n,this.fieldMask=s,this.fieldTransforms=f}toMutation(n,s){return this.fieldMask!==null?new __PRIVATE_PatchMutation(n,this.data,this.fieldMask,s,this.fieldTransforms):new __PRIVATE_SetMutation(n,this.data,s,this.fieldTransforms)}}class ParsedUpdateData{constructor(n,s,f){this.data=n,this.fieldMask=s,this.fieldTransforms=f}toMutation(n,s){return new __PRIVATE_PatchMutation(n,this.data,this.fieldMask,s,this.fieldTransforms)}}function __PRIVATE_isWrite(u){switch(u){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{dataSource:u})}}class ParseContextImpl{constructor(n,s,f,d,y,_){this.settings=n,this.databaseId=s,this.serializer=f,this.ignoreUndefinedProperties=d,y===void 0&&this.validatePath(),this.fieldTransforms=y||[],this.fieldMask=_||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(n){return new ParseContextImpl({...this.settings,...n},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(n){var d;const s=(d=this.path)==null?void 0:d.child(n),f=this.contextWith({path:s,arrayElement:!1});return f.validatePathSegment(n),f}childContextForFieldPath(n){var d;const s=(d=this.path)==null?void 0:d.child(n),f=this.contextWith({path:s,arrayElement:!1});return f.validatePath(),f}childContextForArray(n){return this.contextWith({path:void 0,arrayElement:!0})}createError(n){return createError(n,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(n){return this.fieldMask.find((s=>n.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>n.isPrefixOf(s.field)))!==void 0}validatePath(){if(this.path)for(let n=0;n<this.path.length;n++)this.validatePathSegment(this.path.get(n))}validatePathSegment(n){if(n.length===0)throw this.createError("Document fields must not be empty");if(__PRIVATE_isWrite(this.dataSource)&&_n.test(n))throw this.createError('Document fields cannot begin and end with "__"')}}class UserDataReader{constructor(n,s,f){this.databaseId=n,this.ignoreUndefinedProperties=s,this.serializer=f||__PRIVATE_newSerializer(n)}createContext(n,s,f,d=!1){return new ParseContextImpl({dataSource:n,methodName:s,targetDoc:f,path:FieldPath$1.emptyPath(),arrayElement:!1,hasConverter:d},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(u){const n=u._freezeSettings(),s=__PRIVATE_newSerializer(u._databaseId);return new UserDataReader(u._databaseId,!!n.ignoreUndefinedProperties,s)}function __PRIVATE_parseSetData(u,n,s,f,d,y={}){const _=u.createContext(y.merge||y.mergeFields?2:0,n,s,d);__PRIVATE_validatePlainObject("Data must be an object, but it was:",_,f);const A=__PRIVATE_parseObject(f,_);let R,I;if(y.merge)R=new FieldMask(_.fieldMask),I=_.fieldTransforms;else if(y.mergeFields){const G=[];for(const Y of y.mergeFields){const q=__PRIVATE_fieldPathFromArgument(n,Y,s);if(!_.contains(q))throw new FirestoreError(C.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(G,q)||G.push(q)}R=new FieldMask(G),I=_.fieldTransforms.filter((Y=>R.covers(Y.field)))}else R=null,I=_.fieldTransforms;return new ParsedSetData(new ObjectValue(A),R,I)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(n){if(n.dataSource!==2)throw n.dataSource===1?n.createError(`${this._methodName}() can only appear at the top level of your update data`):n.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof __PRIVATE_DeleteFieldValueImpl}}function __PRIVATE_parseUpdateData(u,n,s,f){const d=u.createContext(1,n,s);__PRIVATE_validatePlainObject("Data must be an object, but it was:",d,f);const y=[],_=ObjectValue.empty();forEach(f,((R,I)=>{const G=__PRIVATE_fieldPathFromDotSeparatedString(n,R,s);I=getModularInstance(I);const Y=d.childContextForFieldPath(G);if(I instanceof __PRIVATE_DeleteFieldValueImpl)y.push(G);else{const q=__PRIVATE_parseData(I,Y);q!=null&&(y.push(G),_.set(G,q))}}));const A=new FieldMask(y);return new ParsedUpdateData(_,A,d.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(u,n,s,f,d,y){const _=u.createContext(1,n,s),A=[__PRIVATE_fieldPathFromArgument(n,f,s)],R=[d];if(y.length%2!=0)throw new FirestoreError(C.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<y.length;q+=2)A.push(__PRIVATE_fieldPathFromArgument(n,y[q])),R.push(y[q+1]);const I=[],G=ObjectValue.empty();for(let q=A.length-1;q>=0;--q)if(!__PRIVATE_fieldMaskContains(I,A[q])){const K=A[q];let Q=R[q];Q=getModularInstance(Q);const ne=_.childContextForFieldPath(K);if(Q instanceof __PRIVATE_DeleteFieldValueImpl)I.push(K);else{const te=__PRIVATE_parseData(Q,ne);te!=null&&(I.push(K),G.set(K,te))}}const Y=new FieldMask(I);return new ParsedUpdateData(G,Y,_.fieldTransforms)}function __PRIVATE_parseQueryValue(u,n,s,f=!1){return __PRIVATE_parseData(s,u.createContext(f?4:3,n))}function __PRIVATE_parseData(u,n){if(__PRIVATE_looksLikeJsonObject(u=getModularInstance(u)))return __PRIVATE_validatePlainObject("Unsupported field value:",n,u),__PRIVATE_parseObject(u,n);if(u instanceof FieldValue)return(function(f,d){if(!__PRIVATE_isWrite(d.dataSource))throw d.createError(`${f._methodName}() can only be used with update() and set()`);if(!d.path)throw d.createError(`${f._methodName}() is not currently supported inside arrays`);const y=f._toFieldTransform(d);y&&d.fieldTransforms.push(y)})(u,n),null;if(u===void 0&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),u instanceof Array){if(n.settings.arrayElement&&n.dataSource!==4)throw n.createError("Nested arrays are not supported");return(function(f,d){const y=[];let _=0;for(const A of f){let R=__PRIVATE_parseData(A,d.childContextForArray(_));R==null&&(R={nullValue:"NULL_VALUE"}),y.push(R),_++}return{arrayValue:{values:y}}})(u,n)}return(function(f,d){if((f=getModularInstance(f))===null)return{nullValue:"NULL_VALUE"};if(typeof f=="number")return toNumber(d.serializer,f);if(typeof f=="boolean")return{booleanValue:f};if(typeof f=="string")return{stringValue:f};if(f instanceof Date){const y=Timestamp.fromDate(f);return{timestampValue:toTimestamp(d.serializer,y)}}if(f instanceof Timestamp){const y=new Timestamp(f.seconds,1e3*Math.floor(f.nanoseconds/1e3));return{timestampValue:toTimestamp(d.serializer,y)}}if(f instanceof GeoPoint)return{geoPointValue:{latitude:f.latitude,longitude:f.longitude}};if(f instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(d.serializer,f._byteString)};if(f instanceof DocumentReference){const y=d.databaseId,_=f.firestore._databaseId;if(!_.isEqual(y))throw d.createError(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${y.projectId}/${y.database}`);return{referenceValue:__PRIVATE_toResourceName(f.firestore._databaseId||d.databaseId,f._key.path)}}if(f instanceof VectorValue)return(function(_,A){const R=_ instanceof VectorValue?_.toArray():_;return{mapValue:{fields:{[ot]:{stringValue:ut},[ct]:{arrayValue:{values:R.map((G=>{if(typeof G!="number")throw A.createError("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(A.serializer,G)}))}}}}}})(f,d);if(__PRIVATE_isProtoValueSerializable(f))return f._toProto(d.serializer);throw d.createError(`Unsupported field value: ${__PRIVATE_valueDescription(f)}`)})(u,n)}function __PRIVATE_parseObject(u,n){const s={};return isEmpty(u)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):forEach(u,((f,d)=>{const y=__PRIVATE_parseData(d,n.childContextForField(f));y!=null&&(s[f]=y)})),{mapValue:{fields:s}}}function __PRIVATE_looksLikeJsonObject(u){return!(typeof u!="object"||u===null||u instanceof Array||u instanceof Date||u instanceof Timestamp||u instanceof GeoPoint||u instanceof Bytes||u instanceof DocumentReference||u instanceof FieldValue||u instanceof VectorValue||__PRIVATE_isProtoValueSerializable(u))}function __PRIVATE_validatePlainObject(u,n,s){if(!__PRIVATE_looksLikeJsonObject(s)||!__PRIVATE_isPlainObject(s)){const f=__PRIVATE_valueDescription(s);throw f==="an object"?n.createError(u+" a custom object"):n.createError(u+" "+f)}}function __PRIVATE_fieldPathFromArgument(u,n,s){if((n=getModularInstance(n))instanceof FieldPath)return n._internalPath;if(typeof n=="string")return __PRIVATE_fieldPathFromDotSeparatedString(u,n);throw createError("Field path arguments must be of type string or ",u,!1,void 0,s)}const an=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(u,n,s){if(n.search(an)>=0)throw createError(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,u,!1,void 0,s);try{return new FieldPath(...n.split("."))._internalPath}catch{throw createError(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,u,!1,void 0,s)}}function createError(u,n,s,f,d){const y=f&&!f.isEmpty(),_=d!==void 0;let A=`Function ${n}() called with invalid data`;s&&(A+=" (via `toFirestore()`)"),A+=". ";let R="";return(y||_)&&(R+=" (found",y&&(R+=` in field ${f}`),_&&(R+=` in document ${d}`),R+=")"),new FirestoreError(C.INVALID_ARGUMENT,A+u+R)}function __PRIVATE_fieldMaskContains(u,n){return u.some((s=>s.isEqual(n)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractUserDataWriter{convertValue(n,s="none"){switch(__PRIVATE_typeOrder(n)){case 0:return null;case 1:return n.booleanValue;case 2:return __PRIVATE_normalizeNumber(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,s);case 5:return n.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,s);case 11:return this.convertObject(n.mapValue,s);case 10:return this.convertVectorValue(n.mapValue);default:throw fail(62114,{value:n})}}convertObject(n,s){return this.convertObjectMap(n.fields,s)}convertObjectMap(n,s="none"){const f={};return forEach(n,((d,y)=>{f[d]=this.convertValue(y,s)})),f}convertVectorValue(n){var f,d,y;const s=(y=(d=(f=n.fields)==null?void 0:f[ct].arrayValue)==null?void 0:d.values)==null?void 0:y.map((_=>__PRIVATE_normalizeNumber(_.doubleValue)));return new VectorValue(s)}convertGeoPoint(n){return new GeoPoint(__PRIVATE_normalizeNumber(n.latitude),__PRIVATE_normalizeNumber(n.longitude))}convertArray(n,s){return(n.values||[]).map((f=>this.convertValue(f,s)))}convertServerTimestamp(n,s){switch(s){case"previous":const f=__PRIVATE_getPreviousValue(n);return f==null?null:this.convertValue(f,s);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(n));default:return null}}convertTimestamp(n){const s=__PRIVATE_normalizeTimestamp(n);return new Timestamp(s.seconds,s.nanos)}convertDocumentKey(n,s){const f=ResourcePath.fromString(n);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(f),9688,{name:n});const d=new DatabaseId(f.get(1),f.get(3)),y=new DocumentKey(f.popFirst(5));return d.isEqual(s)||__PRIVATE_logError(`Document ${y} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),y}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(n){super(),this.firestore=n}convertBytes(n){return new Bytes(n)}convertReference(n){const s=this.convertDocumentKey(n,this.firestore._databaseId);return new DocumentReference(this.firestore,null,s)}}const Ut="@firebase/firestore",Ht="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isPartialObserver(u){return(function(s,f){if(typeof s!="object"||s===null)return!1;const d=s;for(const y of f)if(y in d&&typeof d[y]=="function")return!0;return!1})(u,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(n,s,f,d,y){this._firestore=n,this._userDataWriter=s,this._key=f,this._document=d,this._converter=y}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const n=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var n;return((n=this._document)==null?void 0:n.data.clone().value.mapValue.fields)??void 0}get(n){if(this._document){const s=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",n));if(s!==null)return this._userDataWriter.convertValue(s)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(u){if(u.limitType==="L"&&u.explicitOrderBy.length===0)throw new FirestoreError(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query$1(u,n,...s){let f=[];n instanceof AppliableConstraint&&f.push(n),f=f.concat(s),(function(y){const _=y.filter((R=>R instanceof QueryCompositeFilterConstraint)).length,A=y.filter((R=>R instanceof QueryFieldFilterConstraint)).length;if(_>1||_>0&&A>0)throw new FirestoreError(C.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(f);for(const d of f)u=d._apply(u);return u}class QueryFieldFilterConstraint extends QueryConstraint{constructor(n,s,f){super(),this._field=n,this._op=s,this._value=f,this.type="where"}static _create(n,s,f){return new QueryFieldFilterConstraint(n,s,f)}_apply(n){const s=this._parse(n);return __PRIVATE_validateNewFieldFilter(n._query,s),new Query(n.firestore,n.converter,__PRIVATE_queryWithAddedFilter(n._query,s))}_parse(n){const s=__PRIVATE_newUserDataReader(n.firestore);return(function(y,_,A,R,I,G,Y){let q;if(I.isKeyField()){if(G==="array-contains"||G==="array-contains-any")throw new FirestoreError(C.INVALID_ARGUMENT,`Invalid Query. You can't perform '${G}' queries on documentId().`);if(G==="in"||G==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(Y,G);const Q=[];for(const ne of Y)Q.push(__PRIVATE_parseDocumentIdValue(R,y,ne));q={arrayValue:{values:Q}}}else q=__PRIVATE_parseDocumentIdValue(R,y,Y)}else G!=="in"&&G!=="not-in"&&G!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(Y,G),q=__PRIVATE_parseQueryValue(A,_,Y,G==="in"||G==="not-in");return FieldFilter.create(I,G,q)})(n._query,"where",s,n.firestore._databaseId,this._field,this._op,this._value)}}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(n,s){super(),this.type=n,this._queryConstraints=s}static _create(n,s){return new QueryCompositeFilterConstraint(n,s)}_parse(n){const s=this._queryConstraints.map((f=>f._parse(n))).filter((f=>f.getFilters().length>0));return s.length===1?s[0]:CompositeFilter.create(s,this._getOperator())}_apply(n){const s=this._parse(n);return s.getFilters().length===0?n:((function(d,y){let _=d;const A=y.getFlattenedFilters();for(const R of A)__PRIVATE_validateNewFieldFilter(_,R),_=__PRIVATE_queryWithAddedFilter(_,R)})(n._query,s),new Query(n.firestore,n.converter,__PRIVATE_queryWithAddedFilter(n._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(n,s){super(),this._field=n,this._direction=s,this.type="orderBy"}static _create(n,s){return new QueryOrderByConstraint(n,s)}_apply(n){const s=(function(d,y,_){if(d.startAt!==null)throw new FirestoreError(C.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(d.endAt!==null)throw new FirestoreError(C.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(y,_)})(n._query,this._field,this._direction);return new Query(n.firestore,n.converter,__PRIVATE_queryWithAddedOrderBy(n._query,s))}}function orderBy(u,n="asc"){const s=n,f=__PRIVATE_fieldPathFromArgument("orderBy",u);return QueryOrderByConstraint._create(f,s)}function __PRIVATE_parseDocumentIdValue(u,n,s){if(typeof(s=getModularInstance(s))=="string"){if(s==="")throw new FirestoreError(C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(n)&&s.indexOf("/")!==-1)throw new FirestoreError(C.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const f=n.path.child(ResourcePath.fromString(s));if(!DocumentKey.isDocumentKey(f))throw new FirestoreError(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${f}' is not because it has an odd number of segments (${f.length}).`);return __PRIVATE_refValue(u,new DocumentKey(f))}if(s instanceof DocumentReference)return __PRIVATE_refValue(u,s._key);throw new FirestoreError(C.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(s)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(u,n){if(!Array.isArray(u)||u.length===0)throw new FirestoreError(C.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(u,n){const s=(function(d,y){for(const _ of d)for(const A of _.getFlattenedFilters())if(y.indexOf(A.op)>=0)return A.op;return null})(u.filters,(function(d){switch(d){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(n.op));if(s!==null)throw s===n.op?new FirestoreError(C.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${n.op.toString()}' filter.`):new FirestoreError(C.INVALID_ARGUMENT,`Invalid query. You cannot use '${n.op.toString()}' filters with '${s.toString()}' filters.`)}function __PRIVATE_applyFirestoreDataConverter(u,n,s){let f;return f=u?u.toFirestore(n):n,f}class SnapshotMetadata{constructor(n,s){this.hasPendingWrites=n,this.fromCache=s}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(n,s,f,d,y,_){super(n,s,f,d,_),this._firestore=n,this._firestoreImpl=n,this.metadata=y}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const s=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,s={}){if(this._document){const f=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",n));if(f!==null)return this._userDataWriter.convertValue(f,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(C.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const n=this._document,s={};return s.type=DocumentSnapshot._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!n||!n.isValidDocument()||!n.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(n.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}DocumentSnapshot._jsonSchemaVersion="firestore/documentSnapshot/1.0",DocumentSnapshot._jsonSchema={type:property("string",DocumentSnapshot._jsonSchemaVersion),bundleSource:property("string","DocumentSnapshot"),bundleName:property("string"),bundle:property("string")};class QueryDocumentSnapshot extends DocumentSnapshot{data(n={}){return super.data(n)}}class QuerySnapshot{constructor(n,s,f,d){this._firestore=n,this._userDataWriter=s,this._snapshot=d,this.metadata=new SnapshotMetadata(d.hasPendingWrites,d.fromCache),this.query=f}get docs(){const n=[];return this.forEach((s=>n.push(s))),n}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(n,s){this._snapshot.docs.forEach((f=>{n.call(s,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,f.key,f,new SnapshotMetadata(this._snapshot.mutatedKeys.has(f.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(n={}){const s=!!n.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(d,y){if(d._snapshot.oldDocs.isEmpty()){let _=0;return d._snapshot.docChanges.map((A=>{const R=new QueryDocumentSnapshot(d._firestore,d._userDataWriter,A.doc.key,A.doc,new SnapshotMetadata(d._snapshot.mutatedKeys.has(A.doc.key),d._snapshot.fromCache),d.query.converter);return A.doc,{type:"added",doc:R,oldIndex:-1,newIndex:_++}}))}{let _=d._snapshot.oldDocs;return d._snapshot.docChanges.filter((A=>y||A.type!==3)).map((A=>{const R=new QueryDocumentSnapshot(d._firestore,d._userDataWriter,A.doc.key,A.doc,new SnapshotMetadata(d._snapshot.mutatedKeys.has(A.doc.key),d._snapshot.fromCache),d.query.converter);let I=-1,G=-1;return A.type!==0&&(I=_.indexOf(A.doc.key),_=_.delete(A.doc.key)),A.type!==1&&(_=_.add(A.doc),G=_.indexOf(A.doc.key)),{type:__PRIVATE_resultChangeType(A.type),doc:R,oldIndex:I,newIndex:G}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(C.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const n={};n.type=QuerySnapshot._jsonSchemaVersion,n.bundleSource="QuerySnapshot",n.bundleName=__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],f=[],d=[];return this.docs.forEach((y=>{y._document!==null&&(s.push(y._document),f.push(this._userDataWriter.convertObjectMap(y._document.data.value.mapValue.fields,"previous")),d.push(y.ref.path))})),n.bundle=(this._firestore,this.query._query,n.bundleName,"NOT SUPPORTED"),n}}function __PRIVATE_resultChangeType(u){switch(u){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:u})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */QuerySnapshot._jsonSchemaVersion="firestore/querySnapshot/1.0",QuerySnapshot._jsonSchema={type:property("string",QuerySnapshot._jsonSchemaVersion),bundleSource:property("string","QuerySnapshot"),bundleName:property("string"),bundle:property("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(u){u=__PRIVATE_cast(u,DocumentReference);const n=__PRIVATE_cast(u.firestore,Firestore),s=ensureFirestoreConfigured(n);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(s,u._key).then((f=>__PRIVATE_convertToDocSnapshot(n,u,f)))}function setDoc(u,n,s){u=__PRIVATE_cast(u,DocumentReference);const f=__PRIVATE_cast(u.firestore,Firestore),d=__PRIVATE_applyFirestoreDataConverter(u.converter,n),y=__PRIVATE_newUserDataReader(f);return executeWrite(f,[__PRIVATE_parseSetData(y,"setDoc",u._key,d,u.converter!==null,s).toMutation(u._key,Precondition.none())])}function updateDoc(u,n,s,...f){u=__PRIVATE_cast(u,DocumentReference);const d=__PRIVATE_cast(u.firestore,Firestore),y=__PRIVATE_newUserDataReader(d);let _;return _=typeof(n=getModularInstance(n))=="string"||n instanceof FieldPath?__PRIVATE_parseUpdateVarargs(y,"updateDoc",u._key,n,s,f):__PRIVATE_parseUpdateData(y,"updateDoc",u._key,n),executeWrite(d,[_.toMutation(u._key,Precondition.exists(!0))])}function addDoc(u,n){const s=__PRIVATE_cast(u.firestore,Firestore),f=doc(u),d=__PRIVATE_applyFirestoreDataConverter(u.converter,n),y=__PRIVATE_newUserDataReader(u.firestore);return executeWrite(s,[__PRIVATE_parseSetData(y,"addDoc",f._key,d,u.converter!==null,{}).toMutation(f._key,Precondition.exists(!1))]).then((()=>f))}function onSnapshot(u,...n){var I,G,Y;u=getModularInstance(u);let s={includeMetadataChanges:!1,source:"default"},f=0;typeof n[f]!="object"||__PRIVATE_isPartialObserver(n[f])||(s=n[f++]);const d={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(__PRIVATE_isPartialObserver(n[f])){const q=n[f];n[f]=(I=q.next)==null?void 0:I.bind(q),n[f+1]=(G=q.error)==null?void 0:G.bind(q),n[f+2]=(Y=q.complete)==null?void 0:Y.bind(q)}let y,_,A;if(u instanceof DocumentReference)_=__PRIVATE_cast(u.firestore,Firestore),A=__PRIVATE_newQueryForPath(u._key.path),y={next:q=>{n[f]&&n[f](__PRIVATE_convertToDocSnapshot(_,u,q))},error:n[f+1],complete:n[f+2]};else{const q=__PRIVATE_cast(u,Query);_=__PRIVATE_cast(q.firestore,Firestore),A=q._query;const K=new __PRIVATE_ExpUserDataWriter(_);y={next:Q=>{n[f]&&n[f](new QuerySnapshot(_,K,q,Q))},error:n[f+1],complete:n[f+2]},__PRIVATE_validateHasExplicitOrderByForLimitToLast(u._query)}const R=ensureFirestoreConfigured(_);return __PRIVATE_firestoreClientListen(R,A,d,y)}function executeWrite(u,n){const s=ensureFirestoreConfigured(u);return __PRIVATE_firestoreClientWrite(s,n)}function __PRIVATE_convertToDocSnapshot(u,n,s){const f=s.docs.get(n._key),d=new __PRIVATE_ExpUserDataWriter(u);return new DocumentSnapshot(u,d,n._key,f,new SnapshotMetadata(s.hasPendingWrites,s.fromCache),n.converter)}(function(n,s=!0){__PRIVATE_setSDKVersion(SDK_VERSION),_registerComponent(new Component("firestore",((f,{instanceIdentifier:d,options:y})=>{const _=f.getProvider("app").getImmediate(),A=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(f.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(_,f.getProvider("app-check-internal")),__PRIVATE_databaseIdFromApp(_,d),_);return y={useFetchStreams:s,...y},A._setSettings(y),A}),"PUBLIC").setMultipleInstances(!0)),registerVersion(Ut,Ht,n),registerVersion(Ut,Ht,"esm2020")})();const firebaseConfig={apiKey:"AIzaSyDmxwGdbaLvkXRE4ZQ-l0NNP4LxpC1LZZA",authDomain:"startup-copilot-ff355.firebaseapp.com",projectId:"startup-copilot-ff355",storageBucket:"startup-copilot-ff355.firebasestorage.app",messagingSenderId:"123534384425",appId:"1:123534384425:web:d2daf12b436300566b2b38"};let app,auth,db;if(firebaseConfig.apiKey&&firebaseConfig.apiKey!=="")try{app=getApps().length===0?initializeApp(firebaseConfig):getApps()[0],auth=getAuth(app),db=getFirestore(app)}catch(u){console.error("Firebase initialization failed:",u)}else console.warn("Firebase API Key is missing. Authentication features will be disabled. Please configure Firebase environment variables.");const firebase=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return auth},get db(){return db}},Symbol.toStringTag,{value:"Module"})),AuthContext=reactExports.createContext({user:null,profile:null,projects:[],loading:!0,refreshProfile:async()=>{}}),AuthProvider=({children:u})=>{const[n,s]=reactExports.useState(null),[f,d]=reactExports.useState(null),[y,_]=reactExports.useState([]),[A,R]=reactExports.useState(!0),I=async Y=>{if(!db)return;const q=doc(db,"users",Y),K=await getDoc(q);if(K.exists())d(K.data());else{const J={onboardingComplete:!1};await setDoc(q,J),d(J)}const Q=collection(db,"users",Y,"projects"),ne=query$1(Q,orderBy("lastUpdated","desc"));return onSnapshot(ne,J=>{const ie=J.docs.map(re=>({id:re.id,...re.data()}));_(ie)})};reactExports.useEffect(()=>{if(!auth){R(!1);return}let Y;const q=onAuthStateChanged(auth,async K=>{s(K),K?Y=await I(K.uid):(d(null),_([])),R(!1)});return()=>{q(),Y&&Y()}},[]);const G=async()=>{if(n&&db){const Y=doc(db,"users",n.uid),q=await getDoc(Y);q.exists()&&d(q.data())}};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:n,profile:f,projects:y,loading:A,refreshProfile:G},children:!A&&u})},useAuth=()=>reactExports.useContext(AuthContext),Navbar=()=>{const[u,n]=reactExports.useState(!1),[s,f]=reactExports.useState(!1);useLocation(),reactExports.useEffect(()=>{const y=()=>{n(window.scrollY>20)};return window.addEventListener("scroll",y),()=>window.removeEventListener("scroll",y)},[]);const d=[{name:"Features",href:"#features"},{name:"Roadmap",href:"#roadmap"},{name:"Demo",href:"/demo",isLink:!0}];return jsxRuntimeExports.jsxs(motion.nav,{initial:{y:-100},animate:{y:0},className:`fixed top-0 w-full z-50 transition-all duration-500 px-6 ${u?"py-3":"py-6"}`,children:[jsxRuntimeExports.jsxs("div",{className:`max-w-7xl mx-auto flex items-center justify-between transition-all duration-500 rounded-2xl px-6 py-2 border border-white/[0.05] relative overflow-hidden ${u?"bg-[#0B0F19]/80 backdrop-blur-xl shadow-[0_8px_32px_rgba(0,0,0,0.4)] border-white/[0.08]":"bg-transparent"}`,children:[u&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent/5 via-transparent to-accent/5 pointer-events-none"}),jsxRuntimeExports.jsx(Link,{to:"/",className:"flex items-center gap-2 group relative z-10 transition-transform active:scale-95",children:jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("img",{src:"/logo.png",alt:"Startup Copilot Logo",className:"h-12 w-auto object-contain brightness-110 group-hover:drop-shadow-[0_0_8px_rgba(79,156,249,0.5)] transition-all"})})}),jsxRuntimeExports.jsxs("div",{className:"hidden md:flex items-center gap-1 relative z-10",children:[d.map(y=>y.isLink?jsxRuntimeExports.jsx(Link,{to:y.href,className:"px-4 py-2 text-sm font-bold text-slate-400 hover:text-white transition-all rounded-lg hover:bg-white/5",children:y.name},y.name):jsxRuntimeExports.jsx("a",{href:y.href,className:"px-4 py-2 text-sm font-bold text-slate-400 hover:text-white transition-all rounded-lg hover:bg-white/5",children:y.name},y.name)),jsxRuntimeExports.jsx("div",{className:"w-px h-4 bg-white/10 mx-2"}),jsxRuntimeExports.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"p-2 text-slate-400 hover:text-white transition-all hover:bg-white/5 rounded-lg","aria-label":"GitHub",children:jsxRuntimeExports.jsx(Github,{size:20})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[jsxRuntimeExports.jsx(Link,{to:"/login",className:"text-sm font-black text-slate-400 hover:text-white transition-colors px-4 py-2 hover:bg-white/5 rounded-lg uppercase tracking-wider",children:"Login"}),jsxRuntimeExports.jsx("button",{className:"md:hidden p-2 text-slate-400 hover:text-white transition-colors",onClick:()=>f(!s),children:s?jsxRuntimeExports.jsx(X$1,{size:24}):jsxRuntimeExports.jsx(Menu,{size:24})})]})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:s&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden mt-2 glass-card rounded-2xl border-white/10 overflow-hidden bg-[#0B0F19]/95 backdrop-blur-2xl",children:jsxRuntimeExports.jsxs("div",{className:"p-6 flex flex-col gap-4",children:[d.map(y=>y.isLink?jsxRuntimeExports.jsx(Link,{to:y.href,onClick:()=>f(!1),className:"text-lg font-bold text-slate-300 hover:text-accent transition-colors py-2 border-b border-white/5",children:y.name},y.name):jsxRuntimeExports.jsx("a",{href:y.href,onClick:()=>f(!1),className:"text-lg font-bold text-slate-300 hover:text-accent transition-colors py-2 border-b border-white/5",children:y.name},y.name)),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between pt-2",children:[jsxRuntimeExports.jsx(Link,{to:"/login",onClick:()=>f(!1),className:"text-lg font-bold text-slate-300 hover:text-accent transition-colors",children:"Login"}),jsxRuntimeExports.jsx("a",{href:"https://github.com",className:"p-2 bg-white/5 rounded-xl text-slate-300","aria-label":"GitHub",children:jsxRuntimeExports.jsx(Github,{size:24})})]})]})})})]})};/**
 * @license
 * Copyright 2010-2026 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="183",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,MaterialBlending=6,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,NeutralToneMapping=7,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,UnsignedInt5999Type=35902,UnsignedInt101111Type=35899,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,R11_EAC_Format=37488,SIGNED_R11_EAC_Format=37489,RG11_EAC_Format=37490,SIGNED_RG11_EAC_Format=37491,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,InterpolateBezier=2303,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,BasicDepthPacking=3200,RGBADepthPacking=3201,RGBDepthPacking=3202,RGDepthPacking=3203,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",LinearTransfer="linear",SRGBTransfer="srgb",NoNormalPacking="",NormalRGPacking="rg",NormalGAPacking="ga",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001,TimestampQuery={COMPUTE:"compute",RENDER:"render"},InterpolationSamplingType={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},InterpolationSamplingMode={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"},Compatibility={TEXTURE_COMPARE:"depthTextureCompare"};function arrayNeedsUint32(u){for(let n=u.length-1;n>=0;--n)if(u[n]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(u,n){return new TYPED_ARRAYS[u](n)}function isTypedArray(u){return ArrayBuffer.isView(u)&&!(u instanceof DataView)}function createElementNS(u){return document.createElementNS("http://www.w3.org/1999/xhtml",u)}function createCanvasElement(){const u=createElementNS("canvas");return u.style.display="block",u}const _cache={};let _setConsoleFunction=null;function setConsoleFunction(u){_setConsoleFunction=u}function getConsoleFunction(){return _setConsoleFunction}function log(...u){const n="THREE."+u.shift();_setConsoleFunction?_setConsoleFunction("log",n,...u):console.log(n,...u)}function enhanceLogMessage(u){const n=u[0];if(typeof n=="string"&&n.startsWith("TSL:")){const s=u[1];s&&s.isStackTrace?u[0]+=" "+s.getLocation():u[1]='Stack trace not available. Enable "THREE.Node.captureStackTrace" to capture stack traces.'}return u}function warn(...u){u=enhanceLogMessage(u);const n="THREE."+u.shift();if(_setConsoleFunction)_setConsoleFunction("warn",n,...u);else{const s=u[0];s&&s.isStackTrace?console.warn(s.getError(n)):console.warn(n,...u)}}function error(...u){u=enhanceLogMessage(u);const n="THREE."+u.shift();if(_setConsoleFunction)_setConsoleFunction("error",n,...u);else{const s=u[0];s&&s.isStackTrace?console.error(s.getError(n)):console.error(n,...u)}}function warnOnce(...u){const n=u.join(" ");n in _cache||(_cache[n]=!0,warn(...u))}function probeAsync(u,n,s){return new Promise(function(f,d){function y(){switch(u.clientWaitSync(n,u.SYNC_FLUSH_COMMANDS_BIT,0)){case u.WAIT_FAILED:d();break;case u.TIMEOUT_EXPIRED:setTimeout(y,s);break;default:f()}}setTimeout(y,s)})}const ReversedDepthFuncs={[NeverDepth]:AlwaysDepth,[LessDepth]:GreaterDepth,[EqualDepth]:NotEqualDepth,[LessEqualDepth]:GreaterEqualDepth,[AlwaysDepth]:NeverDepth,[GreaterDepth]:LessDepth,[NotEqualDepth]:EqualDepth,[GreaterEqualDepth]:LessEqualDepth};class EventDispatcher{addEventListener(n,s){this._listeners===void 0&&(this._listeners={});const f=this._listeners;f[n]===void 0&&(f[n]=[]),f[n].indexOf(s)===-1&&f[n].push(s)}hasEventListener(n,s){const f=this._listeners;return f===void 0?!1:f[n]!==void 0&&f[n].indexOf(s)!==-1}removeEventListener(n,s){const f=this._listeners;if(f===void 0)return;const d=f[n];if(d!==void 0){const y=d.indexOf(s);y!==-1&&d.splice(y,1)}}dispatchEvent(n){const s=this._listeners;if(s===void 0)return;const f=s[n.type];if(f!==void 0){n.target=this;const d=f.slice(0);for(let y=0,_=d.length;y<_;y++)d[y].call(this,n);n.target=null}}}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const u=Math.random()*4294967295|0,n=Math.random()*4294967295|0,s=Math.random()*4294967295|0,f=Math.random()*4294967295|0;return(_lut[u&255]+_lut[u>>8&255]+_lut[u>>16&255]+_lut[u>>24&255]+"-"+_lut[n&255]+_lut[n>>8&255]+"-"+_lut[n>>16&15|64]+_lut[n>>24&255]+"-"+_lut[s&63|128]+_lut[s>>8&255]+"-"+_lut[s>>16&255]+_lut[s>>24&255]+_lut[f&255]+_lut[f>>8&255]+_lut[f>>16&255]+_lut[f>>24&255]).toLowerCase()}function clamp(u,n,s){return Math.max(n,Math.min(s,u))}function euclideanModulo(u,n){return(u%n+n)%n}function mapLinear(u,n,s,f,d){return f+(u-n)*(d-f)/(s-n)}function inverseLerp(u,n,s){return u!==n?(s-u)/(n-u):0}function lerp(u,n,s){return(1-s)*u+s*n}function damp(u,n,s,f){return lerp(u,n,1-Math.exp(-s*f))}function pingpong(u,n=1){return n-Math.abs(euclideanModulo(u,n*2)-n)}function smoothstep(u,n,s){return u<=n?0:u>=s?1:(u=(u-n)/(s-n),u*u*(3-2*u))}function smootherstep(u,n,s){return u<=n?0:u>=s?1:(u=(u-n)/(s-n),u*u*u*(u*(u*6-15)+10))}function randInt(u,n){return u+Math.floor(Math.random()*(n-u+1))}function randFloat(u,n){return u+Math.random()*(n-u)}function randFloatSpread(u){return u*(.5-Math.random())}function seededRandom(u){u!==void 0&&(_seed=u);let n=_seed+=1831565813;return n=Math.imul(n^n>>>15,n|1),n^=n+Math.imul(n^n>>>7,n|61),((n^n>>>14)>>>0)/4294967296}function degToRad(u){return u*DEG2RAD}function radToDeg(u){return u*RAD2DEG}function isPowerOfTwo(u){return(u&u-1)===0&&u!==0}function ceilPowerOfTwo(u){return Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))}function floorPowerOfTwo(u){return Math.pow(2,Math.floor(Math.log(u)/Math.LN2))}function setQuaternionFromProperEuler(u,n,s,f,d){const y=Math.cos,_=Math.sin,A=y(s/2),R=_(s/2),I=y((n+f)/2),G=_((n+f)/2),Y=y((n-f)/2),q=_((n-f)/2),K=y((f-n)/2),Q=_((f-n)/2);switch(d){case"XYX":u.set(A*G,R*Y,R*q,A*I);break;case"YZY":u.set(R*q,A*G,R*Y,A*I);break;case"ZXZ":u.set(R*Y,R*q,A*G,A*I);break;case"XZX":u.set(A*G,R*Q,R*K,A*I);break;case"YXY":u.set(R*K,A*G,R*Q,A*I);break;case"ZYZ":u.set(R*Q,R*K,A*G,A*I);break;default:warn("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+d)}}function denormalize(u,n){switch(n.constructor){case Float32Array:return u;case Uint32Array:return u/4294967295;case Uint16Array:return u/65535;case Uint8Array:return u/255;case Int32Array:return Math.max(u/2147483647,-1);case Int16Array:return Math.max(u/32767,-1);case Int8Array:return Math.max(u/127,-1);default:throw new Error("Invalid component type.")}}function normalize(u,n){switch(n.constructor){case Float32Array:return u;case Uint32Array:return Math.round(u*4294967295);case Uint16Array:return Math.round(u*65535);case Uint8Array:return Math.round(u*255);case Int32Array:return Math.round(u*2147483647);case Int16Array:return Math.round(u*32767);case Int8Array:return Math.round(u*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(n=0,s=0){Vector2.prototype.isVector2=!0,this.x=n,this.y=s}get width(){return this.x}set width(n){this.x=n}get height(){return this.y}set height(n){this.y=n}set(n,s){return this.x=n,this.y=s,this}setScalar(n){return this.x=n,this.y=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setComponent(n,s){switch(n){case 0:this.x=s;break;case 1:this.y=s;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y)}copy(n){return this.x=n.x,this.y=n.y,this}add(n){return this.x+=n.x,this.y+=n.y,this}addScalar(n){return this.x+=n,this.y+=n,this}addVectors(n,s){return this.x=n.x+s.x,this.y=n.y+s.y,this}addScaledVector(n,s){return this.x+=n.x*s,this.y+=n.y*s,this}sub(n){return this.x-=n.x,this.y-=n.y,this}subScalar(n){return this.x-=n,this.y-=n,this}subVectors(n,s){return this.x=n.x-s.x,this.y=n.y-s.y,this}multiply(n){return this.x*=n.x,this.y*=n.y,this}multiplyScalar(n){return this.x*=n,this.y*=n,this}divide(n){return this.x/=n.x,this.y/=n.y,this}divideScalar(n){return this.multiplyScalar(1/n)}applyMatrix3(n){const s=this.x,f=this.y,d=n.elements;return this.x=d[0]*s+d[3]*f+d[6],this.y=d[1]*s+d[4]*f+d[7],this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this}clamp(n,s){return this.x=clamp(this.x,n.x,s.x),this.y=clamp(this.y,n.y,s.y),this}clampScalar(n,s){return this.x=clamp(this.x,n,s),this.y=clamp(this.y,n,s),this}clampLength(n,s){const f=this.length();return this.divideScalar(f||1).multiplyScalar(clamp(f,n,s))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(n){return this.x*n.x+this.y*n.y}cross(n){return this.x*n.y-this.y*n.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(n){const s=Math.sqrt(this.lengthSq()*n.lengthSq());if(s===0)return Math.PI/2;const f=this.dot(n)/s;return Math.acos(clamp(f,-1,1))}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const s=this.x-n.x,f=this.y-n.y;return s*s+f*f}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,s){return this.x+=(n.x-this.x)*s,this.y+=(n.y-this.y)*s,this}lerpVectors(n,s,f){return this.x=n.x+(s.x-n.x)*f,this.y=n.y+(s.y-n.y)*f,this}equals(n){return n.x===this.x&&n.y===this.y}fromArray(n,s=0){return this.x=n[s],this.y=n[s+1],this}toArray(n=[],s=0){return n[s]=this.x,n[s+1]=this.y,n}fromBufferAttribute(n,s){return this.x=n.getX(s),this.y=n.getY(s),this}rotateAround(n,s){const f=Math.cos(s),d=Math.sin(s),y=this.x-n.x,_=this.y-n.y;return this.x=y*f-_*d+n.x,this.y=y*d+_*f+n.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Quaternion{constructor(n=0,s=0,f=0,d=1){this.isQuaternion=!0,this._x=n,this._y=s,this._z=f,this._w=d}static slerpFlat(n,s,f,d,y,_,A){let R=f[d+0],I=f[d+1],G=f[d+2],Y=f[d+3],q=y[_+0],K=y[_+1],Q=y[_+2],ne=y[_+3];if(Y!==ne||R!==q||I!==K||G!==Q){let te=R*q+I*K+G*Q+Y*ne;te<0&&(q=-q,K=-K,Q=-Q,ne=-ne,te=-te);let J=1-A;if(te<.9995){const ie=Math.acos(te),re=Math.sin(ie);J=Math.sin(J*ie)/re,A=Math.sin(A*ie)/re,R=R*J+q*A,I=I*J+K*A,G=G*J+Q*A,Y=Y*J+ne*A}else{R=R*J+q*A,I=I*J+K*A,G=G*J+Q*A,Y=Y*J+ne*A;const ie=1/Math.sqrt(R*R+I*I+G*G+Y*Y);R*=ie,I*=ie,G*=ie,Y*=ie}}n[s]=R,n[s+1]=I,n[s+2]=G,n[s+3]=Y}static multiplyQuaternionsFlat(n,s,f,d,y,_){const A=f[d],R=f[d+1],I=f[d+2],G=f[d+3],Y=y[_],q=y[_+1],K=y[_+2],Q=y[_+3];return n[s]=A*Q+G*Y+R*K-I*q,n[s+1]=R*Q+G*q+I*Y-A*K,n[s+2]=I*Q+G*K+A*q-R*Y,n[s+3]=G*Q-A*Y-R*q-I*K,n}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get w(){return this._w}set w(n){this._w=n,this._onChangeCallback()}set(n,s,f,d){return this._x=n,this._y=s,this._z=f,this._w=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(n){return this._x=n.x,this._y=n.y,this._z=n.z,this._w=n.w,this._onChangeCallback(),this}setFromEuler(n,s=!0){const f=n._x,d=n._y,y=n._z,_=n._order,A=Math.cos,R=Math.sin,I=A(f/2),G=A(d/2),Y=A(y/2),q=R(f/2),K=R(d/2),Q=R(y/2);switch(_){case"XYZ":this._x=q*G*Y+I*K*Q,this._y=I*K*Y-q*G*Q,this._z=I*G*Q+q*K*Y,this._w=I*G*Y-q*K*Q;break;case"YXZ":this._x=q*G*Y+I*K*Q,this._y=I*K*Y-q*G*Q,this._z=I*G*Q-q*K*Y,this._w=I*G*Y+q*K*Q;break;case"ZXY":this._x=q*G*Y-I*K*Q,this._y=I*K*Y+q*G*Q,this._z=I*G*Q+q*K*Y,this._w=I*G*Y-q*K*Q;break;case"ZYX":this._x=q*G*Y-I*K*Q,this._y=I*K*Y+q*G*Q,this._z=I*G*Q-q*K*Y,this._w=I*G*Y+q*K*Q;break;case"YZX":this._x=q*G*Y+I*K*Q,this._y=I*K*Y+q*G*Q,this._z=I*G*Q-q*K*Y,this._w=I*G*Y-q*K*Q;break;case"XZY":this._x=q*G*Y-I*K*Q,this._y=I*K*Y-q*G*Q,this._z=I*G*Q+q*K*Y,this._w=I*G*Y+q*K*Q;break;default:warn("Quaternion: .setFromEuler() encountered an unknown order: "+_)}return s===!0&&this._onChangeCallback(),this}setFromAxisAngle(n,s){const f=s/2,d=Math.sin(f);return this._x=n.x*d,this._y=n.y*d,this._z=n.z*d,this._w=Math.cos(f),this._onChangeCallback(),this}setFromRotationMatrix(n){const s=n.elements,f=s[0],d=s[4],y=s[8],_=s[1],A=s[5],R=s[9],I=s[2],G=s[6],Y=s[10],q=f+A+Y;if(q>0){const K=.5/Math.sqrt(q+1);this._w=.25/K,this._x=(G-R)*K,this._y=(y-I)*K,this._z=(_-d)*K}else if(f>A&&f>Y){const K=2*Math.sqrt(1+f-A-Y);this._w=(G-R)/K,this._x=.25*K,this._y=(d+_)/K,this._z=(y+I)/K}else if(A>Y){const K=2*Math.sqrt(1+A-f-Y);this._w=(y-I)/K,this._x=(d+_)/K,this._y=.25*K,this._z=(R+G)/K}else{const K=2*Math.sqrt(1+Y-f-A);this._w=(_-d)/K,this._x=(y+I)/K,this._y=(R+G)/K,this._z=.25*K}return this._onChangeCallback(),this}setFromUnitVectors(n,s){let f=n.dot(s)+1;return f<1e-8?(f=0,Math.abs(n.x)>Math.abs(n.z)?(this._x=-n.y,this._y=n.x,this._z=0,this._w=f):(this._x=0,this._y=-n.z,this._z=n.y,this._w=f)):(this._x=n.y*s.z-n.z*s.y,this._y=n.z*s.x-n.x*s.z,this._z=n.x*s.y-n.y*s.x,this._w=f),this.normalize()}angleTo(n){return 2*Math.acos(Math.abs(clamp(this.dot(n),-1,1)))}rotateTowards(n,s){const f=this.angleTo(n);if(f===0)return this;const d=Math.min(1,s/f);return this.slerp(n,d),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(n){return this._x*n._x+this._y*n._y+this._z*n._z+this._w*n._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let n=this.length();return n===0?(this._x=0,this._y=0,this._z=0,this._w=1):(n=1/n,this._x=this._x*n,this._y=this._y*n,this._z=this._z*n,this._w=this._w*n),this._onChangeCallback(),this}multiply(n){return this.multiplyQuaternions(this,n)}premultiply(n){return this.multiplyQuaternions(n,this)}multiplyQuaternions(n,s){const f=n._x,d=n._y,y=n._z,_=n._w,A=s._x,R=s._y,I=s._z,G=s._w;return this._x=f*G+_*A+d*I-y*R,this._y=d*G+_*R+y*A-f*I,this._z=y*G+_*I+f*R-d*A,this._w=_*G-f*A-d*R-y*I,this._onChangeCallback(),this}slerp(n,s){let f=n._x,d=n._y,y=n._z,_=n._w,A=this.dot(n);A<0&&(f=-f,d=-d,y=-y,_=-_,A=-A);let R=1-s;if(A<.9995){const I=Math.acos(A),G=Math.sin(I);R=Math.sin(R*I)/G,s=Math.sin(s*I)/G,this._x=this._x*R+f*s,this._y=this._y*R+d*s,this._z=this._z*R+y*s,this._w=this._w*R+_*s,this._onChangeCallback()}else this._x=this._x*R+f*s,this._y=this._y*R+d*s,this._z=this._z*R+y*s,this._w=this._w*R+_*s,this.normalize();return this}slerpQuaternions(n,s,f){return this.copy(n).slerp(s,f)}random(){const n=2*Math.PI*Math.random(),s=2*Math.PI*Math.random(),f=Math.random(),d=Math.sqrt(1-f),y=Math.sqrt(f);return this.set(d*Math.sin(n),d*Math.cos(n),y*Math.sin(s),y*Math.cos(s))}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._w===this._w}fromArray(n,s=0){return this._x=n[s],this._y=n[s+1],this._z=n[s+2],this._w=n[s+3],this._onChangeCallback(),this}toArray(n=[],s=0){return n[s]=this._x,n[s+1]=this._y,n[s+2]=this._z,n[s+3]=this._w,n}fromBufferAttribute(n,s){return this._x=n.getX(s),this._y=n.getY(s),this._z=n.getZ(s),this._w=n.getW(s),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(n=0,s=0,f=0){Vector3.prototype.isVector3=!0,this.x=n,this.y=s,this.z=f}set(n,s,f){return f===void 0&&(f=this.z),this.x=n,this.y=s,this.z=f,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setComponent(n,s){switch(n){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this}addVectors(n,s){return this.x=n.x+s.x,this.y=n.y+s.y,this.z=n.z+s.z,this}addScaledVector(n,s){return this.x+=n.x*s,this.y+=n.y*s,this.z+=n.z*s,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this}subVectors(n,s){return this.x=n.x-s.x,this.y=n.y-s.y,this.z=n.z-s.z,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this}multiplyVectors(n,s){return this.x=n.x*s.x,this.y=n.y*s.y,this.z=n.z*s.z,this}applyEuler(n){return this.applyQuaternion(_quaternion$5.setFromEuler(n))}applyAxisAngle(n,s){return this.applyQuaternion(_quaternion$5.setFromAxisAngle(n,s))}applyMatrix3(n){const s=this.x,f=this.y,d=this.z,y=n.elements;return this.x=y[0]*s+y[3]*f+y[6]*d,this.y=y[1]*s+y[4]*f+y[7]*d,this.z=y[2]*s+y[5]*f+y[8]*d,this}applyNormalMatrix(n){return this.applyMatrix3(n).normalize()}applyMatrix4(n){const s=this.x,f=this.y,d=this.z,y=n.elements,_=1/(y[3]*s+y[7]*f+y[11]*d+y[15]);return this.x=(y[0]*s+y[4]*f+y[8]*d+y[12])*_,this.y=(y[1]*s+y[5]*f+y[9]*d+y[13])*_,this.z=(y[2]*s+y[6]*f+y[10]*d+y[14])*_,this}applyQuaternion(n){const s=this.x,f=this.y,d=this.z,y=n.x,_=n.y,A=n.z,R=n.w,I=2*(_*d-A*f),G=2*(A*s-y*d),Y=2*(y*f-_*s);return this.x=s+R*I+_*Y-A*G,this.y=f+R*G+A*I-y*Y,this.z=d+R*Y+y*G-_*I,this}project(n){return this.applyMatrix4(n.matrixWorldInverse).applyMatrix4(n.projectionMatrix)}unproject(n){return this.applyMatrix4(n.projectionMatrixInverse).applyMatrix4(n.matrixWorld)}transformDirection(n){const s=this.x,f=this.y,d=this.z,y=n.elements;return this.x=y[0]*s+y[4]*f+y[8]*d,this.y=y[1]*s+y[5]*f+y[9]*d,this.z=y[2]*s+y[6]*f+y[10]*d,this.normalize()}divide(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z,this}divideScalar(n){return this.multiplyScalar(1/n)}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this}clamp(n,s){return this.x=clamp(this.x,n.x,s.x),this.y=clamp(this.y,n.y,s.y),this.z=clamp(this.z,n.z,s.z),this}clampScalar(n,s){return this.x=clamp(this.x,n,s),this.y=clamp(this.y,n,s),this.z=clamp(this.z,n,s),this}clampLength(n,s){const f=this.length();return this.divideScalar(f||1).multiplyScalar(clamp(f,n,s))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,s){return this.x+=(n.x-this.x)*s,this.y+=(n.y-this.y)*s,this.z+=(n.z-this.z)*s,this}lerpVectors(n,s,f){return this.x=n.x+(s.x-n.x)*f,this.y=n.y+(s.y-n.y)*f,this.z=n.z+(s.z-n.z)*f,this}cross(n){return this.crossVectors(this,n)}crossVectors(n,s){const f=n.x,d=n.y,y=n.z,_=s.x,A=s.y,R=s.z;return this.x=d*R-y*A,this.y=y*_-f*R,this.z=f*A-d*_,this}projectOnVector(n){const s=n.lengthSq();if(s===0)return this.set(0,0,0);const f=n.dot(this)/s;return this.copy(n).multiplyScalar(f)}projectOnPlane(n){return _vector$c.copy(this).projectOnVector(n),this.sub(_vector$c)}reflect(n){return this.sub(_vector$c.copy(n).multiplyScalar(2*this.dot(n)))}angleTo(n){const s=Math.sqrt(this.lengthSq()*n.lengthSq());if(s===0)return Math.PI/2;const f=this.dot(n)/s;return Math.acos(clamp(f,-1,1))}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const s=this.x-n.x,f=this.y-n.y,d=this.z-n.z;return s*s+f*f+d*d}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)+Math.abs(this.z-n.z)}setFromSpherical(n){return this.setFromSphericalCoords(n.radius,n.phi,n.theta)}setFromSphericalCoords(n,s,f){const d=Math.sin(s)*n;return this.x=d*Math.sin(f),this.y=Math.cos(s)*n,this.z=d*Math.cos(f),this}setFromCylindrical(n){return this.setFromCylindricalCoords(n.radius,n.theta,n.y)}setFromCylindricalCoords(n,s,f){return this.x=n*Math.sin(s),this.y=f,this.z=n*Math.cos(s),this}setFromMatrixPosition(n){const s=n.elements;return this.x=s[12],this.y=s[13],this.z=s[14],this}setFromMatrixScale(n){const s=this.setFromMatrixColumn(n,0).length(),f=this.setFromMatrixColumn(n,1).length(),d=this.setFromMatrixColumn(n,2).length();return this.x=s,this.y=f,this.z=d,this}setFromMatrixColumn(n,s){return this.fromArray(n.elements,s*4)}setFromMatrix3Column(n,s){return this.fromArray(n.elements,s*3)}setFromEuler(n){return this.x=n._x,this.y=n._y,this.z=n._z,this}setFromColor(n){return this.x=n.r,this.y=n.g,this.z=n.b,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z}fromArray(n,s=0){return this.x=n[s],this.y=n[s+1],this.z=n[s+2],this}toArray(n=[],s=0){return n[s]=this.x,n[s+1]=this.y,n[s+2]=this.z,n}fromBufferAttribute(n,s){return this.x=n.getX(s),this.y=n.getY(s),this.z=n.getZ(s),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const n=Math.random()*Math.PI*2,s=Math.random()*2-1,f=Math.sqrt(1-s*s);return this.x=f*Math.cos(n),this.y=s,this.z=f*Math.sin(n),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$5=new Quaternion;class Matrix3{constructor(n,s,f,d,y,_,A,R,I){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],n!==void 0&&this.set(n,s,f,d,y,_,A,R,I)}set(n,s,f,d,y,_,A,R,I){const G=this.elements;return G[0]=n,G[1]=d,G[2]=A,G[3]=s,G[4]=y,G[5]=R,G[6]=f,G[7]=_,G[8]=I,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(n){const s=this.elements,f=n.elements;return s[0]=f[0],s[1]=f[1],s[2]=f[2],s[3]=f[3],s[4]=f[4],s[5]=f[5],s[6]=f[6],s[7]=f[7],s[8]=f[8],this}extractBasis(n,s,f){return n.setFromMatrix3Column(this,0),s.setFromMatrix3Column(this,1),f.setFromMatrix3Column(this,2),this}setFromMatrix4(n){const s=n.elements;return this.set(s[0],s[4],s[8],s[1],s[5],s[9],s[2],s[6],s[10]),this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,s){const f=n.elements,d=s.elements,y=this.elements,_=f[0],A=f[3],R=f[6],I=f[1],G=f[4],Y=f[7],q=f[2],K=f[5],Q=f[8],ne=d[0],te=d[3],J=d[6],ie=d[1],re=d[4],le=d[7],fe=d[2],pe=d[5],de=d[8];return y[0]=_*ne+A*ie+R*fe,y[3]=_*te+A*re+R*pe,y[6]=_*J+A*le+R*de,y[1]=I*ne+G*ie+Y*fe,y[4]=I*te+G*re+Y*pe,y[7]=I*J+G*le+Y*de,y[2]=q*ne+K*ie+Q*fe,y[5]=q*te+K*re+Q*pe,y[8]=q*J+K*le+Q*de,this}multiplyScalar(n){const s=this.elements;return s[0]*=n,s[3]*=n,s[6]*=n,s[1]*=n,s[4]*=n,s[7]*=n,s[2]*=n,s[5]*=n,s[8]*=n,this}determinant(){const n=this.elements,s=n[0],f=n[1],d=n[2],y=n[3],_=n[4],A=n[5],R=n[6],I=n[7],G=n[8];return s*_*G-s*A*I-f*y*G+f*A*R+d*y*I-d*_*R}invert(){const n=this.elements,s=n[0],f=n[1],d=n[2],y=n[3],_=n[4],A=n[5],R=n[6],I=n[7],G=n[8],Y=G*_-A*I,q=A*R-G*y,K=I*y-_*R,Q=s*Y+f*q+d*K;if(Q===0)return this.set(0,0,0,0,0,0,0,0,0);const ne=1/Q;return n[0]=Y*ne,n[1]=(d*I-G*f)*ne,n[2]=(A*f-d*_)*ne,n[3]=q*ne,n[4]=(G*s-d*R)*ne,n[5]=(d*y-A*s)*ne,n[6]=K*ne,n[7]=(f*R-I*s)*ne,n[8]=(_*s-f*y)*ne,this}transpose(){let n;const s=this.elements;return n=s[1],s[1]=s[3],s[3]=n,n=s[2],s[2]=s[6],s[6]=n,n=s[5],s[5]=s[7],s[7]=n,this}getNormalMatrix(n){return this.setFromMatrix4(n).invert().transpose()}transposeIntoArray(n){const s=this.elements;return n[0]=s[0],n[1]=s[3],n[2]=s[6],n[3]=s[1],n[4]=s[4],n[5]=s[7],n[6]=s[2],n[7]=s[5],n[8]=s[8],this}setUvTransform(n,s,f,d,y,_,A){const R=Math.cos(y),I=Math.sin(y);return this.set(f*R,f*I,-f*(R*_+I*A)+_+n,-d*I,d*R,-d*(-I*_+R*A)+A+s,0,0,1),this}scale(n,s){return this.premultiply(_m3.makeScale(n,s)),this}rotate(n){return this.premultiply(_m3.makeRotation(-n)),this}translate(n,s){return this.premultiply(_m3.makeTranslation(n,s)),this}makeTranslation(n,s){return n.isVector2?this.set(1,0,n.x,0,1,n.y,0,0,1):this.set(1,0,n,0,1,s,0,0,1),this}makeRotation(n){const s=Math.cos(n),f=Math.sin(n);return this.set(s,-f,0,f,s,0,0,0,1),this}makeScale(n,s){return this.set(n,0,0,0,s,0,0,0,1),this}equals(n){const s=this.elements,f=n.elements;for(let d=0;d<9;d++)if(s[d]!==f[d])return!1;return!0}fromArray(n,s=0){for(let f=0;f<9;f++)this.elements[f]=n[f+s];return this}toArray(n=[],s=0){const f=this.elements;return n[s]=f[0],n[s+1]=f[1],n[s+2]=f[2],n[s+3]=f[3],n[s+4]=f[4],n[s+5]=f[5],n[s+6]=f[6],n[s+7]=f[7],n[s+8]=f[8],n}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3,LINEAR_REC709_TO_XYZ=new Matrix3().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),XYZ_TO_LINEAR_REC709=new Matrix3().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){const u={enabled:!0,workingColorSpace:LinearSRGBColorSpace,spaces:{},convert:function(d,y,_){return this.enabled===!1||y===_||!y||!_||(this.spaces[y].transfer===SRGBTransfer&&(d.r=SRGBToLinear(d.r),d.g=SRGBToLinear(d.g),d.b=SRGBToLinear(d.b)),this.spaces[y].primaries!==this.spaces[_].primaries&&(d.applyMatrix3(this.spaces[y].toXYZ),d.applyMatrix3(this.spaces[_].fromXYZ)),this.spaces[_].transfer===SRGBTransfer&&(d.r=LinearToSRGB(d.r),d.g=LinearToSRGB(d.g),d.b=LinearToSRGB(d.b))),d},workingToColorSpace:function(d,y){return this.convert(d,this.workingColorSpace,y)},colorSpaceToWorking:function(d,y){return this.convert(d,y,this.workingColorSpace)},getPrimaries:function(d){return this.spaces[d].primaries},getTransfer:function(d){return d===NoColorSpace?LinearTransfer:this.spaces[d].transfer},getToneMappingMode:function(d){return this.spaces[d].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(d,y=this.workingColorSpace){return d.fromArray(this.spaces[y].luminanceCoefficients)},define:function(d){Object.assign(this.spaces,d)},_getMatrix:function(d,y,_){return d.copy(this.spaces[y].toXYZ).multiply(this.spaces[_].fromXYZ)},_getDrawingBufferColorSpace:function(d){return this.spaces[d].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(d=this.workingColorSpace){return this.spaces[d].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(d,y){return warnOnce("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),u.workingToColorSpace(d,y)},toWorkingColorSpace:function(d,y){return warnOnce("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),u.colorSpaceToWorking(d,y)}},n=[.64,.33,.3,.6,.15,.06],s=[.2126,.7152,.0722],f=[.3127,.329];return u.define({[LinearSRGBColorSpace]:{primaries:n,whitePoint:f,transfer:LinearTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:s,workingColorSpaceConfig:{unpackColorSpace:SRGBColorSpace},outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}},[SRGBColorSpace]:{primaries:n,whitePoint:f,transfer:SRGBTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:s,outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}}}),u}const ColorManagement=createColorManagement();function SRGBToLinear(u){return u<.04045?u*.0773993808:Math.pow(u*.9478672986+.0521327014,2.4)}function LinearToSRGB(u){return u<.0031308?u*12.92:1.055*Math.pow(u,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(n,s="image/png"){if(/^data:/i.test(n.src)||typeof HTMLCanvasElement>"u")return n.src;let f;if(n instanceof HTMLCanvasElement)f=n;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=n.width,_canvas.height=n.height;const d=_canvas.getContext("2d");n instanceof ImageData?d.putImageData(n,0,0):d.drawImage(n,0,0,n.width,n.height),f=_canvas}return f.toDataURL(s)}static sRGBToLinear(n){if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap){const s=createElementNS("canvas");s.width=n.width,s.height=n.height;const f=s.getContext("2d");f.drawImage(n,0,0,n.width,n.height);const d=f.getImageData(0,0,n.width,n.height),y=d.data;for(let _=0;_<y.length;_++)y[_]=SRGBToLinear(y[_]/255)*255;return f.putImageData(d,0,0),s}else if(n.data){const s=n.data.slice(0);for(let f=0;f<s.length;f++)s instanceof Uint8Array||s instanceof Uint8ClampedArray?s[f]=Math.floor(SRGBToLinear(s[f]/255)*255):s[f]=SRGBToLinear(s[f]);return{data:s,width:n.width,height:n.height}}else return warn("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),n}}let _sourceId=0;class Source{constructor(n=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=n,this.dataReady=!0,this.version=0}getSize(n){const s=this.data;return typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement?n.set(s.videoWidth,s.videoHeight,0):typeof VideoFrame<"u"&&s instanceof VideoFrame?n.set(s.displayHeight,s.displayWidth,0):s!==null?n.set(s.width,s.height,s.depth||0):n.set(0,0,0),n}set needsUpdate(n){n===!0&&this.version++}toJSON(n){const s=n===void 0||typeof n=="string";if(!s&&n.images[this.uuid]!==void 0)return n.images[this.uuid];const f={uuid:this.uuid,url:""},d=this.data;if(d!==null){let y;if(Array.isArray(d)){y=[];for(let _=0,A=d.length;_<A;_++)d[_].isDataTexture?y.push(serializeImage(d[_].image)):y.push(serializeImage(d[_]))}else y=serializeImage(d);f.url=y}return s||(n.images[this.uuid]=f),f}}function serializeImage(u){return typeof HTMLImageElement<"u"&&u instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&u instanceof ImageBitmap?ImageUtils.getDataURL(u):u.data?{data:Array.from(u.data),width:u.width,height:u.height,type:u.data.constructor.name}:(warn("Texture: Unable to serialize Texture."),{})}let _textureId=0;const _tempVec3=new Vector3;class Texture extends EventDispatcher{constructor(n=Texture.DEFAULT_IMAGE,s=Texture.DEFAULT_MAPPING,f=ClampToEdgeWrapping,d=ClampToEdgeWrapping,y=LinearFilter,_=LinearMipmapLinearFilter,A=RGBAFormat,R=UnsignedByteType,I=Texture.DEFAULT_ANISOTROPY,G=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(n),this.mipmaps=[],this.mapping=s,this.channel=0,this.wrapS=f,this.wrapT=d,this.magFilter=y,this.minFilter=_,this.anisotropy=I,this.format=A,this.internalFormat=null,this.type=R,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=G,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(n&&n.depth&&n.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(_tempVec3).x}get height(){return this.source.getSize(_tempVec3).y}get depth(){return this.source.getSize(_tempVec3).z}get image(){return this.source.data}set image(n=null){this.source.data=n}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(n,s){this.updateRanges.push({start:n,count:s})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(n){return this.name=n.name,this.source=n.source,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.channel=n.channel,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.colorSpace=n.colorSpace,this.renderTarget=n.renderTarget,this.isRenderTargetTexture=n.isRenderTargetTexture,this.isArrayTexture=n.isArrayTexture,this.userData=JSON.parse(JSON.stringify(n.userData)),this.needsUpdate=!0,this}setValues(n){for(const s in n){const f=n[s];if(f===void 0){warn(`Texture.setValues(): parameter '${s}' has value of undefined.`);continue}const d=this[s];if(d===void 0){warn(`Texture.setValues(): property '${s}' does not exist.`);continue}d&&f&&d.isVector2&&f.isVector2||d&&f&&d.isVector3&&f.isVector3||d&&f&&d.isMatrix3&&f.isMatrix3?d.copy(f):this[s]=f}}toJSON(n){const s=n===void 0||typeof n=="string";if(!s&&n.textures[this.uuid]!==void 0)return n.textures[this.uuid];const f={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(n).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(f.userData=this.userData),s||(n.textures[this.uuid]=f),f}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(n){if(this.mapping!==UVMapping)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case RepeatWrapping:n.x=n.x-Math.floor(n.x);break;case ClampToEdgeWrapping:n.x=n.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(n.x)%2)===1?n.x=Math.ceil(n.x)-n.x:n.x=n.x-Math.floor(n.x);break}if(n.y<0||n.y>1)switch(this.wrapT){case RepeatWrapping:n.y=n.y-Math.floor(n.y);break;case ClampToEdgeWrapping:n.y=n.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(n.y)%2)===1?n.y=Math.ceil(n.y)-n.y:n.y=n.y-Math.floor(n.y);break}return this.flipY&&(n.y=1-n.y),n}set needsUpdate(n){n===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(n){n===!0&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(n=0,s=0,f=0,d=1){Vector4.prototype.isVector4=!0,this.x=n,this.y=s,this.z=f,this.w=d}get width(){return this.z}set width(n){this.z=n}get height(){return this.w}set height(n){this.w=n}set(n,s,f,d){return this.x=n,this.y=s,this.z=f,this.w=d,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this.w=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setW(n){return this.w=n,this}setComponent(n,s){switch(n){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;case 3:this.w=s;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this.w=n.w!==void 0?n.w:1,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this.w+=n.w,this}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this.w+=n,this}addVectors(n,s){return this.x=n.x+s.x,this.y=n.y+s.y,this.z=n.z+s.z,this.w=n.w+s.w,this}addScaledVector(n,s){return this.x+=n.x*s,this.y+=n.y*s,this.z+=n.z*s,this.w+=n.w*s,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this.w-=n.w,this}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this.w-=n,this}subVectors(n,s){return this.x=n.x-s.x,this.y=n.y-s.y,this.z=n.z-s.z,this.w=n.w-s.w,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this.w*=n.w,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this}applyMatrix4(n){const s=this.x,f=this.y,d=this.z,y=this.w,_=n.elements;return this.x=_[0]*s+_[4]*f+_[8]*d+_[12]*y,this.y=_[1]*s+_[5]*f+_[9]*d+_[13]*y,this.z=_[2]*s+_[6]*f+_[10]*d+_[14]*y,this.w=_[3]*s+_[7]*f+_[11]*d+_[15]*y,this}divide(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z,this.w/=n.w,this}divideScalar(n){return this.multiplyScalar(1/n)}setAxisAngleFromQuaternion(n){this.w=2*Math.acos(n.w);const s=Math.sqrt(1-n.w*n.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=n.x/s,this.y=n.y/s,this.z=n.z/s),this}setAxisAngleFromRotationMatrix(n){let s,f,d,y;const R=n.elements,I=R[0],G=R[4],Y=R[8],q=R[1],K=R[5],Q=R[9],ne=R[2],te=R[6],J=R[10];if(Math.abs(G-q)<.01&&Math.abs(Y-ne)<.01&&Math.abs(Q-te)<.01){if(Math.abs(G+q)<.1&&Math.abs(Y+ne)<.1&&Math.abs(Q+te)<.1&&Math.abs(I+K+J-3)<.1)return this.set(1,0,0,0),this;s=Math.PI;const re=(I+1)/2,le=(K+1)/2,fe=(J+1)/2,pe=(G+q)/4,de=(Y+ne)/4,se=(Q+te)/4;return re>le&&re>fe?re<.01?(f=0,d=.707106781,y=.707106781):(f=Math.sqrt(re),d=pe/f,y=de/f):le>fe?le<.01?(f=.707106781,d=0,y=.707106781):(d=Math.sqrt(le),f=pe/d,y=se/d):fe<.01?(f=.707106781,d=.707106781,y=0):(y=Math.sqrt(fe),f=de/y,d=se/y),this.set(f,d,y,s),this}let ie=Math.sqrt((te-Q)*(te-Q)+(Y-ne)*(Y-ne)+(q-G)*(q-G));return Math.abs(ie)<.001&&(ie=1),this.x=(te-Q)/ie,this.y=(Y-ne)/ie,this.z=(q-G)/ie,this.w=Math.acos((I+K+J-1)/2),this}setFromMatrixPosition(n){const s=n.elements;return this.x=s[12],this.y=s[13],this.z=s[14],this.w=s[15],this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this.w=Math.min(this.w,n.w),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this.w=Math.max(this.w,n.w),this}clamp(n,s){return this.x=clamp(this.x,n.x,s.x),this.y=clamp(this.y,n.y,s.y),this.z=clamp(this.z,n.z,s.z),this.w=clamp(this.w,n.w,s.w),this}clampScalar(n,s){return this.x=clamp(this.x,n,s),this.y=clamp(this.y,n,s),this.z=clamp(this.z,n,s),this.w=clamp(this.w,n,s),this}clampLength(n,s){const f=this.length();return this.divideScalar(f||1).multiplyScalar(clamp(f,n,s))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,s){return this.x+=(n.x-this.x)*s,this.y+=(n.y-this.y)*s,this.z+=(n.z-this.z)*s,this.w+=(n.w-this.w)*s,this}lerpVectors(n,s,f){return this.x=n.x+(s.x-n.x)*f,this.y=n.y+(s.y-n.y)*f,this.z=n.z+(s.z-n.z)*f,this.w=n.w+(s.w-n.w)*f,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z&&n.w===this.w}fromArray(n,s=0){return this.x=n[s],this.y=n[s+1],this.z=n[s+2],this.w=n[s+3],this}toArray(n=[],s=0){return n[s]=this.x,n[s+1]=this.y,n[s+2]=this.z,n[s+3]=this.w,n}fromBufferAttribute(n,s){return this.x=n.getX(s),this.y=n.getY(s),this.z=n.getZ(s),this.w=n.getW(s),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(n=1,s=1,f={}){super(),f=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},f),this.isRenderTarget=!0,this.width=n,this.height=s,this.depth=f.depth,this.scissor=new Vector4(0,0,n,s),this.scissorTest=!1,this.viewport=new Vector4(0,0,n,s),this.textures=[];const d={width:n,height:s,depth:f.depth},y=new Texture(d),_=f.count;for(let A=0;A<_;A++)this.textures[A]=y.clone(),this.textures[A].isRenderTargetTexture=!0,this.textures[A].renderTarget=this;this._setTextureOptions(f),this.depthBuffer=f.depthBuffer,this.stencilBuffer=f.stencilBuffer,this.resolveDepthBuffer=f.resolveDepthBuffer,this.resolveStencilBuffer=f.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=f.depthTexture,this.samples=f.samples,this.multiview=f.multiview}_setTextureOptions(n={}){const s={minFilter:LinearFilter,generateMipmaps:!1,flipY:!1,internalFormat:null};n.mapping!==void 0&&(s.mapping=n.mapping),n.wrapS!==void 0&&(s.wrapS=n.wrapS),n.wrapT!==void 0&&(s.wrapT=n.wrapT),n.wrapR!==void 0&&(s.wrapR=n.wrapR),n.magFilter!==void 0&&(s.magFilter=n.magFilter),n.minFilter!==void 0&&(s.minFilter=n.minFilter),n.format!==void 0&&(s.format=n.format),n.type!==void 0&&(s.type=n.type),n.anisotropy!==void 0&&(s.anisotropy=n.anisotropy),n.colorSpace!==void 0&&(s.colorSpace=n.colorSpace),n.flipY!==void 0&&(s.flipY=n.flipY),n.generateMipmaps!==void 0&&(s.generateMipmaps=n.generateMipmaps),n.internalFormat!==void 0&&(s.internalFormat=n.internalFormat);for(let f=0;f<this.textures.length;f++)this.textures[f].setValues(s)}get texture(){return this.textures[0]}set texture(n){this.textures[0]=n}set depthTexture(n){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),n!==null&&(n.renderTarget=this),this._depthTexture=n}get depthTexture(){return this._depthTexture}setSize(n,s,f=1){if(this.width!==n||this.height!==s||this.depth!==f){this.width=n,this.height=s,this.depth=f;for(let d=0,y=this.textures.length;d<y;d++)this.textures[d].image.width=n,this.textures[d].image.height=s,this.textures[d].image.depth=f,this.textures[d].isData3DTexture!==!0&&(this.textures[d].isArrayTexture=this.textures[d].image.depth>1);this.dispose()}this.viewport.set(0,0,n,s),this.scissor.set(0,0,n,s)}clone(){return new this.constructor().copy(this)}copy(n){this.width=n.width,this.height=n.height,this.depth=n.depth,this.scissor.copy(n.scissor),this.scissorTest=n.scissorTest,this.viewport.copy(n.viewport),this.textures.length=0;for(let s=0,f=n.textures.length;s<f;s++){this.textures[s]=n.textures[s].clone(),this.textures[s].isRenderTargetTexture=!0,this.textures[s].renderTarget=this;const d=Object.assign({},n.textures[s].image);this.textures[s].source=new Source(d)}return this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,n.depthTexture!==null&&(this.depthTexture=n.depthTexture.clone()),this.samples=n.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(n=1,s=1,f={}){super(n,s,f),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(n=null,s=1,f=1,d=1){super(null),this.isDataArrayTexture=!0,this.image={data:n,width:s,height:f,depth:d},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(n){this.layerUpdates.add(n)}clearLayerUpdates(){this.layerUpdates.clear()}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(n=1,s=1,f=1,d={}){super(n,s,d),this.isWebGLArrayRenderTarget=!0,this.depth=f,this.texture=new DataArrayTexture(null,n,s,f),this._setTextureOptions(d),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(n=null,s=1,f=1,d=1){super(null),this.isData3DTexture=!0,this.image={data:n,width:s,height:f,depth:d},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(n=1,s=1,f=1,d={}){super(n,s,d),this.isWebGL3DRenderTarget=!0,this.depth=f,this.texture=new Data3DTexture(null,n,s,f),this._setTextureOptions(d),this.texture.isRenderTargetTexture=!0}}class Matrix4{constructor(n,s,f,d,y,_,A,R,I,G,Y,q,K,Q,ne,te){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n!==void 0&&this.set(n,s,f,d,y,_,A,R,I,G,Y,q,K,Q,ne,te)}set(n,s,f,d,y,_,A,R,I,G,Y,q,K,Q,ne,te){const J=this.elements;return J[0]=n,J[4]=s,J[8]=f,J[12]=d,J[1]=y,J[5]=_,J[9]=A,J[13]=R,J[2]=I,J[6]=G,J[10]=Y,J[14]=q,J[3]=K,J[7]=Q,J[11]=ne,J[15]=te,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(n){const s=this.elements,f=n.elements;return s[0]=f[0],s[1]=f[1],s[2]=f[2],s[3]=f[3],s[4]=f[4],s[5]=f[5],s[6]=f[6],s[7]=f[7],s[8]=f[8],s[9]=f[9],s[10]=f[10],s[11]=f[11],s[12]=f[12],s[13]=f[13],s[14]=f[14],s[15]=f[15],this}copyPosition(n){const s=this.elements,f=n.elements;return s[12]=f[12],s[13]=f[13],s[14]=f[14],this}setFromMatrix3(n){const s=n.elements;return this.set(s[0],s[3],s[6],0,s[1],s[4],s[7],0,s[2],s[5],s[8],0,0,0,0,1),this}extractBasis(n,s,f){return this.determinant()===0?(n.set(1,0,0),s.set(0,1,0),f.set(0,0,1),this):(n.setFromMatrixColumn(this,0),s.setFromMatrixColumn(this,1),f.setFromMatrixColumn(this,2),this)}makeBasis(n,s,f){return this.set(n.x,s.x,f.x,0,n.y,s.y,f.y,0,n.z,s.z,f.z,0,0,0,0,1),this}extractRotation(n){if(n.determinant()===0)return this.identity();const s=this.elements,f=n.elements,d=1/_v1$7.setFromMatrixColumn(n,0).length(),y=1/_v1$7.setFromMatrixColumn(n,1).length(),_=1/_v1$7.setFromMatrixColumn(n,2).length();return s[0]=f[0]*d,s[1]=f[1]*d,s[2]=f[2]*d,s[3]=0,s[4]=f[4]*y,s[5]=f[5]*y,s[6]=f[6]*y,s[7]=0,s[8]=f[8]*_,s[9]=f[9]*_,s[10]=f[10]*_,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromEuler(n){const s=this.elements,f=n.x,d=n.y,y=n.z,_=Math.cos(f),A=Math.sin(f),R=Math.cos(d),I=Math.sin(d),G=Math.cos(y),Y=Math.sin(y);if(n.order==="XYZ"){const q=_*G,K=_*Y,Q=A*G,ne=A*Y;s[0]=R*G,s[4]=-R*Y,s[8]=I,s[1]=K+Q*I,s[5]=q-ne*I,s[9]=-A*R,s[2]=ne-q*I,s[6]=Q+K*I,s[10]=_*R}else if(n.order==="YXZ"){const q=R*G,K=R*Y,Q=I*G,ne=I*Y;s[0]=q+ne*A,s[4]=Q*A-K,s[8]=_*I,s[1]=_*Y,s[5]=_*G,s[9]=-A,s[2]=K*A-Q,s[6]=ne+q*A,s[10]=_*R}else if(n.order==="ZXY"){const q=R*G,K=R*Y,Q=I*G,ne=I*Y;s[0]=q-ne*A,s[4]=-_*Y,s[8]=Q+K*A,s[1]=K+Q*A,s[5]=_*G,s[9]=ne-q*A,s[2]=-_*I,s[6]=A,s[10]=_*R}else if(n.order==="ZYX"){const q=_*G,K=_*Y,Q=A*G,ne=A*Y;s[0]=R*G,s[4]=Q*I-K,s[8]=q*I+ne,s[1]=R*Y,s[5]=ne*I+q,s[9]=K*I-Q,s[2]=-I,s[6]=A*R,s[10]=_*R}else if(n.order==="YZX"){const q=_*R,K=_*I,Q=A*R,ne=A*I;s[0]=R*G,s[4]=ne-q*Y,s[8]=Q*Y+K,s[1]=Y,s[5]=_*G,s[9]=-A*G,s[2]=-I*G,s[6]=K*Y+Q,s[10]=q-ne*Y}else if(n.order==="XZY"){const q=_*R,K=_*I,Q=A*R,ne=A*I;s[0]=R*G,s[4]=-Y,s[8]=I*G,s[1]=q*Y+ne,s[5]=_*G,s[9]=K*Y-Q,s[2]=Q*Y-K,s[6]=A*G,s[10]=ne*Y+q}return s[3]=0,s[7]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromQuaternion(n){return this.compose(_zero,n,_one)}lookAt(n,s,f){const d=this.elements;return _z.subVectors(n,s),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(f,_z),_x.lengthSq()===0&&(Math.abs(f.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(f,_z)),_x.normalize(),_y.crossVectors(_z,_x),d[0]=_x.x,d[4]=_y.x,d[8]=_z.x,d[1]=_x.y,d[5]=_y.y,d[9]=_z.y,d[2]=_x.z,d[6]=_y.z,d[10]=_z.z,this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,s){const f=n.elements,d=s.elements,y=this.elements,_=f[0],A=f[4],R=f[8],I=f[12],G=f[1],Y=f[5],q=f[9],K=f[13],Q=f[2],ne=f[6],te=f[10],J=f[14],ie=f[3],re=f[7],le=f[11],fe=f[15],pe=d[0],de=d[4],se=d[8],he=d[12],Se=d[1],ve=d[5],Re=d[9],Ee=d[13],Oe=d[2],Ne=d[6],ye=d[10],Ae=d[14],_e=d[3],Te=d[7],we=d[11],ge=d[15];return y[0]=_*pe+A*Se+R*Oe+I*_e,y[4]=_*de+A*ve+R*Ne+I*Te,y[8]=_*se+A*Re+R*ye+I*we,y[12]=_*he+A*Ee+R*Ae+I*ge,y[1]=G*pe+Y*Se+q*Oe+K*_e,y[5]=G*de+Y*ve+q*Ne+K*Te,y[9]=G*se+Y*Re+q*ye+K*we,y[13]=G*he+Y*Ee+q*Ae+K*ge,y[2]=Q*pe+ne*Se+te*Oe+J*_e,y[6]=Q*de+ne*ve+te*Ne+J*Te,y[10]=Q*se+ne*Re+te*ye+J*we,y[14]=Q*he+ne*Ee+te*Ae+J*ge,y[3]=ie*pe+re*Se+le*Oe+fe*_e,y[7]=ie*de+re*ve+le*Ne+fe*Te,y[11]=ie*se+re*Re+le*ye+fe*we,y[15]=ie*he+re*Ee+le*Ae+fe*ge,this}multiplyScalar(n){const s=this.elements;return s[0]*=n,s[4]*=n,s[8]*=n,s[12]*=n,s[1]*=n,s[5]*=n,s[9]*=n,s[13]*=n,s[2]*=n,s[6]*=n,s[10]*=n,s[14]*=n,s[3]*=n,s[7]*=n,s[11]*=n,s[15]*=n,this}determinant(){const n=this.elements,s=n[0],f=n[4],d=n[8],y=n[12],_=n[1],A=n[5],R=n[9],I=n[13],G=n[2],Y=n[6],q=n[10],K=n[14],Q=n[3],ne=n[7],te=n[11],J=n[15],ie=R*K-I*q,re=A*K-I*Y,le=A*q-R*Y,fe=_*K-I*G,pe=_*q-R*G,de=_*Y-A*G;return s*(ne*ie-te*re+J*le)-f*(Q*ie-te*fe+J*pe)+d*(Q*re-ne*fe+J*de)-y*(Q*le-ne*pe+te*de)}transpose(){const n=this.elements;let s;return s=n[1],n[1]=n[4],n[4]=s,s=n[2],n[2]=n[8],n[8]=s,s=n[6],n[6]=n[9],n[9]=s,s=n[3],n[3]=n[12],n[12]=s,s=n[7],n[7]=n[13],n[13]=s,s=n[11],n[11]=n[14],n[14]=s,this}setPosition(n,s,f){const d=this.elements;return n.isVector3?(d[12]=n.x,d[13]=n.y,d[14]=n.z):(d[12]=n,d[13]=s,d[14]=f),this}invert(){const n=this.elements,s=n[0],f=n[1],d=n[2],y=n[3],_=n[4],A=n[5],R=n[6],I=n[7],G=n[8],Y=n[9],q=n[10],K=n[11],Q=n[12],ne=n[13],te=n[14],J=n[15],ie=s*A-f*_,re=s*R-d*_,le=s*I-y*_,fe=f*R-d*A,pe=f*I-y*A,de=d*I-y*R,se=G*ne-Y*Q,he=G*te-q*Q,Se=G*J-K*Q,ve=Y*te-q*ne,Re=Y*J-K*ne,Ee=q*J-K*te,Oe=ie*Ee-re*Re+le*ve+fe*Se-pe*he+de*se;if(Oe===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Ne=1/Oe;return n[0]=(A*Ee-R*Re+I*ve)*Ne,n[1]=(d*Re-f*Ee-y*ve)*Ne,n[2]=(ne*de-te*pe+J*fe)*Ne,n[3]=(q*pe-Y*de-K*fe)*Ne,n[4]=(R*Se-_*Ee-I*he)*Ne,n[5]=(s*Ee-d*Se+y*he)*Ne,n[6]=(te*le-Q*de-J*re)*Ne,n[7]=(G*de-q*le+K*re)*Ne,n[8]=(_*Re-A*Se+I*se)*Ne,n[9]=(f*Se-s*Re-y*se)*Ne,n[10]=(Q*pe-ne*le+J*ie)*Ne,n[11]=(Y*le-G*pe-K*ie)*Ne,n[12]=(A*he-_*ve-R*se)*Ne,n[13]=(s*ve-f*he+d*se)*Ne,n[14]=(ne*re-Q*fe-te*ie)*Ne,n[15]=(G*fe-Y*re+q*ie)*Ne,this}scale(n){const s=this.elements,f=n.x,d=n.y,y=n.z;return s[0]*=f,s[4]*=d,s[8]*=y,s[1]*=f,s[5]*=d,s[9]*=y,s[2]*=f,s[6]*=d,s[10]*=y,s[3]*=f,s[7]*=d,s[11]*=y,this}getMaxScaleOnAxis(){const n=this.elements,s=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],f=n[4]*n[4]+n[5]*n[5]+n[6]*n[6],d=n[8]*n[8]+n[9]*n[9]+n[10]*n[10];return Math.sqrt(Math.max(s,f,d))}makeTranslation(n,s,f){return n.isVector3?this.set(1,0,0,n.x,0,1,0,n.y,0,0,1,n.z,0,0,0,1):this.set(1,0,0,n,0,1,0,s,0,0,1,f,0,0,0,1),this}makeRotationX(n){const s=Math.cos(n),f=Math.sin(n);return this.set(1,0,0,0,0,s,-f,0,0,f,s,0,0,0,0,1),this}makeRotationY(n){const s=Math.cos(n),f=Math.sin(n);return this.set(s,0,f,0,0,1,0,0,-f,0,s,0,0,0,0,1),this}makeRotationZ(n){const s=Math.cos(n),f=Math.sin(n);return this.set(s,-f,0,0,f,s,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(n,s){const f=Math.cos(s),d=Math.sin(s),y=1-f,_=n.x,A=n.y,R=n.z,I=y*_,G=y*A;return this.set(I*_+f,I*A-d*R,I*R+d*A,0,I*A+d*R,G*A+f,G*R-d*_,0,I*R-d*A,G*R+d*_,y*R*R+f,0,0,0,0,1),this}makeScale(n,s,f){return this.set(n,0,0,0,0,s,0,0,0,0,f,0,0,0,0,1),this}makeShear(n,s,f,d,y,_){return this.set(1,f,y,0,n,1,_,0,s,d,1,0,0,0,0,1),this}compose(n,s,f){const d=this.elements,y=s._x,_=s._y,A=s._z,R=s._w,I=y+y,G=_+_,Y=A+A,q=y*I,K=y*G,Q=y*Y,ne=_*G,te=_*Y,J=A*Y,ie=R*I,re=R*G,le=R*Y,fe=f.x,pe=f.y,de=f.z;return d[0]=(1-(ne+J))*fe,d[1]=(K+le)*fe,d[2]=(Q-re)*fe,d[3]=0,d[4]=(K-le)*pe,d[5]=(1-(q+J))*pe,d[6]=(te+ie)*pe,d[7]=0,d[8]=(Q+re)*de,d[9]=(te-ie)*de,d[10]=(1-(q+ne))*de,d[11]=0,d[12]=n.x,d[13]=n.y,d[14]=n.z,d[15]=1,this}decompose(n,s,f){const d=this.elements;n.x=d[12],n.y=d[13],n.z=d[14];const y=this.determinant();if(y===0)return f.set(1,1,1),s.identity(),this;let _=_v1$7.set(d[0],d[1],d[2]).length();const A=_v1$7.set(d[4],d[5],d[6]).length(),R=_v1$7.set(d[8],d[9],d[10]).length();y<0&&(_=-_),_m1$2.copy(this);const I=1/_,G=1/A,Y=1/R;return _m1$2.elements[0]*=I,_m1$2.elements[1]*=I,_m1$2.elements[2]*=I,_m1$2.elements[4]*=G,_m1$2.elements[5]*=G,_m1$2.elements[6]*=G,_m1$2.elements[8]*=Y,_m1$2.elements[9]*=Y,_m1$2.elements[10]*=Y,s.setFromRotationMatrix(_m1$2),f.x=_,f.y=A,f.z=R,this}makePerspective(n,s,f,d,y,_,A=WebGLCoordinateSystem,R=!1){const I=this.elements,G=2*y/(s-n),Y=2*y/(f-d),q=(s+n)/(s-n),K=(f+d)/(f-d);let Q,ne;if(R)Q=y/(_-y),ne=_*y/(_-y);else if(A===WebGLCoordinateSystem)Q=-(_+y)/(_-y),ne=-2*_*y/(_-y);else if(A===WebGPUCoordinateSystem)Q=-_/(_-y),ne=-_*y/(_-y);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+A);return I[0]=G,I[4]=0,I[8]=q,I[12]=0,I[1]=0,I[5]=Y,I[9]=K,I[13]=0,I[2]=0,I[6]=0,I[10]=Q,I[14]=ne,I[3]=0,I[7]=0,I[11]=-1,I[15]=0,this}makeOrthographic(n,s,f,d,y,_,A=WebGLCoordinateSystem,R=!1){const I=this.elements,G=2/(s-n),Y=2/(f-d),q=-(s+n)/(s-n),K=-(f+d)/(f-d);let Q,ne;if(R)Q=1/(_-y),ne=_/(_-y);else if(A===WebGLCoordinateSystem)Q=-2/(_-y),ne=-(_+y)/(_-y);else if(A===WebGPUCoordinateSystem)Q=-1/(_-y),ne=-y/(_-y);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+A);return I[0]=G,I[4]=0,I[8]=0,I[12]=q,I[1]=0,I[5]=Y,I[9]=0,I[13]=K,I[2]=0,I[6]=0,I[10]=Q,I[14]=ne,I[3]=0,I[7]=0,I[11]=0,I[15]=1,this}equals(n){const s=this.elements,f=n.elements;for(let d=0;d<16;d++)if(s[d]!==f[d])return!1;return!0}fromArray(n,s=0){for(let f=0;f<16;f++)this.elements[f]=n[f+s];return this}toArray(n=[],s=0){const f=this.elements;return n[s]=f[0],n[s+1]=f[1],n[s+2]=f[2],n[s+3]=f[3],n[s+4]=f[4],n[s+5]=f[5],n[s+6]=f[6],n[s+7]=f[7],n[s+8]=f[8],n[s+9]=f[9],n[s+10]=f[10],n[s+11]=f[11],n[s+12]=f[12],n[s+13]=f[13],n[s+14]=f[14],n[s+15]=f[15],n}}const _v1$7=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$2=new Matrix4,_quaternion$4=new Quaternion;class Euler{constructor(n=0,s=0,f=0,d=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=n,this._y=s,this._z=f,this._order=d}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get order(){return this._order}set order(n){this._order=n,this._onChangeCallback()}set(n,s,f,d=this._order){return this._x=n,this._y=s,this._z=f,this._order=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}setFromRotationMatrix(n,s=this._order,f=!0){const d=n.elements,y=d[0],_=d[4],A=d[8],R=d[1],I=d[5],G=d[9],Y=d[2],q=d[6],K=d[10];switch(s){case"XYZ":this._y=Math.asin(clamp(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(-G,K),this._z=Math.atan2(-_,y)):(this._x=Math.atan2(q,I),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(G,-1,1)),Math.abs(G)<.9999999?(this._y=Math.atan2(A,K),this._z=Math.atan2(R,I)):(this._y=Math.atan2(-Y,y),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(q,-1,1)),Math.abs(q)<.9999999?(this._y=Math.atan2(-Y,K),this._z=Math.atan2(-_,I)):(this._y=0,this._z=Math.atan2(R,y));break;case"ZYX":this._y=Math.asin(-clamp(Y,-1,1)),Math.abs(Y)<.9999999?(this._x=Math.atan2(q,K),this._z=Math.atan2(R,y)):(this._x=0,this._z=Math.atan2(-_,I));break;case"YZX":this._z=Math.asin(clamp(R,-1,1)),Math.abs(R)<.9999999?(this._x=Math.atan2(-G,I),this._y=Math.atan2(-Y,y)):(this._x=0,this._y=Math.atan2(A,K));break;case"XZY":this._z=Math.asin(-clamp(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(q,I),this._y=Math.atan2(A,y)):(this._x=Math.atan2(-G,K),this._y=0);break;default:warn("Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,f===!0&&this._onChangeCallback(),this}setFromQuaternion(n,s,f){return _matrix$2.makeRotationFromQuaternion(n),this.setFromRotationMatrix(_matrix$2,s,f)}setFromVector3(n,s=this._order){return this.set(n.x,n.y,n.z,s)}reorder(n){return _quaternion$4.setFromEuler(this),this.setFromQuaternion(_quaternion$4,n)}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}fromArray(n){return this._x=n[0],this._y=n[1],this._z=n[2],n[3]!==void 0&&(this._order=n[3]),this._onChangeCallback(),this}toArray(n=[],s=0){return n[s]=this._x,n[s+1]=this._y,n[s+2]=this._z,n[s+3]=this._order,n}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(n){this.mask=(1<<n|0)>>>0}enable(n){this.mask|=1<<n|0}enableAll(){this.mask=-1}toggle(n){this.mask^=1<<n|0}disable(n){this.mask&=~(1<<n|0)}disableAll(){this.mask=0}test(n){return(this.mask&n.mask)!==0}isEnabled(n){return(this.mask&(1<<n|0))!==0}}let _object3DId=0;const _v1$6=new Vector3,_q1=new Quaternion,_m1$1$1=new Matrix4,_target=new Vector3,_position$4=new Vector3,_scale$3=new Vector3,_quaternion$3=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const n=new Vector3,s=new Euler,f=new Quaternion,d=new Vector3(1,1,1);function y(){f.setFromEuler(s,!1)}function _(){s.setFromQuaternion(f,void 0,!1)}s._onChange(y),f._onChange(_),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:s},quaternion:{configurable:!0,enumerable:!0,value:f},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.static=!1,this.userData={},this.pivot=null}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(n){return this.quaternion.premultiply(n),this}setRotationFromAxisAngle(n,s){this.quaternion.setFromAxisAngle(n,s)}setRotationFromEuler(n){this.quaternion.setFromEuler(n,!0)}setRotationFromMatrix(n){this.quaternion.setFromRotationMatrix(n)}setRotationFromQuaternion(n){this.quaternion.copy(n)}rotateOnAxis(n,s){return _q1.setFromAxisAngle(n,s),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(n,s){return _q1.setFromAxisAngle(n,s),this.quaternion.premultiply(_q1),this}rotateX(n){return this.rotateOnAxis(_xAxis,n)}rotateY(n){return this.rotateOnAxis(_yAxis,n)}rotateZ(n){return this.rotateOnAxis(_zAxis,n)}translateOnAxis(n,s){return _v1$6.copy(n).applyQuaternion(this.quaternion),this.position.add(_v1$6.multiplyScalar(s)),this}translateX(n){return this.translateOnAxis(_xAxis,n)}translateY(n){return this.translateOnAxis(_yAxis,n)}translateZ(n){return this.translateOnAxis(_zAxis,n)}localToWorld(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(this.matrixWorld)}worldToLocal(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(_m1$1$1.copy(this.matrixWorld).invert())}lookAt(n,s,f){n.isVector3?_target.copy(n):_target.set(n,s,f);const d=this.parent;this.updateWorldMatrix(!0,!1),_position$4.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1$1.lookAt(_position$4,_target,this.up):_m1$1$1.lookAt(_target,_position$4,this.up),this.quaternion.setFromRotationMatrix(_m1$1$1),d&&(_m1$1$1.extractRotation(d.matrixWorld),_q1.setFromRotationMatrix(_m1$1$1),this.quaternion.premultiply(_q1.invert()))}add(n){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}return n===this?(error("Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.removeFromParent(),n.parent=this,this.children.push(n),n.dispatchEvent(_addedEvent),_childaddedEvent.child=n,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):error("Object3D.add: object not an instance of THREE.Object3D.",n),this)}remove(n){if(arguments.length>1){for(let f=0;f<arguments.length;f++)this.remove(arguments[f]);return this}const s=this.children.indexOf(n);return s!==-1&&(n.parent=null,this.children.splice(s,1),n.dispatchEvent(_removedEvent),_childremovedEvent.child=n,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null),this}removeFromParent(){const n=this.parent;return n!==null&&n.remove(this),this}clear(){return this.remove(...this.children)}attach(n){return this.updateWorldMatrix(!0,!1),_m1$1$1.copy(this.matrixWorld).invert(),n.parent!==null&&(n.parent.updateWorldMatrix(!0,!1),_m1$1$1.multiply(n.parent.matrixWorld)),n.applyMatrix4(_m1$1$1),n.removeFromParent(),n.parent=this,this.children.push(n),n.updateWorldMatrix(!1,!0),n.dispatchEvent(_addedEvent),_childaddedEvent.child=n,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(n){return this.getObjectByProperty("id",n)}getObjectByName(n){return this.getObjectByProperty("name",n)}getObjectByProperty(n,s){if(this[n]===s)return this;for(let f=0,d=this.children.length;f<d;f++){const _=this.children[f].getObjectByProperty(n,s);if(_!==void 0)return _}}getObjectsByProperty(n,s,f=[]){this[n]===s&&f.push(this);const d=this.children;for(let y=0,_=d.length;y<_;y++)d[y].getObjectsByProperty(n,s,f);return f}getWorldPosition(n){return this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$4,n,_scale$3),n}getWorldScale(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$4,_quaternion$3,n),n}getWorldDirection(n){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return n.set(s[8],s[9],s[10]).normalize()}raycast(){}traverse(n){n(this);const s=this.children;for(let f=0,d=s.length;f<d;f++)s[f].traverse(n)}traverseVisible(n){if(this.visible===!1)return;n(this);const s=this.children;for(let f=0,d=s.length;f<d;f++)s[f].traverseVisible(n)}traverseAncestors(n){const s=this.parent;s!==null&&(n(s),s.traverseAncestors(n))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale);const n=this.pivot;if(n!==null){const s=n.x,f=n.y,d=n.z,y=this.matrix.elements;y[12]+=s-y[0]*s-y[4]*f-y[8]*d,y[13]+=f-y[1]*s-y[5]*f-y[9]*d,y[14]+=d-y[2]*s-y[6]*f-y[10]*d}this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,n=!0);const s=this.children;for(let f=0,d=s.length;f<d;f++)s[f].updateMatrixWorld(n)}updateWorldMatrix(n,s){const f=this.parent;if(n===!0&&f!==null&&f.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),s===!0){const d=this.children;for(let y=0,_=d.length;y<_;y++)d[y].updateWorldMatrix(!1,!0)}}toJSON(n){const s=n===void 0||typeof n=="string",f={};s&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},f.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const d={};d.uuid=this.uuid,d.type=this.type,this.name!==""&&(d.name=this.name),this.castShadow===!0&&(d.castShadow=!0),this.receiveShadow===!0&&(d.receiveShadow=!0),this.visible===!1&&(d.visible=!1),this.frustumCulled===!1&&(d.frustumCulled=!1),this.renderOrder!==0&&(d.renderOrder=this.renderOrder),this.static!==!1&&(d.static=this.static),Object.keys(this.userData).length>0&&(d.userData=this.userData),d.layers=this.layers.mask,d.matrix=this.matrix.toArray(),d.up=this.up.toArray(),this.pivot!==null&&(d.pivot=this.pivot.toArray()),this.matrixAutoUpdate===!1&&(d.matrixAutoUpdate=!1),this.morphTargetDictionary!==void 0&&(d.morphTargetDictionary=Object.assign({},this.morphTargetDictionary)),this.morphTargetInfluences!==void 0&&(d.morphTargetInfluences=this.morphTargetInfluences.slice()),this.isInstancedMesh&&(d.type="InstancedMesh",d.count=this.count,d.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(d.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(d.type="BatchedMesh",d.perObjectFrustumCulled=this.perObjectFrustumCulled,d.sortObjects=this.sortObjects,d.drawRanges=this._drawRanges,d.reservedRanges=this._reservedRanges,d.geometryInfo=this._geometryInfo.map(A=>({...A,boundingBox:A.boundingBox?A.boundingBox.toJSON():void 0,boundingSphere:A.boundingSphere?A.boundingSphere.toJSON():void 0})),d.instanceInfo=this._instanceInfo.map(A=>({...A})),d.availableInstanceIds=this._availableInstanceIds.slice(),d.availableGeometryIds=this._availableGeometryIds.slice(),d.nextIndexStart=this._nextIndexStart,d.nextVertexStart=this._nextVertexStart,d.geometryCount=this._geometryCount,d.maxInstanceCount=this._maxInstanceCount,d.maxVertexCount=this._maxVertexCount,d.maxIndexCount=this._maxIndexCount,d.geometryInitialized=this._geometryInitialized,d.matricesTexture=this._matricesTexture.toJSON(n),d.indirectTexture=this._indirectTexture.toJSON(n),this._colorsTexture!==null&&(d.colorsTexture=this._colorsTexture.toJSON(n)),this.boundingSphere!==null&&(d.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(d.boundingBox=this.boundingBox.toJSON()));function y(A,R){return A[R.uuid]===void 0&&(A[R.uuid]=R.toJSON(n)),R.uuid}if(this.isScene)this.background&&(this.background.isColor?d.background=this.background.toJSON():this.background.isTexture&&(d.background=this.background.toJSON(n).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(d.environment=this.environment.toJSON(n).uuid);else if(this.isMesh||this.isLine||this.isPoints){d.geometry=y(n.geometries,this.geometry);const A=this.geometry.parameters;if(A!==void 0&&A.shapes!==void 0){const R=A.shapes;if(Array.isArray(R))for(let I=0,G=R.length;I<G;I++){const Y=R[I];y(n.shapes,Y)}else y(n.shapes,R)}}if(this.isSkinnedMesh&&(d.bindMode=this.bindMode,d.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(y(n.skeletons,this.skeleton),d.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const A=[];for(let R=0,I=this.material.length;R<I;R++)A.push(y(n.materials,this.material[R]));d.material=A}else d.material=y(n.materials,this.material);if(this.children.length>0){d.children=[];for(let A=0;A<this.children.length;A++)d.children.push(this.children[A].toJSON(n).object)}if(this.animations.length>0){d.animations=[];for(let A=0;A<this.animations.length;A++){const R=this.animations[A];d.animations.push(y(n.animations,R))}}if(s){const A=_(n.geometries),R=_(n.materials),I=_(n.textures),G=_(n.images),Y=_(n.shapes),q=_(n.skeletons),K=_(n.animations),Q=_(n.nodes);A.length>0&&(f.geometries=A),R.length>0&&(f.materials=R),I.length>0&&(f.textures=I),G.length>0&&(f.images=G),Y.length>0&&(f.shapes=Y),q.length>0&&(f.skeletons=q),K.length>0&&(f.animations=K),Q.length>0&&(f.nodes=Q)}return f.object=d,f;function _(A){const R=[];for(const I in A){const G=A[I];delete G.metadata,R.push(G)}return R}}clone(n){return new this.constructor().copy(this,n)}copy(n,s=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),n.pivot!==null&&(this.pivot=n.pivot.clone()),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldAutoUpdate=n.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.static=n.static,this.animations=n.animations.slice(),this.userData=JSON.parse(JSON.stringify(n.userData)),s===!0)for(let f=0;f<n.children.length;f++){const d=n.children[f];this.add(d.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(n){return this._targetRay!==null&&this._targetRay.dispatchEvent(n),this._grip!==null&&this._grip.dispatchEvent(n),this._hand!==null&&this._hand.dispatchEvent(n),this}connect(n){if(n&&n.hand){const s=this._hand;if(s)for(const f of n.hand.values())this._getHandJoint(s,f)}return this.dispatchEvent({type:"connected",data:n}),this}disconnect(n){return this.dispatchEvent({type:"disconnected",data:n}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(n,s,f){let d=null,y=null,_=null;const A=this._targetRay,R=this._grip,I=this._hand;if(n&&s.session.visibilityState!=="visible-blurred"){if(I&&n.hand){_=!0;for(const ne of n.hand.values()){const te=s.getJointPose(ne,f),J=this._getHandJoint(I,ne);te!==null&&(J.matrix.fromArray(te.transform.matrix),J.matrix.decompose(J.position,J.rotation,J.scale),J.matrixWorldNeedsUpdate=!0,J.jointRadius=te.radius),J.visible=te!==null}const G=I.joints["index-finger-tip"],Y=I.joints["thumb-tip"],q=G.position.distanceTo(Y.position),K=.02,Q=.005;I.inputState.pinching&&q>K+Q?(I.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!I.inputState.pinching&&q<=K-Q&&(I.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}else R!==null&&n.gripSpace&&(y=s.getPose(n.gripSpace,f),y!==null&&(R.matrix.fromArray(y.transform.matrix),R.matrix.decompose(R.position,R.rotation,R.scale),R.matrixWorldNeedsUpdate=!0,y.linearVelocity?(R.hasLinearVelocity=!0,R.linearVelocity.copy(y.linearVelocity)):R.hasLinearVelocity=!1,y.angularVelocity?(R.hasAngularVelocity=!0,R.angularVelocity.copy(y.angularVelocity)):R.hasAngularVelocity=!1));A!==null&&(d=s.getPose(n.targetRaySpace,f),d===null&&y!==null&&(d=y),d!==null&&(A.matrix.fromArray(d.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,d.linearVelocity?(A.hasLinearVelocity=!0,A.linearVelocity.copy(d.linearVelocity)):A.hasLinearVelocity=!1,d.angularVelocity?(A.hasAngularVelocity=!0,A.angularVelocity.copy(d.angularVelocity)):A.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return A!==null&&(A.visible=d!==null),R!==null&&(R.visible=y!==null),I!==null&&(I.visible=_!==null),this}_getHandJoint(n,s){if(n.joints[s.jointName]===void 0){const f=new Group;f.matrixAutoUpdate=!1,f.visible=!1,n.joints[s.jointName]=f,n.add(f)}return n.joints[s.jointName]}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(u,n,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?u+(n-u)*6*s:s<1/2?n:s<2/3?u+(n-u)*6*(2/3-s):u}class Color{constructor(n,s,f){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(n,s,f)}set(n,s,f){if(s===void 0&&f===void 0){const d=n;d&&d.isColor?this.copy(d):typeof d=="number"?this.setHex(d):typeof d=="string"&&this.setStyle(d)}else this.setRGB(n,s,f);return this}setScalar(n){return this.r=n,this.g=n,this.b=n,this}setHex(n,s=SRGBColorSpace){return n=Math.floor(n),this.r=(n>>16&255)/255,this.g=(n>>8&255)/255,this.b=(n&255)/255,ColorManagement.colorSpaceToWorking(this,s),this}setRGB(n,s,f,d=ColorManagement.workingColorSpace){return this.r=n,this.g=s,this.b=f,ColorManagement.colorSpaceToWorking(this,d),this}setHSL(n,s,f,d=ColorManagement.workingColorSpace){if(n=euclideanModulo(n,1),s=clamp(s,0,1),f=clamp(f,0,1),s===0)this.r=this.g=this.b=f;else{const y=f<=.5?f*(1+s):f+s-f*s,_=2*f-y;this.r=hue2rgb(_,y,n+1/3),this.g=hue2rgb(_,y,n),this.b=hue2rgb(_,y,n-1/3)}return ColorManagement.colorSpaceToWorking(this,d),this}setStyle(n,s=SRGBColorSpace){function f(y){y!==void 0&&parseFloat(y)<1&&warn("Color: Alpha component of "+n+" will be ignored.")}let d;if(d=/^(\w+)\(([^\)]*)\)/.exec(n)){let y;const _=d[1],A=d[2];switch(_){case"rgb":case"rgba":if(y=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return f(y[4]),this.setRGB(Math.min(255,parseInt(y[1],10))/255,Math.min(255,parseInt(y[2],10))/255,Math.min(255,parseInt(y[3],10))/255,s);if(y=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return f(y[4]),this.setRGB(Math.min(100,parseInt(y[1],10))/100,Math.min(100,parseInt(y[2],10))/100,Math.min(100,parseInt(y[3],10))/100,s);break;case"hsl":case"hsla":if(y=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return f(y[4]),this.setHSL(parseFloat(y[1])/360,parseFloat(y[2])/100,parseFloat(y[3])/100,s);break;default:warn("Color: Unknown color model "+n)}}else if(d=/^\#([A-Fa-f\d]+)$/.exec(n)){const y=d[1],_=y.length;if(_===3)return this.setRGB(parseInt(y.charAt(0),16)/15,parseInt(y.charAt(1),16)/15,parseInt(y.charAt(2),16)/15,s);if(_===6)return this.setHex(parseInt(y,16),s);warn("Color: Invalid hex color "+n)}else if(n&&n.length>0)return this.setColorName(n,s);return this}setColorName(n,s=SRGBColorSpace){const f=_colorKeywords[n.toLowerCase()];return f!==void 0?this.setHex(f,s):warn("Color: Unknown color "+n),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(n){return this.r=n.r,this.g=n.g,this.b=n.b,this}copySRGBToLinear(n){return this.r=SRGBToLinear(n.r),this.g=SRGBToLinear(n.g),this.b=SRGBToLinear(n.b),this}copyLinearToSRGB(n){return this.r=LinearToSRGB(n.r),this.g=LinearToSRGB(n.g),this.b=LinearToSRGB(n.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(n=SRGBColorSpace){return ColorManagement.workingToColorSpace(_color.copy(this),n),Math.round(clamp(_color.r*255,0,255))*65536+Math.round(clamp(_color.g*255,0,255))*256+Math.round(clamp(_color.b*255,0,255))}getHexString(n=SRGBColorSpace){return("000000"+this.getHex(n).toString(16)).slice(-6)}getHSL(n,s=ColorManagement.workingColorSpace){ColorManagement.workingToColorSpace(_color.copy(this),s);const f=_color.r,d=_color.g,y=_color.b,_=Math.max(f,d,y),A=Math.min(f,d,y);let R,I;const G=(A+_)/2;if(A===_)R=0,I=0;else{const Y=_-A;switch(I=G<=.5?Y/(_+A):Y/(2-_-A),_){case f:R=(d-y)/Y+(d<y?6:0);break;case d:R=(y-f)/Y+2;break;case y:R=(f-d)/Y+4;break}R/=6}return n.h=R,n.s=I,n.l=G,n}getRGB(n,s=ColorManagement.workingColorSpace){return ColorManagement.workingToColorSpace(_color.copy(this),s),n.r=_color.r,n.g=_color.g,n.b=_color.b,n}getStyle(n=SRGBColorSpace){ColorManagement.workingToColorSpace(_color.copy(this),n);const s=_color.r,f=_color.g,d=_color.b;return n!==SRGBColorSpace?`color(${n} ${s.toFixed(3)} ${f.toFixed(3)} ${d.toFixed(3)})`:`rgb(${Math.round(s*255)},${Math.round(f*255)},${Math.round(d*255)})`}offsetHSL(n,s,f){return this.getHSL(_hslA),this.setHSL(_hslA.h+n,_hslA.s+s,_hslA.l+f)}add(n){return this.r+=n.r,this.g+=n.g,this.b+=n.b,this}addColors(n,s){return this.r=n.r+s.r,this.g=n.g+s.g,this.b=n.b+s.b,this}addScalar(n){return this.r+=n,this.g+=n,this.b+=n,this}sub(n){return this.r=Math.max(0,this.r-n.r),this.g=Math.max(0,this.g-n.g),this.b=Math.max(0,this.b-n.b),this}multiply(n){return this.r*=n.r,this.g*=n.g,this.b*=n.b,this}multiplyScalar(n){return this.r*=n,this.g*=n,this.b*=n,this}lerp(n,s){return this.r+=(n.r-this.r)*s,this.g+=(n.g-this.g)*s,this.b+=(n.b-this.b)*s,this}lerpColors(n,s,f){return this.r=n.r+(s.r-n.r)*f,this.g=n.g+(s.g-n.g)*f,this.b=n.b+(s.b-n.b)*f,this}lerpHSL(n,s){this.getHSL(_hslA),n.getHSL(_hslB);const f=lerp(_hslA.h,_hslB.h,s),d=lerp(_hslA.s,_hslB.s,s),y=lerp(_hslA.l,_hslB.l,s);return this.setHSL(f,d,y),this}setFromVector3(n){return this.r=n.x,this.g=n.y,this.b=n.z,this}applyMatrix3(n){const s=this.r,f=this.g,d=this.b,y=n.elements;return this.r=y[0]*s+y[3]*f+y[6]*d,this.g=y[1]*s+y[4]*f+y[7]*d,this.b=y[2]*s+y[5]*f+y[8]*d,this}equals(n){return n.r===this.r&&n.g===this.g&&n.b===this.b}fromArray(n,s=0){return this.r=n[s],this.g=n[s+1],this.b=n[s+2],this}toArray(n=[],s=0){return n[s]=this.r,n[s+1]=this.g,n[s+2]=this.b,n}fromBufferAttribute(n,s){return this.r=n.getX(s),this.g=n.getY(s),this.b=n.getZ(s),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;class FogExp2{constructor(n,s=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color(n),this.density=s}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fog{constructor(n,s=1,f=1e3){this.isFog=!0,this.name="",this.color=new Color(n),this.near=s,this.far=f}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(n,s){return super.copy(n,s),n.background!==null&&(this.background=n.background.clone()),n.environment!==null&&(this.environment=n.environment.clone()),n.fog!==null&&(this.fog=n.fog.clone()),this.backgroundBlurriness=n.backgroundBlurriness,this.backgroundIntensity=n.backgroundIntensity,this.backgroundRotation.copy(n.backgroundRotation),this.environmentIntensity=n.environmentIntensity,this.environmentRotation.copy(n.environmentRotation),n.overrideMaterial!==null&&(this.overrideMaterial=n.overrideMaterial.clone()),this.matrixAutoUpdate=n.matrixAutoUpdate,this}toJSON(n){const s=super.toJSON(n);return this.fog!==null&&(s.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(s.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(s.object.backgroundIntensity=this.backgroundIntensity),s.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(s.object.environmentIntensity=this.environmentIntensity),s.object.environmentRotation=this.environmentRotation.toArray(),s}}const _v0$2=new Vector3,_v1$5=new Vector3,_v2$4=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3,_v40=new Vector4,_v41=new Vector4,_v42=new Vector4;class Triangle{constructor(n=new Vector3,s=new Vector3,f=new Vector3){this.a=n,this.b=s,this.c=f}static getNormal(n,s,f,d){d.subVectors(f,s),_v0$2.subVectors(n,s),d.cross(_v0$2);const y=d.lengthSq();return y>0?d.multiplyScalar(1/Math.sqrt(y)):d.set(0,0,0)}static getBarycoord(n,s,f,d,y){_v0$2.subVectors(d,s),_v1$5.subVectors(f,s),_v2$4.subVectors(n,s);const _=_v0$2.dot(_v0$2),A=_v0$2.dot(_v1$5),R=_v0$2.dot(_v2$4),I=_v1$5.dot(_v1$5),G=_v1$5.dot(_v2$4),Y=_*I-A*A;if(Y===0)return y.set(0,0,0),null;const q=1/Y,K=(I*R-A*G)*q,Q=(_*G-A*R)*q;return y.set(1-K-Q,Q,K)}static containsPoint(n,s,f,d){return this.getBarycoord(n,s,f,d,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(n,s,f,d,y,_,A,R){return this.getBarycoord(n,s,f,d,_v3$2)===null?(R.x=0,R.y=0,"z"in R&&(R.z=0),"w"in R&&(R.w=0),null):(R.setScalar(0),R.addScaledVector(y,_v3$2.x),R.addScaledVector(_,_v3$2.y),R.addScaledVector(A,_v3$2.z),R)}static getInterpolatedAttribute(n,s,f,d,y,_){return _v40.setScalar(0),_v41.setScalar(0),_v42.setScalar(0),_v40.fromBufferAttribute(n,s),_v41.fromBufferAttribute(n,f),_v42.fromBufferAttribute(n,d),_.setScalar(0),_.addScaledVector(_v40,y.x),_.addScaledVector(_v41,y.y),_.addScaledVector(_v42,y.z),_}static isFrontFacing(n,s,f,d){return _v0$2.subVectors(f,s),_v1$5.subVectors(n,s),_v0$2.cross(_v1$5).dot(d)<0}set(n,s,f){return this.a.copy(n),this.b.copy(s),this.c.copy(f),this}setFromPointsAndIndices(n,s,f,d){return this.a.copy(n[s]),this.b.copy(n[f]),this.c.copy(n[d]),this}setFromAttributeAndIndices(n,s,f,d){return this.a.fromBufferAttribute(n,s),this.b.fromBufferAttribute(n,f),this.c.fromBufferAttribute(n,d),this}clone(){return new this.constructor().copy(this)}copy(n){return this.a.copy(n.a),this.b.copy(n.b),this.c.copy(n.c),this}getArea(){return _v0$2.subVectors(this.c,this.b),_v1$5.subVectors(this.a,this.b),_v0$2.cross(_v1$5).length()*.5}getMidpoint(n){return n.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(n){return Triangle.getNormal(this.a,this.b,this.c,n)}getPlane(n){return n.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(n,s){return Triangle.getBarycoord(n,this.a,this.b,this.c,s)}getInterpolation(n,s,f,d,y){return Triangle.getInterpolation(n,this.a,this.b,this.c,s,f,d,y)}containsPoint(n){return Triangle.containsPoint(n,this.a,this.b,this.c)}isFrontFacing(n){return Triangle.isFrontFacing(this.a,this.b,this.c,n)}intersectsBox(n){return n.intersectsTriangle(this)}closestPointToPoint(n,s){const f=this.a,d=this.b,y=this.c;let _,A;_vab.subVectors(d,f),_vac.subVectors(y,f),_vap.subVectors(n,f);const R=_vab.dot(_vap),I=_vac.dot(_vap);if(R<=0&&I<=0)return s.copy(f);_vbp.subVectors(n,d);const G=_vab.dot(_vbp),Y=_vac.dot(_vbp);if(G>=0&&Y<=G)return s.copy(d);const q=R*Y-G*I;if(q<=0&&R>=0&&G<=0)return _=R/(R-G),s.copy(f).addScaledVector(_vab,_);_vcp.subVectors(n,y);const K=_vab.dot(_vcp),Q=_vac.dot(_vcp);if(Q>=0&&K<=Q)return s.copy(y);const ne=K*I-R*Q;if(ne<=0&&I>=0&&Q<=0)return A=I/(I-Q),s.copy(f).addScaledVector(_vac,A);const te=G*Q-K*Y;if(te<=0&&Y-G>=0&&K-Q>=0)return _vbc.subVectors(y,d),A=(Y-G)/(Y-G+(K-Q)),s.copy(d).addScaledVector(_vbc,A);const J=1/(te+ne+q);return _=ne*J,A=q*J,s.copy(f).addScaledVector(_vab,_).addScaledVector(_vac,A)}equals(n){return n.a.equals(this.a)&&n.b.equals(this.b)&&n.c.equals(this.c)}}class Box3{constructor(n=new Vector3(1/0,1/0,1/0),s=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=n,this.max=s}set(n,s){return this.min.copy(n),this.max.copy(s),this}setFromArray(n){this.makeEmpty();for(let s=0,f=n.length;s<f;s+=3)this.expandByPoint(_vector$b.fromArray(n,s));return this}setFromBufferAttribute(n){this.makeEmpty();for(let s=0,f=n.count;s<f;s++)this.expandByPoint(_vector$b.fromBufferAttribute(n,s));return this}setFromPoints(n){this.makeEmpty();for(let s=0,f=n.length;s<f;s++)this.expandByPoint(n[s]);return this}setFromCenterAndSize(n,s){const f=_vector$b.copy(s).multiplyScalar(.5);return this.min.copy(n).sub(f),this.max.copy(n).add(f),this}setFromObject(n,s=!1){return this.makeEmpty(),this.expandByObject(n,s)}clone(){return new this.constructor().copy(this)}copy(n){return this.min.copy(n.min),this.max.copy(n.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(n){return this.isEmpty()?n.set(0,0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(n){return this.isEmpty()?n.set(0,0,0):n.subVectors(this.max,this.min)}expandByPoint(n){return this.min.min(n),this.max.max(n),this}expandByVector(n){return this.min.sub(n),this.max.add(n),this}expandByScalar(n){return this.min.addScalar(-n),this.max.addScalar(n),this}expandByObject(n,s=!1){n.updateWorldMatrix(!1,!1);const f=n.geometry;if(f!==void 0){const y=f.getAttribute("position");if(s===!0&&y!==void 0&&n.isInstancedMesh!==!0)for(let _=0,A=y.count;_<A;_++)n.isMesh===!0?n.getVertexPosition(_,_vector$b):_vector$b.fromBufferAttribute(y,_),_vector$b.applyMatrix4(n.matrixWorld),this.expandByPoint(_vector$b);else n.boundingBox!==void 0?(n.boundingBox===null&&n.computeBoundingBox(),_box$4.copy(n.boundingBox)):(f.boundingBox===null&&f.computeBoundingBox(),_box$4.copy(f.boundingBox)),_box$4.applyMatrix4(n.matrixWorld),this.union(_box$4)}const d=n.children;for(let y=0,_=d.length;y<_;y++)this.expandByObject(d[y],s);return this}containsPoint(n){return n.x>=this.min.x&&n.x<=this.max.x&&n.y>=this.min.y&&n.y<=this.max.y&&n.z>=this.min.z&&n.z<=this.max.z}containsBox(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y&&this.min.z<=n.min.z&&n.max.z<=this.max.z}getParameter(n,s){return s.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y),(n.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(n){return n.max.x>=this.min.x&&n.min.x<=this.max.x&&n.max.y>=this.min.y&&n.min.y<=this.max.y&&n.max.z>=this.min.z&&n.min.z<=this.max.z}intersectsSphere(n){return this.clampPoint(n.center,_vector$b),_vector$b.distanceToSquared(n.center)<=n.radius*n.radius}intersectsPlane(n){let s,f;return n.normal.x>0?(s=n.normal.x*this.min.x,f=n.normal.x*this.max.x):(s=n.normal.x*this.max.x,f=n.normal.x*this.min.x),n.normal.y>0?(s+=n.normal.y*this.min.y,f+=n.normal.y*this.max.y):(s+=n.normal.y*this.max.y,f+=n.normal.y*this.min.y),n.normal.z>0?(s+=n.normal.z*this.min.z,f+=n.normal.z*this.max.z):(s+=n.normal.z*this.max.z,f+=n.normal.z*this.min.z),s<=-n.constant&&f>=-n.constant}intersectsTriangle(n){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$1.subVectors(n.a,_center),_v1$4.subVectors(n.b,_center),_v2$3.subVectors(n.c,_center),_f0.subVectors(_v1$4,_v0$1),_f1.subVectors(_v2$3,_v1$4),_f2.subVectors(_v0$1,_v2$3);let s=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(s,_v0$1,_v1$4,_v2$3,_extents)||(s=[1,0,0,0,1,0,0,0,1],!satForAxes(s,_v0$1,_v1$4,_v2$3,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),s=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(s,_v0$1,_v1$4,_v2$3,_extents))}clampPoint(n,s){return s.copy(n).clamp(this.min,this.max)}distanceToPoint(n){return this.clampPoint(n,_vector$b).distanceTo(n)}getBoundingSphere(n){return this.isEmpty()?n.makeEmpty():(this.getCenter(n.center),n.radius=this.getSize(_vector$b).length()*.5),n}intersect(n){return this.min.max(n.min),this.max.min(n.max),this.isEmpty()&&this.makeEmpty(),this}union(n){return this.min.min(n.min),this.max.max(n.max),this}applyMatrix4(n){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(n),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(n),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(n),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(n),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(n),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(n),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(n),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(n),this.setFromPoints(_points),this)}translate(n){return this.min.add(n),this.max.add(n),this}equals(n){return n.min.equals(this.min)&&n.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(n){return this.min.fromArray(n.min),this.max.fromArray(n.max),this}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$1=new Vector3,_v1$4=new Vector3,_v2$3=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(u,n,s,f,d){for(let y=0,_=u.length-3;y<=_;y+=3){_testAxis.fromArray(u,y);const A=d.x*Math.abs(_testAxis.x)+d.y*Math.abs(_testAxis.y)+d.z*Math.abs(_testAxis.z),R=n.dot(_testAxis),I=s.dot(_testAxis),G=f.dot(_testAxis);if(Math.max(-Math.max(R,I,G),Math.min(R,I,G))>A)return!1}return!0}const _tables=_generateTables();function _generateTables(){const u=new ArrayBuffer(4),n=new Float32Array(u),s=new Uint32Array(u),f=new Uint32Array(512),d=new Uint32Array(512);for(let R=0;R<256;++R){const I=R-127;I<-27?(f[R]=0,f[R|256]=32768,d[R]=24,d[R|256]=24):I<-14?(f[R]=1024>>-I-14,f[R|256]=1024>>-I-14|32768,d[R]=-I-1,d[R|256]=-I-1):I<=15?(f[R]=I+15<<10,f[R|256]=I+15<<10|32768,d[R]=13,d[R|256]=13):I<128?(f[R]=31744,f[R|256]=64512,d[R]=24,d[R|256]=24):(f[R]=31744,f[R|256]=64512,d[R]=13,d[R|256]=13)}const y=new Uint32Array(2048),_=new Uint32Array(64),A=new Uint32Array(64);for(let R=1;R<1024;++R){let I=R<<13,G=0;for(;(I&8388608)===0;)I<<=1,G-=8388608;I&=-8388609,G+=947912704,y[R]=I|G}for(let R=1024;R<2048;++R)y[R]=939524096+(R-1024<<13);for(let R=1;R<31;++R)_[R]=R<<23;_[31]=1199570944,_[32]=2147483648;for(let R=33;R<63;++R)_[R]=2147483648+(R-32<<23);_[63]=3347054592;for(let R=1;R<64;++R)R!==32&&(A[R]=1024);return{floatView:n,uint32View:s,baseTable:f,shiftTable:d,mantissaTable:y,exponentTable:_,offsetTable:A}}function toHalfFloat(u){Math.abs(u)>65504&&warn("DataUtils.toHalfFloat(): Value out of range."),u=clamp(u,-65504,65504),_tables.floatView[0]=u;const n=_tables.uint32View[0],s=n>>23&511;return _tables.baseTable[s]+((n&8388607)>>_tables.shiftTable[s])}function fromHalfFloat(u){const n=u>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[n]+(u&1023)]+_tables.exponentTable[n],_tables.floatView[0]}class DataUtils{static toHalfFloat(n){return toHalfFloat(n)}static fromHalfFloat(n){return fromHalfFloat(n)}}const _vector$a=new Vector3,_vector2$1=new Vector2;let _id$2=0;class BufferAttribute{constructor(n,s,f=!1){if(Array.isArray(n))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.name="",this.array=n,this.itemSize=s,this.count=n!==void 0?n.length/s:0,this.normalized=f,this.usage=StaticDrawUsage,this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(n){n===!0&&this.version++}setUsage(n){return this.usage=n,this}addUpdateRange(n,s){this.updateRanges.push({start:n,count:s})}clearUpdateRanges(){this.updateRanges.length=0}copy(n){return this.name=n.name,this.array=new n.array.constructor(n.array),this.itemSize=n.itemSize,this.count=n.count,this.normalized=n.normalized,this.usage=n.usage,this.gpuType=n.gpuType,this}copyAt(n,s,f){n*=this.itemSize,f*=s.itemSize;for(let d=0,y=this.itemSize;d<y;d++)this.array[n+d]=s.array[f+d];return this}copyArray(n){return this.array.set(n),this}applyMatrix3(n){if(this.itemSize===2)for(let s=0,f=this.count;s<f;s++)_vector2$1.fromBufferAttribute(this,s),_vector2$1.applyMatrix3(n),this.setXY(s,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let s=0,f=this.count;s<f;s++)_vector$a.fromBufferAttribute(this,s),_vector$a.applyMatrix3(n),this.setXYZ(s,_vector$a.x,_vector$a.y,_vector$a.z);return this}applyMatrix4(n){for(let s=0,f=this.count;s<f;s++)_vector$a.fromBufferAttribute(this,s),_vector$a.applyMatrix4(n),this.setXYZ(s,_vector$a.x,_vector$a.y,_vector$a.z);return this}applyNormalMatrix(n){for(let s=0,f=this.count;s<f;s++)_vector$a.fromBufferAttribute(this,s),_vector$a.applyNormalMatrix(n),this.setXYZ(s,_vector$a.x,_vector$a.y,_vector$a.z);return this}transformDirection(n){for(let s=0,f=this.count;s<f;s++)_vector$a.fromBufferAttribute(this,s),_vector$a.transformDirection(n),this.setXYZ(s,_vector$a.x,_vector$a.y,_vector$a.z);return this}set(n,s=0){return this.array.set(n,s),this}getComponent(n,s){let f=this.array[n*this.itemSize+s];return this.normalized&&(f=denormalize(f,this.array)),f}setComponent(n,s,f){return this.normalized&&(f=normalize(f,this.array)),this.array[n*this.itemSize+s]=f,this}getX(n){let s=this.array[n*this.itemSize];return this.normalized&&(s=denormalize(s,this.array)),s}setX(n,s){return this.normalized&&(s=normalize(s,this.array)),this.array[n*this.itemSize]=s,this}getY(n){let s=this.array[n*this.itemSize+1];return this.normalized&&(s=denormalize(s,this.array)),s}setY(n,s){return this.normalized&&(s=normalize(s,this.array)),this.array[n*this.itemSize+1]=s,this}getZ(n){let s=this.array[n*this.itemSize+2];return this.normalized&&(s=denormalize(s,this.array)),s}setZ(n,s){return this.normalized&&(s=normalize(s,this.array)),this.array[n*this.itemSize+2]=s,this}getW(n){let s=this.array[n*this.itemSize+3];return this.normalized&&(s=denormalize(s,this.array)),s}setW(n,s){return this.normalized&&(s=normalize(s,this.array)),this.array[n*this.itemSize+3]=s,this}setXY(n,s,f){return n*=this.itemSize,this.normalized&&(s=normalize(s,this.array),f=normalize(f,this.array)),this.array[n+0]=s,this.array[n+1]=f,this}setXYZ(n,s,f,d){return n*=this.itemSize,this.normalized&&(s=normalize(s,this.array),f=normalize(f,this.array),d=normalize(d,this.array)),this.array[n+0]=s,this.array[n+1]=f,this.array[n+2]=d,this}setXYZW(n,s,f,d,y){return n*=this.itemSize,this.normalized&&(s=normalize(s,this.array),f=normalize(f,this.array),d=normalize(d,this.array),y=normalize(y,this.array)),this.array[n+0]=s,this.array[n+1]=f,this.array[n+2]=d,this.array[n+3]=y,this}onUpload(n){return this.onUploadCallback=n,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const n={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(n.name=this.name),this.usage!==StaticDrawUsage&&(n.usage=this.usage),n}}class Int8BufferAttribute extends BufferAttribute{constructor(n,s,f){super(new Int8Array(n),s,f)}}class Uint8BufferAttribute extends BufferAttribute{constructor(n,s,f){super(new Uint8Array(n),s,f)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(n,s,f){super(new Uint8ClampedArray(n),s,f)}}class Int16BufferAttribute extends BufferAttribute{constructor(n,s,f){super(new Int16Array(n),s,f)}}class Uint16BufferAttribute extends BufferAttribute{constructor(n,s,f){super(new Uint16Array(n),s,f)}}class Int32BufferAttribute extends BufferAttribute{constructor(n,s,f){super(new Int32Array(n),s,f)}}class Uint32BufferAttribute extends BufferAttribute{constructor(n,s,f){super(new Uint32Array(n),s,f)}}class Float16BufferAttribute extends BufferAttribute{constructor(n,s,f){super(new Uint16Array(n),s,f),this.isFloat16BufferAttribute=!0}getX(n){let s=fromHalfFloat(this.array[n*this.itemSize]);return this.normalized&&(s=denormalize(s,this.array)),s}setX(n,s){return this.normalized&&(s=normalize(s,this.array)),this.array[n*this.itemSize]=toHalfFloat(s),this}getY(n){let s=fromHalfFloat(this.array[n*this.itemSize+1]);return this.normalized&&(s=denormalize(s,this.array)),s}setY(n,s){return this.normalized&&(s=normalize(s,this.array)),this.array[n*this.itemSize+1]=toHalfFloat(s),this}getZ(n){let s=fromHalfFloat(this.array[n*this.itemSize+2]);return this.normalized&&(s=denormalize(s,this.array)),s}setZ(n,s){return this.normalized&&(s=normalize(s,this.array)),this.array[n*this.itemSize+2]=toHalfFloat(s),this}getW(n){let s=fromHalfFloat(this.array[n*this.itemSize+3]);return this.normalized&&(s=denormalize(s,this.array)),s}setW(n,s){return this.normalized&&(s=normalize(s,this.array)),this.array[n*this.itemSize+3]=toHalfFloat(s),this}setXY(n,s,f){return n*=this.itemSize,this.normalized&&(s=normalize(s,this.array),f=normalize(f,this.array)),this.array[n+0]=toHalfFloat(s),this.array[n+1]=toHalfFloat(f),this}setXYZ(n,s,f,d){return n*=this.itemSize,this.normalized&&(s=normalize(s,this.array),f=normalize(f,this.array),d=normalize(d,this.array)),this.array[n+0]=toHalfFloat(s),this.array[n+1]=toHalfFloat(f),this.array[n+2]=toHalfFloat(d),this}setXYZW(n,s,f,d,y){return n*=this.itemSize,this.normalized&&(s=normalize(s,this.array),f=normalize(f,this.array),d=normalize(d,this.array),y=normalize(y,this.array)),this.array[n+0]=toHalfFloat(s),this.array[n+1]=toHalfFloat(f),this.array[n+2]=toHalfFloat(d),this.array[n+3]=toHalfFloat(y),this}}class Float32BufferAttribute extends BufferAttribute{constructor(n,s,f){super(new Float32Array(n),s,f)}}const _box$3=new Box3,_v1$3=new Vector3,_v2$2=new Vector3;class Sphere{constructor(n=new Vector3,s=-1){this.isSphere=!0,this.center=n,this.radius=s}set(n,s){return this.center.copy(n),this.radius=s,this}setFromPoints(n,s){const f=this.center;s!==void 0?f.copy(s):_box$3.setFromPoints(n).getCenter(f);let d=0;for(let y=0,_=n.length;y<_;y++)d=Math.max(d,f.distanceToSquared(n[y]));return this.radius=Math.sqrt(d),this}copy(n){return this.center.copy(n.center),this.radius=n.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(n){return n.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(n){return n.distanceTo(this.center)-this.radius}intersectsSphere(n){const s=this.radius+n.radius;return n.center.distanceToSquared(this.center)<=s*s}intersectsBox(n){return n.intersectsSphere(this)}intersectsPlane(n){return Math.abs(n.distanceToPoint(this.center))<=this.radius}clampPoint(n,s){const f=this.center.distanceToSquared(n);return s.copy(n),f>this.radius*this.radius&&(s.sub(this.center).normalize(),s.multiplyScalar(this.radius).add(this.center)),s}getBoundingBox(n){return this.isEmpty()?(n.makeEmpty(),n):(n.set(this.center,this.center),n.expandByScalar(this.radius),n)}applyMatrix4(n){return this.center.applyMatrix4(n),this.radius=this.radius*n.getMaxScaleOnAxis(),this}translate(n){return this.center.add(n),this}expandByPoint(n){if(this.isEmpty())return this.center.copy(n),this.radius=0,this;_v1$3.subVectors(n,this.center);const s=_v1$3.lengthSq();if(s>this.radius*this.radius){const f=Math.sqrt(s),d=(f-this.radius)*.5;this.center.addScaledVector(_v1$3,d/f),this.radius+=d}return this}union(n){return n.isEmpty()?this:this.isEmpty()?(this.copy(n),this):(this.center.equals(n.center)===!0?this.radius=Math.max(this.radius,n.radius):(_v2$2.subVectors(n.center,this.center).setLength(n.radius),this.expandByPoint(_v1$3.copy(n.center).add(_v2$2)),this.expandByPoint(_v1$3.copy(n.center).sub(_v2$2))),this)}equals(n){return n.center.equals(this.center)&&n.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(n){return this.radius=n.radius,this.center.fromArray(n.center),this}}let _id$1=0;const _m1$3=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$9=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(n){return Array.isArray(n)?this.index=new(arrayNeedsUint32(n)?Uint32BufferAttribute:Uint16BufferAttribute)(n,1):this.index=n,this}setIndirect(n,s=0){return this.indirect=n,this.indirectOffset=s,this}getIndirect(){return this.indirect}getAttribute(n){return this.attributes[n]}setAttribute(n,s){return this.attributes[n]=s,this}deleteAttribute(n){return delete this.attributes[n],this}hasAttribute(n){return this.attributes[n]!==void 0}addGroup(n,s,f=0){this.groups.push({start:n,count:s,materialIndex:f})}clearGroups(){this.groups=[]}setDrawRange(n,s){this.drawRange.start=n,this.drawRange.count=s}applyMatrix4(n){const s=this.attributes.position;s!==void 0&&(s.applyMatrix4(n),s.needsUpdate=!0);const f=this.attributes.normal;if(f!==void 0){const y=new Matrix3().getNormalMatrix(n);f.applyNormalMatrix(y),f.needsUpdate=!0}const d=this.attributes.tangent;return d!==void 0&&(d.transformDirection(n),d.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(n){return _m1$3.makeRotationFromQuaternion(n),this.applyMatrix4(_m1$3),this}rotateX(n){return _m1$3.makeRotationX(n),this.applyMatrix4(_m1$3),this}rotateY(n){return _m1$3.makeRotationY(n),this.applyMatrix4(_m1$3),this}rotateZ(n){return _m1$3.makeRotationZ(n),this.applyMatrix4(_m1$3),this}translate(n,s,f){return _m1$3.makeTranslation(n,s,f),this.applyMatrix4(_m1$3),this}scale(n,s,f){return _m1$3.makeScale(n,s,f),this.applyMatrix4(_m1$3),this}lookAt(n){return _obj.lookAt(n),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(n){const s=this.getAttribute("position");if(s===void 0){const f=[];for(let d=0,y=n.length;d<y;d++){const _=n[d];f.push(_.x,_.y,_.z||0)}this.setAttribute("position",new Float32BufferAttribute(f,3))}else{const f=Math.min(n.length,s.count);for(let d=0;d<f;d++){const y=n[d];s.setXYZ(d,y.x,y.y,y.z||0)}n.length>s.count&&warn("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),s.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const n=this.attributes.position,s=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){error("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(n!==void 0){if(this.boundingBox.setFromBufferAttribute(n),s)for(let f=0,d=s.length;f<d;f++){const y=s[f];_box$2.setFromBufferAttribute(y),this.morphTargetsRelative?(_vector$9.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$9),_vector$9.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$9)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&error('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const n=this.attributes.position,s=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){error("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);return}if(n){const f=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(n),s)for(let y=0,_=s.length;y<_;y++){const A=s[y];_boxMorphTargets.setFromBufferAttribute(A),this.morphTargetsRelative?(_vector$9.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$9),_vector$9.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$9)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(f);let d=0;for(let y=0,_=n.count;y<_;y++)_vector$9.fromBufferAttribute(n,y),d=Math.max(d,f.distanceToSquared(_vector$9));if(s)for(let y=0,_=s.length;y<_;y++){const A=s[y],R=this.morphTargetsRelative;for(let I=0,G=A.count;I<G;I++)_vector$9.fromBufferAttribute(A,I),R&&(_offset.fromBufferAttribute(n,I),_vector$9.add(_offset)),d=Math.max(d,f.distanceToSquared(_vector$9))}this.boundingSphere.radius=Math.sqrt(d),isNaN(this.boundingSphere.radius)&&error('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const n=this.index,s=this.attributes;if(n===null||s.position===void 0||s.normal===void 0||s.uv===void 0){error("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const f=s.position,d=s.normal,y=s.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*f.count),4));const _=this.getAttribute("tangent"),A=[],R=[];for(let se=0;se<f.count;se++)A[se]=new Vector3,R[se]=new Vector3;const I=new Vector3,G=new Vector3,Y=new Vector3,q=new Vector2,K=new Vector2,Q=new Vector2,ne=new Vector3,te=new Vector3;function J(se,he,Se){I.fromBufferAttribute(f,se),G.fromBufferAttribute(f,he),Y.fromBufferAttribute(f,Se),q.fromBufferAttribute(y,se),K.fromBufferAttribute(y,he),Q.fromBufferAttribute(y,Se),G.sub(I),Y.sub(I),K.sub(q),Q.sub(q);const ve=1/(K.x*Q.y-Q.x*K.y);isFinite(ve)&&(ne.copy(G).multiplyScalar(Q.y).addScaledVector(Y,-K.y).multiplyScalar(ve),te.copy(Y).multiplyScalar(K.x).addScaledVector(G,-Q.x).multiplyScalar(ve),A[se].add(ne),A[he].add(ne),A[Se].add(ne),R[se].add(te),R[he].add(te),R[Se].add(te))}let ie=this.groups;ie.length===0&&(ie=[{start:0,count:n.count}]);for(let se=0,he=ie.length;se<he;++se){const Se=ie[se],ve=Se.start,Re=Se.count;for(let Ee=ve,Oe=ve+Re;Ee<Oe;Ee+=3)J(n.getX(Ee+0),n.getX(Ee+1),n.getX(Ee+2))}const re=new Vector3,le=new Vector3,fe=new Vector3,pe=new Vector3;function de(se){fe.fromBufferAttribute(d,se),pe.copy(fe);const he=A[se];re.copy(he),re.sub(fe.multiplyScalar(fe.dot(he))).normalize(),le.crossVectors(pe,he);const ve=le.dot(R[se])<0?-1:1;_.setXYZW(se,re.x,re.y,re.z,ve)}for(let se=0,he=ie.length;se<he;++se){const Se=ie[se],ve=Se.start,Re=Se.count;for(let Ee=ve,Oe=ve+Re;Ee<Oe;Ee+=3)de(n.getX(Ee+0)),de(n.getX(Ee+1)),de(n.getX(Ee+2))}}computeVertexNormals(){const n=this.index,s=this.getAttribute("position");if(s!==void 0){let f=this.getAttribute("normal");if(f===void 0)f=new BufferAttribute(new Float32Array(s.count*3),3),this.setAttribute("normal",f);else for(let q=0,K=f.count;q<K;q++)f.setXYZ(q,0,0,0);const d=new Vector3,y=new Vector3,_=new Vector3,A=new Vector3,R=new Vector3,I=new Vector3,G=new Vector3,Y=new Vector3;if(n)for(let q=0,K=n.count;q<K;q+=3){const Q=n.getX(q+0),ne=n.getX(q+1),te=n.getX(q+2);d.fromBufferAttribute(s,Q),y.fromBufferAttribute(s,ne),_.fromBufferAttribute(s,te),G.subVectors(_,y),Y.subVectors(d,y),G.cross(Y),A.fromBufferAttribute(f,Q),R.fromBufferAttribute(f,ne),I.fromBufferAttribute(f,te),A.add(G),R.add(G),I.add(G),f.setXYZ(Q,A.x,A.y,A.z),f.setXYZ(ne,R.x,R.y,R.z),f.setXYZ(te,I.x,I.y,I.z)}else for(let q=0,K=s.count;q<K;q+=3)d.fromBufferAttribute(s,q+0),y.fromBufferAttribute(s,q+1),_.fromBufferAttribute(s,q+2),G.subVectors(_,y),Y.subVectors(d,y),G.cross(Y),f.setXYZ(q+0,G.x,G.y,G.z),f.setXYZ(q+1,G.x,G.y,G.z),f.setXYZ(q+2,G.x,G.y,G.z);this.normalizeNormals(),f.needsUpdate=!0}}normalizeNormals(){const n=this.attributes.normal;for(let s=0,f=n.count;s<f;s++)_vector$9.fromBufferAttribute(n,s),_vector$9.normalize(),n.setXYZ(s,_vector$9.x,_vector$9.y,_vector$9.z)}toNonIndexed(){function n(A,R){const I=A.array,G=A.itemSize,Y=A.normalized,q=new I.constructor(R.length*G);let K=0,Q=0;for(let ne=0,te=R.length;ne<te;ne++){A.isInterleavedBufferAttribute?K=R[ne]*A.data.stride+A.offset:K=R[ne]*G;for(let J=0;J<G;J++)q[Q++]=I[K++]}return new BufferAttribute(q,G,Y)}if(this.index===null)return warn("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const s=new BufferGeometry,f=this.index.array,d=this.attributes;for(const A in d){const R=d[A],I=n(R,f);s.setAttribute(A,I)}const y=this.morphAttributes;for(const A in y){const R=[],I=y[A];for(let G=0,Y=I.length;G<Y;G++){const q=I[G],K=n(q,f);R.push(K)}s.morphAttributes[A]=R}s.morphTargetsRelative=this.morphTargetsRelative;const _=this.groups;for(let A=0,R=_.length;A<R;A++){const I=_[A];s.addGroup(I.start,I.count,I.materialIndex)}return s}toJSON(){const n={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),Object.keys(this.userData).length>0&&(n.userData=this.userData),this.parameters!==void 0){const R=this.parameters;for(const I in R)R[I]!==void 0&&(n[I]=R[I]);return n}n.data={attributes:{}};const s=this.index;s!==null&&(n.data.index={type:s.array.constructor.name,array:Array.prototype.slice.call(s.array)});const f=this.attributes;for(const R in f){const I=f[R];n.data.attributes[R]=I.toJSON(n.data)}const d={};let y=!1;for(const R in this.morphAttributes){const I=this.morphAttributes[R],G=[];for(let Y=0,q=I.length;Y<q;Y++){const K=I[Y];G.push(K.toJSON(n.data))}G.length>0&&(d[R]=G,y=!0)}y&&(n.data.morphAttributes=d,n.data.morphTargetsRelative=this.morphTargetsRelative);const _=this.groups;_.length>0&&(n.data.groups=JSON.parse(JSON.stringify(_)));const A=this.boundingSphere;return A!==null&&(n.data.boundingSphere=A.toJSON()),n}clone(){return new this.constructor().copy(this)}copy(n){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const s={};this.name=n.name;const f=n.index;f!==null&&this.setIndex(f.clone());const d=n.attributes;for(const I in d){const G=d[I];this.setAttribute(I,G.clone(s))}const y=n.morphAttributes;for(const I in y){const G=[],Y=y[I];for(let q=0,K=Y.length;q<K;q++)G.push(Y[q].clone(s));this.morphAttributes[I]=G}this.morphTargetsRelative=n.morphTargetsRelative;const _=n.groups;for(let I=0,G=_.length;I<G;I++){const Y=_[I];this.addGroup(Y.start,Y.count,Y.materialIndex)}const A=n.boundingBox;A!==null&&(this.boundingBox=A.clone());const R=n.boundingSphere;return R!==null&&(this.boundingSphere=R.clone()),this.drawRange.start=n.drawRange.start,this.drawRange.count=n.drawRange.count,this.userData=n.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}class InterleavedBuffer{constructor(n,s){this.isInterleavedBuffer=!0,this.array=n,this.stride=s,this.count=n!==void 0?n.length/s:0,this.usage=StaticDrawUsage,this.updateRanges=[],this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(n){n===!0&&this.version++}setUsage(n){return this.usage=n,this}addUpdateRange(n,s){this.updateRanges.push({start:n,count:s})}clearUpdateRanges(){this.updateRanges.length=0}copy(n){return this.array=new n.array.constructor(n.array),this.count=n.count,this.stride=n.stride,this.usage=n.usage,this}copyAt(n,s,f){n*=this.stride,f*=s.stride;for(let d=0,y=this.stride;d<y;d++)this.array[n+d]=s.array[f+d];return this}set(n,s=0){return this.array.set(n,s),this}clone(n){n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const s=new this.array.constructor(n.arrayBuffers[this.array.buffer._uuid]),f=new this.constructor(s,this.stride);return f.setUsage(this.usage),f}onUpload(n){return this.onUploadCallback=n,this}toJSON(n){return n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$8=new Vector3;class InterleavedBufferAttribute{constructor(n,s,f,d=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=n,this.itemSize=s,this.offset=f,this.normalized=d}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(n){this.data.needsUpdate=n}applyMatrix4(n){for(let s=0,f=this.data.count;s<f;s++)_vector$8.fromBufferAttribute(this,s),_vector$8.applyMatrix4(n),this.setXYZ(s,_vector$8.x,_vector$8.y,_vector$8.z);return this}applyNormalMatrix(n){for(let s=0,f=this.count;s<f;s++)_vector$8.fromBufferAttribute(this,s),_vector$8.applyNormalMatrix(n),this.setXYZ(s,_vector$8.x,_vector$8.y,_vector$8.z);return this}transformDirection(n){for(let s=0,f=this.count;s<f;s++)_vector$8.fromBufferAttribute(this,s),_vector$8.transformDirection(n),this.setXYZ(s,_vector$8.x,_vector$8.y,_vector$8.z);return this}getComponent(n,s){let f=this.array[n*this.data.stride+this.offset+s];return this.normalized&&(f=denormalize(f,this.array)),f}setComponent(n,s,f){return this.normalized&&(f=normalize(f,this.array)),this.data.array[n*this.data.stride+this.offset+s]=f,this}setX(n,s){return this.normalized&&(s=normalize(s,this.array)),this.data.array[n*this.data.stride+this.offset]=s,this}setY(n,s){return this.normalized&&(s=normalize(s,this.array)),this.data.array[n*this.data.stride+this.offset+1]=s,this}setZ(n,s){return this.normalized&&(s=normalize(s,this.array)),this.data.array[n*this.data.stride+this.offset+2]=s,this}setW(n,s){return this.normalized&&(s=normalize(s,this.array)),this.data.array[n*this.data.stride+this.offset+3]=s,this}getX(n){let s=this.data.array[n*this.data.stride+this.offset];return this.normalized&&(s=denormalize(s,this.array)),s}getY(n){let s=this.data.array[n*this.data.stride+this.offset+1];return this.normalized&&(s=denormalize(s,this.array)),s}getZ(n){let s=this.data.array[n*this.data.stride+this.offset+2];return this.normalized&&(s=denormalize(s,this.array)),s}getW(n){let s=this.data.array[n*this.data.stride+this.offset+3];return this.normalized&&(s=denormalize(s,this.array)),s}setXY(n,s,f){return n=n*this.data.stride+this.offset,this.normalized&&(s=normalize(s,this.array),f=normalize(f,this.array)),this.data.array[n+0]=s,this.data.array[n+1]=f,this}setXYZ(n,s,f,d){return n=n*this.data.stride+this.offset,this.normalized&&(s=normalize(s,this.array),f=normalize(f,this.array),d=normalize(d,this.array)),this.data.array[n+0]=s,this.data.array[n+1]=f,this.data.array[n+2]=d,this}setXYZW(n,s,f,d,y){return n=n*this.data.stride+this.offset,this.normalized&&(s=normalize(s,this.array),f=normalize(f,this.array),d=normalize(d,this.array),y=normalize(y,this.array)),this.data.array[n+0]=s,this.data.array[n+1]=f,this.data.array[n+2]=d,this.data.array[n+3]=y,this}clone(n){if(n===void 0){log("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const s=[];for(let f=0;f<this.count;f++){const d=f*this.data.stride+this.offset;for(let y=0;y<this.itemSize;y++)s.push(this.data.array[d+y])}return new BufferAttribute(new this.array.constructor(s),this.itemSize,this.normalized)}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.clone(n)),new InterleavedBufferAttribute(n.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(n){if(n===void 0){log("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const s=[];for(let f=0;f<this.count;f++){const d=f*this.data.stride+this.offset;for(let y=0;y<this.itemSize;y++)s.push(this.data.array[d+y])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:s,normalized:this.normalized}}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.toJSON(n)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}let _materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(n){this._alphaTest>0!=n>0&&this.version++,this._alphaTest=n}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(n){if(n!==void 0)for(const s in n){const f=n[s];if(f===void 0){warn(`Material: parameter '${s}' has value of undefined.`);continue}const d=this[s];if(d===void 0){warn(`Material: '${s}' is not a property of THREE.${this.type}.`);continue}d&&d.isColor?d.set(f):d&&d.isVector3&&f&&f.isVector3?d.copy(f):this[s]=f}}toJSON(n){const s=n===void 0||typeof n=="string";s&&(n={textures:{},images:{}});const f={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};f.uuid=this.uuid,f.type=this.type,this.name!==""&&(f.name=this.name),this.color&&this.color.isColor&&(f.color=this.color.getHex()),this.roughness!==void 0&&(f.roughness=this.roughness),this.metalness!==void 0&&(f.metalness=this.metalness),this.sheen!==void 0&&(f.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(f.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(f.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(f.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(f.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(f.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(f.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(f.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(f.shininess=this.shininess),this.clearcoat!==void 0&&(f.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(f.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(f.clearcoatMap=this.clearcoatMap.toJSON(n).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(f.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(n).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(f.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(n).uuid,f.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(f.sheenColorMap=this.sheenColorMap.toJSON(n).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(f.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(n).uuid),this.dispersion!==void 0&&(f.dispersion=this.dispersion),this.iridescence!==void 0&&(f.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(f.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(f.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(f.iridescenceMap=this.iridescenceMap.toJSON(n).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(f.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(n).uuid),this.anisotropy!==void 0&&(f.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(f.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(f.anisotropyMap=this.anisotropyMap.toJSON(n).uuid),this.map&&this.map.isTexture&&(f.map=this.map.toJSON(n).uuid),this.matcap&&this.matcap.isTexture&&(f.matcap=this.matcap.toJSON(n).uuid),this.alphaMap&&this.alphaMap.isTexture&&(f.alphaMap=this.alphaMap.toJSON(n).uuid),this.lightMap&&this.lightMap.isTexture&&(f.lightMap=this.lightMap.toJSON(n).uuid,f.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(f.aoMap=this.aoMap.toJSON(n).uuid,f.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(f.bumpMap=this.bumpMap.toJSON(n).uuid,f.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(f.normalMap=this.normalMap.toJSON(n).uuid,f.normalMapType=this.normalMapType,f.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(f.displacementMap=this.displacementMap.toJSON(n).uuid,f.displacementScale=this.displacementScale,f.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(f.roughnessMap=this.roughnessMap.toJSON(n).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(f.metalnessMap=this.metalnessMap.toJSON(n).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(f.emissiveMap=this.emissiveMap.toJSON(n).uuid),this.specularMap&&this.specularMap.isTexture&&(f.specularMap=this.specularMap.toJSON(n).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(f.specularIntensityMap=this.specularIntensityMap.toJSON(n).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(f.specularColorMap=this.specularColorMap.toJSON(n).uuid),this.envMap&&this.envMap.isTexture&&(f.envMap=this.envMap.toJSON(n).uuid,this.combine!==void 0&&(f.combine=this.combine)),this.envMapRotation!==void 0&&(f.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(f.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(f.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(f.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(f.gradientMap=this.gradientMap.toJSON(n).uuid),this.transmission!==void 0&&(f.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(f.transmissionMap=this.transmissionMap.toJSON(n).uuid),this.thickness!==void 0&&(f.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(f.thicknessMap=this.thicknessMap.toJSON(n).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(f.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(f.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(f.size=this.size),this.shadowSide!==null&&(f.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(f.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(f.blending=this.blending),this.side!==FrontSide&&(f.side=this.side),this.vertexColors===!0&&(f.vertexColors=!0),this.opacity<1&&(f.opacity=this.opacity),this.transparent===!0&&(f.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(f.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(f.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(f.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(f.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(f.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(f.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(f.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(f.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(f.depthFunc=this.depthFunc),this.depthTest===!1&&(f.depthTest=this.depthTest),this.depthWrite===!1&&(f.depthWrite=this.depthWrite),this.colorWrite===!1&&(f.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(f.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(f.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(f.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(f.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(f.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(f.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(f.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(f.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(f.rotation=this.rotation),this.polygonOffset===!0&&(f.polygonOffset=!0),this.polygonOffsetFactor!==0&&(f.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(f.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(f.linewidth=this.linewidth),this.dashSize!==void 0&&(f.dashSize=this.dashSize),this.gapSize!==void 0&&(f.gapSize=this.gapSize),this.scale!==void 0&&(f.scale=this.scale),this.dithering===!0&&(f.dithering=!0),this.alphaTest>0&&(f.alphaTest=this.alphaTest),this.alphaHash===!0&&(f.alphaHash=!0),this.alphaToCoverage===!0&&(f.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(f.premultipliedAlpha=!0),this.forceSinglePass===!0&&(f.forceSinglePass=!0),this.allowOverride===!1&&(f.allowOverride=!1),this.wireframe===!0&&(f.wireframe=!0),this.wireframeLinewidth>1&&(f.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(f.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(f.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(f.flatShading=!0),this.visible===!1&&(f.visible=!1),this.toneMapped===!1&&(f.toneMapped=!1),this.fog===!1&&(f.fog=!1),Object.keys(this.userData).length>0&&(f.userData=this.userData);function d(y){const _=[];for(const A in y){const R=y[A];delete R.metadata,_.push(R)}return _}if(s){const y=d(n.textures),_=d(n.images);y.length>0&&(f.textures=y),_.length>0&&(f.images=_)}return f}clone(){return new this.constructor().copy(this)}copy(n){this.name=n.name,this.blending=n.blending,this.side=n.side,this.vertexColors=n.vertexColors,this.opacity=n.opacity,this.transparent=n.transparent,this.blendSrc=n.blendSrc,this.blendDst=n.blendDst,this.blendEquation=n.blendEquation,this.blendSrcAlpha=n.blendSrcAlpha,this.blendDstAlpha=n.blendDstAlpha,this.blendEquationAlpha=n.blendEquationAlpha,this.blendColor.copy(n.blendColor),this.blendAlpha=n.blendAlpha,this.depthFunc=n.depthFunc,this.depthTest=n.depthTest,this.depthWrite=n.depthWrite,this.stencilWriteMask=n.stencilWriteMask,this.stencilFunc=n.stencilFunc,this.stencilRef=n.stencilRef,this.stencilFuncMask=n.stencilFuncMask,this.stencilFail=n.stencilFail,this.stencilZFail=n.stencilZFail,this.stencilZPass=n.stencilZPass,this.stencilWrite=n.stencilWrite;const s=n.clippingPlanes;let f=null;if(s!==null){const d=s.length;f=new Array(d);for(let y=0;y!==d;++y)f[y]=s[y].clone()}return this.clippingPlanes=f,this.clipIntersection=n.clipIntersection,this.clipShadows=n.clipShadows,this.shadowSide=n.shadowSide,this.colorWrite=n.colorWrite,this.precision=n.precision,this.polygonOffset=n.polygonOffset,this.polygonOffsetFactor=n.polygonOffsetFactor,this.polygonOffsetUnits=n.polygonOffsetUnits,this.dithering=n.dithering,this.alphaTest=n.alphaTest,this.alphaHash=n.alphaHash,this.alphaToCoverage=n.alphaToCoverage,this.premultipliedAlpha=n.premultipliedAlpha,this.forceSinglePass=n.forceSinglePass,this.allowOverride=n.allowOverride,this.visible=n.visible,this.toneMapped=n.toneMapped,this.userData=JSON.parse(JSON.stringify(n.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(n){n===!0&&this.version++}}class SpriteMaterial extends Material{constructor(n){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.rotation=n.rotation,this.sizeAttenuation=n.sizeAttenuation,this.fog=n.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(n=new SpriteMaterial){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const s=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),f=new InterleavedBuffer(s,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(f,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(f,2,3,!1))}this.geometry=_geometry,this.material=n,this.center=new Vector2(.5,.5),this.count=1}raycast(n,s){n.camera===null&&error('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(n.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(n.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),n.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const f=this.material.rotation;let d,y;f!==0&&(y=Math.cos(f),d=Math.sin(f));const _=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,_,_worldScale,d,y),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,_,_worldScale,d,y),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,_,_worldScale,d,y),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let A=n.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(A===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,_,_worldScale,d,y),_uvB.set(0,1),A=n.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),A===null))return;const R=n.ray.origin.distanceTo(_intersectPoint);R<n.near||R>n.far||s.push({distance:R,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(n,s){return super.copy(n,s),n.center!==void 0&&this.center.copy(n.center),this.material=n.material,this}}function transformVertex(u,n,s,f,d,y){_alignedPosition.subVectors(u,s).addScalar(.5).multiply(f),d!==void 0?(_rotatedPosition.x=y*_alignedPosition.x-d*_alignedPosition.y,_rotatedPosition.y=d*_alignedPosition.x+y*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),u.copy(n),u.x+=_rotatedPosition.x,u.y+=_rotatedPosition.y,u.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(n){super.copy(n,!1);const s=n.levels;for(let f=0,d=s.length;f<d;f++){const y=s[f];this.addLevel(y.object.clone(),y.distance,y.hysteresis)}return this.autoUpdate=n.autoUpdate,this}addLevel(n,s=0,f=0){s=Math.abs(s);const d=this.levels;let y;for(y=0;y<d.length&&!(s<d[y].distance);y++);return d.splice(y,0,{distance:s,hysteresis:f,object:n}),this.add(n),this}removeLevel(n){const s=this.levels;for(let f=0;f<s.length;f++)if(s[f].distance===n){const d=s.splice(f,1);return this.remove(d[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(n){const s=this.levels;if(s.length>0){let f,d;for(f=1,d=s.length;f<d;f++){let y=s[f].distance;if(s[f].object.visible&&(y-=y*s[f].hysteresis),n<y)break}return s[f-1].object}return null}raycast(n,s){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const d=n.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(d).raycast(n,s)}}update(n){const s=this.levels;if(s.length>1){_v1$2.setFromMatrixPosition(n.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const f=_v1$2.distanceTo(_v2$1)/n.zoom;s[0].object.visible=!0;let d,y;for(d=1,y=s.length;d<y;d++){let _=s[d].distance;if(s[d].object.visible&&(_-=_*s[d].hysteresis),f>=_)s[d-1].object.visible=!1,s[d].object.visible=!0;else break}for(this._currentLevel=d-1;d<y;d++)s[d].object.visible=!1}}toJSON(n){const s=super.toJSON(n);this.autoUpdate===!1&&(s.object.autoUpdate=!1),s.object.levels=[];const f=this.levels;for(let d=0,y=f.length;d<y;d++){const _=f[d];s.object.levels.push({object:_.object.uuid,distance:_.distance,hysteresis:_.hysteresis})}return s}}const _vector$7=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(n=new Vector3,s=new Vector3(0,0,-1)){this.origin=n,this.direction=s}set(n,s){return this.origin.copy(n),this.direction.copy(s),this}copy(n){return this.origin.copy(n.origin),this.direction.copy(n.direction),this}at(n,s){return s.copy(this.origin).addScaledVector(this.direction,n)}lookAt(n){return this.direction.copy(n).sub(this.origin).normalize(),this}recast(n){return this.origin.copy(this.at(n,_vector$7)),this}closestPointToPoint(n,s){s.subVectors(n,this.origin);const f=s.dot(this.direction);return f<0?s.copy(this.origin):s.copy(this.origin).addScaledVector(this.direction,f)}distanceToPoint(n){return Math.sqrt(this.distanceSqToPoint(n))}distanceSqToPoint(n){const s=_vector$7.subVectors(n,this.origin).dot(this.direction);return s<0?this.origin.distanceToSquared(n):(_vector$7.copy(this.origin).addScaledVector(this.direction,s),_vector$7.distanceToSquared(n))}distanceSqToSegment(n,s,f,d){_segCenter.copy(n).add(s).multiplyScalar(.5),_segDir.copy(s).sub(n).normalize(),_diff.copy(this.origin).sub(_segCenter);const y=n.distanceTo(s)*.5,_=-this.direction.dot(_segDir),A=_diff.dot(this.direction),R=-_diff.dot(_segDir),I=_diff.lengthSq(),G=Math.abs(1-_*_);let Y,q,K,Q;if(G>0)if(Y=_*R-A,q=_*A-R,Q=y*G,Y>=0)if(q>=-Q)if(q<=Q){const ne=1/G;Y*=ne,q*=ne,K=Y*(Y+_*q+2*A)+q*(_*Y+q+2*R)+I}else q=y,Y=Math.max(0,-(_*q+A)),K=-Y*Y+q*(q+2*R)+I;else q=-y,Y=Math.max(0,-(_*q+A)),K=-Y*Y+q*(q+2*R)+I;else q<=-Q?(Y=Math.max(0,-(-_*y+A)),q=Y>0?-y:Math.min(Math.max(-y,-R),y),K=-Y*Y+q*(q+2*R)+I):q<=Q?(Y=0,q=Math.min(Math.max(-y,-R),y),K=q*(q+2*R)+I):(Y=Math.max(0,-(_*y+A)),q=Y>0?y:Math.min(Math.max(-y,-R),y),K=-Y*Y+q*(q+2*R)+I);else q=_>0?-y:y,Y=Math.max(0,-(_*q+A)),K=-Y*Y+q*(q+2*R)+I;return f&&f.copy(this.origin).addScaledVector(this.direction,Y),d&&d.copy(_segCenter).addScaledVector(_segDir,q),K}intersectSphere(n,s){_vector$7.subVectors(n.center,this.origin);const f=_vector$7.dot(this.direction),d=_vector$7.dot(_vector$7)-f*f,y=n.radius*n.radius;if(d>y)return null;const _=Math.sqrt(y-d),A=f-_,R=f+_;return R<0?null:A<0?this.at(R,s):this.at(A,s)}intersectsSphere(n){return n.radius<0?!1:this.distanceSqToPoint(n.center)<=n.radius*n.radius}distanceToPlane(n){const s=n.normal.dot(this.direction);if(s===0)return n.distanceToPoint(this.origin)===0?0:null;const f=-(this.origin.dot(n.normal)+n.constant)/s;return f>=0?f:null}intersectPlane(n,s){const f=this.distanceToPlane(n);return f===null?null:this.at(f,s)}intersectsPlane(n){const s=n.distanceToPoint(this.origin);return s===0||n.normal.dot(this.direction)*s<0}intersectBox(n,s){let f,d,y,_,A,R;const I=1/this.direction.x,G=1/this.direction.y,Y=1/this.direction.z,q=this.origin;return I>=0?(f=(n.min.x-q.x)*I,d=(n.max.x-q.x)*I):(f=(n.max.x-q.x)*I,d=(n.min.x-q.x)*I),G>=0?(y=(n.min.y-q.y)*G,_=(n.max.y-q.y)*G):(y=(n.max.y-q.y)*G,_=(n.min.y-q.y)*G),f>_||y>d||((y>f||isNaN(f))&&(f=y),(_<d||isNaN(d))&&(d=_),Y>=0?(A=(n.min.z-q.z)*Y,R=(n.max.z-q.z)*Y):(A=(n.max.z-q.z)*Y,R=(n.min.z-q.z)*Y),f>R||A>d)||((A>f||f!==f)&&(f=A),(R<d||d!==d)&&(d=R),d<0)?null:this.at(f>=0?f:d,s)}intersectsBox(n){return this.intersectBox(n,_vector$7)!==null}intersectTriangle(n,s,f,d,y){_edge1.subVectors(s,n),_edge2.subVectors(f,n),_normal$1.crossVectors(_edge1,_edge2);let _=this.direction.dot(_normal$1),A;if(_>0){if(d)return null;A=1}else if(_<0)A=-1,_=-_;else return null;_diff.subVectors(this.origin,n);const R=A*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(R<0)return null;const I=A*this.direction.dot(_edge1.cross(_diff));if(I<0||R+I>_)return null;const G=-A*_diff.dot(_normal$1);return G<0?null:this.at(G/_,y)}applyMatrix4(n){return this.origin.applyMatrix4(n),this.direction.transformDirection(n),this}equals(n){return n.origin.equals(this.origin)&&n.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class MeshBasicMaterial extends Material{constructor(n){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.fog=n.fog,this}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(n=new BufferGeometry,s=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=n,this.material=s,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(n,s){return super.copy(n,s),n.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=n.morphTargetInfluences.slice()),n.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},n.morphTargetDictionary)),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}updateMorphTargets(){const s=this.geometry.morphAttributes,f=Object.keys(s);if(f.length>0){const d=s[f[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let y=0,_=d.length;y<_;y++){const A=d[y].name||String(y);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=y}}}}getVertexPosition(n,s){const f=this.geometry,d=f.attributes.position,y=f.morphAttributes.position,_=f.morphTargetsRelative;s.fromBufferAttribute(d,n);const A=this.morphTargetInfluences;if(y&&A){_morphA.set(0,0,0);for(let R=0,I=y.length;R<I;R++){const G=A[R],Y=y[R];G!==0&&(_tempA.fromBufferAttribute(Y,n),_?_morphA.addScaledVector(_tempA,G):_morphA.addScaledVector(_tempA.sub(s),G))}s.add(_morphA)}return s}raycast(n,s){const f=this.geometry,d=this.material,y=this.matrixWorld;d!==void 0&&(f.boundingSphere===null&&f.computeBoundingSphere(),_sphere$6.copy(f.boundingSphere),_sphere$6.applyMatrix4(y),_ray$3.copy(n.ray).recast(n.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(n.far-n.near)**2))&&(_inverseMatrix$3.copy(y).invert(),_ray$3.copy(n.ray).applyMatrix4(_inverseMatrix$3),!(f.boundingBox!==null&&_ray$3.intersectsBox(f.boundingBox)===!1)&&this._computeIntersections(n,s,_ray$3)))}_computeIntersections(n,s,f){let d;const y=this.geometry,_=this.material,A=y.index,R=y.attributes.position,I=y.attributes.uv,G=y.attributes.uv1,Y=y.attributes.normal,q=y.groups,K=y.drawRange;if(A!==null)if(Array.isArray(_))for(let Q=0,ne=q.length;Q<ne;Q++){const te=q[Q],J=_[te.materialIndex],ie=Math.max(te.start,K.start),re=Math.min(A.count,Math.min(te.start+te.count,K.start+K.count));for(let le=ie,fe=re;le<fe;le+=3){const pe=A.getX(le),de=A.getX(le+1),se=A.getX(le+2);d=checkGeometryIntersection(this,J,n,f,I,G,Y,pe,de,se),d&&(d.faceIndex=Math.floor(le/3),d.face.materialIndex=te.materialIndex,s.push(d))}}else{const Q=Math.max(0,K.start),ne=Math.min(A.count,K.start+K.count);for(let te=Q,J=ne;te<J;te+=3){const ie=A.getX(te),re=A.getX(te+1),le=A.getX(te+2);d=checkGeometryIntersection(this,_,n,f,I,G,Y,ie,re,le),d&&(d.faceIndex=Math.floor(te/3),s.push(d))}}else if(R!==void 0)if(Array.isArray(_))for(let Q=0,ne=q.length;Q<ne;Q++){const te=q[Q],J=_[te.materialIndex],ie=Math.max(te.start,K.start),re=Math.min(R.count,Math.min(te.start+te.count,K.start+K.count));for(let le=ie,fe=re;le<fe;le+=3){const pe=le,de=le+1,se=le+2;d=checkGeometryIntersection(this,J,n,f,I,G,Y,pe,de,se),d&&(d.faceIndex=Math.floor(le/3),d.face.materialIndex=te.materialIndex,s.push(d))}}else{const Q=Math.max(0,K.start),ne=Math.min(R.count,K.start+K.count);for(let te=Q,J=ne;te<J;te+=3){const ie=te,re=te+1,le=te+2;d=checkGeometryIntersection(this,_,n,f,I,G,Y,ie,re,le),d&&(d.faceIndex=Math.floor(te/3),s.push(d))}}}}function checkIntersection$1(u,n,s,f,d,y,_,A){let R;if(n.side===BackSide?R=f.intersectTriangle(_,y,d,!0,A):R=f.intersectTriangle(d,y,_,n.side===FrontSide,A),R===null)return null;_intersectionPointWorld.copy(A),_intersectionPointWorld.applyMatrix4(u.matrixWorld);const I=s.ray.origin.distanceTo(_intersectionPointWorld);return I<s.near||I>s.far?null:{distance:I,point:_intersectionPointWorld.clone(),object:u}}function checkGeometryIntersection(u,n,s,f,d,y,_,A,R,I){u.getVertexPosition(A,_vA),u.getVertexPosition(R,_vB),u.getVertexPosition(I,_vC);const G=checkIntersection$1(u,n,s,f,_vA,_vB,_vC,_intersectionPoint);if(G){const Y=new Vector3;Triangle.getBarycoord(_intersectionPoint,_vA,_vB,_vC,Y),d&&(G.uv=Triangle.getInterpolatedAttribute(d,A,R,I,Y,new Vector2)),y&&(G.uv1=Triangle.getInterpolatedAttribute(y,A,R,I,Y,new Vector2)),_&&(G.normal=Triangle.getInterpolatedAttribute(_,A,R,I,Y,new Vector3),G.normal.dot(f.direction)>0&&G.normal.multiplyScalar(-1));const q={a:A,b:R,c:I,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA,_vB,_vC,q.normal),G.face=q,G.barycoord=Y}return G}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$5=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(n,s){super(n,s),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const n=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const s=n.getAttribute("position");for(let f=0;f<s.count;f++)this.getVertexPosition(f,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const n=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const s=n.getAttribute("position");for(let f=0;f<s.count;f++)this.getVertexPosition(f,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(n,s){return super.copy(n,s),this.bindMode=n.bindMode,this.bindMatrix.copy(n.bindMatrix),this.bindMatrixInverse.copy(n.bindMatrixInverse),this.skeleton=n.skeleton,n.boundingBox!==null&&(this.boundingBox=n.boundingBox.clone()),n.boundingSphere!==null&&(this.boundingSphere=n.boundingSphere.clone()),this}raycast(n,s){const f=this.material,d=this.matrixWorld;f!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$5.copy(this.boundingSphere),_sphere$5.applyMatrix4(d),n.ray.intersectsSphere(_sphere$5)!==!1&&(_inverseMatrix$2.copy(d).invert(),_ray$2.copy(n.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(n,s,_ray$2)))}getVertexPosition(n,s){return super.getVertexPosition(n,s),this.applyBoneTransform(n,s),s}bind(n,s){this.skeleton=n,s===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),s=this.matrixWorld),this.bindMatrix.copy(s),this.bindMatrixInverse.copy(s).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const n=new Vector4,s=this.geometry.attributes.skinWeight;for(let f=0,d=s.count;f<d;f++){n.fromBufferAttribute(s,f);const y=1/n.manhattanLength();y!==1/0?n.multiplyScalar(y):n.set(1,0,0,0),s.setXYZW(f,n.x,n.y,n.z,n.w)}}updateMatrixWorld(n){super.updateMatrixWorld(n),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():warn("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(n,s){const f=this.skeleton,d=this.geometry;_skinIndex.fromBufferAttribute(d.attributes.skinIndex,n),_skinWeight.fromBufferAttribute(d.attributes.skinWeight,n),_basePosition.copy(s).applyMatrix4(this.bindMatrix),s.set(0,0,0);for(let y=0;y<4;y++){const _=_skinWeight.getComponent(y);if(_!==0){const A=_skinIndex.getComponent(y);_matrix4.multiplyMatrices(f.bones[A].matrixWorld,f.boneInverses[A]),s.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),_)}}return s.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(n=null,s=1,f=1,d,y,_,A,R,I=NearestFilter,G=NearestFilter,Y,q){super(null,_,A,R,I,G,d,y,Y,q),this.isDataTexture=!0,this.image={data:n,width:s,height:f},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;class Skeleton{constructor(n=[],s=[]){this.uuid=generateUUID(),this.bones=n.slice(0),this.boneInverses=s,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const n=this.bones,s=this.boneInverses;if(this.boneMatrices=new Float32Array(n.length*16),s.length===0)this.calculateInverses();else if(n.length!==s.length){warn("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let f=0,d=this.bones.length;f<d;f++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let n=0,s=this.bones.length;n<s;n++){const f=new Matrix4;this.bones[n]&&f.copy(this.bones[n].matrixWorld).invert(),this.boneInverses.push(f)}}pose(){for(let n=0,s=this.bones.length;n<s;n++){const f=this.bones[n];f&&f.matrixWorld.copy(this.boneInverses[n]).invert()}for(let n=0,s=this.bones.length;n<s;n++){const f=this.bones[n];f&&(f.parent&&f.parent.isBone?(f.matrix.copy(f.parent.matrixWorld).invert(),f.matrix.multiply(f.matrixWorld)):f.matrix.copy(f.matrixWorld),f.matrix.decompose(f.position,f.quaternion,f.scale))}}update(){const n=this.bones,s=this.boneInverses,f=this.boneMatrices,d=this.boneTexture;for(let y=0,_=n.length;y<_;y++){const A=n[y]?n[y].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(A,s[y]),_offsetMatrix.toArray(f,y*16)}d!==null&&(d.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let n=Math.sqrt(this.bones.length*4);n=Math.ceil(n/4)*4,n=Math.max(n,4);const s=new Float32Array(n*n*4);s.set(this.boneMatrices);const f=new DataTexture(s,n,n,RGBAFormat,FloatType);return f.needsUpdate=!0,this.boneMatrices=s,this.boneTexture=f,this}getBoneByName(n){for(let s=0,f=this.bones.length;s<f;s++){const d=this.bones[s];if(d.name===n)return d}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(n,s){this.uuid=n.uuid;for(let f=0,d=n.bones.length;f<d;f++){const y=n.bones[f];let _=s[y];_===void 0&&(warn("Skeleton: No bone found with UUID:",y),_=new Bone),this.bones.push(_),this.boneInverses.push(new Matrix4().fromArray(n.boneInverses[f]))}return this.init(),this}toJSON(){const n={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};n.uuid=this.uuid;const s=this.bones,f=this.boneInverses;for(let d=0,y=s.length;d<y;d++){const _=s[d];n.bones.push(_.uuid);const A=f[d];n.boneInverses.push(A.toArray())}return n}}class InstancedBufferAttribute extends BufferAttribute{constructor(n,s,f,d=1){super(n,s,f),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=d}copy(n){return super.copy(n),this.meshPerAttribute=n.meshPerAttribute,this}toJSON(){const n=super.toJSON();return n.meshPerAttribute=this.meshPerAttribute,n.isInstancedBufferAttribute=!0,n}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh$1=new Mesh,_sphere$4=new Sphere;class InstancedMesh extends Mesh{constructor(n,s,f){super(n,s),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(f*16),16),this.previousInstanceMatrix=null,this.instanceColor=null,this.morphTexture=null,this.count=f,this.boundingBox=null,this.boundingSphere=null;for(let d=0;d<f;d++)this.setMatrixAt(d,_identity)}computeBoundingBox(){const n=this.geometry,s=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),n.boundingBox===null&&n.computeBoundingBox(),this.boundingBox.makeEmpty();for(let f=0;f<s;f++)this.getMatrixAt(f,_instanceLocalMatrix),_box3.copy(n.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const n=this.geometry,s=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),n.boundingSphere===null&&n.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let f=0;f<s;f++)this.getMatrixAt(f,_instanceLocalMatrix),_sphere$4.copy(n.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$4)}copy(n,s){return super.copy(n,s),this.instanceMatrix.copy(n.instanceMatrix),n.previousInstanceMatrix!==null&&(this.previousInstanceMatrix=n.previousInstanceMatrix.clone()),n.morphTexture!==null&&(this.morphTexture=n.morphTexture.clone()),n.instanceColor!==null&&(this.instanceColor=n.instanceColor.clone()),this.count=n.count,n.boundingBox!==null&&(this.boundingBox=n.boundingBox.clone()),n.boundingSphere!==null&&(this.boundingSphere=n.boundingSphere.clone()),this}getColorAt(n,s){s.fromArray(this.instanceColor.array,n*3)}getMatrixAt(n,s){s.fromArray(this.instanceMatrix.array,n*16)}getMorphAt(n,s){const f=s.morphTargetInfluences,d=this.morphTexture.source.data.data,y=f.length+1,_=n*y+1;for(let A=0;A<f.length;A++)f[A]=d[_+A]}raycast(n,s){const f=this.matrixWorld,d=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,_mesh$1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(f),n.ray.intersectsSphere(_sphere$4)!==!1))for(let y=0;y<d;y++){this.getMatrixAt(y,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(f,_instanceLocalMatrix),_mesh$1.matrixWorld=_instanceWorldMatrix,_mesh$1.raycast(n,_instanceIntersects);for(let _=0,A=_instanceIntersects.length;_<A;_++){const R=_instanceIntersects[_];R.instanceId=y,R.object=this,s.push(R)}_instanceIntersects.length=0}}setColorAt(n,s){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),s.toArray(this.instanceColor.array,n*3)}setMatrixAt(n,s){s.toArray(this.instanceMatrix.array,n*16)}setMorphAt(n,s){const f=s.morphTargetInfluences,d=f.length+1;this.morphTexture===null&&(this.morphTexture=new DataTexture(new Float32Array(d*this.count),d,this.count,RedFormat,FloatType));const y=this.morphTexture.source.data.data;let _=0;for(let I=0;I<f.length;I++)_+=f[I];const A=this.geometry.morphTargetsRelative?1:1-_,R=d*n;y[R]=A,y.set(f,R+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(n=new Vector3(1,0,0),s=0){this.isPlane=!0,this.normal=n,this.constant=s}set(n,s){return this.normal.copy(n),this.constant=s,this}setComponents(n,s,f,d){return this.normal.set(n,s,f),this.constant=d,this}setFromNormalAndCoplanarPoint(n,s){return this.normal.copy(n),this.constant=-s.dot(this.normal),this}setFromCoplanarPoints(n,s,f){const d=_vector1.subVectors(f,s).cross(_vector2.subVectors(n,s)).normalize();return this.setFromNormalAndCoplanarPoint(d,n),this}copy(n){return this.normal.copy(n.normal),this.constant=n.constant,this}normalize(){const n=1/this.normal.length();return this.normal.multiplyScalar(n),this.constant*=n,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(n){return this.normal.dot(n)+this.constant}distanceToSphere(n){return this.distanceToPoint(n.center)-n.radius}projectPoint(n,s){return s.copy(n).addScaledVector(this.normal,-this.distanceToPoint(n))}intersectLine(n,s){const f=n.delta(_vector1),d=this.normal.dot(f);if(d===0)return this.distanceToPoint(n.start)===0?s.copy(n.start):null;const y=-(n.start.dot(this.normal)+this.constant)/d;return y<0||y>1?null:s.copy(n.start).addScaledVector(f,y)}intersectsLine(n){const s=this.distanceToPoint(n.start),f=this.distanceToPoint(n.end);return s<0&&f>0||f<0&&s>0}intersectsBox(n){return n.intersectsPlane(this)}intersectsSphere(n){return n.intersectsPlane(this)}coplanarPoint(n){return n.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(n,s){const f=s||_normalMatrix.getNormalMatrix(n),d=this.coplanarPoint(_vector1).applyMatrix4(n),y=this.normal.applyMatrix3(f).normalize();return this.constant=-d.dot(y),this}translate(n){return this.constant-=n.dot(this.normal),this}equals(n){return n.normal.equals(this.normal)&&n.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$3=new Sphere,_defaultSpriteCenter=new Vector2(.5,.5),_vector$6=new Vector3;class Frustum{constructor(n=new Plane,s=new Plane,f=new Plane,d=new Plane,y=new Plane,_=new Plane){this.planes=[n,s,f,d,y,_]}set(n,s,f,d,y,_){const A=this.planes;return A[0].copy(n),A[1].copy(s),A[2].copy(f),A[3].copy(d),A[4].copy(y),A[5].copy(_),this}copy(n){const s=this.planes;for(let f=0;f<6;f++)s[f].copy(n.planes[f]);return this}setFromProjectionMatrix(n,s=WebGLCoordinateSystem,f=!1){const d=this.planes,y=n.elements,_=y[0],A=y[1],R=y[2],I=y[3],G=y[4],Y=y[5],q=y[6],K=y[7],Q=y[8],ne=y[9],te=y[10],J=y[11],ie=y[12],re=y[13],le=y[14],fe=y[15];if(d[0].setComponents(I-_,K-G,J-Q,fe-ie).normalize(),d[1].setComponents(I+_,K+G,J+Q,fe+ie).normalize(),d[2].setComponents(I+A,K+Y,J+ne,fe+re).normalize(),d[3].setComponents(I-A,K-Y,J-ne,fe-re).normalize(),f)d[4].setComponents(R,q,te,le).normalize(),d[5].setComponents(I-R,K-q,J-te,fe-le).normalize();else if(d[4].setComponents(I-R,K-q,J-te,fe-le).normalize(),s===WebGLCoordinateSystem)d[5].setComponents(I+R,K+q,J+te,fe+le).normalize();else if(s===WebGPUCoordinateSystem)d[5].setComponents(R,q,te,le).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+s);return this}intersectsObject(n){if(n.boundingSphere!==void 0)n.boundingSphere===null&&n.computeBoundingSphere(),_sphere$3.copy(n.boundingSphere).applyMatrix4(n.matrixWorld);else{const s=n.geometry;s.boundingSphere===null&&s.computeBoundingSphere(),_sphere$3.copy(s.boundingSphere).applyMatrix4(n.matrixWorld)}return this.intersectsSphere(_sphere$3)}intersectsSprite(n){_sphere$3.center.set(0,0,0);const s=_defaultSpriteCenter.distanceTo(n.center);return _sphere$3.radius=.7071067811865476+s,_sphere$3.applyMatrix4(n.matrixWorld),this.intersectsSphere(_sphere$3)}intersectsSphere(n){const s=this.planes,f=n.center,d=-n.radius;for(let y=0;y<6;y++)if(s[y].distanceToPoint(f)<d)return!1;return!0}intersectsBox(n){const s=this.planes;for(let f=0;f<6;f++){const d=s[f];if(_vector$6.x=d.normal.x>0?n.max.x:n.min.x,_vector$6.y=d.normal.y>0?n.max.y:n.min.y,_vector$6.z=d.normal.z>0?n.max.z:n.min.z,d.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(n){const s=this.planes;for(let f=0;f<6;f++)if(s[f].distanceToPoint(n)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const _projScreenMatrix$1=new Matrix4,_frustum$1=new Frustum;class FrustumArray{constructor(){this.coordinateSystem=WebGLCoordinateSystem}intersectsObject(n,s){if(!s.isArrayCamera||s.cameras.length===0)return!1;for(let f=0;f<s.cameras.length;f++){const d=s.cameras[f];if(_projScreenMatrix$1.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$1,d.coordinateSystem,d.reversedDepth),_frustum$1.intersectsObject(n))return!0}return!1}intersectsSprite(n,s){if(!s||!s.cameras||s.cameras.length===0)return!1;for(let f=0;f<s.cameras.length;f++){const d=s.cameras[f];if(_projScreenMatrix$1.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$1,d.coordinateSystem,d.reversedDepth),_frustum$1.intersectsSprite(n))return!0}return!1}intersectsSphere(n,s){if(!s||!s.cameras||s.cameras.length===0)return!1;for(let f=0;f<s.cameras.length;f++){const d=s.cameras[f];if(_projScreenMatrix$1.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$1,d.coordinateSystem,d.reversedDepth),_frustum$1.intersectsSphere(n))return!0}return!1}intersectsBox(n,s){if(!s||!s.cameras||s.cameras.length===0)return!1;for(let f=0;f<s.cameras.length;f++){const d=s.cameras[f];if(_projScreenMatrix$1.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$1,d.coordinateSystem,d.reversedDepth),_frustum$1.intersectsBox(n))return!0}return!1}containsPoint(n,s){if(!s||!s.cameras||s.cameras.length===0)return!1;for(let f=0;f<s.cameras.length;f++){const d=s.cameras[f];if(_projScreenMatrix$1.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$1,d.coordinateSystem,d.reversedDepth),_frustum$1.containsPoint(n))return!0}return!1}clone(){return new FrustumArray}}function ascIdSort(u,n){return u-n}function sortOpaque(u,n){return u.z-n.z}function sortTransparent(u,n){return n.z-u.z}class MultiDrawRenderList{constructor(){this.index=0,this.pool=[],this.list=[]}push(n,s,f,d){const y=this.pool,_=this.list;this.index>=y.length&&y.push({start:-1,count:-1,z:-1,index:-1});const A=y[this.index];_.push(A),this.index++,A.start=n,A.count=s,A.z=f,A.index=d}reset(){this.list.length=0,this.index=0}}const _matrix$1=new Matrix4,_whiteColor=new Color(1,1,1),_frustum=new Frustum,_frustumArray=new FrustumArray,_box$1=new Box3,_sphere$2=new Sphere,_vector$5=new Vector3,_forward$1=new Vector3,_temp=new Vector3,_renderList=new MultiDrawRenderList,_mesh=new Mesh,_batchIntersects=[];function copyAttributeData(u,n,s=0){const f=n.itemSize;if(u.isInterleavedBufferAttribute||u.array.constructor!==n.array.constructor){const d=u.count;for(let y=0;y<d;y++)for(let _=0;_<f;_++)n.setComponent(y+s,_,u.getComponent(y,_))}else n.array.set(u.array,s*f);n.needsUpdate=!0}function copyArrayContents(u,n){if(u.constructor!==n.constructor){const s=Math.min(u.length,n.length);for(let f=0;f<s;f++)n[f]=u[f]}else{const s=Math.min(u.length,n.length);n.set(new u.constructor(u.buffer,0,s))}}class BatchedMesh extends Mesh{constructor(n,s,f=s*2,d){super(new BufferGeometry,d),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=n,this._maxVertexCount=s,this._maxIndexCount=f,this._multiDrawCounts=new Int32Array(n),this._multiDrawStarts=new Int32Array(n),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let n=Math.sqrt(this._maxInstanceCount*4);n=Math.ceil(n/4)*4,n=Math.max(n,4);const s=new Float32Array(n*n*4),f=new DataTexture(s,n,n,RGBAFormat,FloatType);this._matricesTexture=f}_initIndirectTexture(){let n=Math.sqrt(this._maxInstanceCount);n=Math.ceil(n);const s=new Uint32Array(n*n),f=new DataTexture(s,n,n,RedIntegerFormat,UnsignedIntType);this._indirectTexture=f}_initColorsTexture(){let n=Math.sqrt(this._maxInstanceCount);n=Math.ceil(n);const s=new Float32Array(n*n*4).fill(1),f=new DataTexture(s,n,n,RGBAFormat,FloatType);f.colorSpace=ColorManagement.workingColorSpace,this._colorsTexture=f}_initializeGeometry(n){const s=this.geometry,f=this._maxVertexCount,d=this._maxIndexCount;if(this._geometryInitialized===!1){for(const y in n.attributes){const _=n.getAttribute(y),{array:A,itemSize:R,normalized:I}=_,G=new A.constructor(f*R),Y=new BufferAttribute(G,R,I);s.setAttribute(y,Y)}if(n.getIndex()!==null){const y=f>65535?new Uint32Array(d):new Uint16Array(d);s.setIndex(new BufferAttribute(y,1))}this._geometryInitialized=!0}}_validateGeometry(n){const s=this.geometry;if(!!n.getIndex()!=!!s.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const f in s.attributes){if(!n.hasAttribute(f))throw new Error(`THREE.BatchedMesh: Added geometry missing "${f}". All geometries must have consistent attributes.`);const d=n.getAttribute(f),y=s.getAttribute(f);if(d.itemSize!==y.itemSize||d.normalized!==y.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(n){const s=this._instanceInfo;if(n<0||n>=s.length||s[n].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${n}. Instance is either out of range or has been deleted.`)}validateGeometryId(n){const s=this._geometryInfo;if(n<0||n>=s.length||s[n].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${n}. Geometry is either out of range or has been deleted.`)}setCustomSort(n){return this.customSort=n,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const n=this.boundingBox,s=this._instanceInfo;n.makeEmpty();for(let f=0,d=s.length;f<d;f++){if(s[f].active===!1)continue;const y=s[f].geometryIndex;this.getMatrixAt(f,_matrix$1),this.getBoundingBoxAt(y,_box$1).applyMatrix4(_matrix$1),n.union(_box$1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const n=this.boundingSphere,s=this._instanceInfo;n.makeEmpty();for(let f=0,d=s.length;f<d;f++){if(s[f].active===!1)continue;const y=s[f].geometryIndex;this.getMatrixAt(f,_matrix$1),this.getBoundingSphereAt(y,_sphere$2).applyMatrix4(_matrix$1),n.union(_sphere$2)}}addInstance(n){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const f={visible:!0,active:!0,geometryIndex:n};let d=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ascIdSort),d=this._availableInstanceIds.shift(),this._instanceInfo[d]=f):(d=this._instanceInfo.length,this._instanceInfo.push(f));const y=this._matricesTexture;_matrix$1.identity().toArray(y.image.data,d*16),y.needsUpdate=!0;const _=this._colorsTexture;return _&&(_whiteColor.toArray(_.image.data,d*4),_.needsUpdate=!0),this._visibilityChanged=!0,d}addGeometry(n,s=-1,f=-1){this._initializeGeometry(n),this._validateGeometry(n);const d={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},y=this._geometryInfo;d.vertexStart=this._nextVertexStart,d.reservedVertexCount=s===-1?n.getAttribute("position").count:s;const _=n.getIndex();if(_!==null&&(d.indexStart=this._nextIndexStart,d.reservedIndexCount=f===-1?_.count:f),d.indexStart!==-1&&d.indexStart+d.reservedIndexCount>this._maxIndexCount||d.vertexStart+d.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let R;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ascIdSort),R=this._availableGeometryIds.shift(),y[R]=d):(R=this._geometryCount,this._geometryCount++,y.push(d)),this.setGeometryAt(R,n),this._nextIndexStart=d.indexStart+d.reservedIndexCount,this._nextVertexStart=d.vertexStart+d.reservedVertexCount,R}setGeometryAt(n,s){if(n>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(s);const f=this.geometry,d=f.getIndex()!==null,y=f.getIndex(),_=s.getIndex(),A=this._geometryInfo[n];if(d&&_.count>A.reservedIndexCount||s.attributes.position.count>A.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const R=A.vertexStart,I=A.reservedVertexCount;A.vertexCount=s.getAttribute("position").count;for(const G in f.attributes){const Y=s.getAttribute(G),q=f.getAttribute(G);copyAttributeData(Y,q,R);const K=Y.itemSize;for(let Q=Y.count,ne=I;Q<ne;Q++){const te=R+Q;for(let J=0;J<K;J++)q.setComponent(te,J,0)}q.needsUpdate=!0,q.addUpdateRange(R*K,I*K)}if(d){const G=A.indexStart,Y=A.reservedIndexCount;A.indexCount=s.getIndex().count;for(let q=0;q<_.count;q++)y.setX(G+q,R+_.getX(q));for(let q=_.count,K=Y;q<K;q++)y.setX(G+q,R);y.needsUpdate=!0,y.addUpdateRange(G,A.reservedIndexCount)}return A.start=d?A.indexStart:A.vertexStart,A.count=d?A.indexCount:A.vertexCount,A.boundingBox=null,s.boundingBox!==null&&(A.boundingBox=s.boundingBox.clone()),A.boundingSphere=null,s.boundingSphere!==null&&(A.boundingSphere=s.boundingSphere.clone()),this._visibilityChanged=!0,n}deleteGeometry(n){const s=this._geometryInfo;if(n>=s.length||s[n].active===!1)return this;const f=this._instanceInfo;for(let d=0,y=f.length;d<y;d++)f[d].active&&f[d].geometryIndex===n&&this.deleteInstance(d);return s[n].active=!1,this._availableGeometryIds.push(n),this._visibilityChanged=!0,this}deleteInstance(n){return this.validateInstanceId(n),this._instanceInfo[n].active=!1,this._availableInstanceIds.push(n),this._visibilityChanged=!0,this}optimize(){let n=0,s=0;const f=this._geometryInfo,d=f.map((_,A)=>A).sort((_,A)=>f[_].vertexStart-f[A].vertexStart),y=this.geometry;for(let _=0,A=f.length;_<A;_++){const R=d[_],I=f[R];if(I.active!==!1){if(y.index!==null){if(I.indexStart!==s){const{indexStart:G,vertexStart:Y,reservedIndexCount:q}=I,K=y.index,Q=K.array,ne=n-Y;for(let te=G;te<G+q;te++)Q[te]=Q[te]+ne;K.array.copyWithin(s,G,G+q),K.addUpdateRange(s,q),K.needsUpdate=!0,I.indexStart=s}s+=I.reservedIndexCount}if(I.vertexStart!==n){const{vertexStart:G,reservedVertexCount:Y}=I,q=y.attributes;for(const K in q){const Q=q[K],{array:ne,itemSize:te}=Q;ne.copyWithin(n*te,G*te,(G+Y)*te),Q.addUpdateRange(n*te,Y*te),Q.needsUpdate=!0}I.vertexStart=n}n+=I.reservedVertexCount,I.start=y.index?I.indexStart:I.vertexStart}}return this._nextIndexStart=s,this._nextVertexStart=n,this._visibilityChanged=!0,this}getBoundingBoxAt(n,s){if(n>=this._geometryCount)return null;const f=this.geometry,d=this._geometryInfo[n];if(d.boundingBox===null){const y=new Box3,_=f.index,A=f.attributes.position;for(let R=d.start,I=d.start+d.count;R<I;R++){let G=R;_&&(G=_.getX(G)),y.expandByPoint(_vector$5.fromBufferAttribute(A,G))}d.boundingBox=y}return s.copy(d.boundingBox),s}getBoundingSphereAt(n,s){if(n>=this._geometryCount)return null;const f=this.geometry,d=this._geometryInfo[n];if(d.boundingSphere===null){const y=new Sphere;this.getBoundingBoxAt(n,_box$1),_box$1.getCenter(y.center);const _=f.index,A=f.attributes.position;let R=0;for(let I=d.start,G=d.start+d.count;I<G;I++){let Y=I;_&&(Y=_.getX(Y)),_vector$5.fromBufferAttribute(A,Y),R=Math.max(R,y.center.distanceToSquared(_vector$5))}y.radius=Math.sqrt(R),d.boundingSphere=y}return s.copy(d.boundingSphere),s}setMatrixAt(n,s){this.validateInstanceId(n);const f=this._matricesTexture,d=this._matricesTexture.image.data;return s.toArray(d,n*16),f.needsUpdate=!0,this}getMatrixAt(n,s){return this.validateInstanceId(n),s.fromArray(this._matricesTexture.image.data,n*16)}setColorAt(n,s){return this.validateInstanceId(n),this._colorsTexture===null&&this._initColorsTexture(),s.toArray(this._colorsTexture.image.data,n*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(n,s){return this.validateInstanceId(n),s.fromArray(this._colorsTexture.image.data,n*4)}setVisibleAt(n,s){return this.validateInstanceId(n),this._instanceInfo[n].visible===s?this:(this._instanceInfo[n].visible=s,this._visibilityChanged=!0,this)}getVisibleAt(n){return this.validateInstanceId(n),this._instanceInfo[n].visible}setGeometryIdAt(n,s){return this.validateInstanceId(n),this.validateGeometryId(s),this._instanceInfo[n].geometryIndex=s,this}getGeometryIdAt(n){return this.validateInstanceId(n),this._instanceInfo[n].geometryIndex}getGeometryRangeAt(n,s={}){this.validateGeometryId(n);const f=this._geometryInfo[n];return s.vertexStart=f.vertexStart,s.vertexCount=f.vertexCount,s.reservedVertexCount=f.reservedVertexCount,s.indexStart=f.indexStart,s.indexCount=f.indexCount,s.reservedIndexCount=f.reservedIndexCount,s.start=f.start,s.count=f.count,s}setInstanceCount(n){const s=this._availableInstanceIds,f=this._instanceInfo;for(s.sort(ascIdSort);s[s.length-1]===f.length-1;)f.pop(),s.pop();if(n<f.length)throw new Error(`BatchedMesh: Instance ids outside the range ${n} are being used. Cannot shrink instance count.`);const d=new Int32Array(n),y=new Int32Array(n);copyArrayContents(this._multiDrawCounts,d),copyArrayContents(this._multiDrawStarts,y),this._multiDrawCounts=d,this._multiDrawStarts=y,this._maxInstanceCount=n;const _=this._indirectTexture,A=this._matricesTexture,R=this._colorsTexture;_.dispose(),this._initIndirectTexture(),copyArrayContents(_.image.data,this._indirectTexture.image.data),A.dispose(),this._initMatricesTexture(),copyArrayContents(A.image.data,this._matricesTexture.image.data),R&&(R.dispose(),this._initColorsTexture(),copyArrayContents(R.image.data,this._colorsTexture.image.data))}setGeometrySize(n,s){const f=[...this._geometryInfo].filter(A=>A.active);if(Math.max(...f.map(A=>A.vertexStart+A.reservedVertexCount))>n)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${s}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...f.map(R=>R.indexStart+R.reservedIndexCount))>s)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${s}. Cannot shrink further.`);const y=this.geometry;y.dispose(),this._maxVertexCount=n,this._maxIndexCount=s,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new BufferGeometry,this._initializeGeometry(y));const _=this.geometry;y.index&&copyArrayContents(y.index.array,_.index.array);for(const A in y.attributes)copyArrayContents(y.attributes[A].array,_.attributes[A].array)}raycast(n,s){const f=this._instanceInfo,d=this._geometryInfo,y=this.matrixWorld,_=this.geometry;_mesh.material=this.material,_mesh.geometry.index=_.index,_mesh.geometry.attributes=_.attributes,_mesh.geometry.boundingBox===null&&(_mesh.geometry.boundingBox=new Box3),_mesh.geometry.boundingSphere===null&&(_mesh.geometry.boundingSphere=new Sphere);for(let A=0,R=f.length;A<R;A++){if(!f[A].visible||!f[A].active)continue;const I=f[A].geometryIndex,G=d[I];_mesh.geometry.setDrawRange(G.start,G.count),this.getMatrixAt(A,_mesh.matrixWorld).premultiply(y),this.getBoundingBoxAt(I,_mesh.geometry.boundingBox),this.getBoundingSphereAt(I,_mesh.geometry.boundingSphere),_mesh.raycast(n,_batchIntersects);for(let Y=0,q=_batchIntersects.length;Y<q;Y++){const K=_batchIntersects[Y];K.object=this,K.batchId=A,s.push(K)}_batchIntersects.length=0}_mesh.material=null,_mesh.geometry.index=null,_mesh.geometry.attributes={},_mesh.geometry.setDrawRange(0,1/0)}copy(n){return super.copy(n),this.geometry=n.geometry.clone(),this.perObjectFrustumCulled=n.perObjectFrustumCulled,this.sortObjects=n.sortObjects,this.boundingBox=n.boundingBox!==null?n.boundingBox.clone():null,this.boundingSphere=n.boundingSphere!==null?n.boundingSphere.clone():null,this._geometryInfo=n._geometryInfo.map(s=>({...s,boundingBox:s.boundingBox!==null?s.boundingBox.clone():null,boundingSphere:s.boundingSphere!==null?s.boundingSphere.clone():null})),this._instanceInfo=n._instanceInfo.map(s=>({...s})),this._availableInstanceIds=n._availableInstanceIds.slice(),this._availableGeometryIds=n._availableGeometryIds.slice(),this._nextIndexStart=n._nextIndexStart,this._nextVertexStart=n._nextVertexStart,this._geometryCount=n._geometryCount,this._maxInstanceCount=n._maxInstanceCount,this._maxVertexCount=n._maxVertexCount,this._maxIndexCount=n._maxIndexCount,this._geometryInitialized=n._geometryInitialized,this._multiDrawCounts=n._multiDrawCounts.slice(),this._multiDrawStarts=n._multiDrawStarts.slice(),this._indirectTexture=n._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=n._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=n._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(n,s,f,d,y){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const _=d.getIndex();let A=_===null?1:_.array.BYTES_PER_ELEMENT,R=1;y.wireframe&&(R=2,A=d.attributes.position.count>65535?4:2);const I=this._instanceInfo,G=this._multiDrawStarts,Y=this._multiDrawCounts,q=this._geometryInfo,K=this.perObjectFrustumCulled,Q=this._indirectTexture,ne=Q.image.data,te=f.isArrayCamera?_frustumArray:_frustum;K&&!f.isArrayCamera&&(_matrix$1.multiplyMatrices(f.projectionMatrix,f.matrixWorldInverse).multiply(this.matrixWorld),_frustum.setFromProjectionMatrix(_matrix$1,f.coordinateSystem,f.reversedDepth));let J=0;if(this.sortObjects){_matrix$1.copy(this.matrixWorld).invert(),_vector$5.setFromMatrixPosition(f.matrixWorld).applyMatrix4(_matrix$1),_forward$1.set(0,0,-1).transformDirection(f.matrixWorld).transformDirection(_matrix$1);for(let le=0,fe=I.length;le<fe;le++)if(I[le].visible&&I[le].active){const pe=I[le].geometryIndex;this.getMatrixAt(le,_matrix$1),this.getBoundingSphereAt(pe,_sphere$2).applyMatrix4(_matrix$1);let de=!1;if(K&&(de=!te.intersectsSphere(_sphere$2,f)),!de){const se=q[pe],he=_temp.subVectors(_sphere$2.center,_vector$5).dot(_forward$1);_renderList.push(se.start,se.count,he,le)}}const ie=_renderList.list,re=this.customSort;re===null?ie.sort(y.transparent?sortTransparent:sortOpaque):re.call(this,ie,f);for(let le=0,fe=ie.length;le<fe;le++){const pe=ie[le];G[J]=pe.start*A*R,Y[J]=pe.count*R,ne[J]=pe.index,J++}_renderList.reset()}else for(let ie=0,re=I.length;ie<re;ie++)if(I[ie].visible&&I[ie].active){const le=I[ie].geometryIndex;let fe=!1;if(K&&(this.getMatrixAt(ie,_matrix$1),this.getBoundingSphereAt(le,_sphere$2).applyMatrix4(_matrix$1),fe=!te.intersectsSphere(_sphere$2,f)),!fe){const pe=q[le];G[J]=pe.start*A*R,Y[J]=pe.count*R,ne[J]=ie,J++}}Q.needsUpdate=!0,this._multiDrawCount=J,this._visibilityChanged=!1}onBeforeShadow(n,s,f,d,y,_){this.onBeforeRender(n,null,d,y,_)}}class LineBasicMaterial extends Material{constructor(n){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.linewidth=n.linewidth,this.linecap=n.linecap,this.linejoin=n.linejoin,this.fog=n.fog,this}}const _vStart=new Vector3,_vEnd=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere,_intersectPointOnRay=new Vector3,_intersectPointOnSegment=new Vector3;class Line extends Object3D{constructor(n=new BufferGeometry,s=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=n,this.material=s,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(n,s){return super.copy(n,s),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}computeLineDistances(){const n=this.geometry;if(n.index===null){const s=n.attributes.position,f=[0];for(let d=1,y=s.count;d<y;d++)_vStart.fromBufferAttribute(s,d-1),_vEnd.fromBufferAttribute(s,d),f[d]=f[d-1],f[d]+=_vStart.distanceTo(_vEnd);n.setAttribute("lineDistance",new Float32BufferAttribute(f,1))}else warn("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(n,s){const f=this.geometry,d=this.matrixWorld,y=n.params.Line.threshold,_=f.drawRange;if(f.boundingSphere===null&&f.computeBoundingSphere(),_sphere$1.copy(f.boundingSphere),_sphere$1.applyMatrix4(d),_sphere$1.radius+=y,n.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(d).invert(),_ray$1.copy(n.ray).applyMatrix4(_inverseMatrix$1);const A=y/((this.scale.x+this.scale.y+this.scale.z)/3),R=A*A,I=this.isLineSegments?2:1,G=f.index,q=f.attributes.position;if(G!==null){const K=Math.max(0,_.start),Q=Math.min(G.count,_.start+_.count);for(let ne=K,te=Q-1;ne<te;ne+=I){const J=G.getX(ne),ie=G.getX(ne+1),re=checkIntersection(this,n,_ray$1,R,J,ie,ne);re&&s.push(re)}if(this.isLineLoop){const ne=G.getX(Q-1),te=G.getX(K),J=checkIntersection(this,n,_ray$1,R,ne,te,Q-1);J&&s.push(J)}}else{const K=Math.max(0,_.start),Q=Math.min(q.count,_.start+_.count);for(let ne=K,te=Q-1;ne<te;ne+=I){const J=checkIntersection(this,n,_ray$1,R,ne,ne+1,ne);J&&s.push(J)}if(this.isLineLoop){const ne=checkIntersection(this,n,_ray$1,R,Q-1,K,Q-1);ne&&s.push(ne)}}}updateMorphTargets(){const s=this.geometry.morphAttributes,f=Object.keys(s);if(f.length>0){const d=s[f[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let y=0,_=d.length;y<_;y++){const A=d[y].name||String(y);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=y}}}}}function checkIntersection(u,n,s,f,d,y,_){const A=u.geometry.attributes.position;if(_vStart.fromBufferAttribute(A,d),_vEnd.fromBufferAttribute(A,y),s.distanceSqToSegment(_vStart,_vEnd,_intersectPointOnRay,_intersectPointOnSegment)>f)return;_intersectPointOnRay.applyMatrix4(u.matrixWorld);const I=n.ray.origin.distanceTo(_intersectPointOnRay);if(!(I<n.near||I>n.far))return{distance:I,point:_intersectPointOnSegment.clone().applyMatrix4(u.matrixWorld),index:_,face:null,faceIndex:null,barycoord:null,object:u}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(n,s){super(n,s),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const n=this.geometry;if(n.index===null){const s=n.attributes.position,f=[];for(let d=0,y=s.count;d<y;d+=2)_start.fromBufferAttribute(s,d),_end.fromBufferAttribute(s,d+1),f[d]=d===0?0:f[d-1],f[d+1]=f[d]+_start.distanceTo(_end);n.setAttribute("lineDistance",new Float32BufferAttribute(f,1))}else warn("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(n,s){super(n,s),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(n){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.size=n.size,this.sizeAttenuation=n.sizeAttenuation,this.fog=n.fog,this}}const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_position$3=new Vector3;class Points extends Object3D{constructor(n=new BufferGeometry,s=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=n,this.material=s,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(n,s){return super.copy(n,s),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}raycast(n,s){const f=this.geometry,d=this.matrixWorld,y=n.params.Points.threshold,_=f.drawRange;if(f.boundingSphere===null&&f.computeBoundingSphere(),_sphere.copy(f.boundingSphere),_sphere.applyMatrix4(d),_sphere.radius+=y,n.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(d).invert(),_ray.copy(n.ray).applyMatrix4(_inverseMatrix);const A=y/((this.scale.x+this.scale.y+this.scale.z)/3),R=A*A,I=f.index,Y=f.attributes.position;if(I!==null){const q=Math.max(0,_.start),K=Math.min(I.count,_.start+_.count);for(let Q=q,ne=K;Q<ne;Q++){const te=I.getX(Q);_position$3.fromBufferAttribute(Y,te),testPoint(_position$3,te,R,d,n,s,this)}}else{const q=Math.max(0,_.start),K=Math.min(Y.count,_.start+_.count);for(let Q=q,ne=K;Q<ne;Q++)_position$3.fromBufferAttribute(Y,Q),testPoint(_position$3,Q,R,d,n,s,this)}}updateMorphTargets(){const s=this.geometry.morphAttributes,f=Object.keys(s);if(f.length>0){const d=s[f[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let y=0,_=d.length;y<_;y++){const A=d[y].name||String(y);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=y}}}}}function testPoint(u,n,s,f,d,y,_){const A=_ray.distanceSqToPoint(u);if(A<s){const R=new Vector3;_ray.closestPointToPoint(u,R),R.applyMatrix4(f);const I=d.ray.origin.distanceTo(R);if(I<d.near||I>d.far)return;y.push({distance:I,distanceToRay:Math.sqrt(A),point:R,index:n,face:null,faceIndex:null,barycoord:null,object:_})}}class VideoTexture extends Texture{constructor(n,s,f,d,y=LinearFilter,_=LinearFilter,A,R,I){super(n,s,f,d,y,_,A,R,I),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const G=this;function Y(){G.needsUpdate=!0,G._requestVideoFrameCallbackId=n.requestVideoFrameCallback(Y)}"requestVideoFrameCallback"in n&&(this._requestVideoFrameCallbackId=n.requestVideoFrameCallback(Y))}clone(){return new this.constructor(this.image).copy(this)}update(){const n=this.image;"requestVideoFrameCallback"in n===!1&&n.readyState>=n.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class VideoFrameTexture extends VideoTexture{constructor(n,s,f,d,y,_,A,R){super({},n,s,f,d,y,_,A,R),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(n){this.image=n,this.needsUpdate=!0}}class FramebufferTexture extends Texture{constructor(n,s){super({width:n,height:s}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(n,s,f,d,y,_,A,R,I,G,Y,q){super(null,_,A,R,I,G,d,y,Y,q),this.isCompressedTexture=!0,this.image={width:s,height:f},this.mipmaps=n,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(n,s,f,d,y,_){super(n,s,f,y,_),this.isCompressedArrayTexture=!0,this.image.depth=d,this.wrapR=ClampToEdgeWrapping,this.layerUpdates=new Set}addLayerUpdate(n){this.layerUpdates.add(n)}clearLayerUpdates(){this.layerUpdates.clear()}}class CompressedCubeTexture extends CompressedTexture{constructor(n,s,f){super(void 0,n[0].width,n[0].height,s,f,CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=n}}class CubeTexture extends Texture{constructor(n=[],s=CubeReflectionMapping,f,d,y,_,A,R,I,G){super(n,s,f,d,y,_,A,R,I,G),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(n){this.image=n}}class CanvasTexture extends Texture{constructor(n,s,f,d,y,_,A,R,I){super(n,s,f,d,y,_,A,R,I),this.isCanvasTexture=!0,this.needsUpdate=!0}}class DepthTexture extends Texture{constructor(n,s,f=UnsignedIntType,d,y,_,A=NearestFilter,R=NearestFilter,I,G=DepthFormat,Y=1){if(G!==DepthFormat&&G!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const q={width:n,height:s,depth:Y};super(q,d,y,_,A,R,G,f,I),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(n){return super.copy(n),this.source=new Source(Object.assign({},n.image)),this.compareFunction=n.compareFunction,this}toJSON(n){const s=super.toJSON(n);return this.compareFunction!==null&&(s.compareFunction=this.compareFunction),s}}class CubeDepthTexture extends DepthTexture{constructor(n,s=UnsignedIntType,f=CubeReflectionMapping,d,y,_=NearestFilter,A=NearestFilter,R,I=DepthFormat){const G={width:n,height:n,depth:1},Y=[G,G,G,G,G,G];super(n,n,s,f,d,y,_,A,R,I),this.image=Y,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(n){this.image=n}}class ExternalTexture extends Texture{constructor(n=null){super(),this.sourceTexture=n,this.isExternalTexture=!0}copy(n){return super.copy(n),this.sourceTexture=n.sourceTexture,this}}class BoxGeometry extends BufferGeometry{constructor(n=1,s=1,f=1,d=1,y=1,_=1){super(),this.type="BoxGeometry",this.parameters={width:n,height:s,depth:f,widthSegments:d,heightSegments:y,depthSegments:_};const A=this;d=Math.floor(d),y=Math.floor(y),_=Math.floor(_);const R=[],I=[],G=[],Y=[];let q=0,K=0;Q("z","y","x",-1,-1,f,s,n,_,y,0),Q("z","y","x",1,-1,f,s,-n,_,y,1),Q("x","z","y",1,1,n,f,s,d,_,2),Q("x","z","y",1,-1,n,f,-s,d,_,3),Q("x","y","z",1,-1,n,s,f,d,y,4),Q("x","y","z",-1,-1,n,s,-f,d,y,5),this.setIndex(R),this.setAttribute("position",new Float32BufferAttribute(I,3)),this.setAttribute("normal",new Float32BufferAttribute(G,3)),this.setAttribute("uv",new Float32BufferAttribute(Y,2));function Q(ne,te,J,ie,re,le,fe,pe,de,se,he){const Se=le/de,ve=fe/se,Re=le/2,Ee=fe/2,Oe=pe/2,Ne=de+1,ye=se+1;let Ae=0,_e=0;const Te=new Vector3;for(let we=0;we<ye;we++){const ge=we*ve-Ee;for(let De=0;De<Ne;De++){const ze=De*Se-Re;Te[ne]=ze*ie,Te[te]=ge*re,Te[J]=Oe,I.push(Te.x,Te.y,Te.z),Te[ne]=0,Te[te]=0,Te[J]=pe>0?1:-1,G.push(Te.x,Te.y,Te.z),Y.push(De/de),Y.push(1-we/se),Ae+=1}}for(let we=0;we<se;we++)for(let ge=0;ge<de;ge++){const De=q+ge+Ne*we,ze=q+ge+Ne*(we+1),He=q+(ge+1)+Ne*(we+1),yt=q+(ge+1)+Ne*we;R.push(De,ze,yt),R.push(ze,He,yt),_e+=6}A.addGroup(K,_e,he),K+=_e,q+=Ae}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new BoxGeometry(n.width,n.height,n.depth,n.widthSegments,n.heightSegments,n.depthSegments)}}class CapsuleGeometry extends BufferGeometry{constructor(n=1,s=1,f=4,d=8,y=1){super(),this.type="CapsuleGeometry",this.parameters={radius:n,height:s,capSegments:f,radialSegments:d,heightSegments:y},s=Math.max(0,s),f=Math.max(1,Math.floor(f)),d=Math.max(3,Math.floor(d)),y=Math.max(1,Math.floor(y));const _=[],A=[],R=[],I=[],G=s/2,Y=Math.PI/2*n,q=s,K=2*Y+q,Q=f*2+y,ne=d+1,te=new Vector3,J=new Vector3;for(let ie=0;ie<=Q;ie++){let re=0,le=0,fe=0,pe=0;if(ie<=f){const he=ie/f,Se=he*Math.PI/2;le=-G-n*Math.cos(Se),fe=n*Math.sin(Se),pe=-n*Math.cos(Se),re=he*Y}else if(ie<=f+y){const he=(ie-f)/y;le=-G+he*s,fe=n,pe=0,re=Y+he*q}else{const he=(ie-f-y)/f,Se=he*Math.PI/2;le=G+n*Math.sin(Se),fe=n*Math.cos(Se),pe=n*Math.sin(Se),re=Y+q+he*Y}const de=Math.max(0,Math.min(1,re/K));let se=0;ie===0?se=.5/d:ie===Q&&(se=-.5/d);for(let he=0;he<=d;he++){const Se=he/d,ve=Se*Math.PI*2,Re=Math.sin(ve),Ee=Math.cos(ve);J.x=-fe*Ee,J.y=le,J.z=fe*Re,A.push(J.x,J.y,J.z),te.set(-fe*Ee,pe,fe*Re),te.normalize(),R.push(te.x,te.y,te.z),I.push(Se+se,de)}if(ie>0){const he=(ie-1)*ne;for(let Se=0;Se<d;Se++){const ve=he+Se,Re=he+Se+1,Ee=ie*ne+Se,Oe=ie*ne+Se+1;_.push(ve,Re,Ee),_.push(Re,Oe,Ee)}}}this.setIndex(_),this.setAttribute("position",new Float32BufferAttribute(A,3)),this.setAttribute("normal",new Float32BufferAttribute(R,3)),this.setAttribute("uv",new Float32BufferAttribute(I,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new CapsuleGeometry(n.radius,n.height,n.capSegments,n.radialSegments,n.heightSegments)}}class CircleGeometry extends BufferGeometry{constructor(n=1,s=32,f=0,d=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:n,segments:s,thetaStart:f,thetaLength:d},s=Math.max(3,s);const y=[],_=[],A=[],R=[],I=new Vector3,G=new Vector2;_.push(0,0,0),A.push(0,0,1),R.push(.5,.5);for(let Y=0,q=3;Y<=s;Y++,q+=3){const K=f+Y/s*d;I.x=n*Math.cos(K),I.y=n*Math.sin(K),_.push(I.x,I.y,I.z),A.push(0,0,1),G.x=(_[q]/n+1)/2,G.y=(_[q+1]/n+1)/2,R.push(G.x,G.y)}for(let Y=1;Y<=s;Y++)y.push(Y,Y+1,0);this.setIndex(y),this.setAttribute("position",new Float32BufferAttribute(_,3)),this.setAttribute("normal",new Float32BufferAttribute(A,3)),this.setAttribute("uv",new Float32BufferAttribute(R,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new CircleGeometry(n.radius,n.segments,n.thetaStart,n.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(n=1,s=1,f=1,d=32,y=1,_=!1,A=0,R=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:n,radiusBottom:s,height:f,radialSegments:d,heightSegments:y,openEnded:_,thetaStart:A,thetaLength:R};const I=this;d=Math.floor(d),y=Math.floor(y);const G=[],Y=[],q=[],K=[];let Q=0;const ne=[],te=f/2;let J=0;ie(),_===!1&&(n>0&&re(!0),s>0&&re(!1)),this.setIndex(G),this.setAttribute("position",new Float32BufferAttribute(Y,3)),this.setAttribute("normal",new Float32BufferAttribute(q,3)),this.setAttribute("uv",new Float32BufferAttribute(K,2));function ie(){const le=new Vector3,fe=new Vector3;let pe=0;const de=(s-n)/f;for(let se=0;se<=y;se++){const he=[],Se=se/y,ve=Se*(s-n)+n;for(let Re=0;Re<=d;Re++){const Ee=Re/d,Oe=Ee*R+A,Ne=Math.sin(Oe),ye=Math.cos(Oe);fe.x=ve*Ne,fe.y=-Se*f+te,fe.z=ve*ye,Y.push(fe.x,fe.y,fe.z),le.set(Ne,de,ye).normalize(),q.push(le.x,le.y,le.z),K.push(Ee,1-Se),he.push(Q++)}ne.push(he)}for(let se=0;se<d;se++)for(let he=0;he<y;he++){const Se=ne[he][se],ve=ne[he+1][se],Re=ne[he+1][se+1],Ee=ne[he][se+1];(n>0||he!==0)&&(G.push(Se,ve,Ee),pe+=3),(s>0||he!==y-1)&&(G.push(ve,Re,Ee),pe+=3)}I.addGroup(J,pe,0),J+=pe}function re(le){const fe=Q,pe=new Vector2,de=new Vector3;let se=0;const he=le===!0?n:s,Se=le===!0?1:-1;for(let Re=1;Re<=d;Re++)Y.push(0,te*Se,0),q.push(0,Se,0),K.push(.5,.5),Q++;const ve=Q;for(let Re=0;Re<=d;Re++){const Oe=Re/d*R+A,Ne=Math.cos(Oe),ye=Math.sin(Oe);de.x=he*ye,de.y=te*Se,de.z=he*Ne,Y.push(de.x,de.y,de.z),q.push(0,Se,0),pe.x=Ne*.5+.5,pe.y=ye*.5*Se+.5,K.push(pe.x,pe.y),Q++}for(let Re=0;Re<d;Re++){const Ee=fe+Re,Oe=ve+Re;le===!0?G.push(Oe,Oe+1,Ee):G.push(Oe+1,Oe,Ee),se+=3}I.addGroup(J,se,le===!0?1:2),J+=se}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new CylinderGeometry(n.radiusTop,n.radiusBottom,n.height,n.radialSegments,n.heightSegments,n.openEnded,n.thetaStart,n.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(n=1,s=1,f=32,d=1,y=!1,_=0,A=Math.PI*2){super(0,n,s,f,d,y,_,A),this.type="ConeGeometry",this.parameters={radius:n,height:s,radialSegments:f,heightSegments:d,openEnded:y,thetaStart:_,thetaLength:A}}static fromJSON(n){return new ConeGeometry(n.radius,n.height,n.radialSegments,n.heightSegments,n.openEnded,n.thetaStart,n.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(n=[],s=[],f=1,d=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:n,indices:s,radius:f,detail:d};const y=[],_=[];A(d),I(f),G(),this.setAttribute("position",new Float32BufferAttribute(y,3)),this.setAttribute("normal",new Float32BufferAttribute(y.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(_,2)),d===0?this.computeVertexNormals():this.normalizeNormals();function A(ie){const re=new Vector3,le=new Vector3,fe=new Vector3;for(let pe=0;pe<s.length;pe+=3)K(s[pe+0],re),K(s[pe+1],le),K(s[pe+2],fe),R(re,le,fe,ie)}function R(ie,re,le,fe){const pe=fe+1,de=[];for(let se=0;se<=pe;se++){de[se]=[];const he=ie.clone().lerp(le,se/pe),Se=re.clone().lerp(le,se/pe),ve=pe-se;for(let Re=0;Re<=ve;Re++)Re===0&&se===pe?de[se][Re]=he:de[se][Re]=he.clone().lerp(Se,Re/ve)}for(let se=0;se<pe;se++)for(let he=0;he<2*(pe-se)-1;he++){const Se=Math.floor(he/2);he%2===0?(q(de[se][Se+1]),q(de[se+1][Se]),q(de[se][Se])):(q(de[se][Se+1]),q(de[se+1][Se+1]),q(de[se+1][Se]))}}function I(ie){const re=new Vector3;for(let le=0;le<y.length;le+=3)re.x=y[le+0],re.y=y[le+1],re.z=y[le+2],re.normalize().multiplyScalar(ie),y[le+0]=re.x,y[le+1]=re.y,y[le+2]=re.z}function G(){const ie=new Vector3;for(let re=0;re<y.length;re+=3){ie.x=y[re+0],ie.y=y[re+1],ie.z=y[re+2];const le=te(ie)/2/Math.PI+.5,fe=J(ie)/Math.PI+.5;_.push(le,1-fe)}Q(),Y()}function Y(){for(let ie=0;ie<_.length;ie+=6){const re=_[ie+0],le=_[ie+2],fe=_[ie+4],pe=Math.max(re,le,fe),de=Math.min(re,le,fe);pe>.9&&de<.1&&(re<.2&&(_[ie+0]+=1),le<.2&&(_[ie+2]+=1),fe<.2&&(_[ie+4]+=1))}}function q(ie){y.push(ie.x,ie.y,ie.z)}function K(ie,re){const le=ie*3;re.x=n[le+0],re.y=n[le+1],re.z=n[le+2]}function Q(){const ie=new Vector3,re=new Vector3,le=new Vector3,fe=new Vector3,pe=new Vector2,de=new Vector2,se=new Vector2;for(let he=0,Se=0;he<y.length;he+=9,Se+=6){ie.set(y[he+0],y[he+1],y[he+2]),re.set(y[he+3],y[he+4],y[he+5]),le.set(y[he+6],y[he+7],y[he+8]),pe.set(_[Se+0],_[Se+1]),de.set(_[Se+2],_[Se+3]),se.set(_[Se+4],_[Se+5]),fe.copy(ie).add(re).add(le).divideScalar(3);const ve=te(fe);ne(pe,Se+0,ie,ve),ne(de,Se+2,re,ve),ne(se,Se+4,le,ve)}}function ne(ie,re,le,fe){fe<0&&ie.x===1&&(_[re]=ie.x-1),le.x===0&&le.z===0&&(_[re]=fe/2/Math.PI+.5)}function te(ie){return Math.atan2(ie.z,-ie.x)}function J(ie){return Math.atan2(-ie.y,Math.sqrt(ie.x*ie.x+ie.z*ie.z))}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new PolyhedronGeometry(n.vertices,n.indices,n.radius,n.detail)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(n=1,s=0){const f=(1+Math.sqrt(5))/2,d=1/f,y=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-f,0,-d,f,0,d,-f,0,d,f,-d,-f,0,-d,f,0,d,-f,0,d,f,0,-f,0,-d,f,0,-d,-f,0,d,f,0,d],_=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(y,_,n,s),this.type="DodecahedronGeometry",this.parameters={radius:n,detail:s}}static fromJSON(n){return new DodecahedronGeometry(n.radius,n.detail)}}const _v0$3=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(n=null,s=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:n,thresholdAngle:s},n!==null){const d=Math.pow(10,4),y=Math.cos(DEG2RAD*s),_=n.getIndex(),A=n.getAttribute("position"),R=_?_.count:A.count,I=[0,0,0],G=["a","b","c"],Y=new Array(3),q={},K=[];for(let Q=0;Q<R;Q+=3){_?(I[0]=_.getX(Q),I[1]=_.getX(Q+1),I[2]=_.getX(Q+2)):(I[0]=Q,I[1]=Q+1,I[2]=Q+2);const{a:ne,b:te,c:J}=_triangle;if(ne.fromBufferAttribute(A,I[0]),te.fromBufferAttribute(A,I[1]),J.fromBufferAttribute(A,I[2]),_triangle.getNormal(_normal),Y[0]=`${Math.round(ne.x*d)},${Math.round(ne.y*d)},${Math.round(ne.z*d)}`,Y[1]=`${Math.round(te.x*d)},${Math.round(te.y*d)},${Math.round(te.z*d)}`,Y[2]=`${Math.round(J.x*d)},${Math.round(J.y*d)},${Math.round(J.z*d)}`,!(Y[0]===Y[1]||Y[1]===Y[2]||Y[2]===Y[0]))for(let ie=0;ie<3;ie++){const re=(ie+1)%3,le=Y[ie],fe=Y[re],pe=_triangle[G[ie]],de=_triangle[G[re]],se=`${le}_${fe}`,he=`${fe}_${le}`;he in q&&q[he]?(_normal.dot(q[he].normal)<=y&&(K.push(pe.x,pe.y,pe.z),K.push(de.x,de.y,de.z)),q[he]=null):se in q||(q[se]={index0:I[ie],index1:I[re],normal:_normal.clone()})}}for(const Q in q)if(q[Q]){const{index0:ne,index1:te}=q[Q];_v0$3.fromBufferAttribute(A,ne),_v1$1.fromBufferAttribute(A,te),K.push(_v0$3.x,_v0$3.y,_v0$3.z),K.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(K,3))}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){warn("Curve: .getPoint() not implemented.")}getPointAt(n,s){const f=this.getUtoTmapping(n);return this.getPoint(f,s)}getPoints(n=5){const s=[];for(let f=0;f<=n;f++)s.push(this.getPoint(f/n));return s}getSpacedPoints(n=5){const s=[];for(let f=0;f<=n;f++)s.push(this.getPointAt(f/n));return s}getLength(){const n=this.getLengths();return n[n.length-1]}getLengths(n=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const s=[];let f,d=this.getPoint(0),y=0;s.push(0);for(let _=1;_<=n;_++)f=this.getPoint(_/n),y+=f.distanceTo(d),s.push(y),d=f;return this.cacheArcLengths=s,s}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(n,s=null){const f=this.getLengths();let d=0;const y=f.length;let _;s?_=s:_=n*f[y-1];let A=0,R=y-1,I;for(;A<=R;)if(d=Math.floor(A+(R-A)/2),I=f[d]-_,I<0)A=d+1;else if(I>0)R=d-1;else{R=d;break}if(d=R,f[d]===_)return d/(y-1);const G=f[d],q=f[d+1]-G,K=(_-G)/q;return(d+K)/(y-1)}getTangent(n,s){let d=n-1e-4,y=n+1e-4;d<0&&(d=0),y>1&&(y=1);const _=this.getPoint(d),A=this.getPoint(y),R=s||(_.isVector2?new Vector2:new Vector3);return R.copy(A).sub(_).normalize(),R}getTangentAt(n,s){const f=this.getUtoTmapping(n);return this.getTangent(f,s)}computeFrenetFrames(n,s=!1){const f=new Vector3,d=[],y=[],_=[],A=new Vector3,R=new Matrix4;for(let K=0;K<=n;K++){const Q=K/n;d[K]=this.getTangentAt(Q,new Vector3)}y[0]=new Vector3,_[0]=new Vector3;let I=Number.MAX_VALUE;const G=Math.abs(d[0].x),Y=Math.abs(d[0].y),q=Math.abs(d[0].z);G<=I&&(I=G,f.set(1,0,0)),Y<=I&&(I=Y,f.set(0,1,0)),q<=I&&f.set(0,0,1),A.crossVectors(d[0],f).normalize(),y[0].crossVectors(d[0],A),_[0].crossVectors(d[0],y[0]);for(let K=1;K<=n;K++){if(y[K]=y[K-1].clone(),_[K]=_[K-1].clone(),A.crossVectors(d[K-1],d[K]),A.length()>Number.EPSILON){A.normalize();const Q=Math.acos(clamp(d[K-1].dot(d[K]),-1,1));y[K].applyMatrix4(R.makeRotationAxis(A,Q))}_[K].crossVectors(d[K],y[K])}if(s===!0){let K=Math.acos(clamp(y[0].dot(y[n]),-1,1));K/=n,d[0].dot(A.crossVectors(y[0],y[n]))>0&&(K=-K);for(let Q=1;Q<=n;Q++)y[Q].applyMatrix4(R.makeRotationAxis(d[Q],K*Q)),_[Q].crossVectors(d[Q],y[Q])}return{tangents:d,normals:y,binormals:_}}clone(){return new this.constructor().copy(this)}copy(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}toJSON(){const n={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return n.arcLengthDivisions=this.arcLengthDivisions,n.type=this.type,n}fromJSON(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(n=0,s=0,f=1,d=1,y=0,_=Math.PI*2,A=!1,R=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=n,this.aY=s,this.xRadius=f,this.yRadius=d,this.aStartAngle=y,this.aEndAngle=_,this.aClockwise=A,this.aRotation=R}getPoint(n,s=new Vector2){const f=s,d=Math.PI*2;let y=this.aEndAngle-this.aStartAngle;const _=Math.abs(y)<Number.EPSILON;for(;y<0;)y+=d;for(;y>d;)y-=d;y<Number.EPSILON&&(_?y=0:y=d),this.aClockwise===!0&&!_&&(y===d?y=-d:y=y-d);const A=this.aStartAngle+n*y;let R=this.aX+this.xRadius*Math.cos(A),I=this.aY+this.yRadius*Math.sin(A);if(this.aRotation!==0){const G=Math.cos(this.aRotation),Y=Math.sin(this.aRotation),q=R-this.aX,K=I-this.aY;R=q*G-K*Y+this.aX,I=q*Y+K*G+this.aY}return f.set(R,I)}copy(n){return super.copy(n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this}toJSON(){const n=super.toJSON();return n.aX=this.aX,n.aY=this.aY,n.xRadius=this.xRadius,n.yRadius=this.yRadius,n.aStartAngle=this.aStartAngle,n.aEndAngle=this.aEndAngle,n.aClockwise=this.aClockwise,n.aRotation=this.aRotation,n}fromJSON(n){return super.fromJSON(n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(n,s,f,d,y,_){super(n,s,f,f,d,y,_),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let u=0,n=0,s=0,f=0;function d(y,_,A,R){u=y,n=A,s=-3*y+3*_-2*A-R,f=2*y-2*_+A+R}return{initCatmullRom:function(y,_,A,R,I){d(_,A,I*(A-y),I*(R-_))},initNonuniformCatmullRom:function(y,_,A,R,I,G,Y){let q=(_-y)/I-(A-y)/(I+G)+(A-_)/G,K=(A-_)/G-(R-_)/(G+Y)+(R-A)/Y;q*=G,K*=G,d(_,A,q,K)},calc:function(y){const _=y*y,A=_*y;return u+n*y+s*_+f*A}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(n=[],s=!1,f="centripetal",d=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=n,this.closed=s,this.curveType=f,this.tension=d}getPoint(n,s=new Vector3){const f=s,d=this.points,y=d.length,_=(y-(this.closed?0:1))*n;let A=Math.floor(_),R=_-A;this.closed?A+=A>0?0:(Math.floor(Math.abs(A)/y)+1)*y:R===0&&A===y-1&&(A=y-2,R=1);let I,G;this.closed||A>0?I=d[(A-1)%y]:(tmp.subVectors(d[0],d[1]).add(d[0]),I=tmp);const Y=d[A%y],q=d[(A+1)%y];if(this.closed||A+2<y?G=d[(A+2)%y]:(tmp.subVectors(d[y-1],d[y-2]).add(d[y-1]),G=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const K=this.curveType==="chordal"?.5:.25;let Q=Math.pow(I.distanceToSquared(Y),K),ne=Math.pow(Y.distanceToSquared(q),K),te=Math.pow(q.distanceToSquared(G),K);ne<1e-4&&(ne=1),Q<1e-4&&(Q=ne),te<1e-4&&(te=ne),px.initNonuniformCatmullRom(I.x,Y.x,q.x,G.x,Q,ne,te),py.initNonuniformCatmullRom(I.y,Y.y,q.y,G.y,Q,ne,te),pz.initNonuniformCatmullRom(I.z,Y.z,q.z,G.z,Q,ne,te)}else this.curveType==="catmullrom"&&(px.initCatmullRom(I.x,Y.x,q.x,G.x,this.tension),py.initCatmullRom(I.y,Y.y,q.y,G.y,this.tension),pz.initCatmullRom(I.z,Y.z,q.z,G.z,this.tension));return f.set(px.calc(R),py.calc(R),pz.calc(R)),f}copy(n){super.copy(n),this.points=[];for(let s=0,f=n.points.length;s<f;s++){const d=n.points[s];this.points.push(d.clone())}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this}toJSON(){const n=super.toJSON();n.points=[];for(let s=0,f=this.points.length;s<f;s++){const d=this.points[s];n.points.push(d.toArray())}return n.closed=this.closed,n.curveType=this.curveType,n.tension=this.tension,n}fromJSON(n){super.fromJSON(n),this.points=[];for(let s=0,f=n.points.length;s<f;s++){const d=n.points[s];this.points.push(new Vector3().fromArray(d))}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this}}function CatmullRom(u,n,s,f,d){const y=(f-n)*.5,_=(d-s)*.5,A=u*u,R=u*A;return(2*s-2*f+y+_)*R+(-3*s+3*f-2*y-_)*A+y*u+s}function QuadraticBezierP0(u,n){const s=1-u;return s*s*n}function QuadraticBezierP1(u,n){return 2*(1-u)*u*n}function QuadraticBezierP2(u,n){return u*u*n}function QuadraticBezier(u,n,s,f){return QuadraticBezierP0(u,n)+QuadraticBezierP1(u,s)+QuadraticBezierP2(u,f)}function CubicBezierP0(u,n){const s=1-u;return s*s*s*n}function CubicBezierP1(u,n){const s=1-u;return 3*s*s*u*n}function CubicBezierP2(u,n){return 3*(1-u)*u*u*n}function CubicBezierP3(u,n){return u*u*u*n}function CubicBezier(u,n,s,f,d){return CubicBezierP0(u,n)+CubicBezierP1(u,s)+CubicBezierP2(u,f)+CubicBezierP3(u,d)}class CubicBezierCurve extends Curve{constructor(n=new Vector2,s=new Vector2,f=new Vector2,d=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=n,this.v1=s,this.v2=f,this.v3=d}getPoint(n,s=new Vector2){const f=s,d=this.v0,y=this.v1,_=this.v2,A=this.v3;return f.set(CubicBezier(n,d.x,y.x,_.x,A.x),CubicBezier(n,d.y,y.y,_.y,A.y)),f}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this}}class CubicBezierCurve3 extends Curve{constructor(n=new Vector3,s=new Vector3,f=new Vector3,d=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=n,this.v1=s,this.v2=f,this.v3=d}getPoint(n,s=new Vector3){const f=s,d=this.v0,y=this.v1,_=this.v2,A=this.v3;return f.set(CubicBezier(n,d.x,y.x,_.x,A.x),CubicBezier(n,d.y,y.y,_.y,A.y),CubicBezier(n,d.z,y.z,_.z,A.z)),f}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this}}class LineCurve extends Curve{constructor(n=new Vector2,s=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=n,this.v2=s}getPoint(n,s=new Vector2){const f=s;return n===1?f.copy(this.v2):(f.copy(this.v2).sub(this.v1),f.multiplyScalar(n).add(this.v1)),f}getPointAt(n,s){return this.getPoint(n,s)}getTangent(n,s=new Vector2){return s.subVectors(this.v2,this.v1).normalize()}getTangentAt(n,s){return this.getTangent(n,s)}copy(n){return super.copy(n),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class LineCurve3 extends Curve{constructor(n=new Vector3,s=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=n,this.v2=s}getPoint(n,s=new Vector3){const f=s;return n===1?f.copy(this.v2):(f.copy(this.v2).sub(this.v1),f.multiplyScalar(n).add(this.v1)),f}getPointAt(n,s){return this.getPoint(n,s)}getTangent(n,s=new Vector3){return s.subVectors(this.v2,this.v1).normalize()}getTangentAt(n,s){return this.getTangent(n,s)}copy(n){return super.copy(n),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class QuadraticBezierCurve extends Curve{constructor(n=new Vector2,s=new Vector2,f=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=n,this.v1=s,this.v2=f}getPoint(n,s=new Vector2){const f=s,d=this.v0,y=this.v1,_=this.v2;return f.set(QuadraticBezier(n,d.x,y.x,_.x),QuadraticBezier(n,d.y,y.y,_.y)),f}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(n=new Vector3,s=new Vector3,f=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=n,this.v1=s,this.v2=f}getPoint(n,s=new Vector3){const f=s,d=this.v0,y=this.v1,_=this.v2;return f.set(QuadraticBezier(n,d.x,y.x,_.x),QuadraticBezier(n,d.y,y.y,_.y),QuadraticBezier(n,d.z,y.z,_.z)),f}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class SplineCurve extends Curve{constructor(n=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=n}getPoint(n,s=new Vector2){const f=s,d=this.points,y=(d.length-1)*n,_=Math.floor(y),A=y-_,R=d[_===0?_:_-1],I=d[_],G=d[_>d.length-2?d.length-1:_+1],Y=d[_>d.length-3?d.length-1:_+2];return f.set(CatmullRom(A,R.x,I.x,G.x,Y.x),CatmullRom(A,R.y,I.y,G.y,Y.y)),f}copy(n){super.copy(n),this.points=[];for(let s=0,f=n.points.length;s<f;s++){const d=n.points[s];this.points.push(d.clone())}return this}toJSON(){const n=super.toJSON();n.points=[];for(let s=0,f=this.points.length;s<f;s++){const d=this.points[s];n.points.push(d.toArray())}return n}fromJSON(n){super.fromJSON(n),this.points=[];for(let s=0,f=n.points.length;s<f;s++){const d=n.points[s];this.points.push(new Vector2().fromArray(d))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(n){this.curves.push(n)}closePath(){const n=this.curves[0].getPoint(0),s=this.curves[this.curves.length-1].getPoint(1);if(!n.equals(s)){const f=n.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Curves[f](s,n))}return this}getPoint(n,s){const f=n*this.getLength(),d=this.getCurveLengths();let y=0;for(;y<d.length;){if(d[y]>=f){const _=d[y]-f,A=this.curves[y],R=A.getLength(),I=R===0?0:1-_/R;return A.getPointAt(I,s)}y++}return null}getLength(){const n=this.getCurveLengths();return n[n.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const n=[];let s=0;for(let f=0,d=this.curves.length;f<d;f++)s+=this.curves[f].getLength(),n.push(s);return this.cacheLengths=n,n}getSpacedPoints(n=40){const s=[];for(let f=0;f<=n;f++)s.push(this.getPoint(f/n));return this.autoClose&&s.push(s[0]),s}getPoints(n=12){const s=[];let f;for(let d=0,y=this.curves;d<y.length;d++){const _=y[d],A=_.isEllipseCurve?n*2:_.isLineCurve||_.isLineCurve3?1:_.isSplineCurve?n*_.points.length:n,R=_.getPoints(A);for(let I=0;I<R.length;I++){const G=R[I];f&&f.equals(G)||(s.push(G),f=G)}}return this.autoClose&&s.length>1&&!s[s.length-1].equals(s[0])&&s.push(s[0]),s}copy(n){super.copy(n),this.curves=[];for(let s=0,f=n.curves.length;s<f;s++){const d=n.curves[s];this.curves.push(d.clone())}return this.autoClose=n.autoClose,this}toJSON(){const n=super.toJSON();n.autoClose=this.autoClose,n.curves=[];for(let s=0,f=this.curves.length;s<f;s++){const d=this.curves[s];n.curves.push(d.toJSON())}return n}fromJSON(n){super.fromJSON(n),this.autoClose=n.autoClose,this.curves=[];for(let s=0,f=n.curves.length;s<f;s++){const d=n.curves[s];this.curves.push(new Curves[d.type]().fromJSON(d))}return this}}class Path extends CurvePath{constructor(n){super(),this.type="Path",this.currentPoint=new Vector2,n&&this.setFromPoints(n)}setFromPoints(n){this.moveTo(n[0].x,n[0].y);for(let s=1,f=n.length;s<f;s++)this.lineTo(n[s].x,n[s].y);return this}moveTo(n,s){return this.currentPoint.set(n,s),this}lineTo(n,s){const f=new LineCurve(this.currentPoint.clone(),new Vector2(n,s));return this.curves.push(f),this.currentPoint.set(n,s),this}quadraticCurveTo(n,s,f,d){const y=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(n,s),new Vector2(f,d));return this.curves.push(y),this.currentPoint.set(f,d),this}bezierCurveTo(n,s,f,d,y,_){const A=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(n,s),new Vector2(f,d),new Vector2(y,_));return this.curves.push(A),this.currentPoint.set(y,_),this}splineThru(n){const s=[this.currentPoint.clone()].concat(n),f=new SplineCurve(s);return this.curves.push(f),this.currentPoint.copy(n[n.length-1]),this}arc(n,s,f,d,y,_){const A=this.currentPoint.x,R=this.currentPoint.y;return this.absarc(n+A,s+R,f,d,y,_),this}absarc(n,s,f,d,y,_){return this.absellipse(n,s,f,f,d,y,_),this}ellipse(n,s,f,d,y,_,A,R){const I=this.currentPoint.x,G=this.currentPoint.y;return this.absellipse(n+I,s+G,f,d,y,_,A,R),this}absellipse(n,s,f,d,y,_,A,R){const I=new EllipseCurve(n,s,f,d,y,_,A,R);if(this.curves.length>0){const Y=I.getPoint(0);Y.equals(this.currentPoint)||this.lineTo(Y.x,Y.y)}this.curves.push(I);const G=I.getPoint(1);return this.currentPoint.copy(G),this}copy(n){return super.copy(n),this.currentPoint.copy(n.currentPoint),this}toJSON(){const n=super.toJSON();return n.currentPoint=this.currentPoint.toArray(),n}fromJSON(n){return super.fromJSON(n),this.currentPoint.fromArray(n.currentPoint),this}}class Shape extends Path{constructor(n){super(n),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(n){const s=[];for(let f=0,d=this.holes.length;f<d;f++)s[f]=this.holes[f].getPoints(n);return s}extractPoints(n){return{shape:this.getPoints(n),holes:this.getPointsHoles(n)}}copy(n){super.copy(n),this.holes=[];for(let s=0,f=n.holes.length;s<f;s++){const d=n.holes[s];this.holes.push(d.clone())}return this}toJSON(){const n=super.toJSON();n.uuid=this.uuid,n.holes=[];for(let s=0,f=this.holes.length;s<f;s++){const d=this.holes[s];n.holes.push(d.toJSON())}return n}fromJSON(n){super.fromJSON(n),this.uuid=n.uuid,this.holes=[];for(let s=0,f=n.holes.length;s<f;s++){const d=n.holes[s];this.holes.push(new Path().fromJSON(d))}return this}}function earcut(u,n,s=2){const f=n&&n.length,d=f?n[0]*s:u.length;let y=linkedList(u,0,d,s,!0);const _=[];if(!y||y.next===y.prev)return _;let A,R,I;if(f&&(y=eliminateHoles(u,n,y,s)),u.length>80*s){A=u[0],R=u[1];let G=A,Y=R;for(let q=s;q<d;q+=s){const K=u[q],Q=u[q+1];K<A&&(A=K),Q<R&&(R=Q),K>G&&(G=K),Q>Y&&(Y=Q)}I=Math.max(G-A,Y-R),I=I!==0?32767/I:0}return earcutLinked(y,_,s,A,R,I,0),_}function linkedList(u,n,s,f,d){let y;if(d===signedArea(u,n,s,f)>0)for(let _=n;_<s;_+=f)y=insertNode(_/f|0,u[_],u[_+1],y);else for(let _=s-f;_>=n;_-=f)y=insertNode(_/f|0,u[_],u[_+1],y);return y&&equals(y,y.next)&&(removeNode(y),y=y.next),y}function filterPoints(u,n){if(!u)return u;n||(n=u);let s=u,f;do if(f=!1,!s.steiner&&(equals(s,s.next)||area(s.prev,s,s.next)===0)){if(removeNode(s),s=n=s.prev,s===s.next)break;f=!0}else s=s.next;while(f||s!==n);return n}function earcutLinked(u,n,s,f,d,y,_){if(!u)return;!_&&y&&indexCurve(u,f,d,y);let A=u;for(;u.prev!==u.next;){const R=u.prev,I=u.next;if(y?isEarHashed(u,f,d,y):isEar(u)){n.push(R.i,u.i,I.i),removeNode(u),u=I.next,A=I.next;continue}if(u=I,u===A){_?_===1?(u=cureLocalIntersections(filterPoints(u),n),earcutLinked(u,n,s,f,d,y,2)):_===2&&splitEarcut(u,n,s,f,d,y):earcutLinked(filterPoints(u),n,s,f,d,y,1);break}}}function isEar(u){const n=u.prev,s=u,f=u.next;if(area(n,s,f)>=0)return!1;const d=n.x,y=s.x,_=f.x,A=n.y,R=s.y,I=f.y,G=Math.min(d,y,_),Y=Math.min(A,R,I),q=Math.max(d,y,_),K=Math.max(A,R,I);let Q=f.next;for(;Q!==n;){if(Q.x>=G&&Q.x<=q&&Q.y>=Y&&Q.y<=K&&pointInTriangleExceptFirst(d,A,y,R,_,I,Q.x,Q.y)&&area(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function isEarHashed(u,n,s,f){const d=u.prev,y=u,_=u.next;if(area(d,y,_)>=0)return!1;const A=d.x,R=y.x,I=_.x,G=d.y,Y=y.y,q=_.y,K=Math.min(A,R,I),Q=Math.min(G,Y,q),ne=Math.max(A,R,I),te=Math.max(G,Y,q),J=zOrder(K,Q,n,s,f),ie=zOrder(ne,te,n,s,f);let re=u.prevZ,le=u.nextZ;for(;re&&re.z>=J&&le&&le.z<=ie;){if(re.x>=K&&re.x<=ne&&re.y>=Q&&re.y<=te&&re!==d&&re!==_&&pointInTriangleExceptFirst(A,G,R,Y,I,q,re.x,re.y)&&area(re.prev,re,re.next)>=0||(re=re.prevZ,le.x>=K&&le.x<=ne&&le.y>=Q&&le.y<=te&&le!==d&&le!==_&&pointInTriangleExceptFirst(A,G,R,Y,I,q,le.x,le.y)&&area(le.prev,le,le.next)>=0))return!1;le=le.nextZ}for(;re&&re.z>=J;){if(re.x>=K&&re.x<=ne&&re.y>=Q&&re.y<=te&&re!==d&&re!==_&&pointInTriangleExceptFirst(A,G,R,Y,I,q,re.x,re.y)&&area(re.prev,re,re.next)>=0)return!1;re=re.prevZ}for(;le&&le.z<=ie;){if(le.x>=K&&le.x<=ne&&le.y>=Q&&le.y<=te&&le!==d&&le!==_&&pointInTriangleExceptFirst(A,G,R,Y,I,q,le.x,le.y)&&area(le.prev,le,le.next)>=0)return!1;le=le.nextZ}return!0}function cureLocalIntersections(u,n){let s=u;do{const f=s.prev,d=s.next.next;!equals(f,d)&&intersects(f,s,s.next,d)&&locallyInside(f,d)&&locallyInside(d,f)&&(n.push(f.i,s.i,d.i),removeNode(s),removeNode(s.next),s=u=d),s=s.next}while(s!==u);return filterPoints(s)}function splitEarcut(u,n,s,f,d,y){let _=u;do{let A=_.next.next;for(;A!==_.prev;){if(_.i!==A.i&&isValidDiagonal(_,A)){let R=splitPolygon(_,A);_=filterPoints(_,_.next),R=filterPoints(R,R.next),earcutLinked(_,n,s,f,d,y,0),earcutLinked(R,n,s,f,d,y,0);return}A=A.next}_=_.next}while(_!==u)}function eliminateHoles(u,n,s,f){const d=[];for(let y=0,_=n.length;y<_;y++){const A=n[y]*f,R=y<_-1?n[y+1]*f:u.length,I=linkedList(u,A,R,f,!1);I===I.next&&(I.steiner=!0),d.push(getLeftmost(I))}d.sort(compareXYSlope);for(let y=0;y<d.length;y++)s=eliminateHole(d[y],s);return s}function compareXYSlope(u,n){let s=u.x-n.x;if(s===0&&(s=u.y-n.y,s===0)){const f=(u.next.y-u.y)/(u.next.x-u.x),d=(n.next.y-n.y)/(n.next.x-n.x);s=f-d}return s}function eliminateHole(u,n){const s=findHoleBridge(u,n);if(!s)return n;const f=splitPolygon(s,u);return filterPoints(f,f.next),filterPoints(s,s.next)}function findHoleBridge(u,n){let s=n;const f=u.x,d=u.y;let y=-1/0,_;if(equals(u,s))return s;do{if(equals(u,s.next))return s.next;if(d<=s.y&&d>=s.next.y&&s.next.y!==s.y){const Y=s.x+(d-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(Y<=f&&Y>y&&(y=Y,_=s.x<s.next.x?s:s.next,Y===f))return _}s=s.next}while(s!==n);if(!_)return null;const A=_,R=_.x,I=_.y;let G=1/0;s=_;do{if(f>=s.x&&s.x>=R&&f!==s.x&&pointInTriangle(d<I?f:y,d,R,I,d<I?y:f,d,s.x,s.y)){const Y=Math.abs(d-s.y)/(f-s.x);locallyInside(s,u)&&(Y<G||Y===G&&(s.x>_.x||s.x===_.x&&sectorContainsSector(_,s)))&&(_=s,G=Y)}s=s.next}while(s!==A);return _}function sectorContainsSector(u,n){return area(u.prev,u,n.prev)<0&&area(n.next,u,u.next)<0}function indexCurve(u,n,s,f){let d=u;do d.z===0&&(d.z=zOrder(d.x,d.y,n,s,f)),d.prevZ=d.prev,d.nextZ=d.next,d=d.next;while(d!==u);d.prevZ.nextZ=null,d.prevZ=null,sortLinked(d)}function sortLinked(u){let n,s=1;do{let f=u,d;u=null;let y=null;for(n=0;f;){n++;let _=f,A=0;for(let I=0;I<s&&(A++,_=_.nextZ,!!_);I++);let R=s;for(;A>0||R>0&&_;)A!==0&&(R===0||!_||f.z<=_.z)?(d=f,f=f.nextZ,A--):(d=_,_=_.nextZ,R--),y?y.nextZ=d:u=d,d.prevZ=y,y=d;f=_}y.nextZ=null,s*=2}while(n>1);return u}function zOrder(u,n,s,f,d){return u=(u-s)*d|0,n=(n-f)*d|0,u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,u|n<<1}function getLeftmost(u){let n=u,s=u;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==u);return s}function pointInTriangle(u,n,s,f,d,y,_,A){return(d-_)*(n-A)>=(u-_)*(y-A)&&(u-_)*(f-A)>=(s-_)*(n-A)&&(s-_)*(y-A)>=(d-_)*(f-A)}function pointInTriangleExceptFirst(u,n,s,f,d,y,_,A){return!(u===_&&n===A)&&pointInTriangle(u,n,s,f,d,y,_,A)}function isValidDiagonal(u,n){return u.next.i!==n.i&&u.prev.i!==n.i&&!intersectsPolygon(u,n)&&(locallyInside(u,n)&&locallyInside(n,u)&&middleInside(u,n)&&(area(u.prev,u,n.prev)||area(u,n.prev,n))||equals(u,n)&&area(u.prev,u,u.next)>0&&area(n.prev,n,n.next)>0)}function area(u,n,s){return(n.y-u.y)*(s.x-n.x)-(n.x-u.x)*(s.y-n.y)}function equals(u,n){return u.x===n.x&&u.y===n.y}function intersects(u,n,s,f){const d=sign(area(u,n,s)),y=sign(area(u,n,f)),_=sign(area(s,f,u)),A=sign(area(s,f,n));return!!(d!==y&&_!==A||d===0&&onSegment(u,s,n)||y===0&&onSegment(u,f,n)||_===0&&onSegment(s,u,f)||A===0&&onSegment(s,n,f))}function onSegment(u,n,s){return n.x<=Math.max(u.x,s.x)&&n.x>=Math.min(u.x,s.x)&&n.y<=Math.max(u.y,s.y)&&n.y>=Math.min(u.y,s.y)}function sign(u){return u>0?1:u<0?-1:0}function intersectsPolygon(u,n){let s=u;do{if(s.i!==u.i&&s.next.i!==u.i&&s.i!==n.i&&s.next.i!==n.i&&intersects(s,s.next,u,n))return!0;s=s.next}while(s!==u);return!1}function locallyInside(u,n){return area(u.prev,u,u.next)<0?area(u,n,u.next)>=0&&area(u,u.prev,n)>=0:area(u,n,u.prev)<0||area(u,u.next,n)<0}function middleInside(u,n){let s=u,f=!1;const d=(u.x+n.x)/2,y=(u.y+n.y)/2;do s.y>y!=s.next.y>y&&s.next.y!==s.y&&d<(s.next.x-s.x)*(y-s.y)/(s.next.y-s.y)+s.x&&(f=!f),s=s.next;while(s!==u);return f}function splitPolygon(u,n){const s=createNode(u.i,u.x,u.y),f=createNode(n.i,n.x,n.y),d=u.next,y=n.prev;return u.next=n,n.prev=u,s.next=d,d.prev=s,f.next=s,s.prev=f,y.next=f,f.prev=y,f}function insertNode(u,n,s,f){const d=createNode(u,n,s);return f?(d.next=f.next,d.prev=f,f.next.prev=d,f.next=d):(d.prev=d,d.next=d),d}function removeNode(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function createNode(u,n,s){return{i:u,x:n,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function signedArea(u,n,s,f){let d=0;for(let y=n,_=s-f;y<s;y+=f)d+=(u[_]-u[y])*(u[y+1]+u[_+1]),_=y;return d}class Earcut{static triangulate(n,s,f=2){return earcut(n,s,f)}}class ShapeUtils{static area(n){const s=n.length;let f=0;for(let d=s-1,y=0;y<s;d=y++)f+=n[d].x*n[y].y-n[y].x*n[d].y;return f*.5}static isClockWise(n){return ShapeUtils.area(n)<0}static triangulateShape(n,s){const f=[],d=[],y=[];removeDupEndPts(n),addContour(f,n);let _=n.length;s.forEach(removeDupEndPts);for(let R=0;R<s.length;R++)d.push(_),_+=s[R].length,addContour(f,s[R]);const A=Earcut.triangulate(f,d);for(let R=0;R<A.length;R+=3)y.push(A.slice(R,R+3));return y}}function removeDupEndPts(u){const n=u.length;n>2&&u[n-1].equals(u[0])&&u.pop()}function addContour(u,n){for(let s=0;s<n.length;s++)u.push(n[s].x),u.push(n[s].y)}class ExtrudeGeometry extends BufferGeometry{constructor(n=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),s={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:n,options:s},n=Array.isArray(n)?n:[n];const f=this,d=[],y=[];for(let A=0,R=n.length;A<R;A++){const I=n[A];_(I)}this.setAttribute("position",new Float32BufferAttribute(d,3)),this.setAttribute("uv",new Float32BufferAttribute(y,2)),this.computeVertexNormals();function _(A){const R=[],I=s.curveSegments!==void 0?s.curveSegments:12,G=s.steps!==void 0?s.steps:1,Y=s.depth!==void 0?s.depth:1;let q=s.bevelEnabled!==void 0?s.bevelEnabled:!0,K=s.bevelThickness!==void 0?s.bevelThickness:.2,Q=s.bevelSize!==void 0?s.bevelSize:K-.1,ne=s.bevelOffset!==void 0?s.bevelOffset:0,te=s.bevelSegments!==void 0?s.bevelSegments:3;const J=s.extrudePath,ie=s.UVGenerator!==void 0?s.UVGenerator:WorldUVGenerator;let re,le=!1,fe,pe,de,se;if(J){re=J.getSpacedPoints(G),le=!0,q=!1;const qe=J.isCatmullRomCurve3?J.closed:!1;fe=J.computeFrenetFrames(G,qe),pe=new Vector3,de=new Vector3,se=new Vector3}q||(te=0,K=0,Q=0,ne=0);const he=A.extractPoints(I);let Se=he.shape;const ve=he.holes;if(!ShapeUtils.isClockWise(Se)){Se=Se.reverse();for(let qe=0,vn=ve.length;qe<vn;qe++){const dn=ve[qe];ShapeUtils.isClockWise(dn)&&(ve[qe]=dn.reverse())}}function Ee(qe){const dn=10000000000000001e-36;let Mn=qe[0];for(let je=1;je<=qe.length;je++){const qn=je%qe.length,An=qe[qn],ri=An.x-Mn.x,On=An.y-Mn.y,Be=ri*ri+On*On,Pe=Math.max(Math.abs(An.x),Math.abs(An.y),Math.abs(Mn.x),Math.abs(Mn.y)),Ke=dn*Pe*Pe;if(Be<=Ke){qe.splice(qn,1),je--;continue}Mn=An}}Ee(Se),ve.forEach(Ee);const Oe=ve.length,Ne=Se;for(let qe=0;qe<Oe;qe++){const vn=ve[qe];Se=Se.concat(vn)}function ye(qe,vn,dn){return vn||error("ExtrudeGeometry: vec does not exist"),qe.clone().addScaledVector(vn,dn)}const Ae=Se.length;function _e(qe,vn,dn){let Mn,je,qn;const An=qe.x-vn.x,ri=qe.y-vn.y,On=dn.x-qe.x,Be=dn.y-qe.y,Pe=An*An+ri*ri,Ke=An*Be-ri*On;if(Math.abs(Ke)>Number.EPSILON){const Ft=Math.sqrt(Pe),bn=Math.sqrt(On*On+Be*Be),ln=vn.x-ri/Ft,Zn=vn.y+An/Ft,Gn=dn.x-Be/bn,fi=dn.y+On/bn,xi=((Gn-ln)*Be-(fi-Zn)*On)/(An*Be-ri*On);Mn=ln+An*xi-qe.x,je=Zn+ri*xi-qe.y;const wn=Mn*Mn+je*je;if(wn<=2)return new Vector2(Mn,je);qn=Math.sqrt(wn/2)}else{let Ft=!1;An>Number.EPSILON?On>Number.EPSILON&&(Ft=!0):An<-Number.EPSILON?On<-Number.EPSILON&&(Ft=!0):Math.sign(ri)===Math.sign(Be)&&(Ft=!0),Ft?(Mn=-ri,je=An,qn=Math.sqrt(Pe)):(Mn=An,je=ri,qn=Math.sqrt(Pe/2))}return new Vector2(Mn/qn,je/qn)}const Te=[];for(let qe=0,vn=Ne.length,dn=vn-1,Mn=qe+1;qe<vn;qe++,dn++,Mn++)dn===vn&&(dn=0),Mn===vn&&(Mn=0),Te[qe]=_e(Ne[qe],Ne[dn],Ne[Mn]);const we=[];let ge,De=Te.concat();for(let qe=0,vn=Oe;qe<vn;qe++){const dn=ve[qe];ge=[];for(let Mn=0,je=dn.length,qn=je-1,An=Mn+1;Mn<je;Mn++,qn++,An++)qn===je&&(qn=0),An===je&&(An=0),ge[Mn]=_e(dn[Mn],dn[qn],dn[An]);we.push(ge),De=De.concat(ge)}let ze;if(te===0)ze=ShapeUtils.triangulateShape(Ne,ve);else{const qe=[],vn=[];for(let dn=0;dn<te;dn++){const Mn=dn/te,je=K*Math.cos(Mn*Math.PI/2),qn=Q*Math.sin(Mn*Math.PI/2)+ne;for(let An=0,ri=Ne.length;An<ri;An++){const On=ye(Ne[An],Te[An],qn);hn(On.x,On.y,-je),Mn===0&&qe.push(On)}for(let An=0,ri=Oe;An<ri;An++){const On=ve[An];ge=we[An];const Be=[];for(let Pe=0,Ke=On.length;Pe<Ke;Pe++){const Ft=ye(On[Pe],ge[Pe],qn);hn(Ft.x,Ft.y,-je),Mn===0&&Be.push(Ft)}Mn===0&&vn.push(Be)}}ze=ShapeUtils.triangulateShape(qe,vn)}const He=ze.length,yt=Q+ne;for(let qe=0;qe<Ae;qe++){const vn=q?ye(Se[qe],De[qe],yt):Se[qe];le?(de.copy(fe.normals[0]).multiplyScalar(vn.x),pe.copy(fe.binormals[0]).multiplyScalar(vn.y),se.copy(re[0]).add(de).add(pe),hn(se.x,se.y,se.z)):hn(vn.x,vn.y,0)}for(let qe=1;qe<=G;qe++)for(let vn=0;vn<Ae;vn++){const dn=q?ye(Se[vn],De[vn],yt):Se[vn];le?(de.copy(fe.normals[qe]).multiplyScalar(dn.x),pe.copy(fe.binormals[qe]).multiplyScalar(dn.y),se.copy(re[qe]).add(de).add(pe),hn(se.x,se.y,se.z)):hn(dn.x,dn.y,Y/G*qe)}for(let qe=te-1;qe>=0;qe--){const vn=qe/te,dn=K*Math.cos(vn*Math.PI/2),Mn=Q*Math.sin(vn*Math.PI/2)+ne;for(let je=0,qn=Ne.length;je<qn;je++){const An=ye(Ne[je],Te[je],Mn);hn(An.x,An.y,Y+dn)}for(let je=0,qn=ve.length;je<qn;je++){const An=ve[je];ge=we[je];for(let ri=0,On=An.length;ri<On;ri++){const Be=ye(An[ri],ge[ri],Mn);le?hn(Be.x,Be.y+re[G-1].y,re[G-1].x+dn):hn(Be.x,Be.y,Y+dn)}}}Ge(),lt();function Ge(){const qe=d.length/3;if(q){let vn=0,dn=Ae*vn;for(let Mn=0;Mn<He;Mn++){const je=ze[Mn];Fn(je[2]+dn,je[1]+dn,je[0]+dn)}vn=G+te*2,dn=Ae*vn;for(let Mn=0;Mn<He;Mn++){const je=ze[Mn];Fn(je[0]+dn,je[1]+dn,je[2]+dn)}}else{for(let vn=0;vn<He;vn++){const dn=ze[vn];Fn(dn[2],dn[1],dn[0])}for(let vn=0;vn<He;vn++){const dn=ze[vn];Fn(dn[0]+Ae*G,dn[1]+Ae*G,dn[2]+Ae*G)}}f.addGroup(qe,d.length/3-qe,0)}function lt(){const qe=d.length/3;let vn=0;Mt(Ne,vn),vn+=Ne.length;for(let dn=0,Mn=ve.length;dn<Mn;dn++){const je=ve[dn];Mt(je,vn),vn+=je.length}f.addGroup(qe,d.length/3-qe,1)}function Mt(qe,vn){let dn=qe.length;for(;--dn>=0;){const Mn=dn;let je=dn-1;je<0&&(je=qe.length-1);for(let qn=0,An=G+te*2;qn<An;qn++){const ri=Ae*qn,On=Ae*(qn+1),Be=vn+Mn+ri,Pe=vn+je+ri,Ke=vn+je+On,Ft=vn+Mn+On;Vn(Be,Pe,Ke,Ft)}}}function hn(qe,vn,dn){R.push(qe),R.push(vn),R.push(dn)}function Fn(qe,vn,dn){ni(qe),ni(vn),ni(dn);const Mn=d.length/3,je=ie.generateTopUV(f,d,Mn-3,Mn-2,Mn-1);In(je[0]),In(je[1]),In(je[2])}function Vn(qe,vn,dn,Mn){ni(qe),ni(vn),ni(Mn),ni(vn),ni(dn),ni(Mn);const je=d.length/3,qn=ie.generateSideWallUV(f,d,je-6,je-3,je-2,je-1);In(qn[0]),In(qn[1]),In(qn[3]),In(qn[1]),In(qn[2]),In(qn[3])}function ni(qe){d.push(R[qe*3+0]),d.push(R[qe*3+1]),d.push(R[qe*3+2])}function In(qe){y.push(qe.x),y.push(qe.y)}}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}toJSON(){const n=super.toJSON(),s=this.parameters.shapes,f=this.parameters.options;return toJSON$1(s,f,n)}static fromJSON(n,s){const f=[];for(let y=0,_=n.shapes.length;y<_;y++){const A=s[n.shapes[y]];f.push(A)}const d=n.options.extrudePath;return d!==void 0&&(n.options.extrudePath=new Curves[d.type]().fromJSON(d)),new ExtrudeGeometry(f,n.options)}}const WorldUVGenerator={generateTopUV:function(u,n,s,f,d){const y=n[s*3],_=n[s*3+1],A=n[f*3],R=n[f*3+1],I=n[d*3],G=n[d*3+1];return[new Vector2(y,_),new Vector2(A,R),new Vector2(I,G)]},generateSideWallUV:function(u,n,s,f,d,y){const _=n[s*3],A=n[s*3+1],R=n[s*3+2],I=n[f*3],G=n[f*3+1],Y=n[f*3+2],q=n[d*3],K=n[d*3+1],Q=n[d*3+2],ne=n[y*3],te=n[y*3+1],J=n[y*3+2];return Math.abs(A-G)<Math.abs(_-I)?[new Vector2(_,1-R),new Vector2(I,1-Y),new Vector2(q,1-Q),new Vector2(ne,1-J)]:[new Vector2(A,1-R),new Vector2(G,1-Y),new Vector2(K,1-Q),new Vector2(te,1-J)]}};function toJSON$1(u,n,s){if(s.shapes=[],Array.isArray(u))for(let f=0,d=u.length;f<d;f++){const y=u[f];s.shapes.push(y.uuid)}else s.shapes.push(u.uuid);return s.options=Object.assign({},n),n.extrudePath!==void 0&&(s.options.extrudePath=n.extrudePath.toJSON()),s}class IcosahedronGeometry extends PolyhedronGeometry{constructor(n=1,s=0){const f=(1+Math.sqrt(5))/2,d=[-1,f,0,1,f,0,-1,-f,0,1,-f,0,0,-1,f,0,1,f,0,-1,-f,0,1,-f,f,0,-1,f,0,1,-f,0,-1,-f,0,1],y=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(d,y,n,s),this.type="IcosahedronGeometry",this.parameters={radius:n,detail:s}}static fromJSON(n){return new IcosahedronGeometry(n.radius,n.detail)}}class LatheGeometry extends BufferGeometry{constructor(n=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],s=12,f=0,d=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:n,segments:s,phiStart:f,phiLength:d},s=Math.floor(s),d=clamp(d,0,Math.PI*2);const y=[],_=[],A=[],R=[],I=[],G=1/s,Y=new Vector3,q=new Vector2,K=new Vector3,Q=new Vector3,ne=new Vector3;let te=0,J=0;for(let ie=0;ie<=n.length-1;ie++)switch(ie){case 0:te=n[ie+1].x-n[ie].x,J=n[ie+1].y-n[ie].y,K.x=J*1,K.y=-te,K.z=J*0,ne.copy(K),K.normalize(),R.push(K.x,K.y,K.z);break;case n.length-1:R.push(ne.x,ne.y,ne.z);break;default:te=n[ie+1].x-n[ie].x,J=n[ie+1].y-n[ie].y,K.x=J*1,K.y=-te,K.z=J*0,Q.copy(K),K.x+=ne.x,K.y+=ne.y,K.z+=ne.z,K.normalize(),R.push(K.x,K.y,K.z),ne.copy(Q)}for(let ie=0;ie<=s;ie++){const re=f+ie*G*d,le=Math.sin(re),fe=Math.cos(re);for(let pe=0;pe<=n.length-1;pe++){Y.x=n[pe].x*le,Y.y=n[pe].y,Y.z=n[pe].x*fe,_.push(Y.x,Y.y,Y.z),q.x=ie/s,q.y=pe/(n.length-1),A.push(q.x,q.y);const de=R[3*pe+0]*le,se=R[3*pe+1],he=R[3*pe+0]*fe;I.push(de,se,he)}}for(let ie=0;ie<s;ie++)for(let re=0;re<n.length-1;re++){const le=re+ie*n.length,fe=le,pe=le+n.length,de=le+n.length+1,se=le+1;y.push(fe,pe,se),y.push(de,se,pe)}this.setIndex(y),this.setAttribute("position",new Float32BufferAttribute(_,3)),this.setAttribute("uv",new Float32BufferAttribute(A,2)),this.setAttribute("normal",new Float32BufferAttribute(I,3))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new LatheGeometry(n.points,n.segments,n.phiStart,n.phiLength)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(n=1,s=0){const f=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],d=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(f,d,n,s),this.type="OctahedronGeometry",this.parameters={radius:n,detail:s}}static fromJSON(n){return new OctahedronGeometry(n.radius,n.detail)}}class PlaneGeometry extends BufferGeometry{constructor(n=1,s=1,f=1,d=1){super(),this.type="PlaneGeometry",this.parameters={width:n,height:s,widthSegments:f,heightSegments:d};const y=n/2,_=s/2,A=Math.floor(f),R=Math.floor(d),I=A+1,G=R+1,Y=n/A,q=s/R,K=[],Q=[],ne=[],te=[];for(let J=0;J<G;J++){const ie=J*q-_;for(let re=0;re<I;re++){const le=re*Y-y;Q.push(le,-ie,0),ne.push(0,0,1),te.push(re/A),te.push(1-J/R)}}for(let J=0;J<R;J++)for(let ie=0;ie<A;ie++){const re=ie+I*J,le=ie+I*(J+1),fe=ie+1+I*(J+1),pe=ie+1+I*J;K.push(re,le,pe),K.push(le,fe,pe)}this.setIndex(K),this.setAttribute("position",new Float32BufferAttribute(Q,3)),this.setAttribute("normal",new Float32BufferAttribute(ne,3)),this.setAttribute("uv",new Float32BufferAttribute(te,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new PlaneGeometry(n.width,n.height,n.widthSegments,n.heightSegments)}}class RingGeometry extends BufferGeometry{constructor(n=.5,s=1,f=32,d=1,y=0,_=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:n,outerRadius:s,thetaSegments:f,phiSegments:d,thetaStart:y,thetaLength:_},f=Math.max(3,f),d=Math.max(1,d);const A=[],R=[],I=[],G=[];let Y=n;const q=(s-n)/d,K=new Vector3,Q=new Vector2;for(let ne=0;ne<=d;ne++){for(let te=0;te<=f;te++){const J=y+te/f*_;K.x=Y*Math.cos(J),K.y=Y*Math.sin(J),R.push(K.x,K.y,K.z),I.push(0,0,1),Q.x=(K.x/s+1)/2,Q.y=(K.y/s+1)/2,G.push(Q.x,Q.y)}Y+=q}for(let ne=0;ne<d;ne++){const te=ne*(f+1);for(let J=0;J<f;J++){const ie=J+te,re=ie,le=ie+f+1,fe=ie+f+2,pe=ie+1;A.push(re,le,pe),A.push(le,fe,pe)}}this.setIndex(A),this.setAttribute("position",new Float32BufferAttribute(R,3)),this.setAttribute("normal",new Float32BufferAttribute(I,3)),this.setAttribute("uv",new Float32BufferAttribute(G,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new RingGeometry(n.innerRadius,n.outerRadius,n.thetaSegments,n.phiSegments,n.thetaStart,n.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(n=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),s=12){super(),this.type="ShapeGeometry",this.parameters={shapes:n,curveSegments:s};const f=[],d=[],y=[],_=[];let A=0,R=0;if(Array.isArray(n)===!1)I(n);else for(let G=0;G<n.length;G++)I(n[G]),this.addGroup(A,R,G),A+=R,R=0;this.setIndex(f),this.setAttribute("position",new Float32BufferAttribute(d,3)),this.setAttribute("normal",new Float32BufferAttribute(y,3)),this.setAttribute("uv",new Float32BufferAttribute(_,2));function I(G){const Y=d.length/3,q=G.extractPoints(s);let K=q.shape;const Q=q.holes;ShapeUtils.isClockWise(K)===!1&&(K=K.reverse());for(let te=0,J=Q.length;te<J;te++){const ie=Q[te];ShapeUtils.isClockWise(ie)===!0&&(Q[te]=ie.reverse())}const ne=ShapeUtils.triangulateShape(K,Q);for(let te=0,J=Q.length;te<J;te++){const ie=Q[te];K=K.concat(ie)}for(let te=0,J=K.length;te<J;te++){const ie=K[te];d.push(ie.x,ie.y,0),y.push(0,0,1),_.push(ie.x,ie.y)}for(let te=0,J=ne.length;te<J;te++){const ie=ne[te],re=ie[0]+Y,le=ie[1]+Y,fe=ie[2]+Y;f.push(re,le,fe),R+=3}}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}toJSON(){const n=super.toJSON(),s=this.parameters.shapes;return toJSON(s,n)}static fromJSON(n,s){const f=[];for(let d=0,y=n.shapes.length;d<y;d++){const _=s[n.shapes[d]];f.push(_)}return new ShapeGeometry(f,n.curveSegments)}}function toJSON(u,n){if(n.shapes=[],Array.isArray(u))for(let s=0,f=u.length;s<f;s++){const d=u[s];n.shapes.push(d.uuid)}else n.shapes.push(u.uuid);return n}class SphereGeometry extends BufferGeometry{constructor(n=1,s=32,f=16,d=0,y=Math.PI*2,_=0,A=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:n,widthSegments:s,heightSegments:f,phiStart:d,phiLength:y,thetaStart:_,thetaLength:A},s=Math.max(3,Math.floor(s)),f=Math.max(2,Math.floor(f));const R=Math.min(_+A,Math.PI);let I=0;const G=[],Y=new Vector3,q=new Vector3,K=[],Q=[],ne=[],te=[];for(let J=0;J<=f;J++){const ie=[],re=J/f;let le=0;J===0&&_===0?le=.5/s:J===f&&R===Math.PI&&(le=-.5/s);for(let fe=0;fe<=s;fe++){const pe=fe/s;Y.x=-n*Math.cos(d+pe*y)*Math.sin(_+re*A),Y.y=n*Math.cos(_+re*A),Y.z=n*Math.sin(d+pe*y)*Math.sin(_+re*A),Q.push(Y.x,Y.y,Y.z),q.copy(Y).normalize(),ne.push(q.x,q.y,q.z),te.push(pe+le,1-re),ie.push(I++)}G.push(ie)}for(let J=0;J<f;J++)for(let ie=0;ie<s;ie++){const re=G[J][ie+1],le=G[J][ie],fe=G[J+1][ie],pe=G[J+1][ie+1];(J!==0||_>0)&&K.push(re,le,pe),(J!==f-1||R<Math.PI)&&K.push(le,fe,pe)}this.setIndex(K),this.setAttribute("position",new Float32BufferAttribute(Q,3)),this.setAttribute("normal",new Float32BufferAttribute(ne,3)),this.setAttribute("uv",new Float32BufferAttribute(te,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new SphereGeometry(n.radius,n.widthSegments,n.heightSegments,n.phiStart,n.phiLength,n.thetaStart,n.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(n=1,s=0){const f=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],d=[2,1,0,0,3,2,1,3,0,2,3,1];super(f,d,n,s),this.type="TetrahedronGeometry",this.parameters={radius:n,detail:s}}static fromJSON(n){return new TetrahedronGeometry(n.radius,n.detail)}}class TorusGeometry extends BufferGeometry{constructor(n=1,s=.4,f=12,d=48,y=Math.PI*2,_=0,A=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:n,tube:s,radialSegments:f,tubularSegments:d,arc:y,thetaStart:_,thetaLength:A},f=Math.floor(f),d=Math.floor(d);const R=[],I=[],G=[],Y=[],q=new Vector3,K=new Vector3,Q=new Vector3;for(let ne=0;ne<=f;ne++){const te=_+ne/f*A;for(let J=0;J<=d;J++){const ie=J/d*y;K.x=(n+s*Math.cos(te))*Math.cos(ie),K.y=(n+s*Math.cos(te))*Math.sin(ie),K.z=s*Math.sin(te),I.push(K.x,K.y,K.z),q.x=n*Math.cos(ie),q.y=n*Math.sin(ie),Q.subVectors(K,q).normalize(),G.push(Q.x,Q.y,Q.z),Y.push(J/d),Y.push(ne/f)}}for(let ne=1;ne<=f;ne++)for(let te=1;te<=d;te++){const J=(d+1)*ne+te-1,ie=(d+1)*(ne-1)+te-1,re=(d+1)*(ne-1)+te,le=(d+1)*ne+te;R.push(J,ie,le),R.push(ie,re,le)}this.setIndex(R),this.setAttribute("position",new Float32BufferAttribute(I,3)),this.setAttribute("normal",new Float32BufferAttribute(G,3)),this.setAttribute("uv",new Float32BufferAttribute(Y,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new TorusGeometry(n.radius,n.tube,n.radialSegments,n.tubularSegments,n.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(n=1,s=.4,f=64,d=8,y=2,_=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:n,tube:s,tubularSegments:f,radialSegments:d,p:y,q:_},f=Math.floor(f),d=Math.floor(d);const A=[],R=[],I=[],G=[],Y=new Vector3,q=new Vector3,K=new Vector3,Q=new Vector3,ne=new Vector3,te=new Vector3,J=new Vector3;for(let re=0;re<=f;++re){const le=re/f*y*Math.PI*2;ie(le,y,_,n,K),ie(le+.01,y,_,n,Q),te.subVectors(Q,K),J.addVectors(Q,K),ne.crossVectors(te,J),J.crossVectors(ne,te),ne.normalize(),J.normalize();for(let fe=0;fe<=d;++fe){const pe=fe/d*Math.PI*2,de=-s*Math.cos(pe),se=s*Math.sin(pe);Y.x=K.x+(de*J.x+se*ne.x),Y.y=K.y+(de*J.y+se*ne.y),Y.z=K.z+(de*J.z+se*ne.z),R.push(Y.x,Y.y,Y.z),q.subVectors(Y,K).normalize(),I.push(q.x,q.y,q.z),G.push(re/f),G.push(fe/d)}}for(let re=1;re<=f;re++)for(let le=1;le<=d;le++){const fe=(d+1)*(re-1)+(le-1),pe=(d+1)*re+(le-1),de=(d+1)*re+le,se=(d+1)*(re-1)+le;A.push(fe,pe,se),A.push(pe,de,se)}this.setIndex(A),this.setAttribute("position",new Float32BufferAttribute(R,3)),this.setAttribute("normal",new Float32BufferAttribute(I,3)),this.setAttribute("uv",new Float32BufferAttribute(G,2));function ie(re,le,fe,pe,de){const se=Math.cos(re),he=Math.sin(re),Se=fe/le*re,ve=Math.cos(Se);de.x=pe*(2+ve)*.5*se,de.y=pe*(2+ve)*he*.5,de.z=pe*Math.sin(Se)*.5}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new TorusKnotGeometry(n.radius,n.tube,n.tubularSegments,n.radialSegments,n.p,n.q)}}class TubeGeometry extends BufferGeometry{constructor(n=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),s=64,f=1,d=8,y=!1){super(),this.type="TubeGeometry",this.parameters={path:n,tubularSegments:s,radius:f,radialSegments:d,closed:y};const _=n.computeFrenetFrames(s,y);this.tangents=_.tangents,this.normals=_.normals,this.binormals=_.binormals;const A=new Vector3,R=new Vector3,I=new Vector2;let G=new Vector3;const Y=[],q=[],K=[],Q=[];ne(),this.setIndex(Q),this.setAttribute("position",new Float32BufferAttribute(Y,3)),this.setAttribute("normal",new Float32BufferAttribute(q,3)),this.setAttribute("uv",new Float32BufferAttribute(K,2));function ne(){for(let re=0;re<s;re++)te(re);te(y===!1?s:0),ie(),J()}function te(re){G=n.getPointAt(re/s,G);const le=_.normals[re],fe=_.binormals[re];for(let pe=0;pe<=d;pe++){const de=pe/d*Math.PI*2,se=Math.sin(de),he=-Math.cos(de);R.x=he*le.x+se*fe.x,R.y=he*le.y+se*fe.y,R.z=he*le.z+se*fe.z,R.normalize(),q.push(R.x,R.y,R.z),A.x=G.x+f*R.x,A.y=G.y+f*R.y,A.z=G.z+f*R.z,Y.push(A.x,A.y,A.z)}}function J(){for(let re=1;re<=s;re++)for(let le=1;le<=d;le++){const fe=(d+1)*(re-1)+(le-1),pe=(d+1)*re+(le-1),de=(d+1)*re+le,se=(d+1)*(re-1)+le;Q.push(fe,pe,se),Q.push(pe,de,se)}}function ie(){for(let re=0;re<=s;re++)for(let le=0;le<=d;le++)I.x=re/s,I.y=le/d,K.push(I.x,I.y)}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}toJSON(){const n=super.toJSON();return n.path=this.parameters.path.toJSON(),n}static fromJSON(n){return new TubeGeometry(new Curves[n.path.type]().fromJSON(n.path),n.tubularSegments,n.radius,n.radialSegments,n.closed)}}class WireframeGeometry extends BufferGeometry{constructor(n=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:n},n!==null){const s=[],f=new Set,d=new Vector3,y=new Vector3;if(n.index!==null){const _=n.attributes.position,A=n.index;let R=n.groups;R.length===0&&(R=[{start:0,count:A.count,materialIndex:0}]);for(let I=0,G=R.length;I<G;++I){const Y=R[I],q=Y.start,K=Y.count;for(let Q=q,ne=q+K;Q<ne;Q+=3)for(let te=0;te<3;te++){const J=A.getX(Q+te),ie=A.getX(Q+(te+1)%3);d.fromBufferAttribute(_,J),y.fromBufferAttribute(_,ie),isUniqueEdge(d,y,f)===!0&&(s.push(d.x,d.y,d.z),s.push(y.x,y.y,y.z))}}}else{const _=n.attributes.position;for(let A=0,R=_.count/3;A<R;A++)for(let I=0;I<3;I++){const G=3*A+I,Y=3*A+(I+1)%3;d.fromBufferAttribute(_,G),y.fromBufferAttribute(_,Y),isUniqueEdge(d,y,f)===!0&&(s.push(d.x,d.y,d.z),s.push(y.x,y.y,y.z))}}this.setAttribute("position",new Float32BufferAttribute(s,3))}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}}function isUniqueEdge(u,n,s){const f=`${u.x},${u.y},${u.z}-${n.x},${n.y},${n.z}`,d=`${n.x},${n.y},${n.z}-${u.x},${u.y},${u.z}`;return s.has(f)===!0||s.has(d)===!0?!1:(s.add(f),s.add(d),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(n){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.fog=n.fog,this}}function cloneUniforms(u){const n={};for(const s in u){n[s]={};for(const f in u[s]){const d=u[s][f];d&&(d.isColor||d.isMatrix3||d.isMatrix4||d.isVector2||d.isVector3||d.isVector4||d.isTexture||d.isQuaternion)?d.isRenderTargetTexture?(warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),n[s][f]=null):n[s][f]=d.clone():Array.isArray(d)?n[s][f]=d.slice():n[s][f]=d}}return n}function mergeUniforms(u){const n={};for(let s=0;s<u.length;s++){const f=cloneUniforms(u[s]);for(const d in f)n[d]=f[d]}return n}function cloneUniformsGroups(u){const n=[];for(let s=0;s<u.length;s++)n.push(u[s].clone());return n}function getUnlitUniformColorSpace(u){const n=u.getRenderTarget();return n===null?u.outputColorSpace:n.isXRRenderTarget===!0?n.texture.colorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(n){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,n!==void 0&&this.setValues(n)}copy(n){return super.copy(n),this.fragmentShader=n.fragmentShader,this.vertexShader=n.vertexShader,this.uniforms=cloneUniforms(n.uniforms),this.uniformsGroups=cloneUniformsGroups(n.uniformsGroups),this.defines=Object.assign({},n.defines),this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.fog=n.fog,this.lights=n.lights,this.clipping=n.clipping,this.extensions=Object.assign({},n.extensions),this.glslVersion=n.glslVersion,this.defaultAttributeValues=Object.assign({},n.defaultAttributeValues),this.index0AttributeName=n.index0AttributeName,this.uniformsNeedUpdate=n.uniformsNeedUpdate,this}toJSON(n){const s=super.toJSON(n);s.glslVersion=this.glslVersion,s.uniforms={};for(const d in this.uniforms){const _=this.uniforms[d].value;_&&_.isTexture?s.uniforms[d]={type:"t",value:_.toJSON(n).uuid}:_&&_.isColor?s.uniforms[d]={type:"c",value:_.getHex()}:_&&_.isVector2?s.uniforms[d]={type:"v2",value:_.toArray()}:_&&_.isVector3?s.uniforms[d]={type:"v3",value:_.toArray()}:_&&_.isVector4?s.uniforms[d]={type:"v4",value:_.toArray()}:_&&_.isMatrix3?s.uniforms[d]={type:"m3",value:_.toArray()}:_&&_.isMatrix4?s.uniforms[d]={type:"m4",value:_.toArray()}:s.uniforms[d]={value:_}}Object.keys(this.defines).length>0&&(s.defines=this.defines),s.vertexShader=this.vertexShader,s.fragmentShader=this.fragmentShader,s.lights=this.lights,s.clipping=this.clipping;const f={};for(const d in this.extensions)this.extensions[d]===!0&&(f[d]=!0);return Object.keys(f).length>0&&(s.extensions=f),s}}class RawShaderMaterial extends ShaderMaterial{constructor(n){super(n),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(n){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.defines={STANDARD:""},this.color.copy(n.color),this.roughness=n.roughness,this.metalness=n.metalness,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.roughnessMap=n.roughnessMap,this.metalnessMap=n.metalnessMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.envMapIntensity=n.envMapIntensity,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(n){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(s){this.ior=(1+.4*s)/(1-.4*s)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(n)}get anisotropy(){return this._anisotropy}set anisotropy(n){this._anisotropy>0!=n>0&&this.version++,this._anisotropy=n}get clearcoat(){return this._clearcoat}set clearcoat(n){this._clearcoat>0!=n>0&&this.version++,this._clearcoat=n}get iridescence(){return this._iridescence}set iridescence(n){this._iridescence>0!=n>0&&this.version++,this._iridescence=n}get dispersion(){return this._dispersion}set dispersion(n){this._dispersion>0!=n>0&&this.version++,this._dispersion=n}get sheen(){return this._sheen}set sheen(n){this._sheen>0!=n>0&&this.version++,this._sheen=n}get transmission(){return this._transmission}set transmission(n){this._transmission>0!=n>0&&this.version++,this._transmission=n}copy(n){return super.copy(n),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=n.anisotropy,this.anisotropyRotation=n.anisotropyRotation,this.anisotropyMap=n.anisotropyMap,this.clearcoat=n.clearcoat,this.clearcoatMap=n.clearcoatMap,this.clearcoatRoughness=n.clearcoatRoughness,this.clearcoatRoughnessMap=n.clearcoatRoughnessMap,this.clearcoatNormalMap=n.clearcoatNormalMap,this.clearcoatNormalScale.copy(n.clearcoatNormalScale),this.dispersion=n.dispersion,this.ior=n.ior,this.iridescence=n.iridescence,this.iridescenceMap=n.iridescenceMap,this.iridescenceIOR=n.iridescenceIOR,this.iridescenceThicknessRange=[...n.iridescenceThicknessRange],this.iridescenceThicknessMap=n.iridescenceThicknessMap,this.sheen=n.sheen,this.sheenColor.copy(n.sheenColor),this.sheenColorMap=n.sheenColorMap,this.sheenRoughness=n.sheenRoughness,this.sheenRoughnessMap=n.sheenRoughnessMap,this.transmission=n.transmission,this.transmissionMap=n.transmissionMap,this.thickness=n.thickness,this.thicknessMap=n.thicknessMap,this.attenuationDistance=n.attenuationDistance,this.attenuationColor.copy(n.attenuationColor),this.specularIntensity=n.specularIntensity,this.specularIntensityMap=n.specularIntensityMap,this.specularColor.copy(n.specularColor),this.specularColorMap=n.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(n){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.specular.copy(n.specular),this.shininess=n.shininess,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.envMapIntensity=n.envMapIntensity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class MeshToonMaterial extends Material{constructor(n){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.gradientMap=n.gradientMap,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.fog=n.fog,this}}class MeshNormalMaterial extends Material{constructor(n){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(n)}copy(n){return super.copy(n),this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.flatShading=n.flatShading,this}}class MeshLambertMaterial extends Material{constructor(n){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.envMapIntensity=n.envMapIntensity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class MeshDepthMaterial extends Material{constructor(n){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(n)}copy(n){return super.copy(n),this.depthPacking=n.depthPacking,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(n){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(n)}copy(n){return super.copy(n),this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this}}class MeshMatcapMaterial extends Material{constructor(n){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.defines={MATCAP:""},this.color.copy(n.color),this.matcap=n.matcap,this.map=n.map,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.flatShading=n.flatShading,this.fog=n.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(n){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(n)}copy(n){return super.copy(n),this.scale=n.scale,this.dashSize=n.dashSize,this.gapSize=n.gapSize,this}}function convertArray(u,n){return!u||u.constructor===n?u:typeof n.BYTES_PER_ELEMENT=="number"?new n(u):Array.prototype.slice.call(u)}function getKeyframeOrder(u){function n(d,y){return u[d]-u[y]}const s=u.length,f=new Array(s);for(let d=0;d!==s;++d)f[d]=d;return f.sort(n),f}function sortedArray(u,n,s){const f=u.length,d=new u.constructor(f);for(let y=0,_=0;_!==f;++y){const A=s[y]*n;for(let R=0;R!==n;++R)d[_++]=u[A+R]}return d}function flattenJSON(u,n,s,f){let d=1,y=u[0];for(;y!==void 0&&y[f]===void 0;)y=u[d++];if(y===void 0)return;let _=y[f];if(_!==void 0)if(Array.isArray(_))do _=y[f],_!==void 0&&(n.push(y.time),s.push(..._)),y=u[d++];while(y!==void 0);else if(_.toArray!==void 0)do _=y[f],_!==void 0&&(n.push(y.time),_.toArray(s,s.length)),y=u[d++];while(y!==void 0);else do _=y[f],_!==void 0&&(n.push(y.time),s.push(_)),y=u[d++];while(y!==void 0)}function subclip(u,n,s,f,d=30){const y=u.clone();y.name=n;const _=[];for(let R=0;R<y.tracks.length;++R){const I=y.tracks[R],G=I.getValueSize(),Y=[],q=[];for(let K=0;K<I.times.length;++K){const Q=I.times[K]*d;if(!(Q<s||Q>=f)){Y.push(I.times[K]);for(let ne=0;ne<G;++ne)q.push(I.values[K*G+ne])}}Y.length!==0&&(I.times=convertArray(Y,I.times.constructor),I.values=convertArray(q,I.values.constructor),_.push(I))}y.tracks=_;let A=1/0;for(let R=0;R<y.tracks.length;++R)A>y.tracks[R].times[0]&&(A=y.tracks[R].times[0]);for(let R=0;R<y.tracks.length;++R)y.tracks[R].shift(-1*A);return y.resetDuration(),y}function makeClipAdditive(u,n=0,s=u,f=30){f<=0&&(f=30);const d=s.tracks.length,y=n/f;for(let _=0;_<d;++_){const A=s.tracks[_],R=A.ValueTypeName;if(R==="bool"||R==="string")continue;const I=u.tracks.find(function(J){return J.name===A.name&&J.ValueTypeName===R});if(I===void 0)continue;let G=0;const Y=A.getValueSize();A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(G=Y/3);let q=0;const K=I.getValueSize();I.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(q=K/3);const Q=A.times.length-1;let ne;if(y<=A.times[0]){const J=G,ie=Y-G;ne=A.values.slice(J,ie)}else if(y>=A.times[Q]){const J=Q*Y+G,ie=J+Y-G;ne=A.values.slice(J,ie)}else{const J=A.createInterpolant(),ie=G,re=Y-G;J.evaluate(y),ne=J.resultBuffer.slice(ie,re)}R==="quaternion"&&new Quaternion().fromArray(ne).normalize().conjugate().toArray(ne);const te=I.times.length;for(let J=0;J<te;++J){const ie=J*K+q;if(R==="quaternion")Quaternion.multiplyQuaternionsFlat(I.values,ie,ne,0,I.values,ie);else{const re=K-q*2;for(let le=0;le<re;++le)I.values[ie+le]-=ne[le]}}}return u.blendMode=AdditiveAnimationBlendMode,u}class AnimationUtils{static convertArray(n,s){return convertArray(n,s)}static isTypedArray(n){return isTypedArray(n)}static getKeyframeOrder(n){return getKeyframeOrder(n)}static sortedArray(n,s,f){return sortedArray(n,s,f)}static flattenJSON(n,s,f,d){flattenJSON(n,s,f,d)}static subclip(n,s,f,d,y=30){return subclip(n,s,f,d,y)}static makeClipAdditive(n,s=0,f=n,d=30){return makeClipAdditive(n,s,f,d)}}class Interpolant{constructor(n,s,f,d){this.parameterPositions=n,this._cachedIndex=0,this.resultBuffer=d!==void 0?d:new s.constructor(f),this.sampleValues=s,this.valueSize=f,this.settings=null,this.DefaultSettings_={}}evaluate(n){const s=this.parameterPositions;let f=this._cachedIndex,d=s[f],y=s[f-1];e:{t:{let _;n:{i:if(!(n<d)){for(let A=f+2;;){if(d===void 0){if(n<y)break i;return f=s.length,this._cachedIndex=f,this.copySampleValue_(f-1)}if(f===A)break;if(y=d,d=s[++f],n<d)break t}_=s.length;break n}if(!(n>=y)){const A=s[1];n<A&&(f=2,y=A);for(let R=f-2;;){if(y===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(f===R)break;if(d=y,y=s[--f-1],n>=y)break t}_=f,f=0;break n}break e}for(;f<_;){const A=f+_>>>1;n<s[A]?_=A:f=A+1}if(d=s[f],y=s[f-1],y===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(d===void 0)return f=s.length,this._cachedIndex=f,this.copySampleValue_(f-1)}this._cachedIndex=f,this.intervalChanged_(f,y,d)}return this.interpolate_(f,y,n,d)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(n){const s=this.resultBuffer,f=this.sampleValues,d=this.valueSize,y=n*d;for(let _=0;_!==d;++_)s[_]=f[y+_];return s}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(n,s,f,d){super(n,s,f,d),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(n,s,f){const d=this.parameterPositions;let y=n-2,_=n+1,A=d[y],R=d[_];if(A===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:y=n,A=2*s-f;break;case WrapAroundEnding:y=d.length-2,A=s+d[y]-d[y+1];break;default:y=n,A=f}if(R===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:_=n,R=2*f-s;break;case WrapAroundEnding:_=1,R=f+d[1]-d[0];break;default:_=n-1,R=s}const I=(f-s)*.5,G=this.valueSize;this._weightPrev=I/(s-A),this._weightNext=I/(R-f),this._offsetPrev=y*G,this._offsetNext=_*G}interpolate_(n,s,f,d){const y=this.resultBuffer,_=this.sampleValues,A=this.valueSize,R=n*A,I=R-A,G=this._offsetPrev,Y=this._offsetNext,q=this._weightPrev,K=this._weightNext,Q=(f-s)/(d-s),ne=Q*Q,te=ne*Q,J=-q*te+2*q*ne-q*Q,ie=(1+q)*te+(-1.5-2*q)*ne+(-.5+q)*Q+1,re=(-1-K)*te+(1.5+K)*ne+.5*Q,le=K*te-K*ne;for(let fe=0;fe!==A;++fe)y[fe]=J*_[G+fe]+ie*_[I+fe]+re*_[R+fe]+le*_[Y+fe];return y}}class LinearInterpolant extends Interpolant{constructor(n,s,f,d){super(n,s,f,d)}interpolate_(n,s,f,d){const y=this.resultBuffer,_=this.sampleValues,A=this.valueSize,R=n*A,I=R-A,G=(f-s)/(d-s),Y=1-G;for(let q=0;q!==A;++q)y[q]=_[I+q]*Y+_[R+q]*G;return y}}class DiscreteInterpolant extends Interpolant{constructor(n,s,f,d){super(n,s,f,d)}interpolate_(n){return this.copySampleValue_(n-1)}}class BezierInterpolant extends Interpolant{interpolate_(n,s,f,d){const y=this.resultBuffer,_=this.sampleValues,A=this.valueSize,R=n*A,I=R-A,G=this.settings||this.DefaultSettings_,Y=G.inTangents,q=G.outTangents;if(!Y||!q){const ne=(f-s)/(d-s),te=1-ne;for(let J=0;J!==A;++J)y[J]=_[I+J]*te+_[R+J]*ne;return y}const K=A*2,Q=n-1;for(let ne=0;ne!==A;++ne){const te=_[I+ne],J=_[R+ne],ie=Q*K+ne*2,re=q[ie],le=q[ie+1],fe=n*K+ne*2,pe=Y[fe],de=Y[fe+1];let se=(f-s)/(d-s),he,Se,ve,Re,Ee;for(let Oe=0;Oe<8;Oe++){he=se*se,Se=he*se,ve=1-se,Re=ve*ve,Ee=Re*ve;const ye=Ee*s+3*Re*se*re+3*ve*he*pe+Se*d-f;if(Math.abs(ye)<1e-10)break;const Ae=3*Re*(re-s)+6*ve*se*(pe-re)+3*he*(d-pe);if(Math.abs(Ae)<1e-10)break;se=se-ye/Ae,se=Math.max(0,Math.min(1,se))}y[ne]=Ee*te+3*Re*se*le+3*ve*he*de+Se*J}return y}}class KeyframeTrack{constructor(n,s,f,d){if(n===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(s===void 0||s.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+n);this.name=n,this.times=convertArray(s,this.TimeBufferType),this.values=convertArray(f,this.ValueBufferType),this.setInterpolation(d||this.DefaultInterpolation)}static toJSON(n){const s=n.constructor;let f;if(s.toJSON!==this.toJSON)f=s.toJSON(n);else{f={name:n.name,times:convertArray(n.times,Array),values:convertArray(n.values,Array)};const d=n.getInterpolation();d!==n.DefaultInterpolation&&(f.interpolation=d)}return f.type=n.ValueTypeName,f}InterpolantFactoryMethodDiscrete(n){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),n)}InterpolantFactoryMethodLinear(n){return new LinearInterpolant(this.times,this.values,this.getValueSize(),n)}InterpolantFactoryMethodSmooth(n){return new CubicInterpolant(this.times,this.values,this.getValueSize(),n)}InterpolantFactoryMethodBezier(n){const s=new BezierInterpolant(this.times,this.values,this.getValueSize(),n);return this.settings&&(s.settings=this.settings),s}setInterpolation(n){let s;switch(n){case InterpolateDiscrete:s=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:s=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:s=this.InterpolantFactoryMethodSmooth;break;case InterpolateBezier:s=this.InterpolantFactoryMethodBezier;break}if(s===void 0){const f="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(n!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(f);return warn("KeyframeTrack:",f),this}return this.createInterpolant=s,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth;case this.InterpolantFactoryMethodBezier:return InterpolateBezier}}getValueSize(){return this.values.length/this.times.length}shift(n){if(n!==0){const s=this.times;for(let f=0,d=s.length;f!==d;++f)s[f]+=n}return this}scale(n){if(n!==1){const s=this.times;for(let f=0,d=s.length;f!==d;++f)s[f]*=n}return this}trim(n,s){const f=this.times,d=f.length;let y=0,_=d-1;for(;y!==d&&f[y]<n;)++y;for(;_!==-1&&f[_]>s;)--_;if(++_,y!==0||_!==d){y>=_&&(_=Math.max(_,1),y=_-1);const A=this.getValueSize();this.times=f.slice(y,_),this.values=this.values.slice(y*A,_*A)}return this}validate(){let n=!0;const s=this.getValueSize();s-Math.floor(s)!==0&&(error("KeyframeTrack: Invalid value size in track.",this),n=!1);const f=this.times,d=this.values,y=f.length;y===0&&(error("KeyframeTrack: Track is empty.",this),n=!1);let _=null;for(let A=0;A!==y;A++){const R=f[A];if(typeof R=="number"&&isNaN(R)){error("KeyframeTrack: Time is not a valid number.",this,A,R),n=!1;break}if(_!==null&&_>R){error("KeyframeTrack: Out of order keys.",this,A,R,_),n=!1;break}_=R}if(d!==void 0&&isTypedArray(d))for(let A=0,R=d.length;A!==R;++A){const I=d[A];if(isNaN(I)){error("KeyframeTrack: Value is not a valid number.",this,A,I),n=!1;break}}return n}optimize(){const n=this.times.slice(),s=this.values.slice(),f=this.getValueSize(),d=this.getInterpolation()===InterpolateSmooth,y=n.length-1;let _=1;for(let A=1;A<y;++A){let R=!1;const I=n[A],G=n[A+1];if(I!==G&&(A!==1||I!==n[0]))if(d)R=!0;else{const Y=A*f,q=Y-f,K=Y+f;for(let Q=0;Q!==f;++Q){const ne=s[Y+Q];if(ne!==s[q+Q]||ne!==s[K+Q]){R=!0;break}}}if(R){if(A!==_){n[_]=n[A];const Y=A*f,q=_*f;for(let K=0;K!==f;++K)s[q+K]=s[Y+K]}++_}}if(y>0){n[_]=n[y];for(let A=y*f,R=_*f,I=0;I!==f;++I)s[R+I]=s[A+I];++_}return _!==n.length?(this.times=n.slice(0,_),this.values=s.slice(0,_*f)):(this.times=n,this.values=s),this}clone(){const n=this.times.slice(),s=this.values.slice(),f=this.constructor,d=new f(this.name,n,s);return d.createInterpolant=this.createInterpolant,d}}KeyframeTrack.prototype.ValueTypeName="";KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{constructor(n,s,f){super(n,s,f)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{constructor(n,s,f,d){super(n,s,f,d)}}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{constructor(n,s,f,d){super(n,s,f,d)}}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(n,s,f,d){super(n,s,f,d)}interpolate_(n,s,f,d){const y=this.resultBuffer,_=this.sampleValues,A=this.valueSize,R=(f-s)/(d-s);let I=n*A;for(let G=I+A;I!==G;I+=4)Quaternion.slerpFlat(y,0,_,I-A,_,I,R);return y}}class QuaternionKeyframeTrack extends KeyframeTrack{constructor(n,s,f,d){super(n,s,f,d)}InterpolantFactoryMethodLinear(n){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),n)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(n,s,f){super(n,s,f)}}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{constructor(n,s,f,d){super(n,s,f,d)}}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(n="",s=-1,f=[],d=NormalAnimationBlendMode){this.name=n,this.tracks=f,this.duration=s,this.blendMode=d,this.uuid=generateUUID(),this.userData={},this.duration<0&&this.resetDuration()}static parse(n){const s=[],f=n.tracks,d=1/(n.fps||1);for(let _=0,A=f.length;_!==A;++_)s.push(parseKeyframeTrack(f[_]).scale(d));const y=new this(n.name,n.duration,s,n.blendMode);return y.uuid=n.uuid,y.userData=JSON.parse(n.userData||"{}"),y}static toJSON(n){const s=[],f=n.tracks,d={name:n.name,duration:n.duration,tracks:s,uuid:n.uuid,blendMode:n.blendMode,userData:JSON.stringify(n.userData)};for(let y=0,_=f.length;y!==_;++y)s.push(KeyframeTrack.toJSON(f[y]));return d}static CreateFromMorphTargetSequence(n,s,f,d){const y=s.length,_=[];for(let A=0;A<y;A++){let R=[],I=[];R.push((A+y-1)%y,A,(A+1)%y),I.push(0,1,0);const G=getKeyframeOrder(R);R=sortedArray(R,1,G),I=sortedArray(I,1,G),!d&&R[0]===0&&(R.push(y),I.push(I[0])),_.push(new NumberKeyframeTrack(".morphTargetInfluences["+s[A].name+"]",R,I).scale(1/f))}return new this(n,-1,_)}static findByName(n,s){let f=n;if(!Array.isArray(n)){const d=n;f=d.geometry&&d.geometry.animations||d.animations}for(let d=0;d<f.length;d++)if(f[d].name===s)return f[d];return null}static CreateClipsFromMorphTargetSequences(n,s,f){const d={},y=/^([\w-]*?)([\d]+)$/;for(let A=0,R=n.length;A<R;A++){const I=n[A],G=I.name.match(y);if(G&&G.length>1){const Y=G[1];let q=d[Y];q||(d[Y]=q=[]),q.push(I)}}const _=[];for(const A in d)_.push(this.CreateFromMorphTargetSequence(A,d[A],s,f));return _}static parseAnimation(n,s){if(warn("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!n)return error("AnimationClip: No animation in JSONLoader data."),null;const f=function(Y,q,K,Q,ne){if(K.length!==0){const te=[],J=[];flattenJSON(K,te,J,Q),te.length!==0&&ne.push(new Y(q,te,J))}},d=[],y=n.name||"default",_=n.fps||30,A=n.blendMode;let R=n.length||-1;const I=n.hierarchy||[];for(let Y=0;Y<I.length;Y++){const q=I[Y].keys;if(!(!q||q.length===0))if(q[0].morphTargets){const K={};let Q;for(Q=0;Q<q.length;Q++)if(q[Q].morphTargets)for(let ne=0;ne<q[Q].morphTargets.length;ne++)K[q[Q].morphTargets[ne]]=-1;for(const ne in K){const te=[],J=[];for(let ie=0;ie!==q[Q].morphTargets.length;++ie){const re=q[Q];te.push(re.time),J.push(re.morphTarget===ne?1:0)}d.push(new NumberKeyframeTrack(".morphTargetInfluence["+ne+"]",te,J))}R=K.length*_}else{const K=".bones["+s[Y].name+"]";f(VectorKeyframeTrack,K+".position",q,"pos",d),f(QuaternionKeyframeTrack,K+".quaternion",q,"rot",d),f(VectorKeyframeTrack,K+".scale",q,"scl",d)}}return d.length===0?null:new this(y,R,d,A)}resetDuration(){const n=this.tracks;let s=0;for(let f=0,d=n.length;f!==d;++f){const y=this.tracks[f];s=Math.max(s,y.times[y.times.length-1])}return this.duration=s,this}trim(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].trim(0,this.duration);return this}validate(){let n=!0;for(let s=0;s<this.tracks.length;s++)n=n&&this.tracks[s].validate();return n}optimize(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].optimize();return this}clone(){const n=[];for(let f=0;f<this.tracks.length;f++)n.push(this.tracks[f].clone());const s=new this.constructor(this.name,this.duration,n,this.blendMode);return s.userData=JSON.parse(JSON.stringify(this.userData)),s}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(u){switch(u.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+u)}function parseKeyframeTrack(u){if(u.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const n=getTrackTypeForValueTypeName(u.type);if(u.times===void 0){const s=[],f=[];flattenJSON(u.keys,s,f,"value"),u.times=s,u.values=f}return n.parse!==void 0?n.parse(u):new n(u.name,u.times,u.values,u.interpolation)}const Cache={enabled:!1,files:{},add:function(u,n){this.enabled!==!1&&(isBlobURL(u)||(this.files[u]=n))},get:function(u){if(this.enabled!==!1&&!isBlobURL(u))return this.files[u]},remove:function(u){delete this.files[u]},clear:function(){this.files={}}};function isBlobURL(u){try{const n=u.slice(u.indexOf(":")+1);return new URL(n).protocol==="blob:"}catch{return!1}}class LoadingManager{constructor(n,s,f){const d=this;let y=!1,_=0,A=0,R;const I=[];this.onStart=void 0,this.onLoad=n,this.onProgress=s,this.onError=f,this._abortController=null,this.itemStart=function(G){A++,y===!1&&d.onStart!==void 0&&d.onStart(G,_,A),y=!0},this.itemEnd=function(G){_++,d.onProgress!==void 0&&d.onProgress(G,_,A),_===A&&(y=!1,d.onLoad!==void 0&&d.onLoad())},this.itemError=function(G){d.onError!==void 0&&d.onError(G)},this.resolveURL=function(G){return R?R(G):G},this.setURLModifier=function(G){return R=G,this},this.addHandler=function(G,Y){return I.push(G,Y),this},this.removeHandler=function(G){const Y=I.indexOf(G);return Y!==-1&&I.splice(Y,2),this},this.getHandler=function(G){for(let Y=0,q=I.length;Y<q;Y+=2){const K=I[Y],Q=I[Y+1];if(K.global&&(K.lastIndex=0),K.test(G))return Q}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(n){this.manager=n!==void 0?n:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}load(){}loadAsync(n,s){const f=this;return new Promise(function(d,y){f.load(n,d,s,y)})}parse(){}setCrossOrigin(n){return this.crossOrigin=n,this}setWithCredentials(n){return this.withCredentials=n,this}setPath(n){return this.path=n,this}setResourcePath(n){return this.resourcePath=n,this}setRequestHeader(n){return this.requestHeader=n,this}abort(){return this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(n,s){super(n),this.response=s}}class FileLoader extends Loader{constructor(n){super(n),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(n,s,f,d){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const y=Cache.get(`file:${n}`);if(y!==void 0)return this.manager.itemStart(n),setTimeout(()=>{s&&s(y),this.manager.itemEnd(n)},0),y;if(loading[n]!==void 0){loading[n].push({onLoad:s,onProgress:f,onError:d});return}loading[n]=[],loading[n].push({onLoad:s,onProgress:f,onError:d});const _=new Request(n,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),A=this.mimeType,R=this.responseType;fetch(_).then(I=>{if(I.status===200||I.status===0){if(I.status===0&&warn("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||I.body===void 0||I.body.getReader===void 0)return I;const G=loading[n],Y=I.body.getReader(),q=I.headers.get("X-File-Size")||I.headers.get("Content-Length"),K=q?parseInt(q):0,Q=K!==0;let ne=0;const te=new ReadableStream({start(J){ie();function ie(){Y.read().then(({done:re,value:le})=>{if(re)J.close();else{ne+=le.byteLength;const fe=new ProgressEvent("progress",{lengthComputable:Q,loaded:ne,total:K});for(let pe=0,de=G.length;pe<de;pe++){const se=G[pe];se.onProgress&&se.onProgress(fe)}J.enqueue(le),ie()}},re=>{J.error(re)})}}});return new Response(te)}else throw new HttpError(`fetch for "${I.url}" responded with ${I.status}: ${I.statusText}`,I)}).then(I=>{switch(R){case"arraybuffer":return I.arrayBuffer();case"blob":return I.blob();case"document":return I.text().then(G=>new DOMParser().parseFromString(G,A));case"json":return I.json();default:if(A==="")return I.text();{const Y=/charset="?([^;"\s]*)"?/i.exec(A),q=Y&&Y[1]?Y[1].toLowerCase():void 0,K=new TextDecoder(q);return I.arrayBuffer().then(Q=>K.decode(Q))}}}).then(I=>{Cache.add(`file:${n}`,I);const G=loading[n];delete loading[n];for(let Y=0,q=G.length;Y<q;Y++){const K=G[Y];K.onLoad&&K.onLoad(I)}}).catch(I=>{const G=loading[n];if(G===void 0)throw this.manager.itemError(n),I;delete loading[n];for(let Y=0,q=G.length;Y<q;Y++){const K=G[Y];K.onError&&K.onError(I)}this.manager.itemError(n)}).finally(()=>{this.manager.itemEnd(n)}),this.manager.itemStart(n)}setResponseType(n){return this.responseType=n,this}setMimeType(n){return this.mimeType=n,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class AnimationLoader extends Loader{constructor(n){super(n)}load(n,s,f,d){const y=this,_=new FileLoader(this.manager);_.setPath(this.path),_.setRequestHeader(this.requestHeader),_.setWithCredentials(this.withCredentials),_.load(n,function(A){try{s(y.parse(JSON.parse(A)))}catch(R){d?d(R):error(R),y.manager.itemError(n)}},f,d)}parse(n){const s=[];for(let f=0;f<n.length;f++){const d=AnimationClip.parse(n[f]);s.push(d)}return s}}class CompressedTextureLoader extends Loader{constructor(n){super(n)}load(n,s,f,d){const y=this,_=[],A=new CompressedTexture,R=new FileLoader(this.manager);R.setPath(this.path),R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setWithCredentials(y.withCredentials);let I=0;function G(Y){R.load(n[Y],function(q){const K=y.parse(q,!0);_[Y]={width:K.width,height:K.height,format:K.format,mipmaps:K.mipmaps},I+=1,I===6&&(K.mipmapCount===1&&(A.minFilter=LinearFilter),A.image=_,A.format=K.format,A.needsUpdate=!0,s&&s(A))},f,d)}if(Array.isArray(n))for(let Y=0,q=n.length;Y<q;++Y)G(Y);else R.load(n,function(Y){const q=y.parse(Y,!0);if(q.isCubemap){const K=q.mipmaps.length/q.mipmapCount;for(let Q=0;Q<K;Q++){_[Q]={mipmaps:[]};for(let ne=0;ne<q.mipmapCount;ne++)_[Q].mipmaps.push(q.mipmaps[Q*q.mipmapCount+ne]),_[Q].format=q.format,_[Q].width=q.width,_[Q].height=q.height}A.image=_}else A.image.width=q.width,A.image.height=q.height,A.mipmaps=q.mipmaps;q.mipmapCount===1&&(A.minFilter=LinearFilter),A.format=q.format,A.needsUpdate=!0,s&&s(A)},f,d);return A}}const _loading=new WeakMap;class ImageLoader extends Loader{constructor(n){super(n)}load(n,s,f,d){this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const y=this,_=Cache.get(`image:${n}`);if(_!==void 0){if(_.complete===!0)y.manager.itemStart(n),setTimeout(function(){s&&s(_),y.manager.itemEnd(n)},0);else{let Y=_loading.get(_);Y===void 0&&(Y=[],_loading.set(_,Y)),Y.push({onLoad:s,onError:d})}return _}const A=createElementNS("img");function R(){G(),s&&s(this);const Y=_loading.get(this)||[];for(let q=0;q<Y.length;q++){const K=Y[q];K.onLoad&&K.onLoad(this)}_loading.delete(this),y.manager.itemEnd(n)}function I(Y){G(),d&&d(Y),Cache.remove(`image:${n}`);const q=_loading.get(this)||[];for(let K=0;K<q.length;K++){const Q=q[K];Q.onError&&Q.onError(Y)}_loading.delete(this),y.manager.itemError(n),y.manager.itemEnd(n)}function G(){A.removeEventListener("load",R,!1),A.removeEventListener("error",I,!1)}return A.addEventListener("load",R,!1),A.addEventListener("error",I,!1),n.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(A.crossOrigin=this.crossOrigin),Cache.add(`image:${n}`,A),y.manager.itemStart(n),A.src=n,A}}class CubeTextureLoader extends Loader{constructor(n){super(n)}load(n,s,f,d){const y=new CubeTexture;y.colorSpace=SRGBColorSpace;const _=new ImageLoader(this.manager);_.setCrossOrigin(this.crossOrigin),_.setPath(this.path);let A=0;function R(I){_.load(n[I],function(G){y.images[I]=G,A++,A===6&&(y.needsUpdate=!0,s&&s(y))},void 0,d)}for(let I=0;I<n.length;++I)R(I);return y}}class DataTextureLoader extends Loader{constructor(n){super(n)}load(n,s,f,d){const y=this,_=new DataTexture,A=new FileLoader(this.manager);return A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setPath(this.path),A.setWithCredentials(y.withCredentials),A.load(n,function(R){let I;try{I=y.parse(R)}catch(G){if(d!==void 0)d(G);else{G(G);return}}I.image!==void 0?_.image=I.image:I.data!==void 0&&(_.image.width=I.width,_.image.height=I.height,_.image.data=I.data),_.wrapS=I.wrapS!==void 0?I.wrapS:ClampToEdgeWrapping,_.wrapT=I.wrapT!==void 0?I.wrapT:ClampToEdgeWrapping,_.magFilter=I.magFilter!==void 0?I.magFilter:LinearFilter,_.minFilter=I.minFilter!==void 0?I.minFilter:LinearFilter,_.anisotropy=I.anisotropy!==void 0?I.anisotropy:1,I.colorSpace!==void 0&&(_.colorSpace=I.colorSpace),I.flipY!==void 0&&(_.flipY=I.flipY),I.format!==void 0&&(_.format=I.format),I.type!==void 0&&(_.type=I.type),I.mipmaps!==void 0&&(_.mipmaps=I.mipmaps,_.minFilter=LinearMipmapLinearFilter),I.mipmapCount===1&&(_.minFilter=LinearFilter),I.generateMipmaps!==void 0&&(_.generateMipmaps=I.generateMipmaps),_.needsUpdate=!0,s&&s(_,I)},f,d),_}}class TextureLoader extends Loader{constructor(n){super(n)}load(n,s,f,d){const y=new Texture,_=new ImageLoader(this.manager);return _.setCrossOrigin(this.crossOrigin),_.setPath(this.path),_.load(n,function(A){y.image=A,y.needsUpdate=!0,s!==void 0&&s(y)},f,d),y}}class Light extends Object3D{constructor(n,s=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(n),this.intensity=s}dispose(){this.dispatchEvent({type:"dispose"})}copy(n,s){return super.copy(n,s),this.color.copy(n.color),this.intensity=n.intensity,this}toJSON(n){const s=super.toJSON(n);return s.object.color=this.color.getHex(),s.object.intensity=this.intensity,s}}class HemisphereLight extends Light{constructor(n,s,f){super(n,f),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color(s)}copy(n,s){return super.copy(n,s),this.groundColor.copy(n.groundColor),this}toJSON(n){const s=super.toJSON(n);return s.object.groundColor=this.groundColor.getHex(),s}}const _projScreenMatrix$2=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(n){this.camera=n,this.intensity=1,this.bias=0,this.biasNode=null,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.mapType=UnsignedByteType,this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(n){const s=this.camera,f=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(n.matrixWorld),s.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(n.target.matrixWorld),s.lookAt(_lookTarget$1),s.updateMatrixWorld(),_projScreenMatrix$2.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$2,s.coordinateSystem,s.reversedDepth),s.coordinateSystem===WebGPUCoordinateSystem||s.reversedDepth?f.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):f.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),f.multiply(_projScreenMatrix$2)}getViewport(n){return this._viewports[n]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(n){return this.camera=n.camera.clone(),this.intensity=n.intensity,this.bias=n.bias,this.radius=n.radius,this.autoUpdate=n.autoUpdate,this.needsUpdate=n.needsUpdate,this.normalBias=n.normalBias,this.blurSamples=n.blurSamples,this.mapSize.copy(n.mapSize),this.biasNode=n.biasNode,this}clone(){return new this.constructor().copy(this)}toJSON(){const n={};return this.intensity!==1&&(n.intensity=this.intensity),this.bias!==0&&(n.bias=this.bias),this.normalBias!==0&&(n.normalBias=this.normalBias),this.radius!==1&&(n.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(n.mapSize=this.mapSize.toArray()),n.camera=this.camera.toJSON(!1).object,delete n.camera.matrix,n}}const _position$2=new Vector3,_quaternion$2=new Quaternion,_scale$2=new Vector3;class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(n,s){return super.copy(n,s),this.matrixWorldInverse.copy(n.matrixWorldInverse),this.projectionMatrix.copy(n.projectionMatrix),this.projectionMatrixInverse.copy(n.projectionMatrixInverse),this.coordinateSystem=n.coordinateSystem,this}getWorldDirection(n){return super.getWorldDirection(n).negate()}updateMatrixWorld(n){super.updateMatrixWorld(n),this.matrixWorld.decompose(_position$2,_quaternion$2,_scale$2),_scale$2.x===1&&_scale$2.y===1&&_scale$2.z===1?this.matrixWorldInverse.copy(this.matrixWorld).invert():this.matrixWorldInverse.compose(_position$2,_quaternion$2,_scale$2.set(1,1,1)).invert()}updateWorldMatrix(n,s){super.updateWorldMatrix(n,s),this.matrixWorld.decompose(_position$2,_quaternion$2,_scale$2),_scale$2.x===1&&_scale$2.y===1&&_scale$2.z===1?this.matrixWorldInverse.copy(this.matrixWorld).invert():this.matrixWorldInverse.compose(_position$2,_quaternion$2,_scale$2.set(1,1,1)).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(n=50,s=1,f=.1,d=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=n,this.zoom=1,this.near=f,this.far=d,this.focus=10,this.aspect=s,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(n,s){return super.copy(n,s),this.fov=n.fov,this.zoom=n.zoom,this.near=n.near,this.far=n.far,this.focus=n.focus,this.aspect=n.aspect,this.view=n.view===null?null:Object.assign({},n.view),this.filmGauge=n.filmGauge,this.filmOffset=n.filmOffset,this}setFocalLength(n){const s=.5*this.getFilmHeight()/n;this.fov=RAD2DEG*2*Math.atan(s),this.updateProjectionMatrix()}getFocalLength(){const n=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/n}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(n,s,f){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),s.set(_v3$1.x,_v3$1.y).multiplyScalar(-n/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),f.set(_v3$1.x,_v3$1.y).multiplyScalar(-n/_v3$1.z)}getViewSize(n,s){return this.getViewBounds(n,_minTarget,_maxTarget),s.subVectors(_maxTarget,_minTarget)}setViewOffset(n,s,f,d,y,_){this.aspect=n/s,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=s,this.view.offsetX=f,this.view.offsetY=d,this.view.width=y,this.view.height=_,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=this.near;let s=n*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,f=2*s,d=this.aspect*f,y=-.5*d;const _=this.view;if(this.view!==null&&this.view.enabled){const R=_.fullWidth,I=_.fullHeight;y+=_.offsetX*d/R,s-=_.offsetY*f/I,d*=_.width/R,f*=_.height/I}const A=this.filmOffset;A!==0&&(y+=n*A/this.getFilmWidth()),this.projectionMatrix.makePerspective(y,y+d,s,s-f,n,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const s=super.toJSON(n);return s.object.fov=this.fov,s.object.zoom=this.zoom,s.object.near=this.near,s.object.far=this.far,s.object.focus=this.focus,s.object.aspect=this.aspect,this.view!==null&&(s.object.view=Object.assign({},this.view)),s.object.filmGauge=this.filmGauge,s.object.filmOffset=this.filmOffset,s}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(n){const s=this.camera,f=RAD2DEG*2*n.angle*this.focus,d=this.mapSize.width/this.mapSize.height*this.aspect,y=n.distance||s.far;(f!==s.fov||d!==s.aspect||y!==s.far)&&(s.fov=f,s.aspect=d,s.far=y,s.updateProjectionMatrix()),super.updateMatrices(n)}copy(n){return super.copy(n),this.focus=n.focus,this}}class SpotLight extends Light{constructor(n,s,f=0,d=Math.PI/3,y=0,_=2){super(n,s),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=f,this.angle=d,this.penumbra=y,this.decay=_,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(n){this.intensity=n/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(n,s){return super.copy(n,s),this.distance=n.distance,this.angle=n.angle,this.penumbra=n.penumbra,this.decay=n.decay,this.target=n.target.clone(),this.map=n.map,this.shadow=n.shadow.clone(),this}toJSON(n){const s=super.toJSON(n);return s.object.distance=this.distance,s.object.angle=this.angle,s.object.decay=this.decay,s.object.penumbra=this.penumbra,s.object.target=this.target.uuid,this.map&&this.map.isTexture&&(s.object.map=this.map.toJSON(n).uuid),s.object.shadow=this.shadow.toJSON(),s}}class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0}}class PointLight extends Light{constructor(n,s,f=0,d=2){super(n,s),this.isPointLight=!0,this.type="PointLight",this.distance=f,this.decay=d,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(n){this.intensity=n/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(n,s){return super.copy(n,s),this.distance=n.distance,this.decay=n.decay,this.shadow=n.shadow.clone(),this}toJSON(n){const s=super.toJSON(n);return s.object.distance=this.distance,s.object.decay=this.decay,s.object.shadow=this.shadow.toJSON(),s}}class OrthographicCamera extends Camera{constructor(n=-1,s=1,f=1,d=-1,y=.1,_=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=n,this.right=s,this.top=f,this.bottom=d,this.near=y,this.far=_,this.updateProjectionMatrix()}copy(n,s){return super.copy(n,s),this.left=n.left,this.right=n.right,this.top=n.top,this.bottom=n.bottom,this.near=n.near,this.far=n.far,this.zoom=n.zoom,this.view=n.view===null?null:Object.assign({},n.view),this}setViewOffset(n,s,f,d,y,_){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=s,this.view.offsetX=f,this.view.offsetY=d,this.view.width=y,this.view.height=_,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=(this.right-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),f=(this.right+this.left)/2,d=(this.top+this.bottom)/2;let y=f-n,_=f+n,A=d+s,R=d-s;if(this.view!==null&&this.view.enabled){const I=(this.right-this.left)/this.view.fullWidth/this.zoom,G=(this.top-this.bottom)/this.view.fullHeight/this.zoom;y+=I*this.view.offsetX,_=y+I*this.view.width,A-=G*this.view.offsetY,R=A-G*this.view.height}this.projectionMatrix.makeOrthographic(y,_,A,R,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const s=super.toJSON(n);return s.object.zoom=this.zoom,s.object.left=this.left,s.object.right=this.right,s.object.top=this.top,s.object.bottom=this.bottom,s.object.near=this.near,s.object.far=this.far,this.view!==null&&(s.object.view=Object.assign({},this.view)),s}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(n,s){super(n,s),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){super.dispose(),this.shadow.dispose()}copy(n){return super.copy(n),this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}toJSON(n){const s=super.toJSON(n);return s.object.shadow=this.shadow.toJSON(),s.object.target=this.target.uuid,s}}class AmbientLight extends Light{constructor(n,s){super(n,s),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(n,s,f=10,d=10){super(n,s),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=f,this.height=d}get power(){return this.intensity*this.width*this.height*Math.PI}set power(n){this.intensity=n/(this.width*this.height*Math.PI)}copy(n){return super.copy(n),this.width=n.width,this.height=n.height,this}toJSON(n){const s=super.toJSON(n);return s.object.width=this.width,s.object.height=this.height,s}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let n=0;n<9;n++)this.coefficients.push(new Vector3)}set(n){for(let s=0;s<9;s++)this.coefficients[s].copy(n[s]);return this}zero(){for(let n=0;n<9;n++)this.coefficients[n].set(0,0,0);return this}getAt(n,s){const f=n.x,d=n.y,y=n.z,_=this.coefficients;return s.copy(_[0]).multiplyScalar(.282095),s.addScaledVector(_[1],.488603*d),s.addScaledVector(_[2],.488603*y),s.addScaledVector(_[3],.488603*f),s.addScaledVector(_[4],1.092548*(f*d)),s.addScaledVector(_[5],1.092548*(d*y)),s.addScaledVector(_[6],.315392*(3*y*y-1)),s.addScaledVector(_[7],1.092548*(f*y)),s.addScaledVector(_[8],.546274*(f*f-d*d)),s}getIrradianceAt(n,s){const f=n.x,d=n.y,y=n.z,_=this.coefficients;return s.copy(_[0]).multiplyScalar(.886227),s.addScaledVector(_[1],2*.511664*d),s.addScaledVector(_[2],2*.511664*y),s.addScaledVector(_[3],2*.511664*f),s.addScaledVector(_[4],2*.429043*f*d),s.addScaledVector(_[5],2*.429043*d*y),s.addScaledVector(_[6],.743125*y*y-.247708),s.addScaledVector(_[7],2*.429043*f*y),s.addScaledVector(_[8],.429043*(f*f-d*d)),s}add(n){for(let s=0;s<9;s++)this.coefficients[s].add(n.coefficients[s]);return this}addScaledSH(n,s){for(let f=0;f<9;f++)this.coefficients[f].addScaledVector(n.coefficients[f],s);return this}scale(n){for(let s=0;s<9;s++)this.coefficients[s].multiplyScalar(n);return this}lerp(n,s){for(let f=0;f<9;f++)this.coefficients[f].lerp(n.coefficients[f],s);return this}equals(n){for(let s=0;s<9;s++)if(!this.coefficients[s].equals(n.coefficients[s]))return!1;return!0}copy(n){return this.set(n.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(n,s=0){const f=this.coefficients;for(let d=0;d<9;d++)f[d].fromArray(n,s+d*3);return this}toArray(n=[],s=0){const f=this.coefficients;for(let d=0;d<9;d++)f[d].toArray(n,s+d*3);return n}static getBasisAt(n,s){const f=n.x,d=n.y,y=n.z;s[0]=.282095,s[1]=.488603*d,s[2]=.488603*y,s[3]=.488603*f,s[4]=1.092548*f*d,s[5]=1.092548*d*y,s[6]=.315392*(3*y*y-1),s[7]=1.092548*f*y,s[8]=.546274*(f*f-d*d)}}class LightProbe extends Light{constructor(n=new SphericalHarmonics3,s=1){super(void 0,s),this.isLightProbe=!0,this.sh=n}copy(n){return super.copy(n),this.sh.copy(n.sh),this}toJSON(n){const s=super.toJSON(n);return s.object.sh=this.sh.toArray(),s}}class MaterialLoader extends Loader{constructor(n){super(n),this.textures={}}load(n,s,f,d){const y=this,_=new FileLoader(y.manager);_.setPath(y.path),_.setRequestHeader(y.requestHeader),_.setWithCredentials(y.withCredentials),_.load(n,function(A){try{s(y.parse(JSON.parse(A)))}catch(R){d?d(R):error(R),y.manager.itemError(n)}},f,d)}parse(n){const s=this.textures;function f(y){return s[y]===void 0&&warn("MaterialLoader: Undefined texture",y),s[y]}const d=this.createMaterialFromType(n.type);if(n.uuid!==void 0&&(d.uuid=n.uuid),n.name!==void 0&&(d.name=n.name),n.color!==void 0&&d.color!==void 0&&d.color.setHex(n.color),n.roughness!==void 0&&(d.roughness=n.roughness),n.metalness!==void 0&&(d.metalness=n.metalness),n.sheen!==void 0&&(d.sheen=n.sheen),n.sheenColor!==void 0&&(d.sheenColor=new Color().setHex(n.sheenColor)),n.sheenRoughness!==void 0&&(d.sheenRoughness=n.sheenRoughness),n.emissive!==void 0&&d.emissive!==void 0&&d.emissive.setHex(n.emissive),n.specular!==void 0&&d.specular!==void 0&&d.specular.setHex(n.specular),n.specularIntensity!==void 0&&(d.specularIntensity=n.specularIntensity),n.specularColor!==void 0&&d.specularColor!==void 0&&d.specularColor.setHex(n.specularColor),n.shininess!==void 0&&(d.shininess=n.shininess),n.clearcoat!==void 0&&(d.clearcoat=n.clearcoat),n.clearcoatRoughness!==void 0&&(d.clearcoatRoughness=n.clearcoatRoughness),n.dispersion!==void 0&&(d.dispersion=n.dispersion),n.iridescence!==void 0&&(d.iridescence=n.iridescence),n.iridescenceIOR!==void 0&&(d.iridescenceIOR=n.iridescenceIOR),n.iridescenceThicknessRange!==void 0&&(d.iridescenceThicknessRange=n.iridescenceThicknessRange),n.transmission!==void 0&&(d.transmission=n.transmission),n.thickness!==void 0&&(d.thickness=n.thickness),n.attenuationDistance!==void 0&&(d.attenuationDistance=n.attenuationDistance),n.attenuationColor!==void 0&&d.attenuationColor!==void 0&&d.attenuationColor.setHex(n.attenuationColor),n.anisotropy!==void 0&&(d.anisotropy=n.anisotropy),n.anisotropyRotation!==void 0&&(d.anisotropyRotation=n.anisotropyRotation),n.fog!==void 0&&(d.fog=n.fog),n.flatShading!==void 0&&(d.flatShading=n.flatShading),n.blending!==void 0&&(d.blending=n.blending),n.combine!==void 0&&(d.combine=n.combine),n.side!==void 0&&(d.side=n.side),n.shadowSide!==void 0&&(d.shadowSide=n.shadowSide),n.opacity!==void 0&&(d.opacity=n.opacity),n.transparent!==void 0&&(d.transparent=n.transparent),n.alphaTest!==void 0&&(d.alphaTest=n.alphaTest),n.alphaHash!==void 0&&(d.alphaHash=n.alphaHash),n.depthFunc!==void 0&&(d.depthFunc=n.depthFunc),n.depthTest!==void 0&&(d.depthTest=n.depthTest),n.depthWrite!==void 0&&(d.depthWrite=n.depthWrite),n.colorWrite!==void 0&&(d.colorWrite=n.colorWrite),n.blendSrc!==void 0&&(d.blendSrc=n.blendSrc),n.blendDst!==void 0&&(d.blendDst=n.blendDst),n.blendEquation!==void 0&&(d.blendEquation=n.blendEquation),n.blendSrcAlpha!==void 0&&(d.blendSrcAlpha=n.blendSrcAlpha),n.blendDstAlpha!==void 0&&(d.blendDstAlpha=n.blendDstAlpha),n.blendEquationAlpha!==void 0&&(d.blendEquationAlpha=n.blendEquationAlpha),n.blendColor!==void 0&&d.blendColor!==void 0&&d.blendColor.setHex(n.blendColor),n.blendAlpha!==void 0&&(d.blendAlpha=n.blendAlpha),n.stencilWriteMask!==void 0&&(d.stencilWriteMask=n.stencilWriteMask),n.stencilFunc!==void 0&&(d.stencilFunc=n.stencilFunc),n.stencilRef!==void 0&&(d.stencilRef=n.stencilRef),n.stencilFuncMask!==void 0&&(d.stencilFuncMask=n.stencilFuncMask),n.stencilFail!==void 0&&(d.stencilFail=n.stencilFail),n.stencilZFail!==void 0&&(d.stencilZFail=n.stencilZFail),n.stencilZPass!==void 0&&(d.stencilZPass=n.stencilZPass),n.stencilWrite!==void 0&&(d.stencilWrite=n.stencilWrite),n.wireframe!==void 0&&(d.wireframe=n.wireframe),n.wireframeLinewidth!==void 0&&(d.wireframeLinewidth=n.wireframeLinewidth),n.wireframeLinecap!==void 0&&(d.wireframeLinecap=n.wireframeLinecap),n.wireframeLinejoin!==void 0&&(d.wireframeLinejoin=n.wireframeLinejoin),n.rotation!==void 0&&(d.rotation=n.rotation),n.linewidth!==void 0&&(d.linewidth=n.linewidth),n.dashSize!==void 0&&(d.dashSize=n.dashSize),n.gapSize!==void 0&&(d.gapSize=n.gapSize),n.scale!==void 0&&(d.scale=n.scale),n.polygonOffset!==void 0&&(d.polygonOffset=n.polygonOffset),n.polygonOffsetFactor!==void 0&&(d.polygonOffsetFactor=n.polygonOffsetFactor),n.polygonOffsetUnits!==void 0&&(d.polygonOffsetUnits=n.polygonOffsetUnits),n.dithering!==void 0&&(d.dithering=n.dithering),n.alphaToCoverage!==void 0&&(d.alphaToCoverage=n.alphaToCoverage),n.premultipliedAlpha!==void 0&&(d.premultipliedAlpha=n.premultipliedAlpha),n.forceSinglePass!==void 0&&(d.forceSinglePass=n.forceSinglePass),n.allowOverride!==void 0&&(d.allowOverride=n.allowOverride),n.visible!==void 0&&(d.visible=n.visible),n.toneMapped!==void 0&&(d.toneMapped=n.toneMapped),n.userData!==void 0&&(d.userData=n.userData),n.vertexColors!==void 0&&(typeof n.vertexColors=="number"?d.vertexColors=n.vertexColors>0:d.vertexColors=n.vertexColors),n.uniforms!==void 0)for(const y in n.uniforms){const _=n.uniforms[y];switch(d.uniforms[y]={},_.type){case"t":d.uniforms[y].value=f(_.value);break;case"c":d.uniforms[y].value=new Color().setHex(_.value);break;case"v2":d.uniforms[y].value=new Vector2().fromArray(_.value);break;case"v3":d.uniforms[y].value=new Vector3().fromArray(_.value);break;case"v4":d.uniforms[y].value=new Vector4().fromArray(_.value);break;case"m3":d.uniforms[y].value=new Matrix3().fromArray(_.value);break;case"m4":d.uniforms[y].value=new Matrix4().fromArray(_.value);break;default:d.uniforms[y].value=_.value}}if(n.defines!==void 0&&(d.defines=n.defines),n.vertexShader!==void 0&&(d.vertexShader=n.vertexShader),n.fragmentShader!==void 0&&(d.fragmentShader=n.fragmentShader),n.glslVersion!==void 0&&(d.glslVersion=n.glslVersion),n.extensions!==void 0)for(const y in n.extensions)d.extensions[y]=n.extensions[y];if(n.lights!==void 0&&(d.lights=n.lights),n.clipping!==void 0&&(d.clipping=n.clipping),n.size!==void 0&&(d.size=n.size),n.sizeAttenuation!==void 0&&(d.sizeAttenuation=n.sizeAttenuation),n.map!==void 0&&(d.map=f(n.map)),n.matcap!==void 0&&(d.matcap=f(n.matcap)),n.alphaMap!==void 0&&(d.alphaMap=f(n.alphaMap)),n.bumpMap!==void 0&&(d.bumpMap=f(n.bumpMap)),n.bumpScale!==void 0&&(d.bumpScale=n.bumpScale),n.normalMap!==void 0&&(d.normalMap=f(n.normalMap)),n.normalMapType!==void 0&&(d.normalMapType=n.normalMapType),n.normalScale!==void 0){let y=n.normalScale;Array.isArray(y)===!1&&(y=[y,y]),d.normalScale=new Vector2().fromArray(y)}return n.displacementMap!==void 0&&(d.displacementMap=f(n.displacementMap)),n.displacementScale!==void 0&&(d.displacementScale=n.displacementScale),n.displacementBias!==void 0&&(d.displacementBias=n.displacementBias),n.roughnessMap!==void 0&&(d.roughnessMap=f(n.roughnessMap)),n.metalnessMap!==void 0&&(d.metalnessMap=f(n.metalnessMap)),n.emissiveMap!==void 0&&(d.emissiveMap=f(n.emissiveMap)),n.emissiveIntensity!==void 0&&(d.emissiveIntensity=n.emissiveIntensity),n.specularMap!==void 0&&(d.specularMap=f(n.specularMap)),n.specularIntensityMap!==void 0&&(d.specularIntensityMap=f(n.specularIntensityMap)),n.specularColorMap!==void 0&&(d.specularColorMap=f(n.specularColorMap)),n.envMap!==void 0&&(d.envMap=f(n.envMap)),n.envMapRotation!==void 0&&d.envMapRotation.fromArray(n.envMapRotation),n.envMapIntensity!==void 0&&(d.envMapIntensity=n.envMapIntensity),n.reflectivity!==void 0&&(d.reflectivity=n.reflectivity),n.refractionRatio!==void 0&&(d.refractionRatio=n.refractionRatio),n.lightMap!==void 0&&(d.lightMap=f(n.lightMap)),n.lightMapIntensity!==void 0&&(d.lightMapIntensity=n.lightMapIntensity),n.aoMap!==void 0&&(d.aoMap=f(n.aoMap)),n.aoMapIntensity!==void 0&&(d.aoMapIntensity=n.aoMapIntensity),n.gradientMap!==void 0&&(d.gradientMap=f(n.gradientMap)),n.clearcoatMap!==void 0&&(d.clearcoatMap=f(n.clearcoatMap)),n.clearcoatRoughnessMap!==void 0&&(d.clearcoatRoughnessMap=f(n.clearcoatRoughnessMap)),n.clearcoatNormalMap!==void 0&&(d.clearcoatNormalMap=f(n.clearcoatNormalMap)),n.clearcoatNormalScale!==void 0&&(d.clearcoatNormalScale=new Vector2().fromArray(n.clearcoatNormalScale)),n.iridescenceMap!==void 0&&(d.iridescenceMap=f(n.iridescenceMap)),n.iridescenceThicknessMap!==void 0&&(d.iridescenceThicknessMap=f(n.iridescenceThicknessMap)),n.transmissionMap!==void 0&&(d.transmissionMap=f(n.transmissionMap)),n.thicknessMap!==void 0&&(d.thicknessMap=f(n.thicknessMap)),n.anisotropyMap!==void 0&&(d.anisotropyMap=f(n.anisotropyMap)),n.sheenColorMap!==void 0&&(d.sheenColorMap=f(n.sheenColorMap)),n.sheenRoughnessMap!==void 0&&(d.sheenRoughnessMap=f(n.sheenRoughnessMap)),d}setTextures(n){return this.textures=n,this}createMaterialFromType(n){return MaterialLoader.createMaterialFromType(n)}static createMaterialFromType(n){const s={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new s[n]}}class LoaderUtils{static extractUrlBase(n){const s=n.lastIndexOf("/");return s===-1?"./":n.slice(0,s+1)}static resolveURL(n,s){return typeof n!="string"||n===""?"":(/^https?:\/\//i.test(s)&&/^\//.test(n)&&(s=s.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(n)||/^data:.*,.*$/i.test(n)||/^blob:.*$/i.test(n)?n:s+n)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(n){return super.copy(n),this.instanceCount=n.instanceCount,this}toJSON(){const n=super.toJSON();return n.instanceCount=this.instanceCount,n.isInstancedBufferGeometry=!0,n}}class BufferGeometryLoader extends Loader{constructor(n){super(n)}load(n,s,f,d){const y=this,_=new FileLoader(y.manager);_.setPath(y.path),_.setRequestHeader(y.requestHeader),_.setWithCredentials(y.withCredentials),_.load(n,function(A){try{s(y.parse(JSON.parse(A)))}catch(R){d?d(R):error(R),y.manager.itemError(n)}},f,d)}parse(n){const s={},f={};function d(K,Q){if(s[Q]!==void 0)return s[Q];const te=K.interleavedBuffers[Q],J=y(K,te.buffer),ie=getTypedArray(te.type,J),re=new InterleavedBuffer(ie,te.stride);return re.uuid=te.uuid,s[Q]=re,re}function y(K,Q){if(f[Q]!==void 0)return f[Q];const te=K.arrayBuffers[Q],J=new Uint32Array(te).buffer;return f[Q]=J,J}const _=n.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,A=n.data.index;if(A!==void 0){const K=getTypedArray(A.type,A.array);_.setIndex(new BufferAttribute(K,1))}const R=n.data.attributes;for(const K in R){const Q=R[K];let ne;if(Q.isInterleavedBufferAttribute){const te=d(n.data,Q.data);ne=new InterleavedBufferAttribute(te,Q.itemSize,Q.offset,Q.normalized)}else{const te=getTypedArray(Q.type,Q.array),J=Q.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;ne=new J(te,Q.itemSize,Q.normalized)}Q.name!==void 0&&(ne.name=Q.name),Q.usage!==void 0&&ne.setUsage(Q.usage),_.setAttribute(K,ne)}const I=n.data.morphAttributes;if(I)for(const K in I){const Q=I[K],ne=[];for(let te=0,J=Q.length;te<J;te++){const ie=Q[te];let re;if(ie.isInterleavedBufferAttribute){const le=d(n.data,ie.data);re=new InterleavedBufferAttribute(le,ie.itemSize,ie.offset,ie.normalized)}else{const le=getTypedArray(ie.type,ie.array);re=new BufferAttribute(le,ie.itemSize,ie.normalized)}ie.name!==void 0&&(re.name=ie.name),ne.push(re)}_.morphAttributes[K]=ne}n.data.morphTargetsRelative&&(_.morphTargetsRelative=!0);const Y=n.data.groups||n.data.drawcalls||n.data.offsets;if(Y!==void 0)for(let K=0,Q=Y.length;K!==Q;++K){const ne=Y[K];_.addGroup(ne.start,ne.count,ne.materialIndex)}const q=n.data.boundingSphere;return q!==void 0&&(_.boundingSphere=new Sphere().fromJSON(q)),n.name&&(_.name=n.name),n.userData&&(_.userData=n.userData),_}}class ObjectLoader extends Loader{constructor(n){super(n)}load(n,s,f,d){const y=this,_=this.path===""?LoaderUtils.extractUrlBase(n):this.path;this.resourcePath=this.resourcePath||_;const A=new FileLoader(this.manager);A.setPath(this.path),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(n,function(R){let I=null;try{I=JSON.parse(R)}catch(Y){d!==void 0&&d(Y),Y("ObjectLoader: Can't parse "+n+".",Y.message);return}const G=I.metadata;if(G===void 0||G.type===void 0||G.type.toLowerCase()==="geometry"){d!==void 0&&d(new Error("THREE.ObjectLoader: Can't load "+n)),error("ObjectLoader: Can't load "+n);return}y.parse(I,s)},f,d)}async loadAsync(n,s){const f=this,d=this.path===""?LoaderUtils.extractUrlBase(n):this.path;this.resourcePath=this.resourcePath||d;const y=new FileLoader(this.manager);y.setPath(this.path),y.setRequestHeader(this.requestHeader),y.setWithCredentials(this.withCredentials);const _=await y.loadAsync(n,s);let A;try{A=JSON.parse(_)}catch(I){throw new Error("ObjectLoader: Can't parse "+n+". "+I.message)}const R=A.metadata;if(R===void 0||R.type===void 0||R.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+n);return await f.parseAsync(A)}parse(n,s){const f=this.parseAnimations(n.animations),d=this.parseShapes(n.shapes),y=this.parseGeometries(n.geometries,d),_=this.parseImages(n.images,function(){s!==void 0&&s(I)}),A=this.parseTextures(n.textures,_),R=this.parseMaterials(n.materials,A),I=this.parseObject(n.object,y,R,A,f),G=this.parseSkeletons(n.skeletons,I);if(this.bindSkeletons(I,G),this.bindLightTargets(I),s!==void 0){let Y=!1;for(const q in _)if(_[q].data instanceof HTMLImageElement){Y=!0;break}Y===!1&&s(I)}return I}async parseAsync(n){const s=this.parseAnimations(n.animations),f=this.parseShapes(n.shapes),d=this.parseGeometries(n.geometries,f),y=await this.parseImagesAsync(n.images),_=this.parseTextures(n.textures,y),A=this.parseMaterials(n.materials,_),R=this.parseObject(n.object,d,A,_,s),I=this.parseSkeletons(n.skeletons,R);return this.bindSkeletons(R,I),this.bindLightTargets(R),R}parseShapes(n){const s={};if(n!==void 0)for(let f=0,d=n.length;f<d;f++){const y=new Shape().fromJSON(n[f]);s[y.uuid]=y}return s}parseSkeletons(n,s){const f={},d={};if(s.traverse(function(y){y.isBone&&(d[y.uuid]=y)}),n!==void 0)for(let y=0,_=n.length;y<_;y++){const A=new Skeleton().fromJSON(n[y],d);f[A.uuid]=A}return f}parseGeometries(n,s){const f={};if(n!==void 0){const d=new BufferGeometryLoader;for(let y=0,_=n.length;y<_;y++){let A;const R=n[y];switch(R.type){case"BufferGeometry":case"InstancedBufferGeometry":A=d.parse(R);break;default:R.type in Geometries?A=Geometries[R.type].fromJSON(R,s):warn(`ObjectLoader: Unsupported geometry type "${R.type}"`)}A.uuid=R.uuid,R.name!==void 0&&(A.name=R.name),R.userData!==void 0&&(A.userData=R.userData),f[R.uuid]=A}}return f}parseMaterials(n,s){const f={},d={};if(n!==void 0){const y=new MaterialLoader;y.setTextures(s);for(let _=0,A=n.length;_<A;_++){const R=n[_];f[R.uuid]===void 0&&(f[R.uuid]=y.parse(R)),d[R.uuid]=f[R.uuid]}}return d}parseAnimations(n){const s={};if(n!==void 0)for(let f=0;f<n.length;f++){const d=n[f],y=AnimationClip.parse(d);s[y.uuid]=y}return s}parseImages(n,s){const f=this,d={};let y;function _(R){return f.manager.itemStart(R),y.load(R,function(){f.manager.itemEnd(R)},void 0,function(){f.manager.itemError(R),f.manager.itemEnd(R)})}function A(R){if(typeof R=="string"){const I=R,G=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(I)?I:f.resourcePath+I;return _(G)}else return R.data?{data:getTypedArray(R.type,R.data),width:R.width,height:R.height}:null}if(n!==void 0&&n.length>0){const R=new LoadingManager(s);y=new ImageLoader(R),y.setCrossOrigin(this.crossOrigin);for(let I=0,G=n.length;I<G;I++){const Y=n[I],q=Y.url;if(Array.isArray(q)){const K=[];for(let Q=0,ne=q.length;Q<ne;Q++){const te=q[Q],J=A(te);J!==null&&(J instanceof HTMLImageElement?K.push(J):K.push(new DataTexture(J.data,J.width,J.height)))}d[Y.uuid]=new Source(K)}else{const K=A(Y.url);d[Y.uuid]=new Source(K)}}}return d}async parseImagesAsync(n){const s=this,f={};let d;async function y(_){if(typeof _=="string"){const A=_,R=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(A)?A:s.resourcePath+A;return await d.loadAsync(R)}else return _.data?{data:getTypedArray(_.type,_.data),width:_.width,height:_.height}:null}if(n!==void 0&&n.length>0){d=new ImageLoader(this.manager),d.setCrossOrigin(this.crossOrigin);for(let _=0,A=n.length;_<A;_++){const R=n[_],I=R.url;if(Array.isArray(I)){const G=[];for(let Y=0,q=I.length;Y<q;Y++){const K=I[Y],Q=await y(K);Q!==null&&(Q instanceof HTMLImageElement?G.push(Q):G.push(new DataTexture(Q.data,Q.width,Q.height)))}f[R.uuid]=new Source(G)}else{const G=await y(R.url);f[R.uuid]=new Source(G)}}}return f}parseTextures(n,s){function f(y,_){return typeof y=="number"?y:(warn("ObjectLoader.parseTexture: Constant should be in numeric form.",y),_[y])}const d={};if(n!==void 0)for(let y=0,_=n.length;y<_;y++){const A=n[y];A.image===void 0&&warn('ObjectLoader: No "image" specified for',A.uuid),s[A.image]===void 0&&warn("ObjectLoader: Undefined image",A.image);const R=s[A.image],I=R.data;let G;Array.isArray(I)?(G=new CubeTexture,I.length===6&&(G.needsUpdate=!0)):(I&&I.data?G=new DataTexture:G=new Texture,I&&(G.needsUpdate=!0)),G.source=R,G.uuid=A.uuid,A.name!==void 0&&(G.name=A.name),A.mapping!==void 0&&(G.mapping=f(A.mapping,TEXTURE_MAPPING)),A.channel!==void 0&&(G.channel=A.channel),A.offset!==void 0&&G.offset.fromArray(A.offset),A.repeat!==void 0&&G.repeat.fromArray(A.repeat),A.center!==void 0&&G.center.fromArray(A.center),A.rotation!==void 0&&(G.rotation=A.rotation),A.wrap!==void 0&&(G.wrapS=f(A.wrap[0],TEXTURE_WRAPPING),G.wrapT=f(A.wrap[1],TEXTURE_WRAPPING)),A.format!==void 0&&(G.format=A.format),A.internalFormat!==void 0&&(G.internalFormat=A.internalFormat),A.type!==void 0&&(G.type=A.type),A.colorSpace!==void 0&&(G.colorSpace=A.colorSpace),A.minFilter!==void 0&&(G.minFilter=f(A.minFilter,TEXTURE_FILTER)),A.magFilter!==void 0&&(G.magFilter=f(A.magFilter,TEXTURE_FILTER)),A.anisotropy!==void 0&&(G.anisotropy=A.anisotropy),A.flipY!==void 0&&(G.flipY=A.flipY),A.generateMipmaps!==void 0&&(G.generateMipmaps=A.generateMipmaps),A.premultiplyAlpha!==void 0&&(G.premultiplyAlpha=A.premultiplyAlpha),A.unpackAlignment!==void 0&&(G.unpackAlignment=A.unpackAlignment),A.compareFunction!==void 0&&(G.compareFunction=A.compareFunction),A.userData!==void 0&&(G.userData=A.userData),d[A.uuid]=G}return d}parseObject(n,s,f,d,y){let _;function A(q){return s[q]===void 0&&warn("ObjectLoader: Undefined geometry",q),s[q]}function R(q){if(q!==void 0){if(Array.isArray(q)){const K=[];for(let Q=0,ne=q.length;Q<ne;Q++){const te=q[Q];f[te]===void 0&&warn("ObjectLoader: Undefined material",te),K.push(f[te])}return K}return f[q]===void 0&&warn("ObjectLoader: Undefined material",q),f[q]}}function I(q){return d[q]===void 0&&warn("ObjectLoader: Undefined texture",q),d[q]}let G,Y;switch(n.type){case"Scene":_=new Scene,n.background!==void 0&&(Number.isInteger(n.background)?_.background=new Color(n.background):_.background=I(n.background)),n.environment!==void 0&&(_.environment=I(n.environment)),n.fog!==void 0&&(n.fog.type==="Fog"?_.fog=new Fog(n.fog.color,n.fog.near,n.fog.far):n.fog.type==="FogExp2"&&(_.fog=new FogExp2(n.fog.color,n.fog.density)),n.fog.name!==""&&(_.fog.name=n.fog.name)),n.backgroundBlurriness!==void 0&&(_.backgroundBlurriness=n.backgroundBlurriness),n.backgroundIntensity!==void 0&&(_.backgroundIntensity=n.backgroundIntensity),n.backgroundRotation!==void 0&&_.backgroundRotation.fromArray(n.backgroundRotation),n.environmentIntensity!==void 0&&(_.environmentIntensity=n.environmentIntensity),n.environmentRotation!==void 0&&_.environmentRotation.fromArray(n.environmentRotation);break;case"PerspectiveCamera":_=new PerspectiveCamera(n.fov,n.aspect,n.near,n.far),n.focus!==void 0&&(_.focus=n.focus),n.zoom!==void 0&&(_.zoom=n.zoom),n.filmGauge!==void 0&&(_.filmGauge=n.filmGauge),n.filmOffset!==void 0&&(_.filmOffset=n.filmOffset),n.view!==void 0&&(_.view=Object.assign({},n.view));break;case"OrthographicCamera":_=new OrthographicCamera(n.left,n.right,n.top,n.bottom,n.near,n.far),n.zoom!==void 0&&(_.zoom=n.zoom),n.view!==void 0&&(_.view=Object.assign({},n.view));break;case"AmbientLight":_=new AmbientLight(n.color,n.intensity);break;case"DirectionalLight":_=new DirectionalLight(n.color,n.intensity),_.target=n.target||"";break;case"PointLight":_=new PointLight(n.color,n.intensity,n.distance,n.decay);break;case"RectAreaLight":_=new RectAreaLight(n.color,n.intensity,n.width,n.height);break;case"SpotLight":_=new SpotLight(n.color,n.intensity,n.distance,n.angle,n.penumbra,n.decay),_.target=n.target||"";break;case"HemisphereLight":_=new HemisphereLight(n.color,n.groundColor,n.intensity);break;case"LightProbe":const q=new SphericalHarmonics3().fromArray(n.sh);_=new LightProbe(q,n.intensity);break;case"SkinnedMesh":G=A(n.geometry),Y=R(n.material),_=new SkinnedMesh(G,Y),n.bindMode!==void 0&&(_.bindMode=n.bindMode),n.bindMatrix!==void 0&&_.bindMatrix.fromArray(n.bindMatrix),n.skeleton!==void 0&&(_.skeleton=n.skeleton);break;case"Mesh":G=A(n.geometry),Y=R(n.material),_=new Mesh(G,Y);break;case"InstancedMesh":G=A(n.geometry),Y=R(n.material);const K=n.count,Q=n.instanceMatrix,ne=n.instanceColor;_=new InstancedMesh(G,Y,K),_.instanceMatrix=new InstancedBufferAttribute(new Float32Array(Q.array),16),ne!==void 0&&(_.instanceColor=new InstancedBufferAttribute(new Float32Array(ne.array),ne.itemSize));break;case"BatchedMesh":G=A(n.geometry),Y=R(n.material),_=new BatchedMesh(n.maxInstanceCount,n.maxVertexCount,n.maxIndexCount,Y),_.geometry=G,_.perObjectFrustumCulled=n.perObjectFrustumCulled,_.sortObjects=n.sortObjects,_._drawRanges=n.drawRanges,_._reservedRanges=n.reservedRanges,_._geometryInfo=n.geometryInfo.map(te=>{let J=null,ie=null;return te.boundingBox!==void 0&&(J=new Box3().fromJSON(te.boundingBox)),te.boundingSphere!==void 0&&(ie=new Sphere().fromJSON(te.boundingSphere)),{...te,boundingBox:J,boundingSphere:ie}}),_._instanceInfo=n.instanceInfo,_._availableInstanceIds=n._availableInstanceIds,_._availableGeometryIds=n._availableGeometryIds,_._nextIndexStart=n.nextIndexStart,_._nextVertexStart=n.nextVertexStart,_._geometryCount=n.geometryCount,_._maxInstanceCount=n.maxInstanceCount,_._maxVertexCount=n.maxVertexCount,_._maxIndexCount=n.maxIndexCount,_._geometryInitialized=n.geometryInitialized,_._matricesTexture=I(n.matricesTexture.uuid),_._indirectTexture=I(n.indirectTexture.uuid),n.colorsTexture!==void 0&&(_._colorsTexture=I(n.colorsTexture.uuid)),n.boundingSphere!==void 0&&(_.boundingSphere=new Sphere().fromJSON(n.boundingSphere)),n.boundingBox!==void 0&&(_.boundingBox=new Box3().fromJSON(n.boundingBox));break;case"LOD":_=new LOD;break;case"Line":_=new Line(A(n.geometry),R(n.material));break;case"LineLoop":_=new LineLoop(A(n.geometry),R(n.material));break;case"LineSegments":_=new LineSegments(A(n.geometry),R(n.material));break;case"PointCloud":case"Points":_=new Points(A(n.geometry),R(n.material));break;case"Sprite":_=new Sprite(R(n.material));break;case"Group":_=new Group;break;case"Bone":_=new Bone;break;default:_=new Object3D}if(_.uuid=n.uuid,n.name!==void 0&&(_.name=n.name),n.matrix!==void 0?(_.matrix.fromArray(n.matrix),n.matrixAutoUpdate!==void 0&&(_.matrixAutoUpdate=n.matrixAutoUpdate),_.matrixAutoUpdate&&_.matrix.decompose(_.position,_.quaternion,_.scale)):(n.position!==void 0&&_.position.fromArray(n.position),n.rotation!==void 0&&_.rotation.fromArray(n.rotation),n.quaternion!==void 0&&_.quaternion.fromArray(n.quaternion),n.scale!==void 0&&_.scale.fromArray(n.scale)),n.up!==void 0&&_.up.fromArray(n.up),n.pivot!==void 0&&(_.pivot=new Vector3().fromArray(n.pivot)),n.morphTargetDictionary!==void 0&&(_.morphTargetDictionary=Object.assign({},n.morphTargetDictionary)),n.morphTargetInfluences!==void 0&&(_.morphTargetInfluences=n.morphTargetInfluences.slice()),n.castShadow!==void 0&&(_.castShadow=n.castShadow),n.receiveShadow!==void 0&&(_.receiveShadow=n.receiveShadow),n.shadow&&(n.shadow.intensity!==void 0&&(_.shadow.intensity=n.shadow.intensity),n.shadow.bias!==void 0&&(_.shadow.bias=n.shadow.bias),n.shadow.normalBias!==void 0&&(_.shadow.normalBias=n.shadow.normalBias),n.shadow.radius!==void 0&&(_.shadow.radius=n.shadow.radius),n.shadow.mapSize!==void 0&&_.shadow.mapSize.fromArray(n.shadow.mapSize),n.shadow.camera!==void 0&&(_.shadow.camera=this.parseObject(n.shadow.camera))),n.visible!==void 0&&(_.visible=n.visible),n.frustumCulled!==void 0&&(_.frustumCulled=n.frustumCulled),n.renderOrder!==void 0&&(_.renderOrder=n.renderOrder),n.static!==void 0&&(_.static=n.static),n.userData!==void 0&&(_.userData=n.userData),n.layers!==void 0&&(_.layers.mask=n.layers),n.children!==void 0){const q=n.children;for(let K=0;K<q.length;K++)_.add(this.parseObject(q[K],s,f,d,y))}if(n.animations!==void 0){const q=n.animations;for(let K=0;K<q.length;K++){const Q=q[K];_.animations.push(y[Q])}}if(n.type==="LOD"){n.autoUpdate!==void 0&&(_.autoUpdate=n.autoUpdate);const q=n.levels;for(let K=0;K<q.length;K++){const Q=q[K],ne=_.getObjectByProperty("uuid",Q.object);ne!==void 0&&_.addLevel(ne,Q.distance,Q.hysteresis)}}return _}bindSkeletons(n,s){Object.keys(s).length!==0&&n.traverse(function(f){if(f.isSkinnedMesh===!0&&f.skeleton!==void 0){const d=s[f.skeleton];d===void 0?warn("ObjectLoader: No skeleton found with UUID:",f.skeleton):f.bind(d,f.bindMatrix)}})}bindLightTargets(n){n.traverse(function(s){if(s.isDirectionalLight||s.isSpotLight){const f=s.target,d=n.getObjectByProperty("uuid",f);d!==void 0?s.target=d:s.target=new Object3D}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter},_errorMap=new WeakMap;class ImageBitmapLoader extends Loader{constructor(n){super(n),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&warn("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&warn("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(n){return this.options=n,this}load(n,s,f,d){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const y=this,_=Cache.get(`image-bitmap:${n}`);if(_!==void 0){if(y.manager.itemStart(n),_.then){_.then(I=>{if(_errorMap.has(_)===!0)d&&d(_errorMap.get(_)),y.manager.itemError(n),y.manager.itemEnd(n);else return s&&s(I),y.manager.itemEnd(n),I});return}return setTimeout(function(){s&&s(_),y.manager.itemEnd(n)},0),_}const A={};A.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",A.headers=this.requestHeader,A.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const R=fetch(n,A).then(function(I){return I.blob()}).then(function(I){return createImageBitmap(I,Object.assign(y.options,{colorSpaceConversion:"none"}))}).then(function(I){return Cache.add(`image-bitmap:${n}`,I),s&&s(I),y.manager.itemEnd(n),I}).catch(function(I){d&&d(I),_errorMap.set(R,I),Cache.remove(`image-bitmap:${n}`),y.manager.itemError(n),y.manager.itemEnd(n)});Cache.add(`image-bitmap:${n}`,R),y.manager.itemStart(n)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(n){_context=n}}class AudioLoader extends Loader{constructor(n){super(n)}load(n,s,f,d){const y=this,_=new FileLoader(this.manager);_.setResponseType("arraybuffer"),_.setPath(this.path),_.setRequestHeader(this.requestHeader),_.setWithCredentials(this.withCredentials),_.load(n,function(R){try{const I=R.slice(0);AudioContext.getContext().decodeAudioData(I,function(Y){s(Y)}).catch(A)}catch(I){A(I)}},f,d);function A(R){d?d(R):error(R),y.manager.itemError(n)}}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(n){const s=this._cache;if(s.focus!==n.focus||s.fov!==n.fov||s.aspect!==n.aspect*this.aspect||s.near!==n.near||s.far!==n.far||s.zoom!==n.zoom||s.eyeSep!==this.eyeSep){s.focus=n.focus,s.fov=n.fov,s.aspect=n.aspect*this.aspect,s.near=n.near,s.far=n.far,s.zoom=n.zoom,s.eyeSep=this.eyeSep,_projectionMatrix.copy(n.projectionMatrix);const d=s.eyeSep/2,y=d*s.near/s.focus,_=s.near*Math.tan(DEG2RAD*s.fov*.5)/s.zoom;let A,R;_eyeLeft.elements[12]=-d,_eyeRight.elements[12]=d,A=-_*s.aspect+y,R=_*s.aspect+y,_projectionMatrix.elements[0]=2*s.near/(R-A),_projectionMatrix.elements[8]=(R+A)/(R-A),this.cameraL.projectionMatrix.copy(_projectionMatrix),A=-_*s.aspect-y,R=_*s.aspect-y,_projectionMatrix.elements[0]=2*s.near/(R-A),_projectionMatrix.elements[8]=(R+A)/(R-A),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(n.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(n.matrixWorld).multiply(_eyeRight)}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(n,s,f){super(),this.type="CubeCamera",this.renderTarget=f,this.coordinateSystem=null,this.activeMipmapLevel=0;const d=new PerspectiveCamera(fov,aspect,n,s);d.layers=this.layers,this.add(d);const y=new PerspectiveCamera(fov,aspect,n,s);y.layers=this.layers,this.add(y);const _=new PerspectiveCamera(fov,aspect,n,s);_.layers=this.layers,this.add(_);const A=new PerspectiveCamera(fov,aspect,n,s);A.layers=this.layers,this.add(A);const R=new PerspectiveCamera(fov,aspect,n,s);R.layers=this.layers,this.add(R);const I=new PerspectiveCamera(fov,aspect,n,s);I.layers=this.layers,this.add(I)}updateCoordinateSystem(){const n=this.coordinateSystem,s=this.children.concat(),[f,d,y,_,A,R]=s;for(const I of s)this.remove(I);if(n===WebGLCoordinateSystem)f.up.set(0,1,0),f.lookAt(1,0,0),d.up.set(0,1,0),d.lookAt(-1,0,0),y.up.set(0,0,-1),y.lookAt(0,1,0),_.up.set(0,0,1),_.lookAt(0,-1,0),A.up.set(0,1,0),A.lookAt(0,0,1),R.up.set(0,1,0),R.lookAt(0,0,-1);else if(n===WebGPUCoordinateSystem)f.up.set(0,-1,0),f.lookAt(-1,0,0),d.up.set(0,-1,0),d.lookAt(1,0,0),y.up.set(0,0,1),y.lookAt(0,1,0),_.up.set(0,0,-1),_.lookAt(0,-1,0),A.up.set(0,-1,0),A.lookAt(0,0,1),R.up.set(0,-1,0),R.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+n);for(const I of s)this.add(I),I.updateMatrixWorld()}update(n,s){this.parent===null&&this.updateMatrixWorld();const{renderTarget:f,activeMipmapLevel:d}=this;this.coordinateSystem!==n.coordinateSystem&&(this.coordinateSystem=n.coordinateSystem,this.updateCoordinateSystem());const[y,_,A,R,I,G]=this.children,Y=n.getRenderTarget(),q=n.getActiveCubeFace(),K=n.getActiveMipmapLevel(),Q=n.xr.enabled;n.xr.enabled=!1;const ne=f.texture.generateMipmaps;f.texture.generateMipmaps=!1;let te=!1;n.isWebGLRenderer===!0?te=n.state.buffers.depth.getReversed():te=n.reversedDepthBuffer,n.setRenderTarget(f,0,d),te&&n.autoClear===!1&&n.clearDepth(),n.render(s,y),n.setRenderTarget(f,1,d),te&&n.autoClear===!1&&n.clearDepth(),n.render(s,_),n.setRenderTarget(f,2,d),te&&n.autoClear===!1&&n.clearDepth(),n.render(s,A),n.setRenderTarget(f,3,d),te&&n.autoClear===!1&&n.clearDepth(),n.render(s,R),n.setRenderTarget(f,4,d),te&&n.autoClear===!1&&n.clearDepth(),n.render(s,I),f.texture.generateMipmaps=ne,n.setRenderTarget(f,5,d),te&&n.autoClear===!1&&n.clearDepth(),n.render(s,G),n.setRenderTarget(Y,q,K),n.xr.enabled=Q,f.texture.needsPMREMUpdate=!0}}class ArrayCamera extends PerspectiveCamera{constructor(n=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=n}}class Timer{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(n){this._document=n,n.hidden!==void 0&&(this._pageVisibilityHandler=handleVisibilityChange.bind(this),n.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(n){return this._timescale=n,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(n){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(n!==void 0?n:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function handleVisibilityChange(){this._document.hidden===!1&&this.reset()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_forward=new Vector3,_up=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._timer=new Timer}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(n){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=n,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(n){return this.gain.gain.setTargetAtTime(n,this.context.currentTime,.01),this}updateMatrixWorld(n){super.updateMatrixWorld(n),this._timer.update();const s=this.context.listener;if(this.timeDelta=this._timer.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_forward.set(0,0,-1).applyQuaternion(_quaternion$1),_up.set(0,1,0).applyQuaternion(_quaternion$1),s.positionX){const f=this.context.currentTime+this.timeDelta;s.positionX.linearRampToValueAtTime(_position$1.x,f),s.positionY.linearRampToValueAtTime(_position$1.y,f),s.positionZ.linearRampToValueAtTime(_position$1.z,f),s.forwardX.linearRampToValueAtTime(_forward.x,f),s.forwardY.linearRampToValueAtTime(_forward.y,f),s.forwardZ.linearRampToValueAtTime(_forward.z,f),s.upX.linearRampToValueAtTime(_up.x,f),s.upY.linearRampToValueAtTime(_up.y,f),s.upZ.linearRampToValueAtTime(_up.z,f)}else s.setPosition(_position$1.x,_position$1.y,_position$1.z),s.setOrientation(_forward.x,_forward.y,_forward.z,_up.x,_up.y,_up.z)}}let Audio$1=class extends Object3D{constructor(n){super(),this.type="Audio",this.listener=n,this.context=n.context,this.gain=this.context.createGain(),this.gain.connect(n.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(n){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=n,this.connect(),this}setMediaElementSource(n){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(n),this.connect(),this}setMediaStreamSource(n){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(n),this.connect(),this}setBuffer(n){return this.buffer=n,this.sourceType="buffer",this.autoplay&&this.play(),this}play(n=0){if(this.isPlaying===!0){warn("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+n;const s=this.context.createBufferSource();return s.buffer=this.buffer,s.loop=this.loop,s.loopStart=this.loopStart,s.loopEnd=this.loopEnd,s.onended=this.onEnded.bind(this),s.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=s,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(n=0){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+n),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let n=1,s=this.filters.length;n<s;n++)this.filters[n-1].connect(this.filters[n]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let n=1,s=this.filters.length;n<s;n++)this.filters[n-1].disconnect(this.filters[n]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(n){return n||(n=[]),this._connected===!0?(this.disconnect(),this.filters=n.slice(),this.connect()):this.filters=n.slice(),this}setDetune(n){return this.detune=n,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(n){return this.setFilters(n?[n]:[])}setPlaybackRate(n){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this.playbackRate=n,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(warn("Audio: this Audio has no playback control."),!1):this.loop}setLoop(n){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this.loop=n,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(n){return this.loopStart=n,this}setLoopEnd(n){return this.loopEnd=n,this}getVolume(){return this.gain.gain.value}setVolume(n){return this.gain.gain.setTargetAtTime(n,this.context.currentTime,.01),this}copy(n,s){return super.copy(n,s),n.sourceType!=="buffer"?(warn("Audio: Audio source type cannot be copied."),this):(this.autoplay=n.autoplay,this.buffer=n.buffer,this.detune=n.detune,this.loop=n.loop,this.loopStart=n.loopStart,this.loopEnd=n.loopEnd,this.offset=n.offset,this.duration=n.duration,this.playbackRate=n.playbackRate,this.hasPlaybackControl=n.hasPlaybackControl,this.sourceType=n.sourceType,this.filters=n.filters.slice(),this)}clone(n){return new this.constructor(this.listener).copy(this,n)}};const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio$1{constructor(n){super(n),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(n){return this.panner.refDistance=n,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(n){return this.panner.rolloffFactor=n,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(n){return this.panner.distanceModel=n,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(n){return this.panner.maxDistance=n,this}setDirectionalCone(n,s,f){return this.panner.coneInnerAngle=n,this.panner.coneOuterAngle=s,this.panner.coneOuterGain=f,this}updateMatrixWorld(n){if(super.updateMatrixWorld(n),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const s=this.panner;if(s.positionX){const f=this.context.currentTime+this.listener.timeDelta;s.positionX.linearRampToValueAtTime(_position.x,f),s.positionY.linearRampToValueAtTime(_position.y,f),s.positionZ.linearRampToValueAtTime(_position.z,f),s.orientationX.linearRampToValueAtTime(_orientation.x,f),s.orientationY.linearRampToValueAtTime(_orientation.y,f),s.orientationZ.linearRampToValueAtTime(_orientation.z,f)}else s.setPosition(_position.x,_position.y,_position.z),s.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(n,s=2048){this.analyser=n.context.createAnalyser(),this.analyser.fftSize=s,this.data=new Uint8Array(this.analyser.frequencyBinCount),n.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let n=0;const s=this.getFrequencyData();for(let f=0;f<s.length;f++)n+=s[f];return n/s.length}}class PropertyMixer{constructor(n,s,f){this.binding=n,this.valueSize=f;let d,y,_;switch(s){case"quaternion":d=this._slerp,y=this._slerpAdditive,_=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(f*6),this._workIndex=5;break;case"string":case"bool":d=this._select,y=this._select,_=this._setAdditiveIdentityOther,this.buffer=new Array(f*5);break;default:d=this._lerp,y=this._lerpAdditive,_=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(f*5)}this._mixBufferRegion=d,this._mixBufferRegionAdditive=y,this._setIdentity=_,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(n,s){const f=this.buffer,d=this.valueSize,y=n*d+d;let _=this.cumulativeWeight;if(_===0){for(let A=0;A!==d;++A)f[y+A]=f[A];_=s}else{_+=s;const A=s/_;this._mixBufferRegion(f,y,0,A,d)}this.cumulativeWeight=_}accumulateAdditive(n){const s=this.buffer,f=this.valueSize,d=f*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(s,d,0,n,f),this.cumulativeWeightAdditive+=n}apply(n){const s=this.valueSize,f=this.buffer,d=n*s+s,y=this.cumulativeWeight,_=this.cumulativeWeightAdditive,A=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,y<1){const R=s*this._origIndex;this._mixBufferRegion(f,d,R,1-y,s)}_>0&&this._mixBufferRegionAdditive(f,d,this._addIndex*s,1,s);for(let R=s,I=s+s;R!==I;++R)if(f[R]!==f[R+s]){A.setValue(f,d);break}}saveOriginalState(){const n=this.binding,s=this.buffer,f=this.valueSize,d=f*this._origIndex;n.getValue(s,d);for(let y=f,_=d;y!==_;++y)s[y]=s[d+y%f];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const n=this.valueSize*3;this.binding.setValue(this.buffer,n)}_setAdditiveIdentityNumeric(){const n=this._addIndex*this.valueSize,s=n+this.valueSize;for(let f=n;f<s;f++)this.buffer[f]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const n=this._origIndex*this.valueSize,s=this._addIndex*this.valueSize;for(let f=0;f<this.valueSize;f++)this.buffer[s+f]=this.buffer[n+f]}_select(n,s,f,d,y){if(d>=.5)for(let _=0;_!==y;++_)n[s+_]=n[f+_]}_slerp(n,s,f,d){Quaternion.slerpFlat(n,s,n,s,n,f,d)}_slerpAdditive(n,s,f,d,y){const _=this._workIndex*y;Quaternion.multiplyQuaternionsFlat(n,_,n,s,n,f),Quaternion.slerpFlat(n,s,n,s,n,_,d)}_lerp(n,s,f,d,y){const _=1-d;for(let A=0;A!==y;++A){const R=s+A;n[R]=n[R]*_+n[f+A]*d}}_lerpAdditive(n,s,f,d,y){for(let _=0;_!==y;++_){const A=s+_;n[A]=n[A]+n[f+_]*d}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(n,s,f){const d=f||PropertyBinding.parseTrackName(s);this._targetGroup=n,this._bindings=n.subscribe_(s,d)}getValue(n,s){this.bind();const f=this._targetGroup.nCachedObjects_,d=this._bindings[f];d!==void 0&&d.getValue(n,s)}setValue(n,s){const f=this._bindings;for(let d=this._targetGroup.nCachedObjects_,y=f.length;d!==y;++d)f[d].setValue(n,s)}bind(){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,f=n.length;s!==f;++s)n[s].bind()}unbind(){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,f=n.length;s!==f;++s)n[s].unbind()}}class PropertyBinding{constructor(n,s,f){this.path=s,this.parsedPath=f||PropertyBinding.parseTrackName(s),this.node=PropertyBinding.findNode(n,this.parsedPath.nodeName),this.rootNode=n,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(n,s,f){return n&&n.isAnimationObjectGroup?new PropertyBinding.Composite(n,s,f):new PropertyBinding(n,s,f)}static sanitizeNodeName(n){return n.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(n){const s=_trackRe.exec(n);if(s===null)throw new Error("PropertyBinding: Cannot parse trackName: "+n);const f={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},d=f.nodeName&&f.nodeName.lastIndexOf(".");if(d!==void 0&&d!==-1){const y=f.nodeName.substring(d+1);_supportedObjectNames.indexOf(y)!==-1&&(f.nodeName=f.nodeName.substring(0,d),f.objectName=y)}if(f.propertyName===null||f.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return f}static findNode(n,s){if(s===void 0||s===""||s==="."||s===-1||s===n.name||s===n.uuid)return n;if(n.skeleton){const f=n.skeleton.getBoneByName(s);if(f!==void 0)return f}if(n.children){const f=function(y){for(let _=0;_<y.length;_++){const A=y[_];if(A.name===s||A.uuid===s)return A;const R=f(A.children);if(R)return R}return null},d=f(n.children);if(d)return d}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(n,s){n[s]=this.targetObject[this.propertyName]}_getValue_array(n,s){const f=this.resolvedProperty;for(let d=0,y=f.length;d!==y;++d)n[s++]=f[d]}_getValue_arrayElement(n,s){n[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(n,s){this.resolvedProperty.toArray(n,s)}_setValue_direct(n,s){this.targetObject[this.propertyName]=n[s]}_setValue_direct_setNeedsUpdate(n,s){this.targetObject[this.propertyName]=n[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(n,s){this.targetObject[this.propertyName]=n[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(n,s){const f=this.resolvedProperty;for(let d=0,y=f.length;d!==y;++d)f[d]=n[s++]}_setValue_array_setNeedsUpdate(n,s){const f=this.resolvedProperty;for(let d=0,y=f.length;d!==y;++d)f[d]=n[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(n,s){const f=this.resolvedProperty;for(let d=0,y=f.length;d!==y;++d)f[d]=n[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(n,s){this.resolvedProperty[this.propertyIndex]=n[s]}_setValue_arrayElement_setNeedsUpdate(n,s){this.resolvedProperty[this.propertyIndex]=n[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(n,s){this.resolvedProperty[this.propertyIndex]=n[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(n,s){this.resolvedProperty.fromArray(n,s)}_setValue_fromArray_setNeedsUpdate(n,s){this.resolvedProperty.fromArray(n,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(n,s){this.resolvedProperty.fromArray(n,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(n,s){this.bind(),this.getValue(n,s)}_setValue_unbound(n,s){this.bind(),this.setValue(n,s)}bind(){let n=this.node;const s=this.parsedPath,f=s.objectName,d=s.propertyName;let y=s.propertyIndex;if(n||(n=PropertyBinding.findNode(this.rootNode,s.nodeName),this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!n){warn("PropertyBinding: No target node found for track: "+this.path+".");return}if(f){let I=s.objectIndex;switch(f){case"materials":if(!n.material){error("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!n.material.materials){error("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}n=n.material.materials;break;case"bones":if(!n.skeleton){error("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}n=n.skeleton.bones;for(let G=0;G<n.length;G++)if(n[G].name===I){I=G;break}break;case"map":if("map"in n){n=n.map;break}if(!n.material){error("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!n.material.map){error("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}n=n.material.map;break;default:if(n[f]===void 0){error("PropertyBinding: Can not bind to objectName of node undefined.",this);return}n=n[f]}if(I!==void 0){if(n[I]===void 0){error("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);return}n=n[I]}}const _=n[d];if(_===void 0){const I=s.nodeName;error("PropertyBinding: Trying to update property for track: "+I+"."+d+" but it wasn't found.",n);return}let A=this.Versioning.None;this.targetObject=n,n.isMaterial===!0?A=this.Versioning.NeedsUpdate:n.isObject3D===!0&&(A=this.Versioning.MatrixWorldNeedsUpdate);let R=this.BindingType.Direct;if(y!==void 0){if(d==="morphTargetInfluences"){if(!n.geometry){error("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!n.geometry.morphAttributes){error("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}n.morphTargetDictionary[y]!==void 0&&(y=n.morphTargetDictionary[y])}R=this.BindingType.ArrayElement,this.resolvedProperty=_,this.propertyIndex=y}else _.fromArray!==void 0&&_.toArray!==void 0?(R=this.BindingType.HasFromToArray,this.resolvedProperty=_):Array.isArray(_)?(R=this.BindingType.EntireArray,this.resolvedProperty=_):this.propertyName=d;this.getValue=this.GetterByBindingType[R],this.setValue=this.SetterByBindingTypeAndVersioning[R][A]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const n={};this._indicesByUUID=n;for(let f=0,d=arguments.length;f!==d;++f)n[arguments[f].uuid]=f;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const s=this;this.stats={objects:{get total(){return s._objects.length},get inUse(){return this.total-s.nCachedObjects_}},get bindingsPerObject(){return s._bindings.length}}}add(){const n=this._objects,s=this._indicesByUUID,f=this._paths,d=this._parsedPaths,y=this._bindings,_=y.length;let A,R=n.length,I=this.nCachedObjects_;for(let G=0,Y=arguments.length;G!==Y;++G){const q=arguments[G],K=q.uuid;let Q=s[K];if(Q===void 0){Q=R++,s[K]=Q,n.push(q);for(let ne=0,te=_;ne!==te;++ne)y[ne].push(new PropertyBinding(q,f[ne],d[ne]))}else if(Q<I){A=n[Q];const ne=--I,te=n[ne];s[te.uuid]=Q,n[Q]=te,s[K]=ne,n[ne]=q;for(let J=0,ie=_;J!==ie;++J){const re=y[J],le=re[ne];let fe=re[Q];re[Q]=le,fe===void 0&&(fe=new PropertyBinding(q,f[J],d[J])),re[ne]=fe}}else n[Q]!==A&&error("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=I}remove(){const n=this._objects,s=this._indicesByUUID,f=this._bindings,d=f.length;let y=this.nCachedObjects_;for(let _=0,A=arguments.length;_!==A;++_){const R=arguments[_],I=R.uuid,G=s[I];if(G!==void 0&&G>=y){const Y=y++,q=n[Y];s[q.uuid]=G,n[G]=q,s[I]=Y,n[Y]=R;for(let K=0,Q=d;K!==Q;++K){const ne=f[K],te=ne[Y],J=ne[G];ne[G]=te,ne[Y]=J}}}this.nCachedObjects_=y}uncache(){const n=this._objects,s=this._indicesByUUID,f=this._bindings,d=f.length;let y=this.nCachedObjects_,_=n.length;for(let A=0,R=arguments.length;A!==R;++A){const I=arguments[A],G=I.uuid,Y=s[G];if(Y!==void 0)if(delete s[G],Y<y){const q=--y,K=n[q],Q=--_,ne=n[Q];s[K.uuid]=Y,n[Y]=K,s[ne.uuid]=q,n[q]=ne,n.pop();for(let te=0,J=d;te!==J;++te){const ie=f[te],re=ie[q],le=ie[Q];ie[Y]=re,ie[q]=le,ie.pop()}}else{const q=--_,K=n[q];q>0&&(s[K.uuid]=Y),n[Y]=K,n.pop();for(let Q=0,ne=d;Q!==ne;++Q){const te=f[Q];te[Y]=te[q],te.pop()}}}this.nCachedObjects_=y}subscribe_(n,s){const f=this._bindingsIndicesByPath;let d=f[n];const y=this._bindings;if(d!==void 0)return y[d];const _=this._paths,A=this._parsedPaths,R=this._objects,I=R.length,G=this.nCachedObjects_,Y=new Array(I);d=y.length,f[n]=d,_.push(n),A.push(s),y.push(Y);for(let q=G,K=R.length;q!==K;++q){const Q=R[q];Y[q]=new PropertyBinding(Q,n,s)}return Y}unsubscribe_(n){const s=this._bindingsIndicesByPath,f=s[n];if(f!==void 0){const d=this._paths,y=this._parsedPaths,_=this._bindings,A=_.length-1,R=_[A],I=n[A];s[I]=f,_[f]=R,_.pop(),y[f]=y[A],y.pop(),d[f]=d[A],d.pop()}}}class AnimationAction{constructor(n,s,f=null,d=s.blendMode){this._mixer=n,this._clip=s,this._localRoot=f,this.blendMode=d;const y=s.tracks,_=y.length,A=new Array(_),R={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let I=0;I!==_;++I){const G=y[I].createInterpolant(null);A[I]=G,G.settings=R}this._interpolantSettings=R,this._interpolants=A,this._propertyBindings=new Array(_),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(n){return this._startTime=n,this}setLoop(n,s){return this.loop=n,this.repetitions=s,this}setEffectiveWeight(n){return this.weight=n,this._effectiveWeight=this.enabled?n:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(n){return this._scheduleFading(n,0,1)}fadeOut(n){return this._scheduleFading(n,1,0)}crossFadeFrom(n,s,f=!1){if(n.fadeOut(s),this.fadeIn(s),f===!0){const d=this._clip.duration,y=n._clip.duration,_=y/d,A=d/y;n.warp(1,_,s),this.warp(A,1,s)}return this}crossFadeTo(n,s,f=!1){return n.crossFadeFrom(this,s,f)}stopFading(){const n=this._weightInterpolant;return n!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}setEffectiveTimeScale(n){return this.timeScale=n,this._effectiveTimeScale=this.paused?0:n,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(n){return this.timeScale=this._clip.duration/n,this.stopWarping()}syncWith(n){return this.time=n.time,this.timeScale=n.timeScale,this.stopWarping()}halt(n){return this.warp(this._effectiveTimeScale,0,n)}warp(n,s,f){const d=this._mixer,y=d.time,_=this.timeScale;let A=this._timeScaleInterpolant;A===null&&(A=d._lendControlInterpolant(),this._timeScaleInterpolant=A);const R=A.parameterPositions,I=A.sampleValues;return R[0]=y,R[1]=y+f,I[0]=n/_,I[1]=s/_,this}stopWarping(){const n=this._timeScaleInterpolant;return n!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(n,s,f,d){if(!this.enabled){this._updateWeight(n);return}const y=this._startTime;if(y!==null){const R=(n-y)*f;R<0||f===0?s=0:(this._startTime=null,s=f*R)}s*=this._updateTimeScale(n);const _=this._updateTime(s),A=this._updateWeight(n);if(A>0){const R=this._interpolants,I=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let G=0,Y=R.length;G!==Y;++G)R[G].evaluate(_),I[G].accumulateAdditive(A);break;case NormalAnimationBlendMode:default:for(let G=0,Y=R.length;G!==Y;++G)R[G].evaluate(_),I[G].accumulate(d,A)}}}_updateWeight(n){let s=0;if(this.enabled){s=this.weight;const f=this._weightInterpolant;if(f!==null){const d=f.evaluate(n)[0];s*=d,n>f.parameterPositions[1]&&(this.stopFading(),d===0&&(this.enabled=!1))}}return this._effectiveWeight=s,s}_updateTimeScale(n){let s=0;if(!this.paused){s=this.timeScale;const f=this._timeScaleInterpolant;if(f!==null){const d=f.evaluate(n)[0];s*=d,n>f.parameterPositions[1]&&(this.stopWarping(),s===0?this.paused=!0:this.timeScale=s)}}return this._effectiveTimeScale=s,s}_updateTime(n){const s=this._clip.duration,f=this.loop;let d=this.time+n,y=this._loopCount;const _=f===LoopPingPong;if(n===0)return y===-1?d:_&&(y&1)===1?s-d:d;if(f===LoopOnce){y===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(d>=s)d=s;else if(d<0)d=0;else{this.time=d;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=d,this._mixer.dispatchEvent({type:"finished",action:this,direction:n<0?-1:1})}}else{if(y===-1&&(n>=0?(y=0,this._setEndings(!0,this.repetitions===0,_)):this._setEndings(this.repetitions===0,!0,_)),d>=s||d<0){const A=Math.floor(d/s);d-=s*A,y+=Math.abs(A);const R=this.repetitions-y;if(R<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,d=n>0?s:0,this.time=d,this._mixer.dispatchEvent({type:"finished",action:this,direction:n>0?1:-1});else{if(R===1){const I=n<0;this._setEndings(I,!I,_)}else this._setEndings(!1,!1,_);this._loopCount=y,this.time=d,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:A})}}else this.time=d;if(_&&(y&1)===1)return s-d}return d}_setEndings(n,s,f){const d=this._interpolantSettings;f?(d.endingStart=ZeroSlopeEnding,d.endingEnd=ZeroSlopeEnding):(n?d.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:d.endingStart=WrapAroundEnding,s?d.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:d.endingEnd=WrapAroundEnding)}_scheduleFading(n,s,f){const d=this._mixer,y=d.time;let _=this._weightInterpolant;_===null&&(_=d._lendControlInterpolant(),this._weightInterpolant=_);const A=_.parameterPositions,R=_.sampleValues;return A[0]=y,R[0]=s,A[1]=y+n,R[1]=f,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher{constructor(n){super(),this._root=n,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}_bindAction(n,s){const f=n._localRoot||this._root,d=n._clip.tracks,y=d.length,_=n._propertyBindings,A=n._interpolants,R=f.uuid,I=this._bindingsByRootAndName;let G=I[R];G===void 0&&(G={},I[R]=G);for(let Y=0;Y!==y;++Y){const q=d[Y],K=q.name;let Q=G[K];if(Q!==void 0)++Q.referenceCount,_[Y]=Q;else{if(Q=_[Y],Q!==void 0){Q._cacheIndex===null&&(++Q.referenceCount,this._addInactiveBinding(Q,R,K));continue}const ne=s&&s._propertyBindings[Y].binding.parsedPath;Q=new PropertyMixer(PropertyBinding.create(f,K,ne),q.ValueTypeName,q.getValueSize()),++Q.referenceCount,this._addInactiveBinding(Q,R,K),_[Y]=Q}A[Y].resultBuffer=Q.buffer}}_activateAction(n){if(!this._isActiveAction(n)){if(n._cacheIndex===null){const f=(n._localRoot||this._root).uuid,d=n._clip.uuid,y=this._actionsByClip[d];this._bindAction(n,y&&y.knownActions[0]),this._addInactiveAction(n,d,f)}const s=n._propertyBindings;for(let f=0,d=s.length;f!==d;++f){const y=s[f];y.useCount++===0&&(this._lendBinding(y),y.saveOriginalState())}this._lendAction(n)}}_deactivateAction(n){if(this._isActiveAction(n)){const s=n._propertyBindings;for(let f=0,d=s.length;f!==d;++f){const y=s[f];--y.useCount===0&&(y.restoreOriginalState(),this._takeBackBinding(y))}this._takeBackAction(n)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const n=this;this.stats={actions:{get total(){return n._actions.length},get inUse(){return n._nActiveActions}},bindings:{get total(){return n._bindings.length},get inUse(){return n._nActiveBindings}},controlInterpolants:{get total(){return n._controlInterpolants.length},get inUse(){return n._nActiveControlInterpolants}}}}_isActiveAction(n){const s=n._cacheIndex;return s!==null&&s<this._nActiveActions}_addInactiveAction(n,s,f){const d=this._actions,y=this._actionsByClip;let _=y[s];if(_===void 0)_={knownActions:[n],actionByRoot:{}},n._byClipCacheIndex=0,y[s]=_;else{const A=_.knownActions;n._byClipCacheIndex=A.length,A.push(n)}n._cacheIndex=d.length,d.push(n),_.actionByRoot[f]=n}_removeInactiveAction(n){const s=this._actions,f=s[s.length-1],d=n._cacheIndex;f._cacheIndex=d,s[d]=f,s.pop(),n._cacheIndex=null;const y=n._clip.uuid,_=this._actionsByClip,A=_[y],R=A.knownActions,I=R[R.length-1],G=n._byClipCacheIndex;I._byClipCacheIndex=G,R[G]=I,R.pop(),n._byClipCacheIndex=null;const Y=A.actionByRoot,q=(n._localRoot||this._root).uuid;delete Y[q],R.length===0&&delete _[y],this._removeInactiveBindingsForAction(n)}_removeInactiveBindingsForAction(n){const s=n._propertyBindings;for(let f=0,d=s.length;f!==d;++f){const y=s[f];--y.referenceCount===0&&this._removeInactiveBinding(y)}}_lendAction(n){const s=this._actions,f=n._cacheIndex,d=this._nActiveActions++,y=s[d];n._cacheIndex=d,s[d]=n,y._cacheIndex=f,s[f]=y}_takeBackAction(n){const s=this._actions,f=n._cacheIndex,d=--this._nActiveActions,y=s[d];n._cacheIndex=d,s[d]=n,y._cacheIndex=f,s[f]=y}_addInactiveBinding(n,s,f){const d=this._bindingsByRootAndName,y=this._bindings;let _=d[s];_===void 0&&(_={},d[s]=_),_[f]=n,n._cacheIndex=y.length,y.push(n)}_removeInactiveBinding(n){const s=this._bindings,f=n.binding,d=f.rootNode.uuid,y=f.path,_=this._bindingsByRootAndName,A=_[d],R=s[s.length-1],I=n._cacheIndex;R._cacheIndex=I,s[I]=R,s.pop(),delete A[y],Object.keys(A).length===0&&delete _[d]}_lendBinding(n){const s=this._bindings,f=n._cacheIndex,d=this._nActiveBindings++,y=s[d];n._cacheIndex=d,s[d]=n,y._cacheIndex=f,s[f]=y}_takeBackBinding(n){const s=this._bindings,f=n._cacheIndex,d=--this._nActiveBindings,y=s[d];n._cacheIndex=d,s[d]=n,y._cacheIndex=f,s[f]=y}_lendControlInterpolant(){const n=this._controlInterpolants,s=this._nActiveControlInterpolants++;let f=n[s];return f===void 0&&(f=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),f.__cacheIndex=s,n[s]=f),f}_takeBackControlInterpolant(n){const s=this._controlInterpolants,f=n.__cacheIndex,d=--this._nActiveControlInterpolants,y=s[d];n.__cacheIndex=d,s[d]=n,y.__cacheIndex=f,s[f]=y}clipAction(n,s,f){const d=s||this._root,y=d.uuid;let _=typeof n=="string"?AnimationClip.findByName(d,n):n;const A=_!==null?_.uuid:n,R=this._actionsByClip[A];let I=null;if(f===void 0&&(_!==null?f=_.blendMode:f=NormalAnimationBlendMode),R!==void 0){const Y=R.actionByRoot[y];if(Y!==void 0&&Y.blendMode===f)return Y;I=R.knownActions[0],_===null&&(_=I._clip)}if(_===null)return null;const G=new AnimationAction(this,_,s,f);return this._bindAction(G,I),this._addInactiveAction(G,A,y),G}existingAction(n,s){const f=s||this._root,d=f.uuid,y=typeof n=="string"?AnimationClip.findByName(f,n):n,_=y?y.uuid:n,A=this._actionsByClip[_];return A!==void 0&&A.actionByRoot[d]||null}stopAllAction(){const n=this._actions,s=this._nActiveActions;for(let f=s-1;f>=0;--f)n[f].stop();return this}update(n){n*=this.timeScale;const s=this._actions,f=this._nActiveActions,d=this.time+=n,y=Math.sign(n),_=this._accuIndex^=1;for(let I=0;I!==f;++I)s[I]._update(d,n,y,_);const A=this._bindings,R=this._nActiveBindings;for(let I=0;I!==R;++I)A[I].apply(_);return this}setTime(n){this.time=0;for(let s=0;s<this._actions.length;s++)this._actions[s].time=0;return this.update(n)}getRoot(){return this._root}uncacheClip(n){const s=this._actions,f=n.uuid,d=this._actionsByClip,y=d[f];if(y!==void 0){const _=y.knownActions;for(let A=0,R=_.length;A!==R;++A){const I=_[A];this._deactivateAction(I);const G=I._cacheIndex,Y=s[s.length-1];I._cacheIndex=null,I._byClipCacheIndex=null,Y._cacheIndex=G,s[G]=Y,s.pop(),this._removeInactiveBindingsForAction(I)}delete d[f]}}uncacheRoot(n){const s=n.uuid,f=this._actionsByClip;for(const _ in f){const A=f[_].actionByRoot,R=A[s];R!==void 0&&(this._deactivateAction(R),this._removeInactiveAction(R))}const d=this._bindingsByRootAndName,y=d[s];if(y!==void 0)for(const _ in y){const A=y[_];A.restoreOriginalState(),this._removeInactiveBinding(A)}}uncacheAction(n,s){const f=this.existingAction(n,s);f!==null&&(this._deactivateAction(f),this._removeInactiveAction(f))}}class RenderTarget3D extends RenderTarget{constructor(n=1,s=1,f=1,d={}){super(n,s,d),this.isRenderTarget3D=!0,this.depth=f,this.texture=new Data3DTexture(null,n,s,f),this._setTextureOptions(d),this.texture.isRenderTargetTexture=!0}}class Uniform{constructor(n){this.value=n}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let _id$3=0;class UniformsGroup extends EventDispatcher{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_id$3++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(n){return this.uniforms.push(n),this}remove(n){const s=this.uniforms.indexOf(n);return s!==-1&&this.uniforms.splice(s,1),this}setName(n){return this.name=n,this}setUsage(n){return this.usage=n,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(n){this.name=n.name,this.usage=n.usage;const s=n.uniforms;this.uniforms.length=0;for(let f=0,d=s.length;f<d;f++){const y=Array.isArray(s[f])?s[f]:[s[f]];for(let _=0;_<y.length;_++)this.uniforms.push(y[_].clone())}return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(n,s,f=1){super(n,s),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=f}copy(n){return super.copy(n),this.meshPerAttribute=n.meshPerAttribute,this}clone(n){const s=super.clone(n);return s.meshPerAttribute=this.meshPerAttribute,s}toJSON(n){const s=super.toJSON(n);return s.isInstancedInterleavedBuffer=!0,s.meshPerAttribute=this.meshPerAttribute,s}}class GLBufferAttribute{constructor(n,s,f,d,y,_=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=n,this.type=s,this.itemSize=f,this.elementSize=d,this.count=y,this.normalized=_,this.version=0}set needsUpdate(n){n===!0&&this.version++}setBuffer(n){return this.buffer=n,this}setType(n,s){return this.type=n,this.elementSize=s,this}setItemSize(n){return this.itemSize=n,this}setCount(n){return this.count=n,this}}const _matrix=new Matrix4;class Raycaster{constructor(n,s,f=0,d=1/0){this.ray=new Ray(n,s),this.near=f,this.far=d,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(n,s){this.ray.set(n,s)}setFromCamera(n,s){s.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(s.matrixWorld),this.ray.direction.set(n.x,n.y,.5).unproject(s).sub(this.ray.origin).normalize(),this.camera=s):s.isOrthographicCamera?(this.ray.origin.set(n.x,n.y,(s.near+s.far)/(s.near-s.far)).unproject(s),this.ray.direction.set(0,0,-1).transformDirection(s.matrixWorld),this.camera=s):error("Raycaster: Unsupported camera type: "+s.type)}setFromXRController(n){return _matrix.identity().extractRotation(n.matrixWorld),this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(_matrix),this}intersectObject(n,s=!0,f=[]){return intersect(n,this,f,s),f.sort(ascSort),f}intersectObjects(n,s=!0,f=[]){for(let d=0,y=n.length;d<y;d++)intersect(n[d],this,f,s);return f.sort(ascSort),f}}function ascSort(u,n){return u.distance-n.distance}function intersect(u,n,s,f){let d=!0;if(u.layers.test(n.layers)&&u.raycast(n,s)===!1&&(d=!1),d===!0&&f===!0){const y=u.children;for(let _=0,A=y.length;_<A;_++)intersect(y[_],n,s,!0)}}class Clock{constructor(n=!0){this.autoStart=n,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1,warn("THREE.Clock: This module has been deprecated. Please use THREE.Timer instead.")}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let n=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const s=performance.now();n=(s-this.oldTime)/1e3,this.oldTime=s,this.elapsedTime+=n}return n}}class Spherical{constructor(n=1,s=0,f=0){this.radius=n,this.phi=s,this.theta=f}set(n,s,f){return this.radius=n,this.phi=s,this.theta=f,this}copy(n){return this.radius=n.radius,this.phi=n.phi,this.theta=n.theta,this}makeSafe(){return this.phi=clamp(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}setFromCartesianCoords(n,s,f){return this.radius=Math.sqrt(n*n+s*s+f*f),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(n,f),this.phi=Math.acos(clamp(s/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(n=1,s=0,f=0){this.radius=n,this.theta=s,this.y=f}set(n,s,f){return this.radius=n,this.theta=s,this.y=f,this}copy(n){return this.radius=n.radius,this.theta=n.theta,this.y=n.y,this}setFromVector3(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}setFromCartesianCoords(n,s,f){return this.radius=Math.sqrt(n*n+f*f),this.theta=Math.atan2(n,f),this.y=s,this}clone(){return new this.constructor().copy(this)}}class Matrix2{constructor(n,s,f,d){Matrix2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],n!==void 0&&this.set(n,s,f,d)}identity(){return this.set(1,0,0,1),this}fromArray(n,s=0){for(let f=0;f<4;f++)this.elements[f]=n[f+s];return this}set(n,s,f,d){const y=this.elements;return y[0]=n,y[2]=s,y[1]=f,y[3]=d,this}}const _vector$4=new Vector2;class Box2{constructor(n=new Vector2(1/0,1/0),s=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=n,this.max=s}set(n,s){return this.min.copy(n),this.max.copy(s),this}setFromPoints(n){this.makeEmpty();for(let s=0,f=n.length;s<f;s++)this.expandByPoint(n[s]);return this}setFromCenterAndSize(n,s){const f=_vector$4.copy(s).multiplyScalar(.5);return this.min.copy(n).sub(f),this.max.copy(n).add(f),this}clone(){return new this.constructor().copy(this)}copy(n){return this.min.copy(n.min),this.max.copy(n.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(n){return this.isEmpty()?n.set(0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(n){return this.isEmpty()?n.set(0,0):n.subVectors(this.max,this.min)}expandByPoint(n){return this.min.min(n),this.max.max(n),this}expandByVector(n){return this.min.sub(n),this.max.add(n),this}expandByScalar(n){return this.min.addScalar(-n),this.max.addScalar(n),this}containsPoint(n){return n.x>=this.min.x&&n.x<=this.max.x&&n.y>=this.min.y&&n.y<=this.max.y}containsBox(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y}getParameter(n,s){return s.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(n){return n.max.x>=this.min.x&&n.min.x<=this.max.x&&n.max.y>=this.min.y&&n.min.y<=this.max.y}clampPoint(n,s){return s.copy(n).clamp(this.min,this.max)}distanceToPoint(n){return this.clampPoint(n,_vector$4).distanceTo(n)}intersect(n){return this.min.max(n.min),this.max.min(n.max),this.isEmpty()&&this.makeEmpty(),this}union(n){return this.min.min(n.min),this.max.max(n.max),this}translate(n){return this.min.add(n),this.max.add(n),this}equals(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3,_d1=new Vector3,_d2=new Vector3,_r=new Vector3,_c1=new Vector3,_c2=new Vector3;class Line3{constructor(n=new Vector3,s=new Vector3){this.start=n,this.end=s}set(n,s){return this.start.copy(n),this.end.copy(s),this}copy(n){return this.start.copy(n.start),this.end.copy(n.end),this}getCenter(n){return n.addVectors(this.start,this.end).multiplyScalar(.5)}delta(n){return n.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(n,s){return this.delta(s).multiplyScalar(n).add(this.start)}closestPointToPointParameter(n,s){_startP.subVectors(n,this.start),_startEnd.subVectors(this.end,this.start);const f=_startEnd.dot(_startEnd);let y=_startEnd.dot(_startP)/f;return s&&(y=clamp(y,0,1)),y}closestPointToPoint(n,s,f){const d=this.closestPointToPointParameter(n,s);return this.delta(f).multiplyScalar(d).add(this.start)}distanceSqToLine3(n,s=_c1,f=_c2){const d=10000000000000001e-32;let y,_;const A=this.start,R=n.start,I=this.end,G=n.end;_d1.subVectors(I,A),_d2.subVectors(G,R),_r.subVectors(A,R);const Y=_d1.dot(_d1),q=_d2.dot(_d2),K=_d2.dot(_r);if(Y<=d&&q<=d)return s.copy(A),f.copy(R),s.sub(f),s.dot(s);if(Y<=d)y=0,_=K/q,_=clamp(_,0,1);else{const Q=_d1.dot(_r);if(q<=d)_=0,y=clamp(-Q/Y,0,1);else{const ne=_d1.dot(_d2),te=Y*q-ne*ne;te!==0?y=clamp((ne*K-Q*q)/te,0,1):y=0,_=(ne*y+K)/q,_<0?(_=0,y=clamp(-Q/Y,0,1)):_>1&&(_=1,y=clamp((ne-Q)/Y,0,1))}}return s.copy(A).addScaledVector(_d1,y),f.copy(R).addScaledVector(_d2,_),s.distanceToSquared(f)}applyMatrix4(n){return this.start.applyMatrix4(n),this.end.applyMatrix4(n),this}equals(n){return n.start.equals(this.start)&&n.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(n,s){super(),this.light=n,this.matrixAutoUpdate=!1,this.color=s,this.type="SpotLightHelper";const f=new BufferGeometry,d=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let _=0,A=1,R=32;_<R;_++,A++){const I=_/R*Math.PI*2,G=A/R*Math.PI*2;d.push(Math.cos(I),Math.sin(I),1,Math.cos(G),Math.sin(G),1)}f.setAttribute("position",new Float32BufferAttribute(d,3));const y=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(f,y),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const n=this.light.distance?this.light.distance:1e3,s=n*Math.tan(this.light.angle);this.cone.scale.set(s,s,n),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(n){const s=getBoneList(n),f=new BufferGeometry,d=[],y=[];for(let I=0;I<s.length;I++){const G=s[I];G.parent&&G.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),y.push(0,0,0),y.push(0,0,0))}f.setAttribute("position",new Float32BufferAttribute(d,3)),f.setAttribute("color",new Float32BufferAttribute(y,3));const _=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(f,_),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=n,this.bones=s,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1;const A=new Color(255),R=new Color(65280);this.setColors(A,R)}updateMatrixWorld(n){const s=this.bones,f=this.geometry,d=f.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let y=0,_=0;y<s.length;y++){const A=s[y];A.parent&&A.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,A.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),d.setXYZ(_,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,A.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),d.setXYZ(_+1,_vector$2.x,_vector$2.y,_vector$2.z),_+=2)}f.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(n)}setColors(n,s){const d=this.geometry.getAttribute("color");for(let y=0;y<d.count;y+=2)d.setXYZ(y,n.r,n.g,n.b),d.setXYZ(y+1,s.r,s.g,s.b);return d.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(u){const n=[];u.isBone===!0&&n.push(u);for(let s=0;s<u.children.length;s++)n.push(...getBoneList(u.children[s]));return n}class PointLightHelper extends Mesh{constructor(n,s,f){const d=new SphereGeometry(s,4,2),y=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(d,y),this.light=n,this.color=f,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(n,s,f){super(),this.light=n,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=f,this.type="HemisphereLightHelper";const d=new OctahedronGeometry(s);d.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const y=d.getAttribute("position"),_=new Float32Array(y.count*3);d.setAttribute("color",new BufferAttribute(_,3)),this.add(new Mesh(d,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const n=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const s=n.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let f=0,d=s.count;f<d;f++){const y=f<d/2?_color1:_color2;s.setXYZ(f,y.r,y.g,y.b)}s.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),n.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(n=10,s=10,f=4473924,d=8947848){f=new Color(f),d=new Color(d);const y=s/2,_=n/s,A=n/2,R=[],I=[];for(let q=0,K=0,Q=-A;q<=s;q++,Q+=_){R.push(-A,0,Q,A,0,Q),R.push(Q,0,-A,Q,0,A);const ne=q===y?f:d;ne.toArray(I,K),K+=3,ne.toArray(I,K),K+=3,ne.toArray(I,K),K+=3,ne.toArray(I,K),K+=3}const G=new BufferGeometry;G.setAttribute("position",new Float32BufferAttribute(R,3)),G.setAttribute("color",new Float32BufferAttribute(I,3));const Y=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(G,Y),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(n=10,s=16,f=8,d=64,y=4473924,_=8947848){y=new Color(y),_=new Color(_);const A=[],R=[];if(s>1)for(let Y=0;Y<s;Y++){const q=Y/s*(Math.PI*2),K=Math.sin(q)*n,Q=Math.cos(q)*n;A.push(0,0,0),A.push(K,0,Q);const ne=Y&1?y:_;R.push(ne.r,ne.g,ne.b),R.push(ne.r,ne.g,ne.b)}for(let Y=0;Y<f;Y++){const q=Y&1?y:_,K=n-n/f*Y;for(let Q=0;Q<d;Q++){let ne=Q/d*(Math.PI*2),te=Math.sin(ne)*K,J=Math.cos(ne)*K;A.push(te,0,J),R.push(q.r,q.g,q.b),ne=(Q+1)/d*(Math.PI*2),te=Math.sin(ne)*K,J=Math.cos(ne)*K,A.push(te,0,J),R.push(q.r,q.g,q.b)}}const I=new BufferGeometry;I.setAttribute("position",new Float32BufferAttribute(A,3)),I.setAttribute("color",new Float32BufferAttribute(R,3));const G=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(I,G),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(n,s,f){super(),this.light=n,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=f,this.type="DirectionalLightHelper",s===void 0&&(s=1);let d=new BufferGeometry;d.setAttribute("position",new Float32BufferAttribute([-s,s,0,s,s,0,s,-s,0,-s,-s,0,-s,s,0],3));const y=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(d,y),this.add(this.lightPlane),d=new BufferGeometry,d.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(d,y),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(n){const s=new BufferGeometry,f=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),d=[],y=[],_={};A("n1","n2"),A("n2","n4"),A("n4","n3"),A("n3","n1"),A("f1","f2"),A("f2","f4"),A("f4","f3"),A("f3","f1"),A("n1","f1"),A("n2","f2"),A("n3","f3"),A("n4","f4"),A("p","n1"),A("p","n2"),A("p","n3"),A("p","n4"),A("u1","u2"),A("u2","u3"),A("u3","u1"),A("c","t"),A("p","c"),A("cn1","cn2"),A("cn3","cn4"),A("cf1","cf2"),A("cf3","cf4");function A(Q,ne){R(Q),R(ne)}function R(Q){d.push(0,0,0),y.push(0,0,0),_[Q]===void 0&&(_[Q]=[]),_[Q].push(d.length/3-1)}s.setAttribute("position",new Float32BufferAttribute(d,3)),s.setAttribute("color",new Float32BufferAttribute(y,3)),super(s,f),this.type="CameraHelper",this.camera=n,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=_,this.update();const I=new Color(16755200),G=new Color(16711680),Y=new Color(43775),q=new Color(16777215),K=new Color(3355443);this.setColors(I,G,Y,q,K)}setColors(n,s,f,d,y){const A=this.geometry.getAttribute("color");return A.setXYZ(0,n.r,n.g,n.b),A.setXYZ(1,n.r,n.g,n.b),A.setXYZ(2,n.r,n.g,n.b),A.setXYZ(3,n.r,n.g,n.b),A.setXYZ(4,n.r,n.g,n.b),A.setXYZ(5,n.r,n.g,n.b),A.setXYZ(6,n.r,n.g,n.b),A.setXYZ(7,n.r,n.g,n.b),A.setXYZ(8,n.r,n.g,n.b),A.setXYZ(9,n.r,n.g,n.b),A.setXYZ(10,n.r,n.g,n.b),A.setXYZ(11,n.r,n.g,n.b),A.setXYZ(12,n.r,n.g,n.b),A.setXYZ(13,n.r,n.g,n.b),A.setXYZ(14,n.r,n.g,n.b),A.setXYZ(15,n.r,n.g,n.b),A.setXYZ(16,n.r,n.g,n.b),A.setXYZ(17,n.r,n.g,n.b),A.setXYZ(18,n.r,n.g,n.b),A.setXYZ(19,n.r,n.g,n.b),A.setXYZ(20,n.r,n.g,n.b),A.setXYZ(21,n.r,n.g,n.b),A.setXYZ(22,n.r,n.g,n.b),A.setXYZ(23,n.r,n.g,n.b),A.setXYZ(24,s.r,s.g,s.b),A.setXYZ(25,s.r,s.g,s.b),A.setXYZ(26,s.r,s.g,s.b),A.setXYZ(27,s.r,s.g,s.b),A.setXYZ(28,s.r,s.g,s.b),A.setXYZ(29,s.r,s.g,s.b),A.setXYZ(30,s.r,s.g,s.b),A.setXYZ(31,s.r,s.g,s.b),A.setXYZ(32,f.r,f.g,f.b),A.setXYZ(33,f.r,f.g,f.b),A.setXYZ(34,f.r,f.g,f.b),A.setXYZ(35,f.r,f.g,f.b),A.setXYZ(36,f.r,f.g,f.b),A.setXYZ(37,f.r,f.g,f.b),A.setXYZ(38,d.r,d.g,d.b),A.setXYZ(39,d.r,d.g,d.b),A.setXYZ(40,y.r,y.g,y.b),A.setXYZ(41,y.r,y.g,y.b),A.setXYZ(42,y.r,y.g,y.b),A.setXYZ(43,y.r,y.g,y.b),A.setXYZ(44,y.r,y.g,y.b),A.setXYZ(45,y.r,y.g,y.b),A.setXYZ(46,y.r,y.g,y.b),A.setXYZ(47,y.r,y.g,y.b),A.setXYZ(48,y.r,y.g,y.b),A.setXYZ(49,y.r,y.g,y.b),A.needsUpdate=!0,this}update(){const n=this.geometry,s=this.pointMap,f=1,d=1;let y,_;if(_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)y=1,_=0;else if(this.camera.coordinateSystem===WebGLCoordinateSystem)y=-1,_=1;else if(this.camera.coordinateSystem===WebGPUCoordinateSystem)y=0,_=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);setPoint("c",s,n,_camera,0,0,y),setPoint("t",s,n,_camera,0,0,_),setPoint("n1",s,n,_camera,-f,-d,y),setPoint("n2",s,n,_camera,f,-d,y),setPoint("n3",s,n,_camera,-f,d,y),setPoint("n4",s,n,_camera,f,d,y),setPoint("f1",s,n,_camera,-f,-d,_),setPoint("f2",s,n,_camera,f,-d,_),setPoint("f3",s,n,_camera,-f,d,_),setPoint("f4",s,n,_camera,f,d,_),setPoint("u1",s,n,_camera,f*.7,d*1.1,y),setPoint("u2",s,n,_camera,-f*.7,d*1.1,y),setPoint("u3",s,n,_camera,0,d*2,y),setPoint("cf1",s,n,_camera,-f,0,_),setPoint("cf2",s,n,_camera,f,0,_),setPoint("cf3",s,n,_camera,0,-d,_),setPoint("cf4",s,n,_camera,0,d,_),setPoint("cn1",s,n,_camera,-f,0,y),setPoint("cn2",s,n,_camera,f,0,y),setPoint("cn3",s,n,_camera,0,-d,y),setPoint("cn4",s,n,_camera,0,d,y),n.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(u,n,s,f,d,y,_){_vector.set(d,y,_).unproject(f);const A=n[u];if(A!==void 0){const R=s.getAttribute("position");for(let I=0,G=A.length;I<G;I++)R.setXYZ(A[I],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(n,s=16776960){const f=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=new Float32Array(24),y=new BufferGeometry;y.setIndex(new BufferAttribute(f,1)),y.setAttribute("position",new BufferAttribute(d,3)),super(y,new LineBasicMaterial({color:s,toneMapped:!1})),this.object=n,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const n=_box.min,s=_box.max,f=this.geometry.attributes.position,d=f.array;d[0]=s.x,d[1]=s.y,d[2]=s.z,d[3]=n.x,d[4]=s.y,d[5]=s.z,d[6]=n.x,d[7]=n.y,d[8]=s.z,d[9]=s.x,d[10]=n.y,d[11]=s.z,d[12]=s.x,d[13]=s.y,d[14]=n.z,d[15]=n.x,d[16]=s.y,d[17]=n.z,d[18]=n.x,d[19]=n.y,d[20]=n.z,d[21]=s.x,d[22]=n.y,d[23]=n.z,f.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(n){return this.object=n,this.update(),this}copy(n,s){return super.copy(n,s),this.object=n.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(n,s=16776960){const f=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],y=new BufferGeometry;y.setIndex(new BufferAttribute(f,1)),y.setAttribute("position",new Float32BufferAttribute(d,3)),super(y,new LineBasicMaterial({color:s,toneMapped:!1})),this.box=n,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(n){const s=this.box;s.isEmpty()||(s.getCenter(this.position),s.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(n))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line{constructor(n,s=1,f=16776960){const d=f,y=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],_=new BufferGeometry;_.setAttribute("position",new Float32BufferAttribute(y,3)),_.computeBoundingSphere(),super(_,new LineBasicMaterial({color:d,toneMapped:!1})),this.type="PlaneHelper",this.plane=n,this.size=s;const A=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],R=new BufferGeometry;R.setAttribute("position",new Float32BufferAttribute(A,3)),R.computeBoundingSphere(),this.add(new Mesh(R,new MeshBasicMaterial({color:d,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(n){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(n)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(n=new Vector3(0,0,1),s=new Vector3(0,0,0),f=1,d=16776960,y=f*.2,_=y*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new ConeGeometry(.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(s),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:d,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:d,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(f,y,_)}setDirection(n){if(n.y>.99999)this.quaternion.set(0,0,0,1);else if(n.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(n.z,0,-n.x).normalize();const s=Math.acos(n.y);this.quaternion.setFromAxisAngle(_axis,s)}}setLength(n,s=n*.2,f=s*.2){this.line.scale.set(1,Math.max(1e-4,n-s),1),this.line.updateMatrix(),this.cone.scale.set(f,s,f),this.cone.position.y=n,this.cone.updateMatrix()}setColor(n){this.line.material.color.set(n),this.cone.material.color.set(n)}copy(n){return super.copy(n,!1),this.line.copy(n.line),this.cone.copy(n.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(n=1){const s=[0,0,0,n,0,0,0,0,0,0,n,0,0,0,0,0,0,n],f=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],d=new BufferGeometry;d.setAttribute("position",new Float32BufferAttribute(s,3)),d.setAttribute("color",new Float32BufferAttribute(f,3));const y=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(d,y),this.type="AxesHelper"}setColors(n,s,f){const d=new Color,y=this.geometry.attributes.color.array;return d.set(n),d.toArray(y,0),d.toArray(y,3),d.set(s),d.toArray(y,6),d.toArray(y,9),d.set(f),d.toArray(y,12),d.toArray(y,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(n,s){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(n,s),this}lineTo(n,s){return this.currentPath.lineTo(n,s),this}quadraticCurveTo(n,s,f,d){return this.currentPath.quadraticCurveTo(n,s,f,d),this}bezierCurveTo(n,s,f,d,y,_){return this.currentPath.bezierCurveTo(n,s,f,d,y,_),this}splineThru(n){return this.currentPath.splineThru(n),this}toShapes(n){function s(J){const ie=[];for(let re=0,le=J.length;re<le;re++){const fe=J[re],pe=new Shape;pe.curves=fe.curves,ie.push(pe)}return ie}function f(J,ie){const re=ie.length;let le=!1;for(let fe=re-1,pe=0;pe<re;fe=pe++){let de=ie[fe],se=ie[pe],he=se.x-de.x,Se=se.y-de.y;if(Math.abs(Se)>Number.EPSILON){if(Se<0&&(de=ie[pe],he=-he,se=ie[fe],Se=-Se),J.y<de.y||J.y>se.y)continue;if(J.y===de.y){if(J.x===de.x)return!0}else{const ve=Se*(J.x-de.x)-he*(J.y-de.y);if(ve===0)return!0;if(ve<0)continue;le=!le}}else{if(J.y!==de.y)continue;if(se.x<=J.x&&J.x<=de.x||de.x<=J.x&&J.x<=se.x)return!0}}return le}const d=ShapeUtils.isClockWise,y=this.subPaths;if(y.length===0)return[];let _,A,R;const I=[];if(y.length===1)return A=y[0],R=new Shape,R.curves=A.curves,I.push(R),I;let G=!d(y[0].getPoints());G=n?!G:G;const Y=[],q=[];let K=[],Q=0,ne;q[Q]=void 0,K[Q]=[];for(let J=0,ie=y.length;J<ie;J++)A=y[J],ne=A.getPoints(),_=d(ne),_=n?!_:_,_?(!G&&q[Q]&&Q++,q[Q]={s:new Shape,p:ne},q[Q].s.curves=A.curves,G&&Q++,K[Q]=[]):K[Q].push({h:A,p:ne[0]});if(!q[0])return s(y);if(q.length>1){let J=!1,ie=0;for(let re=0,le=q.length;re<le;re++)Y[re]=[];for(let re=0,le=q.length;re<le;re++){const fe=K[re];for(let pe=0;pe<fe.length;pe++){const de=fe[pe];let se=!0;for(let he=0;he<q.length;he++)f(de.p,q[he].p)&&(re!==he&&ie++,se?(se=!1,Y[he].push(de)):J=!0);se&&Y[re].push(de)}}ie>0&&J===!1&&(K=Y)}let te;for(let J=0,ie=q.length;J<ie;J++){R=q[J].s,I.push(R),te=K[J];for(let re=0,le=te.length;re<le;re++)R.holes.push(te[re].h)}return I}}class Controls extends EventDispatcher{constructor(n,s=null){super(),this.object=n,this.domElement=s,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(n){if(n===void 0){warn("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=n}disconnect(){}dispose(){}update(){}}function contain(u,n){const s=u.image&&u.image.width?u.image.width/u.image.height:1;return s>n?(u.repeat.x=1,u.repeat.y=s/n,u.offset.x=0,u.offset.y=(1-u.repeat.y)/2):(u.repeat.x=n/s,u.repeat.y=1,u.offset.x=(1-u.repeat.x)/2,u.offset.y=0),u}function cover(u,n){const s=u.image&&u.image.width?u.image.width/u.image.height:1;return s>n?(u.repeat.x=n/s,u.repeat.y=1,u.offset.x=(1-u.repeat.x)/2,u.offset.y=0):(u.repeat.x=1,u.repeat.y=s/n,u.offset.x=0,u.offset.y=(1-u.repeat.y)/2),u}function fill(u){return u.repeat.x=1,u.repeat.y=1,u.offset.x=0,u.offset.y=0,u}function getByteLength(u,n,s,f){const d=getTextureTypeByteLength(f);switch(s){case AlphaFormat:return u*n;case RedFormat:return u*n/d.components*d.byteLength;case RedIntegerFormat:return u*n/d.components*d.byteLength;case RGFormat:return u*n*2/d.components*d.byteLength;case RGIntegerFormat:return u*n*2/d.components*d.byteLength;case RGBFormat:return u*n*3/d.components*d.byteLength;case RGBAFormat:return u*n*4/d.components*d.byteLength;case RGBAIntegerFormat:return u*n*4/d.components*d.byteLength;case RGB_S3TC_DXT1_Format:case RGBA_S3TC_DXT1_Format:return Math.floor((u+3)/4)*Math.floor((n+3)/4)*8;case RGBA_S3TC_DXT3_Format:case RGBA_S3TC_DXT5_Format:return Math.floor((u+3)/4)*Math.floor((n+3)/4)*16;case RGB_PVRTC_2BPPV1_Format:case RGBA_PVRTC_2BPPV1_Format:return Math.max(u,16)*Math.max(n,8)/4;case RGB_PVRTC_4BPPV1_Format:case RGBA_PVRTC_4BPPV1_Format:return Math.max(u,8)*Math.max(n,8)/2;case RGB_ETC1_Format:case RGB_ETC2_Format:case R11_EAC_Format:case SIGNED_R11_EAC_Format:return Math.floor((u+3)/4)*Math.floor((n+3)/4)*8;case RGBA_ETC2_EAC_Format:case RG11_EAC_Format:case SIGNED_RG11_EAC_Format:return Math.floor((u+3)/4)*Math.floor((n+3)/4)*16;case RGBA_ASTC_4x4_Format:return Math.floor((u+3)/4)*Math.floor((n+3)/4)*16;case RGBA_ASTC_5x4_Format:return Math.floor((u+4)/5)*Math.floor((n+3)/4)*16;case RGBA_ASTC_5x5_Format:return Math.floor((u+4)/5)*Math.floor((n+4)/5)*16;case RGBA_ASTC_6x5_Format:return Math.floor((u+5)/6)*Math.floor((n+4)/5)*16;case RGBA_ASTC_6x6_Format:return Math.floor((u+5)/6)*Math.floor((n+5)/6)*16;case RGBA_ASTC_8x5_Format:return Math.floor((u+7)/8)*Math.floor((n+4)/5)*16;case RGBA_ASTC_8x6_Format:return Math.floor((u+7)/8)*Math.floor((n+5)/6)*16;case RGBA_ASTC_8x8_Format:return Math.floor((u+7)/8)*Math.floor((n+7)/8)*16;case RGBA_ASTC_10x5_Format:return Math.floor((u+9)/10)*Math.floor((n+4)/5)*16;case RGBA_ASTC_10x6_Format:return Math.floor((u+9)/10)*Math.floor((n+5)/6)*16;case RGBA_ASTC_10x8_Format:return Math.floor((u+9)/10)*Math.floor((n+7)/8)*16;case RGBA_ASTC_10x10_Format:return Math.floor((u+9)/10)*Math.floor((n+9)/10)*16;case RGBA_ASTC_12x10_Format:return Math.floor((u+11)/12)*Math.floor((n+9)/10)*16;case RGBA_ASTC_12x12_Format:return Math.floor((u+11)/12)*Math.floor((n+11)/12)*16;case RGBA_BPTC_Format:case RGB_BPTC_SIGNED_Format:case RGB_BPTC_UNSIGNED_Format:return Math.ceil(u/4)*Math.ceil(n/4)*16;case RED_RGTC1_Format:case SIGNED_RED_RGTC1_Format:return Math.ceil(u/4)*Math.ceil(n/4)*8;case RED_GREEN_RGTC2_Format:case SIGNED_RED_GREEN_RGTC2_Format:return Math.ceil(u/4)*Math.ceil(n/4)*16}throw new Error(`Unable to determine texture byte length for ${s} format.`)}function getTextureTypeByteLength(u){switch(u){case UnsignedByteType:case ByteType:return{byteLength:1,components:1};case UnsignedShortType:case ShortType:case HalfFloatType:return{byteLength:2,components:1};case UnsignedShort4444Type:case UnsignedShort5551Type:return{byteLength:2,components:4};case UnsignedIntType:case IntType:case FloatType:return{byteLength:4,components:1};case UnsignedInt5999Type:case UnsignedInt101111Type:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${u}.`)}class TextureUtils{static contain(n,s){return contain(n,s)}static cover(n,s){return cover(n,s)}static fill(n){return fill(n)}static getByteLength(n,s,f,d){return getByteLength(n,s,f,d)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);/**
 * @license
 * Copyright 2010-2026 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function WebGLAnimation(){let u=null,n=!1,s=null,f=null;function d(y,_){s(y,_),f=u.requestAnimationFrame(d)}return{start:function(){n!==!0&&s!==null&&(f=u.requestAnimationFrame(d),n=!0)},stop:function(){u.cancelAnimationFrame(f),n=!1},setAnimationLoop:function(y){s=y},setContext:function(y){u=y}}}function WebGLAttributes(u){const n=new WeakMap;function s(A,R){const I=A.array,G=A.usage,Y=I.byteLength,q=u.createBuffer();u.bindBuffer(R,q),u.bufferData(R,I,G),A.onUploadCallback();let K;if(I instanceof Float32Array)K=u.FLOAT;else if(typeof Float16Array<"u"&&I instanceof Float16Array)K=u.HALF_FLOAT;else if(I instanceof Uint16Array)A.isFloat16BufferAttribute?K=u.HALF_FLOAT:K=u.UNSIGNED_SHORT;else if(I instanceof Int16Array)K=u.SHORT;else if(I instanceof Uint32Array)K=u.UNSIGNED_INT;else if(I instanceof Int32Array)K=u.INT;else if(I instanceof Int8Array)K=u.BYTE;else if(I instanceof Uint8Array)K=u.UNSIGNED_BYTE;else if(I instanceof Uint8ClampedArray)K=u.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+I);return{buffer:q,type:K,bytesPerElement:I.BYTES_PER_ELEMENT,version:A.version,size:Y}}function f(A,R,I){const G=R.array,Y=R.updateRanges;if(u.bindBuffer(I,A),Y.length===0)u.bufferSubData(I,0,G);else{Y.sort((K,Q)=>K.start-Q.start);let q=0;for(let K=1;K<Y.length;K++){const Q=Y[q],ne=Y[K];ne.start<=Q.start+Q.count+1?Q.count=Math.max(Q.count,ne.start+ne.count-Q.start):(++q,Y[q]=ne)}Y.length=q+1;for(let K=0,Q=Y.length;K<Q;K++){const ne=Y[K];u.bufferSubData(I,ne.start*G.BYTES_PER_ELEMENT,G,ne.start,ne.count)}R.clearUpdateRanges()}R.onUploadCallback()}function d(A){return A.isInterleavedBufferAttribute&&(A=A.data),n.get(A)}function y(A){A.isInterleavedBufferAttribute&&(A=A.data);const R=n.get(A);R&&(u.deleteBuffer(R.buffer),n.delete(A))}function _(A,R){if(A.isInterleavedBufferAttribute&&(A=A.data),A.isGLBufferAttribute){const G=n.get(A);(!G||G.version<A.version)&&n.set(A,{buffer:A.buffer,type:A.type,bytesPerElement:A.elementSize,version:A.version});return}const I=n.get(A);if(I===void 0)n.set(A,s(A,R));else if(I.version<A.version){if(I.size!==A.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");f(I.buffer,A,R),I.version=A.version}}return{get:d,remove:y,update:_}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec4 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 );
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR ) || defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR ) || defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR ) || defined( USE_COLOR_ALPHA ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec4 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR ) || defined( USE_COLOR_ALPHA ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec4( 1.0 );
#endif
#ifdef USE_COLOR_ALPHA
	vColor *= color;
#elif defined( USE_COLOR )
	vColor.rgb *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.rgb *= instanceColor.rgb;
#endif
#ifdef USE_BATCHING_COLOR
	vColor *= getBatchingColor( getIndirectIndex( gl_DrawID ) );
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		#ifdef ENVMAP_BLENDING_MULTIPLY
			outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
		#elif defined( ENVMAP_BLENDING_MIX )
			outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
		#elif defined( ENVMAP_BLENDING_ADD )
			outgoingLight += envColor.xyz * specularStrength * reflectivity;
		#endif
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( material.specularF90 - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
		#ifdef USE_CLEARCOAT
			vec3 Ncc = geometryClearcoatNormal;
			vec2 uvClearcoat = LTC_Uv( Ncc, viewDir, material.clearcoatRoughness );
			vec4 t1Clearcoat = texture2D( ltc_1, uvClearcoat );
			vec4 t2Clearcoat = texture2D( ltc_2, uvClearcoat );
			mat3 mInvClearcoat = mat3(
				vec3( t1Clearcoat.x, 0, t1Clearcoat.y ),
				vec3(             0, 1,             0 ),
				vec3( t1Clearcoat.z, 0, t1Clearcoat.w )
			);
			vec3 fresnelClearcoat = material.clearcoatF0 * t2Clearcoat.x + ( material.clearcoatF90 - material.clearcoatF0 ) * t2Clearcoat.y;
			clearcoatSpecularDirect += lightColor * fresnelClearcoat * LTC_Evaluate( Ncc, viewDir, position, mInvClearcoat, rectCoords );
		#endif
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( ENVMAP_TYPE_CUBE_UV )
		#if defined( STANDARD ) || defined( LAMBERT ) || defined( PHONG )
			iblIrradiance += getIBLIrradiance( geometryNormal );
		#endif
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	#if defined( LAMBERT ) || defined( PHONG )
		irradiance += iblIrradiance;
	#endif
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	#ifdef USE_REVERSED_DEPTH_BUFFER
	
		return depth * ( far - near ) - far;
	#else
		return depth * ( near - far ) - near;
	#endif
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	
	#ifdef USE_REVERSED_DEPTH_BUFFER
		return ( near * far ) / ( ( near - far ) * depth - near );
	#else
		return ( near * far ) / ( ( far - near ) * depth - far );
	#endif
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * PI2;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadowCoord.z -= shadowBias;
			#else
				shadowCoord.z += shadowBias;
			#endif
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadowCoord.z -= shadowBias;
			#else
				shadowCoord.z += shadowBias;
			#endif
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			#ifdef USE_REVERSED_DEPTH_BUFFER
				float dp = ( shadowCameraNear * ( shadowCameraFar - viewSpaceZ ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
				dp -= shadowBias;
			#else
				float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
				dp += shadowBias;
			#endif
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * PI2;
			vec2 sample0 = vogelDiskSample( 0, 5, phi );
			vec2 sample1 = vogelDiskSample( 1, 5, phi );
			vec2 sample2 = vogelDiskSample( 2, 5, phi );
			vec2 sample3 = vogelDiskSample( 3, 5, phi );
			vec2 sample4 = vogelDiskSample( 4, 5, phi );
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * sample0.x + bitangent * sample0.y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * sample1.x + bitangent * sample1.y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * sample2.x + bitangent * sample2.y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * sample3.x + bitangent * sample3.y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * sample4.x + bitangent * sample4.y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				depth = 1.0 - depth;
			#endif
			shadow = step( dp, depth );
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphinstance_vertex,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distance_vert:vertex$d,distance_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distance:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distance_vert,fragmentShader:ShaderChunk.distance_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0},_e1$1=new Euler,_m1$1=new Matrix4;function WebGLBackground(u,n,s,f,d,y){const _=new Color(0);let A=d===!0?0:1,R,I,G=null,Y=0,q=null;function K(ie){let re=ie.isScene===!0?ie.background:null;if(re&&re.isTexture){const le=ie.backgroundBlurriness>0;re=n.get(re,le)}return re}function Q(ie){let re=!1;const le=K(ie);le===null?te(_,A):le&&le.isColor&&(te(le,1),re=!0);const fe=u.xr.getEnvironmentBlendMode();fe==="additive"?s.buffers.color.setClear(0,0,0,1,y):fe==="alpha-blend"&&s.buffers.color.setClear(0,0,0,0,y),(u.autoClear||re)&&(s.buffers.depth.setTest(!0),s.buffers.depth.setMask(!0),s.buffers.color.setMask(!0),u.clear(u.autoClearColor,u.autoClearDepth,u.autoClearStencil))}function ne(ie,re){const le=K(re);le&&(le.isCubeTexture||le.mapping===CubeUVReflectionMapping)?(I===void 0&&(I=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),I.geometry.deleteAttribute("normal"),I.geometry.deleteAttribute("uv"),I.onBeforeRender=function(fe,pe,de){this.matrixWorld.copyPosition(de.matrixWorld)},Object.defineProperty(I.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),f.update(I)),_e1$1.copy(re.backgroundRotation),_e1$1.x*=-1,_e1$1.y*=-1,_e1$1.z*=-1,le.isCubeTexture&&le.isRenderTargetTexture===!1&&(_e1$1.y*=-1,_e1$1.z*=-1),I.material.uniforms.envMap.value=le,I.material.uniforms.flipEnvMap.value=le.isCubeTexture&&le.isRenderTargetTexture===!1?-1:1,I.material.uniforms.backgroundBlurriness.value=re.backgroundBlurriness,I.material.uniforms.backgroundIntensity.value=re.backgroundIntensity,I.material.uniforms.backgroundRotation.value.setFromMatrix4(_m1$1.makeRotationFromEuler(_e1$1)),I.material.toneMapped=ColorManagement.getTransfer(le.colorSpace)!==SRGBTransfer,(G!==le||Y!==le.version||q!==u.toneMapping)&&(I.material.needsUpdate=!0,G=le,Y=le.version,q=u.toneMapping),I.layers.enableAll(),ie.unshift(I,I.geometry,I.material,0,0,null)):le&&le.isTexture&&(R===void 0&&(R=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),R.geometry.deleteAttribute("normal"),Object.defineProperty(R.material,"map",{get:function(){return this.uniforms.t2D.value}}),f.update(R)),R.material.uniforms.t2D.value=le,R.material.uniforms.backgroundIntensity.value=re.backgroundIntensity,R.material.toneMapped=ColorManagement.getTransfer(le.colorSpace)!==SRGBTransfer,le.matrixAutoUpdate===!0&&le.updateMatrix(),R.material.uniforms.uvTransform.value.copy(le.matrix),(G!==le||Y!==le.version||q!==u.toneMapping)&&(R.material.needsUpdate=!0,G=le,Y=le.version,q=u.toneMapping),R.layers.enableAll(),ie.unshift(R,R.geometry,R.material,0,0,null))}function te(ie,re){ie.getRGB(_rgb,getUnlitUniformColorSpace(u)),s.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,re,y)}function J(){I!==void 0&&(I.geometry.dispose(),I.material.dispose(),I=void 0),R!==void 0&&(R.geometry.dispose(),R.material.dispose(),R=void 0)}return{getClearColor:function(){return _},setClearColor:function(ie,re=1){_.set(ie),A=re,te(_,A)},getClearAlpha:function(){return A},setClearAlpha:function(ie){A=ie,te(_,A)},render:Q,addToRenderList:ne,dispose:J}}function WebGLBindingStates(u,n){const s=u.getParameter(u.MAX_VERTEX_ATTRIBS),f={},d=q(null);let y=d,_=!1;function A(ve,Re,Ee,Oe,Ne){let ye=!1;const Ae=Y(ve,Oe,Ee,Re);y!==Ae&&(y=Ae,I(y.object)),ye=K(ve,Oe,Ee,Ne),ye&&Q(ve,Oe,Ee,Ne),Ne!==null&&n.update(Ne,u.ELEMENT_ARRAY_BUFFER),(ye||_)&&(_=!1,le(ve,Re,Ee,Oe),Ne!==null&&u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,n.get(Ne).buffer))}function R(){return u.createVertexArray()}function I(ve){return u.bindVertexArray(ve)}function G(ve){return u.deleteVertexArray(ve)}function Y(ve,Re,Ee,Oe){const Ne=Oe.wireframe===!0;let ye=f[Re.id];ye===void 0&&(ye={},f[Re.id]=ye);const Ae=ve.isInstancedMesh===!0?ve.id:0;let _e=ye[Ae];_e===void 0&&(_e={},ye[Ae]=_e);let Te=_e[Ee.id];Te===void 0&&(Te={},_e[Ee.id]=Te);let we=Te[Ne];return we===void 0&&(we=q(R()),Te[Ne]=we),we}function q(ve){const Re=[],Ee=[],Oe=[];for(let Ne=0;Ne<s;Ne++)Re[Ne]=0,Ee[Ne]=0,Oe[Ne]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Re,enabledAttributes:Ee,attributeDivisors:Oe,object:ve,attributes:{},index:null}}function K(ve,Re,Ee,Oe){const Ne=y.attributes,ye=Re.attributes;let Ae=0;const _e=Ee.getAttributes();for(const Te in _e)if(_e[Te].location>=0){const ge=Ne[Te];let De=ye[Te];if(De===void 0&&(Te==="instanceMatrix"&&ve.instanceMatrix&&(De=ve.instanceMatrix),Te==="instanceColor"&&ve.instanceColor&&(De=ve.instanceColor)),ge===void 0||ge.attribute!==De||De&&ge.data!==De.data)return!0;Ae++}return y.attributesNum!==Ae||y.index!==Oe}function Q(ve,Re,Ee,Oe){const Ne={},ye=Re.attributes;let Ae=0;const _e=Ee.getAttributes();for(const Te in _e)if(_e[Te].location>=0){let ge=ye[Te];ge===void 0&&(Te==="instanceMatrix"&&ve.instanceMatrix&&(ge=ve.instanceMatrix),Te==="instanceColor"&&ve.instanceColor&&(ge=ve.instanceColor));const De={};De.attribute=ge,ge&&ge.data&&(De.data=ge.data),Ne[Te]=De,Ae++}y.attributes=Ne,y.attributesNum=Ae,y.index=Oe}function ne(){const ve=y.newAttributes;for(let Re=0,Ee=ve.length;Re<Ee;Re++)ve[Re]=0}function te(ve){J(ve,0)}function J(ve,Re){const Ee=y.newAttributes,Oe=y.enabledAttributes,Ne=y.attributeDivisors;Ee[ve]=1,Oe[ve]===0&&(u.enableVertexAttribArray(ve),Oe[ve]=1),Ne[ve]!==Re&&(u.vertexAttribDivisor(ve,Re),Ne[ve]=Re)}function ie(){const ve=y.newAttributes,Re=y.enabledAttributes;for(let Ee=0,Oe=Re.length;Ee<Oe;Ee++)Re[Ee]!==ve[Ee]&&(u.disableVertexAttribArray(Ee),Re[Ee]=0)}function re(ve,Re,Ee,Oe,Ne,ye,Ae){Ae===!0?u.vertexAttribIPointer(ve,Re,Ee,Ne,ye):u.vertexAttribPointer(ve,Re,Ee,Oe,Ne,ye)}function le(ve,Re,Ee,Oe){ne();const Ne=Oe.attributes,ye=Ee.getAttributes(),Ae=Re.defaultAttributeValues;for(const _e in ye){const Te=ye[_e];if(Te.location>=0){let we=Ne[_e];if(we===void 0&&(_e==="instanceMatrix"&&ve.instanceMatrix&&(we=ve.instanceMatrix),_e==="instanceColor"&&ve.instanceColor&&(we=ve.instanceColor)),we!==void 0){const ge=we.normalized,De=we.itemSize,ze=n.get(we);if(ze===void 0)continue;const He=ze.buffer,yt=ze.type,Ge=ze.bytesPerElement,lt=yt===u.INT||yt===u.UNSIGNED_INT||we.gpuType===IntType;if(we.isInterleavedBufferAttribute){const Mt=we.data,hn=Mt.stride,Fn=we.offset;if(Mt.isInstancedInterleavedBuffer){for(let Vn=0;Vn<Te.locationSize;Vn++)J(Te.location+Vn,Mt.meshPerAttribute);ve.isInstancedMesh!==!0&&Oe._maxInstanceCount===void 0&&(Oe._maxInstanceCount=Mt.meshPerAttribute*Mt.count)}else for(let Vn=0;Vn<Te.locationSize;Vn++)te(Te.location+Vn);u.bindBuffer(u.ARRAY_BUFFER,He);for(let Vn=0;Vn<Te.locationSize;Vn++)re(Te.location+Vn,De/Te.locationSize,yt,ge,hn*Ge,(Fn+De/Te.locationSize*Vn)*Ge,lt)}else{if(we.isInstancedBufferAttribute){for(let Mt=0;Mt<Te.locationSize;Mt++)J(Te.location+Mt,we.meshPerAttribute);ve.isInstancedMesh!==!0&&Oe._maxInstanceCount===void 0&&(Oe._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let Mt=0;Mt<Te.locationSize;Mt++)te(Te.location+Mt);u.bindBuffer(u.ARRAY_BUFFER,He);for(let Mt=0;Mt<Te.locationSize;Mt++)re(Te.location+Mt,De/Te.locationSize,yt,ge,De*Ge,De/Te.locationSize*Mt*Ge,lt)}}else if(Ae!==void 0){const ge=Ae[_e];if(ge!==void 0)switch(ge.length){case 2:u.vertexAttrib2fv(Te.location,ge);break;case 3:u.vertexAttrib3fv(Te.location,ge);break;case 4:u.vertexAttrib4fv(Te.location,ge);break;default:u.vertexAttrib1fv(Te.location,ge)}}}}ie()}function fe(){he();for(const ve in f){const Re=f[ve];for(const Ee in Re){const Oe=Re[Ee];for(const Ne in Oe){const ye=Oe[Ne];for(const Ae in ye)G(ye[Ae].object),delete ye[Ae];delete Oe[Ne]}}delete f[ve]}}function pe(ve){if(f[ve.id]===void 0)return;const Re=f[ve.id];for(const Ee in Re){const Oe=Re[Ee];for(const Ne in Oe){const ye=Oe[Ne];for(const Ae in ye)G(ye[Ae].object),delete ye[Ae];delete Oe[Ne]}}delete f[ve.id]}function de(ve){for(const Re in f){const Ee=f[Re];for(const Oe in Ee){const Ne=Ee[Oe];if(Ne[ve.id]===void 0)continue;const ye=Ne[ve.id];for(const Ae in ye)G(ye[Ae].object),delete ye[Ae];delete Ne[ve.id]}}}function se(ve){for(const Re in f){const Ee=f[Re],Oe=ve.isInstancedMesh===!0?ve.id:0,Ne=Ee[Oe];if(Ne!==void 0){for(const ye in Ne){const Ae=Ne[ye];for(const _e in Ae)G(Ae[_e].object),delete Ae[_e];delete Ne[ye]}delete Ee[Oe],Object.keys(Ee).length===0&&delete f[Re]}}}function he(){Se(),_=!0,y!==d&&(y=d,I(y.object))}function Se(){d.geometry=null,d.program=null,d.wireframe=!1}return{setup:A,reset:he,resetDefaultState:Se,dispose:fe,releaseStatesOfGeometry:pe,releaseStatesOfObject:se,releaseStatesOfProgram:de,initAttributes:ne,enableAttribute:te,disableUnusedAttributes:ie}}function WebGLBufferRenderer(u,n,s){let f;function d(I){f=I}function y(I,G){u.drawArrays(f,I,G),s.update(G,f,1)}function _(I,G,Y){Y!==0&&(u.drawArraysInstanced(f,I,G,Y),s.update(G,f,Y))}function A(I,G,Y){if(Y===0)return;n.get("WEBGL_multi_draw").multiDrawArraysWEBGL(f,I,0,G,0,Y);let K=0;for(let Q=0;Q<Y;Q++)K+=G[Q];s.update(K,f,1)}function R(I,G,Y,q){if(Y===0)return;const K=n.get("WEBGL_multi_draw");if(K===null)for(let Q=0;Q<I.length;Q++)_(I[Q],G[Q],q[Q]);else{K.multiDrawArraysInstancedWEBGL(f,I,0,G,0,q,0,Y);let Q=0;for(let ne=0;ne<Y;ne++)Q+=G[ne]*q[ne];s.update(Q,f,1)}}this.setMode=d,this.render=y,this.renderInstances=_,this.renderMultiDraw=A,this.renderMultiDrawInstances=R}function WebGLCapabilities(u,n,s,f){let d;function y(){if(d!==void 0)return d;if(n.has("EXT_texture_filter_anisotropic")===!0){const de=n.get("EXT_texture_filter_anisotropic");d=u.getParameter(de.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else d=0;return d}function _(de){return!(de!==RGBAFormat&&f.convert(de)!==u.getParameter(u.IMPLEMENTATION_COLOR_READ_FORMAT))}function A(de){const se=de===HalfFloatType&&(n.has("EXT_color_buffer_half_float")||n.has("EXT_color_buffer_float"));return!(de!==UnsignedByteType&&f.convert(de)!==u.getParameter(u.IMPLEMENTATION_COLOR_READ_TYPE)&&de!==FloatType&&!se)}function R(de){if(de==="highp"){if(u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.HIGH_FLOAT).precision>0&&u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.HIGH_FLOAT).precision>0)return"highp";de="mediump"}return de==="mediump"&&u.getShaderPrecisionFormat(u.VERTEX_SHADER,u.MEDIUM_FLOAT).precision>0&&u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let I=s.precision!==void 0?s.precision:"highp";const G=R(I);G!==I&&(warn("WebGLRenderer:",I,"not supported, using",G,"instead."),I=G);const Y=s.logarithmicDepthBuffer===!0,q=s.reversedDepthBuffer===!0&&n.has("EXT_clip_control"),K=u.getParameter(u.MAX_TEXTURE_IMAGE_UNITS),Q=u.getParameter(u.MAX_VERTEX_TEXTURE_IMAGE_UNITS),ne=u.getParameter(u.MAX_TEXTURE_SIZE),te=u.getParameter(u.MAX_CUBE_MAP_TEXTURE_SIZE),J=u.getParameter(u.MAX_VERTEX_ATTRIBS),ie=u.getParameter(u.MAX_VERTEX_UNIFORM_VECTORS),re=u.getParameter(u.MAX_VARYING_VECTORS),le=u.getParameter(u.MAX_FRAGMENT_UNIFORM_VECTORS),fe=u.getParameter(u.MAX_SAMPLES),pe=u.getParameter(u.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:y,getMaxPrecision:R,textureFormatReadable:_,textureTypeReadable:A,precision:I,logarithmicDepthBuffer:Y,reversedDepthBuffer:q,maxTextures:K,maxVertexTextures:Q,maxTextureSize:ne,maxCubemapSize:te,maxAttributes:J,maxVertexUniforms:ie,maxVaryings:re,maxFragmentUniforms:le,maxSamples:fe,samples:pe}}function WebGLClipping(u){const n=this;let s=null,f=0,d=!1,y=!1;const _=new Plane,A=new Matrix3,R={value:null,needsUpdate:!1};this.uniform=R,this.numPlanes=0,this.numIntersection=0,this.init=function(Y,q){const K=Y.length!==0||q||f!==0||d;return d=q,f=Y.length,K},this.beginShadows=function(){y=!0,G(null)},this.endShadows=function(){y=!1},this.setGlobalState=function(Y,q){s=G(Y,q,0)},this.setState=function(Y,q,K){const Q=Y.clippingPlanes,ne=Y.clipIntersection,te=Y.clipShadows,J=u.get(Y);if(!d||Q===null||Q.length===0||y&&!te)y?G(null):I();else{const ie=y?0:f,re=ie*4;let le=J.clippingState||null;R.value=le,le=G(Q,q,re,K);for(let fe=0;fe!==re;++fe)le[fe]=s[fe];J.clippingState=le,this.numIntersection=ne?this.numPlanes:0,this.numPlanes+=ie}};function I(){R.value!==s&&(R.value=s,R.needsUpdate=f>0),n.numPlanes=f,n.numIntersection=0}function G(Y,q,K,Q){const ne=Y!==null?Y.length:0;let te=null;if(ne!==0){if(te=R.value,Q!==!0||te===null){const J=K+ne*4,ie=q.matrixWorldInverse;A.getNormalMatrix(ie),(te===null||te.length<J)&&(te=new Float32Array(J));for(let re=0,le=K;re!==ne;++re,le+=4)_.copy(Y[re]).applyMatrix4(ie,A),_.normal.toArray(te,le),te[le+3]=_.constant}R.value=te,R.needsUpdate=!0}return n.numPlanes=ne,n.numIntersection=0,te}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,GGX_SAMPLES=256,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0,_oldXrEnabled=!1;const _origin=new Vector3;class PMREMGenerator{constructor(n){this._renderer=n,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(n,s=0,f=.1,d=100,y={}){const{size:_=256,position:A=_origin}=y;_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(_);const R=this._allocateTargets();return R.depthBuffer=!0,this._sceneToCubeUV(n,f,d,R,A),s>0&&this._blur(R,0,0,s),this._applyPMREM(R),this._cleanup(R),R}fromEquirectangular(n,s=null){return this._fromTexture(n,s)}fromCubemap(n,s=null){return this._fromTexture(n,s)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(n){this._lodMax=Math.floor(Math.log2(n)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let n=0;n<this._lodMeshes.length;n++)this._lodMeshes[n].geometry.dispose()}_cleanup(n){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),this._renderer.xr.enabled=_oldXrEnabled,n.scissorTest=!1,_setViewport(n,0,0,n.width,n.height)}_fromTexture(n,s){n.mapping===CubeReflectionMapping||n.mapping===CubeRefractionMapping?this._setSize(n.image.length===0?16:n.image[0].width||n.image[0].image.width):this._setSize(n.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const f=s||this._allocateTargets();return this._textureToCubeUV(n,f),this._applyPMREM(f),this._cleanup(f),f}_allocateTargets(){const n=3*Math.max(this._cubeSize,112),s=4*this._cubeSize,f={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},d=_createRenderTarget(n,s,f);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==n||this._pingPongRenderTarget.height!==s){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(n,s,f);const{_lodMax:y}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=_createPlanes(y)),this._blurMaterial=_getBlurShader(y,n,s),this._ggxMaterial=_getGGXShader(y,n,s)}return d}_compileMaterial(n){const s=new Mesh(new BufferGeometry,n);this._renderer.compile(s,_flatCamera)}_sceneToCubeUV(n,s,f,d,y){const R=new PerspectiveCamera(90,1,s,f),I=[1,-1,1,1,1,1],G=[1,1,1,-1,-1,-1],Y=this._renderer,q=Y.autoClear,K=Y.toneMapping;Y.getClearColor(_clearColor),Y.toneMapping=NoToneMapping,Y.autoClear=!1,Y.state.buffers.depth.getReversed()&&(Y.setRenderTarget(d),Y.clearDepth(),Y.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Mesh(new BoxGeometry,new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1})));const ne=this._backgroundBox,te=ne.material;let J=!1;const ie=n.background;ie?ie.isColor&&(te.color.copy(ie),n.background=null,J=!0):(te.color.copy(_clearColor),J=!0);for(let re=0;re<6;re++){const le=re%3;le===0?(R.up.set(0,I[re],0),R.position.set(y.x,y.y,y.z),R.lookAt(y.x+G[re],y.y,y.z)):le===1?(R.up.set(0,0,I[re]),R.position.set(y.x,y.y,y.z),R.lookAt(y.x,y.y+G[re],y.z)):(R.up.set(0,I[re],0),R.position.set(y.x,y.y,y.z),R.lookAt(y.x,y.y,y.z+G[re]));const fe=this._cubeSize;_setViewport(d,le*fe,re>2?fe:0,fe,fe),Y.setRenderTarget(d),J&&Y.render(ne,R),Y.render(n,R)}Y.toneMapping=K,Y.autoClear=q,n.background=ie}_textureToCubeUV(n,s){const f=this._renderer,d=n.mapping===CubeReflectionMapping||n.mapping===CubeRefractionMapping;d?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=n.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const y=d?this._cubemapMaterial:this._equirectMaterial,_=this._lodMeshes[0];_.material=y;const A=y.uniforms;A.envMap.value=n;const R=this._cubeSize;_setViewport(s,0,0,3*R,2*R),f.setRenderTarget(s),f.render(_,_flatCamera)}_applyPMREM(n){const s=this._renderer,f=s.autoClear;s.autoClear=!1;const d=this._lodMeshes.length;for(let y=1;y<d;y++)this._applyGGXFilter(n,y-1,y);s.autoClear=f}_applyGGXFilter(n,s,f){const d=this._renderer,y=this._pingPongRenderTarget,_=this._ggxMaterial,A=this._lodMeshes[f];A.material=_;const R=_.uniforms,I=f/(this._lodMeshes.length-1),G=s/(this._lodMeshes.length-1),Y=Math.sqrt(I*I-G*G),q=0+I*1.25,K=Y*q,{_lodMax:Q}=this,ne=this._sizeLods[f],te=3*ne*(f>Q-LOD_MIN?f-Q+LOD_MIN:0),J=4*(this._cubeSize-ne);R.envMap.value=n.texture,R.roughness.value=K,R.mipInt.value=Q-s,_setViewport(y,te,J,3*ne,2*ne),d.setRenderTarget(y),d.render(A,_flatCamera),R.envMap.value=y.texture,R.roughness.value=0,R.mipInt.value=Q-f,_setViewport(n,te,J,3*ne,2*ne),d.setRenderTarget(n),d.render(A,_flatCamera)}_blur(n,s,f,d,y){const _=this._pingPongRenderTarget;this._halfBlur(n,_,s,f,d,"latitudinal",y),this._halfBlur(_,n,f,f,d,"longitudinal",y)}_halfBlur(n,s,f,d,y,_,A){const R=this._renderer,I=this._blurMaterial;_!=="latitudinal"&&_!=="longitudinal"&&error("blur direction must be either latitudinal or longitudinal!");const G=3,Y=this._lodMeshes[d];Y.material=I;const q=I.uniforms,K=this._sizeLods[f]-1,Q=isFinite(y)?Math.PI/(2*K):2*Math.PI/(2*MAX_SAMPLES-1),ne=y/Q,te=isFinite(y)?1+Math.floor(G*ne):MAX_SAMPLES;te>MAX_SAMPLES&&warn(`sigmaRadians, ${y}, is too large and will clip, as it requested ${te} samples when the maximum is set to ${MAX_SAMPLES}`);const J=[];let ie=0;for(let de=0;de<MAX_SAMPLES;++de){const se=de/ne,he=Math.exp(-se*se/2);J.push(he),de===0?ie+=he:de<te&&(ie+=2*he)}for(let de=0;de<J.length;de++)J[de]=J[de]/ie;q.envMap.value=n.texture,q.samples.value=te,q.weights.value=J,q.latitudinal.value=_==="latitudinal",A&&(q.poleAxis.value=A);const{_lodMax:re}=this;q.dTheta.value=Q,q.mipInt.value=re-f;const le=this._sizeLods[d],fe=3*le*(d>re-LOD_MIN?d-re+LOD_MIN:0),pe=4*(this._cubeSize-le);_setViewport(s,fe,pe,3*le,2*le),R.setRenderTarget(s),R.render(Y,_flatCamera)}}function _createPlanes(u){const n=[],s=[],f=[];let d=u;const y=u-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let _=0;_<y;_++){const A=Math.pow(2,d);n.push(A);let R=1/A;_>u-LOD_MIN?R=EXTRA_LOD_SIGMA[_-u+LOD_MIN-1]:_===0&&(R=0),s.push(R);const I=1/(A-2),G=-I,Y=1+I,q=[G,G,Y,G,Y,Y,G,G,Y,Y,G,Y],K=6,Q=6,ne=3,te=2,J=1,ie=new Float32Array(ne*Q*K),re=new Float32Array(te*Q*K),le=new Float32Array(J*Q*K);for(let pe=0;pe<K;pe++){const de=pe%3*2/3-1,se=pe>2?0:-1,he=[de,se,0,de+2/3,se,0,de+2/3,se+1,0,de,se,0,de+2/3,se+1,0,de,se+1,0];ie.set(he,ne*Q*pe),re.set(q,te*Q*pe);const Se=[pe,pe,pe,pe,pe,pe];le.set(Se,J*Q*pe)}const fe=new BufferGeometry;fe.setAttribute("position",new BufferAttribute(ie,ne)),fe.setAttribute("uv",new BufferAttribute(re,te)),fe.setAttribute("faceIndex",new BufferAttribute(le,J)),f.push(new Mesh(fe,null)),d>LOD_MIN&&d--}return{lodMeshes:f,sizeLods:n,sigmas:s}}function _createRenderTarget(u,n,s){const f=new WebGLRenderTarget(u,n,s);return f.texture.mapping=CubeUVReflectionMapping,f.texture.name="PMREM.cubeUv",f.scissorTest=!0,f}function _setViewport(u,n,s,f,d){u.viewport.set(n,s,f,d),u.scissor.set(n,s,f,d)}function _getGGXShader(u,n,s){return new ShaderMaterial({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/n,CUBEUV_TEXEL_HEIGHT:1/s,CUBEUV_MAX_MIP:`${u}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 4.1: Orthonormal basis
				vec3 T1 = vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(V, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + V.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * V;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getBlurShader(u,n,s){const f=new Float32Array(MAX_SAMPLES),d=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/n,CUBEUV_TEXEL_HEIGHT:1/s,CUBEUV_MAX_MIP:`${u}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:f},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:d}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(n=1,s={}){super(n,n,s),this.isWebGLCubeRenderTarget=!0;const f={width:n,height:n,depth:1},d=[f,f,f,f,f,f];this.texture=new CubeTexture(d),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(n,s){this.texture.type=s.type,this.texture.colorSpace=s.colorSpace,this.texture.generateMipmaps=s.generateMipmaps,this.texture.minFilter=s.minFilter,this.texture.magFilter=s.magFilter;const f={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},d=new BoxGeometry(5,5,5),y=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,side:BackSide,blending:NoBlending});y.uniforms.tEquirect.value=s;const _=new Mesh(d,y),A=s.minFilter;return s.minFilter===LinearMipmapLinearFilter&&(s.minFilter=LinearFilter),new CubeCamera(1,10,this).update(n,_),s.minFilter=A,_.geometry.dispose(),_.material.dispose(),this}clear(n,s=!0,f=!0,d=!0){const y=n.getRenderTarget();for(let _=0;_<6;_++)n.setRenderTarget(this,_),n.clear(s,f,d);n.setRenderTarget(y)}}function WebGLEnvironments(u){let n=new WeakMap,s=new WeakMap,f=null;function d(q,K=!1){return q==null?null:K?_(q):y(q)}function y(q){if(q&&q.isTexture){const K=q.mapping;if(K===EquirectangularReflectionMapping||K===EquirectangularRefractionMapping)if(n.has(q)){const Q=n.get(q).texture;return A(Q,q.mapping)}else{const Q=q.image;if(Q&&Q.height>0){const ne=new WebGLCubeRenderTarget(Q.height);return ne.fromEquirectangularTexture(u,q),n.set(q,ne),q.addEventListener("dispose",I),A(ne.texture,q.mapping)}else return null}}return q}function _(q){if(q&&q.isTexture){const K=q.mapping,Q=K===EquirectangularReflectionMapping||K===EquirectangularRefractionMapping,ne=K===CubeReflectionMapping||K===CubeRefractionMapping;if(Q||ne){let te=s.get(q);const J=te!==void 0?te.texture.pmremVersion:0;if(q.isRenderTargetTexture&&q.pmremVersion!==J)return f===null&&(f=new PMREMGenerator(u)),te=Q?f.fromEquirectangular(q,te):f.fromCubemap(q,te),te.texture.pmremVersion=q.pmremVersion,s.set(q,te),te.texture;if(te!==void 0)return te.texture;{const ie=q.image;return Q&&ie&&ie.height>0||ne&&ie&&R(ie)?(f===null&&(f=new PMREMGenerator(u)),te=Q?f.fromEquirectangular(q):f.fromCubemap(q),te.texture.pmremVersion=q.pmremVersion,s.set(q,te),q.addEventListener("dispose",G),te.texture):null}}}return q}function A(q,K){return K===EquirectangularReflectionMapping?q.mapping=CubeReflectionMapping:K===EquirectangularRefractionMapping&&(q.mapping=CubeRefractionMapping),q}function R(q){let K=0;const Q=6;for(let ne=0;ne<Q;ne++)q[ne]!==void 0&&K++;return K===Q}function I(q){const K=q.target;K.removeEventListener("dispose",I);const Q=n.get(K);Q!==void 0&&(n.delete(K),Q.dispose())}function G(q){const K=q.target;K.removeEventListener("dispose",G);const Q=s.get(K);Q!==void 0&&(s.delete(K),Q.dispose())}function Y(){n=new WeakMap,s=new WeakMap,f!==null&&(f.dispose(),f=null)}return{get:d,dispose:Y}}function WebGLExtensions(u){const n={};function s(f){if(n[f]!==void 0)return n[f];const d=u.getExtension(f);return n[f]=d,d}return{has:function(f){return s(f)!==null},init:function(){s("EXT_color_buffer_float"),s("WEBGL_clip_cull_distance"),s("OES_texture_float_linear"),s("EXT_color_buffer_half_float"),s("WEBGL_multisampled_render_to_texture"),s("WEBGL_render_shared_exponent")},get:function(f){const d=s(f);return d===null&&warnOnce("WebGLRenderer: "+f+" extension not supported."),d}}}function WebGLGeometries(u,n,s,f){const d={},y=new WeakMap;function _(Y){const q=Y.target;q.index!==null&&n.remove(q.index);for(const Q in q.attributes)n.remove(q.attributes[Q]);q.removeEventListener("dispose",_),delete d[q.id];const K=y.get(q);K&&(n.remove(K),y.delete(q)),f.releaseStatesOfGeometry(q),q.isInstancedBufferGeometry===!0&&delete q._maxInstanceCount,s.memory.geometries--}function A(Y,q){return d[q.id]===!0||(q.addEventListener("dispose",_),d[q.id]=!0,s.memory.geometries++),q}function R(Y){const q=Y.attributes;for(const K in q)n.update(q[K],u.ARRAY_BUFFER)}function I(Y){const q=[],K=Y.index,Q=Y.attributes.position;let ne=0;if(Q===void 0)return;if(K!==null){const ie=K.array;ne=K.version;for(let re=0,le=ie.length;re<le;re+=3){const fe=ie[re+0],pe=ie[re+1],de=ie[re+2];q.push(fe,pe,pe,de,de,fe)}}else{const ie=Q.array;ne=Q.version;for(let re=0,le=ie.length/3-1;re<le;re+=3){const fe=re+0,pe=re+1,de=re+2;q.push(fe,pe,pe,de,de,fe)}}const te=new(Q.count>=65535?Uint32BufferAttribute:Uint16BufferAttribute)(q,1);te.version=ne;const J=y.get(Y);J&&n.remove(J),y.set(Y,te)}function G(Y){const q=y.get(Y);if(q){const K=Y.index;K!==null&&q.version<K.version&&I(Y)}else I(Y);return y.get(Y)}return{get:A,update:R,getWireframeAttribute:G}}function WebGLIndexedBufferRenderer(u,n,s){let f;function d(q){f=q}let y,_;function A(q){y=q.type,_=q.bytesPerElement}function R(q,K){u.drawElements(f,K,y,q*_),s.update(K,f,1)}function I(q,K,Q){Q!==0&&(u.drawElementsInstanced(f,K,y,q*_,Q),s.update(K,f,Q))}function G(q,K,Q){if(Q===0)return;n.get("WEBGL_multi_draw").multiDrawElementsWEBGL(f,K,0,y,q,0,Q);let te=0;for(let J=0;J<Q;J++)te+=K[J];s.update(te,f,1)}function Y(q,K,Q,ne){if(Q===0)return;const te=n.get("WEBGL_multi_draw");if(te===null)for(let J=0;J<q.length;J++)I(q[J]/_,K[J],ne[J]);else{te.multiDrawElementsInstancedWEBGL(f,K,0,y,q,0,ne,0,Q);let J=0;for(let ie=0;ie<Q;ie++)J+=K[ie]*ne[ie];s.update(J,f,1)}}this.setMode=d,this.setIndex=A,this.render=R,this.renderInstances=I,this.renderMultiDraw=G,this.renderMultiDrawInstances=Y}function WebGLInfo(u){const n={geometries:0,textures:0},s={frame:0,calls:0,triangles:0,points:0,lines:0};function f(y,_,A){switch(s.calls++,_){case u.TRIANGLES:s.triangles+=A*(y/3);break;case u.LINES:s.lines+=A*(y/2);break;case u.LINE_STRIP:s.lines+=A*(y-1);break;case u.LINE_LOOP:s.lines+=A*y;break;case u.POINTS:s.points+=A*y;break;default:error("WebGLInfo: Unknown draw mode:",_);break}}function d(){s.calls=0,s.triangles=0,s.points=0,s.lines=0}return{memory:n,render:s,programs:null,autoReset:!0,reset:d,update:f}}function WebGLMorphtargets(u,n,s){const f=new WeakMap,d=new Vector4;function y(_,A,R){const I=_.morphTargetInfluences,G=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,Y=G!==void 0?G.length:0;let q=f.get(A);if(q===void 0||q.count!==Y){let Se=function(){se.dispose(),f.delete(A),A.removeEventListener("dispose",Se)};var K=Se;q!==void 0&&q.texture.dispose();const Q=A.morphAttributes.position!==void 0,ne=A.morphAttributes.normal!==void 0,te=A.morphAttributes.color!==void 0,J=A.morphAttributes.position||[],ie=A.morphAttributes.normal||[],re=A.morphAttributes.color||[];let le=0;Q===!0&&(le=1),ne===!0&&(le=2),te===!0&&(le=3);let fe=A.attributes.position.count*le,pe=1;fe>n.maxTextureSize&&(pe=Math.ceil(fe/n.maxTextureSize),fe=n.maxTextureSize);const de=new Float32Array(fe*pe*4*Y),se=new DataArrayTexture(de,fe,pe,Y);se.type=FloatType,se.needsUpdate=!0;const he=le*4;for(let ve=0;ve<Y;ve++){const Re=J[ve],Ee=ie[ve],Oe=re[ve],Ne=fe*pe*4*ve;for(let ye=0;ye<Re.count;ye++){const Ae=ye*he;Q===!0&&(d.fromBufferAttribute(Re,ye),de[Ne+Ae+0]=d.x,de[Ne+Ae+1]=d.y,de[Ne+Ae+2]=d.z,de[Ne+Ae+3]=0),ne===!0&&(d.fromBufferAttribute(Ee,ye),de[Ne+Ae+4]=d.x,de[Ne+Ae+5]=d.y,de[Ne+Ae+6]=d.z,de[Ne+Ae+7]=0),te===!0&&(d.fromBufferAttribute(Oe,ye),de[Ne+Ae+8]=d.x,de[Ne+Ae+9]=d.y,de[Ne+Ae+10]=d.z,de[Ne+Ae+11]=Oe.itemSize===4?d.w:1)}}q={count:Y,texture:se,size:new Vector2(fe,pe)},f.set(A,q),A.addEventListener("dispose",Se)}if(_.isInstancedMesh===!0&&_.morphTexture!==null)R.getUniforms().setValue(u,"morphTexture",_.morphTexture,s);else{let Q=0;for(let te=0;te<I.length;te++)Q+=I[te];const ne=A.morphTargetsRelative?1:1-Q;R.getUniforms().setValue(u,"morphTargetBaseInfluence",ne),R.getUniforms().setValue(u,"morphTargetInfluences",I)}R.getUniforms().setValue(u,"morphTargetsTexture",q.texture,s),R.getUniforms().setValue(u,"morphTargetsTextureSize",q.size)}return{update:y}}function WebGLObjects(u,n,s,f,d){let y=new WeakMap;function _(I){const G=d.render.frame,Y=I.geometry,q=n.get(I,Y);if(y.get(q)!==G&&(n.update(q),y.set(q,G)),I.isInstancedMesh&&(I.hasEventListener("dispose",R)===!1&&I.addEventListener("dispose",R),y.get(I)!==G&&(s.update(I.instanceMatrix,u.ARRAY_BUFFER),I.instanceColor!==null&&s.update(I.instanceColor,u.ARRAY_BUFFER),y.set(I,G))),I.isSkinnedMesh){const K=I.skeleton;y.get(K)!==G&&(K.update(),y.set(K,G))}return q}function A(){y=new WeakMap}function R(I){const G=I.target;G.removeEventListener("dispose",R),f.releaseStatesOfObject(G),s.remove(G.instanceMatrix),G.instanceColor!==null&&s.remove(G.instanceColor)}return{update:_,dispose:A}}const toneMappingMap={[LinearToneMapping]:"LINEAR_TONE_MAPPING",[ReinhardToneMapping]:"REINHARD_TONE_MAPPING",[CineonToneMapping]:"CINEON_TONE_MAPPING",[ACESFilmicToneMapping]:"ACES_FILMIC_TONE_MAPPING",[AgXToneMapping]:"AGX_TONE_MAPPING",[NeutralToneMapping]:"NEUTRAL_TONE_MAPPING",[CustomToneMapping]:"CUSTOM_TONE_MAPPING"};function WebGLOutput(u,n,s,f,d){const y=new WebGLRenderTarget(n,s,{type:u,depthBuffer:f,stencilBuffer:d}),_=new WebGLRenderTarget(n,s,{type:HalfFloatType,depthBuffer:!1,stencilBuffer:!1}),A=new BufferGeometry;A.setAttribute("position",new Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),A.setAttribute("uv",new Float32BufferAttribute([0,2,0,0,2,0],2));const R=new RawShaderMaterial({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),I=new Mesh(A,R),G=new OrthographicCamera(-1,1,1,-1,0,1);let Y=null,q=null,K=!1,Q,ne=null,te=[],J=!1;this.setSize=function(ie,re){y.setSize(ie,re),_.setSize(ie,re);for(let le=0;le<te.length;le++){const fe=te[le];fe.setSize&&fe.setSize(ie,re)}},this.setEffects=function(ie){te=ie,J=te.length>0&&te[0].isRenderPass===!0;const re=y.width,le=y.height;for(let fe=0;fe<te.length;fe++){const pe=te[fe];pe.setSize&&pe.setSize(re,le)}},this.begin=function(ie,re){if(K||ie.toneMapping===NoToneMapping&&te.length===0)return!1;if(ne=re,re!==null){const le=re.width,fe=re.height;(y.width!==le||y.height!==fe)&&this.setSize(le,fe)}return J===!1&&ie.setRenderTarget(y),Q=ie.toneMapping,ie.toneMapping=NoToneMapping,!0},this.hasRenderPass=function(){return J},this.end=function(ie,re){ie.toneMapping=Q,K=!0;let le=y,fe=_;for(let pe=0;pe<te.length;pe++){const de=te[pe];if(de.enabled!==!1&&(de.render(ie,fe,le,re),de.needsSwap!==!1)){const se=le;le=fe,fe=se}}if(Y!==ie.outputColorSpace||q!==ie.toneMapping){Y=ie.outputColorSpace,q=ie.toneMapping,R.defines={},ColorManagement.getTransfer(Y)===SRGBTransfer&&(R.defines.SRGB_TRANSFER="");const pe=toneMappingMap[q];pe&&(R.defines[pe]=""),R.needsUpdate=!0}R.uniforms.tDiffuse.value=le.texture,ie.setRenderTarget(ne),ie.render(I,G),ne=null,K=!1},this.isCompositing=function(){return K},this.dispose=function(){y.dispose(),_.dispose(),A.dispose(),R.dispose()}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1),emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(u,n,s){const f=u[0];if(f<=0||f>0)return u;const d=n*s;let y=arrayCacheF32[d];if(y===void 0&&(y=new Float32Array(d),arrayCacheF32[d]=y),n!==0){f.toArray(y,0);for(let _=1,A=0;_!==n;++_)A+=s,u[_].toArray(y,A)}return y}function arraysEqual(u,n){if(u.length!==n.length)return!1;for(let s=0,f=u.length;s<f;s++)if(u[s]!==n[s])return!1;return!0}function copyArray(u,n){for(let s=0,f=n.length;s<f;s++)u[s]=n[s]}function allocTexUnits(u,n){let s=arrayCacheI32[n];s===void 0&&(s=new Int32Array(n),arrayCacheI32[n]=s);for(let f=0;f!==n;++f)s[f]=u.allocateTextureUnit();return s}function setValueV1f(u,n){const s=this.cache;s[0]!==n&&(u.uniform1f(this.addr,n),s[0]=n)}function setValueV2f(u,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y)&&(u.uniform2f(this.addr,n.x,n.y),s[0]=n.x,s[1]=n.y);else{if(arraysEqual(s,n))return;u.uniform2fv(this.addr,n),copyArray(s,n)}}function setValueV3f(u,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z)&&(u.uniform3f(this.addr,n.x,n.y,n.z),s[0]=n.x,s[1]=n.y,s[2]=n.z);else if(n.r!==void 0)(s[0]!==n.r||s[1]!==n.g||s[2]!==n.b)&&(u.uniform3f(this.addr,n.r,n.g,n.b),s[0]=n.r,s[1]=n.g,s[2]=n.b);else{if(arraysEqual(s,n))return;u.uniform3fv(this.addr,n),copyArray(s,n)}}function setValueV4f(u,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z||s[3]!==n.w)&&(u.uniform4f(this.addr,n.x,n.y,n.z,n.w),s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=n.w);else{if(arraysEqual(s,n))return;u.uniform4fv(this.addr,n),copyArray(s,n)}}function setValueM2(u,n){const s=this.cache,f=n.elements;if(f===void 0){if(arraysEqual(s,n))return;u.uniformMatrix2fv(this.addr,!1,n),copyArray(s,n)}else{if(arraysEqual(s,f))return;mat2array.set(f),u.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(s,f)}}function setValueM3(u,n){const s=this.cache,f=n.elements;if(f===void 0){if(arraysEqual(s,n))return;u.uniformMatrix3fv(this.addr,!1,n),copyArray(s,n)}else{if(arraysEqual(s,f))return;mat3array.set(f),u.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(s,f)}}function setValueM4(u,n){const s=this.cache,f=n.elements;if(f===void 0){if(arraysEqual(s,n))return;u.uniformMatrix4fv(this.addr,!1,n),copyArray(s,n)}else{if(arraysEqual(s,f))return;mat4array.set(f),u.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(s,f)}}function setValueV1i(u,n){const s=this.cache;s[0]!==n&&(u.uniform1i(this.addr,n),s[0]=n)}function setValueV2i(u,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y)&&(u.uniform2i(this.addr,n.x,n.y),s[0]=n.x,s[1]=n.y);else{if(arraysEqual(s,n))return;u.uniform2iv(this.addr,n),copyArray(s,n)}}function setValueV3i(u,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z)&&(u.uniform3i(this.addr,n.x,n.y,n.z),s[0]=n.x,s[1]=n.y,s[2]=n.z);else{if(arraysEqual(s,n))return;u.uniform3iv(this.addr,n),copyArray(s,n)}}function setValueV4i(u,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z||s[3]!==n.w)&&(u.uniform4i(this.addr,n.x,n.y,n.z,n.w),s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=n.w);else{if(arraysEqual(s,n))return;u.uniform4iv(this.addr,n),copyArray(s,n)}}function setValueV1ui(u,n){const s=this.cache;s[0]!==n&&(u.uniform1ui(this.addr,n),s[0]=n)}function setValueV2ui(u,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y)&&(u.uniform2ui(this.addr,n.x,n.y),s[0]=n.x,s[1]=n.y);else{if(arraysEqual(s,n))return;u.uniform2uiv(this.addr,n),copyArray(s,n)}}function setValueV3ui(u,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z)&&(u.uniform3ui(this.addr,n.x,n.y,n.z),s[0]=n.x,s[1]=n.y,s[2]=n.z);else{if(arraysEqual(s,n))return;u.uniform3uiv(this.addr,n),copyArray(s,n)}}function setValueV4ui(u,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z||s[3]!==n.w)&&(u.uniform4ui(this.addr,n.x,n.y,n.z,n.w),s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=n.w);else{if(arraysEqual(s,n))return;u.uniform4uiv(this.addr,n),copyArray(s,n)}}function setValueT1(u,n,s){const f=this.cache,d=s.allocateTextureUnit();f[0]!==d&&(u.uniform1i(this.addr,d),f[0]=d);let y;this.type===u.SAMPLER_2D_SHADOW?(emptyShadowTexture.compareFunction=s.isReversedDepthBuffer()?GreaterEqualCompare:LessEqualCompare,y=emptyShadowTexture):y=emptyTexture,s.setTexture2D(n||y,d)}function setValueT3D1(u,n,s){const f=this.cache,d=s.allocateTextureUnit();f[0]!==d&&(u.uniform1i(this.addr,d),f[0]=d),s.setTexture3D(n||empty3dTexture,d)}function setValueT6(u,n,s){const f=this.cache,d=s.allocateTextureUnit();f[0]!==d&&(u.uniform1i(this.addr,d),f[0]=d),s.setTextureCube(n||emptyCubeTexture,d)}function setValueT2DArray1(u,n,s){const f=this.cache,d=s.allocateTextureUnit();f[0]!==d&&(u.uniform1i(this.addr,d),f[0]=d),s.setTexture2DArray(n||emptyArrayTexture,d)}function getSingularSetter(u){switch(u){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(u,n){u.uniform1fv(this.addr,n)}function setValueV2fArray(u,n){const s=flatten(n,this.size,2);u.uniform2fv(this.addr,s)}function setValueV3fArray(u,n){const s=flatten(n,this.size,3);u.uniform3fv(this.addr,s)}function setValueV4fArray(u,n){const s=flatten(n,this.size,4);u.uniform4fv(this.addr,s)}function setValueM2Array(u,n){const s=flatten(n,this.size,4);u.uniformMatrix2fv(this.addr,!1,s)}function setValueM3Array(u,n){const s=flatten(n,this.size,9);u.uniformMatrix3fv(this.addr,!1,s)}function setValueM4Array(u,n){const s=flatten(n,this.size,16);u.uniformMatrix4fv(this.addr,!1,s)}function setValueV1iArray(u,n){u.uniform1iv(this.addr,n)}function setValueV2iArray(u,n){u.uniform2iv(this.addr,n)}function setValueV3iArray(u,n){u.uniform3iv(this.addr,n)}function setValueV4iArray(u,n){u.uniform4iv(this.addr,n)}function setValueV1uiArray(u,n){u.uniform1uiv(this.addr,n)}function setValueV2uiArray(u,n){u.uniform2uiv(this.addr,n)}function setValueV3uiArray(u,n){u.uniform3uiv(this.addr,n)}function setValueV4uiArray(u,n){u.uniform4uiv(this.addr,n)}function setValueT1Array(u,n,s){const f=this.cache,d=n.length,y=allocTexUnits(s,d);arraysEqual(f,y)||(u.uniform1iv(this.addr,y),copyArray(f,y));let _;this.type===u.SAMPLER_2D_SHADOW?_=emptyShadowTexture:_=emptyTexture;for(let A=0;A!==d;++A)s.setTexture2D(n[A]||_,y[A])}function setValueT3DArray(u,n,s){const f=this.cache,d=n.length,y=allocTexUnits(s,d);arraysEqual(f,y)||(u.uniform1iv(this.addr,y),copyArray(f,y));for(let _=0;_!==d;++_)s.setTexture3D(n[_]||empty3dTexture,y[_])}function setValueT6Array(u,n,s){const f=this.cache,d=n.length,y=allocTexUnits(s,d);arraysEqual(f,y)||(u.uniform1iv(this.addr,y),copyArray(f,y));for(let _=0;_!==d;++_)s.setTextureCube(n[_]||emptyCubeTexture,y[_])}function setValueT2DArrayArray(u,n,s){const f=this.cache,d=n.length,y=allocTexUnits(s,d);arraysEqual(f,y)||(u.uniform1iv(this.addr,y),copyArray(f,y));for(let _=0;_!==d;++_)s.setTexture2DArray(n[_]||emptyArrayTexture,y[_])}function getPureArraySetter(u){switch(u){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(n,s,f){this.id=n,this.addr=f,this.cache=[],this.type=s.type,this.setValue=getSingularSetter(s.type)}}class PureArrayUniform{constructor(n,s,f){this.id=n,this.addr=f,this.cache=[],this.type=s.type,this.size=s.size,this.setValue=getPureArraySetter(s.type)}}class StructuredUniform{constructor(n){this.id=n,this.seq=[],this.map={}}setValue(n,s,f){const d=this.seq;for(let y=0,_=d.length;y!==_;++y){const A=d[y];A.setValue(n,s[A.id],f)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(u,n){u.seq.push(n),u.map[n.id]=n}function parseUniform(u,n,s){const f=u.name,d=f.length;for(RePathPart.lastIndex=0;;){const y=RePathPart.exec(f),_=RePathPart.lastIndex;let A=y[1];const R=y[2]==="]",I=y[3];if(R&&(A=A|0),I===void 0||I==="["&&_+2===d){addUniform(s,I===void 0?new SingleUniform(A,u,n):new PureArrayUniform(A,u,n));break}else{let Y=s.map[A];Y===void 0&&(Y=new StructuredUniform(A),addUniform(s,Y)),s=Y}}}class WebGLUniforms{constructor(n,s){this.seq=[],this.map={};const f=n.getProgramParameter(s,n.ACTIVE_UNIFORMS);for(let _=0;_<f;++_){const A=n.getActiveUniform(s,_),R=n.getUniformLocation(s,A.name);parseUniform(A,R,this)}const d=[],y=[];for(const _ of this.seq)_.type===n.SAMPLER_2D_SHADOW||_.type===n.SAMPLER_CUBE_SHADOW||_.type===n.SAMPLER_2D_ARRAY_SHADOW?d.push(_):y.push(_);d.length>0&&(this.seq=d.concat(y))}setValue(n,s,f,d){const y=this.map[s];y!==void 0&&y.setValue(n,f,d)}setOptional(n,s,f){const d=s[f];d!==void 0&&this.setValue(n,f,d)}static upload(n,s,f,d){for(let y=0,_=s.length;y!==_;++y){const A=s[y],R=f[A.id];R.needsUpdate!==!1&&A.setValue(n,R.value,d)}}static seqWithValue(n,s){const f=[];for(let d=0,y=n.length;d!==y;++d){const _=n[d];_.id in s&&f.push(_)}return f}}function WebGLShader(u,n,s){const f=u.createShader(n);return u.shaderSource(f,s),u.compileShader(f),f}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(u,n){const s=u.split(`
`),f=[],d=Math.max(n-6,0),y=Math.min(n+6,s.length);for(let _=d;_<y;_++){const A=_+1;f.push(`${A===n?">":" "} ${A}: ${s[_]}`)}return f.join(`
`)}const _m0=new Matrix3;function getEncodingComponents(u){ColorManagement._getMatrix(_m0,ColorManagement.workingColorSpace,u);const n=`mat3( ${_m0.elements.map(s=>s.toFixed(4))} )`;switch(ColorManagement.getTransfer(u)){case LinearTransfer:return[n,"LinearTransferOETF"];case SRGBTransfer:return[n,"sRGBTransferOETF"];default:return warn("WebGLProgram: Unsupported color space: ",u),[n,"LinearTransferOETF"]}}function getShaderErrors(u,n,s){const f=u.getShaderParameter(n,u.COMPILE_STATUS),y=(u.getShaderInfoLog(n)||"").trim();if(f&&y==="")return"";const _=/ERROR: 0:(\d+)/.exec(y);if(_){const A=parseInt(_[1]);return s.toUpperCase()+`

`+y+`

`+handleSource(u.getShaderSource(n),A)}else return y}function getTexelEncodingFunction(u,n){const s=getEncodingComponents(n);return[`vec4 ${u}( vec4 value ) {`,`	return ${s[1]}( vec4( value.rgb * ${s[0]}, value.a ) );`,"}"].join(`
`)}const toneMappingFunctions={[LinearToneMapping]:"Linear",[ReinhardToneMapping]:"Reinhard",[CineonToneMapping]:"Cineon",[ACESFilmicToneMapping]:"ACESFilmic",[AgXToneMapping]:"AgX",[NeutralToneMapping]:"Neutral",[CustomToneMapping]:"Custom"};function getToneMappingFunction(u,n){const s=toneMappingFunctions[n];return s===void 0?(warn("WebGLProgram: Unsupported toneMapping:",n),"vec3 "+u+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+u+"( vec3 color ) { return "+s+"ToneMapping( color ); }"}const _v0=new Vector3;function getLuminanceFunction(){ColorManagement.getLuminanceCoefficients(_v0);const u=_v0.x.toFixed(4),n=_v0.y.toFixed(4),s=_v0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${u}, ${n}, ${s} );`,"	return dot( weights, rgb );","}"].join(`
`)}function generateVertexExtensions(u){return[u.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",u.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(u){const n=[];for(const s in u){const f=u[s];f!==!1&&n.push("#define "+s+" "+f)}return n.join(`
`)}function fetchAttributeLocations(u,n){const s={},f=u.getProgramParameter(n,u.ACTIVE_ATTRIBUTES);for(let d=0;d<f;d++){const y=u.getActiveAttrib(n,d),_=y.name;let A=1;y.type===u.FLOAT_MAT2&&(A=2),y.type===u.FLOAT_MAT3&&(A=3),y.type===u.FLOAT_MAT4&&(A=4),s[_]={type:y.type,location:u.getAttribLocation(n,_),locationSize:A}}return s}function filterEmptyLine(u){return u!==""}function replaceLightNums(u,n){const s=n.numSpotLightShadows+n.numSpotLightMaps-n.numSpotLightShadowsWithMaps;return u.replace(/NUM_DIR_LIGHTS/g,n.numDirLights).replace(/NUM_SPOT_LIGHTS/g,n.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,n.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,s).replace(/NUM_RECT_AREA_LIGHTS/g,n.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,n.numPointLights).replace(/NUM_HEMI_LIGHTS/g,n.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,n.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,n.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,n.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,n.numPointLightShadows)}function replaceClippingPlaneNums(u,n){return u.replace(/NUM_CLIPPING_PLANES/g,n.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,n.numClippingPlanes-n.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(u){return u.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map;function includeReplacer(u,n){let s=ShaderChunk[n];if(s===void 0){const f=shaderChunkMap.get(n);if(f!==void 0)s=ShaderChunk[f],warn('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',n,f);else throw new Error("Can not resolve #include <"+n+">")}return resolveIncludes(s)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(u){return u.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(u,n,s,f){let d="";for(let y=parseInt(n);y<parseInt(s);y++)d+=f.replace(/\[\s*i\s*\]/g,"[ "+y+" ]").replace(/UNROLLED_LOOP_INDEX/g,y);return d}function generatePrecision(u){let n=`precision ${u.precision} float;
	precision ${u.precision} int;
	precision ${u.precision} sampler2D;
	precision ${u.precision} samplerCube;
	precision ${u.precision} sampler3D;
	precision ${u.precision} sampler2DArray;
	precision ${u.precision} sampler2DShadow;
	precision ${u.precision} samplerCubeShadow;
	precision ${u.precision} sampler2DArrayShadow;
	precision ${u.precision} isampler2D;
	precision ${u.precision} isampler3D;
	precision ${u.precision} isamplerCube;
	precision ${u.precision} isampler2DArray;
	precision ${u.precision} usampler2D;
	precision ${u.precision} usampler3D;
	precision ${u.precision} usamplerCube;
	precision ${u.precision} usampler2DArray;
	`;return u.precision==="highp"?n+=`
#define HIGH_PRECISION`:u.precision==="mediump"?n+=`
#define MEDIUM_PRECISION`:u.precision==="lowp"&&(n+=`
#define LOW_PRECISION`),n}const shadowMapTypeDefines={[PCFShadowMap]:"SHADOWMAP_TYPE_PCF",[VSMShadowMap]:"SHADOWMAP_TYPE_VSM"};function generateShadowMapTypeDefine(u){return shadowMapTypeDefines[u.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const envMapTypeDefines={[CubeReflectionMapping]:"ENVMAP_TYPE_CUBE",[CubeRefractionMapping]:"ENVMAP_TYPE_CUBE",[CubeUVReflectionMapping]:"ENVMAP_TYPE_CUBE_UV"};function generateEnvMapTypeDefine(u){return u.envMap===!1?"ENVMAP_TYPE_CUBE":envMapTypeDefines[u.envMapMode]||"ENVMAP_TYPE_CUBE"}const envMapModeDefines={[CubeRefractionMapping]:"ENVMAP_MODE_REFRACTION"};function generateEnvMapModeDefine(u){return u.envMap===!1?"ENVMAP_MODE_REFLECTION":envMapModeDefines[u.envMapMode]||"ENVMAP_MODE_REFLECTION"}const envMapBlendingDefines={[MultiplyOperation]:"ENVMAP_BLENDING_MULTIPLY",[MixOperation]:"ENVMAP_BLENDING_MIX",[AddOperation]:"ENVMAP_BLENDING_ADD"};function generateEnvMapBlendingDefine(u){return u.envMap===!1?"ENVMAP_BLENDING_NONE":envMapBlendingDefines[u.combine]||"ENVMAP_BLENDING_NONE"}function generateCubeUVSize(u){const n=u.envMapCubeUVHeight;if(n===null)return null;const s=Math.log2(n)-2,f=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,s),112)),texelHeight:f,maxMip:s}}function WebGLProgram(u,n,s,f){const d=u.getContext(),y=s.defines;let _=s.vertexShader,A=s.fragmentShader;const R=generateShadowMapTypeDefine(s),I=generateEnvMapTypeDefine(s),G=generateEnvMapModeDefine(s),Y=generateEnvMapBlendingDefine(s),q=generateCubeUVSize(s),K=generateVertexExtensions(s),Q=generateDefines(y),ne=d.createProgram();let te,J,ie=s.glslVersion?"#version "+s.glslVersion+`
`:"";s.isRawShaderMaterial?(te=["#define SHADER_TYPE "+s.shaderType,"#define SHADER_NAME "+s.shaderName,Q].filter(filterEmptyLine).join(`
`),te.length>0&&(te+=`
`),J=["#define SHADER_TYPE "+s.shaderType,"#define SHADER_NAME "+s.shaderName,Q].filter(filterEmptyLine).join(`
`),J.length>0&&(J+=`
`)):(te=[generatePrecision(s),"#define SHADER_TYPE "+s.shaderType,"#define SHADER_NAME "+s.shaderName,Q,s.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",s.batching?"#define USE_BATCHING":"",s.batchingColor?"#define USE_BATCHING_COLOR":"",s.instancing?"#define USE_INSTANCING":"",s.instancingColor?"#define USE_INSTANCING_COLOR":"",s.instancingMorph?"#define USE_INSTANCING_MORPH":"",s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+G:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",s.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",s.displacementMap?"#define USE_DISPLACEMENTMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.anisotropy?"#define USE_ANISOTROPY":"",s.anisotropyMap?"#define USE_ANISOTROPYMAP":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",s.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",s.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.alphaHash?"#define USE_ALPHAHASH":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",s.mapUv?"#define MAP_UV "+s.mapUv:"",s.alphaMapUv?"#define ALPHAMAP_UV "+s.alphaMapUv:"",s.lightMapUv?"#define LIGHTMAP_UV "+s.lightMapUv:"",s.aoMapUv?"#define AOMAP_UV "+s.aoMapUv:"",s.emissiveMapUv?"#define EMISSIVEMAP_UV "+s.emissiveMapUv:"",s.bumpMapUv?"#define BUMPMAP_UV "+s.bumpMapUv:"",s.normalMapUv?"#define NORMALMAP_UV "+s.normalMapUv:"",s.displacementMapUv?"#define DISPLACEMENTMAP_UV "+s.displacementMapUv:"",s.metalnessMapUv?"#define METALNESSMAP_UV "+s.metalnessMapUv:"",s.roughnessMapUv?"#define ROUGHNESSMAP_UV "+s.roughnessMapUv:"",s.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+s.anisotropyMapUv:"",s.clearcoatMapUv?"#define CLEARCOATMAP_UV "+s.clearcoatMapUv:"",s.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+s.clearcoatNormalMapUv:"",s.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+s.clearcoatRoughnessMapUv:"",s.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+s.iridescenceMapUv:"",s.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+s.iridescenceThicknessMapUv:"",s.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+s.sheenColorMapUv:"",s.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+s.sheenRoughnessMapUv:"",s.specularMapUv?"#define SPECULARMAP_UV "+s.specularMapUv:"",s.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+s.specularColorMapUv:"",s.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+s.specularIntensityMapUv:"",s.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+s.transmissionMapUv:"",s.thicknessMapUv?"#define THICKNESSMAP_UV "+s.thicknessMapUv:"",s.vertexTangents&&s.flatShading===!1?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUv1s?"#define USE_UV1":"",s.vertexUv2s?"#define USE_UV2":"",s.vertexUv3s?"#define USE_UV3":"",s.pointsUvs?"#define USE_POINTS_UV":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&s.flatShading===!1?"#define USE_MORPHNORMALS":"",s.morphColors?"#define USE_MORPHCOLORS":"",s.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+s.morphTextureStride:"",s.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+s.morphTargetsCount:"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+R:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.numLightProbes>0?"#define USE_LIGHT_PROBES":"",s.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",s.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),J=[generatePrecision(s),"#define SHADER_TYPE "+s.shaderType,"#define SHADER_NAME "+s.shaderName,Q,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",s.map?"#define USE_MAP":"",s.matcap?"#define USE_MATCAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+I:"",s.envMap?"#define "+G:"",s.envMap?"#define "+Y:"",q?"#define CUBEUV_TEXEL_WIDTH "+q.texelWidth:"",q?"#define CUBEUV_TEXEL_HEIGHT "+q.texelHeight:"",q?"#define CUBEUV_MAX_MIP "+q.maxMip+".0":"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",s.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.anisotropy?"#define USE_ANISOTROPY":"",s.anisotropyMap?"#define USE_ANISOTROPYMAP":"",s.clearcoat?"#define USE_CLEARCOAT":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.dispersion?"#define USE_DISPERSION":"",s.iridescence?"#define USE_IRIDESCENCE":"",s.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",s.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",s.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.alphaTest?"#define USE_ALPHATEST":"",s.alphaHash?"#define USE_ALPHAHASH":"",s.sheen?"#define USE_SHEEN":"",s.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.vertexTangents&&s.flatShading===!1?"#define USE_TANGENT":"",s.vertexColors||s.instancingColor?"#define USE_COLOR":"",s.vertexAlphas||s.batchingColor?"#define USE_COLOR_ALPHA":"",s.vertexUv1s?"#define USE_UV1":"",s.vertexUv2s?"#define USE_UV2":"",s.vertexUv3s?"#define USE_UV3":"",s.pointsUvs?"#define USE_POINTS_UV":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+R:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.numLightProbes>0?"#define USE_LIGHT_PROBES":"",s.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",s.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",s.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",s.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",s.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",s.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",s.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",s.toneMapping):"",s.dithering?"#define DITHERING":"",s.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",s.outputColorSpace),getLuminanceFunction(),s.useDepthPacking?"#define DEPTH_PACKING "+s.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),_=resolveIncludes(_),_=replaceLightNums(_,s),_=replaceClippingPlaneNums(_,s),A=resolveIncludes(A),A=replaceLightNums(A,s),A=replaceClippingPlaneNums(A,s),_=unrollLoops(_),A=unrollLoops(A),s.isRawShaderMaterial!==!0&&(ie=`#version 300 es
`,te=[K,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+te,J=["#define varying in",s.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",s.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+J);const re=ie+te+_,le=ie+J+A,fe=WebGLShader(d,d.VERTEX_SHADER,re),pe=WebGLShader(d,d.FRAGMENT_SHADER,le);d.attachShader(ne,fe),d.attachShader(ne,pe),s.index0AttributeName!==void 0?d.bindAttribLocation(ne,0,s.index0AttributeName):s.morphTargets===!0&&d.bindAttribLocation(ne,0,"position"),d.linkProgram(ne);function de(ve){if(u.debug.checkShaderErrors){const Re=d.getProgramInfoLog(ne)||"",Ee=d.getShaderInfoLog(fe)||"",Oe=d.getShaderInfoLog(pe)||"",Ne=Re.trim(),ye=Ee.trim(),Ae=Oe.trim();let _e=!0,Te=!0;if(d.getProgramParameter(ne,d.LINK_STATUS)===!1)if(_e=!1,typeof u.debug.onShaderError=="function")u.debug.onShaderError(d,ne,fe,pe);else{const we=getShaderErrors(d,fe,"vertex"),ge=getShaderErrors(d,pe,"fragment");error("THREE.WebGLProgram: Shader Error "+d.getError()+" - VALIDATE_STATUS "+d.getProgramParameter(ne,d.VALIDATE_STATUS)+`

Material Name: `+ve.name+`
Material Type: `+ve.type+`

Program Info Log: `+Ne+`
`+we+`
`+ge)}else Ne!==""?warn("WebGLProgram: Program Info Log:",Ne):(ye===""||Ae==="")&&(Te=!1);Te&&(ve.diagnostics={runnable:_e,programLog:Ne,vertexShader:{log:ye,prefix:te},fragmentShader:{log:Ae,prefix:J}})}d.deleteShader(fe),d.deleteShader(pe),se=new WebGLUniforms(d,ne),he=fetchAttributeLocations(d,ne)}let se;this.getUniforms=function(){return se===void 0&&de(this),se};let he;this.getAttributes=function(){return he===void 0&&de(this),he};let Se=s.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Se===!1&&(Se=d.getProgramParameter(ne,COMPLETION_STATUS_KHR)),Se},this.destroy=function(){f.releaseStatesOfProgram(this),d.deleteProgram(ne),this.program=void 0},this.type=s.shaderType,this.name=s.shaderName,this.id=programIdCount++,this.cacheKey=n,this.usedTimes=1,this.program=ne,this.vertexShader=fe,this.fragmentShader=pe,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(n){const s=n.vertexShader,f=n.fragmentShader,d=this._getShaderStage(s),y=this._getShaderStage(f),_=this._getShaderCacheForMaterial(n);return _.has(d)===!1&&(_.add(d),d.usedTimes++),_.has(y)===!1&&(_.add(y),y.usedTimes++),this}remove(n){const s=this.materialCache.get(n);for(const f of s)f.usedTimes--,f.usedTimes===0&&this.shaderCache.delete(f.code);return this.materialCache.delete(n),this}getVertexShaderID(n){return this._getShaderStage(n.vertexShader).id}getFragmentShaderID(n){return this._getShaderStage(n.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(n){const s=this.materialCache;let f=s.get(n);return f===void 0&&(f=new Set,s.set(n,f)),f}_getShaderStage(n){const s=this.shaderCache;let f=s.get(n);return f===void 0&&(f=new WebGLShaderStage(n),s.set(n,f)),f}}class WebGLShaderStage{constructor(n){this.id=_id++,this.code=n,this.usedTimes=0}}function WebGLPrograms(u,n,s,f,d,y){const _=new Layers,A=new WebGLShaderCache,R=new Set,I=[],G=new Map,Y=f.logarithmicDepthBuffer;let q=f.precision;const K={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function Q(se){return R.add(se),se===0?"uv":`uv${se}`}function ne(se,he,Se,ve,Re){const Ee=ve.fog,Oe=Re.geometry,Ne=se.isMeshStandardMaterial||se.isMeshLambertMaterial||se.isMeshPhongMaterial?ve.environment:null,ye=se.isMeshStandardMaterial||se.isMeshLambertMaterial&&!se.envMap||se.isMeshPhongMaterial&&!se.envMap,Ae=n.get(se.envMap||Ne,ye),_e=Ae&&Ae.mapping===CubeUVReflectionMapping?Ae.image.height:null,Te=K[se.type];se.precision!==null&&(q=f.getMaxPrecision(se.precision),q!==se.precision&&warn("WebGLProgram.getParameters:",se.precision,"not supported, using",q,"instead."));const we=Oe.morphAttributes.position||Oe.morphAttributes.normal||Oe.morphAttributes.color,ge=we!==void 0?we.length:0;let De=0;Oe.morphAttributes.position!==void 0&&(De=1),Oe.morphAttributes.normal!==void 0&&(De=2),Oe.morphAttributes.color!==void 0&&(De=3);let ze,He,yt,Ge;if(Te){const Ii=ShaderLib[Te];ze=Ii.vertexShader,He=Ii.fragmentShader}else ze=se.vertexShader,He=se.fragmentShader,A.update(se),yt=A.getVertexShaderID(se),Ge=A.getFragmentShaderID(se);const lt=u.getRenderTarget(),Mt=u.state.buffers.depth.getReversed(),hn=Re.isInstancedMesh===!0,Fn=Re.isBatchedMesh===!0,Vn=!!se.map,ni=!!se.matcap,In=!!Ae,qe=!!se.aoMap,vn=!!se.lightMap,dn=!!se.bumpMap,Mn=!!se.normalMap,je=!!se.displacementMap,qn=!!se.emissiveMap,An=!!se.metalnessMap,ri=!!se.roughnessMap,On=se.anisotropy>0,Be=se.clearcoat>0,Pe=se.dispersion>0,Ke=se.iridescence>0,Ft=se.sheen>0,bn=se.transmission>0,ln=On&&!!se.anisotropyMap,Zn=Be&&!!se.clearcoatMap,Gn=Be&&!!se.clearcoatNormalMap,fi=Be&&!!se.clearcoatRoughnessMap,xi=Ke&&!!se.iridescenceMap,wn=Ke&&!!se.iridescenceThicknessMap,Tn=Ft&&!!se.sheenColorMap,oi=Ft&&!!se.sheenRoughnessMap,Jn=!!se.specularMap,ei=!!se.specularColorMap,gi=!!se.specularIntensityMap,dt=bn&&!!se.transmissionMap,kt=bn&&!!se.thicknessMap,Hn=!!se.gradientMap,Kn=!!se.alphaMap,Bn=se.alphaTest>0,pn=!!se.alphaHash,ci=!!se.extensions;let Ai=NoToneMapping;se.toneMapped&&(lt===null||lt.isXRRenderTarget===!0)&&(Ai=u.toneMapping);const ji={shaderID:Te,shaderType:se.type,shaderName:se.name,vertexShader:ze,fragmentShader:He,defines:se.defines,customVertexShaderID:yt,customFragmentShaderID:Ge,isRawShaderMaterial:se.isRawShaderMaterial===!0,glslVersion:se.glslVersion,precision:q,batching:Fn,batchingColor:Fn&&Re._colorsTexture!==null,instancing:hn,instancingColor:hn&&Re.instanceColor!==null,instancingMorph:hn&&Re.morphTexture!==null,outputColorSpace:lt===null?u.outputColorSpace:lt.isXRRenderTarget===!0?lt.texture.colorSpace:LinearSRGBColorSpace,alphaToCoverage:!!se.alphaToCoverage,map:Vn,matcap:ni,envMap:In,envMapMode:In&&Ae.mapping,envMapCubeUVHeight:_e,aoMap:qe,lightMap:vn,bumpMap:dn,normalMap:Mn,displacementMap:je,emissiveMap:qn,normalMapObjectSpace:Mn&&se.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:Mn&&se.normalMapType===TangentSpaceNormalMap,metalnessMap:An,roughnessMap:ri,anisotropy:On,anisotropyMap:ln,clearcoat:Be,clearcoatMap:Zn,clearcoatNormalMap:Gn,clearcoatRoughnessMap:fi,dispersion:Pe,iridescence:Ke,iridescenceMap:xi,iridescenceThicknessMap:wn,sheen:Ft,sheenColorMap:Tn,sheenRoughnessMap:oi,specularMap:Jn,specularColorMap:ei,specularIntensityMap:gi,transmission:bn,transmissionMap:dt,thicknessMap:kt,gradientMap:Hn,opaque:se.transparent===!1&&se.blending===NormalBlending&&se.alphaToCoverage===!1,alphaMap:Kn,alphaTest:Bn,alphaHash:pn,combine:se.combine,mapUv:Vn&&Q(se.map.channel),aoMapUv:qe&&Q(se.aoMap.channel),lightMapUv:vn&&Q(se.lightMap.channel),bumpMapUv:dn&&Q(se.bumpMap.channel),normalMapUv:Mn&&Q(se.normalMap.channel),displacementMapUv:je&&Q(se.displacementMap.channel),emissiveMapUv:qn&&Q(se.emissiveMap.channel),metalnessMapUv:An&&Q(se.metalnessMap.channel),roughnessMapUv:ri&&Q(se.roughnessMap.channel),anisotropyMapUv:ln&&Q(se.anisotropyMap.channel),clearcoatMapUv:Zn&&Q(se.clearcoatMap.channel),clearcoatNormalMapUv:Gn&&Q(se.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:fi&&Q(se.clearcoatRoughnessMap.channel),iridescenceMapUv:xi&&Q(se.iridescenceMap.channel),iridescenceThicknessMapUv:wn&&Q(se.iridescenceThicknessMap.channel),sheenColorMapUv:Tn&&Q(se.sheenColorMap.channel),sheenRoughnessMapUv:oi&&Q(se.sheenRoughnessMap.channel),specularMapUv:Jn&&Q(se.specularMap.channel),specularColorMapUv:ei&&Q(se.specularColorMap.channel),specularIntensityMapUv:gi&&Q(se.specularIntensityMap.channel),transmissionMapUv:dt&&Q(se.transmissionMap.channel),thicknessMapUv:kt&&Q(se.thicknessMap.channel),alphaMapUv:Kn&&Q(se.alphaMap.channel),vertexTangents:!!Oe.attributes.tangent&&(Mn||On),vertexColors:se.vertexColors,vertexAlphas:se.vertexColors===!0&&!!Oe.attributes.color&&Oe.attributes.color.itemSize===4,pointsUvs:Re.isPoints===!0&&!!Oe.attributes.uv&&(Vn||Kn),fog:!!Ee,useFog:se.fog===!0,fogExp2:!!Ee&&Ee.isFogExp2,flatShading:se.wireframe===!1&&(se.flatShading===!0||Oe.attributes.normal===void 0&&Mn===!1&&(se.isMeshLambertMaterial||se.isMeshPhongMaterial||se.isMeshStandardMaterial||se.isMeshPhysicalMaterial)),sizeAttenuation:se.sizeAttenuation===!0,logarithmicDepthBuffer:Y,reversedDepthBuffer:Mt,skinning:Re.isSkinnedMesh===!0,morphTargets:Oe.morphAttributes.position!==void 0,morphNormals:Oe.morphAttributes.normal!==void 0,morphColors:Oe.morphAttributes.color!==void 0,morphTargetsCount:ge,morphTextureStride:De,numDirLights:he.directional.length,numPointLights:he.point.length,numSpotLights:he.spot.length,numSpotLightMaps:he.spotLightMap.length,numRectAreaLights:he.rectArea.length,numHemiLights:he.hemi.length,numDirLightShadows:he.directionalShadowMap.length,numPointLightShadows:he.pointShadowMap.length,numSpotLightShadows:he.spotShadowMap.length,numSpotLightShadowsWithMaps:he.numSpotLightShadowsWithMaps,numLightProbes:he.numLightProbes,numClippingPlanes:y.numPlanes,numClipIntersection:y.numIntersection,dithering:se.dithering,shadowMapEnabled:u.shadowMap.enabled&&Se.length>0,shadowMapType:u.shadowMap.type,toneMapping:Ai,decodeVideoTexture:Vn&&se.map.isVideoTexture===!0&&ColorManagement.getTransfer(se.map.colorSpace)===SRGBTransfer,decodeVideoTextureEmissive:qn&&se.emissiveMap.isVideoTexture===!0&&ColorManagement.getTransfer(se.emissiveMap.colorSpace)===SRGBTransfer,premultipliedAlpha:se.premultipliedAlpha,doubleSided:se.side===DoubleSide,flipSided:se.side===BackSide,useDepthPacking:se.depthPacking>=0,depthPacking:se.depthPacking||0,index0AttributeName:se.index0AttributeName,extensionClipCullDistance:ci&&se.extensions.clipCullDistance===!0&&s.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ci&&se.extensions.multiDraw===!0||Fn)&&s.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:s.has("KHR_parallel_shader_compile"),customProgramCacheKey:se.customProgramCacheKey()};return ji.vertexUv1s=R.has(1),ji.vertexUv2s=R.has(2),ji.vertexUv3s=R.has(3),R.clear(),ji}function te(se){const he=[];if(se.shaderID?he.push(se.shaderID):(he.push(se.customVertexShaderID),he.push(se.customFragmentShaderID)),se.defines!==void 0)for(const Se in se.defines)he.push(Se),he.push(se.defines[Se]);return se.isRawShaderMaterial===!1&&(J(he,se),ie(he,se),he.push(u.outputColorSpace)),he.push(se.customProgramCacheKey),he.join()}function J(se,he){se.push(he.precision),se.push(he.outputColorSpace),se.push(he.envMapMode),se.push(he.envMapCubeUVHeight),se.push(he.mapUv),se.push(he.alphaMapUv),se.push(he.lightMapUv),se.push(he.aoMapUv),se.push(he.bumpMapUv),se.push(he.normalMapUv),se.push(he.displacementMapUv),se.push(he.emissiveMapUv),se.push(he.metalnessMapUv),se.push(he.roughnessMapUv),se.push(he.anisotropyMapUv),se.push(he.clearcoatMapUv),se.push(he.clearcoatNormalMapUv),se.push(he.clearcoatRoughnessMapUv),se.push(he.iridescenceMapUv),se.push(he.iridescenceThicknessMapUv),se.push(he.sheenColorMapUv),se.push(he.sheenRoughnessMapUv),se.push(he.specularMapUv),se.push(he.specularColorMapUv),se.push(he.specularIntensityMapUv),se.push(he.transmissionMapUv),se.push(he.thicknessMapUv),se.push(he.combine),se.push(he.fogExp2),se.push(he.sizeAttenuation),se.push(he.morphTargetsCount),se.push(he.morphAttributeCount),se.push(he.numDirLights),se.push(he.numPointLights),se.push(he.numSpotLights),se.push(he.numSpotLightMaps),se.push(he.numHemiLights),se.push(he.numRectAreaLights),se.push(he.numDirLightShadows),se.push(he.numPointLightShadows),se.push(he.numSpotLightShadows),se.push(he.numSpotLightShadowsWithMaps),se.push(he.numLightProbes),se.push(he.shadowMapType),se.push(he.toneMapping),se.push(he.numClippingPlanes),se.push(he.numClipIntersection),se.push(he.depthPacking)}function ie(se,he){_.disableAll(),he.instancing&&_.enable(0),he.instancingColor&&_.enable(1),he.instancingMorph&&_.enable(2),he.matcap&&_.enable(3),he.envMap&&_.enable(4),he.normalMapObjectSpace&&_.enable(5),he.normalMapTangentSpace&&_.enable(6),he.clearcoat&&_.enable(7),he.iridescence&&_.enable(8),he.alphaTest&&_.enable(9),he.vertexColors&&_.enable(10),he.vertexAlphas&&_.enable(11),he.vertexUv1s&&_.enable(12),he.vertexUv2s&&_.enable(13),he.vertexUv3s&&_.enable(14),he.vertexTangents&&_.enable(15),he.anisotropy&&_.enable(16),he.alphaHash&&_.enable(17),he.batching&&_.enable(18),he.dispersion&&_.enable(19),he.batchingColor&&_.enable(20),he.gradientMap&&_.enable(21),se.push(_.mask),_.disableAll(),he.fog&&_.enable(0),he.useFog&&_.enable(1),he.flatShading&&_.enable(2),he.logarithmicDepthBuffer&&_.enable(3),he.reversedDepthBuffer&&_.enable(4),he.skinning&&_.enable(5),he.morphTargets&&_.enable(6),he.morphNormals&&_.enable(7),he.morphColors&&_.enable(8),he.premultipliedAlpha&&_.enable(9),he.shadowMapEnabled&&_.enable(10),he.doubleSided&&_.enable(11),he.flipSided&&_.enable(12),he.useDepthPacking&&_.enable(13),he.dithering&&_.enable(14),he.transmission&&_.enable(15),he.sheen&&_.enable(16),he.opaque&&_.enable(17),he.pointsUvs&&_.enable(18),he.decodeVideoTexture&&_.enable(19),he.decodeVideoTextureEmissive&&_.enable(20),he.alphaToCoverage&&_.enable(21),se.push(_.mask)}function re(se){const he=K[se.type];let Se;if(he){const ve=ShaderLib[he];Se=UniformsUtils.clone(ve.uniforms)}else Se=se.uniforms;return Se}function le(se,he){let Se=G.get(he);return Se!==void 0?++Se.usedTimes:(Se=new WebGLProgram(u,he,se,d),I.push(Se),G.set(he,Se)),Se}function fe(se){if(--se.usedTimes===0){const he=I.indexOf(se);I[he]=I[I.length-1],I.pop(),G.delete(se.cacheKey),se.destroy()}}function pe(se){A.remove(se)}function de(){A.dispose()}return{getParameters:ne,getProgramCacheKey:te,getUniforms:re,acquireProgram:le,releaseProgram:fe,releaseShaderCache:pe,programs:I,dispose:de}}function WebGLProperties(){let u=new WeakMap;function n(_){return u.has(_)}function s(_){let A=u.get(_);return A===void 0&&(A={},u.set(_,A)),A}function f(_){u.delete(_)}function d(_,A,R){u.get(_)[A]=R}function y(){u=new WeakMap}return{has:n,get:s,remove:f,update:d,dispose:y}}function painterSortStable(u,n){return u.groupOrder!==n.groupOrder?u.groupOrder-n.groupOrder:u.renderOrder!==n.renderOrder?u.renderOrder-n.renderOrder:u.material.id!==n.material.id?u.material.id-n.material.id:u.materialVariant!==n.materialVariant?u.materialVariant-n.materialVariant:u.z!==n.z?u.z-n.z:u.id-n.id}function reversePainterSortStable(u,n){return u.groupOrder!==n.groupOrder?u.groupOrder-n.groupOrder:u.renderOrder!==n.renderOrder?u.renderOrder-n.renderOrder:u.z!==n.z?n.z-u.z:u.id-n.id}function WebGLRenderList(){const u=[];let n=0;const s=[],f=[],d=[];function y(){n=0,s.length=0,f.length=0,d.length=0}function _(q){let K=0;return q.isInstancedMesh&&(K+=2),q.isSkinnedMesh&&(K+=1),K}function A(q,K,Q,ne,te,J){let ie=u[n];return ie===void 0?(ie={id:q.id,object:q,geometry:K,material:Q,materialVariant:_(q),groupOrder:ne,renderOrder:q.renderOrder,z:te,group:J},u[n]=ie):(ie.id=q.id,ie.object=q,ie.geometry=K,ie.material=Q,ie.materialVariant=_(q),ie.groupOrder=ne,ie.renderOrder=q.renderOrder,ie.z=te,ie.group=J),n++,ie}function R(q,K,Q,ne,te,J){const ie=A(q,K,Q,ne,te,J);Q.transmission>0?f.push(ie):Q.transparent===!0?d.push(ie):s.push(ie)}function I(q,K,Q,ne,te,J){const ie=A(q,K,Q,ne,te,J);Q.transmission>0?f.unshift(ie):Q.transparent===!0?d.unshift(ie):s.unshift(ie)}function G(q,K){s.length>1&&s.sort(q||painterSortStable),f.length>1&&f.sort(K||reversePainterSortStable),d.length>1&&d.sort(K||reversePainterSortStable)}function Y(){for(let q=n,K=u.length;q<K;q++){const Q=u[q];if(Q.id===null)break;Q.id=null,Q.object=null,Q.geometry=null,Q.material=null,Q.group=null}}return{opaque:s,transmissive:f,transparent:d,init:y,push:R,unshift:I,finish:Y,sort:G}}function WebGLRenderLists(){let u=new WeakMap;function n(f,d){const y=u.get(f);let _;return y===void 0?(_=new WebGLRenderList,u.set(f,[_])):d>=y.length?(_=new WebGLRenderList,y.push(_)):_=y[d],_}function s(){u=new WeakMap}return{get:n,dispose:s}}function UniformsCache(){const u={};return{get:function(n){if(u[n.id]!==void 0)return u[n.id];let s;switch(n.type){case"DirectionalLight":s={direction:new Vector3,color:new Color};break;case"SpotLight":s={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":s={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":s={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":s={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return u[n.id]=s,s}}}function ShadowUniformsCache(){const u={};return{get:function(n){if(u[n.id]!==void 0)return u[n.id];let s;switch(n.type){case"DirectionalLight":s={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":s={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":s={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return u[n.id]=s,s}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(u,n){return(n.castShadow?2:0)-(u.castShadow?2:0)+(n.map?1:0)-(u.map?1:0)}function WebGLLights(u){const n=new UniformsCache,s=ShadowUniformsCache(),f={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let I=0;I<9;I++)f.probe.push(new Vector3);const d=new Vector3,y=new Matrix4,_=new Matrix4;function A(I){let G=0,Y=0,q=0;for(let he=0;he<9;he++)f.probe[he].set(0,0,0);let K=0,Q=0,ne=0,te=0,J=0,ie=0,re=0,le=0,fe=0,pe=0,de=0;I.sort(shadowCastingAndTexturingLightsFirst);for(let he=0,Se=I.length;he<Se;he++){const ve=I[he],Re=ve.color,Ee=ve.intensity,Oe=ve.distance;let Ne=null;if(ve.shadow&&ve.shadow.map&&(ve.shadow.map.texture.format===RGFormat?Ne=ve.shadow.map.texture:Ne=ve.shadow.map.depthTexture||ve.shadow.map.texture),ve.isAmbientLight)G+=Re.r*Ee,Y+=Re.g*Ee,q+=Re.b*Ee;else if(ve.isLightProbe){for(let ye=0;ye<9;ye++)f.probe[ye].addScaledVector(ve.sh.coefficients[ye],Ee);de++}else if(ve.isDirectionalLight){const ye=n.get(ve);if(ye.color.copy(ve.color).multiplyScalar(ve.intensity),ve.castShadow){const Ae=ve.shadow,_e=s.get(ve);_e.shadowIntensity=Ae.intensity,_e.shadowBias=Ae.bias,_e.shadowNormalBias=Ae.normalBias,_e.shadowRadius=Ae.radius,_e.shadowMapSize=Ae.mapSize,f.directionalShadow[K]=_e,f.directionalShadowMap[K]=Ne,f.directionalShadowMatrix[K]=ve.shadow.matrix,ie++}f.directional[K]=ye,K++}else if(ve.isSpotLight){const ye=n.get(ve);ye.position.setFromMatrixPosition(ve.matrixWorld),ye.color.copy(Re).multiplyScalar(Ee),ye.distance=Oe,ye.coneCos=Math.cos(ve.angle),ye.penumbraCos=Math.cos(ve.angle*(1-ve.penumbra)),ye.decay=ve.decay,f.spot[ne]=ye;const Ae=ve.shadow;if(ve.map&&(f.spotLightMap[fe]=ve.map,fe++,Ae.updateMatrices(ve),ve.castShadow&&pe++),f.spotLightMatrix[ne]=Ae.matrix,ve.castShadow){const _e=s.get(ve);_e.shadowIntensity=Ae.intensity,_e.shadowBias=Ae.bias,_e.shadowNormalBias=Ae.normalBias,_e.shadowRadius=Ae.radius,_e.shadowMapSize=Ae.mapSize,f.spotShadow[ne]=_e,f.spotShadowMap[ne]=Ne,le++}ne++}else if(ve.isRectAreaLight){const ye=n.get(ve);ye.color.copy(Re).multiplyScalar(Ee),ye.halfWidth.set(ve.width*.5,0,0),ye.halfHeight.set(0,ve.height*.5,0),f.rectArea[te]=ye,te++}else if(ve.isPointLight){const ye=n.get(ve);if(ye.color.copy(ve.color).multiplyScalar(ve.intensity),ye.distance=ve.distance,ye.decay=ve.decay,ve.castShadow){const Ae=ve.shadow,_e=s.get(ve);_e.shadowIntensity=Ae.intensity,_e.shadowBias=Ae.bias,_e.shadowNormalBias=Ae.normalBias,_e.shadowRadius=Ae.radius,_e.shadowMapSize=Ae.mapSize,_e.shadowCameraNear=Ae.camera.near,_e.shadowCameraFar=Ae.camera.far,f.pointShadow[Q]=_e,f.pointShadowMap[Q]=Ne,f.pointShadowMatrix[Q]=ve.shadow.matrix,re++}f.point[Q]=ye,Q++}else if(ve.isHemisphereLight){const ye=n.get(ve);ye.skyColor.copy(ve.color).multiplyScalar(Ee),ye.groundColor.copy(ve.groundColor).multiplyScalar(Ee),f.hemi[J]=ye,J++}}te>0&&(u.has("OES_texture_float_linear")===!0?(f.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,f.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(f.rectAreaLTC1=UniformsLib.LTC_HALF_1,f.rectAreaLTC2=UniformsLib.LTC_HALF_2)),f.ambient[0]=G,f.ambient[1]=Y,f.ambient[2]=q;const se=f.hash;(se.directionalLength!==K||se.pointLength!==Q||se.spotLength!==ne||se.rectAreaLength!==te||se.hemiLength!==J||se.numDirectionalShadows!==ie||se.numPointShadows!==re||se.numSpotShadows!==le||se.numSpotMaps!==fe||se.numLightProbes!==de)&&(f.directional.length=K,f.spot.length=ne,f.rectArea.length=te,f.point.length=Q,f.hemi.length=J,f.directionalShadow.length=ie,f.directionalShadowMap.length=ie,f.pointShadow.length=re,f.pointShadowMap.length=re,f.spotShadow.length=le,f.spotShadowMap.length=le,f.directionalShadowMatrix.length=ie,f.pointShadowMatrix.length=re,f.spotLightMatrix.length=le+fe-pe,f.spotLightMap.length=fe,f.numSpotLightShadowsWithMaps=pe,f.numLightProbes=de,se.directionalLength=K,se.pointLength=Q,se.spotLength=ne,se.rectAreaLength=te,se.hemiLength=J,se.numDirectionalShadows=ie,se.numPointShadows=re,se.numSpotShadows=le,se.numSpotMaps=fe,se.numLightProbes=de,f.version=nextVersion++)}function R(I,G){let Y=0,q=0,K=0,Q=0,ne=0;const te=G.matrixWorldInverse;for(let J=0,ie=I.length;J<ie;J++){const re=I[J];if(re.isDirectionalLight){const le=f.directional[Y];le.direction.setFromMatrixPosition(re.matrixWorld),d.setFromMatrixPosition(re.target.matrixWorld),le.direction.sub(d),le.direction.transformDirection(te),Y++}else if(re.isSpotLight){const le=f.spot[K];le.position.setFromMatrixPosition(re.matrixWorld),le.position.applyMatrix4(te),le.direction.setFromMatrixPosition(re.matrixWorld),d.setFromMatrixPosition(re.target.matrixWorld),le.direction.sub(d),le.direction.transformDirection(te),K++}else if(re.isRectAreaLight){const le=f.rectArea[Q];le.position.setFromMatrixPosition(re.matrixWorld),le.position.applyMatrix4(te),_.identity(),y.copy(re.matrixWorld),y.premultiply(te),_.extractRotation(y),le.halfWidth.set(re.width*.5,0,0),le.halfHeight.set(0,re.height*.5,0),le.halfWidth.applyMatrix4(_),le.halfHeight.applyMatrix4(_),Q++}else if(re.isPointLight){const le=f.point[q];le.position.setFromMatrixPosition(re.matrixWorld),le.position.applyMatrix4(te),q++}else if(re.isHemisphereLight){const le=f.hemi[ne];le.direction.setFromMatrixPosition(re.matrixWorld),le.direction.transformDirection(te),ne++}}}return{setup:A,setupView:R,state:f}}function WebGLRenderState(u){const n=new WebGLLights(u),s=[],f=[];function d(G){I.camera=G,s.length=0,f.length=0}function y(G){s.push(G)}function _(G){f.push(G)}function A(){n.setup(s)}function R(G){n.setupView(s,G)}const I={lightsArray:s,shadowsArray:f,camera:null,lights:n,transmissionRenderTarget:{}};return{init:d,state:I,setupLights:A,setupLightsView:R,pushLight:y,pushShadow:_}}function WebGLRenderStates(u){let n=new WeakMap;function s(d,y=0){const _=n.get(d);let A;return _===void 0?(A=new WebGLRenderState(u),n.set(d,[A])):y>=_.length?(A=new WebGLRenderState(u),_.push(A)):A=_[y],A}function f(){n=new WeakMap}return{get:s,dispose:f}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,_cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,1,0),new Vector3(0,-1,0),new Vector3(0,0,1),new Vector3(0,0,-1)],_cubeUps=[new Vector3(0,-1,0),new Vector3(0,-1,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,-1,0),new Vector3(0,-1,0)],_projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;function WebGLShadowMap(u,n,s){let f=new Frustum;const d=new Vector2,y=new Vector2,_=new Vector4,A=new MeshDepthMaterial,R=new MeshDistanceMaterial,I={},G=s.maxTextureSize,Y={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},q=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),K=q.clone();K.defines.HORIZONTAL_PASS=1;const Q=new BufferGeometry;Q.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ne=new Mesh(Q,q),te=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let J=this.type;this.render=function(pe,de,se){if(te.enabled===!1||te.autoUpdate===!1&&te.needsUpdate===!1||pe.length===0)return;this.type===PCFSoftShadowMap&&(warn("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),this.type=PCFShadowMap);const he=u.getRenderTarget(),Se=u.getActiveCubeFace(),ve=u.getActiveMipmapLevel(),Re=u.state;Re.setBlending(NoBlending),Re.buffers.depth.getReversed()===!0?Re.buffers.color.setClear(0,0,0,0):Re.buffers.color.setClear(1,1,1,1),Re.buffers.depth.setTest(!0),Re.setScissorTest(!1);const Ee=J!==this.type;Ee&&de.traverse(function(Oe){Oe.material&&(Array.isArray(Oe.material)?Oe.material.forEach(Ne=>Ne.needsUpdate=!0):Oe.material.needsUpdate=!0)});for(let Oe=0,Ne=pe.length;Oe<Ne;Oe++){const ye=pe[Oe],Ae=ye.shadow;if(Ae===void 0){warn("WebGLShadowMap:",ye,"has no shadow.");continue}if(Ae.autoUpdate===!1&&Ae.needsUpdate===!1)continue;d.copy(Ae.mapSize);const _e=Ae.getFrameExtents();d.multiply(_e),y.copy(Ae.mapSize),(d.x>G||d.y>G)&&(d.x>G&&(y.x=Math.floor(G/_e.x),d.x=y.x*_e.x,Ae.mapSize.x=y.x),d.y>G&&(y.y=Math.floor(G/_e.y),d.y=y.y*_e.y,Ae.mapSize.y=y.y));const Te=u.state.buffers.depth.getReversed();if(Ae.camera._reversedDepth=Te,Ae.map===null||Ee===!0){if(Ae.map!==null&&(Ae.map.depthTexture!==null&&(Ae.map.depthTexture.dispose(),Ae.map.depthTexture=null),Ae.map.dispose()),this.type===VSMShadowMap){if(ye.isPointLight){warn("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}Ae.map=new WebGLRenderTarget(d.x,d.y,{format:RGFormat,type:HalfFloatType,minFilter:LinearFilter,magFilter:LinearFilter,generateMipmaps:!1}),Ae.map.texture.name=ye.name+".shadowMap",Ae.map.depthTexture=new DepthTexture(d.x,d.y,FloatType),Ae.map.depthTexture.name=ye.name+".shadowMapDepth",Ae.map.depthTexture.format=DepthFormat,Ae.map.depthTexture.compareFunction=null,Ae.map.depthTexture.minFilter=NearestFilter,Ae.map.depthTexture.magFilter=NearestFilter}else ye.isPointLight?(Ae.map=new WebGLCubeRenderTarget(d.x),Ae.map.depthTexture=new CubeDepthTexture(d.x,UnsignedIntType)):(Ae.map=new WebGLRenderTarget(d.x,d.y),Ae.map.depthTexture=new DepthTexture(d.x,d.y,UnsignedIntType)),Ae.map.depthTexture.name=ye.name+".shadowMap",Ae.map.depthTexture.format=DepthFormat,this.type===PCFShadowMap?(Ae.map.depthTexture.compareFunction=Te?GreaterEqualCompare:LessEqualCompare,Ae.map.depthTexture.minFilter=LinearFilter,Ae.map.depthTexture.magFilter=LinearFilter):(Ae.map.depthTexture.compareFunction=null,Ae.map.depthTexture.minFilter=NearestFilter,Ae.map.depthTexture.magFilter=NearestFilter);Ae.camera.updateProjectionMatrix()}const we=Ae.map.isWebGLCubeRenderTarget?6:1;for(let ge=0;ge<we;ge++){if(Ae.map.isWebGLCubeRenderTarget)u.setRenderTarget(Ae.map,ge),u.clear();else{ge===0&&(u.setRenderTarget(Ae.map),u.clear());const De=Ae.getViewport(ge);_.set(y.x*De.x,y.y*De.y,y.x*De.z,y.y*De.w),Re.viewport(_)}if(ye.isPointLight){const De=Ae.camera,ze=Ae.matrix,He=ye.distance||De.far;He!==De.far&&(De.far=He,De.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(ye.matrixWorld),De.position.copy(_lightPositionWorld),_lookTarget.copy(De.position),_lookTarget.add(_cubeDirections[ge]),De.up.copy(_cubeUps[ge]),De.lookAt(_lookTarget),De.updateMatrixWorld(),ze.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(De.projectionMatrix,De.matrixWorldInverse),Ae._frustum.setFromProjectionMatrix(_projScreenMatrix,De.coordinateSystem,De.reversedDepth)}else Ae.updateMatrices(ye);f=Ae.getFrustum(),le(de,se,Ae.camera,ye,this.type)}Ae.isPointLightShadow!==!0&&this.type===VSMShadowMap&&ie(Ae,se),Ae.needsUpdate=!1}J=this.type,te.needsUpdate=!1,u.setRenderTarget(he,Se,ve)};function ie(pe,de){const se=n.update(ne);q.defines.VSM_SAMPLES!==pe.blurSamples&&(q.defines.VSM_SAMPLES=pe.blurSamples,K.defines.VSM_SAMPLES=pe.blurSamples,q.needsUpdate=!0,K.needsUpdate=!0),pe.mapPass===null&&(pe.mapPass=new WebGLRenderTarget(d.x,d.y,{format:RGFormat,type:HalfFloatType})),q.uniforms.shadow_pass.value=pe.map.depthTexture,q.uniforms.resolution.value=pe.mapSize,q.uniforms.radius.value=pe.radius,u.setRenderTarget(pe.mapPass),u.clear(),u.renderBufferDirect(de,null,se,q,ne,null),K.uniforms.shadow_pass.value=pe.mapPass.texture,K.uniforms.resolution.value=pe.mapSize,K.uniforms.radius.value=pe.radius,u.setRenderTarget(pe.map),u.clear(),u.renderBufferDirect(de,null,se,K,ne,null)}function re(pe,de,se,he){let Se=null;const ve=se.isPointLight===!0?pe.customDistanceMaterial:pe.customDepthMaterial;if(ve!==void 0)Se=ve;else if(Se=se.isPointLight===!0?R:A,u.localClippingEnabled&&de.clipShadows===!0&&Array.isArray(de.clippingPlanes)&&de.clippingPlanes.length!==0||de.displacementMap&&de.displacementScale!==0||de.alphaMap&&de.alphaTest>0||de.map&&de.alphaTest>0||de.alphaToCoverage===!0){const Re=Se.uuid,Ee=de.uuid;let Oe=I[Re];Oe===void 0&&(Oe={},I[Re]=Oe);let Ne=Oe[Ee];Ne===void 0&&(Ne=Se.clone(),Oe[Ee]=Ne,de.addEventListener("dispose",fe)),Se=Ne}if(Se.visible=de.visible,Se.wireframe=de.wireframe,he===VSMShadowMap?Se.side=de.shadowSide!==null?de.shadowSide:de.side:Se.side=de.shadowSide!==null?de.shadowSide:Y[de.side],Se.alphaMap=de.alphaMap,Se.alphaTest=de.alphaToCoverage===!0?.5:de.alphaTest,Se.map=de.map,Se.clipShadows=de.clipShadows,Se.clippingPlanes=de.clippingPlanes,Se.clipIntersection=de.clipIntersection,Se.displacementMap=de.displacementMap,Se.displacementScale=de.displacementScale,Se.displacementBias=de.displacementBias,Se.wireframeLinewidth=de.wireframeLinewidth,Se.linewidth=de.linewidth,se.isPointLight===!0&&Se.isMeshDistanceMaterial===!0){const Re=u.properties.get(Se);Re.light=se}return Se}function le(pe,de,se,he,Se){if(pe.visible===!1)return;if(pe.layers.test(de.layers)&&(pe.isMesh||pe.isLine||pe.isPoints)&&(pe.castShadow||pe.receiveShadow&&Se===VSMShadowMap)&&(!pe.frustumCulled||f.intersectsObject(pe))){pe.modelViewMatrix.multiplyMatrices(se.matrixWorldInverse,pe.matrixWorld);const Ee=n.update(pe),Oe=pe.material;if(Array.isArray(Oe)){const Ne=Ee.groups;for(let ye=0,Ae=Ne.length;ye<Ae;ye++){const _e=Ne[ye],Te=Oe[_e.materialIndex];if(Te&&Te.visible){const we=re(pe,Te,he,Se);pe.onBeforeShadow(u,pe,de,se,Ee,we,_e),u.renderBufferDirect(se,null,Ee,we,pe,_e),pe.onAfterShadow(u,pe,de,se,Ee,we,_e)}}}else if(Oe.visible){const Ne=re(pe,Oe,he,Se);pe.onBeforeShadow(u,pe,de,se,Ee,Ne,null),u.renderBufferDirect(se,null,Ee,Ne,pe,null),pe.onAfterShadow(u,pe,de,se,Ee,Ne,null)}}const Re=pe.children;for(let Ee=0,Oe=Re.length;Ee<Oe;Ee++)le(Re[Ee],de,se,he,Se)}function fe(pe){pe.target.removeEventListener("dispose",fe);for(const se in I){const he=I[se],Se=pe.target.uuid;Se in he&&(he[Se].dispose(),delete he[Se])}}}function WebGLState(u,n){function s(){let dt=!1;const kt=new Vector4;let Hn=null;const Kn=new Vector4(0,0,0,0);return{setMask:function(Bn){Hn!==Bn&&!dt&&(u.colorMask(Bn,Bn,Bn,Bn),Hn=Bn)},setLocked:function(Bn){dt=Bn},setClear:function(Bn,pn,ci,Ai,ji){ji===!0&&(Bn*=Ai,pn*=Ai,ci*=Ai),kt.set(Bn,pn,ci,Ai),Kn.equals(kt)===!1&&(u.clearColor(Bn,pn,ci,Ai),Kn.copy(kt))},reset:function(){dt=!1,Hn=null,Kn.set(-1,0,0,0)}}}function f(){let dt=!1,kt=!1,Hn=null,Kn=null,Bn=null;return{setReversed:function(pn){if(kt!==pn){const ci=n.get("EXT_clip_control");pn?ci.clipControlEXT(ci.LOWER_LEFT_EXT,ci.ZERO_TO_ONE_EXT):ci.clipControlEXT(ci.LOWER_LEFT_EXT,ci.NEGATIVE_ONE_TO_ONE_EXT),kt=pn;const Ai=Bn;Bn=null,this.setClear(Ai)}},getReversed:function(){return kt},setTest:function(pn){pn?lt(u.DEPTH_TEST):Mt(u.DEPTH_TEST)},setMask:function(pn){Hn!==pn&&!dt&&(u.depthMask(pn),Hn=pn)},setFunc:function(pn){if(kt&&(pn=ReversedDepthFuncs[pn]),Kn!==pn){switch(pn){case NeverDepth:u.depthFunc(u.NEVER);break;case AlwaysDepth:u.depthFunc(u.ALWAYS);break;case LessDepth:u.depthFunc(u.LESS);break;case LessEqualDepth:u.depthFunc(u.LEQUAL);break;case EqualDepth:u.depthFunc(u.EQUAL);break;case GreaterEqualDepth:u.depthFunc(u.GEQUAL);break;case GreaterDepth:u.depthFunc(u.GREATER);break;case NotEqualDepth:u.depthFunc(u.NOTEQUAL);break;default:u.depthFunc(u.LEQUAL)}Kn=pn}},setLocked:function(pn){dt=pn},setClear:function(pn){Bn!==pn&&(Bn=pn,kt&&(pn=1-pn),u.clearDepth(pn))},reset:function(){dt=!1,Hn=null,Kn=null,Bn=null,kt=!1}}}function d(){let dt=!1,kt=null,Hn=null,Kn=null,Bn=null,pn=null,ci=null,Ai=null,ji=null;return{setTest:function(Ii){dt||(Ii?lt(u.STENCIL_TEST):Mt(u.STENCIL_TEST))},setMask:function(Ii){kt!==Ii&&!dt&&(u.stencilMask(Ii),kt=Ii)},setFunc:function(Ii,Jr,fs){(Hn!==Ii||Kn!==Jr||Bn!==fs)&&(u.stencilFunc(Ii,Jr,fs),Hn=Ii,Kn=Jr,Bn=fs)},setOp:function(Ii,Jr,fs){(pn!==Ii||ci!==Jr||Ai!==fs)&&(u.stencilOp(Ii,Jr,fs),pn=Ii,ci=Jr,Ai=fs)},setLocked:function(Ii){dt=Ii},setClear:function(Ii){ji!==Ii&&(u.clearStencil(Ii),ji=Ii)},reset:function(){dt=!1,kt=null,Hn=null,Kn=null,Bn=null,pn=null,ci=null,Ai=null,ji=null}}}const y=new s,_=new f,A=new d,R=new WeakMap,I=new WeakMap;let G={},Y={},q=new WeakMap,K=[],Q=null,ne=!1,te=null,J=null,ie=null,re=null,le=null,fe=null,pe=null,de=new Color(0,0,0),se=0,he=!1,Se=null,ve=null,Re=null,Ee=null,Oe=null;const Ne=u.getParameter(u.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ye=!1,Ae=0;const _e=u.getParameter(u.VERSION);_e.indexOf("WebGL")!==-1?(Ae=parseFloat(/^WebGL (\d)/.exec(_e)[1]),ye=Ae>=1):_e.indexOf("OpenGL ES")!==-1&&(Ae=parseFloat(/^OpenGL ES (\d)/.exec(_e)[1]),ye=Ae>=2);let Te=null,we={};const ge=u.getParameter(u.SCISSOR_BOX),De=u.getParameter(u.VIEWPORT),ze=new Vector4().fromArray(ge),He=new Vector4().fromArray(De);function yt(dt,kt,Hn,Kn){const Bn=new Uint8Array(4),pn=u.createTexture();u.bindTexture(dt,pn),u.texParameteri(dt,u.TEXTURE_MIN_FILTER,u.NEAREST),u.texParameteri(dt,u.TEXTURE_MAG_FILTER,u.NEAREST);for(let ci=0;ci<Hn;ci++)dt===u.TEXTURE_3D||dt===u.TEXTURE_2D_ARRAY?u.texImage3D(kt,0,u.RGBA,1,1,Kn,0,u.RGBA,u.UNSIGNED_BYTE,Bn):u.texImage2D(kt+ci,0,u.RGBA,1,1,0,u.RGBA,u.UNSIGNED_BYTE,Bn);return pn}const Ge={};Ge[u.TEXTURE_2D]=yt(u.TEXTURE_2D,u.TEXTURE_2D,1),Ge[u.TEXTURE_CUBE_MAP]=yt(u.TEXTURE_CUBE_MAP,u.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ge[u.TEXTURE_2D_ARRAY]=yt(u.TEXTURE_2D_ARRAY,u.TEXTURE_2D_ARRAY,1,1),Ge[u.TEXTURE_3D]=yt(u.TEXTURE_3D,u.TEXTURE_3D,1,1),y.setClear(0,0,0,1),_.setClear(1),A.setClear(0),lt(u.DEPTH_TEST),_.setFunc(LessEqualDepth),dn(!1),Mn(CullFaceBack),lt(u.CULL_FACE),qe(NoBlending);function lt(dt){G[dt]!==!0&&(u.enable(dt),G[dt]=!0)}function Mt(dt){G[dt]!==!1&&(u.disable(dt),G[dt]=!1)}function hn(dt,kt){return Y[dt]!==kt?(u.bindFramebuffer(dt,kt),Y[dt]=kt,dt===u.DRAW_FRAMEBUFFER&&(Y[u.FRAMEBUFFER]=kt),dt===u.FRAMEBUFFER&&(Y[u.DRAW_FRAMEBUFFER]=kt),!0):!1}function Fn(dt,kt){let Hn=K,Kn=!1;if(dt){Hn=q.get(kt),Hn===void 0&&(Hn=[],q.set(kt,Hn));const Bn=dt.textures;if(Hn.length!==Bn.length||Hn[0]!==u.COLOR_ATTACHMENT0){for(let pn=0,ci=Bn.length;pn<ci;pn++)Hn[pn]=u.COLOR_ATTACHMENT0+pn;Hn.length=Bn.length,Kn=!0}}else Hn[0]!==u.BACK&&(Hn[0]=u.BACK,Kn=!0);Kn&&u.drawBuffers(Hn)}function Vn(dt){return Q!==dt?(u.useProgram(dt),Q=dt,!0):!1}const ni={[AddEquation]:u.FUNC_ADD,[SubtractEquation]:u.FUNC_SUBTRACT,[ReverseSubtractEquation]:u.FUNC_REVERSE_SUBTRACT};ni[MinEquation]=u.MIN,ni[MaxEquation]=u.MAX;const In={[ZeroFactor]:u.ZERO,[OneFactor]:u.ONE,[SrcColorFactor]:u.SRC_COLOR,[SrcAlphaFactor]:u.SRC_ALPHA,[SrcAlphaSaturateFactor]:u.SRC_ALPHA_SATURATE,[DstColorFactor]:u.DST_COLOR,[DstAlphaFactor]:u.DST_ALPHA,[OneMinusSrcColorFactor]:u.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:u.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:u.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:u.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:u.CONSTANT_COLOR,[OneMinusConstantColorFactor]:u.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:u.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:u.ONE_MINUS_CONSTANT_ALPHA};function qe(dt,kt,Hn,Kn,Bn,pn,ci,Ai,ji,Ii){if(dt===NoBlending){ne===!0&&(Mt(u.BLEND),ne=!1);return}if(ne===!1&&(lt(u.BLEND),ne=!0),dt!==CustomBlending){if(dt!==te||Ii!==he){if((J!==AddEquation||le!==AddEquation)&&(u.blendEquation(u.FUNC_ADD),J=AddEquation,le=AddEquation),Ii)switch(dt){case NormalBlending:u.blendFuncSeparate(u.ONE,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:u.blendFunc(u.ONE,u.ONE);break;case SubtractiveBlending:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case MultiplyBlending:u.blendFuncSeparate(u.DST_COLOR,u.ONE_MINUS_SRC_ALPHA,u.ZERO,u.ONE);break;default:error("WebGLState: Invalid blending: ",dt);break}else switch(dt){case NormalBlending:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE,u.ONE,u.ONE);break;case SubtractiveBlending:error("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case MultiplyBlending:error("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:error("WebGLState: Invalid blending: ",dt);break}ie=null,re=null,fe=null,pe=null,de.set(0,0,0),se=0,te=dt,he=Ii}return}Bn=Bn||kt,pn=pn||Hn,ci=ci||Kn,(kt!==J||Bn!==le)&&(u.blendEquationSeparate(ni[kt],ni[Bn]),J=kt,le=Bn),(Hn!==ie||Kn!==re||pn!==fe||ci!==pe)&&(u.blendFuncSeparate(In[Hn],In[Kn],In[pn],In[ci]),ie=Hn,re=Kn,fe=pn,pe=ci),(Ai.equals(de)===!1||ji!==se)&&(u.blendColor(Ai.r,Ai.g,Ai.b,ji),de.copy(Ai),se=ji),te=dt,he=!1}function vn(dt,kt){dt.side===DoubleSide?Mt(u.CULL_FACE):lt(u.CULL_FACE);let Hn=dt.side===BackSide;kt&&(Hn=!Hn),dn(Hn),dt.blending===NormalBlending&&dt.transparent===!1?qe(NoBlending):qe(dt.blending,dt.blendEquation,dt.blendSrc,dt.blendDst,dt.blendEquationAlpha,dt.blendSrcAlpha,dt.blendDstAlpha,dt.blendColor,dt.blendAlpha,dt.premultipliedAlpha),_.setFunc(dt.depthFunc),_.setTest(dt.depthTest),_.setMask(dt.depthWrite),y.setMask(dt.colorWrite);const Kn=dt.stencilWrite;A.setTest(Kn),Kn&&(A.setMask(dt.stencilWriteMask),A.setFunc(dt.stencilFunc,dt.stencilRef,dt.stencilFuncMask),A.setOp(dt.stencilFail,dt.stencilZFail,dt.stencilZPass)),qn(dt.polygonOffset,dt.polygonOffsetFactor,dt.polygonOffsetUnits),dt.alphaToCoverage===!0?lt(u.SAMPLE_ALPHA_TO_COVERAGE):Mt(u.SAMPLE_ALPHA_TO_COVERAGE)}function dn(dt){Se!==dt&&(dt?u.frontFace(u.CW):u.frontFace(u.CCW),Se=dt)}function Mn(dt){dt!==CullFaceNone?(lt(u.CULL_FACE),dt!==ve&&(dt===CullFaceBack?u.cullFace(u.BACK):dt===CullFaceFront?u.cullFace(u.FRONT):u.cullFace(u.FRONT_AND_BACK))):Mt(u.CULL_FACE),ve=dt}function je(dt){dt!==Re&&(ye&&u.lineWidth(dt),Re=dt)}function qn(dt,kt,Hn){dt?(lt(u.POLYGON_OFFSET_FILL),(Ee!==kt||Oe!==Hn)&&(Ee=kt,Oe=Hn,_.getReversed()&&(kt=-kt),u.polygonOffset(kt,Hn))):Mt(u.POLYGON_OFFSET_FILL)}function An(dt){dt?lt(u.SCISSOR_TEST):Mt(u.SCISSOR_TEST)}function ri(dt){dt===void 0&&(dt=u.TEXTURE0+Ne-1),Te!==dt&&(u.activeTexture(dt),Te=dt)}function On(dt,kt,Hn){Hn===void 0&&(Te===null?Hn=u.TEXTURE0+Ne-1:Hn=Te);let Kn=we[Hn];Kn===void 0&&(Kn={type:void 0,texture:void 0},we[Hn]=Kn),(Kn.type!==dt||Kn.texture!==kt)&&(Te!==Hn&&(u.activeTexture(Hn),Te=Hn),u.bindTexture(dt,kt||Ge[dt]),Kn.type=dt,Kn.texture=kt)}function Be(){const dt=we[Te];dt!==void 0&&dt.type!==void 0&&(u.bindTexture(dt.type,null),dt.type=void 0,dt.texture=void 0)}function Pe(){try{u.compressedTexImage2D(...arguments)}catch(dt){error("WebGLState:",dt)}}function Ke(){try{u.compressedTexImage3D(...arguments)}catch(dt){error("WebGLState:",dt)}}function Ft(){try{u.texSubImage2D(...arguments)}catch(dt){error("WebGLState:",dt)}}function bn(){try{u.texSubImage3D(...arguments)}catch(dt){error("WebGLState:",dt)}}function ln(){try{u.compressedTexSubImage2D(...arguments)}catch(dt){error("WebGLState:",dt)}}function Zn(){try{u.compressedTexSubImage3D(...arguments)}catch(dt){error("WebGLState:",dt)}}function Gn(){try{u.texStorage2D(...arguments)}catch(dt){error("WebGLState:",dt)}}function fi(){try{u.texStorage3D(...arguments)}catch(dt){error("WebGLState:",dt)}}function xi(){try{u.texImage2D(...arguments)}catch(dt){error("WebGLState:",dt)}}function wn(){try{u.texImage3D(...arguments)}catch(dt){error("WebGLState:",dt)}}function Tn(dt){ze.equals(dt)===!1&&(u.scissor(dt.x,dt.y,dt.z,dt.w),ze.copy(dt))}function oi(dt){He.equals(dt)===!1&&(u.viewport(dt.x,dt.y,dt.z,dt.w),He.copy(dt))}function Jn(dt,kt){let Hn=I.get(kt);Hn===void 0&&(Hn=new WeakMap,I.set(kt,Hn));let Kn=Hn.get(dt);Kn===void 0&&(Kn=u.getUniformBlockIndex(kt,dt.name),Hn.set(dt,Kn))}function ei(dt,kt){const Kn=I.get(kt).get(dt);R.get(kt)!==Kn&&(u.uniformBlockBinding(kt,Kn,dt.__bindingPointIndex),R.set(kt,Kn))}function gi(){u.disable(u.BLEND),u.disable(u.CULL_FACE),u.disable(u.DEPTH_TEST),u.disable(u.POLYGON_OFFSET_FILL),u.disable(u.SCISSOR_TEST),u.disable(u.STENCIL_TEST),u.disable(u.SAMPLE_ALPHA_TO_COVERAGE),u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ZERO),u.blendFuncSeparate(u.ONE,u.ZERO,u.ONE,u.ZERO),u.blendColor(0,0,0,0),u.colorMask(!0,!0,!0,!0),u.clearColor(0,0,0,0),u.depthMask(!0),u.depthFunc(u.LESS),_.setReversed(!1),u.clearDepth(1),u.stencilMask(4294967295),u.stencilFunc(u.ALWAYS,0,4294967295),u.stencilOp(u.KEEP,u.KEEP,u.KEEP),u.clearStencil(0),u.cullFace(u.BACK),u.frontFace(u.CCW),u.polygonOffset(0,0),u.activeTexture(u.TEXTURE0),u.bindFramebuffer(u.FRAMEBUFFER,null),u.bindFramebuffer(u.DRAW_FRAMEBUFFER,null),u.bindFramebuffer(u.READ_FRAMEBUFFER,null),u.useProgram(null),u.lineWidth(1),u.scissor(0,0,u.canvas.width,u.canvas.height),u.viewport(0,0,u.canvas.width,u.canvas.height),G={},Te=null,we={},Y={},q=new WeakMap,K=[],Q=null,ne=!1,te=null,J=null,ie=null,re=null,le=null,fe=null,pe=null,de=new Color(0,0,0),se=0,he=!1,Se=null,ve=null,Re=null,Ee=null,Oe=null,ze.set(0,0,u.canvas.width,u.canvas.height),He.set(0,0,u.canvas.width,u.canvas.height),y.reset(),_.reset(),A.reset()}return{buffers:{color:y,depth:_,stencil:A},enable:lt,disable:Mt,bindFramebuffer:hn,drawBuffers:Fn,useProgram:Vn,setBlending:qe,setMaterial:vn,setFlipSided:dn,setCullFace:Mn,setLineWidth:je,setPolygonOffset:qn,setScissorTest:An,activeTexture:ri,bindTexture:On,unbindTexture:Be,compressedTexImage2D:Pe,compressedTexImage3D:Ke,texImage2D:xi,texImage3D:wn,updateUBOMapping:Jn,uniformBlockBinding:ei,texStorage2D:Gn,texStorage3D:fi,texSubImage2D:Ft,texSubImage3D:bn,compressedTexSubImage2D:ln,compressedTexSubImage3D:Zn,scissor:Tn,viewport:oi,reset:gi}}function WebGLTextures(u,n,s,f,d,y,_){const A=n.has("WEBGL_multisampled_render_to_texture")?n.get("WEBGL_multisampled_render_to_texture"):null,R=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),I=new Vector2,G=new WeakMap;let Y;const q=new WeakMap;let K=!1;try{K=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function Q(Be,Pe){return K?new OffscreenCanvas(Be,Pe):createElementNS("canvas")}function ne(Be,Pe,Ke){let Ft=1;const bn=On(Be);if((bn.width>Ke||bn.height>Ke)&&(Ft=Ke/Math.max(bn.width,bn.height)),Ft<1)if(typeof HTMLImageElement<"u"&&Be instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Be instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Be instanceof ImageBitmap||typeof VideoFrame<"u"&&Be instanceof VideoFrame){const ln=Math.floor(Ft*bn.width),Zn=Math.floor(Ft*bn.height);Y===void 0&&(Y=Q(ln,Zn));const Gn=Pe?Q(ln,Zn):Y;return Gn.width=ln,Gn.height=Zn,Gn.getContext("2d").drawImage(Be,0,0,ln,Zn),warn("WebGLRenderer: Texture has been resized from ("+bn.width+"x"+bn.height+") to ("+ln+"x"+Zn+")."),Gn}else return"data"in Be&&warn("WebGLRenderer: Image in DataTexture is too big ("+bn.width+"x"+bn.height+")."),Be;return Be}function te(Be){return Be.generateMipmaps}function J(Be){u.generateMipmap(Be)}function ie(Be){return Be.isWebGLCubeRenderTarget?u.TEXTURE_CUBE_MAP:Be.isWebGL3DRenderTarget?u.TEXTURE_3D:Be.isWebGLArrayRenderTarget||Be.isCompressedArrayTexture?u.TEXTURE_2D_ARRAY:u.TEXTURE_2D}function re(Be,Pe,Ke,Ft,bn=!1){if(Be!==null){if(u[Be]!==void 0)return u[Be];warn("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Be+"'")}let ln=Pe;if(Pe===u.RED&&(Ke===u.FLOAT&&(ln=u.R32F),Ke===u.HALF_FLOAT&&(ln=u.R16F),Ke===u.UNSIGNED_BYTE&&(ln=u.R8)),Pe===u.RED_INTEGER&&(Ke===u.UNSIGNED_BYTE&&(ln=u.R8UI),Ke===u.UNSIGNED_SHORT&&(ln=u.R16UI),Ke===u.UNSIGNED_INT&&(ln=u.R32UI),Ke===u.BYTE&&(ln=u.R8I),Ke===u.SHORT&&(ln=u.R16I),Ke===u.INT&&(ln=u.R32I)),Pe===u.RG&&(Ke===u.FLOAT&&(ln=u.RG32F),Ke===u.HALF_FLOAT&&(ln=u.RG16F),Ke===u.UNSIGNED_BYTE&&(ln=u.RG8)),Pe===u.RG_INTEGER&&(Ke===u.UNSIGNED_BYTE&&(ln=u.RG8UI),Ke===u.UNSIGNED_SHORT&&(ln=u.RG16UI),Ke===u.UNSIGNED_INT&&(ln=u.RG32UI),Ke===u.BYTE&&(ln=u.RG8I),Ke===u.SHORT&&(ln=u.RG16I),Ke===u.INT&&(ln=u.RG32I)),Pe===u.RGB_INTEGER&&(Ke===u.UNSIGNED_BYTE&&(ln=u.RGB8UI),Ke===u.UNSIGNED_SHORT&&(ln=u.RGB16UI),Ke===u.UNSIGNED_INT&&(ln=u.RGB32UI),Ke===u.BYTE&&(ln=u.RGB8I),Ke===u.SHORT&&(ln=u.RGB16I),Ke===u.INT&&(ln=u.RGB32I)),Pe===u.RGBA_INTEGER&&(Ke===u.UNSIGNED_BYTE&&(ln=u.RGBA8UI),Ke===u.UNSIGNED_SHORT&&(ln=u.RGBA16UI),Ke===u.UNSIGNED_INT&&(ln=u.RGBA32UI),Ke===u.BYTE&&(ln=u.RGBA8I),Ke===u.SHORT&&(ln=u.RGBA16I),Ke===u.INT&&(ln=u.RGBA32I)),Pe===u.RGB&&(Ke===u.UNSIGNED_INT_5_9_9_9_REV&&(ln=u.RGB9_E5),Ke===u.UNSIGNED_INT_10F_11F_11F_REV&&(ln=u.R11F_G11F_B10F)),Pe===u.RGBA){const Zn=bn?LinearTransfer:ColorManagement.getTransfer(Ft);Ke===u.FLOAT&&(ln=u.RGBA32F),Ke===u.HALF_FLOAT&&(ln=u.RGBA16F),Ke===u.UNSIGNED_BYTE&&(ln=Zn===SRGBTransfer?u.SRGB8_ALPHA8:u.RGBA8),Ke===u.UNSIGNED_SHORT_4_4_4_4&&(ln=u.RGBA4),Ke===u.UNSIGNED_SHORT_5_5_5_1&&(ln=u.RGB5_A1)}return(ln===u.R16F||ln===u.R32F||ln===u.RG16F||ln===u.RG32F||ln===u.RGBA16F||ln===u.RGBA32F)&&n.get("EXT_color_buffer_float"),ln}function le(Be,Pe){let Ke;return Be?Pe===null||Pe===UnsignedIntType||Pe===UnsignedInt248Type?Ke=u.DEPTH24_STENCIL8:Pe===FloatType?Ke=u.DEPTH32F_STENCIL8:Pe===UnsignedShortType&&(Ke=u.DEPTH24_STENCIL8,warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Pe===null||Pe===UnsignedIntType||Pe===UnsignedInt248Type?Ke=u.DEPTH_COMPONENT24:Pe===FloatType?Ke=u.DEPTH_COMPONENT32F:Pe===UnsignedShortType&&(Ke=u.DEPTH_COMPONENT16),Ke}function fe(Be,Pe){return te(Be)===!0||Be.isFramebufferTexture&&Be.minFilter!==NearestFilter&&Be.minFilter!==LinearFilter?Math.log2(Math.max(Pe.width,Pe.height))+1:Be.mipmaps!==void 0&&Be.mipmaps.length>0?Be.mipmaps.length:Be.isCompressedTexture&&Array.isArray(Be.image)?Pe.mipmaps.length:1}function pe(Be){const Pe=Be.target;Pe.removeEventListener("dispose",pe),se(Pe),Pe.isVideoTexture&&G.delete(Pe)}function de(Be){const Pe=Be.target;Pe.removeEventListener("dispose",de),Se(Pe)}function se(Be){const Pe=f.get(Be);if(Pe.__webglInit===void 0)return;const Ke=Be.source,Ft=q.get(Ke);if(Ft){const bn=Ft[Pe.__cacheKey];bn.usedTimes--,bn.usedTimes===0&&he(Be),Object.keys(Ft).length===0&&q.delete(Ke)}f.remove(Be)}function he(Be){const Pe=f.get(Be);u.deleteTexture(Pe.__webglTexture);const Ke=Be.source,Ft=q.get(Ke);delete Ft[Pe.__cacheKey],_.memory.textures--}function Se(Be){const Pe=f.get(Be);if(Be.depthTexture&&(Be.depthTexture.dispose(),f.remove(Be.depthTexture)),Be.isWebGLCubeRenderTarget)for(let Ft=0;Ft<6;Ft++){if(Array.isArray(Pe.__webglFramebuffer[Ft]))for(let bn=0;bn<Pe.__webglFramebuffer[Ft].length;bn++)u.deleteFramebuffer(Pe.__webglFramebuffer[Ft][bn]);else u.deleteFramebuffer(Pe.__webglFramebuffer[Ft]);Pe.__webglDepthbuffer&&u.deleteRenderbuffer(Pe.__webglDepthbuffer[Ft])}else{if(Array.isArray(Pe.__webglFramebuffer))for(let Ft=0;Ft<Pe.__webglFramebuffer.length;Ft++)u.deleteFramebuffer(Pe.__webglFramebuffer[Ft]);else u.deleteFramebuffer(Pe.__webglFramebuffer);if(Pe.__webglDepthbuffer&&u.deleteRenderbuffer(Pe.__webglDepthbuffer),Pe.__webglMultisampledFramebuffer&&u.deleteFramebuffer(Pe.__webglMultisampledFramebuffer),Pe.__webglColorRenderbuffer)for(let Ft=0;Ft<Pe.__webglColorRenderbuffer.length;Ft++)Pe.__webglColorRenderbuffer[Ft]&&u.deleteRenderbuffer(Pe.__webglColorRenderbuffer[Ft]);Pe.__webglDepthRenderbuffer&&u.deleteRenderbuffer(Pe.__webglDepthRenderbuffer)}const Ke=Be.textures;for(let Ft=0,bn=Ke.length;Ft<bn;Ft++){const ln=f.get(Ke[Ft]);ln.__webglTexture&&(u.deleteTexture(ln.__webglTexture),_.memory.textures--),f.remove(Ke[Ft])}f.remove(Be)}let ve=0;function Re(){ve=0}function Ee(){const Be=ve;return Be>=d.maxTextures&&warn("WebGLTextures: Trying to use "+Be+" texture units while this GPU supports only "+d.maxTextures),ve+=1,Be}function Oe(Be){const Pe=[];return Pe.push(Be.wrapS),Pe.push(Be.wrapT),Pe.push(Be.wrapR||0),Pe.push(Be.magFilter),Pe.push(Be.minFilter),Pe.push(Be.anisotropy),Pe.push(Be.internalFormat),Pe.push(Be.format),Pe.push(Be.type),Pe.push(Be.generateMipmaps),Pe.push(Be.premultiplyAlpha),Pe.push(Be.flipY),Pe.push(Be.unpackAlignment),Pe.push(Be.colorSpace),Pe.join()}function Ne(Be,Pe){const Ke=f.get(Be);if(Be.isVideoTexture&&An(Be),Be.isRenderTargetTexture===!1&&Be.isExternalTexture!==!0&&Be.version>0&&Ke.__version!==Be.version){const Ft=Be.image;if(Ft===null)warn("WebGLRenderer: Texture marked for update but no image data found.");else if(Ft.complete===!1)warn("WebGLRenderer: Texture marked for update but image is incomplete");else{Ge(Ke,Be,Pe);return}}else Be.isExternalTexture&&(Ke.__webglTexture=Be.sourceTexture?Be.sourceTexture:null);s.bindTexture(u.TEXTURE_2D,Ke.__webglTexture,u.TEXTURE0+Pe)}function ye(Be,Pe){const Ke=f.get(Be);if(Be.isRenderTargetTexture===!1&&Be.version>0&&Ke.__version!==Be.version){Ge(Ke,Be,Pe);return}else Be.isExternalTexture&&(Ke.__webglTexture=Be.sourceTexture?Be.sourceTexture:null);s.bindTexture(u.TEXTURE_2D_ARRAY,Ke.__webglTexture,u.TEXTURE0+Pe)}function Ae(Be,Pe){const Ke=f.get(Be);if(Be.isRenderTargetTexture===!1&&Be.version>0&&Ke.__version!==Be.version){Ge(Ke,Be,Pe);return}s.bindTexture(u.TEXTURE_3D,Ke.__webglTexture,u.TEXTURE0+Pe)}function _e(Be,Pe){const Ke=f.get(Be);if(Be.isCubeDepthTexture!==!0&&Be.version>0&&Ke.__version!==Be.version){lt(Ke,Be,Pe);return}s.bindTexture(u.TEXTURE_CUBE_MAP,Ke.__webglTexture,u.TEXTURE0+Pe)}const Te={[RepeatWrapping]:u.REPEAT,[ClampToEdgeWrapping]:u.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:u.MIRRORED_REPEAT},we={[NearestFilter]:u.NEAREST,[NearestMipmapNearestFilter]:u.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:u.NEAREST_MIPMAP_LINEAR,[LinearFilter]:u.LINEAR,[LinearMipmapNearestFilter]:u.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:u.LINEAR_MIPMAP_LINEAR},ge={[NeverCompare]:u.NEVER,[AlwaysCompare]:u.ALWAYS,[LessCompare]:u.LESS,[LessEqualCompare]:u.LEQUAL,[EqualCompare]:u.EQUAL,[GreaterEqualCompare]:u.GEQUAL,[GreaterCompare]:u.GREATER,[NotEqualCompare]:u.NOTEQUAL};function De(Be,Pe){if(Pe.type===FloatType&&n.has("OES_texture_float_linear")===!1&&(Pe.magFilter===LinearFilter||Pe.magFilter===LinearMipmapNearestFilter||Pe.magFilter===NearestMipmapLinearFilter||Pe.magFilter===LinearMipmapLinearFilter||Pe.minFilter===LinearFilter||Pe.minFilter===LinearMipmapNearestFilter||Pe.minFilter===NearestMipmapLinearFilter||Pe.minFilter===LinearMipmapLinearFilter)&&warn("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),u.texParameteri(Be,u.TEXTURE_WRAP_S,Te[Pe.wrapS]),u.texParameteri(Be,u.TEXTURE_WRAP_T,Te[Pe.wrapT]),(Be===u.TEXTURE_3D||Be===u.TEXTURE_2D_ARRAY)&&u.texParameteri(Be,u.TEXTURE_WRAP_R,Te[Pe.wrapR]),u.texParameteri(Be,u.TEXTURE_MAG_FILTER,we[Pe.magFilter]),u.texParameteri(Be,u.TEXTURE_MIN_FILTER,we[Pe.minFilter]),Pe.compareFunction&&(u.texParameteri(Be,u.TEXTURE_COMPARE_MODE,u.COMPARE_REF_TO_TEXTURE),u.texParameteri(Be,u.TEXTURE_COMPARE_FUNC,ge[Pe.compareFunction])),n.has("EXT_texture_filter_anisotropic")===!0){if(Pe.magFilter===NearestFilter||Pe.minFilter!==NearestMipmapLinearFilter&&Pe.minFilter!==LinearMipmapLinearFilter||Pe.type===FloatType&&n.has("OES_texture_float_linear")===!1)return;if(Pe.anisotropy>1||f.get(Pe).__currentAnisotropy){const Ke=n.get("EXT_texture_filter_anisotropic");u.texParameterf(Be,Ke.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Pe.anisotropy,d.getMaxAnisotropy())),f.get(Pe).__currentAnisotropy=Pe.anisotropy}}}function ze(Be,Pe){let Ke=!1;Be.__webglInit===void 0&&(Be.__webglInit=!0,Pe.addEventListener("dispose",pe));const Ft=Pe.source;let bn=q.get(Ft);bn===void 0&&(bn={},q.set(Ft,bn));const ln=Oe(Pe);if(ln!==Be.__cacheKey){bn[ln]===void 0&&(bn[ln]={texture:u.createTexture(),usedTimes:0},_.memory.textures++,Ke=!0),bn[ln].usedTimes++;const Zn=bn[Be.__cacheKey];Zn!==void 0&&(bn[Be.__cacheKey].usedTimes--,Zn.usedTimes===0&&he(Pe)),Be.__cacheKey=ln,Be.__webglTexture=bn[ln].texture}return Ke}function He(Be,Pe,Ke){return Math.floor(Math.floor(Be/Ke)/Pe)}function yt(Be,Pe,Ke,Ft){const ln=Be.updateRanges;if(ln.length===0)s.texSubImage2D(u.TEXTURE_2D,0,0,0,Pe.width,Pe.height,Ke,Ft,Pe.data);else{ln.sort((wn,Tn)=>wn.start-Tn.start);let Zn=0;for(let wn=1;wn<ln.length;wn++){const Tn=ln[Zn],oi=ln[wn],Jn=Tn.start+Tn.count,ei=He(oi.start,Pe.width,4),gi=He(Tn.start,Pe.width,4);oi.start<=Jn+1&&ei===gi&&He(oi.start+oi.count-1,Pe.width,4)===ei?Tn.count=Math.max(Tn.count,oi.start+oi.count-Tn.start):(++Zn,ln[Zn]=oi)}ln.length=Zn+1;const Gn=u.getParameter(u.UNPACK_ROW_LENGTH),fi=u.getParameter(u.UNPACK_SKIP_PIXELS),xi=u.getParameter(u.UNPACK_SKIP_ROWS);u.pixelStorei(u.UNPACK_ROW_LENGTH,Pe.width);for(let wn=0,Tn=ln.length;wn<Tn;wn++){const oi=ln[wn],Jn=Math.floor(oi.start/4),ei=Math.ceil(oi.count/4),gi=Jn%Pe.width,dt=Math.floor(Jn/Pe.width),kt=ei,Hn=1;u.pixelStorei(u.UNPACK_SKIP_PIXELS,gi),u.pixelStorei(u.UNPACK_SKIP_ROWS,dt),s.texSubImage2D(u.TEXTURE_2D,0,gi,dt,kt,Hn,Ke,Ft,Pe.data)}Be.clearUpdateRanges(),u.pixelStorei(u.UNPACK_ROW_LENGTH,Gn),u.pixelStorei(u.UNPACK_SKIP_PIXELS,fi),u.pixelStorei(u.UNPACK_SKIP_ROWS,xi)}}function Ge(Be,Pe,Ke){let Ft=u.TEXTURE_2D;(Pe.isDataArrayTexture||Pe.isCompressedArrayTexture)&&(Ft=u.TEXTURE_2D_ARRAY),Pe.isData3DTexture&&(Ft=u.TEXTURE_3D);const bn=ze(Be,Pe),ln=Pe.source;s.bindTexture(Ft,Be.__webglTexture,u.TEXTURE0+Ke);const Zn=f.get(ln);if(ln.version!==Zn.__version||bn===!0){s.activeTexture(u.TEXTURE0+Ke);const Gn=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),fi=Pe.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Pe.colorSpace),xi=Pe.colorSpace===NoColorSpace||Gn===fi?u.NONE:u.BROWSER_DEFAULT_WEBGL;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,Pe.flipY),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pe.premultiplyAlpha),u.pixelStorei(u.UNPACK_ALIGNMENT,Pe.unpackAlignment),u.pixelStorei(u.UNPACK_COLORSPACE_CONVERSION_WEBGL,xi);let wn=ne(Pe.image,!1,d.maxTextureSize);wn=ri(Pe,wn);const Tn=y.convert(Pe.format,Pe.colorSpace),oi=y.convert(Pe.type);let Jn=re(Pe.internalFormat,Tn,oi,Pe.colorSpace,Pe.isVideoTexture);De(Ft,Pe);let ei;const gi=Pe.mipmaps,dt=Pe.isVideoTexture!==!0,kt=Zn.__version===void 0||bn===!0,Hn=ln.dataReady,Kn=fe(Pe,wn);if(Pe.isDepthTexture)Jn=le(Pe.format===DepthStencilFormat,Pe.type),kt&&(dt?s.texStorage2D(u.TEXTURE_2D,1,Jn,wn.width,wn.height):s.texImage2D(u.TEXTURE_2D,0,Jn,wn.width,wn.height,0,Tn,oi,null));else if(Pe.isDataTexture)if(gi.length>0){dt&&kt&&s.texStorage2D(u.TEXTURE_2D,Kn,Jn,gi[0].width,gi[0].height);for(let Bn=0,pn=gi.length;Bn<pn;Bn++)ei=gi[Bn],dt?Hn&&s.texSubImage2D(u.TEXTURE_2D,Bn,0,0,ei.width,ei.height,Tn,oi,ei.data):s.texImage2D(u.TEXTURE_2D,Bn,Jn,ei.width,ei.height,0,Tn,oi,ei.data);Pe.generateMipmaps=!1}else dt?(kt&&s.texStorage2D(u.TEXTURE_2D,Kn,Jn,wn.width,wn.height),Hn&&yt(Pe,wn,Tn,oi)):s.texImage2D(u.TEXTURE_2D,0,Jn,wn.width,wn.height,0,Tn,oi,wn.data);else if(Pe.isCompressedTexture)if(Pe.isCompressedArrayTexture){dt&&kt&&s.texStorage3D(u.TEXTURE_2D_ARRAY,Kn,Jn,gi[0].width,gi[0].height,wn.depth);for(let Bn=0,pn=gi.length;Bn<pn;Bn++)if(ei=gi[Bn],Pe.format!==RGBAFormat)if(Tn!==null)if(dt){if(Hn)if(Pe.layerUpdates.size>0){const ci=getByteLength(ei.width,ei.height,Pe.format,Pe.type);for(const Ai of Pe.layerUpdates){const ji=ei.data.subarray(Ai*ci/ei.data.BYTES_PER_ELEMENT,(Ai+1)*ci/ei.data.BYTES_PER_ELEMENT);s.compressedTexSubImage3D(u.TEXTURE_2D_ARRAY,Bn,0,0,Ai,ei.width,ei.height,1,Tn,ji)}Pe.clearLayerUpdates()}else s.compressedTexSubImage3D(u.TEXTURE_2D_ARRAY,Bn,0,0,0,ei.width,ei.height,wn.depth,Tn,ei.data)}else s.compressedTexImage3D(u.TEXTURE_2D_ARRAY,Bn,Jn,ei.width,ei.height,wn.depth,0,ei.data,0,0);else warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else dt?Hn&&s.texSubImage3D(u.TEXTURE_2D_ARRAY,Bn,0,0,0,ei.width,ei.height,wn.depth,Tn,oi,ei.data):s.texImage3D(u.TEXTURE_2D_ARRAY,Bn,Jn,ei.width,ei.height,wn.depth,0,Tn,oi,ei.data)}else{dt&&kt&&s.texStorage2D(u.TEXTURE_2D,Kn,Jn,gi[0].width,gi[0].height);for(let Bn=0,pn=gi.length;Bn<pn;Bn++)ei=gi[Bn],Pe.format!==RGBAFormat?Tn!==null?dt?Hn&&s.compressedTexSubImage2D(u.TEXTURE_2D,Bn,0,0,ei.width,ei.height,Tn,ei.data):s.compressedTexImage2D(u.TEXTURE_2D,Bn,Jn,ei.width,ei.height,0,ei.data):warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):dt?Hn&&s.texSubImage2D(u.TEXTURE_2D,Bn,0,0,ei.width,ei.height,Tn,oi,ei.data):s.texImage2D(u.TEXTURE_2D,Bn,Jn,ei.width,ei.height,0,Tn,oi,ei.data)}else if(Pe.isDataArrayTexture)if(dt){if(kt&&s.texStorage3D(u.TEXTURE_2D_ARRAY,Kn,Jn,wn.width,wn.height,wn.depth),Hn)if(Pe.layerUpdates.size>0){const Bn=getByteLength(wn.width,wn.height,Pe.format,Pe.type);for(const pn of Pe.layerUpdates){const ci=wn.data.subarray(pn*Bn/wn.data.BYTES_PER_ELEMENT,(pn+1)*Bn/wn.data.BYTES_PER_ELEMENT);s.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,pn,wn.width,wn.height,1,Tn,oi,ci)}Pe.clearLayerUpdates()}else s.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,0,wn.width,wn.height,wn.depth,Tn,oi,wn.data)}else s.texImage3D(u.TEXTURE_2D_ARRAY,0,Jn,wn.width,wn.height,wn.depth,0,Tn,oi,wn.data);else if(Pe.isData3DTexture)dt?(kt&&s.texStorage3D(u.TEXTURE_3D,Kn,Jn,wn.width,wn.height,wn.depth),Hn&&s.texSubImage3D(u.TEXTURE_3D,0,0,0,0,wn.width,wn.height,wn.depth,Tn,oi,wn.data)):s.texImage3D(u.TEXTURE_3D,0,Jn,wn.width,wn.height,wn.depth,0,Tn,oi,wn.data);else if(Pe.isFramebufferTexture){if(kt)if(dt)s.texStorage2D(u.TEXTURE_2D,Kn,Jn,wn.width,wn.height);else{let Bn=wn.width,pn=wn.height;for(let ci=0;ci<Kn;ci++)s.texImage2D(u.TEXTURE_2D,ci,Jn,Bn,pn,0,Tn,oi,null),Bn>>=1,pn>>=1}}else if(gi.length>0){if(dt&&kt){const Bn=On(gi[0]);s.texStorage2D(u.TEXTURE_2D,Kn,Jn,Bn.width,Bn.height)}for(let Bn=0,pn=gi.length;Bn<pn;Bn++)ei=gi[Bn],dt?Hn&&s.texSubImage2D(u.TEXTURE_2D,Bn,0,0,Tn,oi,ei):s.texImage2D(u.TEXTURE_2D,Bn,Jn,Tn,oi,ei);Pe.generateMipmaps=!1}else if(dt){if(kt){const Bn=On(wn);s.texStorage2D(u.TEXTURE_2D,Kn,Jn,Bn.width,Bn.height)}Hn&&s.texSubImage2D(u.TEXTURE_2D,0,0,0,Tn,oi,wn)}else s.texImage2D(u.TEXTURE_2D,0,Jn,Tn,oi,wn);te(Pe)&&J(Ft),Zn.__version=ln.version,Pe.onUpdate&&Pe.onUpdate(Pe)}Be.__version=Pe.version}function lt(Be,Pe,Ke){if(Pe.image.length!==6)return;const Ft=ze(Be,Pe),bn=Pe.source;s.bindTexture(u.TEXTURE_CUBE_MAP,Be.__webglTexture,u.TEXTURE0+Ke);const ln=f.get(bn);if(bn.version!==ln.__version||Ft===!0){s.activeTexture(u.TEXTURE0+Ke);const Zn=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Gn=Pe.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Pe.colorSpace),fi=Pe.colorSpace===NoColorSpace||Zn===Gn?u.NONE:u.BROWSER_DEFAULT_WEBGL;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,Pe.flipY),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pe.premultiplyAlpha),u.pixelStorei(u.UNPACK_ALIGNMENT,Pe.unpackAlignment),u.pixelStorei(u.UNPACK_COLORSPACE_CONVERSION_WEBGL,fi);const xi=Pe.isCompressedTexture||Pe.image[0].isCompressedTexture,wn=Pe.image[0]&&Pe.image[0].isDataTexture,Tn=[];for(let pn=0;pn<6;pn++)!xi&&!wn?Tn[pn]=ne(Pe.image[pn],!0,d.maxCubemapSize):Tn[pn]=wn?Pe.image[pn].image:Pe.image[pn],Tn[pn]=ri(Pe,Tn[pn]);const oi=Tn[0],Jn=y.convert(Pe.format,Pe.colorSpace),ei=y.convert(Pe.type),gi=re(Pe.internalFormat,Jn,ei,Pe.colorSpace),dt=Pe.isVideoTexture!==!0,kt=ln.__version===void 0||Ft===!0,Hn=bn.dataReady;let Kn=fe(Pe,oi);De(u.TEXTURE_CUBE_MAP,Pe);let Bn;if(xi){dt&&kt&&s.texStorage2D(u.TEXTURE_CUBE_MAP,Kn,gi,oi.width,oi.height);for(let pn=0;pn<6;pn++){Bn=Tn[pn].mipmaps;for(let ci=0;ci<Bn.length;ci++){const Ai=Bn[ci];Pe.format!==RGBAFormat?Jn!==null?dt?Hn&&s.compressedTexSubImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X+pn,ci,0,0,Ai.width,Ai.height,Jn,Ai.data):s.compressedTexImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X+pn,ci,gi,Ai.width,Ai.height,0,Ai.data):warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):dt?Hn&&s.texSubImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X+pn,ci,0,0,Ai.width,Ai.height,Jn,ei,Ai.data):s.texImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X+pn,ci,gi,Ai.width,Ai.height,0,Jn,ei,Ai.data)}}}else{if(Bn=Pe.mipmaps,dt&&kt){Bn.length>0&&Kn++;const pn=On(Tn[0]);s.texStorage2D(u.TEXTURE_CUBE_MAP,Kn,gi,pn.width,pn.height)}for(let pn=0;pn<6;pn++)if(wn){dt?Hn&&s.texSubImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X+pn,0,0,0,Tn[pn].width,Tn[pn].height,Jn,ei,Tn[pn].data):s.texImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X+pn,0,gi,Tn[pn].width,Tn[pn].height,0,Jn,ei,Tn[pn].data);for(let ci=0;ci<Bn.length;ci++){const ji=Bn[ci].image[pn].image;dt?Hn&&s.texSubImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X+pn,ci+1,0,0,ji.width,ji.height,Jn,ei,ji.data):s.texImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X+pn,ci+1,gi,ji.width,ji.height,0,Jn,ei,ji.data)}}else{dt?Hn&&s.texSubImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X+pn,0,0,0,Jn,ei,Tn[pn]):s.texImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X+pn,0,gi,Jn,ei,Tn[pn]);for(let ci=0;ci<Bn.length;ci++){const Ai=Bn[ci];dt?Hn&&s.texSubImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X+pn,ci+1,0,0,Jn,ei,Ai.image[pn]):s.texImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X+pn,ci+1,gi,Jn,ei,Ai.image[pn])}}}te(Pe)&&J(u.TEXTURE_CUBE_MAP),ln.__version=bn.version,Pe.onUpdate&&Pe.onUpdate(Pe)}Be.__version=Pe.version}function Mt(Be,Pe,Ke,Ft,bn,ln){const Zn=y.convert(Ke.format,Ke.colorSpace),Gn=y.convert(Ke.type),fi=re(Ke.internalFormat,Zn,Gn,Ke.colorSpace),xi=f.get(Pe),wn=f.get(Ke);if(wn.__renderTarget=Pe,!xi.__hasExternalTextures){const Tn=Math.max(1,Pe.width>>ln),oi=Math.max(1,Pe.height>>ln);bn===u.TEXTURE_3D||bn===u.TEXTURE_2D_ARRAY?s.texImage3D(bn,ln,fi,Tn,oi,Pe.depth,0,Zn,Gn,null):s.texImage2D(bn,ln,fi,Tn,oi,0,Zn,Gn,null)}s.bindFramebuffer(u.FRAMEBUFFER,Be),qn(Pe)?A.framebufferTexture2DMultisampleEXT(u.FRAMEBUFFER,Ft,bn,wn.__webglTexture,0,je(Pe)):(bn===u.TEXTURE_2D||bn>=u.TEXTURE_CUBE_MAP_POSITIVE_X&&bn<=u.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&u.framebufferTexture2D(u.FRAMEBUFFER,Ft,bn,wn.__webglTexture,ln),s.bindFramebuffer(u.FRAMEBUFFER,null)}function hn(Be,Pe,Ke){if(u.bindRenderbuffer(u.RENDERBUFFER,Be),Pe.depthBuffer){const Ft=Pe.depthTexture,bn=Ft&&Ft.isDepthTexture?Ft.type:null,ln=le(Pe.stencilBuffer,bn),Zn=Pe.stencilBuffer?u.DEPTH_STENCIL_ATTACHMENT:u.DEPTH_ATTACHMENT;qn(Pe)?A.renderbufferStorageMultisampleEXT(u.RENDERBUFFER,je(Pe),ln,Pe.width,Pe.height):Ke?u.renderbufferStorageMultisample(u.RENDERBUFFER,je(Pe),ln,Pe.width,Pe.height):u.renderbufferStorage(u.RENDERBUFFER,ln,Pe.width,Pe.height),u.framebufferRenderbuffer(u.FRAMEBUFFER,Zn,u.RENDERBUFFER,Be)}else{const Ft=Pe.textures;for(let bn=0;bn<Ft.length;bn++){const ln=Ft[bn],Zn=y.convert(ln.format,ln.colorSpace),Gn=y.convert(ln.type),fi=re(ln.internalFormat,Zn,Gn,ln.colorSpace);qn(Pe)?A.renderbufferStorageMultisampleEXT(u.RENDERBUFFER,je(Pe),fi,Pe.width,Pe.height):Ke?u.renderbufferStorageMultisample(u.RENDERBUFFER,je(Pe),fi,Pe.width,Pe.height):u.renderbufferStorage(u.RENDERBUFFER,fi,Pe.width,Pe.height)}}u.bindRenderbuffer(u.RENDERBUFFER,null)}function Fn(Be,Pe,Ke){const Ft=Pe.isWebGLCubeRenderTarget===!0;if(s.bindFramebuffer(u.FRAMEBUFFER,Be),!(Pe.depthTexture&&Pe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const bn=f.get(Pe.depthTexture);if(bn.__renderTarget=Pe,(!bn.__webglTexture||Pe.depthTexture.image.width!==Pe.width||Pe.depthTexture.image.height!==Pe.height)&&(Pe.depthTexture.image.width=Pe.width,Pe.depthTexture.image.height=Pe.height,Pe.depthTexture.needsUpdate=!0),Ft){if(bn.__webglInit===void 0&&(bn.__webglInit=!0,Pe.depthTexture.addEventListener("dispose",pe)),bn.__webglTexture===void 0){bn.__webglTexture=u.createTexture(),s.bindTexture(u.TEXTURE_CUBE_MAP,bn.__webglTexture),De(u.TEXTURE_CUBE_MAP,Pe.depthTexture);const xi=y.convert(Pe.depthTexture.format),wn=y.convert(Pe.depthTexture.type);let Tn;Pe.depthTexture.format===DepthFormat?Tn=u.DEPTH_COMPONENT24:Pe.depthTexture.format===DepthStencilFormat&&(Tn=u.DEPTH24_STENCIL8);for(let oi=0;oi<6;oi++)u.texImage2D(u.TEXTURE_CUBE_MAP_POSITIVE_X+oi,0,Tn,Pe.width,Pe.height,0,xi,wn,null)}}else Ne(Pe.depthTexture,0);const ln=bn.__webglTexture,Zn=je(Pe),Gn=Ft?u.TEXTURE_CUBE_MAP_POSITIVE_X+Ke:u.TEXTURE_2D,fi=Pe.depthTexture.format===DepthStencilFormat?u.DEPTH_STENCIL_ATTACHMENT:u.DEPTH_ATTACHMENT;if(Pe.depthTexture.format===DepthFormat)qn(Pe)?A.framebufferTexture2DMultisampleEXT(u.FRAMEBUFFER,fi,Gn,ln,0,Zn):u.framebufferTexture2D(u.FRAMEBUFFER,fi,Gn,ln,0);else if(Pe.depthTexture.format===DepthStencilFormat)qn(Pe)?A.framebufferTexture2DMultisampleEXT(u.FRAMEBUFFER,fi,Gn,ln,0,Zn):u.framebufferTexture2D(u.FRAMEBUFFER,fi,Gn,ln,0);else throw new Error("Unknown depthTexture format")}function Vn(Be){const Pe=f.get(Be),Ke=Be.isWebGLCubeRenderTarget===!0;if(Pe.__boundDepthTexture!==Be.depthTexture){const Ft=Be.depthTexture;if(Pe.__depthDisposeCallback&&Pe.__depthDisposeCallback(),Ft){const bn=()=>{delete Pe.__boundDepthTexture,delete Pe.__depthDisposeCallback,Ft.removeEventListener("dispose",bn)};Ft.addEventListener("dispose",bn),Pe.__depthDisposeCallback=bn}Pe.__boundDepthTexture=Ft}if(Be.depthTexture&&!Pe.__autoAllocateDepthBuffer)if(Ke)for(let Ft=0;Ft<6;Ft++)Fn(Pe.__webglFramebuffer[Ft],Be,Ft);else{const Ft=Be.texture.mipmaps;Ft&&Ft.length>0?Fn(Pe.__webglFramebuffer[0],Be,0):Fn(Pe.__webglFramebuffer,Be,0)}else if(Ke){Pe.__webglDepthbuffer=[];for(let Ft=0;Ft<6;Ft++)if(s.bindFramebuffer(u.FRAMEBUFFER,Pe.__webglFramebuffer[Ft]),Pe.__webglDepthbuffer[Ft]===void 0)Pe.__webglDepthbuffer[Ft]=u.createRenderbuffer(),hn(Pe.__webglDepthbuffer[Ft],Be,!1);else{const bn=Be.stencilBuffer?u.DEPTH_STENCIL_ATTACHMENT:u.DEPTH_ATTACHMENT,ln=Pe.__webglDepthbuffer[Ft];u.bindRenderbuffer(u.RENDERBUFFER,ln),u.framebufferRenderbuffer(u.FRAMEBUFFER,bn,u.RENDERBUFFER,ln)}}else{const Ft=Be.texture.mipmaps;if(Ft&&Ft.length>0?s.bindFramebuffer(u.FRAMEBUFFER,Pe.__webglFramebuffer[0]):s.bindFramebuffer(u.FRAMEBUFFER,Pe.__webglFramebuffer),Pe.__webglDepthbuffer===void 0)Pe.__webglDepthbuffer=u.createRenderbuffer(),hn(Pe.__webglDepthbuffer,Be,!1);else{const bn=Be.stencilBuffer?u.DEPTH_STENCIL_ATTACHMENT:u.DEPTH_ATTACHMENT,ln=Pe.__webglDepthbuffer;u.bindRenderbuffer(u.RENDERBUFFER,ln),u.framebufferRenderbuffer(u.FRAMEBUFFER,bn,u.RENDERBUFFER,ln)}}s.bindFramebuffer(u.FRAMEBUFFER,null)}function ni(Be,Pe,Ke){const Ft=f.get(Be);Pe!==void 0&&Mt(Ft.__webglFramebuffer,Be,Be.texture,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,0),Ke!==void 0&&Vn(Be)}function In(Be){const Pe=Be.texture,Ke=f.get(Be),Ft=f.get(Pe);Be.addEventListener("dispose",de);const bn=Be.textures,ln=Be.isWebGLCubeRenderTarget===!0,Zn=bn.length>1;if(Zn||(Ft.__webglTexture===void 0&&(Ft.__webglTexture=u.createTexture()),Ft.__version=Pe.version,_.memory.textures++),ln){Ke.__webglFramebuffer=[];for(let Gn=0;Gn<6;Gn++)if(Pe.mipmaps&&Pe.mipmaps.length>0){Ke.__webglFramebuffer[Gn]=[];for(let fi=0;fi<Pe.mipmaps.length;fi++)Ke.__webglFramebuffer[Gn][fi]=u.createFramebuffer()}else Ke.__webglFramebuffer[Gn]=u.createFramebuffer()}else{if(Pe.mipmaps&&Pe.mipmaps.length>0){Ke.__webglFramebuffer=[];for(let Gn=0;Gn<Pe.mipmaps.length;Gn++)Ke.__webglFramebuffer[Gn]=u.createFramebuffer()}else Ke.__webglFramebuffer=u.createFramebuffer();if(Zn)for(let Gn=0,fi=bn.length;Gn<fi;Gn++){const xi=f.get(bn[Gn]);xi.__webglTexture===void 0&&(xi.__webglTexture=u.createTexture(),_.memory.textures++)}if(Be.samples>0&&qn(Be)===!1){Ke.__webglMultisampledFramebuffer=u.createFramebuffer(),Ke.__webglColorRenderbuffer=[],s.bindFramebuffer(u.FRAMEBUFFER,Ke.__webglMultisampledFramebuffer);for(let Gn=0;Gn<bn.length;Gn++){const fi=bn[Gn];Ke.__webglColorRenderbuffer[Gn]=u.createRenderbuffer(),u.bindRenderbuffer(u.RENDERBUFFER,Ke.__webglColorRenderbuffer[Gn]);const xi=y.convert(fi.format,fi.colorSpace),wn=y.convert(fi.type),Tn=re(fi.internalFormat,xi,wn,fi.colorSpace,Be.isXRRenderTarget===!0),oi=je(Be);u.renderbufferStorageMultisample(u.RENDERBUFFER,oi,Tn,Be.width,Be.height),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0+Gn,u.RENDERBUFFER,Ke.__webglColorRenderbuffer[Gn])}u.bindRenderbuffer(u.RENDERBUFFER,null),Be.depthBuffer&&(Ke.__webglDepthRenderbuffer=u.createRenderbuffer(),hn(Ke.__webglDepthRenderbuffer,Be,!0)),s.bindFramebuffer(u.FRAMEBUFFER,null)}}if(ln){s.bindTexture(u.TEXTURE_CUBE_MAP,Ft.__webglTexture),De(u.TEXTURE_CUBE_MAP,Pe);for(let Gn=0;Gn<6;Gn++)if(Pe.mipmaps&&Pe.mipmaps.length>0)for(let fi=0;fi<Pe.mipmaps.length;fi++)Mt(Ke.__webglFramebuffer[Gn][fi],Be,Pe,u.COLOR_ATTACHMENT0,u.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,fi);else Mt(Ke.__webglFramebuffer[Gn],Be,Pe,u.COLOR_ATTACHMENT0,u.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,0);te(Pe)&&J(u.TEXTURE_CUBE_MAP),s.unbindTexture()}else if(Zn){for(let Gn=0,fi=bn.length;Gn<fi;Gn++){const xi=bn[Gn],wn=f.get(xi);let Tn=u.TEXTURE_2D;(Be.isWebGL3DRenderTarget||Be.isWebGLArrayRenderTarget)&&(Tn=Be.isWebGL3DRenderTarget?u.TEXTURE_3D:u.TEXTURE_2D_ARRAY),s.bindTexture(Tn,wn.__webglTexture),De(Tn,xi),Mt(Ke.__webglFramebuffer,Be,xi,u.COLOR_ATTACHMENT0+Gn,Tn,0),te(xi)&&J(Tn)}s.unbindTexture()}else{let Gn=u.TEXTURE_2D;if((Be.isWebGL3DRenderTarget||Be.isWebGLArrayRenderTarget)&&(Gn=Be.isWebGL3DRenderTarget?u.TEXTURE_3D:u.TEXTURE_2D_ARRAY),s.bindTexture(Gn,Ft.__webglTexture),De(Gn,Pe),Pe.mipmaps&&Pe.mipmaps.length>0)for(let fi=0;fi<Pe.mipmaps.length;fi++)Mt(Ke.__webglFramebuffer[fi],Be,Pe,u.COLOR_ATTACHMENT0,Gn,fi);else Mt(Ke.__webglFramebuffer,Be,Pe,u.COLOR_ATTACHMENT0,Gn,0);te(Pe)&&J(Gn),s.unbindTexture()}Be.depthBuffer&&Vn(Be)}function qe(Be){const Pe=Be.textures;for(let Ke=0,Ft=Pe.length;Ke<Ft;Ke++){const bn=Pe[Ke];if(te(bn)){const ln=ie(Be),Zn=f.get(bn).__webglTexture;s.bindTexture(ln,Zn),J(ln),s.unbindTexture()}}}const vn=[],dn=[];function Mn(Be){if(Be.samples>0){if(qn(Be)===!1){const Pe=Be.textures,Ke=Be.width,Ft=Be.height;let bn=u.COLOR_BUFFER_BIT;const ln=Be.stencilBuffer?u.DEPTH_STENCIL_ATTACHMENT:u.DEPTH_ATTACHMENT,Zn=f.get(Be),Gn=Pe.length>1;if(Gn)for(let xi=0;xi<Pe.length;xi++)s.bindFramebuffer(u.FRAMEBUFFER,Zn.__webglMultisampledFramebuffer),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0+xi,u.RENDERBUFFER,null),s.bindFramebuffer(u.FRAMEBUFFER,Zn.__webglFramebuffer),u.framebufferTexture2D(u.DRAW_FRAMEBUFFER,u.COLOR_ATTACHMENT0+xi,u.TEXTURE_2D,null,0);s.bindFramebuffer(u.READ_FRAMEBUFFER,Zn.__webglMultisampledFramebuffer);const fi=Be.texture.mipmaps;fi&&fi.length>0?s.bindFramebuffer(u.DRAW_FRAMEBUFFER,Zn.__webglFramebuffer[0]):s.bindFramebuffer(u.DRAW_FRAMEBUFFER,Zn.__webglFramebuffer);for(let xi=0;xi<Pe.length;xi++){if(Be.resolveDepthBuffer&&(Be.depthBuffer&&(bn|=u.DEPTH_BUFFER_BIT),Be.stencilBuffer&&Be.resolveStencilBuffer&&(bn|=u.STENCIL_BUFFER_BIT)),Gn){u.framebufferRenderbuffer(u.READ_FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.RENDERBUFFER,Zn.__webglColorRenderbuffer[xi]);const wn=f.get(Pe[xi]).__webglTexture;u.framebufferTexture2D(u.DRAW_FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,wn,0)}u.blitFramebuffer(0,0,Ke,Ft,0,0,Ke,Ft,bn,u.NEAREST),R===!0&&(vn.length=0,dn.length=0,vn.push(u.COLOR_ATTACHMENT0+xi),Be.depthBuffer&&Be.resolveDepthBuffer===!1&&(vn.push(ln),dn.push(ln),u.invalidateFramebuffer(u.DRAW_FRAMEBUFFER,dn)),u.invalidateFramebuffer(u.READ_FRAMEBUFFER,vn))}if(s.bindFramebuffer(u.READ_FRAMEBUFFER,null),s.bindFramebuffer(u.DRAW_FRAMEBUFFER,null),Gn)for(let xi=0;xi<Pe.length;xi++){s.bindFramebuffer(u.FRAMEBUFFER,Zn.__webglMultisampledFramebuffer),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0+xi,u.RENDERBUFFER,Zn.__webglColorRenderbuffer[xi]);const wn=f.get(Pe[xi]).__webglTexture;s.bindFramebuffer(u.FRAMEBUFFER,Zn.__webglFramebuffer),u.framebufferTexture2D(u.DRAW_FRAMEBUFFER,u.COLOR_ATTACHMENT0+xi,u.TEXTURE_2D,wn,0)}s.bindFramebuffer(u.DRAW_FRAMEBUFFER,Zn.__webglMultisampledFramebuffer)}else if(Be.depthBuffer&&Be.resolveDepthBuffer===!1&&R){const Pe=Be.stencilBuffer?u.DEPTH_STENCIL_ATTACHMENT:u.DEPTH_ATTACHMENT;u.invalidateFramebuffer(u.DRAW_FRAMEBUFFER,[Pe])}}}function je(Be){return Math.min(d.maxSamples,Be.samples)}function qn(Be){const Pe=f.get(Be);return Be.samples>0&&n.has("WEBGL_multisampled_render_to_texture")===!0&&Pe.__useRenderToTexture!==!1}function An(Be){const Pe=_.render.frame;G.get(Be)!==Pe&&(G.set(Be,Pe),Be.update())}function ri(Be,Pe){const Ke=Be.colorSpace,Ft=Be.format,bn=Be.type;return Be.isCompressedTexture===!0||Be.isVideoTexture===!0||Ke!==LinearSRGBColorSpace&&Ke!==NoColorSpace&&(ColorManagement.getTransfer(Ke)===SRGBTransfer?(Ft!==RGBAFormat||bn!==UnsignedByteType)&&warn("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):error("WebGLTextures: Unsupported texture color space:",Ke)),Pe}function On(Be){return typeof HTMLImageElement<"u"&&Be instanceof HTMLImageElement?(I.width=Be.naturalWidth||Be.width,I.height=Be.naturalHeight||Be.height):typeof VideoFrame<"u"&&Be instanceof VideoFrame?(I.width=Be.displayWidth,I.height=Be.displayHeight):(I.width=Be.width,I.height=Be.height),I}this.allocateTextureUnit=Ee,this.resetTextureUnits=Re,this.setTexture2D=Ne,this.setTexture2DArray=ye,this.setTexture3D=Ae,this.setTextureCube=_e,this.rebindTextures=ni,this.setupRenderTarget=In,this.updateRenderTargetMipmap=qe,this.updateMultisampleRenderTarget=Mn,this.setupDepthRenderbuffer=Vn,this.setupFrameBufferTexture=Mt,this.useMultisampledRTT=qn,this.isReversedDepthBuffer=function(){return s.buffers.depth.getReversed()}}function WebGLUtils(u,n){function s(f,d=NoColorSpace){let y;const _=ColorManagement.getTransfer(d);if(f===UnsignedByteType)return u.UNSIGNED_BYTE;if(f===UnsignedShort4444Type)return u.UNSIGNED_SHORT_4_4_4_4;if(f===UnsignedShort5551Type)return u.UNSIGNED_SHORT_5_5_5_1;if(f===UnsignedInt5999Type)return u.UNSIGNED_INT_5_9_9_9_REV;if(f===UnsignedInt101111Type)return u.UNSIGNED_INT_10F_11F_11F_REV;if(f===ByteType)return u.BYTE;if(f===ShortType)return u.SHORT;if(f===UnsignedShortType)return u.UNSIGNED_SHORT;if(f===IntType)return u.INT;if(f===UnsignedIntType)return u.UNSIGNED_INT;if(f===FloatType)return u.FLOAT;if(f===HalfFloatType)return u.HALF_FLOAT;if(f===AlphaFormat)return u.ALPHA;if(f===RGBFormat)return u.RGB;if(f===RGBAFormat)return u.RGBA;if(f===DepthFormat)return u.DEPTH_COMPONENT;if(f===DepthStencilFormat)return u.DEPTH_STENCIL;if(f===RedFormat)return u.RED;if(f===RedIntegerFormat)return u.RED_INTEGER;if(f===RGFormat)return u.RG;if(f===RGIntegerFormat)return u.RG_INTEGER;if(f===RGBAIntegerFormat)return u.RGBA_INTEGER;if(f===RGB_S3TC_DXT1_Format||f===RGBA_S3TC_DXT1_Format||f===RGBA_S3TC_DXT3_Format||f===RGBA_S3TC_DXT5_Format)if(_===SRGBTransfer)if(y=n.get("WEBGL_compressed_texture_s3tc_srgb"),y!==null){if(f===RGB_S3TC_DXT1_Format)return y.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(f===RGBA_S3TC_DXT1_Format)return y.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(f===RGBA_S3TC_DXT3_Format)return y.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(f===RGBA_S3TC_DXT5_Format)return y.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(y=n.get("WEBGL_compressed_texture_s3tc"),y!==null){if(f===RGB_S3TC_DXT1_Format)return y.COMPRESSED_RGB_S3TC_DXT1_EXT;if(f===RGBA_S3TC_DXT1_Format)return y.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(f===RGBA_S3TC_DXT3_Format)return y.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(f===RGBA_S3TC_DXT5_Format)return y.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(f===RGB_PVRTC_4BPPV1_Format||f===RGB_PVRTC_2BPPV1_Format||f===RGBA_PVRTC_4BPPV1_Format||f===RGBA_PVRTC_2BPPV1_Format)if(y=n.get("WEBGL_compressed_texture_pvrtc"),y!==null){if(f===RGB_PVRTC_4BPPV1_Format)return y.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(f===RGB_PVRTC_2BPPV1_Format)return y.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(f===RGBA_PVRTC_4BPPV1_Format)return y.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(f===RGBA_PVRTC_2BPPV1_Format)return y.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(f===RGB_ETC1_Format||f===RGB_ETC2_Format||f===RGBA_ETC2_EAC_Format||f===R11_EAC_Format||f===SIGNED_R11_EAC_Format||f===RG11_EAC_Format||f===SIGNED_RG11_EAC_Format)if(y=n.get("WEBGL_compressed_texture_etc"),y!==null){if(f===RGB_ETC1_Format||f===RGB_ETC2_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ETC2:y.COMPRESSED_RGB8_ETC2;if(f===RGBA_ETC2_EAC_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:y.COMPRESSED_RGBA8_ETC2_EAC;if(f===R11_EAC_Format)return y.COMPRESSED_R11_EAC;if(f===SIGNED_R11_EAC_Format)return y.COMPRESSED_SIGNED_R11_EAC;if(f===RG11_EAC_Format)return y.COMPRESSED_RG11_EAC;if(f===SIGNED_RG11_EAC_Format)return y.COMPRESSED_SIGNED_RG11_EAC}else return null;if(f===RGBA_ASTC_4x4_Format||f===RGBA_ASTC_5x4_Format||f===RGBA_ASTC_5x5_Format||f===RGBA_ASTC_6x5_Format||f===RGBA_ASTC_6x6_Format||f===RGBA_ASTC_8x5_Format||f===RGBA_ASTC_8x6_Format||f===RGBA_ASTC_8x8_Format||f===RGBA_ASTC_10x5_Format||f===RGBA_ASTC_10x6_Format||f===RGBA_ASTC_10x8_Format||f===RGBA_ASTC_10x10_Format||f===RGBA_ASTC_12x10_Format||f===RGBA_ASTC_12x12_Format)if(y=n.get("WEBGL_compressed_texture_astc"),y!==null){if(f===RGBA_ASTC_4x4_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:y.COMPRESSED_RGBA_ASTC_4x4_KHR;if(f===RGBA_ASTC_5x4_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:y.COMPRESSED_RGBA_ASTC_5x4_KHR;if(f===RGBA_ASTC_5x5_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:y.COMPRESSED_RGBA_ASTC_5x5_KHR;if(f===RGBA_ASTC_6x5_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:y.COMPRESSED_RGBA_ASTC_6x5_KHR;if(f===RGBA_ASTC_6x6_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:y.COMPRESSED_RGBA_ASTC_6x6_KHR;if(f===RGBA_ASTC_8x5_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:y.COMPRESSED_RGBA_ASTC_8x5_KHR;if(f===RGBA_ASTC_8x6_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:y.COMPRESSED_RGBA_ASTC_8x6_KHR;if(f===RGBA_ASTC_8x8_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:y.COMPRESSED_RGBA_ASTC_8x8_KHR;if(f===RGBA_ASTC_10x5_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:y.COMPRESSED_RGBA_ASTC_10x5_KHR;if(f===RGBA_ASTC_10x6_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:y.COMPRESSED_RGBA_ASTC_10x6_KHR;if(f===RGBA_ASTC_10x8_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:y.COMPRESSED_RGBA_ASTC_10x8_KHR;if(f===RGBA_ASTC_10x10_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:y.COMPRESSED_RGBA_ASTC_10x10_KHR;if(f===RGBA_ASTC_12x10_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:y.COMPRESSED_RGBA_ASTC_12x10_KHR;if(f===RGBA_ASTC_12x12_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:y.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(f===RGBA_BPTC_Format||f===RGB_BPTC_SIGNED_Format||f===RGB_BPTC_UNSIGNED_Format)if(y=n.get("EXT_texture_compression_bptc"),y!==null){if(f===RGBA_BPTC_Format)return _===SRGBTransfer?y.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:y.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(f===RGB_BPTC_SIGNED_Format)return y.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(f===RGB_BPTC_UNSIGNED_Format)return y.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(f===RED_RGTC1_Format||f===SIGNED_RED_RGTC1_Format||f===RED_GREEN_RGTC2_Format||f===SIGNED_RED_GREEN_RGTC2_Format)if(y=n.get("EXT_texture_compression_rgtc"),y!==null){if(f===RED_RGTC1_Format)return y.COMPRESSED_RED_RGTC1_EXT;if(f===SIGNED_RED_RGTC1_Format)return y.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(f===RED_GREEN_RGTC2_Format)return y.COMPRESSED_RED_GREEN_RGTC2_EXT;if(f===SIGNED_RED_GREEN_RGTC2_Format)return y.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return f===UnsignedInt248Type?u.UNSIGNED_INT_24_8:u[f]!==void 0?u[f]:null}return{convert:s}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(n,s){if(this.texture===null){const f=new ExternalTexture(n.texture);(n.depthNear!==s.depthNear||n.depthFar!==s.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=f}}getMesh(n){if(this.texture!==null&&this.mesh===null){const s=n.cameras[0].viewport,f=new ShaderMaterial({vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:s.z},depthHeight:{value:s.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),f)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends EventDispatcher{constructor(n,s){super();const f=this;let d=null,y=1,_=null,A="local-floor",R=1,I=null,G=null,Y=null,q=null,K=null,Q=null;const ne=typeof XRWebGLBinding<"u",te=new WebXRDepthSensing,J={},ie=s.getContextAttributes();let re=null,le=null;const fe=[],pe=[],de=new Vector2;let se=null;const he=new PerspectiveCamera;he.viewport=new Vector4;const Se=new PerspectiveCamera;Se.viewport=new Vector4;const ve=[he,Se],Re=new ArrayCamera;let Ee=null,Oe=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ge){let lt=fe[Ge];return lt===void 0&&(lt=new WebXRController,fe[Ge]=lt),lt.getTargetRaySpace()},this.getControllerGrip=function(Ge){let lt=fe[Ge];return lt===void 0&&(lt=new WebXRController,fe[Ge]=lt),lt.getGripSpace()},this.getHand=function(Ge){let lt=fe[Ge];return lt===void 0&&(lt=new WebXRController,fe[Ge]=lt),lt.getHandSpace()};function Ne(Ge){const lt=pe.indexOf(Ge.inputSource);if(lt===-1)return;const Mt=fe[lt];Mt!==void 0&&(Mt.update(Ge.inputSource,Ge.frame,I||_),Mt.dispatchEvent({type:Ge.type,data:Ge.inputSource}))}function ye(){d.removeEventListener("select",Ne),d.removeEventListener("selectstart",Ne),d.removeEventListener("selectend",Ne),d.removeEventListener("squeeze",Ne),d.removeEventListener("squeezestart",Ne),d.removeEventListener("squeezeend",Ne),d.removeEventListener("end",ye),d.removeEventListener("inputsourceschange",Ae);for(let Ge=0;Ge<fe.length;Ge++){const lt=pe[Ge];lt!==null&&(pe[Ge]=null,fe[Ge].disconnect(lt))}Ee=null,Oe=null,te.reset();for(const Ge in J)delete J[Ge];n.setRenderTarget(re),K=null,q=null,Y=null,d=null,le=null,yt.stop(),f.isPresenting=!1,n.setPixelRatio(se),n.setSize(de.width,de.height,!1),f.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ge){y=Ge,f.isPresenting===!0&&warn("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ge){A=Ge,f.isPresenting===!0&&warn("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return I||_},this.setReferenceSpace=function(Ge){I=Ge},this.getBaseLayer=function(){return q!==null?q:K},this.getBinding=function(){return Y===null&&ne&&(Y=new XRWebGLBinding(d,s)),Y},this.getFrame=function(){return Q},this.getSession=function(){return d},this.setSession=async function(Ge){if(d=Ge,d!==null){if(re=n.getRenderTarget(),d.addEventListener("select",Ne),d.addEventListener("selectstart",Ne),d.addEventListener("selectend",Ne),d.addEventListener("squeeze",Ne),d.addEventListener("squeezestart",Ne),d.addEventListener("squeezeend",Ne),d.addEventListener("end",ye),d.addEventListener("inputsourceschange",Ae),ie.xrCompatible!==!0&&await s.makeXRCompatible(),se=n.getPixelRatio(),n.getSize(de),ne&&"createProjectionLayer"in XRWebGLBinding.prototype){let Mt=null,hn=null,Fn=null;ie.depth&&(Fn=ie.stencil?s.DEPTH24_STENCIL8:s.DEPTH_COMPONENT24,Mt=ie.stencil?DepthStencilFormat:DepthFormat,hn=ie.stencil?UnsignedInt248Type:UnsignedIntType);const Vn={colorFormat:s.RGBA8,depthFormat:Fn,scaleFactor:y};Y=this.getBinding(),q=Y.createProjectionLayer(Vn),d.updateRenderState({layers:[q]}),n.setPixelRatio(1),n.setSize(q.textureWidth,q.textureHeight,!1),le=new WebGLRenderTarget(q.textureWidth,q.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(q.textureWidth,q.textureHeight,hn,void 0,void 0,void 0,void 0,void 0,void 0,Mt),stencilBuffer:ie.stencil,colorSpace:n.outputColorSpace,samples:ie.antialias?4:0,resolveDepthBuffer:q.ignoreDepthValues===!1,resolveStencilBuffer:q.ignoreDepthValues===!1})}else{const Mt={antialias:ie.antialias,alpha:!0,depth:ie.depth,stencil:ie.stencil,framebufferScaleFactor:y};K=new XRWebGLLayer(d,s,Mt),d.updateRenderState({baseLayer:K}),n.setPixelRatio(1),n.setSize(K.framebufferWidth,K.framebufferHeight,!1),le=new WebGLRenderTarget(K.framebufferWidth,K.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:n.outputColorSpace,stencilBuffer:ie.stencil,resolveDepthBuffer:K.ignoreDepthValues===!1,resolveStencilBuffer:K.ignoreDepthValues===!1})}le.isXRRenderTarget=!0,this.setFoveation(R),I=null,_=await d.requestReferenceSpace(A),yt.setContext(d),yt.start(),f.isPresenting=!0,f.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(d!==null)return d.environmentBlendMode},this.getDepthTexture=function(){return te.getDepthTexture()};function Ae(Ge){for(let lt=0;lt<Ge.removed.length;lt++){const Mt=Ge.removed[lt],hn=pe.indexOf(Mt);hn>=0&&(pe[hn]=null,fe[hn].disconnect(Mt))}for(let lt=0;lt<Ge.added.length;lt++){const Mt=Ge.added[lt];let hn=pe.indexOf(Mt);if(hn===-1){for(let Vn=0;Vn<fe.length;Vn++)if(Vn>=pe.length){pe.push(Mt),hn=Vn;break}else if(pe[Vn]===null){pe[Vn]=Mt,hn=Vn;break}if(hn===-1)break}const Fn=fe[hn];Fn&&Fn.connect(Mt)}}const _e=new Vector3,Te=new Vector3;function we(Ge,lt,Mt){_e.setFromMatrixPosition(lt.matrixWorld),Te.setFromMatrixPosition(Mt.matrixWorld);const hn=_e.distanceTo(Te),Fn=lt.projectionMatrix.elements,Vn=Mt.projectionMatrix.elements,ni=Fn[14]/(Fn[10]-1),In=Fn[14]/(Fn[10]+1),qe=(Fn[9]+1)/Fn[5],vn=(Fn[9]-1)/Fn[5],dn=(Fn[8]-1)/Fn[0],Mn=(Vn[8]+1)/Vn[0],je=ni*dn,qn=ni*Mn,An=hn/(-dn+Mn),ri=An*-dn;if(lt.matrixWorld.decompose(Ge.position,Ge.quaternion,Ge.scale),Ge.translateX(ri),Ge.translateZ(An),Ge.matrixWorld.compose(Ge.position,Ge.quaternion,Ge.scale),Ge.matrixWorldInverse.copy(Ge.matrixWorld).invert(),Fn[10]===-1)Ge.projectionMatrix.copy(lt.projectionMatrix),Ge.projectionMatrixInverse.copy(lt.projectionMatrixInverse);else{const On=ni+An,Be=In+An,Pe=je-ri,Ke=qn+(hn-ri),Ft=qe*In/Be*On,bn=vn*In/Be*On;Ge.projectionMatrix.makePerspective(Pe,Ke,Ft,bn,On,Be),Ge.projectionMatrixInverse.copy(Ge.projectionMatrix).invert()}}function ge(Ge,lt){lt===null?Ge.matrixWorld.copy(Ge.matrix):Ge.matrixWorld.multiplyMatrices(lt.matrixWorld,Ge.matrix),Ge.matrixWorldInverse.copy(Ge.matrixWorld).invert()}this.updateCamera=function(Ge){if(d===null)return;let lt=Ge.near,Mt=Ge.far;te.texture!==null&&(te.depthNear>0&&(lt=te.depthNear),te.depthFar>0&&(Mt=te.depthFar)),Re.near=Se.near=he.near=lt,Re.far=Se.far=he.far=Mt,(Ee!==Re.near||Oe!==Re.far)&&(d.updateRenderState({depthNear:Re.near,depthFar:Re.far}),Ee=Re.near,Oe=Re.far),Re.layers.mask=Ge.layers.mask|6,he.layers.mask=Re.layers.mask&-5,Se.layers.mask=Re.layers.mask&-3;const hn=Ge.parent,Fn=Re.cameras;ge(Re,hn);for(let Vn=0;Vn<Fn.length;Vn++)ge(Fn[Vn],hn);Fn.length===2?we(Re,he,Se):Re.projectionMatrix.copy(he.projectionMatrix),De(Ge,Re,hn)};function De(Ge,lt,Mt){Mt===null?Ge.matrix.copy(lt.matrixWorld):(Ge.matrix.copy(Mt.matrixWorld),Ge.matrix.invert(),Ge.matrix.multiply(lt.matrixWorld)),Ge.matrix.decompose(Ge.position,Ge.quaternion,Ge.scale),Ge.updateMatrixWorld(!0),Ge.projectionMatrix.copy(lt.projectionMatrix),Ge.projectionMatrixInverse.copy(lt.projectionMatrixInverse),Ge.isPerspectiveCamera&&(Ge.fov=RAD2DEG*2*Math.atan(1/Ge.projectionMatrix.elements[5]),Ge.zoom=1)}this.getCamera=function(){return Re},this.getFoveation=function(){if(!(q===null&&K===null))return R},this.setFoveation=function(Ge){R=Ge,q!==null&&(q.fixedFoveation=Ge),K!==null&&K.fixedFoveation!==void 0&&(K.fixedFoveation=Ge)},this.hasDepthSensing=function(){return te.texture!==null},this.getDepthSensingMesh=function(){return te.getMesh(Re)},this.getCameraTexture=function(Ge){return J[Ge]};let ze=null;function He(Ge,lt){if(G=lt.getViewerPose(I||_),Q=lt,G!==null){const Mt=G.views;K!==null&&(n.setRenderTargetFramebuffer(le,K.framebuffer),n.setRenderTarget(le));let hn=!1;Mt.length!==Re.cameras.length&&(Re.cameras.length=0,hn=!0);for(let In=0;In<Mt.length;In++){const qe=Mt[In];let vn=null;if(K!==null)vn=K.getViewport(qe);else{const Mn=Y.getViewSubImage(q,qe);vn=Mn.viewport,In===0&&(n.setRenderTargetTextures(le,Mn.colorTexture,Mn.depthStencilTexture),n.setRenderTarget(le))}let dn=ve[In];dn===void 0&&(dn=new PerspectiveCamera,dn.layers.enable(In),dn.viewport=new Vector4,ve[In]=dn),dn.matrix.fromArray(qe.transform.matrix),dn.matrix.decompose(dn.position,dn.quaternion,dn.scale),dn.projectionMatrix.fromArray(qe.projectionMatrix),dn.projectionMatrixInverse.copy(dn.projectionMatrix).invert(),dn.viewport.set(vn.x,vn.y,vn.width,vn.height),In===0&&(Re.matrix.copy(dn.matrix),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale)),hn===!0&&Re.cameras.push(dn)}const Fn=d.enabledFeatures;if(Fn&&Fn.includes("depth-sensing")&&d.depthUsage=="gpu-optimized"&&ne){Y=f.getBinding();const In=Y.getDepthInformation(Mt[0]);In&&In.isValid&&In.texture&&te.init(In,d.renderState)}if(Fn&&Fn.includes("camera-access")&&ne){n.state.unbindTexture(),Y=f.getBinding();for(let In=0;In<Mt.length;In++){const qe=Mt[In].camera;if(qe){let vn=J[qe];vn||(vn=new ExternalTexture,J[qe]=vn);const dn=Y.getCameraImage(qe);vn.sourceTexture=dn}}}}for(let Mt=0;Mt<fe.length;Mt++){const hn=pe[Mt],Fn=fe[Mt];hn!==null&&Fn!==void 0&&Fn.update(hn,lt,I||_)}ze&&ze(Ge,lt),lt.detectedPlanes&&f.dispatchEvent({type:"planesdetected",data:lt}),Q=null}const yt=new WebGLAnimation;yt.setAnimationLoop(He),this.setAnimationLoop=function(Ge){ze=Ge},this.dispose=function(){}}}const _e1=new Euler,_m1=new Matrix4;function WebGLMaterials(u,n){function s(te,J){te.matrixAutoUpdate===!0&&te.updateMatrix(),J.value.copy(te.matrix)}function f(te,J){J.color.getRGB(te.fogColor.value,getUnlitUniformColorSpace(u)),J.isFog?(te.fogNear.value=J.near,te.fogFar.value=J.far):J.isFogExp2&&(te.fogDensity.value=J.density)}function d(te,J,ie,re,le){J.isMeshBasicMaterial?y(te,J):J.isMeshLambertMaterial?(y(te,J),J.envMap&&(te.envMapIntensity.value=J.envMapIntensity)):J.isMeshToonMaterial?(y(te,J),Y(te,J)):J.isMeshPhongMaterial?(y(te,J),G(te,J),J.envMap&&(te.envMapIntensity.value=J.envMapIntensity)):J.isMeshStandardMaterial?(y(te,J),q(te,J),J.isMeshPhysicalMaterial&&K(te,J,le)):J.isMeshMatcapMaterial?(y(te,J),Q(te,J)):J.isMeshDepthMaterial?y(te,J):J.isMeshDistanceMaterial?(y(te,J),ne(te,J)):J.isMeshNormalMaterial?y(te,J):J.isLineBasicMaterial?(_(te,J),J.isLineDashedMaterial&&A(te,J)):J.isPointsMaterial?R(te,J,ie,re):J.isSpriteMaterial?I(te,J):J.isShadowMaterial?(te.color.value.copy(J.color),te.opacity.value=J.opacity):J.isShaderMaterial&&(J.uniformsNeedUpdate=!1)}function y(te,J){te.opacity.value=J.opacity,J.color&&te.diffuse.value.copy(J.color),J.emissive&&te.emissive.value.copy(J.emissive).multiplyScalar(J.emissiveIntensity),J.map&&(te.map.value=J.map,s(J.map,te.mapTransform)),J.alphaMap&&(te.alphaMap.value=J.alphaMap,s(J.alphaMap,te.alphaMapTransform)),J.bumpMap&&(te.bumpMap.value=J.bumpMap,s(J.bumpMap,te.bumpMapTransform),te.bumpScale.value=J.bumpScale,J.side===BackSide&&(te.bumpScale.value*=-1)),J.normalMap&&(te.normalMap.value=J.normalMap,s(J.normalMap,te.normalMapTransform),te.normalScale.value.copy(J.normalScale),J.side===BackSide&&te.normalScale.value.negate()),J.displacementMap&&(te.displacementMap.value=J.displacementMap,s(J.displacementMap,te.displacementMapTransform),te.displacementScale.value=J.displacementScale,te.displacementBias.value=J.displacementBias),J.emissiveMap&&(te.emissiveMap.value=J.emissiveMap,s(J.emissiveMap,te.emissiveMapTransform)),J.specularMap&&(te.specularMap.value=J.specularMap,s(J.specularMap,te.specularMapTransform)),J.alphaTest>0&&(te.alphaTest.value=J.alphaTest);const ie=n.get(J),re=ie.envMap,le=ie.envMapRotation;re&&(te.envMap.value=re,_e1.copy(le),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,re.isCubeTexture&&re.isRenderTargetTexture===!1&&(_e1.y*=-1,_e1.z*=-1),te.envMapRotation.value.setFromMatrix4(_m1.makeRotationFromEuler(_e1)),te.flipEnvMap.value=re.isCubeTexture&&re.isRenderTargetTexture===!1?-1:1,te.reflectivity.value=J.reflectivity,te.ior.value=J.ior,te.refractionRatio.value=J.refractionRatio),J.lightMap&&(te.lightMap.value=J.lightMap,te.lightMapIntensity.value=J.lightMapIntensity,s(J.lightMap,te.lightMapTransform)),J.aoMap&&(te.aoMap.value=J.aoMap,te.aoMapIntensity.value=J.aoMapIntensity,s(J.aoMap,te.aoMapTransform))}function _(te,J){te.diffuse.value.copy(J.color),te.opacity.value=J.opacity,J.map&&(te.map.value=J.map,s(J.map,te.mapTransform))}function A(te,J){te.dashSize.value=J.dashSize,te.totalSize.value=J.dashSize+J.gapSize,te.scale.value=J.scale}function R(te,J,ie,re){te.diffuse.value.copy(J.color),te.opacity.value=J.opacity,te.size.value=J.size*ie,te.scale.value=re*.5,J.map&&(te.map.value=J.map,s(J.map,te.uvTransform)),J.alphaMap&&(te.alphaMap.value=J.alphaMap,s(J.alphaMap,te.alphaMapTransform)),J.alphaTest>0&&(te.alphaTest.value=J.alphaTest)}function I(te,J){te.diffuse.value.copy(J.color),te.opacity.value=J.opacity,te.rotation.value=J.rotation,J.map&&(te.map.value=J.map,s(J.map,te.mapTransform)),J.alphaMap&&(te.alphaMap.value=J.alphaMap,s(J.alphaMap,te.alphaMapTransform)),J.alphaTest>0&&(te.alphaTest.value=J.alphaTest)}function G(te,J){te.specular.value.copy(J.specular),te.shininess.value=Math.max(J.shininess,1e-4)}function Y(te,J){J.gradientMap&&(te.gradientMap.value=J.gradientMap)}function q(te,J){te.metalness.value=J.metalness,J.metalnessMap&&(te.metalnessMap.value=J.metalnessMap,s(J.metalnessMap,te.metalnessMapTransform)),te.roughness.value=J.roughness,J.roughnessMap&&(te.roughnessMap.value=J.roughnessMap,s(J.roughnessMap,te.roughnessMapTransform)),J.envMap&&(te.envMapIntensity.value=J.envMapIntensity)}function K(te,J,ie){te.ior.value=J.ior,J.sheen>0&&(te.sheenColor.value.copy(J.sheenColor).multiplyScalar(J.sheen),te.sheenRoughness.value=J.sheenRoughness,J.sheenColorMap&&(te.sheenColorMap.value=J.sheenColorMap,s(J.sheenColorMap,te.sheenColorMapTransform)),J.sheenRoughnessMap&&(te.sheenRoughnessMap.value=J.sheenRoughnessMap,s(J.sheenRoughnessMap,te.sheenRoughnessMapTransform))),J.clearcoat>0&&(te.clearcoat.value=J.clearcoat,te.clearcoatRoughness.value=J.clearcoatRoughness,J.clearcoatMap&&(te.clearcoatMap.value=J.clearcoatMap,s(J.clearcoatMap,te.clearcoatMapTransform)),J.clearcoatRoughnessMap&&(te.clearcoatRoughnessMap.value=J.clearcoatRoughnessMap,s(J.clearcoatRoughnessMap,te.clearcoatRoughnessMapTransform)),J.clearcoatNormalMap&&(te.clearcoatNormalMap.value=J.clearcoatNormalMap,s(J.clearcoatNormalMap,te.clearcoatNormalMapTransform),te.clearcoatNormalScale.value.copy(J.clearcoatNormalScale),J.side===BackSide&&te.clearcoatNormalScale.value.negate())),J.dispersion>0&&(te.dispersion.value=J.dispersion),J.iridescence>0&&(te.iridescence.value=J.iridescence,te.iridescenceIOR.value=J.iridescenceIOR,te.iridescenceThicknessMinimum.value=J.iridescenceThicknessRange[0],te.iridescenceThicknessMaximum.value=J.iridescenceThicknessRange[1],J.iridescenceMap&&(te.iridescenceMap.value=J.iridescenceMap,s(J.iridescenceMap,te.iridescenceMapTransform)),J.iridescenceThicknessMap&&(te.iridescenceThicknessMap.value=J.iridescenceThicknessMap,s(J.iridescenceThicknessMap,te.iridescenceThicknessMapTransform))),J.transmission>0&&(te.transmission.value=J.transmission,te.transmissionSamplerMap.value=ie.texture,te.transmissionSamplerSize.value.set(ie.width,ie.height),J.transmissionMap&&(te.transmissionMap.value=J.transmissionMap,s(J.transmissionMap,te.transmissionMapTransform)),te.thickness.value=J.thickness,J.thicknessMap&&(te.thicknessMap.value=J.thicknessMap,s(J.thicknessMap,te.thicknessMapTransform)),te.attenuationDistance.value=J.attenuationDistance,te.attenuationColor.value.copy(J.attenuationColor)),J.anisotropy>0&&(te.anisotropyVector.value.set(J.anisotropy*Math.cos(J.anisotropyRotation),J.anisotropy*Math.sin(J.anisotropyRotation)),J.anisotropyMap&&(te.anisotropyMap.value=J.anisotropyMap,s(J.anisotropyMap,te.anisotropyMapTransform))),te.specularIntensity.value=J.specularIntensity,te.specularColor.value.copy(J.specularColor),J.specularColorMap&&(te.specularColorMap.value=J.specularColorMap,s(J.specularColorMap,te.specularColorMapTransform)),J.specularIntensityMap&&(te.specularIntensityMap.value=J.specularIntensityMap,s(J.specularIntensityMap,te.specularIntensityMapTransform))}function Q(te,J){J.matcap&&(te.matcap.value=J.matcap)}function ne(te,J){const ie=n.get(J).light;te.referencePosition.value.setFromMatrixPosition(ie.matrixWorld),te.nearDistance.value=ie.shadow.camera.near,te.farDistance.value=ie.shadow.camera.far}return{refreshFogUniforms:f,refreshMaterialUniforms:d}}function WebGLUniformsGroups(u,n,s,f){let d={},y={},_=[];const A=u.getParameter(u.MAX_UNIFORM_BUFFER_BINDINGS);function R(ie,re){const le=re.program;f.uniformBlockBinding(ie,le)}function I(ie,re){let le=d[ie.id];le===void 0&&(Q(ie),le=G(ie),d[ie.id]=le,ie.addEventListener("dispose",te));const fe=re.program;f.updateUBOMapping(ie,fe);const pe=n.render.frame;y[ie.id]!==pe&&(q(ie),y[ie.id]=pe)}function G(ie){const re=Y();ie.__bindingPointIndex=re;const le=u.createBuffer(),fe=ie.__size,pe=ie.usage;return u.bindBuffer(u.UNIFORM_BUFFER,le),u.bufferData(u.UNIFORM_BUFFER,fe,pe),u.bindBuffer(u.UNIFORM_BUFFER,null),u.bindBufferBase(u.UNIFORM_BUFFER,re,le),le}function Y(){for(let ie=0;ie<A;ie++)if(_.indexOf(ie)===-1)return _.push(ie),ie;return error("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function q(ie){const re=d[ie.id],le=ie.uniforms,fe=ie.__cache;u.bindBuffer(u.UNIFORM_BUFFER,re);for(let pe=0,de=le.length;pe<de;pe++){const se=Array.isArray(le[pe])?le[pe]:[le[pe]];for(let he=0,Se=se.length;he<Se;he++){const ve=se[he];if(K(ve,pe,he,fe)===!0){const Re=ve.__offset,Ee=Array.isArray(ve.value)?ve.value:[ve.value];let Oe=0;for(let Ne=0;Ne<Ee.length;Ne++){const ye=Ee[Ne],Ae=ne(ye);typeof ye=="number"||typeof ye=="boolean"?(ve.__data[0]=ye,u.bufferSubData(u.UNIFORM_BUFFER,Re+Oe,ve.__data)):ye.isMatrix3?(ve.__data[0]=ye.elements[0],ve.__data[1]=ye.elements[1],ve.__data[2]=ye.elements[2],ve.__data[3]=0,ve.__data[4]=ye.elements[3],ve.__data[5]=ye.elements[4],ve.__data[6]=ye.elements[5],ve.__data[7]=0,ve.__data[8]=ye.elements[6],ve.__data[9]=ye.elements[7],ve.__data[10]=ye.elements[8],ve.__data[11]=0):(ye.toArray(ve.__data,Oe),Oe+=Ae.storage/Float32Array.BYTES_PER_ELEMENT)}u.bufferSubData(u.UNIFORM_BUFFER,Re,ve.__data)}}}u.bindBuffer(u.UNIFORM_BUFFER,null)}function K(ie,re,le,fe){const pe=ie.value,de=re+"_"+le;if(fe[de]===void 0)return typeof pe=="number"||typeof pe=="boolean"?fe[de]=pe:fe[de]=pe.clone(),!0;{const se=fe[de];if(typeof pe=="number"||typeof pe=="boolean"){if(se!==pe)return fe[de]=pe,!0}else if(se.equals(pe)===!1)return se.copy(pe),!0}return!1}function Q(ie){const re=ie.uniforms;let le=0;const fe=16;for(let de=0,se=re.length;de<se;de++){const he=Array.isArray(re[de])?re[de]:[re[de]];for(let Se=0,ve=he.length;Se<ve;Se++){const Re=he[Se],Ee=Array.isArray(Re.value)?Re.value:[Re.value];for(let Oe=0,Ne=Ee.length;Oe<Ne;Oe++){const ye=Ee[Oe],Ae=ne(ye),_e=le%fe,Te=_e%Ae.boundary,we=_e+Te;le+=Te,we!==0&&fe-we<Ae.storage&&(le+=fe-we),Re.__data=new Float32Array(Ae.storage/Float32Array.BYTES_PER_ELEMENT),Re.__offset=le,le+=Ae.storage}}}const pe=le%fe;return pe>0&&(le+=fe-pe),ie.__size=le,ie.__cache={},this}function ne(ie){const re={boundary:0,storage:0};return typeof ie=="number"||typeof ie=="boolean"?(re.boundary=4,re.storage=4):ie.isVector2?(re.boundary=8,re.storage=8):ie.isVector3||ie.isColor?(re.boundary=16,re.storage=12):ie.isVector4?(re.boundary=16,re.storage=16):ie.isMatrix3?(re.boundary=48,re.storage=48):ie.isMatrix4?(re.boundary=64,re.storage=64):ie.isTexture?warn("WebGLRenderer: Texture samplers can not be part of an uniforms group."):warn("WebGLRenderer: Unsupported uniform value type.",ie),re}function te(ie){const re=ie.target;re.removeEventListener("dispose",te);const le=_.indexOf(re.__bindingPointIndex);_.splice(le,1),u.deleteBuffer(d[re.id]),delete d[re.id],delete y[re.id]}function J(){for(const ie in d)u.deleteBuffer(d[ie]);_=[],d={},y={}}return{bind:R,update:I,dispose:J}}const DATA=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let lut=null;function getDFGLUT(){return lut===null&&(lut=new DataTexture(DATA,16,16,RGFormat,HalfFloatType),lut.name="DFG_LUT",lut.minFilter=LinearFilter,lut.magFilter=LinearFilter,lut.wrapS=ClampToEdgeWrapping,lut.wrapT=ClampToEdgeWrapping,lut.generateMipmaps=!1,lut.needsUpdate=!0),lut}class WebGLRenderer{constructor(n={}){const{canvas:s=createCanvasElement(),context:f=null,depth:d=!0,stencil:y=!1,alpha:_=!1,antialias:A=!1,premultipliedAlpha:R=!0,preserveDrawingBuffer:I=!1,powerPreference:G="default",failIfMajorPerformanceCaveat:Y=!1,reversedDepthBuffer:q=!1,outputBufferType:K=UnsignedByteType}=n;this.isWebGLRenderer=!0;let Q;if(f!==null){if(typeof WebGLRenderingContext<"u"&&f instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");Q=f.getContextAttributes().alpha}else Q=_;const ne=K,te=new Set([RGBAIntegerFormat,RGIntegerFormat,RedIntegerFormat]),J=new Set([UnsignedByteType,UnsignedIntType,UnsignedShortType,UnsignedInt248Type,UnsignedShort4444Type,UnsignedShort5551Type]),ie=new Uint32Array(4),re=new Int32Array(4);let le=null,fe=null;const pe=[],de=[];let se=null;this.domElement=s,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const he=this;let Se=!1;this._outputColorSpace=SRGBColorSpace;let ve=0,Re=0,Ee=null,Oe=-1,Ne=null;const ye=new Vector4,Ae=new Vector4;let _e=null;const Te=new Color(0);let we=0,ge=s.width,De=s.height,ze=1,He=null,yt=null;const Ge=new Vector4(0,0,ge,De),lt=new Vector4(0,0,ge,De);let Mt=!1;const hn=new Frustum;let Fn=!1,Vn=!1;const ni=new Matrix4,In=new Vector3,qe=new Vector4,vn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let dn=!1;function Mn(){return Ee===null?ze:1}let je=f;function qn(ke,Xe){return s.getContext(ke,Xe)}try{const ke={alpha:!0,depth:d,stencil:y,antialias:A,premultipliedAlpha:R,preserveDrawingBuffer:I,powerPreference:G,failIfMajorPerformanceCaveat:Y};if("setAttribute"in s&&s.setAttribute("data-engine",`three.js r${REVISION}`),s.addEventListener("webglcontextlost",ci,!1),s.addEventListener("webglcontextrestored",Ai,!1),s.addEventListener("webglcontextcreationerror",ji,!1),je===null){const Xe="webgl2";if(je=qn(Xe,ke),je===null)throw qn(Xe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ke){throw error("WebGLRenderer: "+ke.message),ke}let An,ri,On,Be,Pe,Ke,Ft,bn,ln,Zn,Gn,fi,xi,wn,Tn,oi,Jn,ei,gi,dt,kt,Hn,Kn;function Bn(){An=new WebGLExtensions(je),An.init(),kt=new WebGLUtils(je,An),ri=new WebGLCapabilities(je,An,n,kt),On=new WebGLState(je,An),ri.reversedDepthBuffer&&q&&On.buffers.depth.setReversed(!0),Be=new WebGLInfo(je),Pe=new WebGLProperties,Ke=new WebGLTextures(je,An,On,Pe,ri,kt,Be),Ft=new WebGLEnvironments(he),bn=new WebGLAttributes(je),Hn=new WebGLBindingStates(je,bn),ln=new WebGLGeometries(je,bn,Be,Hn),Zn=new WebGLObjects(je,ln,bn,Hn,Be),ei=new WebGLMorphtargets(je,ri,Ke),Tn=new WebGLClipping(Pe),Gn=new WebGLPrograms(he,Ft,An,ri,Hn,Tn),fi=new WebGLMaterials(he,Pe),xi=new WebGLRenderLists,wn=new WebGLRenderStates(An),Jn=new WebGLBackground(he,Ft,On,Zn,Q,R),oi=new WebGLShadowMap(he,Zn,ri),Kn=new WebGLUniformsGroups(je,Be,ri,On),gi=new WebGLBufferRenderer(je,An,Be),dt=new WebGLIndexedBufferRenderer(je,An,Be),Be.programs=Gn.programs,he.capabilities=ri,he.extensions=An,he.properties=Pe,he.renderLists=xi,he.shadowMap=oi,he.state=On,he.info=Be}Bn(),ne!==UnsignedByteType&&(se=new WebGLOutput(ne,s.width,s.height,d,y));const pn=new WebXRManager(he,je);this.xr=pn,this.getContext=function(){return je},this.getContextAttributes=function(){return je.getContextAttributes()},this.forceContextLoss=function(){const ke=An.get("WEBGL_lose_context");ke&&ke.loseContext()},this.forceContextRestore=function(){const ke=An.get("WEBGL_lose_context");ke&&ke.restoreContext()},this.getPixelRatio=function(){return ze},this.setPixelRatio=function(ke){ke!==void 0&&(ze=ke,this.setSize(ge,De,!1))},this.getSize=function(ke){return ke.set(ge,De)},this.setSize=function(ke,Xe,Qe=!0){if(pn.isPresenting){warn("WebGLRenderer: Can't change size while VR device is presenting.");return}ge=ke,De=Xe,s.width=Math.floor(ke*ze),s.height=Math.floor(Xe*ze),Qe===!0&&(s.style.width=ke+"px",s.style.height=Xe+"px"),se!==null&&se.setSize(s.width,s.height),this.setViewport(0,0,ke,Xe)},this.getDrawingBufferSize=function(ke){return ke.set(ge*ze,De*ze).floor()},this.setDrawingBufferSize=function(ke,Xe,Qe){ge=ke,De=Xe,ze=Qe,s.width=Math.floor(ke*Qe),s.height=Math.floor(Xe*Qe),this.setViewport(0,0,ke,Xe)},this.setEffects=function(ke){if(ne===UnsignedByteType){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(ke){for(let Xe=0;Xe<ke.length;Xe++)if(ke[Xe].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}se.setEffects(ke||[])},this.getCurrentViewport=function(ke){return ke.copy(ye)},this.getViewport=function(ke){return ke.copy(Ge)},this.setViewport=function(ke,Xe,Qe,Ze){ke.isVector4?Ge.set(ke.x,ke.y,ke.z,ke.w):Ge.set(ke,Xe,Qe,Ze),On.viewport(ye.copy(Ge).multiplyScalar(ze).round())},this.getScissor=function(ke){return ke.copy(lt)},this.setScissor=function(ke,Xe,Qe,Ze){ke.isVector4?lt.set(ke.x,ke.y,ke.z,ke.w):lt.set(ke,Xe,Qe,Ze),On.scissor(Ae.copy(lt).multiplyScalar(ze).round())},this.getScissorTest=function(){return Mt},this.setScissorTest=function(ke){On.setScissorTest(Mt=ke)},this.setOpaqueSort=function(ke){He=ke},this.setTransparentSort=function(ke){yt=ke},this.getClearColor=function(ke){return ke.copy(Jn.getClearColor())},this.setClearColor=function(){Jn.setClearColor(...arguments)},this.getClearAlpha=function(){return Jn.getClearAlpha()},this.setClearAlpha=function(){Jn.setClearAlpha(...arguments)},this.clear=function(ke=!0,Xe=!0,Qe=!0){let Ze=0;if(ke){let Je=!1;if(Ee!==null){const En=Ee.texture.format;Je=te.has(En)}if(Je){const En=Ee.texture.type,Pn=J.has(En),kn=Jn.getClearColor(),Nn=Jn.getClearAlpha(),ai=kn.r,li=kn.g,mi=kn.b;Pn?(ie[0]=ai,ie[1]=li,ie[2]=mi,ie[3]=Nn,je.clearBufferuiv(je.COLOR,0,ie)):(re[0]=ai,re[1]=li,re[2]=mi,re[3]=Nn,je.clearBufferiv(je.COLOR,0,re))}else Ze|=je.COLOR_BUFFER_BIT}Xe&&(Ze|=je.DEPTH_BUFFER_BIT),Qe&&(Ze|=je.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ze!==0&&je.clear(Ze)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){s.removeEventListener("webglcontextlost",ci,!1),s.removeEventListener("webglcontextrestored",Ai,!1),s.removeEventListener("webglcontextcreationerror",ji,!1),Jn.dispose(),xi.dispose(),wn.dispose(),Pe.dispose(),Ft.dispose(),Zn.dispose(),Hn.dispose(),Kn.dispose(),Gn.dispose(),pn.dispose(),pn.removeEventListener("sessionstart",Is),pn.removeEventListener("sessionend",$r),es.stop()};function ci(ke){ke.preventDefault(),log("WebGLRenderer: Context Lost."),Se=!0}function Ai(){log("WebGLRenderer: Context Restored."),Se=!1;const ke=Be.autoReset,Xe=oi.enabled,Qe=oi.autoUpdate,Ze=oi.needsUpdate,Je=oi.type;Bn(),Be.autoReset=ke,oi.enabled=Xe,oi.autoUpdate=Qe,oi.needsUpdate=Ze,oi.type=Je}function ji(ke){error("WebGLRenderer: A WebGL context could not be created. Reason: ",ke.statusMessage)}function Ii(ke){const Xe=ke.target;Xe.removeEventListener("dispose",Ii),Jr(Xe)}function Jr(ke){fs(ke),Pe.remove(ke)}function fs(ke){const Xe=Pe.get(ke).programs;Xe!==void 0&&(Xe.forEach(function(Qe){Gn.releaseProgram(Qe)}),ke.isShaderMaterial&&Gn.releaseShaderCache(ke))}this.renderBufferDirect=function(ke,Xe,Qe,Ze,Je,En){Xe===null&&(Xe=vn);const Pn=Je.isMesh&&Je.matrixWorld.determinant()<0,kn=yn(ke,Xe,Qe,Ze,Je);On.setMaterial(Ze,Pn);let Nn=Qe.index,ai=1;if(Ze.wireframe===!0){if(Nn=ln.getWireframeAttribute(Qe),Nn===void 0)return;ai=2}const li=Qe.drawRange,mi=Qe.attributes.position;let zn=li.start*ai,di=(li.start+li.count)*ai;En!==null&&(zn=Math.max(zn,En.start*ai),di=Math.min(di,(En.start+En.count)*ai)),Nn!==null?(zn=Math.max(zn,0),di=Math.min(di,Nn.count)):mi!=null&&(zn=Math.max(zn,0),di=Math.min(di,mi.count));const Vi=di-zn;if(Vi<0||Vi===1/0)return;Hn.setup(Je,Ze,kn,Qe,Nn);let Xi,ui=gi;if(Nn!==null&&(Xi=bn.get(Nn),ui=dt,ui.setIndex(Xi)),Je.isMesh)Ze.wireframe===!0?(On.setLineWidth(Ze.wireframeLinewidth*Mn()),ui.setMode(je.LINES)):ui.setMode(je.TRIANGLES);else if(Je.isLine){let pi=Ze.linewidth;pi===void 0&&(pi=1),On.setLineWidth(pi*Mn()),Je.isLineSegments?ui.setMode(je.LINES):Je.isLineLoop?ui.setMode(je.LINE_LOOP):ui.setMode(je.LINE_STRIP)}else Je.isPoints?ui.setMode(je.POINTS):Je.isSprite&&ui.setMode(je.TRIANGLES);if(Je.isBatchedMesh)if(Je._multiDrawInstances!==null)warnOnce("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),ui.renderMultiDrawInstances(Je._multiDrawStarts,Je._multiDrawCounts,Je._multiDrawCount,Je._multiDrawInstances);else if(An.get("WEBGL_multi_draw"))ui.renderMultiDraw(Je._multiDrawStarts,Je._multiDrawCounts,Je._multiDrawCount);else{const pi=Je._multiDrawStarts,Ln=Je._multiDrawCounts,wi=Je._multiDrawCount,si=Nn?bn.get(Nn).bytesPerElement:1,tr=Pe.get(Ze).currentProgram.getUniforms();for(let Ar=0;Ar<wi;Ar++)tr.setValue(je,"_gl_DrawID",Ar),ui.render(pi[Ar]/si,Ln[Ar])}else if(Je.isInstancedMesh)ui.renderInstances(zn,Vi,Je.count);else if(Qe.isInstancedBufferGeometry){const pi=Qe._maxInstanceCount!==void 0?Qe._maxInstanceCount:1/0,Ln=Math.min(Qe.instanceCount,pi);ui.renderInstances(zn,Vi,Ln)}else ui.render(zn,Vi)};function As(ke,Xe,Qe){ke.transparent===!0&&ke.side===DoubleSide&&ke.forceSinglePass===!1?(ke.side=BackSide,ke.needsUpdate=!0,We(ke,Xe,Qe),ke.side=FrontSide,ke.needsUpdate=!0,We(ke,Xe,Qe),ke.side=DoubleSide):We(ke,Xe,Qe)}this.compile=function(ke,Xe,Qe=null){Qe===null&&(Qe=ke),fe=wn.get(Qe),fe.init(Xe),de.push(fe),Qe.traverseVisible(function(Je){Je.isLight&&Je.layers.test(Xe.layers)&&(fe.pushLight(Je),Je.castShadow&&fe.pushShadow(Je))}),ke!==Qe&&ke.traverseVisible(function(Je){Je.isLight&&Je.layers.test(Xe.layers)&&(fe.pushLight(Je),Je.castShadow&&fe.pushShadow(Je))}),fe.setupLights();const Ze=new Set;return ke.traverse(function(Je){if(!(Je.isMesh||Je.isPoints||Je.isLine||Je.isSprite))return;const En=Je.material;if(En)if(Array.isArray(En))for(let Pn=0;Pn<En.length;Pn++){const kn=En[Pn];As(kn,Qe,Je),Ze.add(kn)}else As(En,Qe,Je),Ze.add(En)}),fe=de.pop(),Ze},this.compileAsync=function(ke,Xe,Qe=null){const Ze=this.compile(ke,Xe,Qe);return new Promise(Je=>{function En(){if(Ze.forEach(function(Pn){Pe.get(Pn).currentProgram.isReady()&&Ze.delete(Pn)}),Ze.size===0){Je(ke);return}setTimeout(En,10)}An.get("KHR_parallel_shader_compile")!==null?En():setTimeout(En,10)})};let Hs=null;function na(ke){Hs&&Hs(ke)}function Is(){es.stop()}function $r(){es.start()}const es=new WebGLAnimation;es.setAnimationLoop(na),typeof self<"u"&&es.setContext(self),this.setAnimationLoop=function(ke){Hs=ke,pn.setAnimationLoop(ke),ke===null?es.stop():es.start()},pn.addEventListener("sessionstart",Is),pn.addEventListener("sessionend",$r),this.render=function(ke,Xe){if(Xe!==void 0&&Xe.isCamera!==!0){error("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Se===!0)return;const Qe=pn.enabled===!0&&pn.isPresenting===!0,Ze=se!==null&&(Ee===null||Qe)&&se.begin(he,Ee);if(ke.matrixWorldAutoUpdate===!0&&ke.updateMatrixWorld(),Xe.parent===null&&Xe.matrixWorldAutoUpdate===!0&&Xe.updateMatrixWorld(),pn.enabled===!0&&pn.isPresenting===!0&&(se===null||se.isCompositing()===!1)&&(pn.cameraAutoUpdate===!0&&pn.updateCamera(Xe),Xe=pn.getCamera()),ke.isScene===!0&&ke.onBeforeRender(he,ke,Xe,Ee),fe=wn.get(ke,de.length),fe.init(Xe),de.push(fe),ni.multiplyMatrices(Xe.projectionMatrix,Xe.matrixWorldInverse),hn.setFromProjectionMatrix(ni,WebGLCoordinateSystem,Xe.reversedDepth),Vn=this.localClippingEnabled,Fn=Tn.init(this.clippingPlanes,Vn),le=xi.get(ke,pe.length),le.init(),pe.push(le),pn.enabled===!0&&pn.isPresenting===!0){const Pn=he.xr.getDepthSensingMesh();Pn!==null&&bi(Pn,Xe,-1/0,he.sortObjects)}bi(ke,Xe,0,he.sortObjects),le.finish(),he.sortObjects===!0&&le.sort(He,yt),dn=pn.enabled===!1||pn.isPresenting===!1||pn.hasDepthSensing()===!1,dn&&Jn.addToRenderList(le,ke),this.info.render.frame++,Fn===!0&&Tn.beginShadows();const Je=fe.state.shadowsArray;if(oi.render(Je,ke,Xe),Fn===!0&&Tn.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Ze&&se.hasRenderPass())===!1){const Pn=le.opaque,kn=le.transmissive;if(fe.setupLights(),Xe.isArrayCamera){const Nn=Xe.cameras;if(kn.length>0)for(let ai=0,li=Nn.length;ai<li;ai++){const mi=Nn[ai];pr(Pn,kn,ke,mi)}dn&&Jn.render(ke);for(let ai=0,li=Nn.length;ai<li;ai++){const mi=Nn[ai];ds(le,ke,mi,mi.viewport)}}else kn.length>0&&pr(Pn,kn,ke,Xe),dn&&Jn.render(ke),ds(le,ke,Xe)}Ee!==null&&Re===0&&(Ke.updateMultisampleRenderTarget(Ee),Ke.updateRenderTargetMipmap(Ee)),Ze&&se.end(he),ke.isScene===!0&&ke.onAfterRender(he,ke,Xe),Hn.resetDefaultState(),Oe=-1,Ne=null,de.pop(),de.length>0?(fe=de[de.length-1],Fn===!0&&Tn.setGlobalState(he.clippingPlanes,fe.state.camera)):fe=null,pe.pop(),pe.length>0?le=pe[pe.length-1]:le=null};function bi(ke,Xe,Qe,Ze){if(ke.visible===!1)return;if(ke.layers.test(Xe.layers)){if(ke.isGroup)Qe=ke.renderOrder;else if(ke.isLOD)ke.autoUpdate===!0&&ke.update(Xe);else if(ke.isLight)fe.pushLight(ke),ke.castShadow&&fe.pushShadow(ke);else if(ke.isSprite){if(!ke.frustumCulled||hn.intersectsSprite(ke)){Ze&&qe.setFromMatrixPosition(ke.matrixWorld).applyMatrix4(ni);const Pn=Zn.update(ke),kn=ke.material;kn.visible&&le.push(ke,Pn,kn,Qe,qe.z,null)}}else if((ke.isMesh||ke.isLine||ke.isPoints)&&(!ke.frustumCulled||hn.intersectsObject(ke))){const Pn=Zn.update(ke),kn=ke.material;if(Ze&&(ke.boundingSphere!==void 0?(ke.boundingSphere===null&&ke.computeBoundingSphere(),qe.copy(ke.boundingSphere.center)):(Pn.boundingSphere===null&&Pn.computeBoundingSphere(),qe.copy(Pn.boundingSphere.center)),qe.applyMatrix4(ke.matrixWorld).applyMatrix4(ni)),Array.isArray(kn)){const Nn=Pn.groups;for(let ai=0,li=Nn.length;ai<li;ai++){const mi=Nn[ai],zn=kn[mi.materialIndex];zn&&zn.visible&&le.push(ke,Pn,zn,Qe,qe.z,mi)}}else kn.visible&&le.push(ke,Pn,kn,Qe,qe.z,null)}}const En=ke.children;for(let Pn=0,kn=En.length;Pn<kn;Pn++)bi(En[Pn],Xe,Qe,Ze)}function ds(ke,Xe,Qe,Ze){const{opaque:Je,transmissive:En,transparent:Pn}=ke;fe.setupLightsView(Qe),Fn===!0&&Tn.setGlobalState(he.clippingPlanes,Qe),Ze&&On.viewport(ye.copy(Ze)),Je.length>0&&Ie(Je,Xe,Qe),En.length>0&&Ie(En,Xe,Qe),Pn.length>0&&Ie(Pn,Xe,Qe),On.buffers.depth.setTest(!0),On.buffers.depth.setMask(!0),On.buffers.color.setMask(!0),On.setPolygonOffset(!1)}function pr(ke,Xe,Qe,Ze){if((Qe.isScene===!0?Qe.overrideMaterial:null)!==null)return;if(fe.state.transmissionRenderTarget[Ze.id]===void 0){const zn=An.has("EXT_color_buffer_half_float")||An.has("EXT_color_buffer_float");fe.state.transmissionRenderTarget[Ze.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:zn?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:ri.samples,stencilBuffer:y,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ColorManagement.workingColorSpace})}const En=fe.state.transmissionRenderTarget[Ze.id],Pn=Ze.viewport||ye;En.setSize(Pn.z*he.transmissionResolutionScale,Pn.w*he.transmissionResolutionScale);const kn=he.getRenderTarget(),Nn=he.getActiveCubeFace(),ai=he.getActiveMipmapLevel();he.setRenderTarget(En),he.getClearColor(Te),we=he.getClearAlpha(),we<1&&he.setClearColor(16777215,.5),he.clear(),dn&&Jn.render(Qe);const li=he.toneMapping;he.toneMapping=NoToneMapping;const mi=Ze.viewport;if(Ze.viewport!==void 0&&(Ze.viewport=void 0),fe.setupLightsView(Ze),Fn===!0&&Tn.setGlobalState(he.clippingPlanes,Ze),Ie(ke,Qe,Ze),Ke.updateMultisampleRenderTarget(En),Ke.updateRenderTargetMipmap(En),An.has("WEBGL_multisampled_render_to_texture")===!1){let zn=!1;for(let di=0,Vi=Xe.length;di<Vi;di++){const Xi=Xe[di],{object:ui,geometry:pi,material:Ln,group:wi}=Xi;if(Ln.side===DoubleSide&&ui.layers.test(Ze.layers)){const si=Ln.side;Ln.side=BackSide,Ln.needsUpdate=!0,Fe(ui,Qe,Ze,pi,Ln,wi),Ln.side=si,Ln.needsUpdate=!0,zn=!0}}zn===!0&&(Ke.updateMultisampleRenderTarget(En),Ke.updateRenderTargetMipmap(En))}he.setRenderTarget(kn,Nn,ai),he.setClearColor(Te,we),mi!==void 0&&(Ze.viewport=mi),he.toneMapping=li}function Ie(ke,Xe,Qe){const Ze=Xe.isScene===!0?Xe.overrideMaterial:null;for(let Je=0,En=ke.length;Je<En;Je++){const Pn=ke[Je],{object:kn,geometry:Nn,group:ai}=Pn;let li=Pn.material;li.allowOverride===!0&&Ze!==null&&(li=Ze),kn.layers.test(Qe.layers)&&Fe(kn,Xe,Qe,Nn,li,ai)}}function Fe(ke,Xe,Qe,Ze,Je,En){ke.onBeforeRender(he,Xe,Qe,Ze,Je,En),ke.modelViewMatrix.multiplyMatrices(Qe.matrixWorldInverse,ke.matrixWorld),ke.normalMatrix.getNormalMatrix(ke.modelViewMatrix),Je.onBeforeRender(he,Xe,Qe,Ze,ke,En),Je.transparent===!0&&Je.side===DoubleSide&&Je.forceSinglePass===!1?(Je.side=BackSide,Je.needsUpdate=!0,he.renderBufferDirect(Qe,Xe,Ze,Je,ke,En),Je.side=FrontSide,Je.needsUpdate=!0,he.renderBufferDirect(Qe,Xe,Ze,Je,ke,En),Je.side=DoubleSide):he.renderBufferDirect(Qe,Xe,Ze,Je,ke,En),ke.onAfterRender(he,Xe,Qe,Ze,Je,En)}function We(ke,Xe,Qe){Xe.isScene!==!0&&(Xe=vn);const Ze=Pe.get(ke),Je=fe.state.lights,En=fe.state.shadowsArray,Pn=Je.state.version,kn=Gn.getParameters(ke,Je.state,En,Xe,Qe),Nn=Gn.getProgramCacheKey(kn);let ai=Ze.programs;Ze.environment=ke.isMeshStandardMaterial||ke.isMeshLambertMaterial||ke.isMeshPhongMaterial?Xe.environment:null,Ze.fog=Xe.fog;const li=ke.isMeshStandardMaterial||ke.isMeshLambertMaterial&&!ke.envMap||ke.isMeshPhongMaterial&&!ke.envMap;Ze.envMap=Ft.get(ke.envMap||Ze.environment,li),Ze.envMapRotation=Ze.environment!==null&&ke.envMap===null?Xe.environmentRotation:ke.envMapRotation,ai===void 0&&(ke.addEventListener("dispose",Ii),ai=new Map,Ze.programs=ai);let mi=ai.get(Nn);if(mi!==void 0){if(Ze.currentProgram===mi&&Ze.lightsStateVersion===Pn)return mn(ke,kn),mi}else kn.uniforms=Gn.getUniforms(ke),ke.onBeforeCompile(kn,he),mi=Gn.acquireProgram(kn,Nn),ai.set(Nn,mi),Ze.uniforms=kn.uniforms;const zn=Ze.uniforms;return(!ke.isShaderMaterial&&!ke.isRawShaderMaterial||ke.clipping===!0)&&(zn.clippingPlanes=Tn.uniform),mn(ke,kn),Ze.needsLights=Dn(ke),Ze.lightsStateVersion=Pn,Ze.needsLights&&(zn.ambientLightColor.value=Je.state.ambient,zn.lightProbe.value=Je.state.probe,zn.directionalLights.value=Je.state.directional,zn.directionalLightShadows.value=Je.state.directionalShadow,zn.spotLights.value=Je.state.spot,zn.spotLightShadows.value=Je.state.spotShadow,zn.rectAreaLights.value=Je.state.rectArea,zn.ltc_1.value=Je.state.rectAreaLTC1,zn.ltc_2.value=Je.state.rectAreaLTC2,zn.pointLights.value=Je.state.point,zn.pointLightShadows.value=Je.state.pointShadow,zn.hemisphereLights.value=Je.state.hemi,zn.directionalShadowMatrix.value=Je.state.directionalShadowMatrix,zn.spotLightMatrix.value=Je.state.spotLightMatrix,zn.spotLightMap.value=Je.state.spotLightMap,zn.pointShadowMatrix.value=Je.state.pointShadowMatrix),Ze.currentProgram=mi,Ze.uniformsList=null,mi}function Nt(ke){if(ke.uniformsList===null){const Xe=ke.currentProgram.getUniforms();ke.uniformsList=WebGLUniforms.seqWithValue(Xe.seq,ke.uniforms)}return ke.uniformsList}function mn(ke,Xe){const Qe=Pe.get(ke);Qe.outputColorSpace=Xe.outputColorSpace,Qe.batching=Xe.batching,Qe.batchingColor=Xe.batchingColor,Qe.instancing=Xe.instancing,Qe.instancingColor=Xe.instancingColor,Qe.instancingMorph=Xe.instancingMorph,Qe.skinning=Xe.skinning,Qe.morphTargets=Xe.morphTargets,Qe.morphNormals=Xe.morphNormals,Qe.morphColors=Xe.morphColors,Qe.morphTargetsCount=Xe.morphTargetsCount,Qe.numClippingPlanes=Xe.numClippingPlanes,Qe.numIntersection=Xe.numClipIntersection,Qe.vertexAlphas=Xe.vertexAlphas,Qe.vertexTangents=Xe.vertexTangents,Qe.toneMapping=Xe.toneMapping}function yn(ke,Xe,Qe,Ze,Je){Xe.isScene!==!0&&(Xe=vn),Ke.resetTextureUnits();const En=Xe.fog,Pn=Ze.isMeshStandardMaterial||Ze.isMeshLambertMaterial||Ze.isMeshPhongMaterial?Xe.environment:null,kn=Ee===null?he.outputColorSpace:Ee.isXRRenderTarget===!0?Ee.texture.colorSpace:LinearSRGBColorSpace,Nn=Ze.isMeshStandardMaterial||Ze.isMeshLambertMaterial&&!Ze.envMap||Ze.isMeshPhongMaterial&&!Ze.envMap,ai=Ft.get(Ze.envMap||Pn,Nn),li=Ze.vertexColors===!0&&!!Qe.attributes.color&&Qe.attributes.color.itemSize===4,mi=!!Qe.attributes.tangent&&(!!Ze.normalMap||Ze.anisotropy>0),zn=!!Qe.morphAttributes.position,di=!!Qe.morphAttributes.normal,Vi=!!Qe.morphAttributes.color;let Xi=NoToneMapping;Ze.toneMapped&&(Ee===null||Ee.isXRRenderTarget===!0)&&(Xi=he.toneMapping);const ui=Qe.morphAttributes.position||Qe.morphAttributes.normal||Qe.morphAttributes.color,pi=ui!==void 0?ui.length:0,Ln=Pe.get(Ze),wi=fe.state.lights;if(Fn===!0&&(Vn===!0||ke!==Ne)){const Cr=ke===Ne&&Ze.id===Oe;Tn.setState(Ze,ke,Cr)}let si=!1;Ze.version===Ln.__version?(Ln.needsLights&&Ln.lightsStateVersion!==wi.state.version||Ln.outputColorSpace!==kn||Je.isBatchedMesh&&Ln.batching===!1||!Je.isBatchedMesh&&Ln.batching===!0||Je.isBatchedMesh&&Ln.batchingColor===!0&&Je.colorTexture===null||Je.isBatchedMesh&&Ln.batchingColor===!1&&Je.colorTexture!==null||Je.isInstancedMesh&&Ln.instancing===!1||!Je.isInstancedMesh&&Ln.instancing===!0||Je.isSkinnedMesh&&Ln.skinning===!1||!Je.isSkinnedMesh&&Ln.skinning===!0||Je.isInstancedMesh&&Ln.instancingColor===!0&&Je.instanceColor===null||Je.isInstancedMesh&&Ln.instancingColor===!1&&Je.instanceColor!==null||Je.isInstancedMesh&&Ln.instancingMorph===!0&&Je.morphTexture===null||Je.isInstancedMesh&&Ln.instancingMorph===!1&&Je.morphTexture!==null||Ln.envMap!==ai||Ze.fog===!0&&Ln.fog!==En||Ln.numClippingPlanes!==void 0&&(Ln.numClippingPlanes!==Tn.numPlanes||Ln.numIntersection!==Tn.numIntersection)||Ln.vertexAlphas!==li||Ln.vertexTangents!==mi||Ln.morphTargets!==zn||Ln.morphNormals!==di||Ln.morphColors!==Vi||Ln.toneMapping!==Xi||Ln.morphTargetsCount!==pi)&&(si=!0):(si=!0,Ln.__version=Ze.version);let tr=Ln.currentProgram;si===!0&&(tr=We(Ze,Xe,Je));let Ar=!1,Zi=!1,xr=!1;const nr=tr.getUniforms(),mr=Ln.uniforms;if(On.useProgram(tr.program)&&(Ar=!0,Zi=!0,xr=!0),Ze.id!==Oe&&(Oe=Ze.id,Zi=!0),Ar||Ne!==ke){On.buffers.depth.getReversed()&&ke.reversedDepth!==!0&&(ke._reversedDepth=!0,ke.updateProjectionMatrix()),nr.setValue(je,"projectionMatrix",ke.projectionMatrix),nr.setValue(je,"viewMatrix",ke.matrixWorldInverse);const ks=nr.map.cameraPosition;ks!==void 0&&ks.setValue(je,In.setFromMatrixPosition(ke.matrixWorld)),ri.logarithmicDepthBuffer&&nr.setValue(je,"logDepthBufFC",2/(Math.log(ke.far+1)/Math.LN2)),(Ze.isMeshPhongMaterial||Ze.isMeshToonMaterial||Ze.isMeshLambertMaterial||Ze.isMeshBasicMaterial||Ze.isMeshStandardMaterial||Ze.isShaderMaterial)&&nr.setValue(je,"isOrthographic",ke.isOrthographicCamera===!0),Ne!==ke&&(Ne=ke,Zi=!0,xr=!0)}if(Ln.needsLights&&(wi.state.directionalShadowMap.length>0&&nr.setValue(je,"directionalShadowMap",wi.state.directionalShadowMap,Ke),wi.state.spotShadowMap.length>0&&nr.setValue(je,"spotShadowMap",wi.state.spotShadowMap,Ke),wi.state.pointShadowMap.length>0&&nr.setValue(je,"pointShadowMap",wi.state.pointShadowMap,Ke)),Je.isSkinnedMesh){nr.setOptional(je,Je,"bindMatrix"),nr.setOptional(je,Je,"bindMatrixInverse");const Cr=Je.skeleton;Cr&&(Cr.boneTexture===null&&Cr.computeBoneTexture(),nr.setValue(je,"boneTexture",Cr.boneTexture,Ke))}Je.isBatchedMesh&&(nr.setOptional(je,Je,"batchingTexture"),nr.setValue(je,"batchingTexture",Je._matricesTexture,Ke),nr.setOptional(je,Je,"batchingIdTexture"),nr.setValue(je,"batchingIdTexture",Je._indirectTexture,Ke),nr.setOptional(je,Je,"batchingColorTexture"),Je._colorsTexture!==null&&nr.setValue(je,"batchingColorTexture",Je._colorsTexture,Ke));const Mr=Qe.morphAttributes;if((Mr.position!==void 0||Mr.normal!==void 0||Mr.color!==void 0)&&ei.update(Je,Qe,tr),(Zi||Ln.receiveShadow!==Je.receiveShadow)&&(Ln.receiveShadow=Je.receiveShadow,nr.setValue(je,"receiveShadow",Je.receiveShadow)),(Ze.isMeshStandardMaterial||Ze.isMeshLambertMaterial||Ze.isMeshPhongMaterial)&&Ze.envMap===null&&Xe.environment!==null&&(mr.envMapIntensity.value=Xe.environmentIntensity),mr.dfgLUT!==void 0&&(mr.dfgLUT.value=getDFGLUT()),Zi&&(nr.setValue(je,"toneMappingExposure",he.toneMappingExposure),Ln.needsLights&&jn(mr,xr),En&&Ze.fog===!0&&fi.refreshFogUniforms(mr,En),fi.refreshMaterialUniforms(mr,Ze,ze,De,fe.state.transmissionRenderTarget[ke.id]),WebGLUniforms.upload(je,Nt(Ln),mr,Ke)),Ze.isShaderMaterial&&Ze.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(je,Nt(Ln),mr,Ke),Ze.uniformsNeedUpdate=!1),Ze.isSpriteMaterial&&nr.setValue(je,"center",Je.center),nr.setValue(je,"modelViewMatrix",Je.modelViewMatrix),nr.setValue(je,"normalMatrix",Je.normalMatrix),nr.setValue(je,"modelMatrix",Je.matrixWorld),Ze.isShaderMaterial||Ze.isRawShaderMaterial){const Cr=Ze.uniformsGroups;for(let ks=0,ia=Cr.length;ks<ia;ks++){const Ya=Cr[ks];Kn.update(Ya,tr),Kn.bind(Ya,tr)}}return tr}function jn(ke,Xe){ke.ambientLightColor.needsUpdate=Xe,ke.lightProbe.needsUpdate=Xe,ke.directionalLights.needsUpdate=Xe,ke.directionalLightShadows.needsUpdate=Xe,ke.pointLights.needsUpdate=Xe,ke.pointLightShadows.needsUpdate=Xe,ke.spotLights.needsUpdate=Xe,ke.spotLightShadows.needsUpdate=Xe,ke.rectAreaLights.needsUpdate=Xe,ke.hemisphereLights.needsUpdate=Xe}function Dn(ke){return ke.isMeshLambertMaterial||ke.isMeshToonMaterial||ke.isMeshPhongMaterial||ke.isMeshStandardMaterial||ke.isShadowMaterial||ke.isShaderMaterial&&ke.lights===!0}this.getActiveCubeFace=function(){return ve},this.getActiveMipmapLevel=function(){return Re},this.getRenderTarget=function(){return Ee},this.setRenderTargetTextures=function(ke,Xe,Qe){const Ze=Pe.get(ke);Ze.__autoAllocateDepthBuffer=ke.resolveDepthBuffer===!1,Ze.__autoAllocateDepthBuffer===!1&&(Ze.__useRenderToTexture=!1),Pe.get(ke.texture).__webglTexture=Xe,Pe.get(ke.depthTexture).__webglTexture=Ze.__autoAllocateDepthBuffer?void 0:Qe,Ze.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ke,Xe){const Qe=Pe.get(ke);Qe.__webglFramebuffer=Xe,Qe.__useDefaultFramebuffer=Xe===void 0};const Yn=je.createFramebuffer();this.setRenderTarget=function(ke,Xe=0,Qe=0){Ee=ke,ve=Xe,Re=Qe;let Ze=null,Je=!1,En=!1;if(ke){const kn=Pe.get(ke);if(kn.__useDefaultFramebuffer!==void 0){On.bindFramebuffer(je.FRAMEBUFFER,kn.__webglFramebuffer),ye.copy(ke.viewport),Ae.copy(ke.scissor),_e=ke.scissorTest,On.viewport(ye),On.scissor(Ae),On.setScissorTest(_e),Oe=-1;return}else if(kn.__webglFramebuffer===void 0)Ke.setupRenderTarget(ke);else if(kn.__hasExternalTextures)Ke.rebindTextures(ke,Pe.get(ke.texture).__webglTexture,Pe.get(ke.depthTexture).__webglTexture);else if(ke.depthBuffer){const li=ke.depthTexture;if(kn.__boundDepthTexture!==li){if(li!==null&&Pe.has(li)&&(ke.width!==li.image.width||ke.height!==li.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Ke.setupDepthRenderbuffer(ke)}}const Nn=ke.texture;(Nn.isData3DTexture||Nn.isDataArrayTexture||Nn.isCompressedArrayTexture)&&(En=!0);const ai=Pe.get(ke).__webglFramebuffer;ke.isWebGLCubeRenderTarget?(Array.isArray(ai[Xe])?Ze=ai[Xe][Qe]:Ze=ai[Xe],Je=!0):ke.samples>0&&Ke.useMultisampledRTT(ke)===!1?Ze=Pe.get(ke).__webglMultisampledFramebuffer:Array.isArray(ai)?Ze=ai[Qe]:Ze=ai,ye.copy(ke.viewport),Ae.copy(ke.scissor),_e=ke.scissorTest}else ye.copy(Ge).multiplyScalar(ze).floor(),Ae.copy(lt).multiplyScalar(ze).floor(),_e=Mt;if(Qe!==0&&(Ze=Yn),On.bindFramebuffer(je.FRAMEBUFFER,Ze)&&On.drawBuffers(ke,Ze),On.viewport(ye),On.scissor(Ae),On.setScissorTest(_e),Je){const kn=Pe.get(ke.texture);je.framebufferTexture2D(je.FRAMEBUFFER,je.COLOR_ATTACHMENT0,je.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,kn.__webglTexture,Qe)}else if(En){const kn=Xe;for(let Nn=0;Nn<ke.textures.length;Nn++){const ai=Pe.get(ke.textures[Nn]);je.framebufferTextureLayer(je.FRAMEBUFFER,je.COLOR_ATTACHMENT0+Nn,ai.__webglTexture,Qe,kn)}}else if(ke!==null&&Qe!==0){const kn=Pe.get(ke.texture);je.framebufferTexture2D(je.FRAMEBUFFER,je.COLOR_ATTACHMENT0,je.TEXTURE_2D,kn.__webglTexture,Qe)}Oe=-1},this.readRenderTargetPixels=function(ke,Xe,Qe,Ze,Je,En,Pn,kn=0){if(!(ke&&ke.isWebGLRenderTarget)){error("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Nn=Pe.get(ke).__webglFramebuffer;if(ke.isWebGLCubeRenderTarget&&Pn!==void 0&&(Nn=Nn[Pn]),Nn){On.bindFramebuffer(je.FRAMEBUFFER,Nn);try{const ai=ke.textures[kn],li=ai.format,mi=ai.type;if(ke.textures.length>1&&je.readBuffer(je.COLOR_ATTACHMENT0+kn),!ri.textureFormatReadable(li)){error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ri.textureTypeReadable(mi)){error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Xe>=0&&Xe<=ke.width-Ze&&Qe>=0&&Qe<=ke.height-Je&&je.readPixels(Xe,Qe,Ze,Je,kt.convert(li),kt.convert(mi),En)}finally{const ai=Ee!==null?Pe.get(Ee).__webglFramebuffer:null;On.bindFramebuffer(je.FRAMEBUFFER,ai)}}},this.readRenderTargetPixelsAsync=async function(ke,Xe,Qe,Ze,Je,En,Pn,kn=0){if(!(ke&&ke.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Nn=Pe.get(ke).__webglFramebuffer;if(ke.isWebGLCubeRenderTarget&&Pn!==void 0&&(Nn=Nn[Pn]),Nn)if(Xe>=0&&Xe<=ke.width-Ze&&Qe>=0&&Qe<=ke.height-Je){On.bindFramebuffer(je.FRAMEBUFFER,Nn);const ai=ke.textures[kn],li=ai.format,mi=ai.type;if(ke.textures.length>1&&je.readBuffer(je.COLOR_ATTACHMENT0+kn),!ri.textureFormatReadable(li))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ri.textureTypeReadable(mi))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const zn=je.createBuffer();je.bindBuffer(je.PIXEL_PACK_BUFFER,zn),je.bufferData(je.PIXEL_PACK_BUFFER,En.byteLength,je.STREAM_READ),je.readPixels(Xe,Qe,Ze,Je,kt.convert(li),kt.convert(mi),0);const di=Ee!==null?Pe.get(Ee).__webglFramebuffer:null;On.bindFramebuffer(je.FRAMEBUFFER,di);const Vi=je.fenceSync(je.SYNC_GPU_COMMANDS_COMPLETE,0);return je.flush(),await probeAsync(je,Vi,4),je.bindBuffer(je.PIXEL_PACK_BUFFER,zn),je.getBufferSubData(je.PIXEL_PACK_BUFFER,0,En),je.deleteBuffer(zn),je.deleteSync(Vi),En}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(ke,Xe=null,Qe=0){const Ze=Math.pow(2,-Qe),Je=Math.floor(ke.image.width*Ze),En=Math.floor(ke.image.height*Ze),Pn=Xe!==null?Xe.x:0,kn=Xe!==null?Xe.y:0;Ke.setTexture2D(ke,0),je.copyTexSubImage2D(je.TEXTURE_2D,Qe,0,0,Pn,kn,Je,En),On.unbindTexture()};const $n=je.createFramebuffer(),Xn=je.createFramebuffer();this.copyTextureToTexture=function(ke,Xe,Qe=null,Ze=null,Je=0,En=0){let Pn,kn,Nn,ai,li,mi,zn,di,Vi;const Xi=ke.isCompressedTexture?ke.mipmaps[En]:ke.image;if(Qe!==null)Pn=Qe.max.x-Qe.min.x,kn=Qe.max.y-Qe.min.y,Nn=Qe.isBox3?Qe.max.z-Qe.min.z:1,ai=Qe.min.x,li=Qe.min.y,mi=Qe.isBox3?Qe.min.z:0;else{const mr=Math.pow(2,-Je);Pn=Math.floor(Xi.width*mr),kn=Math.floor(Xi.height*mr),ke.isDataArrayTexture?Nn=Xi.depth:ke.isData3DTexture?Nn=Math.floor(Xi.depth*mr):Nn=1,ai=0,li=0,mi=0}Ze!==null?(zn=Ze.x,di=Ze.y,Vi=Ze.z):(zn=0,di=0,Vi=0);const ui=kt.convert(Xe.format),pi=kt.convert(Xe.type);let Ln;Xe.isData3DTexture?(Ke.setTexture3D(Xe,0),Ln=je.TEXTURE_3D):Xe.isDataArrayTexture||Xe.isCompressedArrayTexture?(Ke.setTexture2DArray(Xe,0),Ln=je.TEXTURE_2D_ARRAY):(Ke.setTexture2D(Xe,0),Ln=je.TEXTURE_2D),je.pixelStorei(je.UNPACK_FLIP_Y_WEBGL,Xe.flipY),je.pixelStorei(je.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Xe.premultiplyAlpha),je.pixelStorei(je.UNPACK_ALIGNMENT,Xe.unpackAlignment);const wi=je.getParameter(je.UNPACK_ROW_LENGTH),si=je.getParameter(je.UNPACK_IMAGE_HEIGHT),tr=je.getParameter(je.UNPACK_SKIP_PIXELS),Ar=je.getParameter(je.UNPACK_SKIP_ROWS),Zi=je.getParameter(je.UNPACK_SKIP_IMAGES);je.pixelStorei(je.UNPACK_ROW_LENGTH,Xi.width),je.pixelStorei(je.UNPACK_IMAGE_HEIGHT,Xi.height),je.pixelStorei(je.UNPACK_SKIP_PIXELS,ai),je.pixelStorei(je.UNPACK_SKIP_ROWS,li),je.pixelStorei(je.UNPACK_SKIP_IMAGES,mi);const xr=ke.isDataArrayTexture||ke.isData3DTexture,nr=Xe.isDataArrayTexture||Xe.isData3DTexture;if(ke.isDepthTexture){const mr=Pe.get(ke),Mr=Pe.get(Xe),Cr=Pe.get(mr.__renderTarget),ks=Pe.get(Mr.__renderTarget);On.bindFramebuffer(je.READ_FRAMEBUFFER,Cr.__webglFramebuffer),On.bindFramebuffer(je.DRAW_FRAMEBUFFER,ks.__webglFramebuffer);for(let ia=0;ia<Nn;ia++)xr&&(je.framebufferTextureLayer(je.READ_FRAMEBUFFER,je.COLOR_ATTACHMENT0,Pe.get(ke).__webglTexture,Je,mi+ia),je.framebufferTextureLayer(je.DRAW_FRAMEBUFFER,je.COLOR_ATTACHMENT0,Pe.get(Xe).__webglTexture,En,Vi+ia)),je.blitFramebuffer(ai,li,Pn,kn,zn,di,Pn,kn,je.DEPTH_BUFFER_BIT,je.NEAREST);On.bindFramebuffer(je.READ_FRAMEBUFFER,null),On.bindFramebuffer(je.DRAW_FRAMEBUFFER,null)}else if(Je!==0||ke.isRenderTargetTexture||Pe.has(ke)){const mr=Pe.get(ke),Mr=Pe.get(Xe);On.bindFramebuffer(je.READ_FRAMEBUFFER,$n),On.bindFramebuffer(je.DRAW_FRAMEBUFFER,Xn);for(let Cr=0;Cr<Nn;Cr++)xr?je.framebufferTextureLayer(je.READ_FRAMEBUFFER,je.COLOR_ATTACHMENT0,mr.__webglTexture,Je,mi+Cr):je.framebufferTexture2D(je.READ_FRAMEBUFFER,je.COLOR_ATTACHMENT0,je.TEXTURE_2D,mr.__webglTexture,Je),nr?je.framebufferTextureLayer(je.DRAW_FRAMEBUFFER,je.COLOR_ATTACHMENT0,Mr.__webglTexture,En,Vi+Cr):je.framebufferTexture2D(je.DRAW_FRAMEBUFFER,je.COLOR_ATTACHMENT0,je.TEXTURE_2D,Mr.__webglTexture,En),Je!==0?je.blitFramebuffer(ai,li,Pn,kn,zn,di,Pn,kn,je.COLOR_BUFFER_BIT,je.NEAREST):nr?je.copyTexSubImage3D(Ln,En,zn,di,Vi+Cr,ai,li,Pn,kn):je.copyTexSubImage2D(Ln,En,zn,di,ai,li,Pn,kn);On.bindFramebuffer(je.READ_FRAMEBUFFER,null),On.bindFramebuffer(je.DRAW_FRAMEBUFFER,null)}else nr?ke.isDataTexture||ke.isData3DTexture?je.texSubImage3D(Ln,En,zn,di,Vi,Pn,kn,Nn,ui,pi,Xi.data):Xe.isCompressedArrayTexture?je.compressedTexSubImage3D(Ln,En,zn,di,Vi,Pn,kn,Nn,ui,Xi.data):je.texSubImage3D(Ln,En,zn,di,Vi,Pn,kn,Nn,ui,pi,Xi):ke.isDataTexture?je.texSubImage2D(je.TEXTURE_2D,En,zn,di,Pn,kn,ui,pi,Xi.data):ke.isCompressedTexture?je.compressedTexSubImage2D(je.TEXTURE_2D,En,zn,di,Xi.width,Xi.height,ui,Xi.data):je.texSubImage2D(je.TEXTURE_2D,En,zn,di,Pn,kn,ui,pi,Xi);je.pixelStorei(je.UNPACK_ROW_LENGTH,wi),je.pixelStorei(je.UNPACK_IMAGE_HEIGHT,si),je.pixelStorei(je.UNPACK_SKIP_PIXELS,tr),je.pixelStorei(je.UNPACK_SKIP_ROWS,Ar),je.pixelStorei(je.UNPACK_SKIP_IMAGES,Zi),En===0&&Xe.generateMipmaps&&je.generateMipmap(Ln),On.unbindTexture()},this.initRenderTarget=function(ke){Pe.get(ke).__webglFramebuffer===void 0&&Ke.setupRenderTarget(ke)},this.initTexture=function(ke){ke.isCubeTexture?Ke.setTextureCube(ke,0):ke.isData3DTexture?Ke.setTexture3D(ke,0):ke.isDataArrayTexture||ke.isCompressedArrayTexture?Ke.setTexture2DArray(ke,0):Ke.setTexture2D(ke,0),On.unbindTexture()},this.resetState=function(){ve=0,Re=0,Ee=null,On.reset(),Hn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n;const s=this.getContext();s.drawingBufferColorSpace=ColorManagement._getDrawingBufferColorSpace(n),s.unpackColorSpace=ColorManagement._getUnpackColorSpace()}}const THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AgXToneMapping,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,AttachedBindMode,Audio:Audio$1,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,BatchedMesh,BezierInterpolant,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleGeometry,ClampToEdgeWrapping,Clock,Color,ColorKeyframeTrack,ColorManagement,Compatibility,CompressedArrayTexture,CompressedCubeTexture,CompressedTexture,CompressedTextureLoader,ConeGeometry,ConstantAlphaFactor,ConstantColorFactor,Controls,CubeCamera,CubeDepthTexture,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DetachedBindMode,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExternalTexture,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,FrustumArray,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateBezier,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InterpolationSamplingMode,InterpolationSamplingType,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,LinearTransfer,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,MOUSE,Material,MaterialBlending,MaterialLoader,MathUtils,Matrix2,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeutralToneMapping,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoNormalPacking,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NormalGAPacking,NormalRGPacking,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronGeometry,OneFactor,OneMinusConstantAlphaFactor,OneMinusConstantColorFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,R11_EAC_Format,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RG11_EAC_Format,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDepthPacking,RGBFormat,RGBIntegerFormat,RGB_BPTC_SIGNED_Format,RGB_BPTC_UNSIGNED_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGDepthPacking,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RenderTarget,RenderTarget3D,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingGeometry,SIGNED_R11_EAC_Format,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SIGNED_RG11_EAC_Format,SRGBColorSpace,SRGBTransfer,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronGeometry,Texture,TextureLoader,TextureUtils,Timer,TimestampQuery,TorusGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeGeometry,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt101111Type,UnsignedInt248Type,UnsignedInt5999Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoFrameTexture,VideoTexture,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WebXRController,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,createCanvasElement,error,getConsoleFunction,log,setConsoleFunction,warn,warnOnce},Symbol.toStringTag,{value:"Module"}));var withSelector={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var u=requireReact();function n(Y,q){return Y===q&&(Y!==0||1/Y===1/q)||Y!==Y&&q!==q}var s=typeof Object.is=="function"?Object.is:n,f=u.useState,d=u.useEffect,y=u.useLayoutEffect,_=u.useDebugValue;function A(Y,q){var K=q(),Q=f({inst:{value:K,getSnapshot:q}}),ne=Q[0].inst,te=Q[1];return y(function(){ne.value=K,ne.getSnapshot=q,R(ne)&&te({inst:ne})},[Y,K,q]),d(function(){return R(ne)&&te({inst:ne}),Y(function(){R(ne)&&te({inst:ne})})},[Y]),_(K),K}function R(Y){var q=Y.getSnapshot;Y=Y.value;try{var K=q();return!s(Y,K)}catch{return!0}}function I(Y,q){return q()}var G=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?I:A;return useSyncExternalStoreShim_production.useSyncExternalStore=u.useSyncExternalStore!==void 0?u.useSyncExternalStore:G,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var u=requireReact(),n=requireShim();function s(I,G){return I===G&&(I!==0||1/I===1/G)||I!==I&&G!==G}var f=typeof Object.is=="function"?Object.is:s,d=n.useSyncExternalStore,y=u.useRef,_=u.useEffect,A=u.useMemo,R=u.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(I,G,Y,q,K){var Q=y(null);if(Q.current===null){var ne={hasValue:!1,value:null};Q.current=ne}else ne=Q.current;Q=A(function(){function J(pe){if(!ie){if(ie=!0,re=pe,pe=q(pe),K!==void 0&&ne.hasValue){var de=ne.value;if(K(de,pe))return le=de}return le=pe}if(de=le,f(re,pe))return de;var se=q(pe);return K!==void 0&&K(de,se)?(re=pe,de):(re=pe,le=se)}var ie=!1,re,le,fe=Y===void 0?null:Y;return[function(){return J(G())},fe===null?void 0:function(){return J(fe())}]},[G,Y,q,K]);var te=d(I,Q[0],Q[1]);return _(function(){ne.hasValue=!0,ne.value=te},[te]),R(te),te},withSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireWithSelector_production()),withSelector.exports}var withSelectorExports=requireWithSelector();const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),createStoreImpl=u=>{let n;const s=new Set,f=(I,G)=>{const Y=typeof I=="function"?I(n):I;if(!Object.is(Y,n)){const q=n;n=G??(typeof Y!="object"||Y===null)?Y:Object.assign({},n,Y),s.forEach(K=>K(n,q))}},d=()=>n,A={setState:f,getState:d,getInitialState:()=>R,subscribe:I=>(s.add(I),()=>s.delete(I))},R=n=u(f,d,A);return A},createStore$1=(u=>u?createStoreImpl(u):createStoreImpl),{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity=u=>u;function useStoreWithEqualityFn(u,n=identity,s){const f=useSyncExternalStoreWithSelector(u.subscribe,u.getState,u.getInitialState,n,s);return React.useDebugValue(f),f}const createWithEqualityFnImpl=(u,n)=>{const s=createStore$1(u),f=(d,y=n)=>useStoreWithEqualityFn(s,d,y);return Object.assign(f,s),f},createWithEqualityFn=((u,n)=>u?createWithEqualityFnImpl(u,n):createWithEqualityFnImpl),isPromise=u=>typeof u=="object"&&typeof u.then=="function",globalCache=[];function shallowEqualArrays(u,n,s=(f,d)=>f===d){if(u===n)return!0;if(!u||!n)return!1;const f=u.length;if(n.length!==f)return!1;for(let d=0;d<f;d++)if(!s(u[d],n[d]))return!1;return!0}function query(u,n=null,s=!1,f={}){n===null&&(n=[u]);for(const y of globalCache)if(shallowEqualArrays(n,y.keys,y.equal)){if(s)return;if(Object.prototype.hasOwnProperty.call(y,"error"))throw y.error;if(Object.prototype.hasOwnProperty.call(y,"response"))return f.lifespan&&f.lifespan>0&&(y.timeout&&clearTimeout(y.timeout),y.timeout=setTimeout(y.remove,f.lifespan)),y.response;if(!s)throw y.promise}const d={keys:n,equal:f.equal,remove:()=>{const y=globalCache.indexOf(d);y!==-1&&globalCache.splice(y,1)},promise:(isPromise(u)?u:u(...n)).then(y=>{d.response=y,f.lifespan&&f.lifespan>0&&(d.timeout=setTimeout(d.remove,f.lifespan))}).catch(y=>d.error=y)};if(globalCache.push(d),!s)throw d.promise}const suspend=(u,n,s)=>query(u,n,!1,s),preload=(u,n,s)=>void query(u,n,!0,s),clear=u=>{if(u===void 0||u.length===0)globalCache.splice(0,globalCache.length);else{const n=globalCache.find(s=>shallowEqualArrays(u,s.keys,s.equal));n&&n.remove()}};var schedulerExports=requireScheduler();const Tb=getDefaultExportFromCjs(schedulerExports);function i$2(u,n,s){if(!u)return;if(s(u)===!0)return u;let f=n?u.return:u.child;for(;f;){const d=i$2(f,n,s);if(d)return d;f=n?null:f.sibling}}function l(u){try{return Object.defineProperties(u,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return u}}const a=l(reactExports.createContext(null));class m extends reactExports.Component{render(){return reactExports.createElement(a.Provider,{value:this._reactInternals},this.props.children)}}function c(){const u=reactExports.useContext(a);if(u===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=reactExports.useId();return reactExports.useMemo(()=>{for(const s of[u,u==null?void 0:u.alternate]){if(!s)continue;const f=i$2(s,!1,d=>{let y=d.memoizedState;for(;y;){if(y.memoizedState===n)return!0;y=y.next}});if(f)return f}},[u,n])}const p=Symbol.for("react.context"),b=u=>u!==null&&typeof u=="object"&&"$$typeof"in u&&u.$$typeof===p;function h$2(){const u=c(),[n]=reactExports.useState(()=>new Map);n.clear();let s=u;for(;s;){const f=s.type;b(f)&&f!==a&&!n.has(f)&&n.set(f,reactExports.use(l(f))),s=s.return}return n}function x$1(){const u=h$2();return reactExports.useMemo(()=>Array.from(u.keys()).reduce((n,s)=>f=>reactExports.createElement(n,null,reactExports.createElement(s.Provider,{...f,value:u.get(s)})),n=>reactExports.createElement(m,{...n})),[u])}function findInitialRoot(u){let n=u.root;for(;n.getState().previousRoot;)n=n.getState().previousRoot;return n}const isOrthographicCamera=u=>u&&u.isOrthographicCamera,isRef$1=u=>u&&u.hasOwnProperty("current"),isColorRepresentation=u=>u!=null&&(typeof u=="string"||typeof u=="number"||u.isColor),useIsomorphicLayoutEffect=((u,n)=>typeof window<"u"&&(((u=window.document)==null?void 0:u.createElement)||((n=window.navigator)==null?void 0:n.product)==="ReactNative"))()?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(u){const n=reactExports.useRef(u);return useIsomorphicLayoutEffect(()=>void(n.current=u),[u]),n}function useBridge(){const u=c(),n=x$1();return reactExports.useMemo(()=>({children:s})=>{const d=!!i$2(u,!0,y=>y.type===reactExports.StrictMode)?reactExports.StrictMode:reactExports.Fragment;return jsxRuntimeExports.jsx(d,{children:jsxRuntimeExports.jsx(n,{children:s})})},[u,n])}function Block({set:u}){return useIsomorphicLayoutEffect(()=>(u(new Promise(()=>null)),()=>u(!1)),[u]),null}const ErrorBoundary=(u=>(u=class extends reactExports.Component{constructor(...s){super(...s),this.state={error:!1}}componentDidCatch(s){this.props.set(s)}render(){return this.state.error?null:this.props.children}},u.getDerivedStateFromError=()=>({error:!0}),u))();function calculateDpr(u){var n;const s=typeof window<"u"?(n=window.devicePixelRatio)!=null?n:2:1;return Array.isArray(u)?Math.min(Math.max(u[0],s),u[1]):u}function getRootState(u){var n;return(n=u.__r3f)==null?void 0:n.root.getState()}const is={obj:u=>u===Object(u)&&!is.arr(u)&&typeof u!="function",fun:u=>typeof u=="function",str:u=>typeof u=="string",num:u=>typeof u=="number",boo:u=>typeof u=="boolean",und:u=>u===void 0,nul:u=>u===null,arr:u=>Array.isArray(u),equ(u,n,{arrays:s="shallow",objects:f="reference",strict:d=!0}={}){if(typeof u!=typeof n||!!u!=!!n)return!1;if(is.str(u)||is.num(u)||is.boo(u))return u===n;const y=is.obj(u);if(y&&f==="reference")return u===n;const _=is.arr(u);if(_&&s==="reference")return u===n;if((_||y)&&u===n)return!0;let A;for(A in u)if(!(A in n))return!1;if(y&&s==="shallow"&&f==="shallow"){for(A in d?n:u)if(!is.equ(u[A],n[A],{strict:d,objects:"reference"}))return!1}else for(A in d?n:u)if(u[A]!==n[A])return!1;if(is.und(A)){if(_&&u.length===0&&n.length===0||y&&Object.keys(u).length===0&&Object.keys(n).length===0)return!0;if(u!==n)return!1}return!0}};function buildGraph(u){const n={nodes:{},materials:{},meshes:{}};return u&&u.traverse(s=>{s.name&&(n.nodes[s.name]=s),s.material&&!n.materials[s.material.name]&&(n.materials[s.material.name]=s.material),s.isMesh&&!n.meshes[s.name]&&(n.meshes[s.name]=s)}),n}function dispose(u){u.type!=="Scene"&&(u.dispose==null||u.dispose());for(const n in u){const s=u[n];(s==null?void 0:s.type)!=="Scene"&&(s==null||s.dispose==null||s.dispose())}}const REACT_INTERNAL_PROPS=["children","key","ref"];function getInstanceProps(u){const n={};for(const s in u)REACT_INTERNAL_PROPS.includes(s)||(n[s]=u[s]);return n}function prepare(u,n,s,f){const d=u;let y=d==null?void 0:d.__r3f;return y||(y={root:n,type:s,parent:null,children:[],props:getInstanceProps(f),object:d,eventCount:0,handlers:{},isHidden:!1},d&&(d.__r3f=y)),y}function resolve(u,n){if(!n.includes("-"))return{root:u,key:n,target:u[n]};if(n in u)return{root:u,key:n,target:u[n]};let s=u;const f=n.split("-");for(const d of f){if(typeof s!="object"||s===null){if(s!==void 0){const y=f.slice(f.indexOf(d)).join("-");return{root:s,key:y,target:void 0}}return{root:u,key:n,target:void 0}}n=d,u=s,s=s[n]}return{root:u,key:n,target:s}}const INDEX_REGEX=/-\d+$/;function attach(u,n){if(is.str(n.props.attach)){if(INDEX_REGEX.test(n.props.attach)){const d=n.props.attach.replace(INDEX_REGEX,""),{root:y,key:_}=resolve(u.object,d);Array.isArray(y[_])||(y[_]=[])}const{root:s,key:f}=resolve(u.object,n.props.attach);n.previousAttach=s[f],s[f]=n.object}else is.fun(n.props.attach)&&(n.previousAttach=n.props.attach(u.object,n.object))}function detach(u,n){if(is.str(n.props.attach)){const{root:s,key:f}=resolve(u.object,n.props.attach),d=n.previousAttach;d===void 0?delete s[f]:s[f]=d}else n.previousAttach==null||n.previousAttach(u.object,n.object);delete n.previousAttach}const RESERVED_PROPS=[...REACT_INTERNAL_PROPS,"args","dispose","attach","object","onUpdate","dispose"],MEMOIZED_PROTOTYPES=new Map;function getMemoizedPrototype(u){let n=MEMOIZED_PROTOTYPES.get(u.constructor);try{n||(n=new u.constructor,MEMOIZED_PROTOTYPES.set(u.constructor,n))}catch{}return n}function diffProps(u,n){const s={};for(const f in n)if(!RESERVED_PROPS.includes(f)&&!is.equ(n[f],u.props[f])){s[f]=n[f];for(const d in n)d.startsWith(`${f}-`)&&(s[d]=n[d])}for(const f in u.props){if(RESERVED_PROPS.includes(f)||n.hasOwnProperty(f))continue;const{root:d,key:y}=resolve(u.object,f);if(d.constructor&&d.constructor.length===0){const _=getMemoizedPrototype(d);is.und(_)||(s[y]=_[y])}else s[y]=0}return s}const colorMaps=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],EVENT_REGEX=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function applyProps(u,n){var s;const f=u.__r3f,d=f&&findInitialRoot(f).getState(),y=f==null?void 0:f.eventCount;for(const A in n){let R=n[A];if(RESERVED_PROPS.includes(A))continue;if(f&&EVENT_REGEX.test(A)){typeof R=="function"?f.handlers[A]=R:delete f.handlers[A],f.eventCount=Object.keys(f.handlers).length;continue}if(R===void 0)continue;let{root:I,key:G,target:Y}=resolve(u,A);if(Y===void 0&&(typeof I!="object"||I===null))throw Error(`R3F: Cannot set "${A}". Ensure it is an object before setting "${G}".`);if(Y instanceof Layers&&R instanceof Layers)Y.mask=R.mask;else if(Y instanceof Color&&isColorRepresentation(R))Y.set(R);else if(Y!==null&&typeof Y=="object"&&typeof Y.set=="function"&&typeof Y.copy=="function"&&R!=null&&R.constructor&&Y.constructor===R.constructor)Y.copy(R);else if(Y!==null&&typeof Y=="object"&&typeof Y.set=="function"&&Array.isArray(R))typeof Y.fromArray=="function"?Y.fromArray(R):Y.set(...R);else if(Y!==null&&typeof Y=="object"&&typeof Y.set=="function"&&typeof R=="number")typeof Y.setScalar=="function"?Y.setScalar(R):Y.set(R);else{var _;I[G]=R,d&&!d.linear&&colorMaps.includes(G)&&(_=I[G])!=null&&_.isTexture&&I[G].format===RGBAFormat&&I[G].type===UnsignedByteType&&(I[G].colorSpace=SRGBColorSpace)}}if(f!=null&&f.parent&&d!=null&&d.internal&&(s=f.object)!=null&&s.isObject3D&&y!==f.eventCount){const A=f.object,R=d.internal.interaction.indexOf(A);R>-1&&d.internal.interaction.splice(R,1),f.eventCount&&A.raycast!==null&&d.internal.interaction.push(A)}return f&&f.props.attach===void 0&&(f.object.isBufferGeometry?f.props.attach="geometry":f.object.isMaterial&&(f.props.attach="material")),f&&invalidateInstance(f),u}function invalidateInstance(u){var n;if(!u.parent)return;u.props.onUpdate==null||u.props.onUpdate(u.object);const s=(n=u.root)==null||n.getState==null?void 0:n.getState();s&&s.internal.frames===0&&s.invalidate()}function updateCamera(u,n){u.manual||(isOrthographicCamera(u)?(u.left=n.width/-2,u.right=n.width/2,u.top=n.height/2,u.bottom=n.height/-2):u.aspect=n.width/n.height,u.updateProjectionMatrix())}const isObject3D=u=>u==null?void 0:u.isObject3D;function makeId(u){return(u.eventObject||u.object).uuid+"/"+u.index+u.instanceId}function releaseInternalPointerCapture(u,n,s,f){const d=s.get(n);d&&(s.delete(n),s.size===0&&(u.delete(f),d.target.releasePointerCapture(f)))}function removeInteractivity(u,n){const{internal:s}=u.getState();s.interaction=s.interaction.filter(f=>f!==n),s.initialHits=s.initialHits.filter(f=>f!==n),s.hovered.forEach((f,d)=>{(f.eventObject===n||f.object===n)&&s.hovered.delete(d)}),s.capturedMap.forEach((f,d)=>{releaseInternalPointerCapture(s.capturedMap,n,f,d)})}function createEvents(u){function n(R){const{internal:I}=u.getState(),G=R.offsetX-I.initialClick[0],Y=R.offsetY-I.initialClick[1];return Math.round(Math.sqrt(G*G+Y*Y))}function s(R){return R.filter(I=>["Move","Over","Enter","Out","Leave"].some(G=>{var Y;return(Y=I.__r3f)==null?void 0:Y.handlers["onPointer"+G]}))}function f(R,I){const G=u.getState(),Y=new Set,q=[],K=I?I(G.internal.interaction):G.internal.interaction;for(let J=0;J<K.length;J++){const ie=getRootState(K[J]);ie&&(ie.raycaster.camera=void 0)}G.previousRoot||G.events.compute==null||G.events.compute(R,G);function Q(J){const ie=getRootState(J);if(!ie||!ie.events.enabled||ie.raycaster.camera===null)return[];if(ie.raycaster.camera===void 0){var re;ie.events.compute==null||ie.events.compute(R,ie,(re=ie.previousRoot)==null?void 0:re.getState()),ie.raycaster.camera===void 0&&(ie.raycaster.camera=null)}return ie.raycaster.camera?ie.raycaster.intersectObject(J,!0):[]}let ne=K.flatMap(Q).sort((J,ie)=>{const re=getRootState(J.object),le=getRootState(ie.object);return!re||!le?J.distance-ie.distance:le.events.priority-re.events.priority||J.distance-ie.distance}).filter(J=>{const ie=makeId(J);return Y.has(ie)?!1:(Y.add(ie),!0)});G.events.filter&&(ne=G.events.filter(ne,G));for(const J of ne){let ie=J.object;for(;ie;){var te;(te=ie.__r3f)!=null&&te.eventCount&&q.push({...J,eventObject:ie}),ie=ie.parent}}if("pointerId"in R&&G.internal.capturedMap.has(R.pointerId))for(let J of G.internal.capturedMap.get(R.pointerId).values())Y.has(makeId(J.intersection))||q.push(J.intersection);return q}function d(R,I,G,Y){if(R.length){const q={stopped:!1};for(const K of R){let Q=getRootState(K.object);if(Q||K.object.traverseAncestors(ne=>{const te=getRootState(ne);if(te)return Q=te,!1}),Q){const{raycaster:ne,pointer:te,camera:J,internal:ie}=Q,re=new Vector3(te.x,te.y,0).unproject(J),le=he=>{var Se,ve;return(Se=(ve=ie.capturedMap.get(he))==null?void 0:ve.has(K.eventObject))!=null?Se:!1},fe=he=>{const Se={intersection:K,target:I.target};ie.capturedMap.has(he)?ie.capturedMap.get(he).set(K.eventObject,Se):ie.capturedMap.set(he,new Map([[K.eventObject,Se]])),I.target.setPointerCapture(he)},pe=he=>{const Se=ie.capturedMap.get(he);Se&&releaseInternalPointerCapture(ie.capturedMap,K.eventObject,Se,he)};let de={};for(let he in I){let Se=I[he];typeof Se!="function"&&(de[he]=Se)}let se={...K,...de,pointer:te,intersections:R,stopped:q.stopped,delta:G,unprojectedPoint:re,ray:ne.ray,camera:J,stopPropagation(){const he="pointerId"in I&&ie.capturedMap.get(I.pointerId);if((!he||he.has(K.eventObject))&&(se.stopped=q.stopped=!0,ie.hovered.size&&Array.from(ie.hovered.values()).find(Se=>Se.eventObject===K.eventObject))){const Se=R.slice(0,R.indexOf(K));y([...Se,K])}},target:{hasPointerCapture:le,setPointerCapture:fe,releasePointerCapture:pe},currentTarget:{hasPointerCapture:le,setPointerCapture:fe,releasePointerCapture:pe},nativeEvent:I};if(Y(se),q.stopped===!0)break}}}return R}function y(R){const{internal:I}=u.getState();for(const G of I.hovered.values())if(!R.length||!R.find(Y=>Y.object===G.object&&Y.index===G.index&&Y.instanceId===G.instanceId)){const q=G.eventObject.__r3f;if(I.hovered.delete(makeId(G)),q!=null&&q.eventCount){const K=q.handlers,Q={...G,intersections:R};K.onPointerOut==null||K.onPointerOut(Q),K.onPointerLeave==null||K.onPointerLeave(Q)}}}function _(R,I){for(let G=0;G<I.length;G++){const Y=I[G].__r3f;Y==null||Y.handlers.onPointerMissed==null||Y.handlers.onPointerMissed(R)}}function A(R){switch(R){case"onPointerLeave":case"onPointerCancel":return()=>y([]);case"onLostPointerCapture":return I=>{const{internal:G}=u.getState();"pointerId"in I&&G.capturedMap.has(I.pointerId)&&requestAnimationFrame(()=>{G.capturedMap.has(I.pointerId)&&(G.capturedMap.delete(I.pointerId),y([]))})}}return function(G){const{onPointerMissed:Y,internal:q}=u.getState();q.lastEvent.current=G;const K=R==="onPointerMove",Q=R==="onClick"||R==="onContextMenu"||R==="onDoubleClick",te=f(G,K?s:void 0),J=Q?n(G):0;R==="onPointerDown"&&(q.initialClick=[G.offsetX,G.offsetY],q.initialHits=te.map(re=>re.eventObject)),Q&&!te.length&&J<=2&&(_(G,q.interaction),Y&&Y(G)),K&&y(te);function ie(re){const le=re.eventObject,fe=le.__r3f;if(!(fe!=null&&fe.eventCount))return;const pe=fe.handlers;if(K){if(pe.onPointerOver||pe.onPointerEnter||pe.onPointerOut||pe.onPointerLeave){const de=makeId(re),se=q.hovered.get(de);se?se.stopped&&re.stopPropagation():(q.hovered.set(de,re),pe.onPointerOver==null||pe.onPointerOver(re),pe.onPointerEnter==null||pe.onPointerEnter(re))}pe.onPointerMove==null||pe.onPointerMove(re)}else{const de=pe[R];de?(!Q||q.initialHits.includes(le))&&(_(G,q.interaction.filter(se=>!q.initialHits.includes(se))),de(re)):Q&&q.initialHits.includes(le)&&_(G,q.interaction.filter(se=>!q.initialHits.includes(se)))}}d(te,G,J,ie)}}return{handlePointer:A}}const isRenderer=u=>!!(u!=null&&u.render),context=reactExports.createContext(null),createStore=(u,n)=>{const s=createWithEqualityFn((A,R)=>{const I=new Vector3,G=new Vector3,Y=new Vector3;function q(J=R().camera,ie=G,re=R().size){const{width:le,height:fe,top:pe,left:de}=re,se=le/fe;ie.isVector3?Y.copy(ie):Y.set(...ie);const he=J.getWorldPosition(I).distanceTo(Y);if(isOrthographicCamera(J))return{width:le/J.zoom,height:fe/J.zoom,top:pe,left:de,factor:1,distance:he,aspect:se};{const Se=J.fov*Math.PI/180,ve=2*Math.tan(Se/2)*he,Re=ve*(le/fe);return{width:Re,height:ve,top:pe,left:de,factor:le/Re,distance:he,aspect:se}}}let K;const Q=J=>A(ie=>({performance:{...ie.performance,current:J}})),ne=new Vector2;return{set:A,get:R,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(J=1)=>u(R(),J),advance:(J,ie)=>n(J,ie,R()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:ne,mouse:ne,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const J=R();K&&clearTimeout(K),J.performance.current!==J.performance.min&&Q(J.performance.min),K=setTimeout(()=>Q(R().performance.max),J.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:q},setEvents:J=>A(ie=>({...ie,events:{...ie.events,...J}})),setSize:(J,ie,re=0,le=0)=>{const fe=R().camera,pe={width:J,height:ie,top:re,left:le};A(de=>({size:pe,viewport:{...de.viewport,...q(fe,G,pe)}}))},setDpr:J=>A(ie=>{const re=calculateDpr(J);return{viewport:{...ie.viewport,dpr:re,initialDpr:ie.viewport.initialDpr||re}}}),setFrameloop:(J="always")=>{const ie=R().clock;ie.stop(),ie.elapsedTime=0,J!=="never"&&(ie.start(),ie.elapsedTime=0),A(()=>({frameloop:J}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:reactExports.createRef(),active:!1,frames:0,priority:0,subscribe:(J,ie,re)=>{const le=R().internal;return le.priority=le.priority+(ie>0?1:0),le.subscribers.push({ref:J,priority:ie,store:re}),le.subscribers=le.subscribers.sort((fe,pe)=>fe.priority-pe.priority),()=>{const fe=R().internal;fe!=null&&fe.subscribers&&(fe.priority=fe.priority-(ie>0?1:0),fe.subscribers=fe.subscribers.filter(pe=>pe.ref!==J))}}}}}),f=s.getState();let d=f.size,y=f.viewport.dpr,_=f.camera;return s.subscribe(()=>{const{camera:A,size:R,viewport:I,gl:G,set:Y}=s.getState();if(R.width!==d.width||R.height!==d.height||I.dpr!==y){d=R,y=I.dpr,updateCamera(A,R),I.dpr>0&&G.setPixelRatio(I.dpr);const q=typeof HTMLCanvasElement<"u"&&G.domElement instanceof HTMLCanvasElement;G.setSize(R.width,R.height,q)}A!==_&&(_=A,Y(q=>({viewport:{...q.viewport,...q.viewport.getCurrentViewport(A)}})))}),s.subscribe(A=>u(A)),s};function useStore(){const u=reactExports.useContext(context);if(!u)throw new Error("R3F: Hooks can only be used within the Canvas component!");return u}function useThree(u=s=>s,n){return useStore()(u,n)}function useFrame(u,n=0){const s=useStore(),f=s.getState().internal.subscribe,d=useMutableCallback(u);return useIsomorphicLayoutEffect(()=>f(d,n,s),[n,f,s]),null}const memoizedLoaders=new WeakMap,isConstructor$1=u=>{var n;return typeof u=="function"&&(u==null||(n=u.prototype)==null?void 0:n.constructor)===u};function loadingFn(u,n){return function(s,...f){let d;return isConstructor$1(s)?(d=memoizedLoaders.get(s),d||(d=new s,memoizedLoaders.set(s,d))):d=s,u&&u(d),Promise.all(f.map(y=>new Promise((_,A)=>d.load(y,R=>{isObject3D(R==null?void 0:R.scene)&&Object.assign(R,buildGraph(R.scene)),_(R)},n,R=>A(new Error(`Could not load ${y}: ${R==null?void 0:R.message}`))))))}}function useLoader(u,n,s,f){const d=Array.isArray(n)?n:[n],y=suspend(loadingFn(s,f),[u,...d],{equal:is.equ});return Array.isArray(n)?y:y[0]}useLoader.preload=function(u,n,s){const f=Array.isArray(n)?n:[n];return preload(loadingFn(s),[u,...f])};useLoader.clear=function(u,n){const s=Array.isArray(n)?n:[n];return clear([u,...s])};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const t=1,o=8,r$1=32,e=2;var packageData={version:"9.5.0"};function Xb(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Rm={exports:{}},Og={exports:{}},_b$1;function Kb(){return _b$1||(_b$1=1,(function(u){u.exports=function(n){function s(V,z,ee,oe){return new zh(V,z,ee,oe)}function f(){}function d(V){var z="https://react.dev/errors/"+V;if(1<arguments.length){z+="?args[]="+encodeURIComponent(arguments[1]);for(var ee=2;ee<arguments.length;ee++)z+="&args[]="+encodeURIComponent(arguments[ee])}return"Minified React error #"+V+"; visit "+z+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function y(V){var z=V,ee=V;if(V.alternate)for(;z.return;)z=z.return;else{V=z;do z=V,(z.flags&4098)!==0&&(ee=z.return),V=z.return;while(V)}return z.tag===3?ee:null}function _(V){if(y(V)!==V)throw Error(d(188))}function A(V){var z=V.alternate;if(!z){if(z=y(V),z===null)throw Error(d(188));return z!==V?null:V}for(var ee=V,oe=z;;){var me=ee.return;if(me===null)break;var xe=me.alternate;if(xe===null){if(oe=me.return,oe!==null){ee=oe;continue}break}if(me.child===xe.child){for(xe=me.child;xe;){if(xe===ee)return _(me),V;if(xe===oe)return _(me),z;xe=xe.sibling}throw Error(d(188))}if(ee.return!==oe.return)ee=me,oe=xe;else{for(var Ve=!1,Ye=me.child;Ye;){if(Ye===ee){Ve=!0,ee=me,oe=xe;break}if(Ye===oe){Ve=!0,oe=me,ee=xe;break}Ye=Ye.sibling}if(!Ve){for(Ye=xe.child;Ye;){if(Ye===ee){Ve=!0,ee=xe,oe=me;break}if(Ye===oe){Ve=!0,oe=xe,ee=me;break}Ye=Ye.sibling}if(!Ve)throw Error(d(189))}}if(ee.alternate!==oe)throw Error(d(190))}if(ee.tag!==3)throw Error(d(188));return ee.stateNode.current===ee?V:z}function R(V){var z=V.tag;if(z===5||z===26||z===27||z===6)return V;for(V=V.child;V!==null;){if(z=R(V),z!==null)return z;V=V.sibling}return null}function I(V){var z=V.tag;if(z===5||z===26||z===27||z===6)return V;for(V=V.child;V!==null;){if(V.tag!==4&&(z=I(V),z!==null))return z;V=V.sibling}return null}function G(V){return V===null||typeof V!="object"?null:(V=Oo&&V[Oo]||V["@@iterator"],typeof V=="function"?V:null)}function Y(V){if(V==null)return null;if(typeof V=="function")return V.$$typeof===hl?null:V.displayName||V.name||null;if(typeof V=="string")return V;switch(V){case zl:return"Fragment";case Hl:return"Profiler";case Gl:return"StrictMode";case Ku:return"Suspense";case Fo:return"SuspenseList";case pu:return"Activity"}if(typeof V=="object")switch(V.$$typeof){case jl:return"Portal";case Aa:return V.displayName||"Context";case du:return(V._context.displayName||"Context")+".Consumer";case wc:var z=V.render;return V=V.displayName,V||(V=z.displayName||z.name||"",V=V!==""?"ForwardRef("+V+")":"ForwardRef"),V;case Zu:return z=V.displayName||null,z!==null?z:Y(V.type)||"Memo";case Fs:z=V._payload,V=V._init;try{return Y(V(z))}catch{}}return null}function q(V){return{current:V}}function K(V){0>Yl||(V.current=uh[Yl],uh[Yl]=null,Yl--)}function Q(V,z){Yl++,uh[Yl]=V.current,V.current=z}function ne(V){return V>>>=0,V===0?32:31-(hh(V)/Wd|0)|0}function te(V){var z=V&42;if(z!==0)return z;switch(V&-V){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return V&261888;case 262144:case 524288:case 1048576:case 2097152:return V&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return V&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return V}}function J(V,z,ee){var oe=V.pendingLanes;if(oe===0)return 0;var me=0,xe=V.suspendedLanes,Ve=V.pingedLanes;V=V.warmLanes;var Ye=oe&134217727;return Ye!==0?(oe=Ye&~xe,oe!==0?me=te(oe):(Ve&=Ye,Ve!==0?me=te(Ve):ee||(ee=Ye&~V,ee!==0&&(me=te(ee))))):(Ye=oe&~xe,Ye!==0?me=te(Ye):Ve!==0?me=te(Ve):ee||(ee=oe&~V,ee!==0&&(me=te(ee)))),me===0?0:z!==0&&z!==me&&(z&xe)===0&&(xe=me&-me,ee=z&-z,xe>=ee||xe===32&&(ee&4194048)!==0)?z:me}function ie(V,z){return(V.pendingLanes&~(V.suspendedLanes&~V.pingedLanes)&z)===0}function re(V,z){switch(V){case 1:case 2:case 4:case 8:case 64:return z+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return z+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function le(){var V=Vc;return Vc<<=1,(Vc&62914560)===0&&(Vc=4194304),V}function fe(V){for(var z=[],ee=0;31>ee;ee++)z.push(V);return z}function pe(V,z){V.pendingLanes|=z,z!==268435456&&(V.suspendedLanes=0,V.pingedLanes=0,V.warmLanes=0)}function de(V,z,ee,oe,me,xe){var Ve=V.pendingLanes;V.pendingLanes=ee,V.suspendedLanes=0,V.pingedLanes=0,V.warmLanes=0,V.expiredLanes&=ee,V.entangledLanes&=ee,V.errorRecoveryDisabledLanes&=ee,V.shellSuspendCounter=0;var Ye=V.entanglements,gn=V.expirationTimes,Un=V.hiddenUpdates;for(ee=Ve&~ee;0<ee;){var ti=31-Zs(ee),Wn=1<<ti;Ye[ti]=0,gn[ti]=-1;var hi=Un[ti];if(hi!==null)for(Un[ti]=null,ti=0;ti<hi.length;ti++){var Di=hi[ti];Di!==null&&(Di.lane&=-536870913)}ee&=~Wn}oe!==0&&se(V,oe,0),xe!==0&&me===0&&V.tag!==0&&(V.suspendedLanes|=xe&~(Ve&~z))}function se(V,z,ee){V.pendingLanes|=z,V.suspendedLanes&=~z;var oe=31-Zs(z);V.entangledLanes|=z,V.entanglements[oe]=V.entanglements[oe]|1073741824|ee&261930}function he(V,z){var ee=V.entangledLanes|=z;for(V=V.entanglements;ee;){var oe=31-Zs(ee),me=1<<oe;me&z|V[oe]&z&&(V[oe]|=z),ee&=~me}}function Se(V,z){var ee=z&-z;return ee=(ee&42)!==0?1:ve(ee),(ee&(V.suspendedLanes|z))!==0?0:ee}function ve(V){switch(V){case 2:V=1;break;case 8:V=4;break;case 32:V=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:V=128;break;case 268435456:V=134217728;break;default:V=0}return V}function Re(V){return V&=-V,2<V?8<V?(V&134217727)!==0?32:268435456:8:2}function Ee(V){if(typeof Mf=="function"&&Xd(V),Qs&&typeof Qs.setStrictMode=="function")try{Qs.setStrictMode(Zl,V)}catch{}}function Oe(V,z){return V===z&&(V!==0||1/V===1/z)||V!==V&&z!==z}function Ne(V){if(yh===void 0)try{throw Error()}catch(ee){var z=ee.stack.trim().match(/\n( *(at )?)/);yh=z&&z[1]||"",go=-1<ee.stack.indexOf(`
    at`)?" (<anonymous>)":-1<ee.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yh+V+go}function ye(V,z){if(!V||Su)return"";Su=!0;var ee=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var oe={DetermineComponentFrameRoot:function(){try{if(z){var Wn=function(){throw Error()};if(Object.defineProperty(Wn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Wn,[])}catch(Di){var hi=Di}Reflect.construct(V,[],Wn)}else{try{Wn.call()}catch(Di){hi=Di}V.call(Wn.prototype)}}else{try{throw Error()}catch(Di){hi=Di}(Wn=V())&&typeof Wn.catch=="function"&&Wn.catch(function(){})}}catch(Di){if(Di&&hi&&typeof Di.stack=="string")return[Di.stack,hi.stack]}return[null,null]}};oe.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var me=Object.getOwnPropertyDescriptor(oe.DetermineComponentFrameRoot,"name");me&&me.configurable&&Object.defineProperty(oe.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var xe=oe.DetermineComponentFrameRoot(),Ve=xe[0],Ye=xe[1];if(Ve&&Ye){var gn=Ve.split(`
`),Un=Ye.split(`
`);for(me=oe=0;oe<gn.length&&!gn[oe].includes("DetermineComponentFrameRoot");)oe++;for(;me<Un.length&&!Un[me].includes("DetermineComponentFrameRoot");)me++;if(oe===gn.length||me===Un.length)for(oe=gn.length-1,me=Un.length-1;1<=oe&&0<=me&&gn[oe]!==Un[me];)me--;for(;1<=oe&&0<=me;oe--,me--)if(gn[oe]!==Un[me]){if(oe!==1||me!==1)do if(oe--,me--,0>me||gn[oe]!==Un[me]){var ti=`
`+gn[oe].replace(" at new "," at ");return V.displayName&&ti.includes("<anonymous>")&&(ti=ti.replace("<anonymous>",V.displayName)),ti}while(1<=oe&&0<=me);break}}}finally{Su=!1,Error.prepareStackTrace=ee}return(ee=V?V.displayName||V.name:"")?Ne(ee):""}function Ae(V,z){switch(V.tag){case 26:case 27:case 5:return Ne(V.type);case 16:return Ne("Lazy");case 13:return V.child!==z&&z!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return ye(V.type,!1);case 11:return ye(V.type.render,!1);case 1:return ye(V.type,!0);case 31:return Ne("Activity");default:return""}}function _e(V){try{var z="",ee=null;do z+=Ae(V,ee),ee=V,V=V.return;while(V);return z}catch(oe){return`
Error generating stack: `+oe.message+`
`+oe.stack}}function Te(V,z){if(typeof V=="object"&&V!==null){var ee=Cf.get(V);return ee!==void 0?ee:(z={value:V,source:z,stack:_e(z)},Cf.set(V,z),z)}return{value:V,source:z,stack:_e(z)}}function we(V,z){jo[yo++]=Tu,jo[yo++]=yr,yr=V,Tu=z}function ge(V,z,ee){Ma[ua++]=bs,Ma[ua++]=Wa,Ma[ua++]=Ca,Ca=V;var oe=bs;V=Wa;var me=32-Zs(oe)-1;oe&=~(1<<me),ee+=1;var xe=32-Zs(z)+me;if(30<xe){var Ve=me-me%5;xe=(oe&(1<<Ve)-1).toString(32),oe>>=Ve,me-=Ve,bs=1<<32-Zs(z)+me|ee<<me|oe,Wa=xe+V}else bs=1<<xe|ee<<me|oe,Wa=V}function De(V){V.return!==null&&(we(V,1),ge(V,1,0))}function ze(V){for(;V===yr;)yr=jo[--yo],jo[yo]=null,Tu=jo[--yo],jo[yo]=null;for(;V===Ca;)Ca=Ma[--ua],Ma[ua]=null,Wa=Ma[--ua],Ma[ua]=null,bs=Ma[--ua],Ma[ua]=null}function He(V,z){Ma[ua++]=bs,Ma[ua++]=Wa,Ma[ua++]=Ca,bs=z.id,Wa=z.overflow,Ca=V}function yt(V,z){Q(Es,z),Q(zo,V),Q(xs,null),V=ad(z),K(xs),Q(xs,V)}function Ge(){K(xs),K(zo),K(Es)}function lt(V){V.memoizedState!==null&&Q(Au,V);var z=xs.current,ee=Pc(z,V.type);z!==ee&&(Q(zo,V),Q(xs,ee))}function Mt(V){zo.current===V&&(K(xs),K(zo)),Au.current===V&&(K(Au),qr?ql._currentValue=$l:ql._currentValue2=$l)}function hn(V){var z=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vn(Te(z,V)),xh}function Fn(V,z){if(!Ir)throw Error(d(175));Dd(V.stateNode,V.type,V.memoizedProps,z,V)||hn(V,!0)}function Vn(V){for(cs=V.return;cs;)switch(cs.tag){case 5:case 31:case 13:Bs=!1;return;case 27:case 3:Bs=!0;return;default:cs=cs.return}}function ni(V){if(!Ir||V!==cs)return!1;if(!$i)return Vn(V),$i=!0,!1;var z=V.tag;if(ls?z!==3&&z!==27&&(z!==5||Dc(V.type)&&!Os(V.type,V.memoizedProps))&&kr&&hn(V):z!==3&&(z!==5||Dc(V.type)&&!Os(V.type,V.memoizedProps))&&kr&&hn(V),Vn(V),z===13){if(!Ir)throw Error(d(316));if(V=V.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(d(317));kr=yf(V)}else if(z===31){if(V=V.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(d(317));kr=Nd(V)}else kr=ls&&z===27?Ad(V.type,kr):cs?Td(V.stateNode):null;return!0}function In(){Ir&&(kr=cs=null,$i=!1)}function qe(){var V=xo;return V!==null&&(ta===null?ta=V:ta.push.apply(ta,V),xo=null),V}function vn(V){xo===null?xo=[V]:xo.push(V)}function dn(V,z,ee){qr?(Q(Pa,z._currentValue),z._currentValue=ee):(Q(Pa,z._currentValue2),z._currentValue2=ee)}function Mn(V){var z=Pa.current;qr?V._currentValue=z:V._currentValue2=z,K(Pa)}function je(V,z,ee){for(;V!==null;){var oe=V.alternate;if((V.childLanes&z)!==z?(V.childLanes|=z,oe!==null&&(oe.childLanes|=z)):oe!==null&&(oe.childLanes&z)!==z&&(oe.childLanes|=z),V===ee)break;V=V.return}}function qn(V,z,ee,oe){var me=V.child;for(me!==null&&(me.return=V);me!==null;){var xe=me.dependencies;if(xe!==null){var Ve=me.child;xe=xe.firstContext;e:for(;xe!==null;){var Ye=xe;xe=me;for(var gn=0;gn<z.length;gn++)if(Ye.context===z[gn]){xe.lanes|=ee,Ye=xe.alternate,Ye!==null&&(Ye.lanes|=ee),je(xe.return,ee,V),oe||(Ve=null);break e}xe=Ye.next}}else if(me.tag===18){if(Ve=me.return,Ve===null)throw Error(d(341));Ve.lanes|=ee,xe=Ve.alternate,xe!==null&&(xe.lanes|=ee),je(Ve,ee,V),Ve=null}else Ve=me.child;if(Ve!==null)Ve.return=me;else for(Ve=me;Ve!==null;){if(Ve===V){Ve=null;break}if(me=Ve.sibling,me!==null){me.return=Ve.return,Ve=me;break}Ve=Ve.return}me=Ve}}function An(V,z,ee,oe){V=null;for(var me=z,xe=!1;me!==null;){if(!xe){if((me.flags&524288)!==0)xe=!0;else if((me.flags&262144)!==0)break}if(me.tag===10){var Ve=me.alternate;if(Ve===null)throw Error(d(387));if(Ve=Ve.memoizedProps,Ve!==null){var Ye=me.type;Yr(me.pendingProps.value,Ve.value)||(V!==null?V.push(Ye):V=[Ye])}}else if(me===Au.current){if(Ve=me.alternate,Ve===null)throw Error(d(387));Ve.memoizedState.memoizedState!==me.memoizedState.memoizedState&&(V!==null?V.push(ql):V=[ql])}me=me.return}V!==null&&qn(z,V,ee,oe),z.flags|=262144}function ri(V){for(V=V.firstContext;V!==null;){var z=V.context;if(!Yr(qr?z._currentValue:z._currentValue2,V.memoizedValue))return!0;V=V.next}return!1}function On(V){Er=V,$a=null,V=V.dependencies,V!==null&&(V.firstContext=null)}function Be(V){return Ke(Er,V)}function Pe(V,z){return Er===null&&On(V),Ke(V,z)}function Ke(V,z){var ee=qr?z._currentValue:z._currentValue2;if(z={context:z,memoizedValue:ee,next:null},$a===null){if(V===null)throw Error(d(308));$a=z,V.dependencies={lanes:0,firstContext:z},V.flags|=524288}else $a=$a.next=z;return ee}function Ft(){return{controller:new Yd,data:new Map,refCount:0}}function bn(V){V.refCount--,V.refCount===0&&_s(Ep,function(){V.controller.abort()})}function ln(){}function Zn(V){V!==ur&&V.next===null&&(ur===null?Ru=ur=V:ur=ur.next=V),Ia=!0,Cs||(Cs=!0,Jn())}function Gn(V,z){if(!_h&&Ia){_h=!0;do for(var ee=!1,oe=Ru;oe!==null;){if(V!==0){var me=oe.pendingLanes;if(me===0)var xe=0;else{var Ve=oe.suspendedLanes,Ye=oe.pingedLanes;xe=(1<<31-Zs(42|V)+1)-1,xe&=me&~(Ve&~Ye),xe=xe&201326741?xe&201326741|1:xe?xe|2:0}xe!==0&&(ee=!0,oi(oe,xe))}else xe=qi,xe=J(oe,oe===Ui?xe:0,oe.cancelPendingCommit!==null||oe.timeoutHandle!==Ks),(xe&3)===0||ie(oe,xe)||(ee=!0,oi(oe,xe));oe=oe.next}while(ee);_h=!1}}function fi(){xi()}function xi(){Ia=Cs=!1;var V=0;yl!==0&&Wl()&&(V=yl);for(var z=Ms(),ee=null,oe=Ru;oe!==null;){var me=oe.next,xe=wn(oe,z);xe===0?(oe.next=null,ee===null?Ru=me:ee.next=me,me===null&&(ur=ee)):(ee=oe,(V!==0||(xe&3)!==0)&&(Ia=!0)),oe=me}ss!==0&&ss!==5||Gn(V),yl!==0&&(yl=0)}function wn(V,z){for(var ee=V.suspendedLanes,oe=V.pingedLanes,me=V.expirationTimes,xe=V.pendingLanes&-62914561;0<xe;){var Ve=31-Zs(xe),Ye=1<<Ve,gn=me[Ve];gn===-1?((Ye&ee)===0||(Ye&oe)!==0)&&(me[Ve]=re(Ye,z)):gn<=z&&(V.expiredLanes|=Ye),xe&=~Ye}if(z=Ui,ee=qi,ee=J(V,V===z?ee:0,V.cancelPendingCommit!==null||V.timeoutHandle!==Ks),oe=V.callbackNode,ee===0||V===z&&(dr===2||dr===9)||V.cancelPendingCommit!==null)return oe!==null&&oe!==null&&dh(oe),V.callbackNode=null,V.callbackPriority=0;if((ee&3)===0||ie(V,ee)){if(z=ee&-ee,z===V.callbackPriority)return z;switch(oe!==null&&dh(oe),Re(ee)){case 2:case 8:ee=qd;break;case 32:ee=Eu;break;case 268435456:ee=mh;break;default:ee=Eu}return oe=Tn.bind(null,V),ee=bu(ee,oe),V.callbackPriority=z,V.callbackNode=ee,z}return oe!==null&&oe!==null&&dh(oe),V.callbackPriority=2,V.callbackNode=null,2}function Tn(V,z){if(ss!==0&&ss!==5)return V.callbackNode=null,V.callbackPriority=0,null;var ee=V.callbackNode;if(fo()&&V.callbackNode!==ee)return null;var oe=qi;return oe=J(V,V===Ui?oe:0,V.cancelPendingCommit!==null||V.timeoutHandle!==Ks),oe===0?null:(Ha(V,oe,z),wn(V,Ms()),V.callbackNode!=null&&V.callbackNode===ee?Tn.bind(null,V):null)}function oi(V,z){if(fo())return null;Ha(V,z,!0)}function Jn(){ef?tf(function(){(Gi&6)!==0?bu(ph,fi):xi()}):bu(ph,fi)}function ei(){if(yl===0){var V=Go;V===0&&(V=fh,fh<<=1,(fh&261888)===0&&(fh=256)),yl=V}return yl}function gi(V,z){if(Nc===null){var ee=Nc=[];Pf=0,Go=ei(),us={status:"pending",value:void 0,then:function(oe){ee.push(oe)}}}return Pf++,z.then(dt,dt),z}function dt(){if(--Pf===0&&Nc!==null){us!==null&&(us.status="fulfilled");var V=Nc;Nc=null,Go=0,us=null;for(var z=0;z<V.length;z++)(0,V[z])()}}function kt(V,z){var ee=[],oe={status:"pending",value:null,reason:null,then:function(me){ee.push(me)}};return V.then(function(){oe.status="fulfilled",oe.value=z;for(var me=0;me<ee.length;me++)(0,ee[me])(z)},function(me){for(oe.status="rejected",oe.reason=me,me=0;me<ee.length;me++)(0,ee[me])(void 0)}),oe}function Hn(){var V=xl.current;return V!==null?V:Ui.pooledCache}function Kn(V,z){z===null?Q(xl,xl.current):Q(xl,z.pool)}function Bn(){var V=Hn();return V===null?null:{parent:qr?Dr._currentValue:Dr._currentValue2,pool:V}}function pn(V,z){if(Yr(V,z))return!0;if(typeof V!="object"||V===null||typeof z!="object"||z===null)return!1;var ee=Object.keys(V),oe=Object.keys(z);if(ee.length!==oe.length)return!1;for(oe=0;oe<ee.length;oe++){var me=ee[oe];if(!bp.call(z,me)||!Yr(V[me],z[me]))return!1}return!0}function ci(V){return V=V.status,V==="fulfilled"||V==="rejected"}function Ai(V,z,ee){switch(ee=V[ee],ee===void 0?V.push(z):ee!==z&&(z.then(ln,ln),z=ee),z.status){case"fulfilled":return z.value;case"rejected":throw V=z.reason,Jr(V),V;default:if(typeof z.status=="string")z.then(ln,ln);else{if(V=Ui,V!==null&&100<V.shellSuspendCounter)throw Error(d(482));V=z,V.status="pending",V.then(function(oe){if(z.status==="pending"){var me=z;me.status="fulfilled",me.value=oe}},function(oe){if(z.status==="pending"){var me=z;me.status="rejected",me.reason=oe}})}switch(z.status){case"fulfilled":return z.value;case"rejected":throw V=z.reason,Jr(V),V}throw Us=z,hs}}function ji(V){try{var z=V._init;return z(V._payload)}catch(ee){throw ee!==null&&typeof ee=="object"&&typeof ee.then=="function"?(Us=ee,hs):ee}}function Ii(){if(Us===null)throw Error(d(459));var V=Us;return Us=null,V}function Jr(V){if(V===hs||V===Da)throw Error(d(483))}function fs(V){var z=Ql;return Ql+=1,_l===null&&(_l=[]),Ai(_l,V,z)}function As(V,z){z=z.props.ref,V.ref=z!==void 0?z:null}function Hs(V,z){throw z.$$typeof===Ul?Error(d(525)):(V=Object.prototype.toString.call(z),Error(d(31,V==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":V)))}function na(V){function z(Kt,wt){if(V){var fn=Kt.deletions;fn===null?(Kt.deletions=[wt],Kt.flags|=16):fn.push(wt)}}function ee(Kt,wt){if(!V)return null;for(;wt!==null;)z(Kt,wt),wt=wt.sibling;return null}function oe(Kt){for(var wt=new Map;Kt!==null;)Kt.key!==null?wt.set(Kt.key,Kt):wt.set(Kt.index,Kt),Kt=Kt.sibling;return wt}function me(Kt,wt){return Kt=la(Kt,wt),Kt.index=0,Kt.sibling=null,Kt}function xe(Kt,wt,fn){return Kt.index=fn,V?(fn=Kt.alternate,fn!==null?(fn=fn.index,fn<wt?(Kt.flags|=67108866,wt):fn):(Kt.flags|=67108866,wt)):(Kt.flags|=1048576,wt)}function Ve(Kt){return V&&Kt.alternate===null&&(Kt.flags|=67108866),Kt}function Ye(Kt,wt,fn,Qn){return wt===null||wt.tag!==6?(wt=Gh(fn,Kt.mode,Qn),wt.return=Kt,wt):(wt=me(wt,fn),wt.return=Kt,wt)}function gn(Kt,wt,fn,Qn){var Ti=fn.type;return Ti===zl?ti(Kt,wt,fn.props.children,Qn,fn.key):wt!==null&&(wt.elementType===Ti||typeof Ti=="object"&&Ti!==null&&Ti.$$typeof===Fs&&ji(Ti)===wt.type)?(wt=me(wt,fn.props),As(wt,fn),wt.return=Kt,wt):(wt=Lo(fn.type,fn.key,fn.props,null,Kt.mode,Qn),As(wt,fn),wt.return=Kt,wt)}function Un(Kt,wt,fn,Qn){return wt===null||wt.tag!==4||wt.stateNode.containerInfo!==fn.containerInfo||wt.stateNode.implementation!==fn.implementation?(wt=Wh(fn,Kt.mode,Qn),wt.return=Kt,wt):(wt=me(wt,fn.children||[]),wt.return=Kt,wt)}function ti(Kt,wt,fn,Qn,Ti){return wt===null||wt.tag!==7?(wt=Ta(fn,Kt.mode,Qn,Ti),wt.return=Kt,wt):(wt=me(wt,fn),wt.return=Kt,wt)}function Wn(Kt,wt,fn){if(typeof wt=="string"&&wt!==""||typeof wt=="number"||typeof wt=="bigint")return wt=Gh(""+wt,Kt.mode,fn),wt.return=Kt,wt;if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case po:return fn=Lo(wt.type,wt.key,wt.props,null,Kt.mode,fn),As(fn,wt),fn.return=Kt,fn;case jl:return wt=Wh(wt,Kt.mode,fn),wt.return=Kt,wt;case Fs:return wt=ji(wt),Wn(Kt,wt,fn)}if(dl(wt)||G(wt))return wt=Ta(wt,Kt.mode,fn,null),wt.return=Kt,wt;if(typeof wt.then=="function")return Wn(Kt,fs(wt),fn);if(wt.$$typeof===Aa)return Wn(Kt,Pe(Kt,wt),fn);Hs(Kt,wt)}return null}function hi(Kt,wt,fn,Qn){var Ti=wt!==null?wt.key:null;if(typeof fn=="string"&&fn!==""||typeof fn=="number"||typeof fn=="bigint")return Ti!==null?null:Ye(Kt,wt,""+fn,Qn);if(typeof fn=="object"&&fn!==null){switch(fn.$$typeof){case po:return fn.key===Ti?gn(Kt,wt,fn,Qn):null;case jl:return fn.key===Ti?Un(Kt,wt,fn,Qn):null;case Fs:return fn=ji(fn),hi(Kt,wt,fn,Qn)}if(dl(fn)||G(fn))return Ti!==null?null:ti(Kt,wt,fn,Qn,null);if(typeof fn.then=="function")return hi(Kt,wt,fs(fn),Qn);if(fn.$$typeof===Aa)return hi(Kt,wt,Pe(Kt,fn),Qn);Hs(Kt,fn)}return null}function Di(Kt,wt,fn,Qn,Ti){if(typeof Qn=="string"&&Qn!==""||typeof Qn=="number"||typeof Qn=="bigint")return Kt=Kt.get(fn)||null,Ye(wt,Kt,""+Qn,Ti);if(typeof Qn=="object"&&Qn!==null){switch(Qn.$$typeof){case po:return Kt=Kt.get(Qn.key===null?fn:Qn.key)||null,gn(wt,Kt,Qn,Ti);case jl:return Kt=Kt.get(Qn.key===null?fn:Qn.key)||null,Un(wt,Kt,Qn,Ti);case Fs:return Qn=ji(Qn),Di(Kt,wt,fn,Qn,Ti)}if(dl(Qn)||G(Qn))return Kt=Kt.get(fn)||null,ti(wt,Kt,Qn,Ti,null);if(typeof Qn.then=="function")return Di(Kt,wt,fn,fs(Qn),Ti);if(Qn.$$typeof===Aa)return Di(Kt,wt,fn,Pe(wt,Qn),Ti);Hs(wt,Qn)}return null}function Qr(Kt,wt,fn,Qn){for(var Ti=null,Ur=null,Ri=wt,ir=wt=0,vs=null;Ri!==null&&ir<fn.length;ir++){Ri.index>ir?(vs=Ri,Ri=null):vs=Ri.sibling;var ar=hi(Kt,Ri,fn[ir],Qn);if(ar===null){Ri===null&&(Ri=vs);break}V&&Ri&&ar.alternate===null&&z(Kt,Ri),wt=xe(ar,wt,ir),Ur===null?Ti=ar:Ur.sibling=ar,Ur=ar,Ri=vs}if(ir===fn.length)return ee(Kt,Ri),$i&&we(Kt,ir),Ti;if(Ri===null){for(;ir<fn.length;ir++)Ri=Wn(Kt,fn[ir],Qn),Ri!==null&&(wt=xe(Ri,wt,ir),Ur===null?Ti=Ri:Ur.sibling=Ri,Ur=Ri);return $i&&we(Kt,ir),Ti}for(Ri=oe(Ri);ir<fn.length;ir++)vs=Di(Ri,Kt,ir,fn[ir],Qn),vs!==null&&(V&&vs.alternate!==null&&Ri.delete(vs.key===null?ir:vs.key),wt=xe(vs,wt,ir),Ur===null?Ti=vs:Ur.sibling=vs,Ur=vs);return V&&Ri.forEach(function(La){return z(Kt,La)}),$i&&we(Kt,ir),Ti}function Gc(Kt,wt,fn,Qn){if(fn==null)throw Error(d(151));for(var Ti=null,Ur=null,Ri=wt,ir=wt=0,vs=null,ar=fn.next();Ri!==null&&!ar.done;ir++,ar=fn.next()){Ri.index>ir?(vs=Ri,Ri=null):vs=Ri.sibling;var La=hi(Kt,Ri,ar.value,Qn);if(La===null){Ri===null&&(Ri=vs);break}V&&Ri&&La.alternate===null&&z(Kt,Ri),wt=xe(La,wt,ir),Ur===null?Ti=La:Ur.sibling=La,Ur=La,Ri=vs}if(ar.done)return ee(Kt,Ri),$i&&we(Kt,ir),Ti;if(Ri===null){for(;!ar.done;ir++,ar=fn.next())ar=Wn(Kt,ar.value,Qn),ar!==null&&(wt=xe(ar,wt,ir),Ur===null?Ti=ar:Ur.sibling=ar,Ur=ar);return $i&&we(Kt,ir),Ti}for(Ri=oe(Ri);!ar.done;ir++,ar=fn.next())ar=Di(Ri,Kt,ir,ar.value,Qn),ar!==null&&(V&&ar.alternate!==null&&Ri.delete(ar.key===null?ir:ar.key),wt=xe(ar,wt,ir),Ur===null?Ti=ar:Ur.sibling=ar,Ur=ar);return V&&Ri.forEach(function(Sp){return z(Kt,Sp)}),$i&&we(Kt,ir),Ti}function wl(Kt,wt,fn,Qn){if(typeof fn=="object"&&fn!==null&&fn.type===zl&&fn.key===null&&(fn=fn.props.children),typeof fn=="object"&&fn!==null){switch(fn.$$typeof){case po:e:{for(var Ti=fn.key;wt!==null;){if(wt.key===Ti){if(Ti=fn.type,Ti===zl){if(wt.tag===7){ee(Kt,wt.sibling),Qn=me(wt,fn.props.children),Qn.return=Kt,Kt=Qn;break e}}else if(wt.elementType===Ti||typeof Ti=="object"&&Ti!==null&&Ti.$$typeof===Fs&&ji(Ti)===wt.type){ee(Kt,wt.sibling),Qn=me(wt,fn.props),As(Qn,fn),Qn.return=Kt,Kt=Qn;break e}ee(Kt,wt);break}else z(Kt,wt);wt=wt.sibling}fn.type===zl?(Qn=Ta(fn.props.children,Kt.mode,Qn,fn.key),Qn.return=Kt,Kt=Qn):(Qn=Lo(fn.type,fn.key,fn.props,null,Kt.mode,Qn),As(Qn,fn),Qn.return=Kt,Kt=Qn)}return Ve(Kt);case jl:e:{for(Ti=fn.key;wt!==null;){if(wt.key===Ti)if(wt.tag===4&&wt.stateNode.containerInfo===fn.containerInfo&&wt.stateNode.implementation===fn.implementation){ee(Kt,wt.sibling),Qn=me(wt,fn.children||[]),Qn.return=Kt,Kt=Qn;break e}else{ee(Kt,wt);break}else z(Kt,wt);wt=wt.sibling}Qn=Wh(fn,Kt.mode,Qn),Qn.return=Kt,Kt=Qn}return Ve(Kt);case Fs:return fn=ji(fn),wl(Kt,wt,fn,Qn)}if(dl(fn))return Qr(Kt,wt,fn,Qn);if(G(fn)){if(Ti=G(fn),typeof Ti!="function")throw Error(d(150));return fn=Ti.call(fn),Gc(Kt,wt,fn,Qn)}if(typeof fn.then=="function")return wl(Kt,wt,fs(fn),Qn);if(fn.$$typeof===Aa)return wl(Kt,wt,Pe(Kt,fn),Qn);Hs(Kt,fn)}return typeof fn=="string"&&fn!==""||typeof fn=="number"||typeof fn=="bigint"?(fn=""+fn,wt!==null&&wt.tag===6?(ee(Kt,wt.sibling),Qn=me(wt,fn),Qn.return=Kt,Kt=Qn):(ee(Kt,wt),Qn=Gh(fn,Kt.mode,Qn),Qn.return=Kt,Kt=Qn),Ve(Kt)):ee(Kt,wt)}return function(Kt,wt,fn,Qn){try{Ql=0;var Ti=wl(Kt,wt,fn,Qn);return _l=null,Ti}catch(Ri){if(Ri===hs||Ri===Da)throw Ri;var Ur=s(29,Ri,null,Kt.mode);return Ur.lanes=Qn,Ur.return=Kt,Ur}finally{}}}function Is(){for(var V=vo,z=Jl=vo=0;z<V;){var ee=Ts[z];Ts[z++]=null;var oe=Ts[z];Ts[z++]=null;var me=Ts[z];Ts[z++]=null;var xe=Ts[z];if(Ts[z++]=null,oe!==null&&me!==null){var Ve=oe.pending;Ve===null?me.next=me:(me.next=Ve.next,Ve.next=me),oe.pending=me}xe!==0&&ds(ee,me,xe)}}function $r(V,z,ee,oe){Ts[vo++]=V,Ts[vo++]=z,Ts[vo++]=ee,Ts[vo++]=oe,Jl|=oe,V.lanes|=oe,V=V.alternate,V!==null&&(V.lanes|=oe)}function es(V,z,ee,oe){return $r(V,z,ee,oe),pr(V)}function bi(V,z){return $r(V,null,null,z),pr(V)}function ds(V,z,ee){V.lanes|=ee;var oe=V.alternate;oe!==null&&(oe.lanes|=ee);for(var me=!1,xe=V.return;xe!==null;)xe.childLanes|=ee,oe=xe.alternate,oe!==null&&(oe.childLanes|=ee),xe.tag===22&&(V=xe.stateNode,V===null||V._visibility&1||(me=!0)),V=xe,xe=xe.return;return V.tag===3?(xe=V.stateNode,me&&z!==null&&(me=31-Zs(ee),V=xe.hiddenUpdates,oe=V[me],oe===null?V[me]=[z]:oe.push(z),z.lane=ee|536870912),xe):null}function pr(V){if(50<sr)throw sr=0,ku=null,Error(d(185));for(var z=V.return;z!==null;)V=z,z=V.return;return V.tag===3?V.stateNode:null}function Ie(V){V.updateQueue={baseState:V.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fe(V,z){V=V.updateQueue,z.updateQueue===V&&(z.updateQueue={baseState:V.baseState,firstBaseUpdate:V.firstBaseUpdate,lastBaseUpdate:V.lastBaseUpdate,shared:V.shared,callbacks:null})}function We(V){return{lane:V,tag:0,payload:null,callback:null,next:null}}function Nt(V,z,ee){var oe=V.updateQueue;if(oe===null)return null;if(oe=oe.shared,(Gi&2)!==0){var me=oe.pending;return me===null?z.next=z:(z.next=me.next,me.next=z),oe.pending=z,z=pr(V),ds(V,null,ee),z}return $r(V,oe,z,ee),pr(V)}function mn(V,z,ee){if(z=z.updateQueue,z!==null&&(z=z.shared,(ee&4194048)!==0)){var oe=z.lanes;oe&=V.pendingLanes,ee|=oe,z.lanes=ee,he(V,ee)}}function yn(V,z){var ee=V.updateQueue,oe=V.alternate;if(oe!==null&&(oe=oe.updateQueue,ee===oe)){var me=null,xe=null;if(ee=ee.firstBaseUpdate,ee!==null){do{var Ve={lane:ee.lane,tag:ee.tag,payload:ee.payload,callback:null,next:null};xe===null?me=xe=Ve:xe=xe.next=Ve,ee=ee.next}while(ee!==null);xe===null?me=xe=z:xe=xe.next=z}else me=xe=z;ee={baseState:oe.baseState,firstBaseUpdate:me,lastBaseUpdate:xe,shared:oe.shared,callbacks:oe.callbacks},V.updateQueue=ee;return}V=ee.lastBaseUpdate,V===null?ee.firstBaseUpdate=z:V.next=z,ee.lastBaseUpdate=z}function jn(){if(Eh){var V=us;if(V!==null)throw V}}function Dn(V,z,ee,oe){Eh=!1;var me=V.updateQueue;ha=!1;var xe=me.firstBaseUpdate,Ve=me.lastBaseUpdate,Ye=me.shared.pending;if(Ye!==null){me.shared.pending=null;var gn=Ye,Un=gn.next;gn.next=null,Ve===null?xe=Un:Ve.next=Un,Ve=gn;var ti=V.alternate;ti!==null&&(ti=ti.updateQueue,Ye=ti.lastBaseUpdate,Ye!==Ve&&(Ye===null?ti.firstBaseUpdate=Un:Ye.next=Un,ti.lastBaseUpdate=gn))}if(xe!==null){var Wn=me.baseState;Ve=0,ti=Un=gn=null,Ye=xe;do{var hi=Ye.lane&-536870913,Di=hi!==Ye.lane;if(Di?(qi&hi)===hi:(oe&hi)===hi){hi!==0&&hi===Go&&(Eh=!0),ti!==null&&(ti=ti.next={lane:0,tag:Ye.tag,payload:Ye.payload,callback:null,next:null});e:{var Qr=V,Gc=Ye;hi=z;var wl=ee;switch(Gc.tag){case 1:if(Qr=Gc.payload,typeof Qr=="function"){Wn=Qr.call(wl,Wn,hi);break e}Wn=Qr;break e;case 3:Qr.flags=Qr.flags&-65537|128;case 0:if(Qr=Gc.payload,hi=typeof Qr=="function"?Qr.call(wl,Wn,hi):Qr,hi==null)break e;Wn=Yu({},Wn,hi);break e;case 2:ha=!0}}hi=Ye.callback,hi!==null&&(V.flags|=64,Di&&(V.flags|=8192),Di=me.callbacks,Di===null?me.callbacks=[hi]:Di.push(hi))}else Di={lane:hi,tag:Ye.tag,payload:Ye.payload,callback:Ye.callback,next:null},ti===null?(Un=ti=Di,gn=Wn):ti=ti.next=Di,Ve|=hi;if(Ye=Ye.next,Ye===null){if(Ye=me.shared.pending,Ye===null)break;Di=Ye,Ye=Di.next,Di.next=null,me.lastBaseUpdate=Di,me.shared.pending=null}}while(!0);ti===null&&(gn=Wn),me.baseState=gn,me.firstBaseUpdate=Un,me.lastBaseUpdate=ti,xe===null&&(me.shared.lanes=0),Wo|=Ve,V.lanes=Ve,V.memoizedState=Wn}}function Yn(V,z){if(typeof V!="function")throw Error(d(191,V));V.call(z)}function $n(V,z){var ee=V.callbacks;if(ee!==null)for(V.callbacks=null,V=0;V<ee.length;V++)Yn(ee[V],z)}function Xn(V,z){V=Eo,Q(vl,V),Q(ec,z),Eo=V|z.baseLanes}function ke(){Q(vl,Eo),Q(ec,ec.current)}function Xe(){Eo=vl.current,K(ec),K(vl)}function Qe(V){var z=V.alternate;Q(Gr,Gr.current&1),Q(Js,V),ea===null&&(z===null||ec.current!==null||z.memoizedState!==null)&&(ea=V)}function Ze(V){Q(Gr,Gr.current),Q(Js,V),ea===null&&(ea=V)}function Je(V){V.tag===22?(Q(Gr,Gr.current),Q(Js,V),ea===null&&(ea=V)):En()}function En(){Q(Gr,Gr.current),Q(Js,Js.current)}function Pn(V){K(Js),ea===V&&(ea=null),K(Gr)}function kn(V){for(var z=V;z!==null;){if(z.tag===13){var ee=z.memoizedState;if(ee!==null&&(ee=ee.dehydrated,ee===null||ml(ee)||ih(ee)))return z}else if(z.tag===19&&(z.memoizedProps.revealOrder==="forwards"||z.memoizedProps.revealOrder==="backwards"||z.memoizedProps.revealOrder==="unstable_legacy-backwards"||z.memoizedProps.revealOrder==="together")){if((z.flags&128)!==0)return z}else if(z.child!==null){z.child.return=z,z=z.child;continue}if(z===V)break;for(;z.sibling===null;){if(z.return===null||z.return===V)return null;z=z.return}z.sibling.return=z.return,z=z.sibling}return null}function Nn(){throw Error(d(321))}function ai(V,z){if(z===null)return!1;for(var ee=0;ee<z.length&&ee<V.length;ee++)if(!Yr(V[ee],z[ee]))return!1;return!0}function li(V,z,ee,oe,me,xe){return Ho=xe,Li=z,z.memoizedState=null,z.updateQueue=null,z.lanes=0,Ei.H=V===null||V.memoizedState===null?Fr:bo,Ji=!1,xe=ee(oe,me),Ji=!1,Fi&&(xe=zn(z,ee,oe,me)),mi(V),xe}function mi(V){Ei.H=fa;var z=vi!==null&&vi.next!==null;if(Ho=0,Pi=vi=Li=null,Bi=!1,Va=0,qa=null,z)throw Error(d(300));V===null||wr||(V=V.dependencies,V!==null&&ri(V)&&(wr=!0))}function zn(V,z,ee,oe){Li=V;var me=0;do{if(Fi&&(qa=null),Va=0,Fi=!1,25<=me)throw Error(d(301));if(me+=1,Pi=vi=null,V.updateQueue!=null){var xe=V.updateQueue;xe.lastEffect=null,xe.events=null,xe.stores=null,xe.memoCache!=null&&(xe.memoCache.index=0)}Ei.H=bl,xe=z(ee,oe)}while(Fi);return xe}function di(){var V=Ei.H,z=V.useState()[0];return z=typeof z.then=="function"?si(z):z,V=V.useState()[0],(vi!==null?vi.memoizedState:null)!==V&&(Li.flags|=1024),z}function Vi(){var V=Ps!==0;return Ps=0,V}function Xi(V,z,ee){z.updateQueue=V.updateQueue,z.flags&=-2053,V.lanes&=~ee}function ui(V){if(Bi){for(V=V.memoizedState;V!==null;){var z=V.queue;z!==null&&(z.pending=null),V=V.next}Bi=!1}Ho=0,Pi=vi=Li=null,Fi=!1,Va=Ps=0,qa=null}function pi(){var V={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pi===null?Li.memoizedState=Pi=V:Pi=Pi.next=V,Pi}function Ln(){if(vi===null){var V=Li.alternate;V=V!==null?V.memoizedState:null}else V=vi.next;var z=Pi===null?Li.memoizedState:Pi.next;if(z!==null)Pi=z,vi=V;else{if(V===null)throw Li.alternate===null?Error(d(467)):Error(d(310));vi=V,V={memoizedState:vi.memoizedState,baseState:vi.baseState,baseQueue:vi.baseQueue,queue:vi.queue,next:null},Pi===null?Li.memoizedState=Pi=V:Pi=Pi.next=V}return Pi}function wi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function si(V){var z=Va;return Va+=1,qa===null&&(qa=[]),V=Ai(qa,V,z),z=Li,(Pi===null?z.memoizedState:Pi.next)===null&&(z=z.alternate,Ei.H=z===null||z.memoizedState===null?Fr:bo),V}function tr(V){if(V!==null&&typeof V=="object"){if(typeof V.then=="function")return si(V);if(V.$$typeof===Aa)return Be(V)}throw Error(d(438,String(V)))}function Ar(V){var z=null,ee=Li.updateQueue;if(ee!==null&&(z=ee.memoCache),z==null){var oe=Li.alternate;oe!==null&&(oe=oe.updateQueue,oe!==null&&(oe=oe.memoCache,oe!=null&&(z={data:oe.data.map(function(me){return me.slice()}),index:0})))}if(z==null&&(z={data:[],index:0}),ee===null&&(ee=wi(),Li.updateQueue=ee),ee.memoCache=z,ee=z.data[z.index],ee===void 0)for(ee=z.data[z.index]=Array(V),oe=0;oe<V;oe++)ee[oe]=qh;return z.index++,ee}function Zi(V,z){return typeof z=="function"?z(V):z}function xr(V){var z=Ln();return nr(z,vi,V)}function nr(V,z,ee){var oe=V.queue;if(oe===null)throw Error(d(311));oe.lastRenderedReducer=ee;var me=V.baseQueue,xe=oe.pending;if(xe!==null){if(me!==null){var Ve=me.next;me.next=xe.next,xe.next=Ve}z.baseQueue=me=xe,oe.pending=null}if(xe=V.baseState,me===null)V.memoizedState=xe;else{z=me.next;var Ye=Ve=null,gn=null,Un=z,ti=!1;do{var Wn=Un.lane&-536870913;if(Wn!==Un.lane?(qi&Wn)===Wn:(Ho&Wn)===Wn){var hi=Un.revertLane;if(hi===0)gn!==null&&(gn=gn.next={lane:0,revertLane:0,gesture:null,action:Un.action,hasEagerState:Un.hasEagerState,eagerState:Un.eagerState,next:null}),Wn===Go&&(ti=!0);else if((Ho&hi)===hi){Un=Un.next,hi===Go&&(ti=!0);continue}else Wn={lane:0,revertLane:Un.revertLane,gesture:null,action:Un.action,hasEagerState:Un.hasEagerState,eagerState:Un.eagerState,next:null},gn===null?(Ye=gn=Wn,Ve=xe):gn=gn.next=Wn,Li.lanes|=hi,Wo|=hi;Wn=Un.action,Ji&&ee(xe,Wn),xe=Un.hasEagerState?Un.eagerState:ee(xe,Wn)}else hi={lane:Wn,revertLane:Un.revertLane,gesture:Un.gesture,action:Un.action,hasEagerState:Un.hasEagerState,eagerState:Un.eagerState,next:null},gn===null?(Ye=gn=hi,Ve=xe):gn=gn.next=hi,Li.lanes|=Wn,Wo|=Wn;Un=Un.next}while(Un!==null&&Un!==z);if(gn===null?Ve=xe:gn.next=Ye,!Yr(xe,V.memoizedState)&&(wr=!0,ti&&(ee=us,ee!==null)))throw ee;V.memoizedState=xe,V.baseState=Ve,V.baseQueue=gn,oe.lastRenderedState=xe}return me===null&&(oe.lanes=0),[V.memoizedState,oe.dispatch]}function mr(V){var z=Ln(),ee=z.queue;if(ee===null)throw Error(d(311));ee.lastRenderedReducer=V;var oe=ee.dispatch,me=ee.pending,xe=z.memoizedState;if(me!==null){ee.pending=null;var Ve=me=me.next;do xe=V(xe,Ve.action),Ve=Ve.next;while(Ve!==me);Yr(xe,z.memoizedState)||(wr=!0),z.memoizedState=xe,z.baseQueue===null&&(z.baseState=xe),ee.lastRenderedState=xe}return[xe,oe]}function Mr(V,z,ee){var oe=Li,me=Ln(),xe=$i;if(xe){if(ee===void 0)throw Error(d(407));ee=ee()}else ee=z();var Ve=!Yr((vi||me).memoizedState,ee);if(Ve&&(me.memoizedState=ee,wr=!0),me=me.queue,Oa(ia.bind(null,oe,me,V),[V]),me.getSnapshot!==z||Ve||Pi!==null&&Pi.memoizedState.tag&1){if(oe.flags|=2048,Ds(9,{destroy:void 0},ks.bind(null,oe,me,ee,z),null),Ui===null)throw Error(d(349));xe||(Ho&127)!==0||Cr(oe,z,ee)}return ee}function Cr(V,z,ee){V.flags|=16384,V={getSnapshot:z,value:ee},z=Li.updateQueue,z===null?(z=wi(),Li.updateQueue=z,z.stores=[V]):(ee=z.stores,ee===null?z.stores=[V]:ee.push(V))}function ks(V,z,ee,oe){z.value=ee,z.getSnapshot=oe,Ya(z)&&Kc(V)}function ia(V,z,ee){return ee(function(){Ya(z)&&Kc(V)})}function Ya(V){var z=V.getSnapshot;V=V.value;try{var ee=z();return!Yr(V,ee)}catch{return!0}}function Kc(V){var z=bi(V,2);z!==null&&Nr(z,V,2)}function Ka(V){var z=pi();if(typeof V=="function"){var ee=V;if(V=ee(),Ji){Ee(!0);try{ee()}finally{Ee(!1)}}}return z.memoizedState=z.baseState=V,z.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:V},z}function Ml(V,z,ee,oe){return V.baseState=ee,nr(V,vi,typeof oe=="function"?oe:Zi)}function Fa(V,z,ee,oe,me){if(kl(V))throw Error(d(485));if(V=z.action,V!==null){var xe={payload:me,action:V,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ve){xe.listeners.push(Ve)}};Ei.T!==null?ee(!0):xe.isTransition=!1,oe(xe),ee=z.pending,ee===null?(xe.next=z.pending=xe,ac(z,xe)):(xe.next=ee.next,z.pending=ee.next=xe)}}function ac(V,z){var ee=z.action,oe=z.payload,me=V.state;if(z.isTransition){var xe=Ei.T,Ve={};Ei.T=Ve;try{var Ye=ee(me,oe),gn=Ei.S;gn!==null&&gn(Ve,Ye),ra(V,z,Ye)}catch(Un){ma(V,z,Un)}finally{xe!==null&&Ve.types!==null&&(xe.types=Ve.types),Ei.T=xe}}else try{xe=ee(me,oe),ra(V,z,xe)}catch(Un){ma(V,z,Un)}}function ra(V,z,ee){ee!==null&&typeof ee=="object"&&typeof ee.then=="function"?ee.then(function(oe){Ro(V,z,oe)},function(oe){return ma(V,z,oe)}):Ro(V,z,ee)}function Ro(V,z,ee){z.status="fulfilled",z.value=ee,Xo(z),V.state=ee,z=V.pending,z!==null&&(ee=z.next,ee===z?V.pending=null:(ee=ee.next,z.next=ee,ac(V,ee)))}function ma(V,z,ee){var oe=V.pending;if(V.pending=null,oe!==null){oe=oe.next;do z.status="rejected",z.reason=ee,Xo(z),z=z.next;while(z!==oe)}V.action=null}function Xo(V){V=V.listeners;for(var z=0;z<V.length;z++)(0,V[z])()}function Cl(V,z){return z}function wo(V,z){if($i){var ee=Ui.formState;if(ee!==null){e:{var oe=Li;if($i){if(kr){var me=Sd(kr,Bs);if(me){kr=Td(me),oe=df(me);break e}}hn(oe)}oe=!1}oe&&(z=ee[0])}}ee=pi(),ee.memoizedState=ee.baseState=z,oe={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:z},ee.queue=oe,ee=Qc.bind(null,Li,oe),oe.dispatch=ee,oe=Ka(!1);var xe=ya.bind(null,Li,!1,oe.queue);return oe=pi(),me={state:z,dispatch:null,action:V,pending:null},oe.queue=me,ee=Fa.bind(null,Li,me,xe,ee),me.dispatch=ee,oe.memoizedState=V,[z,ee,!1]}function ga(V){var z=Ln();return sa(z,vi,V)}function sa(V,z,ee){if(z=nr(V,z,Cl)[0],V=xr(Zi)[0],typeof z=="object"&&z!==null&&typeof z.then=="function")try{var oe=si(z)}catch(Ve){throw Ve===hs?Da:Ve}else oe=z;z=Ln();var me=z.queue,xe=me.dispatch;return ee!==z.memoizedState&&(Li.flags|=2048,Ds(9,{destroy:void 0},Pl.bind(null,me,ee),null)),[oe,xe,V]}function Pl(V,z){V.action=z}function cr(V){var z=Ln(),ee=vi;if(ee!==null)return sa(z,ee,V);Ln(),z=z.memoizedState,ee=Ln();var oe=ee.queue.dispatch;return ee.memoizedState=V,[z,oe,!1]}function Ds(V,z,ee,oe){return V={tag:V,create:ee,deps:oe,inst:z,next:null},z=Li.updateQueue,z===null&&(z=wi(),Li.updateQueue=z),ee=z.lastEffect,ee===null?z.lastEffect=V.next=V:(oe=ee.next,ee.next=V,V.next=oe,z.lastEffect=V),V}function oc(){return Ln().memoizedState}function Za(V,z,ee,oe){var me=pi();Li.flags|=V,me.memoizedState=Ds(1|z,{destroy:void 0},ee,oe===void 0?null:oe)}function Yo(V,z,ee,oe){var me=Ln();oe=oe===void 0?null:oe;var xe=me.memoizedState.inst;vi!==null&&oe!==null&&ai(oe,vi.memoizedState.deps)?me.memoizedState=Ds(z,xe,ee,oe):(Li.flags|=V,me.memoizedState=Ds(1|z,xe,ee,oe))}function Ko(V,z){Za(8390656,8,V,z)}function Oa(V,z){Yo(2048,8,V,z)}function Ba(V){Li.flags|=4;var z=Li.updateQueue;if(z===null)z=wi(),Li.updateQueue=z,z.events=[V];else{var ee=z.events;ee===null?z.events=[V]:ee.push(V)}}function ps(V){var z=Ln().memoizedState;return Ba({ref:z,nextImpl:V}),function(){if((Gi&2)!==0)throw Error(d(440));return z.impl.apply(void 0,arguments)}}function Qa(V,z){return Yo(4,2,V,z)}function Ua(V,z){return Yo(4,4,V,z)}function Mo(V,z){if(typeof z=="function"){V=V();var ee=z(V);return function(){typeof ee=="function"?ee():z(null)}}if(z!=null)return V=V(),z.current=V,function(){z.current=null}}function lc(V,z,ee){ee=ee!=null?ee.concat([V]):null,Yo(4,4,Mo.bind(null,z,V),ee)}function Ja(){}function Il(V,z){var ee=Ln();z=z===void 0?null:z;var oe=ee.memoizedState;return z!==null&&ai(z,oe[1])?oe[0]:(ee.memoizedState=[V,z],V)}function ja(V,z){var ee=Ln();z=z===void 0?null:z;var oe=ee.memoizedState;if(z!==null&&ai(z,oe[1]))return oe[0];if(oe=V(),Ji){Ee(!0);try{V()}finally{Ee(!1)}}return ee.memoizedState=[oe,z],oe}function Zo(V,z,ee){return ee===void 0||(Ho&1073741824)!==0&&(qi&261930)===0?V.memoizedState=z:(V.memoizedState=ee,V=Do(),Li.lanes|=V,Wo|=V,ee)}function cc(V,z,ee,oe){return Yr(ee,z)?ee:ec.current!==null?(V=Zo(V,ee,oe),Yr(V,z)||(wr=!0),V):(Ho&42)===0||(Ho&1073741824)!==0&&(qi&261930)===0?(wr=!0,V.memoizedState=ee):(V=Do(),Li.lanes|=V,Wo|=V,z)}function Qo(V,z,ee,oe,me){var xe=Ra();Wi(xe!==0&&8>xe?xe:8);var Ve=Ei.T,Ye={};Ei.T=Ye,ya(V,!1,z,ee);try{var gn=me(),Un=Ei.S;if(Un!==null&&Un(Ye,gn),gn!==null&&typeof gn=="object"&&typeof gn.then=="function"){var ti=kt(gn,oe);el(V,z,ti,Pr(V))}else el(V,z,oe,Pr(V))}catch(Wn){el(V,z,{then:function(){},status:"rejected",reason:Wn},Pr())}finally{Wi(xe),Ve!==null&&Ye.types!==null&&(Ve.types=Ye.types),Ei.T=Ve}}function Zc(V){var z=V.memoizedState;if(z!==null)return z;z={memoizedState:$l,baseState:$l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:$l},next:null};var ee={};return z.next={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:ee},next:null},V.memoizedState=z,V=V.alternate,V!==null&&(V.memoizedState=z),z}function uc(){return Be(ql)}function Jo(){return Ln().memoizedState}function hc(){return Ln().memoizedState}function Du(V){for(var z=V.return;z!==null;){switch(z.tag){case 24:case 3:var ee=Pr();V=We(ee);var oe=Nt(z,V,ee);oe!==null&&(Nr(oe,z,ee),mn(oe,z,ee)),z={cache:Ft()},V.payload=z;return}z=z.return}}function fc(V,z,ee){var oe=Pr();ee={lane:oe,revertLane:0,gesture:null,action:ee,hasEagerState:!1,eagerState:null,next:null},kl(V)?Jc(z,ee):(ee=es(V,z,ee,oe),ee!==null&&(Nr(ee,V,oe),eu(ee,z,oe)))}function Qc(V,z,ee){var oe=Pr();el(V,z,ee,oe)}function el(V,z,ee,oe){var me={lane:oe,revertLane:0,gesture:null,action:ee,hasEagerState:!1,eagerState:null,next:null};if(kl(V))Jc(z,me);else{var xe=V.alternate;if(V.lanes===0&&(xe===null||xe.lanes===0)&&(xe=z.lastRenderedReducer,xe!==null))try{var Ve=z.lastRenderedState,Ye=xe(Ve,ee);if(me.hasEagerState=!0,me.eagerState=Ye,Yr(Ye,Ve))return $r(V,z,me,0),Ui===null&&Is(),!1}catch{}finally{}if(ee=es(V,z,me,oe),ee!==null)return Nr(ee,V,oe),eu(ee,z,oe),!0}return!1}function ya(V,z,ee,oe){if(oe={lane:2,revertLane:ei(),gesture:null,action:oe,hasEagerState:!1,eagerState:null,next:null},kl(V)){if(z)throw Error(d(479))}else z=es(V,ee,oe,2),z!==null&&Nr(z,V,2)}function kl(V){var z=V.alternate;return V===Li||z!==null&&z===Li}function Jc(V,z){Fi=Bi=!0;var ee=V.pending;ee===null?z.next=z:(z.next=ee.next,ee.next=z),V.pending=z}function eu(V,z,ee){if((ee&4194048)!==0){var oe=z.lanes;oe&=V.pendingLanes,ee|=oe,z.lanes=ee,he(V,ee)}}function dc(V,z,ee,oe){z=V.memoizedState,ee=ee(oe,z),ee=ee==null?z:Yu({},z,ee),V.memoizedState=ee,V.lanes===0&&(V.updateQueue.baseState=ee)}function Co(V,z,ee,oe,me,xe,Ve){return V=V.stateNode,typeof V.shouldComponentUpdate=="function"?V.shouldComponentUpdate(oe,xe,Ve):z.prototype&&z.prototype.isPureReactComponent?!pn(ee,oe)||!pn(me,xe):!0}function Rs(V,z,ee,oe){V=z.state,typeof z.componentWillReceiveProps=="function"&&z.componentWillReceiveProps(ee,oe),typeof z.UNSAFE_componentWillReceiveProps=="function"&&z.UNSAFE_componentWillReceiveProps(ee,oe),z.state!==V&&wu.enqueueReplaceState(z,z.state,null)}function eo(V,z){var ee=z;if("ref"in z){ee={};for(var oe in z)oe!=="ref"&&(ee[oe]=z[oe])}if(V=V.defaultProps){ee===z&&(ee=Yu({},ee));for(var me in V)ee[me]===void 0&&(ee[me]=V[me])}return ee}function Dl(V,z){try{var ee=V.onUncaughtError;ee(z.value,{componentStack:z.stack})}catch(oe){setTimeout(function(){throw oe})}}function to(V,z,ee){try{var oe=V.onCaughtError;oe(ee.value,{componentStack:ee.stack,errorBoundary:z.tag===1?z.stateNode:null})}catch(me){setTimeout(function(){throw me})}}function ae(V,z,ee){return ee=We(ee),ee.tag=3,ee.payload={element:null},ee.callback=function(){Dl(V,z)},ee}function be(V){return V=We(V),V.tag=3,V}function Ce(V,z,ee,oe){var me=ee.type.getDerivedStateFromError;if(typeof me=="function"){var xe=oe.value;V.payload=function(){return me(xe)},V.callback=function(){to(z,ee,oe)}}var Ve=ee.stateNode;Ve!==null&&typeof Ve.componentDidCatch=="function"&&(V.callback=function(){to(z,ee,oe),typeof me!="function"&&($o===null?$o=new Set([this]):$o.add(this));var Ye=oe.stack;this.componentDidCatch(oe.value,{componentStack:Ye!==null?Ye:""})})}function Ue(V,z,ee,oe,me){if(ee.flags|=32768,oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){if(z=ee.alternate,z!==null&&An(z,ee,me,!0),ee=Js.current,ee!==null){switch(ee.tag){case 31:case 13:return ea===null?Sc():ee.alternate===null&&Br===0&&(Br=3),ee.flags&=-257,ee.flags|=65536,ee.lanes=me,oe===_o?ee.flags|=16384:(z=ee.updateQueue,z===null?ee.updateQueue=new Set([oe]):z.add(oe),Rc(V,oe,me)),!1;case 22:return ee.flags|=65536,oe===_o?ee.flags|=16384:(z=ee.updateQueue,z===null?(z={transitions:null,markerInstances:null,retryQueue:new Set([oe])},ee.updateQueue=z):(ee=z.retryQueue,ee===null?z.retryQueue=new Set([oe]):ee.add(oe)),Rc(V,oe,me)),!1}throw Error(d(435,ee.tag))}return Rc(V,oe,me),Sc(),!1}if($i)return z=Js.current,z!==null?((z.flags&65536)===0&&(z.flags|=256),z.flags|=65536,z.lanes=me,oe!==xh&&(V=Error(d(422),{cause:oe}),vn(Te(V,ee)))):(oe!==xh&&(z=Error(d(423),{cause:oe}),vn(Te(z,ee))),V=V.current.alternate,V.flags|=65536,me&=-me,V.lanes|=me,oe=Te(oe,ee),me=ae(V.stateNode,oe,me),yn(V,me),Br!==4&&(Br=2)),!1;var xe=Error(d(520),{cause:oe});if(xe=Te(xe,ee),Cu===null?Cu=[xe]:Cu.push(xe),Br!==4&&(Br=2),z===null)return!0;oe=Te(oe,ee),ee=z;do{switch(ee.tag){case 3:return ee.flags|=65536,V=me&-me,ee.lanes|=V,V=ae(ee.stateNode,oe,V),yn(ee,V),!1;case 1:if(z=ee.type,xe=ee.stateNode,(ee.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||xe!==null&&typeof xe.componentDidCatch=="function"&&($o===null||!$o.has(xe))))return ee.flags|=65536,me&=-me,ee.lanes|=me,me=be(me),Ce(me,V,ee,oe),yn(ee,me),!1}ee=ee.return}while(ee!==null);return!1}function xt(V,z,ee,oe){z.child=V===null?If(z,null,ee,oe):Ss(z,V.child,ee,oe)}function un(V,z,ee,oe,me){ee=ee.render;var xe=z.ref;if("ref"in oe){var Ve={};for(var Ye in oe)Ye!=="ref"&&(Ve[Ye]=oe[Ye])}else Ve=oe;return On(z),oe=li(V,z,ee,Ve,xe,me),Ye=Vi(),V!==null&&!wr?(Xi(V,z,me),no(V,z,me)):($i&&Ye&&De(z),z.flags|=1,xt(V,z,oe,me),z.child)}function ii(V,z,ee,oe,me){if(V===null){var xe=ee.type;return typeof xe=="function"&&!Ol(xe)&&xe.defaultProps===void 0&&ee.compare===null?(z.tag=15,z.type=xe,ki(V,z,xe,oe,me)):(V=Lo(ee.type,null,oe,z,z.mode,me),V.ref=z.ref,V.return=z,z.child=V)}if(xe=V.child,!tu(V,me)){var Ve=xe.memoizedProps;if(ee=ee.compare,ee=ee!==null?ee:pn,ee(Ve,oe)&&V.ref===z.ref)return no(V,z,me)}return z.flags|=1,V=la(xe,oe),V.ref=z.ref,V.return=z,z.child=V}function ki(V,z,ee,oe,me){if(V!==null){var xe=V.memoizedProps;if(pn(xe,oe)&&V.ref===z.ref)if(wr=!1,z.pendingProps=oe=xe,tu(V,me))(V.flags&131072)!==0&&(wr=!0);else return z.lanes=V.lanes,no(V,z,me)}return Po(V,z,ee,oe,me)}function jr(V,z,ee,oe){var me=oe.children,xe=V!==null?V.memoizedState:null;if(V===null&&z.stateNode===null&&(z.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),oe.mode==="hidden"){if((z.flags&128)!==0){if(xe=xe!==null?xe.baseLanes|ee:ee,V!==null){for(oe=z.child=V.child,me=0;oe!==null;)me=me|oe.lanes|oe.childLanes,oe=oe.sibling;oe=me&~xe}else oe=0,z.child=null;return Rr(V,z,xe,ee,oe)}if((ee&536870912)!==0)z.memoizedState={baseLanes:0,cachePool:null},V!==null&&Kn(z,xe!==null?xe.cachePool:null),xe!==null?Xn(z,xe):ke(),Je(z);else return oe=z.lanes=536870912,Rr(V,z,xe!==null?xe.baseLanes|ee:ee,ee,oe)}else xe!==null?(Kn(z,xe.cachePool),Xn(z,xe),En(),z.memoizedState=null):(V!==null&&Kn(z,null),ke(),En());return xt(V,z,me,ee),z.child}function Qi(V,z){return V!==null&&V.tag===22||z.stateNode!==null||(z.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),z.sibling}function Rr(V,z,ee,oe,me){var xe=Hn();return xe=xe===null?null:{parent:qr?Dr._currentValue:Dr._currentValue2,pool:xe},z.memoizedState={baseLanes:ee,cachePool:xe},V!==null&&Kn(z,null),ke(),Je(z),V!==null&&An(V,z,oe,!0),z.childLanes=me,null}function Vs(V,z){return z=tl({mode:z.mode,children:z.children},V.mode),z.ref=V.ref,V.child=z,z.return=V,z}function za(V,z,ee){return Ss(z,V.child,null,ee),V=Vs(z,z.pendingProps),V.flags|=2,Pn(z),z.memoizedState=null,V}function Ga(V,z,ee){var oe=z.pendingProps,me=(z.flags&128)!==0;if(z.flags&=-129,V===null){if($i){if(oe.mode==="hidden")return V=Vs(z,oe),z.lanes=536870912,Qi(null,V);if(Ze(z),(V=kr)?(V=mf(V,Bs),V!==null&&(z.memoizedState={dehydrated:V,treeContext:Ca!==null?{id:bs,overflow:Wa}:null,retryLane:536870912,hydrationErrors:null},ee=Hh(V),ee.return=z,z.child=ee,cs=z,kr=null)):V=null,V===null)throw hn(z);return z.lanes=536870912,null}return Vs(z,oe)}var xe=V.memoizedState;if(xe!==null){var Ve=xe.dehydrated;if(Ze(z),me)if(z.flags&256)z.flags&=-257,z=za(V,z,ee);else if(z.memoizedState!==null)z.child=V.child,z.flags|=128,z=null;else throw Error(d(558));else if(wr||An(V,z,ee,!1),me=(ee&V.childLanes)!==0,wr||me){if(oe=Ui,oe!==null&&(Ve=Se(oe,ee),Ve!==0&&Ve!==xe.retryLane))throw xe.retryLane=Ve,bi(V,Ve),Nr(oe,V,Ve),js;Sc(),z=za(V,z,ee)}else V=xe.treeContext,Ir&&(kr=Md(Ve),cs=z,$i=!0,xo=null,Bs=!1,V!==null&&He(z,V)),z=Vs(z,oe),z.flags|=4096;return z}return V=la(V.child,{mode:oe.mode,children:oe.children}),V.ref=z.ref,z.child=V,V.return=z,V}function Ws(V,z){var ee=z.ref;if(ee===null)V!==null&&V.ref!==null&&(z.flags|=4194816);else{if(typeof ee!="function"&&typeof ee!="object")throw Error(d(284));(V===null||V.ref!==ee)&&(z.flags|=4194816)}}function Po(V,z,ee,oe,me){return On(z),ee=li(V,z,ee,oe,void 0,me),oe=Vi(),V!==null&&!wr?(Xi(V,z,me),no(V,z,me)):($i&&oe&&De(z),z.flags|=1,xt(V,z,ee,me),z.child)}function Vl(V,z,ee,oe,me,xe){return On(z),z.updateQueue=null,ee=zn(z,oe,ee,me),mi(V),oe=Vi(),V!==null&&!wr?(Xi(V,z,xe),no(V,z,xe)):($i&&oe&&De(z),z.flags|=1,xt(V,z,ee,xe),z.child)}function Nl(V,z,ee,oe,me){if(On(z),z.stateNode===null){var xe=mo,Ve=ee.contextType;typeof Ve=="object"&&Ve!==null&&(xe=Be(Ve)),xe=new ee(oe,xe),z.memoizedState=xe.state!==null&&xe.state!==void 0?xe.state:null,xe.updater=wu,z.stateNode=xe,xe._reactInternals=z,xe=z.stateNode,xe.props=oe,xe.state=z.memoizedState,xe.refs={},Ie(z),Ve=ee.contextType,xe.context=typeof Ve=="object"&&Ve!==null?Be(Ve):mo,xe.state=z.memoizedState,Ve=ee.getDerivedStateFromProps,typeof Ve=="function"&&(dc(z,ee,Ve,oe),xe.state=z.memoizedState),typeof ee.getDerivedStateFromProps=="function"||typeof xe.getSnapshotBeforeUpdate=="function"||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(Ve=xe.state,typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount(),Ve!==xe.state&&wu.enqueueReplaceState(xe,xe.state,null),Dn(z,oe,xe,me),jn(),xe.state=z.memoizedState),typeof xe.componentDidMount=="function"&&(z.flags|=4194308),oe=!0}else if(V===null){xe=z.stateNode;var Ye=z.memoizedProps,gn=eo(ee,Ye);xe.props=gn;var Un=xe.context,ti=ee.contextType;Ve=mo,typeof ti=="object"&&ti!==null&&(Ve=Be(ti));var Wn=ee.getDerivedStateFromProps;ti=typeof Wn=="function"||typeof xe.getSnapshotBeforeUpdate=="function",Ye=z.pendingProps!==Ye,ti||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(Ye||Un!==Ve)&&Rs(z,xe,oe,Ve),ha=!1;var hi=z.memoizedState;xe.state=hi,Dn(z,oe,xe,me),jn(),Un=z.memoizedState,Ye||hi!==Un||ha?(typeof Wn=="function"&&(dc(z,ee,Wn,oe),Un=z.memoizedState),(gn=ha||Co(z,ee,gn,oe,hi,Un,Ve))?(ti||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount()),typeof xe.componentDidMount=="function"&&(z.flags|=4194308)):(typeof xe.componentDidMount=="function"&&(z.flags|=4194308),z.memoizedProps=oe,z.memoizedState=Un),xe.props=oe,xe.state=Un,xe.context=Ve,oe=gn):(typeof xe.componentDidMount=="function"&&(z.flags|=4194308),oe=!1)}else{xe=z.stateNode,Fe(V,z),Ve=z.memoizedProps,ti=eo(ee,Ve),xe.props=ti,Wn=z.pendingProps,hi=xe.context,Un=ee.contextType,gn=mo,typeof Un=="object"&&Un!==null&&(gn=Be(Un)),Ye=ee.getDerivedStateFromProps,(Un=typeof Ye=="function"||typeof xe.getSnapshotBeforeUpdate=="function")||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(Ve!==Wn||hi!==gn)&&Rs(z,xe,oe,gn),ha=!1,hi=z.memoizedState,xe.state=hi,Dn(z,oe,xe,me),jn();var Di=z.memoizedState;Ve!==Wn||hi!==Di||ha||V!==null&&V.dependencies!==null&&ri(V.dependencies)?(typeof Ye=="function"&&(dc(z,ee,Ye,oe),Di=z.memoizedState),(ti=ha||Co(z,ee,ti,oe,hi,Di,gn)||V!==null&&V.dependencies!==null&&ri(V.dependencies))?(Un||typeof xe.UNSAFE_componentWillUpdate!="function"&&typeof xe.componentWillUpdate!="function"||(typeof xe.componentWillUpdate=="function"&&xe.componentWillUpdate(oe,Di,gn),typeof xe.UNSAFE_componentWillUpdate=="function"&&xe.UNSAFE_componentWillUpdate(oe,Di,gn)),typeof xe.componentDidUpdate=="function"&&(z.flags|=4),typeof xe.getSnapshotBeforeUpdate=="function"&&(z.flags|=1024)):(typeof xe.componentDidUpdate!="function"||Ve===V.memoizedProps&&hi===V.memoizedState||(z.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||Ve===V.memoizedProps&&hi===V.memoizedState||(z.flags|=1024),z.memoizedProps=oe,z.memoizedState=Di),xe.props=oe,xe.state=Di,xe.context=gn,oe=ti):(typeof xe.componentDidUpdate!="function"||Ve===V.memoizedProps&&hi===V.memoizedState||(z.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||Ve===V.memoizedProps&&hi===V.memoizedState||(z.flags|=1024),oe=!1)}return xe=oe,Ws(V,z),oe=(z.flags&128)!==0,xe||oe?(xe=z.stateNode,ee=oe&&typeof ee.getDerivedStateFromError!="function"?null:xe.render(),z.flags|=1,V!==null&&oe?(z.child=Ss(z,V.child,null,me),z.child=Ss(z,null,ee,me)):xt(V,z,ee,me),z.memoizedState=xe.state,V=z.child):V=no(V,z,me),V}function Gf(V,z,ee,oe){return In(),z.flags|=256,xt(V,z,ee,oe),z.child}function Ch(V){return{baseLanes:V,cachePool:Bn()}}function Ph(V,z,ee){return V=V!==null?V.childLanes&~ee:0,z&&(V|=zs),V}function Ih(V,z,ee){var oe=z.pendingProps,me=!1,xe=(z.flags&128)!==0,Ve;if((Ve=xe)||(Ve=V!==null&&V.memoizedState===null?!1:(Gr.current&2)!==0),Ve&&(me=!0,z.flags&=-129),Ve=(z.flags&32)!==0,z.flags&=-33,V===null){if($i){if(me?Qe(z):En(),(V=kr)?(V=kd(V,Bs),V!==null&&(z.memoizedState={dehydrated:V,treeContext:Ca!==null?{id:bs,overflow:Wa}:null,retryLane:536870912,hydrationErrors:null},ee=Hh(V),ee.return=z,z.child=ee,cs=z,kr=null)):V=null,V===null)throw hn(z);return ih(V)?z.lanes=32:z.lanes=536870912,null}var Ye=oe.children;return oe=oe.fallback,me?(En(),me=z.mode,Ye=tl({mode:"hidden",children:Ye},me),oe=Ta(oe,me,ee,null),Ye.return=z,oe.return=z,Ye.sibling=oe,z.child=Ye,oe=z.child,oe.memoizedState=Ch(ee),oe.childLanes=Ph(V,Ve,ee),z.memoizedState=tc,Qi(null,oe)):(Qe(z),Vu(z,Ye))}var gn=V.memoizedState;if(gn!==null&&(Ye=gn.dehydrated,Ye!==null)){if(xe)z.flags&256?(Qe(z),z.flags&=-257,z=Ll(V,z,ee)):z.memoizedState!==null?(En(),z.child=V.child,z.flags|=128,z=null):(En(),Ye=oe.fallback,me=z.mode,oe=tl({mode:"visible",children:oe.children},me),Ye=Ta(Ye,me,ee,null),Ye.flags|=2,oe.return=z,Ye.return=z,oe.sibling=Ye,z.child=oe,Ss(z,V.child,null,ee),oe=z.child,oe.memoizedState=Ch(ee),oe.childLanes=Ph(V,Ve,ee),z.memoizedState=tc,z=Qi(null,oe));else if(Qe(z),ih(Ye))Ve=rh(Ye).digest,oe=Error(d(419)),oe.stack="",oe.digest=Ve,vn({value:oe,source:null,stack:null}),z=Ll(V,z,ee);else if(wr||An(V,z,ee,!1),Ve=(ee&V.childLanes)!==0,wr||Ve){if(Ve=Ui,Ve!==null&&(oe=Se(Ve,ee),oe!==0&&oe!==gn.retryLane))throw gn.retryLane=oe,bi(V,oe),Nr(Ve,V,oe),js;ml(Ye)||Sc(),z=Ll(V,z,ee)}else ml(Ye)?(z.flags|=192,z.child=V.child,z=null):(V=gn.treeContext,Ir&&(kr=Cd(Ye),cs=z,$i=!0,xo=null,Bs=!1,V!==null&&He(z,V)),z=Vu(z,oe.children),z.flags|=4096);return z}return me?(En(),Ye=oe.fallback,me=z.mode,gn=V.child,xe=gn.sibling,oe=la(gn,{mode:"hidden",children:oe.children}),oe.subtreeFlags=gn.subtreeFlags&65011712,xe!==null?Ye=la(xe,Ye):(Ye=Ta(Ye,me,ee,null),Ye.flags|=2),Ye.return=z,oe.return=z,oe.sibling=Ye,z.child=oe,Qi(null,oe),oe=z.child,Ye=V.child.memoizedState,Ye===null?Ye=Ch(ee):(me=Ye.cachePool,me!==null?(gn=qr?Dr._currentValue:Dr._currentValue2,me=me.parent!==gn?{parent:gn,pool:gn}:me):me=Bn(),Ye={baseLanes:Ye.baseLanes|ee,cachePool:me}),oe.memoizedState=Ye,oe.childLanes=Ph(V,Ve,ee),z.memoizedState=tc,Qi(V.child,oe)):(Qe(z),ee=V.child,V=ee.sibling,ee=la(ee,{mode:"visible",children:oe.children}),ee.return=z,ee.sibling=null,V!==null&&(Ve=z.deletions,Ve===null?(z.deletions=[V],z.flags|=16):Ve.push(V)),z.child=ee,z.memoizedState=null,ee)}function Vu(V,z){return z=tl({mode:"visible",children:z},V.mode),z.return=V,V.child=z}function tl(V,z){return V=s(22,V,null,z),V.lanes=0,V}function Ll(V,z,ee){return Ss(z,V.child,null,ee),V=Vu(z,z.pendingProps.children),V.flags|=2,z.memoizedState=null,V}function Hf(V,z,ee){V.lanes|=z;var oe=V.alternate;oe!==null&&(oe.lanes|=z),je(V.return,z,ee)}function pc(V,z,ee,oe,me,xe){var Ve=V.memoizedState;Ve===null?V.memoizedState={isBackwards:z,rendering:null,renderingStartTime:0,last:oe,tail:ee,tailMode:me,treeForkCount:xe}:(Ve.isBackwards=z,Ve.rendering=null,Ve.renderingStartTime=0,Ve.last=oe,Ve.tail=ee,Ve.tailMode=me,Ve.treeForkCount=xe)}function kh(V,z,ee){var oe=z.pendingProps,me=oe.revealOrder,xe=oe.tail;oe=oe.children;var Ve=Gr.current,Ye=(Ve&2)!==0;if(Ye?(Ve=Ve&1|2,z.flags|=128):Ve&=1,Q(Gr,Ve),xt(V,z,oe,ee),oe=$i?Tu:0,!Ye&&V!==null&&(V.flags&128)!==0)e:for(V=z.child;V!==null;){if(V.tag===13)V.memoizedState!==null&&Hf(V,ee,z);else if(V.tag===19)Hf(V,ee,z);else if(V.child!==null){V.child.return=V,V=V.child;continue}if(V===z)break e;for(;V.sibling===null;){if(V.return===null||V.return===z)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}switch(me){case"forwards":for(ee=z.child,me=null;ee!==null;)V=ee.alternate,V!==null&&kn(V)===null&&(me=ee),ee=ee.sibling;ee=me,ee===null?(me=z.child,z.child=null):(me=ee.sibling,ee.sibling=null),pc(z,!1,me,ee,xe,oe);break;case"backwards":case"unstable_legacy-backwards":for(ee=null,me=z.child,z.child=null;me!==null;){if(V=me.alternate,V!==null&&kn(V)===null){z.child=me;break}V=me.sibling,me.sibling=ee,ee=me,me=V}pc(z,!0,ee,null,xe,oe);break;case"together":pc(z,!1,null,null,void 0,oe);break;default:z.memoizedState=null}return z.child}function no(V,z,ee){if(V!==null&&(z.dependencies=V.dependencies),Wo|=z.lanes,(ee&z.childLanes)===0)if(V!==null){if(An(V,z,ee,!1),(ee&z.childLanes)===0)return null}else return null;if(V!==null&&z.child!==V.child)throw Error(d(153));if(z.child!==null){for(V=z.child,ee=la(V,V.pendingProps),z.child=ee,ee.return=z;V.sibling!==null;)V=V.sibling,ee=ee.sibling=la(V,V.pendingProps),ee.return=z;ee.sibling=null}return z.child}function tu(V,z){return(V.lanes&z)!==0?!0:(V=V.dependencies,!!(V!==null&&ri(V)))}function Dh(V,z,ee){switch(z.tag){case 3:yt(z,z.stateNode.containerInfo),dn(z,Dr,V.memoizedState.cache),In();break;case 27:case 5:lt(z);break;case 4:yt(z,z.stateNode.containerInfo);break;case 10:dn(z,z.type,z.memoizedProps.value);break;case 31:if(z.memoizedState!==null)return z.flags|=128,Ze(z),null;break;case 13:var oe=z.memoizedState;if(oe!==null)return oe.dehydrated!==null?(Qe(z),z.flags|=128,null):(ee&z.child.childLanes)!==0?Ih(V,z,ee):(Qe(z),V=no(V,z,ee),V!==null?V.sibling:null);Qe(z);break;case 19:var me=(V.flags&128)!==0;if(oe=(ee&z.childLanes)!==0,oe||(An(V,z,ee,!1),oe=(ee&z.childLanes)!==0),me){if(oe)return kh(V,z,ee);z.flags|=128}if(me=z.memoizedState,me!==null&&(me.rendering=null,me.tail=null,me.lastEffect=null),Q(Gr,Gr.current),oe)break;return null;case 22:return z.lanes=0,jr(V,z,ee,z.pendingProps);case 24:dn(z,Dr,V.memoizedState.cache)}return no(V,z,ee)}function Vh(V,z,ee){if(V!==null)if(V.memoizedProps!==z.pendingProps)wr=!0;else{if(!tu(V,ee)&&(z.flags&128)===0)return wr=!1,Dh(V,z,ee);wr=(V.flags&131072)!==0}else wr=!1,$i&&(z.flags&1048576)!==0&&ge(z,Tu,z.index);switch(z.lanes=0,z.tag){case 16:e:{var oe=z.pendingProps;if(V=ji(z.elementType),z.type=V,typeof V=="function")Ol(V)?(oe=eo(V,oe),z.tag=1,z=Nl(null,z,V,oe,ee)):(z.tag=0,z=Po(null,z,V,oe,ee));else{if(V!=null){var me=V.$$typeof;if(me===wc){z.tag=11,z=un(null,z,V,oe,ee);break e}else if(me===Zu){z.tag=14,z=ii(null,z,V,oe,ee);break e}}throw z=Y(V)||V,Error(d(306,z,""))}}return z;case 0:return Po(V,z,z.type,z.pendingProps,ee);case 1:return oe=z.type,me=eo(oe,z.pendingProps),Nl(V,z,oe,me,ee);case 3:e:{if(yt(z,z.stateNode.containerInfo),V===null)throw Error(d(387));var xe=z.pendingProps;me=z.memoizedState,oe=me.element,Fe(V,z),Dn(z,xe,null,ee);var Ve=z.memoizedState;if(xe=Ve.cache,dn(z,Dr,xe),xe!==me.cache&&qn(z,[Dr],ee,!0),jn(),xe=Ve.element,Ir&&me.isDehydrated)if(me={element:xe,isDehydrated:!1,cache:Ve.cache},z.updateQueue.baseState=me,z.memoizedState=me,z.flags&256){z=Gf(V,z,xe,ee);break e}else if(xe!==oe){oe=Te(Error(d(424)),z),vn(oe),z=Gf(V,z,xe,ee);break e}else for(Ir&&(kr=wd(z.stateNode.containerInfo),cs=z,$i=!0,xo=null,Bs=!0),ee=If(z,null,xe,ee),z.child=ee;ee;)ee.flags=ee.flags&-3|4096,ee=ee.sibling;else{if(In(),xe===oe){z=no(V,z,ee);break e}xt(V,z,xe,ee)}z=z.child}return z;case 26:if(wa)return Ws(V,z),V===null?(ee=vf(z.type,null,z.pendingProps,null))?z.memoizedState=ee:$i||(z.stateNode=lh(z.type,z.pendingProps,Es.current,z)):z.memoizedState=vf(z.type,V.memoizedProps,z.pendingProps,V.memoizedState),null;case 27:if(ls)return lt(z),V===null&&ls&&$i&&(oe=z.stateNode=ch(z.type,z.pendingProps,Es.current,xs.current,!1),cs=z,Bs=!0,kr=pf(z.type,oe,kr)),xt(V,z,z.pendingProps.children,ee),Ws(V,z),V===null&&(z.flags|=4194304),z.child;case 5:return V===null&&$i&&(jd(z.type,z.pendingProps,xs.current),(me=oe=kr)&&(oe=Pd(oe,z.type,z.pendingProps,Bs),oe!==null?(z.stateNode=oe,cs=z,kr=Rd(oe),Bs=!1,me=!0):me=!1),me||hn(z)),lt(z),me=z.type,xe=z.pendingProps,Ve=V!==null?V.memoizedProps:null,oe=xe.children,Os(me,xe)?oe=null:Ve!==null&&Os(me,Ve)&&(z.flags|=32),z.memoizedState!==null&&(me=li(V,z,di,null,null,ee),qr?ql._currentValue=me:ql._currentValue2=me),Ws(V,z),xt(V,z,oe,ee),z.child;case 6:return V===null&&$i&&(_f(z.pendingProps,xs.current),(V=ee=kr)&&(ee=Id(ee,z.pendingProps,Bs),ee!==null?(z.stateNode=ee,cs=z,kr=null,V=!0):V=!1),V||hn(z)),null;case 13:return Ih(V,z,ee);case 4:return yt(z,z.stateNode.containerInfo),oe=z.pendingProps,V===null?z.child=Ss(z,null,oe,ee):xt(V,z,oe,ee),z.child;case 11:return un(V,z,z.type,z.pendingProps,ee);case 7:return xt(V,z,z.pendingProps,ee),z.child;case 8:return xt(V,z,z.pendingProps.children,ee),z.child;case 12:return xt(V,z,z.pendingProps.children,ee),z.child;case 10:return oe=z.pendingProps,dn(z,z.type,oe.value),xt(V,z,oe.children,ee),z.child;case 9:return me=z.type._context,oe=z.pendingProps.children,On(z),me=Be(me),oe=oe(me),z.flags|=1,xt(V,z,oe,ee),z.child;case 14:return ii(V,z,z.type,z.pendingProps,ee);case 15:return ki(V,z,z.type,z.pendingProps,ee);case 19:return kh(V,z,ee);case 31:return Ga(V,z,ee);case 22:return jr(V,z,ee,z.pendingProps);case 24:return On(z),oe=Be(Dr),V===null?(me=Hn(),me===null&&(me=Ui,xe=Ft(),me.pooledCache=xe,xe.refCount++,xe!==null&&(me.pooledCacheLanes|=ee),me=xe),z.memoizedState={parent:oe,cache:me},Ie(z),dn(z,Dr,me)):((V.lanes&ee)!==0&&(Fe(V,z),Dn(z,null,null,ee),jn()),me=V.memoizedState,xe=z.memoizedState,me.parent!==oe?(me={parent:oe,cache:oe},z.memoizedState=me,z.lanes===0&&(z.memoizedState=z.updateQueue.baseState=me),dn(z,Dr,oe)):(oe=xe.cache,dn(z,Dr,oe),oe!==me.cache&&qn(z,[Dr],ee,!0))),xt(V,z,z.pendingProps.children,ee),z.child;case 29:throw z.pendingProps}throw Error(d(156,z.tag))}function xa(V){V.flags|=4}function nu(V){ca&&(V.flags|=8)}function Wf(V,z){if(V!==null&&V.child===z.child)return!1;if((z.flags&16)!==0)return!0;for(V=z.child;V!==null;){if((V.flags&8218)!==0||(V.subtreeFlags&8218)!==0)return!0;V=V.sibling}return!1}function Nh(V,z,ee,oe){if(Ki)for(ee=z.child;ee!==null;){if(ee.tag===5||ee.tag===6)gu(V,ee.stateNode);else if(!(ee.tag===4||ls&&ee.tag===27)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===z)break;for(;ee.sibling===null;){if(ee.return===null||ee.return===z)return;ee=ee.return}ee.sibling.return=ee.return,ee=ee.sibling}else if(ca)for(var me=z.child;me!==null;){if(me.tag===5){var xe=me.stateNode;ee&&oe&&(xe=Ed(xe,me.type,me.memoizedProps)),gu(V,xe)}else if(me.tag===6)xe=me.stateNode,ee&&oe&&(xe=ff(xe,me.memoizedProps)),gu(V,xe);else if(me.tag!==4){if(me.tag===22&&me.memoizedState!==null)xe=me.child,xe!==null&&(xe.return=me),Nh(V,me,!0,!0);else if(me.child!==null){me.child.return=me,me=me.child;continue}}if(me===z)break;for(;me.sibling===null;){if(me.return===null||me.return===z)return;me=me.return}me.sibling.return=me.return,me=me.sibling}}function $f(V,z,ee,oe){var me=!1;if(ca)for(var xe=z.child;xe!==null;){if(xe.tag===5){var Ve=xe.stateNode;ee&&oe&&(Ve=Ed(Ve,xe.type,xe.memoizedProps)),uf(V,Ve)}else if(xe.tag===6)Ve=xe.stateNode,ee&&oe&&(Ve=ff(Ve,xe.memoizedProps)),uf(V,Ve);else if(xe.tag!==4){if(xe.tag===22&&xe.memoizedState!==null)me=xe.child,me!==null&&(me.return=xe),$f(V,xe,!0,!0),me=!0;else if(xe.child!==null){xe.child.return=xe,xe=xe.child;continue}}if(xe===z)break;for(;xe.sibling===null;){if(xe.return===null||xe.return===z)return me;xe=xe.return}xe.sibling.return=xe.return,xe=xe.sibling}return me}function qf(V,z){if(ca&&Wf(V,z)){V=z.stateNode;var ee=V.containerInfo,oe=cf();$f(oe,z,!1,!1),V.pendingChildren=oe,xa(z),bd(ee,oe)}}function Lh(V,z,ee,oe){if(Ki)V.memoizedProps!==oe&&xa(z);else if(ca){var me=V.stateNode,xe=V.memoizedProps;if((V=Wf(V,z))||xe!==oe){var Ve=xs.current;xe=vd(me,ee,xe,oe,!V,null),xe===me?z.stateNode=me:(nu(z),Ys(xe,ee,oe,Ve)&&xa(z),z.stateNode=xe,V&&Nh(xe,z,!1,!1))}else z.stateNode=me}}function Ns(V,z,ee,oe,me){if((V.mode&32)!==0&&(ee===null?yu(z,oe):kc(z,ee,oe))){if(V.flags|=16777216,(me&335544128)===me||Zh(z,oe))if(Lr(V.stateNode,z,oe))V.flags|=8192;else if(Yi())V.flags|=8192;else throw Us=_o,bh}else V.flags&=-16777217}function mc(V,z){if(Tf(z)){if(V.flags|=16777216,!Af(z))if(Yi())V.flags|=8192;else throw Us=_o,bh}else V.flags&=-16777217}function iu(V,z){z!==null&&(V.flags|=4),V.flags&16384&&(z=V.tag!==22?le():536870912,V.lanes|=z,jc|=z)}function gc(V,z){if(!$i)switch(V.tailMode){case"hidden":z=V.tail;for(var ee=null;z!==null;)z.alternate!==null&&(ee=z),z=z.sibling;ee===null?V.tail=null:ee.sibling=null;break;case"collapsed":ee=V.tail;for(var oe=null;ee!==null;)ee.alternate!==null&&(oe=ee),ee=ee.sibling;oe===null?z||V.tail===null?V.tail=null:V.tail.sibling=null:oe.sibling=null}}function vr(V){var z=V.alternate!==null&&V.alternate.child===V.child,ee=0,oe=0;if(z)for(var me=V.child;me!==null;)ee|=me.lanes|me.childLanes,oe|=me.subtreeFlags&65011712,oe|=me.flags&65011712,me.return=V,me=me.sibling;else for(me=V.child;me!==null;)ee|=me.lanes|me.childLanes,oe|=me.subtreeFlags,oe|=me.flags,me.return=V,me=me.sibling;return V.subtreeFlags|=oe,V.childLanes=ee,z}function Xf(V,z,ee){var oe=z.pendingProps;switch(ze(z),z.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vr(z),null;case 1:return vr(z),null;case 3:return ee=z.stateNode,oe=null,V!==null&&(oe=V.memoizedState.cache),z.memoizedState.cache!==oe&&(z.flags|=2048),Mn(Dr),Ge(),ee.pendingContext&&(ee.context=ee.pendingContext,ee.pendingContext=null),(V===null||V.child===null)&&(ni(z)?xa(z):V===null||V.memoizedState.isDehydrated&&(z.flags&256)===0||(z.flags|=1024,qe())),qf(V,z),vr(z),null;case 26:if(wa){var me=z.type,xe=z.memoizedState;return V===null?(xa(z),xe!==null?(vr(z),mc(z,xe)):(vr(z),Ns(z,me,null,oe,ee))):xe?xe!==V.memoizedState?(xa(z),vr(z),mc(z,xe)):(vr(z),z.flags&=-16777217):(xe=V.memoizedProps,Ki?xe!==oe&&xa(z):Lh(V,z,me,oe),vr(z),Ns(z,me,xe,oe,ee)),null}case 27:if(ls){if(Mt(z),ee=Es.current,me=z.type,V!==null&&z.stateNode!=null)Ki?V.memoizedProps!==oe&&xa(z):Lh(V,z,me,oe);else{if(!oe){if(z.stateNode===null)throw Error(d(166));return vr(z),null}V=xs.current,ni(z)?Fn(z,V):(V=ch(me,oe,ee,V,!0),z.stateNode=V,xa(z))}return vr(z),null}case 5:if(Mt(z),me=z.type,V!==null&&z.stateNode!=null)Lh(V,z,me,oe);else{if(!oe){if(z.stateNode===null)throw Error(d(166));return vr(z),null}if(xe=xs.current,ni(z))Fn(z,xe),Od(z.stateNode,me,oe,xe)&&(z.flags|=64);else{var Ve=Yh(me,oe,Es.current,xe,z);nu(z),Nh(Ve,z,!1,!1),z.stateNode=Ve,Ys(Ve,me,oe,xe)&&xa(z)}}return vr(z),Ns(z,z.type,V===null?null:V.memoizedProps,z.pendingProps,ee),null;case 6:if(V&&z.stateNode!=null)ee=V.memoizedProps,Ki?ee!==oe&&xa(z):ca&&(ee!==oe?(V=Es.current,ee=xs.current,nu(z),z.stateNode=Bo(oe,V,ee,z)):z.stateNode=V.stateNode);else{if(typeof oe!="string"&&z.stateNode===null)throw Error(d(166));if(V=Es.current,ee=xs.current,ni(z)){if(!Ir)throw Error(d(176));if(V=z.stateNode,ee=z.memoizedProps,oe=null,me=cs,me!==null)switch(me.tag){case 27:case 5:oe=me.memoizedProps}xp(V,ee,z,oe)||hn(z,!0)}else nu(z),z.stateNode=Bo(oe,V,ee,z)}return vr(z),null;case 31:if(ee=z.memoizedState,V===null||V.memoizedState!==null){if(oe=ni(z),ee!==null){if(V===null){if(!oe)throw Error(d(318));if(!Ir)throw Error(d(556));if(V=z.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(d(557));gf(V,z)}else In(),(z.flags&128)===0&&(z.memoizedState=null),z.flags|=4;vr(z),V=!1}else ee=qe(),V!==null&&V.memoizedState!==null&&(V.memoizedState.hydrationErrors=ee),V=!0;if(!V)return z.flags&256?(Pn(z),z):(Pn(z),null);if((z.flags&128)!==0)throw Error(d(558))}return vr(z),null;case 13:if(oe=z.memoizedState,V===null||V.memoizedState!==null&&V.memoizedState.dehydrated!==null){if(me=ni(z),oe!==null&&oe.dehydrated!==null){if(V===null){if(!me)throw Error(d(318));if(!Ir)throw Error(d(344));if(me=z.memoizedState,me=me!==null?me.dehydrated:null,!me)throw Error(d(317));Vd(me,z)}else In(),(z.flags&128)===0&&(z.memoizedState=null),z.flags|=4;vr(z),me=!1}else me=qe(),V!==null&&V.memoizedState!==null&&(V.memoizedState.hydrationErrors=me),me=!0;if(!me)return z.flags&256?(Pn(z),z):(Pn(z),null)}return Pn(z),(z.flags&128)!==0?(z.lanes=ee,z):(ee=oe!==null,V=V!==null&&V.memoizedState!==null,ee&&(oe=z.child,me=null,oe.alternate!==null&&oe.alternate.memoizedState!==null&&oe.alternate.memoizedState.cachePool!==null&&(me=oe.alternate.memoizedState.cachePool.pool),xe=null,oe.memoizedState!==null&&oe.memoizedState.cachePool!==null&&(xe=oe.memoizedState.cachePool.pool),xe!==me&&(oe.flags|=2048)),ee!==V&&ee&&(z.child.flags|=8192),iu(z,z.updateQueue),vr(z),null);case 4:return Ge(),qf(V,z),V===null&&gr(z.stateNode.containerInfo),vr(z),null;case 10:return Mn(z.type),vr(z),null;case 19:if(K(Gr),oe=z.memoizedState,oe===null)return vr(z),null;if(me=(z.flags&128)!==0,xe=oe.rendering,xe===null)if(me)gc(oe,!1);else{if(Br!==0||V!==null&&(V.flags&128)!==0)for(V=z.child;V!==null;){if(xe=kn(V),xe!==null){for(z.flags|=128,gc(oe,!1),V=xe.updateQueue,z.updateQueue=V,iu(z,V),z.subtreeFlags=0,V=ee,ee=z.child;ee!==null;)$u(ee,V),ee=ee.sibling;return Q(Gr,Gr.current&1|2),$i&&we(z,oe.treeForkCount),z.child}V=V.sibling}oe.tail!==null&&Ms()>Rl&&(z.flags|=128,me=!0,gc(oe,!1),z.lanes=4194304)}else{if(!me)if(V=kn(xe),V!==null){if(z.flags|=128,me=!0,V=V.updateQueue,z.updateQueue=V,iu(z,V),gc(oe,!0),oe.tail===null&&oe.tailMode==="hidden"&&!xe.alternate&&!$i)return vr(z),null}else 2*Ms()-oe.renderingStartTime>Rl&&ee!==536870912&&(z.flags|=128,me=!0,gc(oe,!1),z.lanes=4194304);oe.isBackwards?(xe.sibling=z.child,z.child=xe):(V=oe.last,V!==null?V.sibling=xe:z.child=xe,oe.last=xe)}return oe.tail!==null?(V=oe.tail,oe.rendering=V,oe.tail=V.sibling,oe.renderingStartTime=Ms(),V.sibling=null,ee=Gr.current,Q(Gr,me?ee&1|2:ee&1),$i&&we(z,oe.treeForkCount),V):(vr(z),null);case 22:case 23:return Pn(z),Xe(),oe=z.memoizedState!==null,V!==null?V.memoizedState!==null!==oe&&(z.flags|=8192):oe&&(z.flags|=8192),oe?(ee&536870912)!==0&&(z.flags&128)===0&&(vr(z),z.subtreeFlags&6&&(z.flags|=8192)):vr(z),ee=z.updateQueue,ee!==null&&iu(z,ee.retryQueue),ee=null,V!==null&&V.memoizedState!==null&&V.memoizedState.cachePool!==null&&(ee=V.memoizedState.cachePool.pool),oe=null,z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(oe=z.memoizedState.cachePool.pool),oe!==ee&&(z.flags|=2048),V!==null&&K(xl),null;case 24:return ee=null,V!==null&&(ee=V.memoizedState.cache),z.memoizedState.cache!==ee&&(z.flags|=2048),Mn(Dr),vr(z),null;case 25:return null;case 30:return null}throw Error(d(156,z.tag))}function Fh(V,z){switch(ze(z),z.tag){case 1:return V=z.flags,V&65536?(z.flags=V&-65537|128,z):null;case 3:return Mn(Dr),Ge(),V=z.flags,(V&65536)!==0&&(V&128)===0?(z.flags=V&-65537|128,z):null;case 26:case 27:case 5:return Mt(z),null;case 31:if(z.memoizedState!==null){if(Pn(z),z.alternate===null)throw Error(d(340));In()}return V=z.flags,V&65536?(z.flags=V&-65537|128,z):null;case 13:if(Pn(z),V=z.memoizedState,V!==null&&V.dehydrated!==null){if(z.alternate===null)throw Error(d(340));In()}return V=z.flags,V&65536?(z.flags=V&-65537|128,z):null;case 19:return K(Gr),null;case 4:return Ge(),null;case 10:return Mn(z.type),null;case 22:case 23:return Pn(z),Xe(),V!==null&&K(xl),V=z.flags,V&65536?(z.flags=V&-65537|128,z):null;case 24:return Mn(Dr),null;case 25:return null;default:return null}}function Yf(V,z){switch(ze(z),z.tag){case 3:Mn(Dr),Ge();break;case 26:case 27:case 5:Mt(z);break;case 4:Ge();break;case 31:z.memoizedState!==null&&Pn(z);break;case 13:Pn(z);break;case 19:K(Gr);break;case 10:Mn(z.type);break;case 22:case 23:Pn(z),Xe(),V!==null&&K(xl);break;case 24:Mn(Dr)}}function io(V,z){try{var ee=z.updateQueue,oe=ee!==null?ee.lastEffect:null;if(oe!==null){var me=oe.next;ee=me;do{if((ee.tag&V)===V){oe=void 0;var xe=ee.create,Ve=ee.inst;oe=xe(),Ve.destroy=oe}ee=ee.next}while(ee!==me)}}catch(Ye){Ci(z,z.return,Ye)}}function ro(V,z,ee){try{var oe=z.updateQueue,me=oe!==null?oe.lastEffect:null;if(me!==null){var xe=me.next;oe=xe;do{if((oe.tag&V)===V){var Ve=oe.inst,Ye=Ve.destroy;if(Ye!==void 0){Ve.destroy=void 0,me=z;var gn=ee,Un=Ye;try{Un()}catch(ti){Ci(me,gn,ti)}}}oe=oe.next}while(oe!==xe)}}catch(ti){Ci(z,z.return,ti)}}function yc(V){var z=V.updateQueue;if(z!==null){var ee=V.stateNode;try{$n(z,ee)}catch(oe){Ci(V,V.return,oe)}}}function Nu(V,z,ee){ee.props=eo(V.type,V.memoizedProps),ee.state=V.memoizedState;try{ee.componentWillUnmount()}catch(oe){Ci(V,z,oe)}}function xc(V,z){try{var ee=V.ref;if(ee!==null){switch(V.tag){case 26:case 27:case 5:var oe=Cc(V.stateNode);break;case 30:oe=V.stateNode;break;default:oe=V.stateNode}typeof ee=="function"?V.refCleanup=ee(oe):ee.current=oe}}catch(me){Ci(V,z,me)}}function ws(V,z){var ee=V.ref,oe=V.refCleanup;if(ee!==null)if(typeof oe=="function")try{oe()}catch(me){Ci(V,z,me)}finally{V.refCleanup=null,V=V.alternate,V!=null&&(V.refCleanup=null)}else if(typeof ee=="function")try{ee(null)}catch(me){Ci(V,z,me)}else ee.current=null}function Fl(V){var z=V.type,ee=V.memoizedProps,oe=V.stateNode;try{hd(oe,z,ee,V)}catch(me){Ci(V,V.return,me)}}function ru(V,z,ee){try{dd(V.stateNode,V.type,ee,z,V)}catch(oe){Ci(V,V.return,oe)}}function Oh(V){return V.tag===5||V.tag===3||(wa?V.tag===26:!1)||(ls?V.tag===27&&Xl(V.type):!1)||V.tag===4}function Io(V){e:for(;;){for(;V.sibling===null;){if(V.return===null||Oh(V.return))return null;V=V.return}for(V.sibling.return=V.return,V=V.sibling;V.tag!==5&&V.tag!==6&&V.tag!==18;){if(ls&&V.tag===27&&Xl(V.type)||V.flags&2||V.child===null||V.tag===4)continue e;V.child.return=V,V=V.child}if(!(V.flags&2))return V.stateNode}}function Lu(V,z,ee){var oe=V.tag;if(oe===5||oe===6)V=V.stateNode,z?md(ee,V,z):sf(ee,V);else if(oe!==4&&(ls&&oe===27&&Xl(V.type)&&(ee=V.stateNode,z=null),V=V.child,V!==null))for(Lu(V,z,ee),V=V.sibling;V!==null;)Lu(V,z,ee),V=V.sibling}function su(V,z,ee){var oe=V.tag;if(oe===5||oe===6)V=V.stateNode,z?pd(ee,V,z):rf(ee,V);else if(oe!==4&&(ls&&oe===27&&Xl(V.type)&&(ee=V.stateNode),V=V.child,V!==null))for(su(V,z,ee),V=V.sibling;V!==null;)su(V,z,ee),V=V.sibling}function Bh(V,z,ee){V=V.containerInfo;try{hf(V,ee)}catch(oe){Ci(z,z.return,oe)}}function Kf(V){var z=V.stateNode,ee=V.memoizedProps;try{ns(V.type,ee,z,V)}catch(oe){Ci(V,V.return,oe)}}function pp(V,z){for(Qu(V.containerInfo),Kr=z;Kr!==null;)if(V=Kr,z=V.child,(V.subtreeFlags&1028)!==0&&z!==null)z.return=V,Kr=z;else for(;Kr!==null;){V=Kr;var ee=V.alternate;switch(z=V.flags,V.tag){case 0:if((z&4)!==0&&(z=V.updateQueue,z=z!==null?z.events:null,z!==null))for(var oe=0;oe<z.length;oe++){var me=z[oe];me.ref.impl=me.nextImpl}break;case 11:case 15:break;case 1:if((z&1024)!==0&&ee!==null){z=void 0,oe=V,me=ee.memoizedProps,ee=ee.memoizedState;var xe=oe.stateNode;try{var Ve=eo(oe.type,me);z=xe.getSnapshotBeforeUpdate(Ve,ee),xe.__reactInternalSnapshotBeforeUpdate=z}catch(Ye){Ci(oe,oe.return,Ye)}}break;case 3:(z&1024)!==0&&Ki&&lf(V.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((z&1024)!==0)throw Error(d(163))}if(z=V.sibling,z!==null){z.return=V.return,Kr=z;break}Kr=V.return}}function Zf(V,z,ee){var oe=ee.flags;switch(ee.tag){case 0:case 11:case 15:Ls(V,ee),oe&4&&io(5,ee);break;case 1:if(Ls(V,ee),oe&4)if(V=ee.stateNode,z===null)try{V.componentDidMount()}catch(Ve){Ci(ee,ee.return,Ve)}else{var me=eo(ee.type,z.memoizedProps);z=z.memoizedState;try{V.componentDidUpdate(me,z,V.__reactInternalSnapshotBeforeUpdate)}catch(Ve){Ci(ee,ee.return,Ve)}}oe&64&&yc(ee),oe&512&&xc(ee,ee.return);break;case 3:if(Ls(V,ee),oe&64&&(oe=ee.updateQueue,oe!==null)){if(V=null,ee.child!==null)switch(ee.child.tag){case 27:case 5:V=Cc(ee.child.stateNode);break;case 1:V=ee.child.stateNode}try{$n(oe,V)}catch(Ve){Ci(ee,ee.return,Ve)}}break;case 27:ls&&z===null&&oe&4&&Kf(ee);case 26:case 5:if(Ls(V,ee),z===null){if(oe&4)Fl(ee);else if(oe&64){V=ee.type,z=ee.memoizedProps,me=ee.stateNode;try{Ld(me,V,z,ee)}catch(Ve){Ci(ee,ee.return,Ve)}}}oe&512&&xc(ee,ee.return);break;case 12:Ls(V,ee);break;case 31:Ls(V,ee),oe&4&&ba(V,ee);break;case 13:Ls(V,ee),oe&4&&ou(V,ee),oe&64&&(oe=ee.memoizedState,oe!==null&&(oe=oe.dehydrated,oe!==null&&(ee=mp.bind(null,ee),sh(oe,ee))));break;case 22:if(oe=ee.memoizedState!==null||Hr,!oe){z=z!==null&&z.memoizedState!==null||Wr,me=Hr;var xe=Wr;Hr=oe,(Wr=z)&&!xe?Sa(V,ee,(ee.subtreeFlags&8772)!==0):Ls(V,ee),Hr=me,Wr=xe}break;case 30:break;default:Ls(V,ee)}}function Uh(V){var z=V.alternate;z!==null&&(V.alternate=null,Uh(z)),V.child=null,V.deletions=null,V.sibling=null,V.tag===5&&(z=V.stateNode,z!==null&&Ju(z)),V.stateNode=null,V.return=null,V.dependencies=null,V.memoizedProps=null,V.memoizedState=null,V.pendingProps=null,V.stateNode=null,V.updateQueue=null}function va(V,z,ee){for(ee=ee.child;ee!==null;)au(V,z,ee),ee=ee.sibling}function au(V,z,ee){if(Qs&&typeof Qs.onCommitFiberUnmount=="function")try{Qs.onCommitFiberUnmount(Zl,ee)}catch{}switch(ee.tag){case 26:if(wa){Wr||ws(ee,z),va(V,z,ee),ee.memoizedState?gl(ee.memoizedState):ee.stateNode&&Sf(ee.stateNode);break}case 27:if(ls){Wr||ws(ee,z);var oe=Or,me=Zr;Xl(ee.type)&&(Or=ee.stateNode,Zr=!1),va(V,z,ee),ys(ee.stateNode),Or=oe,Zr=me;break}case 5:Wr||ws(ee,z);case 6:if(Ki){if(oe=Or,me=Zr,Or=null,va(V,z,ee),Or=oe,Zr=me,Or!==null)if(Zr)try{af(Or,ee.stateNode)}catch(xe){Ci(ee,z,xe)}else try{gd(Or,ee.stateNode)}catch(xe){Ci(ee,z,xe)}}else va(V,z,ee);break;case 18:Ki&&Or!==null&&(Zr?ah(Or,ee.stateNode):xf(Or,ee.stateNode));break;case 4:Ki?(oe=Or,me=Zr,Or=ee.stateNode.containerInfo,Zr=!0,va(V,z,ee),Or=oe,Zr=me):(ca&&Bh(ee.stateNode,ee,cf()),va(V,z,ee));break;case 0:case 11:case 14:case 15:ro(2,ee,z),Wr||ro(4,ee,z),va(V,z,ee);break;case 1:Wr||(ws(ee,z),oe=ee.stateNode,typeof oe.componentWillUnmount=="function"&&Nu(ee,z,oe)),va(V,z,ee);break;case 21:va(V,z,ee);break;case 22:Wr=(oe=Wr)||ee.memoizedState!==null,va(V,z,ee),Wr=oe;break;default:va(V,z,ee)}}function ba(V,z){if(Ir&&z.memoizedState===null&&(V=z.alternate,V!==null&&(V=V.memoizedState,V!==null))){V=V.dehydrated;try{_p(V)}catch(ee){Ci(z,z.return,ee)}}}function ou(V,z){if(Ir&&z.memoizedState===null&&(V=z.alternate,V!==null&&(V=V.memoizedState,V!==null&&(V=V.dehydrated,V!==null))))try{vp(V)}catch(ee){Ci(z,z.return,ee)}}function Ea(V){switch(V.tag){case 31:case 13:case 19:var z=V.stateNode;return z===null&&(z=V.stateNode=new Df),z;case 22:return V=V.stateNode,z=V._retryCache,z===null&&(z=V._retryCache=new Df),z;default:throw Error(d(435,V.tag))}}function ko(V,z){var ee=Ea(V);z.forEach(function(oe){if(!ee.has(oe)){ee.add(oe);var me=gp.bind(null,V,oe);oe.then(me,me)}})}function ms(V,z){var ee=z.deletions;if(ee!==null)for(var oe=0;oe<ee.length;oe++){var me=ee[oe],xe=V,Ve=z;if(Ki){var Ye=Ve;e:for(;Ye!==null;){switch(Ye.tag){case 27:if(ls){if(Xl(Ye.type)){Or=Ye.stateNode,Zr=!1;break e}break}case 5:Or=Ye.stateNode,Zr=!1;break e;case 3:case 4:Or=Ye.stateNode.containerInfo,Zr=!0;break e}Ye=Ye.return}if(Or===null)throw Error(d(160));au(xe,Ve,me),Or=null,Zr=!1}else au(xe,Ve,me);xe=me.alternate,xe!==null&&(xe.return=null),me.return=null}if(z.subtreeFlags&13886)for(z=z.child;z!==null;)lu(z,V),z=z.sibling}function lu(V,z){var ee=V.alternate,oe=V.flags;switch(V.tag){case 0:case 11:case 14:case 15:ms(z,V),gs(V),oe&4&&(ro(3,V,V.return),io(3,V),ro(5,V,V.return));break;case 1:ms(z,V),gs(V),oe&512&&(Wr||ee===null||ws(ee,ee.return)),oe&64&&Hr&&(V=V.updateQueue,V!==null&&(oe=V.callbacks,oe!==null&&(ee=V.shared.hiddenCallbacks,V.shared.hiddenCallbacks=ee===null?oe:ee.concat(oe))));break;case 26:if(wa){var me=hr;if(ms(z,V),gs(V),oe&512&&(Wr||ee===null||ws(ee,ee.return)),oe&4){oe=ee!==null?ee.memoizedState:null;var xe=V.memoizedState;ee===null?xe===null?V.stateNode===null?V.stateNode=zd(me,V.type,V.memoizedProps,V):Ef(me,V.type,V.stateNode):V.stateNode=bf(me,xe,V.memoizedProps):oe!==xe?(oe===null?ee.stateNode!==null&&Sf(ee.stateNode):gl(oe),xe===null?Ef(me,V.type,V.stateNode):bf(me,xe,V.memoizedProps)):xe===null&&V.stateNode!==null&&ru(V,V.memoizedProps,ee.memoizedProps)}break}case 27:if(ls){ms(z,V),gs(V),oe&512&&(Wr||ee===null||ws(ee,ee.return)),ee!==null&&oe&4&&ru(V,V.memoizedProps,ee.memoizedProps);break}case 5:if(ms(z,V),gs(V),oe&512&&(Wr||ee===null||ws(ee,ee.return)),Ki){if(V.flags&32){me=V.stateNode;try{of(me)}catch(Wn){Ci(V,V.return,Wn)}}oe&4&&V.stateNode!=null&&(me=V.memoizedProps,ru(V,me,ee!==null?ee.memoizedProps:me)),oe&1024&&(Lc=!0)}else ca&&V.alternate!==null&&(V.alternate.stateNode=V.stateNode);break;case 6:if(ms(z,V),gs(V),oe&4&&Ki){if(V.stateNode===null)throw Error(d(162));oe=V.memoizedProps,ee=ee!==null?ee.memoizedProps:oe,me=V.stateNode;try{ud(me,ee,oe)}catch(Wn){Ci(V,V.return,Wn)}}break;case 3:if(wa?(Gd(),me=hr,hr=vu(z.containerInfo),ms(z,V),hr=me):ms(z,V),gs(V),oe&4){if(Ki&&Ir&&ee!==null&&ee.memoizedState.isDehydrated)try{Fd(z.containerInfo)}catch(Wn){Ci(V,V.return,Wn)}if(ca){oe=z.containerInfo,ee=z.pendingChildren;try{hf(oe,ee)}catch(Wn){Ci(V,V.return,Wn)}}}Lc&&(Lc=!1,Fu(V));break;case 4:wa?(ee=hr,hr=vu(V.stateNode.containerInfo),ms(z,V),gs(V),hr=ee):(ms(z,V),gs(V)),oe&4&&ca&&Bh(V.stateNode,V,V.stateNode.pendingChildren);break;case 12:ms(z,V),gs(V);break;case 31:ms(z,V),gs(V),oe&4&&(oe=V.updateQueue,oe!==null&&(V.updateQueue=null,ko(V,oe)));break;case 13:ms(z,V),gs(V),V.child.flags&8192&&V.memoizedState!==null!=(ee!==null&&ee.memoizedState!==null)&&(Pu=Ms()),oe&4&&(oe=V.updateQueue,oe!==null&&(V.updateQueue=null,ko(V,oe)));break;case 22:me=V.memoizedState!==null;var Ve=ee!==null&&ee.memoizedState!==null,Ye=Hr,gn=Wr;if(Hr=Ye||me,Wr=gn||Ve,ms(z,V),Wr=gn,Hr=Ye,gs(V),oe&8192&&(z=V.stateNode,z._visibility=me?z._visibility&-2:z._visibility|1,me&&(ee===null||Ve||Hr||Wr||nl(V)),Ki)){e:if(ee=null,Ki)for(z=V;;){if(z.tag===5||wa&&z.tag===26){if(ee===null){Ve=ee=z;try{xe=Ve.stateNode,me?yp(xe):xd(Ve.stateNode,Ve.memoizedProps)}catch(Wn){Ci(Ve,Ve.return,Wn)}}}else if(z.tag===6){if(ee===null){Ve=z;try{var Un=Ve.stateNode;me?yd(Un):_d(Un,Ve.memoizedProps)}catch(Wn){Ci(Ve,Ve.return,Wn)}}}else if(z.tag===18){if(ee===null){Ve=z;try{var ti=Ve.stateNode;me?Bd(ti):Ud(Ve.stateNode)}catch(Wn){Ci(Ve,Ve.return,Wn)}}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===V)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===V)break e;for(;z.sibling===null;){if(z.return===null||z.return===V)break e;ee===z&&(ee=null),z=z.return}ee===z&&(ee=null),z.sibling.return=z.return,z=z.sibling}}oe&4&&(oe=V.updateQueue,oe!==null&&(ee=oe.retryQueue,ee!==null&&(oe.retryQueue=null,ko(V,ee))));break;case 19:ms(z,V),gs(V),oe&4&&(oe=V.updateQueue,oe!==null&&(V.updateQueue=null,ko(V,oe)));break;case 30:break;case 21:break;default:ms(z,V),gs(V)}}function gs(V){var z=V.flags;if(z&2){try{for(var ee,oe=V.return;oe!==null;){if(Oh(oe)){ee=oe;break}oe=oe.return}if(Ki){if(ee==null)throw Error(d(160));switch(ee.tag){case 27:if(ls){var me=ee.stateNode,xe=Io(V);su(V,xe,me);break}case 5:var Ve=ee.stateNode;ee.flags&32&&(of(Ve),ee.flags&=-33);var Ye=Io(V);su(V,Ye,Ve);break;case 3:case 4:var gn=ee.stateNode.containerInfo,Un=Io(V);Lu(V,Un,gn);break;default:throw Error(d(161))}}}catch(ti){Ci(V,V.return,ti)}V.flags&=-3}z&4096&&(V.flags&=-4097)}function Fu(V){if(V.subtreeFlags&1024)for(V=V.child;V!==null;){var z=V;Fu(z),z.tag===5&&z.flags&1024&&Jh(z.stateNode),V=V.sibling}}function Ls(V,z){if(z.subtreeFlags&8772)for(z=z.child;z!==null;)Zf(V,z.alternate,z),z=z.sibling}function nl(V){for(V=V.child;V!==null;){var z=V;switch(z.tag){case 0:case 11:case 14:case 15:ro(4,z,z.return),nl(z);break;case 1:ws(z,z.return);var ee=z.stateNode;typeof ee.componentWillUnmount=="function"&&Nu(z,z.return,ee),nl(z);break;case 27:ls&&ys(z.stateNode);case 26:case 5:ws(z,z.return),nl(z);break;case 22:z.memoizedState===null&&nl(z);break;case 30:nl(z);break;default:nl(z)}V=V.sibling}}function Sa(V,z,ee){for(ee=ee&&(z.subtreeFlags&8772)!==0,z=z.child;z!==null;){var oe=z.alternate,me=V,xe=z,Ve=xe.flags;switch(xe.tag){case 0:case 11:case 15:Sa(me,xe,ee),io(4,xe);break;case 1:if(Sa(me,xe,ee),oe=xe,me=oe.stateNode,typeof me.componentDidMount=="function")try{me.componentDidMount()}catch(Un){Ci(oe,oe.return,Un)}if(oe=xe,me=oe.updateQueue,me!==null){var Ye=oe.stateNode;try{var gn=me.shared.hiddenCallbacks;if(gn!==null)for(me.shared.hiddenCallbacks=null,me=0;me<gn.length;me++)Yn(gn[me],Ye)}catch(Un){Ci(oe,oe.return,Un)}}ee&&Ve&64&&yc(xe),xc(xe,xe.return);break;case 27:ls&&Kf(xe);case 26:case 5:Sa(me,xe,ee),ee&&oe===null&&Ve&4&&Fl(xe),xc(xe,xe.return);break;case 12:Sa(me,xe,ee);break;case 31:Sa(me,xe,ee),ee&&Ve&4&&ba(me,xe);break;case 13:Sa(me,xe,ee),ee&&Ve&4&&ou(me,xe);break;case 22:xe.memoizedState===null&&Sa(me,xe,ee),xc(xe,xe.return);break;case 30:break;default:Sa(me,xe,ee)}z=z.sibling}}function il(V,z){var ee=null;V!==null&&V.memoizedState!==null&&V.memoizedState.cachePool!==null&&(ee=V.memoizedState.cachePool.pool),V=null,z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(V=z.memoizedState.cachePool.pool),V!==ee&&(V!=null&&V.refCount++,ee!=null&&bn(ee))}function jh(V,z){V=null,z.alternate!==null&&(V=z.alternate.memoizedState.cache),z=z.memoizedState.cache,z!==V&&(z.refCount++,V!=null&&bn(V))}function Vr(V,z,ee,oe){if(z.subtreeFlags&10256)for(z=z.child;z!==null;)Ou(V,z,ee,oe),z=z.sibling}function Ou(V,z,ee,oe){var me=z.flags;switch(z.tag){case 0:case 11:case 15:Vr(V,z,ee,oe),me&2048&&io(9,z);break;case 1:Vr(V,z,ee,oe);break;case 3:Vr(V,z,ee,oe),me&2048&&(V=null,z.alternate!==null&&(V=z.alternate.memoizedState.cache),z=z.memoizedState.cache,z!==V&&(z.refCount++,V!=null&&bn(V)));break;case 12:if(me&2048){Vr(V,z,ee,oe),V=z.stateNode;try{var xe=z.memoizedProps,Ve=xe.id,Ye=xe.onPostCommit;typeof Ye=="function"&&Ye(Ve,z.alternate===null?"mount":"update",V.passiveEffectDuration,-0)}catch(gn){Ci(z,z.return,gn)}}else Vr(V,z,ee,oe);break;case 31:Vr(V,z,ee,oe);break;case 13:Vr(V,z,ee,oe);break;case 23:break;case 22:xe=z.stateNode,Ve=z.alternate,z.memoizedState!==null?xe._visibility&2?Vr(V,z,ee,oe):_c(V,z):xe._visibility&2?Vr(V,z,ee,oe):(xe._visibility|=2,$s(V,z,ee,oe,(z.subtreeFlags&10256)!==0||!1)),me&2048&&il(Ve,z);break;case 24:Vr(V,z,ee,oe),me&2048&&jh(z.alternate,z);break;default:Vr(V,z,ee,oe)}}function $s(V,z,ee,oe,me){for(me=me&&((z.subtreeFlags&10256)!==0||!1),z=z.child;z!==null;){var xe=V,Ve=z,Ye=ee,gn=oe,Un=Ve.flags;switch(Ve.tag){case 0:case 11:case 15:$s(xe,Ve,Ye,gn,me),io(8,Ve);break;case 23:break;case 22:var ti=Ve.stateNode;Ve.memoizedState!==null?ti._visibility&2?$s(xe,Ve,Ye,gn,me):_c(xe,Ve):(ti._visibility|=2,$s(xe,Ve,Ye,gn,me)),me&&Un&2048&&il(Ve.alternate,Ve);break;case 24:$s(xe,Ve,Ye,gn,me),me&&Un&2048&&jh(Ve.alternate,Ve);break;default:$s(xe,Ve,Ye,gn,me)}z=z.sibling}}function _c(V,z){if(z.subtreeFlags&10256)for(z=z.child;z!==null;){var ee=V,oe=z,me=oe.flags;switch(oe.tag){case 22:_c(ee,oe),me&2048&&il(oe.alternate,oe);break;case 24:_c(ee,oe),me&2048&&jh(oe.alternate,oe);break;default:_c(ee,oe)}z=z.sibling}}function so(V,z,ee){if(V.subtreeFlags&da)for(V=V.child;V!==null;)rl(V,z,ee),V=V.sibling}function rl(V,z,ee){switch(V.tag){case 26:if(so(V,z,ee),V.flags&da)if(V.memoizedState!==null)Hd(ee,hr,V.memoizedState,V.memoizedProps);else{var oe=V.stateNode,me=V.type;V=V.memoizedProps,((z&335544128)===z||Zh(me,V))&&eh(ee,oe,me,V)}break;case 5:so(V,z,ee),V.flags&da&&(oe=V.stateNode,me=V.type,V=V.memoizedProps,((z&335544128)===z||Zh(me,V))&&eh(ee,oe,me,V));break;case 3:case 4:wa?(oe=hr,hr=vu(V.stateNode.containerInfo),so(V,z,ee),hr=oe):so(V,z,ee);break;case 22:V.memoizedState===null&&(oe=V.alternate,oe!==null&&oe.memoizedState!==null?(oe=da,da=16777216,so(V,z,ee),da=oe):so(V,z,ee));break;default:so(V,z,ee)}}function Bu(V){var z=V.alternate;if(z!==null&&(V=z.child,V!==null)){z.child=null;do z=V.sibling,V.sibling=null,V=z;while(V!==null)}}function vc(V){var z=V.deletions;if((V.flags&16)!==0){if(z!==null)for(var ee=0;ee<z.length;ee++){var oe=z[ee];Kr=oe,aa(oe,V)}Bu(V)}if(V.subtreeFlags&10256)for(V=V.child;V!==null;)Uu(V),V=V.sibling}function Uu(V){switch(V.tag){case 0:case 11:case 15:vc(V),V.flags&2048&&ro(9,V,V.return);break;case 3:vc(V);break;case 12:vc(V);break;case 22:var z=V.stateNode;V.memoizedState!==null&&z._visibility&2&&(V.return===null||V.return.tag!==13)?(z._visibility&=-3,cu(V)):vc(V);break;default:vc(V)}}function cu(V){var z=V.deletions;if((V.flags&16)!==0){if(z!==null)for(var ee=0;ee<z.length;ee++){var oe=z[ee];Kr=oe,aa(oe,V)}Bu(V)}for(V=V.child;V!==null;){switch(z=V,z.tag){case 0:case 11:case 15:ro(8,z,z.return),cu(z);break;case 22:ee=z.stateNode,ee._visibility&2&&(ee._visibility&=-3,cu(z));break;default:cu(z)}V=V.sibling}}function aa(V,z){for(;Kr!==null;){var ee=Kr;switch(ee.tag){case 0:case 11:case 15:ro(8,ee,z);break;case 23:case 22:if(ee.memoizedState!==null&&ee.memoizedState.cachePool!==null){var oe=ee.memoizedState.cachePool.pool;oe!=null&&oe.refCount++}break;case 24:bn(ee.memoizedState.cache)}if(oe=ee.child,oe!==null)oe.return=ee,Kr=oe;else e:for(ee=V;Kr!==null;){oe=Kr;var me=oe.sibling,xe=oe.return;if(Uh(oe),oe===ee){Kr=null;break e}if(me!==null){me.return=xe,Kr=me;break e}Kr=xe}}}function sl(V){var z=Ni(V);if(z!=null){if(typeof z.memoizedProps["data-testname"]!="string")throw Error(d(364));return z}if(V=Xr(V),V===null)throw Error(d(362));return V.stateNode.current}function al(V,z){var ee=V.tag;switch(z.$$typeof){case Na:if(V.type===z.value)return!0;break;case Oc:e:{for(z=z.value,V=[V,0],ee=0;ee<V.length;){var oe=V[ee++],me=oe.tag,xe=V[ee++],Ve=z[xe];if(me!==5&&me!==26&&me!==27||!pl(oe)){for(;Ve!=null&&al(oe,Ve);)xe++,Ve=z[xe];if(xe===z.length){z=!0;break e}else for(oe=oe.child;oe!==null;)V.push(oe,xe),oe=oe.sibling}}z=!1}return z;case Bc:if((ee===5||ee===26||ee===27)&&nf(V.stateNode,z.value))return!0;break;case El:if((ee===5||ee===6||ee===26||ee===27)&&(V=xu(V),V!==null&&0<=V.indexOf(z.value)))return!0;break;case Mu:if((ee===5||ee===26||ee===27)&&(V=V.memoizedProps["data-testname"],typeof V=="string"&&V.toLowerCase()===z.value.toLowerCase()))return!0;break;default:throw Error(d(365))}return!1}function bc(V){switch(V.$$typeof){case Na:return"<"+(Y(V.value)||"Unknown")+">";case Oc:return":has("+(bc(V)||"")+")";case Bc:return'[role="'+V.value+'"]';case El:return'"'+V.value+'"';case Mu:return'[data-testname="'+V.value+'"]';default:throw Error(d(365))}}function Ec(V,z){var ee=[];V=[V,0];for(var oe=0;oe<V.length;){var me=V[oe++],xe=me.tag,Ve=V[oe++],Ye=z[Ve];if(xe!==5&&xe!==26&&xe!==27||!pl(me)){for(;Ye!=null&&al(me,Ye);)Ve++,Ye=z[Ve];if(Ve===z.length)ee.push(me);else for(me=me.child;me!==null;)V.push(me,Ve),me=me.sibling}}return ee}function qs(V,z){if(!os)throw Error(d(363));V=sl(V),V=Ec(V,z),z=[],V=Array.from(V);for(var ee=0;ee<V.length;){var oe=V[ee++],me=oe.tag;if(me===5||me===26||me===27)pl(oe)||z.push(oe.stateNode);else for(oe=oe.child;oe!==null;)V.push(oe),oe=oe.sibling}return z}function Pr(){return(Gi&2)!==0&&qi!==0?qi&-qi:Ei.T!==null?ei():Ic()}function Do(){if(zs===0)if((qi&536870912)===0||$i){var V=Kl;Kl<<=1,(Kl&3932160)===0&&(Kl=262144),zs=V}else zs=536870912;return V=Js.current,V!==null&&(V.flags|=32),zs}function Nr(V,z,ee){(V===Ui&&(dr===2||dr===9)||V.cancelPendingCommit!==null)&&(zr(V,0),oo(V,qi,zs,!1)),pe(V,ee),((Gi&2)===0||V!==Ui)&&(V===Ui&&((Gi&2)===0&&(Al|=ee),Br===4&&oo(V,qi,zs,!1)),Zn(V))}function Ha(V,z,ee){if((Gi&6)!==0)throw Error(d(327));var oe=!ee&&(z&127)===0&&(z&V.expiredLanes)===0||ie(V,z),me=oe?ed(V,z):lo(V,z,!0),xe=oe;do{if(me===0){Sl&&!oe&&oo(V,z,0,!1);break}else{if(ee=V.current.alternate,xe&&!Qf(ee)){me=lo(V,z,!1),xe=!1;continue}if(me===2){if(xe=z,V.errorRecoveryDisabledLanes&xe)var Ve=0;else Ve=V.pendingLanes&-536870913,Ve=Ve!==0?Ve:Ve&536870912?536870912:0;if(Ve!==0){z=Ve;e:{var Ye=V;me=Cu;var gn=Ir&&Ye.current.memoizedState.isDehydrated;if(gn&&(zr(Ye,Ve).flags|=256),Ve=lo(Ye,Ve,!1),Ve!==2){if(Tl&&!gn){Ye.errorRecoveryDisabledLanes|=xe,Al|=xe,me=4;break e}xe=ta,ta=me,xe!==null&&(ta===null?ta=xe:ta.push.apply(ta,xe))}me=Ve}if(xe=!1,me!==2)continue}}if(me===1){zr(V,0),oo(V,z,0,!0);break}e:{switch(oe=V,xe=me,xe){case 0:case 1:throw Error(d(345));case 4:if((z&4194048)!==z)break;case 6:oo(oe,z,zs,!Xa);break e;case 2:ta=null;break;case 3:case 5:break;default:throw Error(d(329))}if((z&62914560)===z&&(me=Pu+300-Ms(),10<me)){if(oo(oe,z,zs,!Xa),J(oe,0,!0)!==0)break e;So=z,oe.timeoutHandle=Kh(ao.bind(null,oe,ee,ta,Iu,Sh,z,zs,Al,jc,Xa,xe,"Throttled",-0,0),me);break e}ao(oe,ee,ta,Iu,Sh,z,zs,Al,jc,Xa,xe,null,-0,0)}}break}while(!0);Zn(V)}function ao(V,z,ee,oe,me,xe,Ve,Ye,gn,Un,ti,Wn,hi,Di){if(V.timeoutHandle=Ks,Wn=z.subtreeFlags,Wn&8192||(Wn&16785408)===16785408){Wn=Qh(),rl(z,xe,Wn);var Qr=(xe&62914560)===xe?Pu-Ms():(xe&4194048)===xe?ic-Ms():0;if(Qr=cd(Wn,Qr),Qr!==null){So=xe,V.cancelPendingCommit=Qr(uo.bind(null,V,z,xe,ee,oe,me,Ve,Ye,gn,ti,Wn,null,hi,Di)),oo(V,xe,Ve,!Un);return}}uo(V,z,xe,ee,oe,me,Ve,Ye,gn)}function Qf(V){for(var z=V;;){var ee=z.tag;if((ee===0||ee===11||ee===15)&&z.flags&16384&&(ee=z.updateQueue,ee!==null&&(ee=ee.stores,ee!==null)))for(var oe=0;oe<ee.length;oe++){var me=ee[oe],xe=me.getSnapshot;me=me.value;try{if(!Yr(xe(),me))return!1}catch{return!1}}if(ee=z.child,z.subtreeFlags&16384&&ee!==null)ee.return=z,z=ee;else{if(z===V)break;for(;z.sibling===null;){if(z.return===null||z.return===V)return!0;z=z.return}z.sibling.return=z.return,z=z.sibling}}return!0}function oo(V,z,ee,oe){z&=~Uc,z&=~Al,V.suspendedLanes|=z,V.pingedLanes&=~z,oe&&(V.warmLanes|=z),oe=V.expirationTimes;for(var me=z;0<me;){var xe=31-Zs(me),Ve=1<<xe;oe[xe]=-1,me&=~Ve}ee!==0&&se(V,ee,z)}function ju(){return(Gi&6)===0?(Gn(0),!1):!0}function zu(){if(Hi!==null){if(dr===0)var V=Hi.return;else V=Hi,$a=Er=null,ui(V),_l=null,Ql=0,V=Hi;for(;V!==null;)Yf(V.alternate,V),V=V.return;Hi=null}}function zr(V,z){var ee=V.timeoutHandle;ee!==Ks&&(V.timeoutHandle=Ks,ld(ee)),ee=V.cancelPendingCommit,ee!==null&&(V.cancelPendingCommit=null,ee()),So=0,zu(),Ui=V,Hi=ee=la(V.current,null),qi=z,dr=0,rs=null,Xa=!1,Sl=ie(V,z),Tl=!1,jc=zs=Uc=Al=Wo=Br=0,ta=Cu=null,Sh=!1,(z&8)!==0&&(z|=z&32);var oe=V.entangledLanes;if(oe!==0)for(V=V.entanglements,oe&=z;0<oe;){var me=31-Zs(oe),xe=1<<me;z|=V[me],oe&=~xe}return Eo=z,Is(),ee}function br(V,z){Li=null,Ei.H=fa,z===hs||z===Da?(z=Ii(),dr=3):z===bh?(z=Ii(),dr=4):dr=z===js?8:z!==null&&typeof z=="object"&&typeof z.then=="function"?6:1,rs=z,Hi===null&&(Br=1,Dl(V,Te(z,V.current)))}function Yi(){var V=Js.current;return V===null?!0:(qi&4194048)===qi?ea===null:(qi&62914560)===qi||(qi&536870912)!==0?V===ea:!1}function Vo(){var V=Ei.H;return Ei.H=fa,V===null?fa:V}function oa(){var V=Ei.A;return Ei.A=Fc,V}function Sc(){Br=4,Xa||(qi&4194048)!==qi&&Js.current!==null||(Sl=!0),(Wo&134217727)===0&&(Al&134217727)===0||Ui===null||oo(Ui,qi,zs,!1)}function lo(V,z,ee){var oe=Gi;Gi|=2;var me=Vo(),xe=oa();(Ui!==V||qi!==z)&&(Iu=null,zr(V,z)),z=!1;var Ve=Br;e:do try{if(dr!==0&&Hi!==null){var Ye=Hi,gn=rs;switch(dr){case 8:zu(),Ve=6;break e;case 3:case 2:case 9:case 6:Js.current===null&&(z=!0);var Un=dr;if(dr=0,rs=null,co(V,Ye,gn,Un),ee&&Sl){Ve=0;break e}break;default:Un=dr,dr=0,rs=null,co(V,Ye,gn,Un)}}Jf(),Ve=Br;break}catch(ti){br(V,ti)}while(!0);return z&&V.shellSuspendCounter++,$a=Er=null,Gi=oe,Ei.H=me,Ei.A=xe,Hi===null&&(Ui=null,qi=0,Is()),Ve}function Jf(){for(;Hi!==null;)ol(Hi)}function ed(V,z){var ee=Gi;Gi|=2;var oe=Vo(),me=oa();Ui!==V||qi!==z?(Iu=null,Rl=Ms()+500,zr(V,z)):Sl=ie(V,z);e:do try{if(dr!==0&&Hi!==null){z=Hi;var xe=rs;t:switch(dr){case 1:dr=0,rs=null,co(V,z,xe,1);break;case 2:case 9:if(ci(xe)){dr=0,rs=null,Gu(z);break}z=function(){dr!==2&&dr!==9||Ui!==V||(dr=7),Zn(V)},xe.then(z,z);break e;case 3:dr=7;break e;case 4:dr=5;break e;case 7:ci(xe)?(dr=0,rs=null,Gu(z)):(dr=0,rs=null,co(V,z,xe,7));break;case 5:var Ve=null;switch(Hi.tag){case 26:Ve=Hi.memoizedState;case 5:case 27:var Ye=Hi,gn=Ye.type,Un=Ye.pendingProps;if(Ve?Af(Ve):Lr(Ye.stateNode,gn,Un)){dr=0,rs=null;var ti=Ye.sibling;if(ti!==null)Hi=ti;else{var Wn=Ye.return;Wn!==null?(Hi=Wn,Ac(Wn)):Hi=null}break t}}dr=0,rs=null,co(V,z,xe,5);break;case 6:dr=0,rs=null,co(V,z,xe,6);break;case 8:zu(),Br=6;break e;default:throw Error(d(462))}}Tc();break}catch(hi){br(V,hi)}while(!0);return $a=Er=null,Ei.H=oe,Ei.A=me,Gi=ee,Hi!==null?0:(Ui=null,qi=0,Is(),Br)}function Tc(){for(;Hi!==null&&!$d();)ol(Hi)}function ol(V){var z=Vh(V.alternate,V,Eo);V.memoizedProps=V.pendingProps,z===null?Ac(V):Hi=z}function Gu(V){var z=V,ee=z.alternate;switch(z.tag){case 15:case 0:z=Vl(ee,z,z.pendingProps,z.type,void 0,qi);break;case 11:z=Vl(ee,z,z.pendingProps,z.type.render,z.ref,qi);break;case 5:ui(z);default:Yf(ee,z),z=Hi=$u(z,Eo),z=Vh(ee,z,Eo)}V.memoizedProps=V.pendingProps,z===null?Ac(V):Hi=z}function co(V,z,ee,oe){$a=Er=null,ui(z),_l=null,Ql=0;var me=z.return;try{if(Ue(V,me,z,ee,qi)){Br=1,Dl(V,Te(ee,V.current)),Hi=null;return}}catch(xe){if(me!==null)throw Hi=me,xe;Br=1,Dl(V,Te(ee,V.current)),Hi=null;return}z.flags&32768?($i||oe===1?V=!0:Sl||(qi&536870912)!==0?V=!1:(Xa=V=!0,(oe===2||oe===9||oe===3||oe===6)&&(oe=Js.current,oe!==null&&oe.tag===13&&(oe.flags|=16384))),ll(z,V)):Ac(z)}function Ac(V){var z=V;do{if((z.flags&32768)!==0){ll(z,Xa);return}V=z.return;var ee=Xf(z.alternate,z,Eo);if(ee!==null){Hi=ee;return}if(z=z.sibling,z!==null){Hi=z;return}Hi=z=V}while(z!==null);Br===0&&(Br=5)}function ll(V,z){do{var ee=Fh(V.alternate,V);if(ee!==null){ee.flags&=32767,Hi=ee;return}if(ee=V.return,ee!==null&&(ee.flags|=32768,ee.subtreeFlags=0,ee.deletions=null),!z&&(V=V.sibling,V!==null)){Hi=V;return}Hi=V=ee}while(V!==null);Br=6,Hi=null}function uo(V,z,ee,oe,me,xe,Ve,Ye,gn){V.cancelPendingCommit=null;do fo();while(ss!==0);if((Gi&6)!==0)throw Error(d(327));if(z!==null){if(z===V.current)throw Error(d(177));if(xe=z.lanes|z.childLanes,xe|=Jl,de(V,ee,xe,Ve,Ye,gn),V===Ui&&(Hi=Ui=null,qi=0),rc=z,qo=V,So=ee,zc=xe,Th=me,Vf=oe,(z.subtreeFlags&10256)!==0||(z.flags&10256)!==0?(V.callbackNode=null,V.callbackPriority=0,ts(Eu,function(){return uu(),null})):(V.callbackNode=null,V.callbackPriority=0),oe=(z.flags&13878)!==0,(z.subtreeFlags&13878)!==0||oe){oe=Ei.T,Ei.T=null,me=Ra(),Wi(2),Ve=Gi,Gi|=4;try{pp(V,z,ee)}finally{Gi=Ve,Wi(me),Ei.T=oe}}ss=1,No(),ho(),Hu()}}function No(){if(ss===1){ss=0;var V=qo,z=rc,ee=(z.flags&13878)!==0;if((z.subtreeFlags&13878)!==0||ee){ee=Ei.T,Ei.T=null;var oe=Ra();Wi(2);var me=Gi;Gi|=4;try{lu(z,V),od(V.containerInfo)}finally{Gi=me,Wi(oe),Ei.T=ee}}V.current=z,ss=2}}function ho(){if(ss===2){ss=0;var V=qo,z=rc,ee=(z.flags&8772)!==0;if((z.subtreeFlags&8772)!==0||ee){ee=Ei.T,Ei.T=null;var oe=Ra();Wi(2);var me=Gi;Gi|=4;try{Zf(V,z.alternate,z)}finally{Gi=me,Wi(oe),Ei.T=ee}}ss=3}}function Hu(){if(ss===4||ss===3){ss=0,wf();var V=qo,z=rc,ee=So,oe=Vf;(z.subtreeFlags&10256)!==0||(z.flags&10256)!==0?ss=5:(ss=0,rc=qo=null,Wu(V,V.pendingLanes));var me=V.pendingLanes;if(me===0&&($o=null),Re(ee),z=z.stateNode,Qs&&typeof Qs.onCommitFiberRoot=="function")try{Qs.onCommitFiberRoot(Zl,z,void 0,(z.current.flags&128)===128)}catch{}if(oe!==null){z=Ei.T,me=Ra(),Wi(2),Ei.T=null;try{for(var xe=V.onRecoverableError,Ve=0;Ve<oe.length;Ve++){var Ye=oe[Ve];xe(Ye.value,{componentStack:Ye.stack})}}finally{Ei.T=z,Wi(me)}}(So&3)!==0&&fo(),Zn(V),me=V.pendingLanes,(ee&261930)!==0&&(me&42)!==0?V===ku?sr++:(sr=0,ku=V):sr=0,Ir&&_u(),Gn(0)}}function Wu(V,z){(V.pooledCacheLanes&=z)===0&&(z=V.pooledCache,z!=null&&(V.pooledCache=null,bn(z)))}function fo(){return No(),ho(),Hu(),uu()}function uu(){if(ss!==5)return!1;var V=qo,z=zc;zc=0;var ee=Re(So),oe=32>ee?32:ee;ee=Ei.T;var me=Ra();try{Wi(oe),Ei.T=null,oe=Th,Th=null;var xe=qo,Ve=So;if(ss=0,rc=qo=null,So=0,(Gi&6)!==0)throw Error(d(331));var Ye=Gi;if(Gi|=4,Uu(xe.current),Ou(xe,xe.current,Ve,oe),Gi=Ye,Gn(0,!1),Qs&&typeof Qs.onPostCommitFiberRoot=="function")try{Qs.onPostCommitFiberRoot(Zl,xe)}catch{}return!0}finally{Wi(me),Ei.T=ee,Wu(V,z)}}function cl(V,z,ee){z=Te(ee,z),z=ae(V.stateNode,z,2),V=Nt(V,z,2),V!==null&&(pe(V,2),Zn(V))}function Ci(V,z,ee){if(V.tag===3)cl(V,V,ee);else for(;z!==null;){if(z.tag===3){cl(z,V,ee);break}else if(z.tag===1){var oe=z.stateNode;if(typeof z.type.getDerivedStateFromError=="function"||typeof oe.componentDidCatch=="function"&&($o===null||!$o.has(oe))){V=Te(ee,V),ee=be(2),oe=Nt(z,ee,2),oe!==null&&(Ce(ee,oe,z,V),pe(oe,2),Zn(oe));break}}z=z.return}}function Rc(V,z,ee){var oe=V.pingCache;if(oe===null){oe=V.pingCache=new pa;var me=new Set;oe.set(z,me)}else me=oe.get(z),me===void 0&&(me=new Set,oe.set(z,me));me.has(ee)||(Tl=!0,me.add(ee),V=nd.bind(null,V,z,ee),z.then(V,V))}function nd(V,z,ee){var oe=V.pingCache;oe!==null&&oe.delete(z),V.pingedLanes|=V.suspendedLanes&ee,V.warmLanes&=~ee,Ui===V&&(qi&ee)===ee&&(Br===4||Br===3&&(qi&62914560)===qi&&300>Ms()-Pu?(Gi&2)===0&&zr(V,0):Uc|=ee,jc===qi&&(jc=0)),Zn(V)}function rd(V,z){z===0&&(z=le()),V=bi(V,z),V!==null&&(pe(V,z),Zn(V))}function mp(V){var z=V.memoizedState,ee=0;z!==null&&(ee=z.retryLane),rd(V,ee)}function gp(V,z){var ee=0;switch(V.tag){case 31:case 13:var oe=V.stateNode,me=V.memoizedState;me!==null&&(ee=me.retryLane);break;case 19:oe=V.stateNode;break;case 22:oe=V.stateNode._retryCache;break;default:throw Error(d(314))}oe!==null&&oe.delete(z),rd(V,ee)}function ts(V,z){return bu(V,z)}function zh(V,z,ee,oe){this.tag=V,this.key=ee,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=z,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=oe,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(V){return V=V.prototype,!(!V||!V.isReactComponent)}function la(V,z){var ee=V.alternate;return ee===null?(ee=s(V.tag,z,V.key,V.mode),ee.elementType=V.elementType,ee.type=V.type,ee.stateNode=V.stateNode,ee.alternate=V,V.alternate=ee):(ee.pendingProps=z,ee.type=V.type,ee.flags=0,ee.subtreeFlags=0,ee.deletions=null),ee.flags=V.flags&65011712,ee.childLanes=V.childLanes,ee.lanes=V.lanes,ee.child=V.child,ee.memoizedProps=V.memoizedProps,ee.memoizedState=V.memoizedState,ee.updateQueue=V.updateQueue,z=V.dependencies,ee.dependencies=z===null?null:{lanes:z.lanes,firstContext:z.firstContext},ee.sibling=V.sibling,ee.index=V.index,ee.ref=V.ref,ee.refCleanup=V.refCleanup,ee}function $u(V,z){V.flags&=65011714;var ee=V.alternate;return ee===null?(V.childLanes=0,V.lanes=z,V.child=null,V.subtreeFlags=0,V.memoizedProps=null,V.memoizedState=null,V.updateQueue=null,V.dependencies=null,V.stateNode=null):(V.childLanes=ee.childLanes,V.lanes=ee.lanes,V.child=ee.child,V.subtreeFlags=0,V.deletions=null,V.memoizedProps=ee.memoizedProps,V.memoizedState=ee.memoizedState,V.updateQueue=ee.updateQueue,V.type=ee.type,z=ee.dependencies,V.dependencies=z===null?null:{lanes:z.lanes,firstContext:z.firstContext}),V}function Lo(V,z,ee,oe,me,xe){var Ve=0;if(oe=V,typeof V=="function")Ol(V)&&(Ve=1);else if(typeof V=="string")Ve=wa&&ls?oh(V,ee,xs.current)?26:Rf(V)?27:5:wa?oh(V,ee,xs.current)?26:5:ls&&Rf(V)?27:5;else e:switch(V){case pu:return V=s(31,ee,z,me),V.elementType=pu,V.lanes=xe,V;case zl:return Ta(ee.children,me,xe,z);case Gl:Ve=8,me|=24;break;case Hl:return V=s(12,ee,z,me|2),V.elementType=Hl,V.lanes=xe,V;case Ku:return V=s(13,ee,z,me),V.elementType=Ku,V.lanes=xe,V;case Fo:return V=s(19,ee,z,me),V.elementType=Fo,V.lanes=xe,V;default:if(typeof V=="object"&&V!==null)switch(V.$$typeof){case Aa:Ve=10;break e;case du:Ve=9;break e;case wc:Ve=11;break e;case Zu:Ve=14;break e;case Fs:Ve=16,oe=null;break e}Ve=29,ee=Error(d(130,V===null?"null":typeof V,"")),oe=null}return z=s(Ve,ee,z,me),z.elementType=V,z.type=oe,z.lanes=xe,z}function Ta(V,z,ee,oe){return V=s(7,V,oe,z),V.lanes=ee,V}function Gh(V,z,ee){return V=s(6,V,null,z),V.lanes=ee,V}function Hh(V){var z=s(18,null,null,0);return z.stateNode=V,z}function Wh(V,z,ee){return z=s(4,V.children!==null?V.children:[],V.key,z),z.lanes=ee,z.stateNode={containerInfo:V.containerInfo,pendingChildren:null,implementation:V.implementation},z}function sd(V,z,ee,oe,me,xe,Ve,Ye,gn){this.tag=1,this.containerInfo=V,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ks,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fe(0),this.hiddenUpdates=fe(null),this.identifierPrefix=oe,this.onUncaughtError=me,this.onCaughtError=xe,this.onRecoverableError=Ve,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=gn,this.incompleteTransitions=new Map}function ul(V,z,ee,oe,me,xe,Ve,Ye,gn,Un,ti,Wn){return V=new sd(V,z,ee,Ve,gn,Un,ti,Wn,Ye),z=1,xe===!0&&(z|=24),xe=s(3,null,null,z),V.current=xe,xe.stateNode=V,z=Ft(),z.refCount++,V.pooledCache=z,z.refCount++,xe.memoizedState={element:oe,isDehydrated:ee,cache:z},Ie(xe),V}function qu(V){return V?(V=mo,V):mo}function hu(V){var z=V._reactInternals;if(z===void 0)throw typeof V.render=="function"?Error(d(188)):(V=Object.keys(V).join(","),Error(d(268,V)));return V=A(z),V=V!==null?R(V):null,V===null?null:Cc(V.stateNode)}function $h(V,z,ee,oe,me,xe){me=qu(me),oe.context===null?oe.context=me:oe.pendingContext=me,oe=We(z),oe.payload={element:ee},xe=xe===void 0?null:xe,xe!==null&&(oe.callback=xe),ee=Nt(V,oe,z),ee!==null&&(Nr(ee,V,z),mn(ee,V,z))}function Bl(V,z){if(V=V.memoizedState,V!==null&&V.dehydrated!==null){var ee=V.retryLane;V.retryLane=ee!==0&&ee<z?ee:z}}function fu(V,z){Bl(V,z),(V=V.alternate)&&Bl(V,z)}var Oi={},Xu=React,Xs=Tb,Yu=Object.assign,Ul=Symbol.for("react.element"),po=Symbol.for("react.transitional.element"),jl=Symbol.for("react.portal"),zl=Symbol.for("react.fragment"),Gl=Symbol.for("react.strict_mode"),Hl=Symbol.for("react.profiler"),du=Symbol.for("react.consumer"),Aa=Symbol.for("react.context"),wc=Symbol.for("react.forward_ref"),Ku=Symbol.for("react.suspense"),Fo=Symbol.for("react.suspense_list"),Zu=Symbol.for("react.memo"),Fs=Symbol.for("react.lazy"),pu=Symbol.for("react.activity"),qh=Symbol.for("react.memo_cache_sentinel"),Oo=Symbol.iterator,hl=Symbol.for("react.client.reference"),dl=Array.isArray,Ei=Xu.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Xh=n.rendererVersion,mu=n.rendererPackageName,Mc=n.extraDevToolsConfig,Cc=n.getPublicInstance,ad=n.getRootHostContext,Pc=n.getChildHostContext,Qu=n.prepareForCommit,od=n.resetAfterCommit,Yh=n.createInstance;n.cloneMutableInstance;var gu=n.appendInitialChild,Ys=n.finalizeInitialChildren,Os=n.shouldSetTextContent,Bo=n.createTextInstance;n.cloneMutableTextInstance;var Kh=n.scheduleTimeout,ld=n.cancelTimeout,Ks=n.noTimeout,qr=n.isPrimaryRenderer;n.warnsIfNotActing;var Ki=n.supportsMutation,ca=n.supportsPersistence,Ir=n.supportsHydration,Ni=n.getInstanceFromNode;n.beforeActiveInstanceBlur;var gr=n.preparePortalMount;n.prepareScopeUpdate,n.getInstanceFromScope;var Wi=n.setCurrentUpdatePriority,Ra=n.getCurrentUpdatePriority,Ic=n.resolveUpdatePriority;n.trackSchedulerEvent,n.resolveEventType,n.resolveEventTimeStamp;var Wl=n.shouldAttemptEagerTransition,Ju=n.detachDeletedInstance;n.requestPostPaintCallback;var yu=n.maySuspendCommit,kc=n.maySuspendCommitOnUpdate,Zh=n.maySuspendCommitInSyncRender,Lr=n.preloadInstance,Qh=n.startSuspendingCommit,eh=n.suspendInstance;n.suspendOnActiveViewTransition;var cd=n.waitForCommitToBeReady;n.getSuspendedCommitReason;var $l=n.NotPendingTransition,ql=n.HostTransitionContext,Jh=n.resetFormInstance;n.bindToConsole;var ef=n.supportsMicrotasks,tf=n.scheduleMicrotask,os=n.supportsTestSelectors,Xr=n.findFiberRoot,th=n.getBoundingRect,xu=n.getTextContent,pl=n.isHiddenSubtree,nf=n.matchAccessibilityRole,Uo=n.setFocusIfFocusable,nh=n.setupIntersectionObserver,rf=n.appendChild,sf=n.appendChildToContainer,ud=n.commitTextUpdate,hd=n.commitMount,dd=n.commitUpdate,pd=n.insertBefore,md=n.insertInContainerBefore,gd=n.removeChild,af=n.removeChildFromContainer,of=n.resetTextContent,yp=n.hideInstance,yd=n.hideTextInstance,xd=n.unhideInstance,_d=n.unhideTextInstance;n.cancelViewTransitionName,n.cancelRootViewTransitionName,n.restoreRootViewTransitionName,n.cloneRootViewTransitionContainer,n.removeRootViewTransitionClone,n.measureClonedInstance,n.hasInstanceChanged,n.hasInstanceAffectedParent,n.startViewTransition,n.startGestureTransition,n.stopViewTransition,n.getCurrentGestureOffset,n.createViewTransitionInstance;var lf=n.clearContainer;n.createFragmentInstance,n.updateFragmentInstanceFiber,n.commitNewChildToFragmentInstance,n.deleteChildFromFragmentInstance;var vd=n.cloneInstance,cf=n.createContainerChildSet,uf=n.appendChildToContainerChildSet,bd=n.finalizeContainerChildren,hf=n.replaceContainerChildren,Ed=n.cloneHiddenInstance,ff=n.cloneHiddenTextInstance,ml=n.isSuspenseInstancePending,ih=n.isSuspenseInstanceFallback,rh=n.getSuspenseInstanceFallbackErrorDetails,sh=n.registerSuspenseInstanceRetry,Sd=n.canHydrateFormStateMarker,df=n.isFormStateMarkerMatching,Td=n.getNextHydratableSibling,Ad=n.getNextHydratableSiblingAfterSingleton,Rd=n.getFirstHydratableChild,wd=n.getFirstHydratableChildWithinContainer,Md=n.getFirstHydratableChildWithinActivityInstance,Cd=n.getFirstHydratableChildWithinSuspenseInstance,pf=n.getFirstHydratableChildWithinSingleton,Pd=n.canHydrateInstance,Id=n.canHydrateTextInstance,mf=n.canHydrateActivityInstance,kd=n.canHydrateSuspenseInstance,Dd=n.hydrateInstance,xp=n.hydrateTextInstance,gf=n.hydrateActivityInstance,Vd=n.hydrateSuspenseInstance,Nd=n.getNextHydratableInstanceAfterActivityInstance,yf=n.getNextHydratableInstanceAfterSuspenseInstance,Ld=n.commitHydratedInstance,Fd=n.commitHydratedContainer,_p=n.commitHydratedActivityInstance,vp=n.commitHydratedSuspenseInstance,Od=n.finalizeHydratedChildren,_u=n.flushHydrationEvents;n.clearActivityBoundary;var xf=n.clearSuspenseBoundary;n.clearActivityBoundaryFromContainer;var ah=n.clearSuspenseBoundaryFromContainer,Bd=n.hideDehydratedBoundary,Ud=n.unhideDehydratedBoundary,Dc=n.shouldDeleteUnhydratedTailInstances;n.diffHydratedPropsForDevWarnings,n.diffHydratedTextForDevWarnings,n.describeHydratableInstanceForDevWarnings;var jd=n.validateHydratableInstance,_f=n.validateHydratableTextInstance,wa=n.supportsResources,oh=n.isHostHoistableType,vu=n.getHoistableRoot,vf=n.getResource,bf=n.acquireResource,gl=n.releaseResource,zd=n.hydrateHoistable,Ef=n.mountHoistable,Sf=n.unmountHoistable,lh=n.createHoistableInstance,Gd=n.prepareToCommitHoistables,Tf=n.mayResourceSuspendCommit,Af=n.preloadResource,Hd=n.suspendResource,ls=n.supportsSingletons,ch=n.resolveSingletonInstance,ns=n.acquireSingletonInstance,ys=n.releaseSingletonInstance,Rf=n.isHostSingletonType,Xl=n.isSingletonScope,uh=[],Yl=-1,mo={},Zs=Math.clz32?Math.clz32:ne,hh=Math.log,Wd=Math.LN2,fh=256,Kl=262144,Vc=4194304,bu=Xs.unstable_scheduleCallback,dh=Xs.unstable_cancelCallback,$d=Xs.unstable_shouldYield,wf=Xs.unstable_requestPaint,Ms=Xs.unstable_now,ph=Xs.unstable_ImmediatePriority,qd=Xs.unstable_UserBlockingPriority,Eu=Xs.unstable_NormalPriority,mh=Xs.unstable_IdlePriority,Mf=Xs.log,Xd=Xs.unstable_setDisableYieldValue,Zl=null,Qs=null,Yr=typeof Object.is=="function"?Object.is:Oe,gh=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},bp=Object.prototype.hasOwnProperty,yh,go,Su=!1,Cf=new WeakMap,jo=[],yo=0,yr=null,Tu=0,Ma=[],ua=0,Ca=null,bs=1,Wa="",xs=q(null),zo=q(null),Es=q(null),Au=q(null),cs=null,kr=null,$i=!1,xo=null,Bs=!1,xh=Error(d(519)),Pa=q(null),Er=null,$a=null,Yd=typeof AbortController<"u"?AbortController:function(){var V=[],z=this.signal={aborted:!1,addEventListener:function(ee,oe){V.push(oe)}};this.abort=function(){z.aborted=!0,V.forEach(function(ee){return ee()})}},_s=Xs.unstable_scheduleCallback,Ep=Xs.unstable_NormalPriority,Dr={$$typeof:Aa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Ru=null,ur=null,Cs=!1,Ia=!1,_h=!1,yl=0,Nc=null,Pf=0,Go=0,us=null,ka=Ei.S;Ei.S=function(V,z){ic=Ms(),typeof z=="object"&&z!==null&&typeof z.then=="function"&&gi(V,z),ka!==null&&ka(V,z)};var xl=q(null),hs=Error(d(460)),bh=Error(d(474)),Da=Error(d(542)),_o={then:function(){}},Us=null,_l=null,Ql=0,Ss=na(!0),If=na(!1),Ts=[],vo=0,Jl=0,ha=!1,Eh=!1,ec=q(null),vl=q(0),Js=q(null),ea=null,Gr=q(0),Ho=0,Li=null,vi=null,Pi=null,Bi=!1,Fi=!1,Ji=!1,Ps=0,Va=0,qa=null,kf=0,fa={readContext:Be,use:tr,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useLayoutEffect:Nn,useInsertionEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useSyncExternalStore:Nn,useId:Nn,useHostTransitionStatus:Nn,useFormState:Nn,useActionState:Nn,useOptimistic:Nn,useMemoCache:Nn,useCacheRefresh:Nn};fa.useEffectEvent=Nn;var Fr={readContext:Be,use:tr,useCallback:function(V,z){return pi().memoizedState=[V,z===void 0?null:z],V},useContext:Be,useEffect:Ko,useImperativeHandle:function(V,z,ee){ee=ee!=null?ee.concat([V]):null,Za(4194308,4,Mo.bind(null,z,V),ee)},useLayoutEffect:function(V,z){return Za(4194308,4,V,z)},useInsertionEffect:function(V,z){Za(4,2,V,z)},useMemo:function(V,z){var ee=pi();z=z===void 0?null:z;var oe=V();if(Ji){Ee(!0);try{V()}finally{Ee(!1)}}return ee.memoizedState=[oe,z],oe},useReducer:function(V,z,ee){var oe=pi();if(ee!==void 0){var me=ee(z);if(Ji){Ee(!0);try{ee(z)}finally{Ee(!1)}}}else me=z;return oe.memoizedState=oe.baseState=me,V={pending:null,lanes:0,dispatch:null,lastRenderedReducer:V,lastRenderedState:me},oe.queue=V,V=V.dispatch=fc.bind(null,Li,V),[oe.memoizedState,V]},useRef:function(V){var z=pi();return V={current:V},z.memoizedState=V},useState:function(V){V=Ka(V);var z=V.queue,ee=Qc.bind(null,Li,z);return z.dispatch=ee,[V.memoizedState,ee]},useDebugValue:Ja,useDeferredValue:function(V,z){var ee=pi();return Zo(ee,V,z)},useTransition:function(){var V=Ka(!1);return V=Qo.bind(null,Li,V.queue,!0,!1),pi().memoizedState=V,[!1,V]},useSyncExternalStore:function(V,z,ee){var oe=Li,me=pi();if($i){if(ee===void 0)throw Error(d(407));ee=ee()}else{if(ee=z(),Ui===null)throw Error(d(349));(qi&127)!==0||Cr(oe,z,ee)}me.memoizedState=ee;var xe={value:ee,getSnapshot:z};return me.queue=xe,Ko(ia.bind(null,oe,xe,V),[V]),oe.flags|=2048,Ds(9,{destroy:void 0},ks.bind(null,oe,xe,ee,z),null),ee},useId:function(){var V=pi(),z=Ui.identifierPrefix;if($i){var ee=Wa,oe=bs;ee=(oe&~(1<<32-Zs(oe)-1)).toString(32)+ee,z="_"+z+"R_"+ee,ee=Ps++,0<ee&&(z+="H"+ee.toString(32)),z+="_"}else ee=kf++,z="_"+z+"r_"+ee.toString(32)+"_";return V.memoizedState=z},useHostTransitionStatus:uc,useFormState:wo,useActionState:wo,useOptimistic:function(V){var z=pi();z.memoizedState=z.baseState=V;var ee={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return z.queue=ee,z=ya.bind(null,Li,!0,ee),ee.dispatch=z,[V,z]},useMemoCache:Ar,useCacheRefresh:function(){return pi().memoizedState=Du.bind(null,Li)},useEffectEvent:function(V){var z=pi(),ee={impl:V};return z.memoizedState=ee,function(){if((Gi&2)!==0)throw Error(d(440));return ee.impl.apply(void 0,arguments)}}},bo={readContext:Be,use:tr,useCallback:Il,useContext:Be,useEffect:Oa,useImperativeHandle:lc,useInsertionEffect:Qa,useLayoutEffect:Ua,useMemo:ja,useReducer:xr,useRef:oc,useState:function(){return xr(Zi)},useDebugValue:Ja,useDeferredValue:function(V,z){var ee=Ln();return cc(ee,vi.memoizedState,V,z)},useTransition:function(){var V=xr(Zi)[0],z=Ln().memoizedState;return[typeof V=="boolean"?V:si(V),z]},useSyncExternalStore:Mr,useId:Jo,useHostTransitionStatus:uc,useFormState:ga,useActionState:ga,useOptimistic:function(V,z){var ee=Ln();return Ml(ee,vi,V,z)},useMemoCache:Ar,useCacheRefresh:hc};bo.useEffectEvent=ps;var bl={readContext:Be,use:tr,useCallback:Il,useContext:Be,useEffect:Oa,useImperativeHandle:lc,useInsertionEffect:Qa,useLayoutEffect:Ua,useMemo:ja,useReducer:mr,useRef:oc,useState:function(){return mr(Zi)},useDebugValue:Ja,useDeferredValue:function(V,z){var ee=Ln();return vi===null?Zo(ee,V,z):cc(ee,vi.memoizedState,V,z)},useTransition:function(){var V=mr(Zi)[0],z=Ln().memoizedState;return[typeof V=="boolean"?V:si(V),z]},useSyncExternalStore:Mr,useId:Jo,useHostTransitionStatus:uc,useFormState:cr,useActionState:cr,useOptimistic:function(V,z){var ee=Ln();return vi!==null?Ml(ee,vi,V,z):(ee.baseState=V,[V,ee.queue.dispatch])},useMemoCache:Ar,useCacheRefresh:hc};bl.useEffectEvent=ps;var wu={enqueueSetState:function(V,z,ee){V=V._reactInternals;var oe=Pr(),me=We(oe);me.payload=z,ee!=null&&(me.callback=ee),z=Nt(V,me,oe),z!==null&&(Nr(z,V,oe),mn(z,V,oe))},enqueueReplaceState:function(V,z,ee){V=V._reactInternals;var oe=Pr(),me=We(oe);me.tag=1,me.payload=z,ee!=null&&(me.callback=ee),z=Nt(V,me,oe),z!==null&&(Nr(z,V,oe),mn(z,V,oe))},enqueueForceUpdate:function(V,z){V=V._reactInternals;var ee=Pr(),oe=We(ee);oe.tag=2,z!=null&&(oe.callback=z),z=Nt(V,oe,ee),z!==null&&(Nr(z,V,ee),mn(z,V,ee))}},js=Error(d(461)),wr=!1,tc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Hr=!1,Wr=!1,Lc=!1,Df=typeof WeakSet=="function"?WeakSet:Set,Kr=null,Or=null,Zr=!1,hr=null,da=8192,Fc={getCacheForType:function(V){var z=Be(Dr),ee=z.data.get(V);return ee===void 0&&(ee=V(),z.data.set(V,ee)),ee},cacheSignal:function(){return Be(Dr).controller.signal}},Na=0,Oc=1,Bc=2,Mu=3,El=4;if(typeof Symbol=="function"&&Symbol.for){var nc=Symbol.for;Na=nc("selector.component"),Oc=nc("selector.has_pseudo_class"),Bc=nc("selector.role"),Mu=nc("selector.test_id"),El=nc("selector.text")}var pa=typeof WeakMap=="function"?WeakMap:Map,Gi=0,Ui=null,Hi=null,qi=0,dr=0,rs=null,Xa=!1,Sl=!1,Tl=!1,Eo=0,Br=0,Wo=0,Al=0,Uc=0,zs=0,jc=0,Cu=null,ta=null,Sh=!1,Pu=0,ic=0,Rl=1/0,Iu=null,$o=null,ss=0,qo=null,rc=null,So=0,zc=0,Th=null,Vf=null,sr=0,ku=null;return Oi.attemptContinuousHydration=function(V){if(V.tag===13||V.tag===31){var z=bi(V,67108864);z!==null&&Nr(z,V,67108864),fu(V,67108864)}},Oi.attemptHydrationAtCurrentPriority=function(V){if(V.tag===13||V.tag===31){var z=Pr();z=ve(z);var ee=bi(V,z);ee!==null&&Nr(ee,V,z),fu(V,z)}},Oi.attemptSynchronousHydration=function(V){switch(V.tag){case 3:if(V=V.stateNode,V.current.memoizedState.isDehydrated){var z=te(V.pendingLanes);if(z!==0){for(V.pendingLanes|=2,V.entangledLanes|=2;z;){var ee=1<<31-Zs(z);V.entanglements[1]|=ee,z&=~ee}Zn(V),(Gi&6)===0&&(Rl=Ms()+500,Gn(0))}}break;case 31:case 13:z=bi(V,2),z!==null&&Nr(z,V,2),ju(),fu(V,2)}},Oi.batchedUpdates=function(V,z){return V(z)},Oi.createComponentSelector=function(V){return{$$typeof:Na,value:V}},Oi.createContainer=function(V,z,ee,oe,me,xe,Ve,Ye,gn,Un){return ul(V,z,!1,null,ee,oe,xe,null,Ve,Ye,gn,Un)},Oi.createHasPseudoClassSelector=function(V){return{$$typeof:Oc,value:V}},Oi.createHydrationContainer=function(V,z,ee,oe,me,xe,Ve,Ye,gn,Un,ti,Wn,hi,Di){var Qr;return V=ul(ee,oe,!0,V,me,xe,Ye,Di,gn,Un,ti,Wn),V.context=qu(null),ee=V.current,oe=Pr(),oe=ve(oe),me=We(oe),me.callback=(Qr=z)!=null?Qr:null,Nt(ee,me,oe),z=oe,V.current.lanes=z,pe(V,z),Zn(V),V},Oi.createPortal=function(V,z,ee){var oe=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jl,key:oe==null?null:""+oe,children:V,containerInfo:z,implementation:ee}},Oi.createRoleSelector=function(V){return{$$typeof:Bc,value:V}},Oi.createTestNameSelector=function(V){return{$$typeof:Mu,value:V}},Oi.createTextSelector=function(V){return{$$typeof:El,value:V}},Oi.defaultOnCaughtError=function(V){console.error(V)},Oi.defaultOnRecoverableError=function(V){gh(V)},Oi.defaultOnUncaughtError=function(V){gh(V)},Oi.deferredUpdates=function(V){var z=Ei.T,ee=Ra();try{return Wi(32),Ei.T=null,V()}finally{Wi(ee),Ei.T=z}},Oi.discreteUpdates=function(V,z,ee,oe,me){var xe=Ei.T,Ve=Ra();try{return Wi(2),Ei.T=null,V(z,ee,oe,me)}finally{Wi(Ve),Ei.T=xe,Gi===0&&(Rl=Ms()+500)}},Oi.findAllNodes=qs,Oi.findBoundingRects=function(V,z){if(!os)throw Error(d(363));z=qs(V,z),V=[];for(var ee=0;ee<z.length;ee++)V.push(th(z[ee]));for(z=V.length-1;0<z;z--){ee=V[z];for(var oe=ee.x,me=oe+ee.width,xe=ee.y,Ve=xe+ee.height,Ye=z-1;0<=Ye;Ye--)if(z!==Ye){var gn=V[Ye],Un=gn.x,ti=Un+gn.width,Wn=gn.y,hi=Wn+gn.height;if(oe>=Un&&xe>=Wn&&me<=ti&&Ve<=hi){V.splice(z,1);break}else if(oe!==Un||ee.width!==gn.width||hi<xe||Wn>Ve){if(!(xe!==Wn||ee.height!==gn.height||ti<oe||Un>me)){Un>oe&&(gn.width+=Un-oe,gn.x=oe),ti<me&&(gn.width=me-Un),V.splice(z,1);break}}else{Wn>xe&&(gn.height+=Wn-xe,gn.y=xe),hi<Ve&&(gn.height=Ve-Wn),V.splice(z,1);break}}}return V},Oi.findHostInstance=hu,Oi.findHostInstanceWithNoPortals=function(V){return V=A(V),V=V!==null?I(V):null,V===null?null:Cc(V.stateNode)},Oi.findHostInstanceWithWarning=function(V){return hu(V)},Oi.flushPassiveEffects=fo,Oi.flushSyncFromReconciler=function(V){var z=Gi;Gi|=1;var ee=Ei.T,oe=Ra();try{if(Wi(2),Ei.T=null,V)return V()}finally{Wi(oe),Ei.T=ee,Gi=z,(Gi&6)===0&&Gn(0)}},Oi.flushSyncWork=ju,Oi.focusWithin=function(V,z){if(!os)throw Error(d(363));for(V=sl(V),z=Ec(V,z),z=Array.from(z),V=0;V<z.length;){var ee=z[V++],oe=ee.tag;if(!pl(ee)){if((oe===5||oe===26||oe===27)&&Uo(ee.stateNode))return!0;for(ee=ee.child;ee!==null;)z.push(ee),ee=ee.sibling}}return!1},Oi.getFindAllNodesFailureDescription=function(V,z){if(!os)throw Error(d(363));var ee=0,oe=[];V=[sl(V),0];for(var me=0;me<V.length;){var xe=V[me++],Ve=xe.tag,Ye=V[me++],gn=z[Ye];if((Ve!==5&&Ve!==26&&Ve!==27||!pl(xe))&&(al(xe,gn)&&(oe.push(bc(gn)),Ye++,Ye>ee&&(ee=Ye)),Ye<z.length))for(xe=xe.child;xe!==null;)V.push(xe,Ye),xe=xe.sibling}if(ee<z.length){for(V=[];ee<z.length;ee++)V.push(bc(z[ee]));return`findAllNodes was able to match part of the selector:
  `+(oe.join(" > ")+`

No matching component was found for:
  `)+V.join(" > ")}return null},Oi.getPublicRootInstance=function(V){if(V=V.current,!V.child)return null;switch(V.child.tag){case 27:case 5:return Cc(V.child.stateNode);default:return V.child.stateNode}},Oi.injectIntoDevTools=function(){var V={bundleType:0,version:Xh,rendererPackageName:mu,currentDispatcherRef:Ei,reconcilerVersion:"19.2.0"};if(Mc!==null&&(V.rendererConfig=Mc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")V=!1;else{var z=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(z.isDisabled||!z.supportsFiber)V=!0;else{try{Zl=z.inject(V),Qs=z}catch{}V=!!z.checkDCE}}return V},Oi.isAlreadyRendering=function(){return(Gi&6)!==0},Oi.observeVisibleRects=function(V,z,ee,oe){if(!os)throw Error(d(363));V=qs(V,z);var me=nh(V,ee,oe).disconnect;return{disconnect:function(){me()}}},Oi.shouldError=function(){return null},Oi.shouldSuspend=function(){return!1},Oi.startHostTransition=function(V,z,ee,oe){if(V.tag!==5)throw Error(d(476));var me=Zc(V).queue;Qo(V,me,z,$l,ee===null?f:function(){var xe=Zc(V);return xe.next===null&&(xe=V.alternate.memoizedState),el(V,xe.next.queue,{},Pr()),ee(oe)})},Oi.updateContainer=function(V,z,ee,oe){var me=z.current,xe=Pr();return $h(me,xe,V,z,ee,oe),xe},Oi.updateContainerSync=function(V,z,ee,oe){return $h(z.current,2,V,z,ee,oe),2},Oi},u.exports.default=u.exports,Object.defineProperty(u.exports,"__esModule",{value:!0})})(Og)),Og.exports}var Eb;function n0(){return Eb||(Eb=1,Rm.exports=Kb()),Rm.exports}var t0=n0();const r0=Xb(t0);function createReconciler(u){const n=r0(u);return n.injectIntoDevTools(),n}const NoEventPriority=0,catalogue={},PREFIX_REGEX=/^three(?=[A-Z])/,toPascalCase=u=>`${u[0].toUpperCase()}${u.slice(1)}`;let i$1=0;const isConstructor=u=>typeof u=="function";function extend(u){if(isConstructor(u)){const n=`${i$1++}`;return catalogue[n]=u,n}else Object.assign(catalogue,u)}function validateInstance(u,n){const s=toPascalCase(u),f=catalogue[s];if(u!=="primitive"&&!f)throw new Error(`R3F: ${s} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(u==="primitive"&&!n.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(n.args!==void 0&&!Array.isArray(n.args))throw new Error("R3F: The args prop must be an array!")}function createInstance(u,n,s){var f;return u=toPascalCase(u)in catalogue?u:u.replace(PREFIX_REGEX,""),validateInstance(u,n),u==="primitive"&&(f=n.object)!=null&&f.__r3f&&delete n.object.__r3f,prepare(n.object,s,u,n)}function hideInstance(u){if(!u.isHidden){var n;u.props.attach&&(n=u.parent)!=null&&n.object?detach(u.parent,u):isObject3D(u.object)&&(u.object.visible=!1),u.isHidden=!0,invalidateInstance(u)}}function unhideInstance(u){if(u.isHidden){var n;u.props.attach&&(n=u.parent)!=null&&n.object?attach(u.parent,u):isObject3D(u.object)&&u.props.visible!==!1&&(u.object.visible=!0),u.isHidden=!1,invalidateInstance(u)}}function handleContainerEffects(u,n,s){const f=n.root.getState();if(!(!u.parent&&u.object!==f.scene)){if(!n.object){var d,y;const _=catalogue[toPascalCase(n.type)];n.object=(d=n.props.object)!=null?d:new _(...(y=n.props.args)!=null?y:[]),n.object.__r3f=n}if(applyProps(n.object,n.props),n.props.attach)attach(u,n);else if(isObject3D(n.object)&&isObject3D(u.object)){const _=u.object.children.indexOf(s==null?void 0:s.object);if(s&&_!==-1){const A=u.object.children.indexOf(n.object);if(A!==-1){u.object.children.splice(A,1);const R=A<_?_-1:_;u.object.children.splice(R,0,n.object)}else n.object.parent=u.object,u.object.children.splice(_,0,n.object),n.object.dispatchEvent({type:"added"}),u.object.dispatchEvent({type:"childadded",child:n.object})}else u.object.add(n.object)}for(const _ of n.children)handleContainerEffects(n,_);invalidateInstance(n)}}function appendChild(u,n){n&&(n.parent=u,u.children.push(n),handleContainerEffects(u,n))}function insertBefore(u,n,s){if(!n||!s)return;n.parent=u;const f=u.children.indexOf(s);f!==-1?u.children.splice(f,0,n):u.children.push(n),handleContainerEffects(u,n,s)}function disposeOnIdle(u){if(typeof u.dispose=="function"){const n=()=>{try{u.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?n():schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,n)}}function removeChild(u,n,s){if(!n)return;n.parent=null;const f=u.children.indexOf(n);f!==-1&&u.children.splice(f,1),n.props.attach?detach(u,n):isObject3D(n.object)&&isObject3D(u.object)&&(u.object.remove(n.object),removeInteractivity(findInitialRoot(n),n.object));const d=n.props.dispose!==null&&s!==!1;for(let y=n.children.length-1;y>=0;y--){const _=n.children[y];removeChild(n,_,d)}n.children.length=0,delete n.object.__r3f,d&&n.type!=="primitive"&&n.object.type!=="Scene"&&disposeOnIdle(n.object),s===void 0&&invalidateInstance(n)}function setFiberRef(u,n){for(const s of[u,u.alternate])if(s!==null)if(typeof s.ref=="function"){s.refCleanup==null||s.refCleanup();const f=s.ref(n);typeof f=="function"&&(s.refCleanup=f)}else s.ref&&(s.ref.current=n)}const reconstructed=[];function swapInstances(){for(const[s]of reconstructed){const f=s.parent;if(f){s.props.attach?detach(f,s):isObject3D(s.object)&&isObject3D(f.object)&&f.object.remove(s.object);for(const d of s.children)d.props.attach?detach(s,d):isObject3D(d.object)&&isObject3D(s.object)&&s.object.remove(d.object)}s.isHidden&&unhideInstance(s),s.object.__r3f&&delete s.object.__r3f,s.type!=="primitive"&&disposeOnIdle(s.object)}for(const[s,f,d]of reconstructed){s.props=f;const y=s.parent;if(y){var u,n;const _=catalogue[toPascalCase(s.type)];s.object=(u=s.props.object)!=null?u:new _(...(n=s.props.args)!=null?n:[]),s.object.__r3f=s,setFiberRef(d,s.object),applyProps(s.object,s.props),s.props.attach?attach(y,s):isObject3D(s.object)&&isObject3D(y.object)&&y.object.add(s.object);for(const A of s.children)A.props.attach?attach(s,A):isObject3D(A.object)&&isObject3D(s.object)&&s.object.add(A.object);invalidateInstance(s)}}reconstructed.length=0}const handleTextInstance=()=>{},NO_CONTEXT={};let currentUpdatePriority=NoEventPriority;const NoFlags=0,Update=4,reconciler=createReconciler({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance,removeChild,appendChild,appendInitialChild:appendChild,insertBefore,appendChildToContainer(u,n){const s=u.getState().scene.__r3f;!n||!s||appendChild(s,n)},removeChildFromContainer(u,n){const s=u.getState().scene.__r3f;!n||!s||removeChild(s,n)},insertInContainerBefore(u,n,s){const f=u.getState().scene.__r3f;!n||!s||!f||insertBefore(f,n,s)},getRootHostContext:()=>NO_CONTEXT,getChildHostContext:()=>NO_CONTEXT,commitUpdate(u,n,s,f,d){var y,_,A;validateInstance(n,f);let R=!1;if((u.type==="primitive"&&s.object!==f.object||((y=f.args)==null?void 0:y.length)!==((_=s.args)==null?void 0:_.length)||(A=f.args)!=null&&A.some((G,Y)=>{var q;return G!==((q=s.args)==null?void 0:q[Y])}))&&(R=!0),R)reconstructed.push([u,{...f},d]);else{const G=diffProps(u,f);Object.keys(G).length&&(Object.assign(u.props,G),applyProps(u.object,G))}(d.sibling===null||(d.flags&Update)===NoFlags)&&swapInstances()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:u=>u==null?void 0:u.object,prepareForCommit:()=>null,preparePortalMount:u=>prepare(u.getState().scene,u,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance,unhideInstance,createTextInstance:handleTextInstance,hideTextInstance:handleTextInstance,unhideTextInstance:handleTextInstance,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:reactExports.createContext(null),setCurrentUpdatePriority(u){currentUpdatePriority=u},getCurrentUpdatePriority(){return currentUpdatePriority},resolveUpdatePriority(){var u;if(currentUpdatePriority!==NoEventPriority)return currentUpdatePriority;switch(typeof window<"u"&&((u=window.event)==null?void 0:u.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return e;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return o;default:return r$1}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:packageData.version,applyViewTransitionName(u,n,s){},restoreViewTransitionName(u,n){},cancelViewTransitionName(u,n,s){},cancelRootViewTransitionName(u){},restoreRootViewTransitionName(u){},InstanceMeasurement:null,measureInstance:u=>null,wasInstanceInViewport:u=>!0,hasInstanceChanged:(u,n)=>!1,hasInstanceAffectedParent:(u,n)=>!1,suspendOnActiveViewTransition(u,n){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(u){},createViewTransitionInstance:u=>null,getCurrentGestureOffset(u){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(u,n){return u},cloneMutableTextInstance(u){return u},cloneRootViewTransitionContainer(u){throw new Error("Not implemented.")},removeRootViewTransitionClone(u,n){throw new Error("Not implemented.")},createFragmentInstance:u=>null,updateFragmentInstanceFiber(u,n){},commitNewChildToFragmentInstance(u,n){},deleteChildFromFragmentInstance(u,n){},measureClonedInstance:u=>null,maySuspendCommitOnUpdate:(u,n,s)=>!1,maySuspendCommitInSyncRender:(u,n)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(u,n)=>null}),_roots=new Map,shallowLoose={objects:"shallow",strict:!1};function computeInitialSize(u,n){if(!n&&typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement&&u.parentElement){const{width:s,height:f,top:d,left:y}=u.parentElement.getBoundingClientRect();return{width:s,height:f,top:d,left:y}}else if(!n&&typeof OffscreenCanvas<"u"&&u instanceof OffscreenCanvas)return{width:u.width,height:u.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...n}}function createRoot(u){const n=_roots.get(u),s=n==null?void 0:n.fiber,f=n==null?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");const d=typeof reportError=="function"?reportError:console.error,y=f||createStore(invalidate,advance),_=s||reconciler.createContainer(y,t,null,!1,null,"",d,d,d,null);n||_roots.set(u,{fiber:_,store:y});let A,R,I=!1,G=null;return{async configure(Y={}){let q;G=new Promise(ge=>q=ge);let{gl:K,size:Q,scene:ne,events:te,onCreated:J,shadows:ie=!1,linear:re=!1,flat:le=!1,legacy:fe=!1,orthographic:pe=!1,frameloop:de="always",dpr:se=[1,2],performance:he,raycaster:Se,camera:ve,onPointerMissed:Re}=Y,Ee=y.getState(),Oe=Ee.gl;if(!Ee.gl){const ge={canvas:u,powerPreference:"high-performance",antialias:!0,alpha:!0},De=typeof K=="function"?await K(ge):K;isRenderer(De)?Oe=De:Oe=new WebGLRenderer({...ge,...K}),Ee.set({gl:Oe})}let Ne=Ee.raycaster;Ne||Ee.set({raycaster:Ne=new Raycaster});const{params:ye,...Ae}=Se||{};if(is.equ(Ae,Ne,shallowLoose)||applyProps(Ne,{...Ae}),is.equ(ye,Ne.params,shallowLoose)||applyProps(Ne,{params:{...Ne.params,...ye}}),!Ee.camera||Ee.camera===R&&!is.equ(R,ve,shallowLoose)){R=ve;const ge=ve==null?void 0:ve.isCamera,De=ge?ve:pe?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);ge||(De.position.z=5,ve&&(applyProps(De,ve),De.manual||("aspect"in ve||"left"in ve||"right"in ve||"bottom"in ve||"top"in ve)&&(De.manual=!0,De.updateProjectionMatrix())),!Ee.camera&&!(ve!=null&&ve.rotation)&&De.lookAt(0,0,0)),Ee.set({camera:De}),Ne.camera=De}if(!Ee.scene){let ge;ne!=null&&ne.isScene?(ge=ne,prepare(ge,y,"",{})):(ge=new Scene,prepare(ge,y,"",{}),ne&&applyProps(ge,ne)),Ee.set({scene:ge})}te&&!Ee.events.handlers&&Ee.set({events:te(y)});const _e=computeInitialSize(u,Q);if(is.equ(_e,Ee.size,shallowLoose)||Ee.setSize(_e.width,_e.height,_e.top,_e.left),se&&Ee.viewport.dpr!==calculateDpr(se)&&Ee.setDpr(se),Ee.frameloop!==de&&Ee.setFrameloop(de),Ee.onPointerMissed||Ee.set({onPointerMissed:Re}),he&&!is.equ(he,Ee.performance,shallowLoose)&&Ee.set(ge=>({performance:{...ge.performance,...he}})),!Ee.xr){var Te;const ge=(He,yt)=>{const Ge=y.getState();Ge.frameloop!=="never"&&advance(He,!0,Ge,yt)},De=()=>{const He=y.getState();He.gl.xr.enabled=He.gl.xr.isPresenting,He.gl.xr.setAnimationLoop(He.gl.xr.isPresenting?ge:null),He.gl.xr.isPresenting||invalidate(He)},ze={connect(){const He=y.getState().gl;He.xr.addEventListener("sessionstart",De),He.xr.addEventListener("sessionend",De)},disconnect(){const He=y.getState().gl;He.xr.removeEventListener("sessionstart",De),He.xr.removeEventListener("sessionend",De)}};typeof((Te=Oe.xr)==null?void 0:Te.addEventListener)=="function"&&ze.connect(),Ee.set({xr:ze})}if(Oe.shadowMap){const ge=Oe.shadowMap.enabled,De=Oe.shadowMap.type;if(Oe.shadowMap.enabled=!!ie,is.boo(ie))Oe.shadowMap.type=PCFSoftShadowMap;else if(is.str(ie)){var we;const ze={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Oe.shadowMap.type=(we=ze[ie])!=null?we:PCFSoftShadowMap}else is.obj(ie)&&Object.assign(Oe.shadowMap,ie);(ge!==Oe.shadowMap.enabled||De!==Oe.shadowMap.type)&&(Oe.shadowMap.needsUpdate=!0)}return ColorManagement.enabled=!fe,I||(Oe.outputColorSpace=re?LinearSRGBColorSpace:SRGBColorSpace,Oe.toneMapping=le?NoToneMapping:ACESFilmicToneMapping),Ee.legacy!==fe&&Ee.set(()=>({legacy:fe})),Ee.linear!==re&&Ee.set(()=>({linear:re})),Ee.flat!==le&&Ee.set(()=>({flat:le})),K&&!is.fun(K)&&!isRenderer(K)&&!is.equ(K,Oe,shallowLoose)&&applyProps(Oe,K),A=J,I=!0,q(),this},render(Y){return!I&&!G&&this.configure(),G.then(()=>{reconciler.updateContainer(jsxRuntimeExports.jsx(Provider,{store:y,children:Y,onCreated:A,rootElement:u}),_,null,()=>{})}),y},unmount(){unmountComponentAtNode(u)}}}function Provider({store:u,children:n,onCreated:s,rootElement:f}){return useIsomorphicLayoutEffect(()=>{const d=u.getState();d.set(y=>({internal:{...y.internal,active:!0}})),s&&s(d),u.getState().events.connected||d.events.connect==null||d.events.connect(f)},[]),jsxRuntimeExports.jsx(context.Provider,{value:u,children:n})}function unmountComponentAtNode(u,n){const s=_roots.get(u),f=s==null?void 0:s.fiber;if(f){const d=s==null?void 0:s.store.getState();d&&(d.internal.active=!1),reconciler.updateContainer(null,f,null,()=>{d&&setTimeout(()=>{try{var y,_,A,R;d.events.disconnect==null||d.events.disconnect(),(y=d.gl)==null||(_=y.renderLists)==null||_.dispose==null||_.dispose(),(A=d.gl)==null||A.forceContextLoss==null||A.forceContextLoss(),(R=d.gl)!=null&&R.xr&&d.xr.disconnect(),dispose(d.scene),_roots.delete(u)}catch{}},500)})}}function createPortal(u,n,s){return jsxRuntimeExports.jsx(Portal,{children:u,container:n,state:s})}function Portal({state:u={},children:n,container:s}){const{events:f,size:d,...y}=u,_=useStore(),[A]=reactExports.useState(()=>new Raycaster),[R]=reactExports.useState(()=>new Vector2),I=useMutableCallback((Y,q)=>{let K;if(q.camera&&d){const Q=q.camera;K=Y.viewport.getCurrentViewport(Q,new Vector3,d),Q!==Y.camera&&updateCamera(Q,d)}return{...Y,...q,scene:s,raycaster:A,pointer:R,mouse:R,previousRoot:_,events:{...Y.events,...q.events,...f},size:{...Y.size,...d},viewport:{...Y.viewport,...K},setEvents:Q=>q.set(ne=>({...ne,events:{...ne.events,...Q}}))}}),G=reactExports.useMemo(()=>{const Y=createWithEqualityFn((K,Q)=>({...y,set:K,get:Q})),q=K=>Y.setState(Q=>I.current(K,Q));return q(_.getState()),_.subscribe(q),Y},[_,s]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:reconciler.createPortal(jsxRuntimeExports.jsx(context.Provider,{value:G,children:n}),G,null)})}const globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;function run(u,n){if(u.size)for(const{callback:s}of u.values())s(n)}function flushGlobalEffects(u,n){switch(u){case"before":return run(globalEffects,n);case"after":return run(globalAfterEffects,n);case"tail":return run(globalTailEffects,n)}}let subscribers,subscription;function update(u,n,s){let f=n.clock.getDelta();n.frameloop==="never"&&typeof u=="number"&&(f=u-n.clock.elapsedTime,n.clock.oldTime=n.clock.elapsedTime,n.clock.elapsedTime=u),subscribers=n.internal.subscribers;for(let d=0;d<subscribers.length;d++)subscription=subscribers[d],subscription.ref.current(subscription.store.getState(),f,s);return!n.internal.priority&&n.gl.render&&n.gl.render(n.scene,n.camera),n.internal.frames=Math.max(0,n.internal.frames-1),n.frameloop==="always"?1:n.internal.frames}let running=!1,useFrameInProgress=!1,repeat,frame,state;function loop(u){frame=requestAnimationFrame(loop),running=!0,repeat=0,flushGlobalEffects("before",u),useFrameInProgress=!0;for(const s of _roots.values()){var n;state=s.store.getState(),state.internal.active&&(state.frameloop==="always"||state.internal.frames>0)&&!((n=state.gl.xr)!=null&&n.isPresenting)&&(repeat+=update(u,state))}if(useFrameInProgress=!1,flushGlobalEffects("after",u),repeat===0)return flushGlobalEffects("tail",u),running=!1,cancelAnimationFrame(frame)}function invalidate(u,n=1){var s;if(!u)return _roots.forEach(f=>invalidate(f.store.getState(),n));(s=u.gl.xr)!=null&&s.isPresenting||!u.internal.active||u.frameloop==="never"||(n>1?u.internal.frames=Math.min(60,u.internal.frames+n):useFrameInProgress?u.internal.frames=2:u.internal.frames=1,running||(running=!0,requestAnimationFrame(loop)))}function advance(u,n=!0,s,f){if(n&&flushGlobalEffects("before",u),s)update(u,s,f);else for(const d of _roots.values())update(u,d.store.getState());n&&flushGlobalEffects("after",u)}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(u){const{handlePointer:n}=createEvents(u);return{priority:1,enabled:!0,compute(s,f,d){f.pointer.set(s.offsetX/f.size.width*2-1,-(s.offsetY/f.size.height)*2+1),f.raycaster.setFromCamera(f.pointer,f.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((s,f)=>({...s,[f]:n(f)}),{}),update:()=>{var s;const{events:f,internal:d}=u.getState();(s=d.lastEvent)!=null&&s.current&&f.handlers&&f.handlers.onPointerMove(d.lastEvent.current)},connect:s=>{const{set:f,events:d}=u.getState();if(d.disconnect==null||d.disconnect(),f(y=>({events:{...y.events,connected:s}})),d.handlers)for(const y in d.handlers){const _=d.handlers[y],[A,R]=DOM_EVENTS[y];s.addEventListener(A,_,{passive:R})}},disconnect:()=>{const{set:s,events:f}=u.getState();if(f.connected){if(f.handlers)for(const d in f.handlers){const y=f.handlers[d],[_]=DOM_EVENTS[d];f.connected.removeEventListener(_,y)}s(d=>({events:{...d.events,connected:void 0}}))}}}}function g(u,n){let s;return(...f)=>{window.clearTimeout(s),s=window.setTimeout(()=>u(...f),n)}}function j({debounce:u,scroll:n,polyfill:s,offsetSize:f}={debounce:0,scroll:!1,offsetSize:!1}){const d=s||(typeof window>"u"?class{}:window.ResizeObserver);if(!d)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[y,_]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),A=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:y,orientationHandler:null}),R=u?typeof u=="number"?u:u.scroll:null,I=u?typeof u=="number"?u:u.resize:null,G=reactExports.useRef(!1);reactExports.useEffect(()=>(G.current=!0,()=>void(G.current=!1)));const[Y,q,K]=reactExports.useMemo(()=>{const J=()=>{if(!A.current.element)return;const{left:ie,top:re,width:le,height:fe,bottom:pe,right:de,x:se,y:he}=A.current.element.getBoundingClientRect(),Se={left:ie,top:re,width:le,height:fe,bottom:pe,right:de,x:se,y:he};A.current.element instanceof HTMLElement&&f&&(Se.height=A.current.element.offsetHeight,Se.width=A.current.element.offsetWidth),Object.freeze(Se),G.current&&!D(A.current.lastBounds,Se)&&_(A.current.lastBounds=Se)};return[J,I?g(J,I):J,R?g(J,R):J]},[_,f,R,I]);function Q(){A.current.scrollContainers&&(A.current.scrollContainers.forEach(J=>J.removeEventListener("scroll",K,!0)),A.current.scrollContainers=null),A.current.resizeObserver&&(A.current.resizeObserver.disconnect(),A.current.resizeObserver=null),A.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",A.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",A.current.orientationHandler))}function ne(){A.current.element&&(A.current.resizeObserver=new d(K),A.current.resizeObserver.observe(A.current.element),n&&A.current.scrollContainers&&A.current.scrollContainers.forEach(J=>J.addEventListener("scroll",K,{capture:!0,passive:!0})),A.current.orientationHandler=()=>{K()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",A.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",A.current.orientationHandler))}const te=J=>{!J||J===A.current.element||(Q(),A.current.element=J,A.current.scrollContainers=E(J),ne())};return X(K,!!n),W(q),reactExports.useEffect(()=>{Q(),ne()},[n,K,q]),reactExports.useEffect(()=>Q,[]),[te,y,Y]}function W(u){reactExports.useEffect(()=>{const n=u;return window.addEventListener("resize",n),()=>void window.removeEventListener("resize",n)},[u])}function X(u,n){reactExports.useEffect(()=>{if(n){const s=u;return window.addEventListener("scroll",s,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",s,!0)}},[u,n])}function E(u){const n=[];if(!u||u===document.body)return n;const{overflow:s,overflowX:f,overflowY:d}=window.getComputedStyle(u);return[s,f,d].some(y=>y==="auto"||y==="scroll")&&n.push(u),[...n,...E(u.parentElement)]}const k=["x","y","top","bottom","left","right","width","height"],D=(u,n)=>k.every(s=>u[s]===n[s]);function CanvasImpl({ref:u,children:n,fallback:s,resize:f,style:d,gl:y,events:_=createPointerEvents,eventSource:A,eventPrefix:R,shadows:I,linear:G,flat:Y,legacy:q,orthographic:K,frameloop:Q,dpr:ne,performance:te,raycaster:J,camera:ie,scene:re,onPointerMissed:le,onCreated:fe,...pe}){reactExports.useMemo(()=>extend(THREE),[]);const de=useBridge(),[se,he]=j({scroll:!0,debounce:{scroll:50,resize:0},...f}),Se=reactExports.useRef(null),ve=reactExports.useRef(null);reactExports.useImperativeHandle(u,()=>Se.current);const Re=useMutableCallback(le),[Ee,Oe]=reactExports.useState(!1),[Ne,ye]=reactExports.useState(!1);if(Ee)throw Ee;if(Ne)throw Ne;const Ae=reactExports.useRef(null);useIsomorphicLayoutEffect(()=>{const Te=Se.current;if(he.width>0&&he.height>0&&Te){Ae.current||(Ae.current=createRoot(Te));async function we(){await Ae.current.configure({gl:y,scene:re,events:_,shadows:I,linear:G,flat:Y,legacy:q,orthographic:K,frameloop:Q,dpr:ne,performance:te,raycaster:J,camera:ie,size:he,onPointerMissed:(...ge)=>Re.current==null?void 0:Re.current(...ge),onCreated:ge=>{ge.events.connect==null||ge.events.connect(A?isRef$1(A)?A.current:A:ve.current),R&&ge.setEvents({compute:(De,ze)=>{const He=De[R+"X"],yt=De[R+"Y"];ze.pointer.set(He/ze.size.width*2-1,-(yt/ze.size.height)*2+1),ze.raycaster.setFromCamera(ze.pointer,ze.camera)}}),fe==null||fe(ge)}}),Ae.current.render(jsxRuntimeExports.jsx(de,{children:jsxRuntimeExports.jsx(ErrorBoundary,{set:ye,children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Block,{set:Oe}),children:n??null})})}))}we()}}),reactExports.useEffect(()=>{const Te=Se.current;if(Te)return()=>unmountComponentAtNode(Te)},[]);const _e=A?"none":"auto";return jsxRuntimeExports.jsx("div",{ref:ve,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:_e,...d},...pe,children:jsxRuntimeExports.jsx("div",{ref:se,style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx("canvas",{ref:Se,style:{display:"block"},children:s})})})}function Canvas(u){return jsxRuntimeExports.jsx(m,{children:jsxRuntimeExports.jsx(CanvasImpl,{...u})})}function _extends(){return _extends=Object.assign?Object.assign.bind():function(u){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var f in s)({}).hasOwnProperty.call(s,f)&&(u[f]=s[f])}return u},_extends.apply(null,arguments)}const version=parseInt(REVISION.replace(/\D+/g,""));var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(u,n){for(var s=new u16(31),f=0;f<31;++f)s[f]=n+=1<<u[f-1];for(var d=new u32(s[30]),f=1;f<30;++f)for(var y=s[f];y<s[f+1];++y)d[y]=y-s[f]<<5|f;return[s,d]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],rev=new u16(32768);for(var i=0;i<32768;++i){var x=(i&43690)>>>1|(i&21845)<<1;x=(x&52428)>>>2|(x&13107)<<2,x=(x&61680)>>>4|(x&3855)<<4,rev[i]=((x&65280)>>>8|(x&255)<<8)>>>1}var hMap=(function(u,n,s){for(var f=u.length,d=0,y=new u16(n);d<f;++d)++y[u[d]-1];var _=new u16(n);for(d=0;d<n;++d)_[d]=_[d-1]+y[d-1]<<1;var A;if(s){A=new u16(1<<n);var R=15-n;for(d=0;d<f;++d)if(u[d])for(var I=d<<4|u[d],G=n-u[d],Y=_[u[d]-1]++<<G,q=Y|(1<<G)-1;Y<=q;++Y)A[rev[Y]>>>R]=I}else for(A=new u16(f),d=0;d<f;++d)u[d]&&(A[d]=rev[_[u[d]-1]++]>>>15-u[d]);return A}),flt=new u8(288);for(var i=0;i<144;++i)flt[i]=8;for(var i=144;i<256;++i)flt[i]=9;for(var i=256;i<280;++i)flt[i]=7;for(var i=280;i<288;++i)flt[i]=8;var fdt=new u8(32);for(var i=0;i<32;++i)fdt[i]=5;var flrm=hMap(flt,9,1),fdrm=hMap(fdt,5,1),max=function(u){for(var n=u[0],s=1;s<u.length;++s)u[s]>n&&(n=u[s]);return n},bits=function(u,n,s){var f=n/8|0;return(u[f]|u[f+1]<<8)>>(n&7)&s},bits16=function(u,n){var s=n/8|0;return(u[s]|u[s+1]<<8|u[s+2]<<16)>>(n&7)},shft=function(u){return(u/8|0)+(u&7&&1)},slc=function(u,n,s){(s==null||s>u.length)&&(s=u.length);var f=new(u instanceof u16?u16:u instanceof u32?u32:u8)(s-n);return f.set(u.subarray(n,s)),f},inflt=function(u,n,s){var f=u.length;if(!f||s&&!s.l&&f<5)return n||new u8(0);var d=!n||s,y=!s||s.i;s||(s={}),n||(n=new u8(f*3));var _=function(Ge){var lt=n.length;if(Ge>lt){var Mt=new u8(Math.max(lt*2,Ge));Mt.set(n),n=Mt}},A=s.f||0,R=s.p||0,I=s.b||0,G=s.l,Y=s.d,q=s.m,K=s.n,Q=f*8;do{if(!G){s.f=A=bits(u,R,1);var ne=bits(u,R+1,3);if(R+=3,ne)if(ne==1)G=flrm,Y=fdrm,q=9,K=5;else if(ne==2){var re=bits(u,R,31)+257,le=bits(u,R+10,15)+4,fe=re+bits(u,R+5,31)+1;R+=14;for(var pe=new u8(fe),de=new u8(19),se=0;se<le;++se)de[clim[se]]=bits(u,R+se*3,7);R+=le*3;for(var he=max(de),Se=(1<<he)-1,ve=hMap(de,he,1),se=0;se<fe;){var Re=ve[bits(u,R,Se)];R+=Re&15;var te=Re>>>4;if(te<16)pe[se++]=te;else{var Ee=0,Oe=0;for(te==16?(Oe=3+bits(u,R,3),R+=2,Ee=pe[se-1]):te==17?(Oe=3+bits(u,R,7),R+=3):te==18&&(Oe=11+bits(u,R,127),R+=7);Oe--;)pe[se++]=Ee}}var Ne=pe.subarray(0,re),ye=pe.subarray(re);q=max(Ne),K=max(ye),G=hMap(Ne,q,1),Y=hMap(ye,K,1)}else throw"invalid block type";else{var te=shft(R)+4,J=u[te-4]|u[te-3]<<8,ie=te+J;if(ie>f){if(y)throw"unexpected EOF";break}d&&_(I+J),n.set(u.subarray(te,ie),I),s.b=I+=J,s.p=R=ie*8;continue}if(R>Q){if(y)throw"unexpected EOF";break}}d&&_(I+131072);for(var Ae=(1<<q)-1,_e=(1<<K)-1,Te=R;;Te=R){var Ee=G[bits16(u,R)&Ae],we=Ee>>>4;if(R+=Ee&15,R>Q){if(y)throw"unexpected EOF";break}if(!Ee)throw"invalid length/literal";if(we<256)n[I++]=we;else if(we==256){Te=R,G=null;break}else{var ge=we-254;if(we>264){var se=we-257,De=fleb[se];ge=bits(u,R,(1<<De)-1)+fl[se],R+=De}var ze=Y[bits16(u,R)&_e],He=ze>>>4;if(!ze)throw"invalid distance";R+=ze&15;var ye=fd[He];if(He>3){var De=fdeb[He];ye+=bits16(u,R)&(1<<De)-1,R+=De}if(R>Q){if(y)throw"unexpected EOF";break}d&&_(I+131072);for(var yt=I+ge;I<yt;I+=4)n[I]=n[I-ye],n[I+1]=n[I+1-ye],n[I+2]=n[I+2-ye],n[I+3]=n[I+3-ye];I=yt}}s.l=G,s.p=Te,s.b=I,G&&(A=1,s.m=q,s.d=Y,s.n=K)}while(!A);return I==n.length?n:slc(n,0,I)},et=new u8(0),zlv=function(u){if((u[0]&15)!=8||u[0]>>>4>7||(u[0]<<8|u[1])%31)throw"invalid zlib data";if(u[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function unzlibSync(u,n){return inflt((zlv(u),u.subarray(2,-4)),n)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch{}const isCubeTexture=u=>u&&u.isCubeTexture;class GroundProjectedEnv extends Mesh{constructor(n,s){var f,d;const y=isCubeTexture(n),A=((d=y?(f=n.image[0])==null?void 0:f.width:n.image.width)!=null?d:1024)/4,R=Math.floor(Math.log2(A)),I=Math.pow(2,R),G=3*Math.max(I,112),Y=4*I,q=[y?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/G}`,`#define CUBEUV_TEXEL_HEIGHT ${1/Y}`,`#define CUBEUV_MAX_MIP ${R}.0`],K=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,Q=q.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${version>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,ne={map:{value:n},height:{value:(s==null?void 0:s.height)||15},radius:{value:(s==null?void 0:s.radius)||100}},te=new IcosahedronGeometry(1,16),J=new ShaderMaterial({uniforms:ne,fragmentShader:Q,vertexShader:K,side:DoubleSide});super(te,J)}set radius(n){this.material.uniforms.radius.value=n}get radius(){return this.material.uniforms.radius.value}set height(n){this.material.uniforms.height.value=n}get height(){return this.material.uniforms.height.value}}const HorizontalBlurShader={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},VerticalBlurShader={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class RGBELoader extends DataTextureLoader{constructor(n){super(n),this.type=HalfFloatType}parse(n){const _=function(se,he){switch(se){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(he||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(he||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(he||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(he||""))}},Y=function(se,he,Se){he=he||1024;let Re=se.pos,Ee=-1,Oe=0,Ne="",ye=String.fromCharCode.apply(null,new Uint16Array(se.subarray(Re,Re+128)));for(;0>(Ee=ye.indexOf(`
`))&&Oe<he&&Re<se.byteLength;)Ne+=ye,Oe+=ye.length,Re+=128,ye+=String.fromCharCode.apply(null,new Uint16Array(se.subarray(Re,Re+128)));return-1<Ee?(se.pos+=Oe+Ee+1,Ne+ye.slice(0,Ee)):!1},q=function(se){const he=/^#\?(\S+)/,Se=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,ve=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Re=/^\s*FORMAT=(\S+)\s*$/,Ee=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Oe={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Ne,ye;for((se.pos>=se.byteLength||!(Ne=Y(se)))&&_(1,"no header found"),(ye=Ne.match(he))||_(3,"bad initial token"),Oe.valid|=1,Oe.programtype=ye[1],Oe.string+=Ne+`
`;Ne=Y(se),Ne!==!1;){if(Oe.string+=Ne+`
`,Ne.charAt(0)==="#"){Oe.comments+=Ne+`
`;continue}if((ye=Ne.match(Se))&&(Oe.gamma=parseFloat(ye[1])),(ye=Ne.match(ve))&&(Oe.exposure=parseFloat(ye[1])),(ye=Ne.match(Re))&&(Oe.valid|=2,Oe.format=ye[1]),(ye=Ne.match(Ee))&&(Oe.valid|=4,Oe.height=parseInt(ye[1],10),Oe.width=parseInt(ye[2],10)),Oe.valid&2&&Oe.valid&4)break}return Oe.valid&2||_(3,"missing format specifier"),Oe.valid&4||_(3,"missing image size specifier"),Oe},K=function(se,he,Se){const ve=he;if(ve<8||ve>32767||se[0]!==2||se[1]!==2||se[2]&128)return new Uint8Array(se);ve!==(se[2]<<8|se[3])&&_(3,"wrong scanline width");const Re=new Uint8Array(4*he*Se);Re.length||_(4,"unable to allocate buffer space");let Ee=0,Oe=0;const Ne=4*ve,ye=new Uint8Array(4),Ae=new Uint8Array(Ne);let _e=Se;for(;_e>0&&Oe<se.byteLength;){Oe+4>se.byteLength&&_(1),ye[0]=se[Oe++],ye[1]=se[Oe++],ye[2]=se[Oe++],ye[3]=se[Oe++],(ye[0]!=2||ye[1]!=2||(ye[2]<<8|ye[3])!=ve)&&_(3,"bad rgbe scanline format");let Te=0,we;for(;Te<Ne&&Oe<se.byteLength;){we=se[Oe++];const De=we>128;if(De&&(we-=128),(we===0||Te+we>Ne)&&_(3,"bad scanline data"),De){const ze=se[Oe++];for(let He=0;He<we;He++)Ae[Te++]=ze}else Ae.set(se.subarray(Oe,Oe+we),Te),Te+=we,Oe+=we}const ge=ve;for(let De=0;De<ge;De++){let ze=0;Re[Ee]=Ae[De+ze],ze+=ve,Re[Ee+1]=Ae[De+ze],ze+=ve,Re[Ee+2]=Ae[De+ze],ze+=ve,Re[Ee+3]=Ae[De+ze],Ee+=4}_e--}return Re},Q=function(se,he,Se,ve){const Re=se[he+3],Ee=Math.pow(2,Re-128)/255;Se[ve+0]=se[he+0]*Ee,Se[ve+1]=se[he+1]*Ee,Se[ve+2]=se[he+2]*Ee,Se[ve+3]=1},ne=function(se,he,Se,ve){const Re=se[he+3],Ee=Math.pow(2,Re-128)/255;Se[ve+0]=DataUtils.toHalfFloat(Math.min(se[he+0]*Ee,65504)),Se[ve+1]=DataUtils.toHalfFloat(Math.min(se[he+1]*Ee,65504)),Se[ve+2]=DataUtils.toHalfFloat(Math.min(se[he+2]*Ee,65504)),Se[ve+3]=DataUtils.toHalfFloat(1)},te=new Uint8Array(n);te.pos=0;const J=q(te),ie=J.width,re=J.height,le=K(te.subarray(te.pos),ie,re);let fe,pe,de;switch(this.type){case FloatType:de=le.length/4;const se=new Float32Array(de*4);for(let Se=0;Se<de;Se++)Q(le,Se*4,se,Se*4);fe=se,pe=FloatType;break;case HalfFloatType:de=le.length/4;const he=new Uint16Array(de*4);for(let Se=0;Se<de;Se++)ne(le,Se*4,he,Se*4);fe=he,pe=HalfFloatType;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:ie,height:re,data:fe,header:J.string,gamma:J.gamma,exposure:J.exposure,type:pe}}setDataType(n){return this.type=n,this}load(n,s,f,d){function y(_,A){switch(_.type){case FloatType:case HalfFloatType:"colorSpace"in _?_.colorSpace="srgb-linear":_.encoding=3e3,_.minFilter=LinearFilter,_.magFilter=LinearFilter,_.generateMipmaps=!1,_.flipY=!0;break}s&&s(_,A)}return super.load(n,y,f,d)}}const hasColorSpace=version>=152;class EXRLoader extends DataTextureLoader{constructor(n){super(n),this.type=HalfFloatType}parse(n){const he=Math.pow(2.7182818,2.2);function Se(Ie,Fe){for(var We=0,Nt=0;Nt<65536;++Nt)(Nt==0||Ie[Nt>>3]&1<<(Nt&7))&&(Fe[We++]=Nt);for(var mn=We-1;We<65536;)Fe[We++]=0;return mn}function ve(Ie){for(var Fe=0;Fe<16384;Fe++)Ie[Fe]={},Ie[Fe].len=0,Ie[Fe].lit=0,Ie[Fe].p=null}const Re={l:0,c:0,lc:0};function Ee(Ie,Fe,We,Nt,mn){for(;We<Ie;)Fe=Fe<<8|oi(Nt,mn),We+=8;We-=Ie,Re.l=Fe>>We&(1<<Ie)-1,Re.c=Fe,Re.lc=We}const Oe=new Array(59);function Ne(Ie){for(var Fe=0;Fe<=58;++Fe)Oe[Fe]=0;for(var Fe=0;Fe<65537;++Fe)Oe[Ie[Fe]]+=1;for(var We=0,Fe=58;Fe>0;--Fe){var Nt=We+Oe[Fe]>>1;Oe[Fe]=We,We=Nt}for(var Fe=0;Fe<65537;++Fe){var mn=Ie[Fe];mn>0&&(Ie[Fe]=mn|Oe[mn]++<<6)}}function ye(Ie,Fe,We,Nt,mn,yn,jn){for(var Dn=We,Yn=0,$n=0;mn<=yn;mn++){if(Dn.value-We.value>Nt)return!1;Ee(6,Yn,$n,Ie,Dn);var Xn=Re.l;if(Yn=Re.c,$n=Re.lc,jn[mn]=Xn,Xn==63){if(Dn.value-We.value>Nt)throw"Something wrong with hufUnpackEncTable";Ee(8,Yn,$n,Ie,Dn);var ke=Re.l+6;if(Yn=Re.c,$n=Re.lc,mn+ke>yn+1)throw"Something wrong with hufUnpackEncTable";for(;ke--;)jn[mn++]=0;mn--}else if(Xn>=59){var ke=Xn-59+2;if(mn+ke>yn+1)throw"Something wrong with hufUnpackEncTable";for(;ke--;)jn[mn++]=0;mn--}}Ne(jn)}function Ae(Ie){return Ie&63}function _e(Ie){return Ie>>6}function Te(Ie,Fe,We,Nt){for(;Fe<=We;Fe++){var mn=_e(Ie[Fe]),yn=Ae(Ie[Fe]);if(mn>>yn)throw"Invalid table entry";if(yn>14){var jn=Nt[mn>>yn-14];if(jn.len)throw"Invalid table entry";if(jn.lit++,jn.p){var Dn=jn.p;jn.p=new Array(jn.lit);for(var Yn=0;Yn<jn.lit-1;++Yn)jn.p[Yn]=Dn[Yn]}else jn.p=new Array(1);jn.p[jn.lit-1]=Fe}else if(yn)for(var $n=0,Yn=1<<14-yn;Yn>0;Yn--){var jn=Nt[(mn<<14-yn)+$n];if(jn.len||jn.p)throw"Invalid table entry";jn.len=yn,jn.lit=Fe,$n++}}return!0}const we={c:0,lc:0};function ge(Ie,Fe,We,Nt){Ie=Ie<<8|oi(We,Nt),Fe+=8,we.c=Ie,we.lc=Fe}const De={c:0,lc:0};function ze(Ie,Fe,We,Nt,mn,yn,jn,Dn,Yn,$n){if(Ie==Fe){Nt<8&&(ge(We,Nt,mn,jn),We=we.c,Nt=we.lc),Nt-=8;var Xn=We>>Nt,Xn=new Uint8Array([Xn])[0];if(Yn.value+Xn>$n)return!1;for(var ke=Dn[Yn.value-1];Xn-- >0;)Dn[Yn.value++]=ke}else if(Yn.value<$n)Dn[Yn.value++]=Ie;else return!1;De.c=We,De.lc=Nt}function He(Ie){return Ie&65535}function yt(Ie){var Fe=He(Ie);return Fe>32767?Fe-65536:Fe}const Ge={a:0,b:0};function lt(Ie,Fe){var We=yt(Ie),Nt=yt(Fe),mn=Nt,yn=We+(mn&1)+(mn>>1),jn=yn,Dn=yn-mn;Ge.a=jn,Ge.b=Dn}function Mt(Ie,Fe){var We=He(Ie),Nt=He(Fe),mn=We-(Nt>>1)&65535,yn=Nt+mn-32768&65535;Ge.a=yn,Ge.b=mn}function hn(Ie,Fe,We,Nt,mn,yn,jn){for(var Dn=jn<16384,Yn=We>mn?mn:We,$n=1,Xn;$n<=Yn;)$n<<=1;for($n>>=1,Xn=$n,$n>>=1;$n>=1;){for(var ke=0,Xe=ke+yn*(mn-Xn),Qe=yn*$n,Ze=yn*Xn,Je=Nt*$n,En=Nt*Xn,Pn,kn,Nn,ai;ke<=Xe;ke+=Ze){for(var li=ke,mi=ke+Nt*(We-Xn);li<=mi;li+=En){var zn=li+Je,di=li+Qe,Vi=di+Je;Dn?(lt(Ie[li+Fe],Ie[di+Fe]),Pn=Ge.a,Nn=Ge.b,lt(Ie[zn+Fe],Ie[Vi+Fe]),kn=Ge.a,ai=Ge.b,lt(Pn,kn),Ie[li+Fe]=Ge.a,Ie[zn+Fe]=Ge.b,lt(Nn,ai),Ie[di+Fe]=Ge.a,Ie[Vi+Fe]=Ge.b):(Mt(Ie[li+Fe],Ie[di+Fe]),Pn=Ge.a,Nn=Ge.b,Mt(Ie[zn+Fe],Ie[Vi+Fe]),kn=Ge.a,ai=Ge.b,Mt(Pn,kn),Ie[li+Fe]=Ge.a,Ie[zn+Fe]=Ge.b,Mt(Nn,ai),Ie[di+Fe]=Ge.a,Ie[Vi+Fe]=Ge.b)}if(We&$n){var di=li+Qe;Dn?lt(Ie[li+Fe],Ie[di+Fe]):Mt(Ie[li+Fe],Ie[di+Fe]),Pn=Ge.a,Ie[di+Fe]=Ge.b,Ie[li+Fe]=Pn}}if(mn&$n)for(var li=ke,mi=ke+Nt*(We-Xn);li<=mi;li+=En){var zn=li+Je;Dn?lt(Ie[li+Fe],Ie[zn+Fe]):Mt(Ie[li+Fe],Ie[zn+Fe]),Pn=Ge.a,Ie[zn+Fe]=Ge.b,Ie[li+Fe]=Pn}Xn=$n,$n>>=1}return ke}function Fn(Ie,Fe,We,Nt,mn,yn,jn,Dn,Yn,$n){for(var Xn=0,ke=0,Xe=Dn,Qe=Math.trunc(mn.value+(yn+7)/8);mn.value<Qe;)for(ge(Xn,ke,We,mn),Xn=we.c,ke=we.lc;ke>=14;){var Ze=Xn>>ke-14&16383,Je=Fe[Ze];if(Je.len)ke-=Je.len,ze(Je.lit,jn,Xn,ke,We,Nt,mn,Yn,$n,Xe),Xn=De.c,ke=De.lc;else{if(!Je.p)throw"hufDecode issues";var En;for(En=0;En<Je.lit;En++){for(var Pn=Ae(Ie[Je.p[En]]);ke<Pn&&mn.value<Qe;)ge(Xn,ke,We,mn),Xn=we.c,ke=we.lc;if(ke>=Pn&&_e(Ie[Je.p[En]])==(Xn>>ke-Pn&(1<<Pn)-1)){ke-=Pn,ze(Je.p[En],jn,Xn,ke,We,Nt,mn,Yn,$n,Xe),Xn=De.c,ke=De.lc;break}}if(En==Je.lit)throw"hufDecode issues"}}var kn=8-yn&7;for(Xn>>=kn,ke-=kn;ke>0;){var Je=Fe[Xn<<14-ke&16383];if(Je.len)ke-=Je.len,ze(Je.lit,jn,Xn,ke,We,Nt,mn,Yn,$n,Xe),Xn=De.c,ke=De.lc;else throw"hufDecode issues"}return!0}function Vn(Ie,Fe,We,Nt,mn,yn){var jn={value:0},Dn=We.value,Yn=Tn(Fe,We),$n=Tn(Fe,We);We.value+=4;var Xn=Tn(Fe,We);if(We.value+=4,Yn<0||Yn>=65537||$n<0||$n>=65537)throw"Something wrong with HUF_ENCSIZE";var ke=new Array(65537),Xe=new Array(16384);ve(Xe);var Qe=Nt-(We.value-Dn);if(ye(Ie,Fe,We,Qe,Yn,$n,ke),Xn>8*(Nt-(We.value-Dn)))throw"Something wrong with hufUncompress";Te(ke,Yn,$n,Xe),Fn(ke,Xe,Ie,Fe,We,Xn,$n,yn,mn,jn)}function ni(Ie,Fe,We){for(var Nt=0;Nt<We;++Nt)Fe[Nt]=Ie[Fe[Nt]]}function In(Ie){for(var Fe=1;Fe<Ie.length;Fe++){var We=Ie[Fe-1]+Ie[Fe]-128;Ie[Fe]=We}}function qe(Ie,Fe){for(var We=0,Nt=Math.floor((Ie.length+1)/2),mn=0,yn=Ie.length-1;!(mn>yn||(Fe[mn++]=Ie[We++],mn>yn));)Fe[mn++]=Ie[Nt++]}function vn(Ie){for(var Fe=Ie.byteLength,We=new Array,Nt=0,mn=new DataView(Ie);Fe>0;){var yn=mn.getInt8(Nt++);if(yn<0){var jn=-yn;Fe-=jn+1;for(var Dn=0;Dn<jn;Dn++)We.push(mn.getUint8(Nt++))}else{var jn=yn;Fe-=2;for(var Yn=mn.getUint8(Nt++),Dn=0;Dn<jn+1;Dn++)We.push(Yn)}}return We}function dn(Ie,Fe,We,Nt,mn,yn){var zn=new DataView(yn.buffer),jn=We[Ie.idx[0]].width,Dn=We[Ie.idx[0]].height,Yn=3,$n=Math.floor(jn/8),Xn=Math.ceil(jn/8),ke=Math.ceil(Dn/8),Xe=jn-(Xn-1)*8,Qe=Dn-(ke-1)*8,Ze={value:0},Je=new Array(Yn),En=new Array(Yn),Pn=new Array(Yn),kn=new Array(Yn),Nn=new Array(Yn);for(let pi=0;pi<Yn;++pi)Nn[pi]=Fe[Ie.idx[pi]],Je[pi]=pi<1?0:Je[pi-1]+Xn*ke,En[pi]=new Float32Array(64),Pn[pi]=new Uint16Array(64),kn[pi]=new Uint16Array(Xn*64);for(let pi=0;pi<ke;++pi){var ai=8;pi==ke-1&&(ai=Qe);var li=8;for(let wi=0;wi<Xn;++wi){wi==Xn-1&&(li=Xe);for(let si=0;si<Yn;++si)Pn[si].fill(0),Pn[si][0]=mn[Je[si]++],Mn(Ze,Nt,Pn[si]),je(Pn[si],En[si]),qn(En[si]);An(En);for(let si=0;si<Yn;++si)ri(En[si],kn[si],wi*64)}let Ln=0;for(let wi=0;wi<Yn;++wi){const si=We[Ie.idx[wi]].type;for(let tr=8*pi;tr<8*pi+ai;++tr){Ln=Nn[wi][tr];for(let Ar=0;Ar<$n;++Ar){const Zi=Ar*64+(tr&7)*8;zn.setUint16(Ln+0*si,kn[wi][Zi+0],!0),zn.setUint16(Ln+2*si,kn[wi][Zi+1],!0),zn.setUint16(Ln+4*si,kn[wi][Zi+2],!0),zn.setUint16(Ln+6*si,kn[wi][Zi+3],!0),zn.setUint16(Ln+8*si,kn[wi][Zi+4],!0),zn.setUint16(Ln+10*si,kn[wi][Zi+5],!0),zn.setUint16(Ln+12*si,kn[wi][Zi+6],!0),zn.setUint16(Ln+14*si,kn[wi][Zi+7],!0),Ln+=16*si}}if($n!=Xn)for(let tr=8*pi;tr<8*pi+ai;++tr){const Ar=Nn[wi][tr]+8*$n*2*si,Zi=$n*64+(tr&7)*8;for(let xr=0;xr<li;++xr)zn.setUint16(Ar+xr*2*si,kn[wi][Zi+xr],!0)}}}for(var mi=new Uint16Array(jn),zn=new DataView(yn.buffer),di=0;di<Yn;++di){We[Ie.idx[di]].decoded=!0;var Vi=We[Ie.idx[di]].type;if(We[di].type==2)for(var Xi=0;Xi<Dn;++Xi){const pi=Nn[di][Xi];for(var ui=0;ui<jn;++ui)mi[ui]=zn.getUint16(pi+ui*2*Vi,!0);for(var ui=0;ui<jn;++ui)zn.setFloat32(pi+ui*2*Vi,kt(mi[ui]),!0)}}}function Mn(Ie,Fe,We){for(var Nt,mn=1;mn<64;)Nt=Fe[Ie.value],Nt==65280?mn=64:Nt>>8==255?mn+=Nt&255:(We[mn]=Nt,mn++),Ie.value++}function je(Ie,Fe){Fe[0]=kt(Ie[0]),Fe[1]=kt(Ie[1]),Fe[2]=kt(Ie[5]),Fe[3]=kt(Ie[6]),Fe[4]=kt(Ie[14]),Fe[5]=kt(Ie[15]),Fe[6]=kt(Ie[27]),Fe[7]=kt(Ie[28]),Fe[8]=kt(Ie[2]),Fe[9]=kt(Ie[4]),Fe[10]=kt(Ie[7]),Fe[11]=kt(Ie[13]),Fe[12]=kt(Ie[16]),Fe[13]=kt(Ie[26]),Fe[14]=kt(Ie[29]),Fe[15]=kt(Ie[42]),Fe[16]=kt(Ie[3]),Fe[17]=kt(Ie[8]),Fe[18]=kt(Ie[12]),Fe[19]=kt(Ie[17]),Fe[20]=kt(Ie[25]),Fe[21]=kt(Ie[30]),Fe[22]=kt(Ie[41]),Fe[23]=kt(Ie[43]),Fe[24]=kt(Ie[9]),Fe[25]=kt(Ie[11]),Fe[26]=kt(Ie[18]),Fe[27]=kt(Ie[24]),Fe[28]=kt(Ie[31]),Fe[29]=kt(Ie[40]),Fe[30]=kt(Ie[44]),Fe[31]=kt(Ie[53]),Fe[32]=kt(Ie[10]),Fe[33]=kt(Ie[19]),Fe[34]=kt(Ie[23]),Fe[35]=kt(Ie[32]),Fe[36]=kt(Ie[39]),Fe[37]=kt(Ie[45]),Fe[38]=kt(Ie[52]),Fe[39]=kt(Ie[54]),Fe[40]=kt(Ie[20]),Fe[41]=kt(Ie[22]),Fe[42]=kt(Ie[33]),Fe[43]=kt(Ie[38]),Fe[44]=kt(Ie[46]),Fe[45]=kt(Ie[51]),Fe[46]=kt(Ie[55]),Fe[47]=kt(Ie[60]),Fe[48]=kt(Ie[21]),Fe[49]=kt(Ie[34]),Fe[50]=kt(Ie[37]),Fe[51]=kt(Ie[47]),Fe[52]=kt(Ie[50]),Fe[53]=kt(Ie[56]),Fe[54]=kt(Ie[59]),Fe[55]=kt(Ie[61]),Fe[56]=kt(Ie[35]),Fe[57]=kt(Ie[36]),Fe[58]=kt(Ie[48]),Fe[59]=kt(Ie[49]),Fe[60]=kt(Ie[57]),Fe[61]=kt(Ie[58]),Fe[62]=kt(Ie[62]),Fe[63]=kt(Ie[63])}function qn(Ie){const Fe=.5*Math.cos(.7853975),We=.5*Math.cos(3.14159/16),Nt=.5*Math.cos(3.14159/8),mn=.5*Math.cos(3*3.14159/16),yn=.5*Math.cos(5*3.14159/16),jn=.5*Math.cos(3*3.14159/8),Dn=.5*Math.cos(7*3.14159/16);for(var Yn=new Array(4),$n=new Array(4),Xn=new Array(4),ke=new Array(4),Xe=0;Xe<8;++Xe){var Qe=Xe*8;Yn[0]=Nt*Ie[Qe+2],Yn[1]=jn*Ie[Qe+2],Yn[2]=Nt*Ie[Qe+6],Yn[3]=jn*Ie[Qe+6],$n[0]=We*Ie[Qe+1]+mn*Ie[Qe+3]+yn*Ie[Qe+5]+Dn*Ie[Qe+7],$n[1]=mn*Ie[Qe+1]-Dn*Ie[Qe+3]-We*Ie[Qe+5]-yn*Ie[Qe+7],$n[2]=yn*Ie[Qe+1]-We*Ie[Qe+3]+Dn*Ie[Qe+5]+mn*Ie[Qe+7],$n[3]=Dn*Ie[Qe+1]-yn*Ie[Qe+3]+mn*Ie[Qe+5]-We*Ie[Qe+7],Xn[0]=Fe*(Ie[Qe+0]+Ie[Qe+4]),Xn[3]=Fe*(Ie[Qe+0]-Ie[Qe+4]),Xn[1]=Yn[0]+Yn[3],Xn[2]=Yn[1]-Yn[2],ke[0]=Xn[0]+Xn[1],ke[1]=Xn[3]+Xn[2],ke[2]=Xn[3]-Xn[2],ke[3]=Xn[0]-Xn[1],Ie[Qe+0]=ke[0]+$n[0],Ie[Qe+1]=ke[1]+$n[1],Ie[Qe+2]=ke[2]+$n[2],Ie[Qe+3]=ke[3]+$n[3],Ie[Qe+4]=ke[3]-$n[3],Ie[Qe+5]=ke[2]-$n[2],Ie[Qe+6]=ke[1]-$n[1],Ie[Qe+7]=ke[0]-$n[0]}for(var Ze=0;Ze<8;++Ze)Yn[0]=Nt*Ie[16+Ze],Yn[1]=jn*Ie[16+Ze],Yn[2]=Nt*Ie[48+Ze],Yn[3]=jn*Ie[48+Ze],$n[0]=We*Ie[8+Ze]+mn*Ie[24+Ze]+yn*Ie[40+Ze]+Dn*Ie[56+Ze],$n[1]=mn*Ie[8+Ze]-Dn*Ie[24+Ze]-We*Ie[40+Ze]-yn*Ie[56+Ze],$n[2]=yn*Ie[8+Ze]-We*Ie[24+Ze]+Dn*Ie[40+Ze]+mn*Ie[56+Ze],$n[3]=Dn*Ie[8+Ze]-yn*Ie[24+Ze]+mn*Ie[40+Ze]-We*Ie[56+Ze],Xn[0]=Fe*(Ie[Ze]+Ie[32+Ze]),Xn[3]=Fe*(Ie[Ze]-Ie[32+Ze]),Xn[1]=Yn[0]+Yn[3],Xn[2]=Yn[1]-Yn[2],ke[0]=Xn[0]+Xn[1],ke[1]=Xn[3]+Xn[2],ke[2]=Xn[3]-Xn[2],ke[3]=Xn[0]-Xn[1],Ie[0+Ze]=ke[0]+$n[0],Ie[8+Ze]=ke[1]+$n[1],Ie[16+Ze]=ke[2]+$n[2],Ie[24+Ze]=ke[3]+$n[3],Ie[32+Ze]=ke[3]-$n[3],Ie[40+Ze]=ke[2]-$n[2],Ie[48+Ze]=ke[1]-$n[1],Ie[56+Ze]=ke[0]-$n[0]}function An(Ie){for(var Fe=0;Fe<64;++Fe){var We=Ie[0][Fe],Nt=Ie[1][Fe],mn=Ie[2][Fe];Ie[0][Fe]=We+1.5747*mn,Ie[1][Fe]=We-.1873*Nt-.4682*mn,Ie[2][Fe]=We+1.8556*Nt}}function ri(Ie,Fe,We){for(var Nt=0;Nt<64;++Nt)Fe[We+Nt]=DataUtils.toHalfFloat(On(Ie[Nt]))}function On(Ie){return Ie<=1?Math.sign(Ie)*Math.pow(Math.abs(Ie),2.2):Math.sign(Ie)*Math.pow(he,Math.abs(Ie)-1)}function Be(Ie){return new DataView(Ie.array.buffer,Ie.offset.value,Ie.size)}function Pe(Ie){var Fe=Ie.viewer.buffer.slice(Ie.offset.value,Ie.offset.value+Ie.size),We=new Uint8Array(vn(Fe)),Nt=new Uint8Array(We.length);return In(We),qe(We,Nt),new DataView(Nt.buffer)}function Ke(Ie){var Fe=Ie.array.slice(Ie.offset.value,Ie.offset.value+Ie.size),We=unzlibSync(Fe),Nt=new Uint8Array(We.length);return In(We),qe(We,Nt),new DataView(Nt.buffer)}function Ft(Ie){for(var Fe=Ie.viewer,We={value:Ie.offset.value},Nt=new Uint16Array(Ie.width*Ie.scanlineBlockSize*(Ie.channels*Ie.type)),mn=new Uint8Array(8192),yn=0,jn=new Array(Ie.channels),Dn=0;Dn<Ie.channels;Dn++)jn[Dn]={},jn[Dn].start=yn,jn[Dn].end=jn[Dn].start,jn[Dn].nx=Ie.width,jn[Dn].ny=Ie.lines,jn[Dn].size=Ie.type,yn+=jn[Dn].nx*jn[Dn].ny*jn[Dn].size;var Yn=Hn(Fe,We),$n=Hn(Fe,We);if($n>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Yn<=$n)for(var Dn=0;Dn<$n-Yn+1;Dn++)mn[Dn+Yn]=Jn(Fe,We);var Xn=new Uint16Array(65536),ke=Se(mn,Xn),Xe=Tn(Fe,We);Vn(Ie.array,Fe,We,Xe,Nt,yn);for(var Dn=0;Dn<Ie.channels;++Dn)for(var Qe=jn[Dn],Ze=0;Ze<jn[Dn].size;++Ze)hn(Nt,Qe.start+Ze,Qe.nx,Qe.size,Qe.ny,Qe.nx*Qe.size,ke);ni(Xn,Nt,yn);for(var Je=0,En=new Uint8Array(Nt.buffer.byteLength),Pn=0;Pn<Ie.lines;Pn++)for(var kn=0;kn<Ie.channels;kn++){var Qe=jn[kn],Nn=Qe.nx*Qe.size,ai=new Uint8Array(Nt.buffer,Qe.end*2,Nn*2);En.set(ai,Je),Je+=Nn*2,Qe.end+=Nn}return new DataView(En.buffer)}function bn(Ie){var Fe=Ie.array.slice(Ie.offset.value,Ie.offset.value+Ie.size),We=unzlibSync(Fe);const Nt=Ie.lines*Ie.channels*Ie.width,mn=Ie.type==1?new Uint16Array(Nt):new Uint32Array(Nt);let yn=0,jn=0;const Dn=new Array(4);for(let Yn=0;Yn<Ie.lines;Yn++)for(let $n=0;$n<Ie.channels;$n++){let Xn=0;switch(Ie.type){case 1:Dn[0]=yn,Dn[1]=Dn[0]+Ie.width,yn=Dn[1]+Ie.width;for(let ke=0;ke<Ie.width;++ke){const Xe=We[Dn[0]++]<<8|We[Dn[1]++];Xn+=Xe,mn[jn]=Xn,jn++}break;case 2:Dn[0]=yn,Dn[1]=Dn[0]+Ie.width,Dn[2]=Dn[1]+Ie.width,yn=Dn[2]+Ie.width;for(let ke=0;ke<Ie.width;++ke){const Xe=We[Dn[0]++]<<24|We[Dn[1]++]<<16|We[Dn[2]++]<<8;Xn+=Xe,mn[jn]=Xn,jn++}break}}return new DataView(mn.buffer)}function ln(Ie){var Fe=Ie.viewer,We={value:Ie.offset.value},Nt=new Uint8Array(Ie.width*Ie.lines*(Ie.channels*Ie.type*2)),mn={version:ei(Fe,We),unknownUncompressedSize:ei(Fe,We),unknownCompressedSize:ei(Fe,We),acCompressedSize:ei(Fe,We),dcCompressedSize:ei(Fe,We),rleCompressedSize:ei(Fe,We),rleUncompressedSize:ei(Fe,We),rleRawSize:ei(Fe,We),totalAcUncompressedCount:ei(Fe,We),totalDcUncompressedCount:ei(Fe,We),acCompression:ei(Fe,We)};if(mn.version<2)throw"EXRLoader.parse: "+es.compression+" version "+mn.version+" is unsupported";for(var yn=new Array,jn=Hn(Fe,We)-2;jn>0;){var Dn=Zn(Fe.buffer,We),Yn=Jn(Fe,We),$n=Yn>>2&3,Xn=(Yn>>4)-1,ke=new Int8Array([Xn])[0],Xe=Jn(Fe,We);yn.push({name:Dn,index:ke,type:Xe,compression:$n}),jn-=Dn.length+3}for(var Qe=es.channels,Ze=new Array(Ie.channels),Je=0;Je<Ie.channels;++Je){var En=Ze[Je]={},Pn=Qe[Je];En.name=Pn.name,En.compression=0,En.decoded=!1,En.type=Pn.pixelType,En.pLinear=Pn.pLinear,En.width=Ie.width,En.height=Ie.lines}for(var kn={idx:new Array(3)},Nn=0;Nn<Ie.channels;++Nn)for(var En=Ze[Nn],Je=0;Je<yn.length;++Je){var ai=yn[Je];En.name==ai.name&&(En.compression=ai.compression,ai.index>=0&&(kn.idx[ai.index]=Nn),En.offset=Nn)}if(mn.acCompressedSize>0)switch(mn.acCompression){case 0:var zn=new Uint16Array(mn.totalAcUncompressedCount);Vn(Ie.array,Fe,We,mn.acCompressedSize,zn,mn.totalAcUncompressedCount);break;case 1:var li=Ie.array.slice(We.value,We.value+mn.totalAcUncompressedCount),mi=unzlibSync(li),zn=new Uint16Array(mi.buffer);We.value+=mn.totalAcUncompressedCount;break}if(mn.dcCompressedSize>0){var di={array:Ie.array,offset:We,size:mn.dcCompressedSize},Vi=new Uint16Array(Ke(di).buffer);We.value+=mn.dcCompressedSize}if(mn.rleRawSize>0){var li=Ie.array.slice(We.value,We.value+mn.rleCompressedSize),mi=unzlibSync(li),Xi=vn(mi.buffer);We.value+=mn.rleCompressedSize}for(var ui=0,pi=new Array(Ze.length),Je=0;Je<pi.length;++Je)pi[Je]=new Array;for(var Ln=0;Ln<Ie.lines;++Ln)for(var wi=0;wi<Ze.length;++wi)pi[wi].push(ui),ui+=Ze[wi].width*Ie.type*2;dn(kn,pi,Ze,zn,Vi,Nt);for(var Je=0;Je<Ze.length;++Je){var En=Ze[Je];if(!En.decoded)switch(En.compression){case 2:for(var si=0,tr=0,Ln=0;Ln<Ie.lines;++Ln){for(var Ar=pi[Je][si],Zi=0;Zi<En.width;++Zi){for(var xr=0;xr<2*En.type;++xr)Nt[Ar++]=Xi[tr+xr*En.width*En.height];tr++}si++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Nt.buffer)}function Zn(Ie,Fe){for(var We=new Uint8Array(Ie),Nt=0;We[Fe.value+Nt]!=0;)Nt+=1;var mn=new TextDecoder().decode(We.slice(Fe.value,Fe.value+Nt));return Fe.value=Fe.value+Nt+1,mn}function Gn(Ie,Fe,We){var Nt=new TextDecoder().decode(new Uint8Array(Ie).slice(Fe.value,Fe.value+We));return Fe.value=Fe.value+We,Nt}function fi(Ie,Fe){var We=wn(Ie,Fe),Nt=Tn(Ie,Fe);return[We,Nt]}function xi(Ie,Fe){var We=Tn(Ie,Fe),Nt=Tn(Ie,Fe);return[We,Nt]}function wn(Ie,Fe){var We=Ie.getInt32(Fe.value,!0);return Fe.value=Fe.value+4,We}function Tn(Ie,Fe){var We=Ie.getUint32(Fe.value,!0);return Fe.value=Fe.value+4,We}function oi(Ie,Fe){var We=Ie[Fe.value];return Fe.value=Fe.value+1,We}function Jn(Ie,Fe){var We=Ie.getUint8(Fe.value);return Fe.value=Fe.value+1,We}const ei=function(Ie,Fe){let We;return"getBigInt64"in DataView.prototype?We=Number(Ie.getBigInt64(Fe.value,!0)):We=Ie.getUint32(Fe.value+4,!0)+Number(Ie.getUint32(Fe.value,!0)<<32),Fe.value+=8,We};function gi(Ie,Fe){var We=Ie.getFloat32(Fe.value,!0);return Fe.value+=4,We}function dt(Ie,Fe){return DataUtils.toHalfFloat(gi(Ie,Fe))}function kt(Ie){var Fe=(Ie&31744)>>10,We=Ie&1023;return(Ie>>15?-1:1)*(Fe?Fe===31?We?NaN:1/0:Math.pow(2,Fe-15)*(1+We/1024):6103515625e-14*(We/1024))}function Hn(Ie,Fe){var We=Ie.getUint16(Fe.value,!0);return Fe.value+=2,We}function Kn(Ie,Fe){return kt(Hn(Ie,Fe))}function Bn(Ie,Fe,We,Nt){for(var mn=We.value,yn=[];We.value<mn+Nt-1;){var jn=Zn(Fe,We),Dn=wn(Ie,We),Yn=Jn(Ie,We);We.value+=3;var $n=wn(Ie,We),Xn=wn(Ie,We);yn.push({name:jn,pixelType:Dn,pLinear:Yn,xSampling:$n,ySampling:Xn})}return We.value+=1,yn}function pn(Ie,Fe){var We=gi(Ie,Fe),Nt=gi(Ie,Fe),mn=gi(Ie,Fe),yn=gi(Ie,Fe),jn=gi(Ie,Fe),Dn=gi(Ie,Fe),Yn=gi(Ie,Fe),$n=gi(Ie,Fe);return{redX:We,redY:Nt,greenX:mn,greenY:yn,blueX:jn,blueY:Dn,whiteX:Yn,whiteY:$n}}function ci(Ie,Fe){var We=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Nt=Jn(Ie,Fe);return We[Nt]}function Ai(Ie,Fe){var We=Tn(Ie,Fe),Nt=Tn(Ie,Fe),mn=Tn(Ie,Fe),yn=Tn(Ie,Fe);return{xMin:We,yMin:Nt,xMax:mn,yMax:yn}}function ji(Ie,Fe){var We=["INCREASING_Y"],Nt=Jn(Ie,Fe);return We[Nt]}function Ii(Ie,Fe){var We=gi(Ie,Fe),Nt=gi(Ie,Fe);return[We,Nt]}function Jr(Ie,Fe){var We=gi(Ie,Fe),Nt=gi(Ie,Fe),mn=gi(Ie,Fe);return[We,Nt,mn]}function fs(Ie,Fe,We,Nt,mn){if(Nt==="string"||Nt==="stringvector"||Nt==="iccProfile")return Gn(Fe,We,mn);if(Nt==="chlist")return Bn(Ie,Fe,We,mn);if(Nt==="chromaticities")return pn(Ie,We);if(Nt==="compression")return ci(Ie,We);if(Nt==="box2i")return Ai(Ie,We);if(Nt==="lineOrder")return ji(Ie,We);if(Nt==="float")return gi(Ie,We);if(Nt==="v2f")return Ii(Ie,We);if(Nt==="v3f")return Jr(Ie,We);if(Nt==="int")return wn(Ie,We);if(Nt==="rational")return fi(Ie,We);if(Nt==="timecode")return xi(Ie,We);if(Nt==="preview")return We.value+=mn,"skipped";We.value+=mn}function As(Ie,Fe,We){const Nt={};if(Ie.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Nt.version=Ie.getUint8(4);const mn=Ie.getUint8(5);Nt.spec={singleTile:!!(mn&2),longName:!!(mn&4),deepFormat:!!(mn&8),multiPart:!!(mn&16)},We.value=8;for(var yn=!0;yn;){var jn=Zn(Fe,We);if(jn==0)yn=!1;else{var Dn=Zn(Fe,We),Yn=Tn(Ie,We),$n=fs(Ie,Fe,We,Dn,Yn);$n===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Dn}'.`):Nt[jn]=$n}}if((mn&-5)!=0)throw console.error("EXRHeader:",Nt),"THREE.EXRLoader: provided file is currently unsupported.";return Nt}function Hs(Ie,Fe,We,Nt,mn){const yn={size:0,viewer:Fe,array:We,offset:Nt,width:Ie.dataWindow.xMax-Ie.dataWindow.xMin+1,height:Ie.dataWindow.yMax-Ie.dataWindow.yMin+1,channels:Ie.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:Ie.channels[0].pixelType,uncompress:null,getter:null,format:null,[hasColorSpace?"colorSpace":"encoding"]:null};switch(Ie.compression){case"NO_COMPRESSION":yn.lines=1,yn.uncompress=Be;break;case"RLE_COMPRESSION":yn.lines=1,yn.uncompress=Pe;break;case"ZIPS_COMPRESSION":yn.lines=1,yn.uncompress=Ke;break;case"ZIP_COMPRESSION":yn.lines=16,yn.uncompress=Ke;break;case"PIZ_COMPRESSION":yn.lines=32,yn.uncompress=Ft;break;case"PXR24_COMPRESSION":yn.lines=16,yn.uncompress=bn;break;case"DWAA_COMPRESSION":yn.lines=32,yn.uncompress=ln;break;case"DWAB_COMPRESSION":yn.lines=256,yn.uncompress=ln;break;default:throw"EXRLoader.parse: "+Ie.compression+" is unsupported"}if(yn.scanlineBlockSize=yn.lines,yn.type==1)switch(mn){case FloatType:yn.getter=Kn,yn.inputSize=2;break;case HalfFloatType:yn.getter=Hn,yn.inputSize=2;break}else if(yn.type==2)switch(mn){case FloatType:yn.getter=gi,yn.inputSize=4;break;case HalfFloatType:yn.getter=dt,yn.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+yn.type+" for "+Ie.compression+".";yn.blockCount=(Ie.dataWindow.yMax+1)/yn.scanlineBlockSize;for(var jn=0;jn<yn.blockCount;jn++)ei(Fe,Nt);yn.outputChannels=yn.channels==3?4:yn.channels;const Dn=yn.width*yn.height*yn.outputChannels;switch(mn){case FloatType:yn.byteArray=new Float32Array(Dn),yn.channels<yn.outputChannels&&yn.byteArray.fill(1,0,Dn);break;case HalfFloatType:yn.byteArray=new Uint16Array(Dn),yn.channels<yn.outputChannels&&yn.byteArray.fill(15360,0,Dn);break;default:console.error("THREE.EXRLoader: unsupported type: ",mn);break}return yn.bytesPerLine=yn.width*yn.inputSize*yn.channels,yn.outputChannels==4?yn.format=RGBAFormat:yn.format=RedFormat,hasColorSpace?yn.colorSpace="srgb-linear":yn.encoding=3e3,yn}const na=new DataView(n),Is=new Uint8Array(n),$r={value:0},es=As(na,n,$r),bi=Hs(es,na,Is,$r,this.type),ds={value:0},pr={R:0,G:1,B:2,A:3,Y:0};for(let Ie=0;Ie<bi.height/bi.scanlineBlockSize;Ie++){const Fe=Tn(na,$r);bi.size=Tn(na,$r),bi.lines=Fe+bi.scanlineBlockSize>bi.height?bi.height-Fe:bi.scanlineBlockSize;const Nt=bi.size<bi.lines*bi.bytesPerLine?bi.uncompress(bi):Be(bi);$r.value+=bi.size;for(let mn=0;mn<bi.scanlineBlockSize;mn++){const yn=mn+Ie*bi.scanlineBlockSize;if(yn>=bi.height)break;for(let jn=0;jn<bi.channels;jn++){const Dn=pr[es.channels[jn].name];for(let Yn=0;Yn<bi.width;Yn++){ds.value=(mn*(bi.channels*bi.width)+jn*bi.width+Yn)*bi.inputSize;const $n=(bi.height-1-yn)*(bi.width*bi.outputChannels)+Yn*bi.outputChannels+Dn;bi.byteArray[$n]=bi.getter(Nt,ds)}}}}return{header:es,width:bi.width,height:bi.height,data:bi.byteArray,format:bi.format,[hasColorSpace?"colorSpace":"encoding"]:bi[hasColorSpace?"colorSpace":"encoding"],type:this.type}}setDataType(n){return this.type=n,this}load(n,s,f,d){function y(_,A){hasColorSpace?_.colorSpace=A.colorSpace:_.encoding=A.encoding,_.minFilter=LinearFilter,_.magFilter=LinearFilter,_.generateMipmaps=!1,_.flipY=!1,s&&s(_,A)}return super.load(n,y,f,d)}}const scriptRel="modulepreload",assetsURL=function(u){return"/"+u},seen={},__vitePreload=function(n,s,f){let d=Promise.resolve();if(s&&s.length>0){let _=function(I){return Promise.all(I.map(G=>Promise.resolve(G).then(Y=>({status:"fulfilled",value:Y}),Y=>({status:"rejected",reason:Y}))))};document.getElementsByTagName("link");const A=document.querySelector("meta[property=csp-nonce]"),R=(A==null?void 0:A.nonce)||(A==null?void 0:A.getAttribute("nonce"));d=_(s.map(I=>{if(I=assetsURL(I),I in seen)return;seen[I]=!0;const G=I.endsWith(".css"),Y=G?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${I}"]${Y}`))return;const q=document.createElement("link");if(q.rel=G?"stylesheet":scriptRel,G||(q.as="script"),q.crossOrigin="",q.href=I,R&&q.setAttribute("nonce",R),document.head.appendChild(q),G)return new Promise((K,Q)=>{q.addEventListener("load",K),q.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${I}`)))})}))}function y(_){const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=_,window.dispatchEvent(A),!A.defaultPrevented)throw _}return d.then(_=>{for(const A of _||[])A.status==="rejected"&&y(A.reason);return n().catch(y)})},Float=reactExports.forwardRef(({children:u,enabled:n=!0,speed:s=1,rotationIntensity:f=1,floatIntensity:d=1,floatingRange:y=[-.1,.1],autoInvalidate:_=!1,...A},R)=>{const I=reactExports.useRef(null);reactExports.useImperativeHandle(R,()=>I.current,[]);const G=reactExports.useRef(Math.random()*1e4);return useFrame(Y=>{var q,K;if(!n||s===0)return;_&&Y.invalidate();const Q=G.current+Y.clock.elapsedTime;I.current.rotation.x=Math.cos(Q/4*s)/8*f,I.current.rotation.y=Math.sin(Q/4*s)/8*f,I.current.rotation.z=Math.sin(Q/4*s)/20*f;let ne=Math.sin(Q/4*s)/10;ne=MathUtils.mapLinear(ne,-.1,.1,(q=y==null?void 0:y[0])!==null&&q!==void 0?q:-.1,(K=y==null?void 0:y[1])!==null&&K!==void 0?K:.1),I.current.position.y=ne*d,I.current.updateMatrix()}),reactExports.createElement("group",A,reactExports.createElement("group",{ref:I,matrixAutoUpdate:!1},u))}),getBufferForType=(u,n,s)=>{let f;switch(u){case UnsignedByteType:f=new Uint8ClampedArray(n*s*4);break;case HalfFloatType:f=new Uint16Array(n*s*4);break;case UnsignedIntType:f=new Uint32Array(n*s*4);break;case ByteType:f=new Int8Array(n*s*4);break;case ShortType:f=new Int16Array(n*s*4);break;case IntType:f=new Int32Array(n*s*4);break;case FloatType:f=new Float32Array(n*s*4);break;default:throw new Error("Unsupported data type")}return f};let _canReadPixelsResult;const canReadPixels=(u,n,s,f)=>{if(_canReadPixelsResult!==void 0)return _canReadPixelsResult;const d=new WebGLRenderTarget(1,1,f);n.setRenderTarget(d);const y=new Mesh(new PlaneGeometry,new MeshBasicMaterial({color:16777215}));n.render(y,s),n.setRenderTarget(null);const _=getBufferForType(u,d.width,d.height);return n.readRenderTargetPixels(d,0,0,d.width,d.height,_),d.dispose(),y.geometry.dispose(),y.material.dispose(),_canReadPixelsResult=_[0]!==0,_canReadPixelsResult};class QuadRenderer{constructor(n){as(this,"_renderer");as(this,"_rendererIsDisposable",!1);as(this,"_material");as(this,"_scene");as(this,"_camera");as(this,"_quad");as(this,"_renderTarget");as(this,"_width");as(this,"_height");as(this,"_type");as(this,"_colorSpace");as(this,"_supportsReadPixels",!0);as(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(n){throw this._renderer.setRenderTarget(null),n}this._renderer.setRenderTarget(null)});var f,d,y,_,A,R,I,G,Y,q,K,Q,ne,te,J,ie;this._width=n.width,this._height=n.height,this._type=n.type,this._colorSpace=n.colorSpace;const s={format:RGBAFormat,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((f=n.renderTargetOptions)==null?void 0:f.anisotropy)!==void 0?(d=n.renderTargetOptions)==null?void 0:d.anisotropy:1,generateMipmaps:((y=n.renderTargetOptions)==null?void 0:y.generateMipmaps)!==void 0?(_=n.renderTargetOptions)==null?void 0:_.generateMipmaps:!1,magFilter:((A=n.renderTargetOptions)==null?void 0:A.magFilter)!==void 0?(R=n.renderTargetOptions)==null?void 0:R.magFilter:LinearFilter,minFilter:((I=n.renderTargetOptions)==null?void 0:I.minFilter)!==void 0?(G=n.renderTargetOptions)==null?void 0:G.minFilter:LinearFilter,samples:((Y=n.renderTargetOptions)==null?void 0:Y.samples)!==void 0?(q=n.renderTargetOptions)==null?void 0:q.samples:void 0,wrapS:((K=n.renderTargetOptions)==null?void 0:K.wrapS)!==void 0?(Q=n.renderTargetOptions)==null?void 0:Q.wrapS:ClampToEdgeWrapping,wrapT:((ne=n.renderTargetOptions)==null?void 0:ne.wrapT)!==void 0?(te=n.renderTargetOptions)==null?void 0:te.wrapT:ClampToEdgeWrapping};if(this._material=n.material,n.renderer?this._renderer=n.renderer:(this._renderer=QuadRenderer.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Scene,this._camera=new OrthographicCamera,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!canReadPixels(this._type,this._renderer,this._camera,s)){let re;switch(this._type){case HalfFloatType:re=this._renderer.extensions.has("EXT_color_buffer_float")?FloatType:void 0;break}re!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${FloatType}`),this._type=re):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Mesh(new PlaneGeometry,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new WebGLRenderTarget(this.width,this.height,s),this._renderTarget.texture.mapping=((J=n.renderTargetOptions)==null?void 0:J.mapping)!==void 0?(ie=n.renderTargetOptions)==null?void 0:ie.mapping:UVMapping}static instantiateRenderer(){const n=new WebGLRenderer;return n.setSize(128,128),n}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const n=getBufferForType(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,n),n}toDataTexture(n){const s=new DataTexture(this.toArray(),this.width,this.height,RGBAFormat,this._type,(n==null?void 0:n.mapping)||UVMapping,(n==null?void 0:n.wrapS)||ClampToEdgeWrapping,(n==null?void 0:n.wrapT)||ClampToEdgeWrapping,(n==null?void 0:n.magFilter)||LinearFilter,(n==null?void 0:n.minFilter)||LinearFilter,(n==null?void 0:n.anisotropy)||1,LinearSRGBColorSpace);return s.generateMipmaps=(n==null?void 0:n.generateMipmaps)!==void 0?n==null?void 0:n.generateMipmaps:!1,s}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(n){this.disposeOnDemandRenderer(),n&&this.renderTarget.dispose(),this.material instanceof ShaderMaterial&&Object.values(this.material.uniforms).forEach(s=>{s.value instanceof Texture&&s.value.dispose()}),Object.values(this.material).forEach(s=>{s instanceof Texture&&s.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(n){this._width=n,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(n){this._height=n,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(n){this._renderTarget=n,this._width=n.width,this._height=n.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class GainMapNotFoundError extends Error{}class XMPMetadataNotFoundError extends Error{}const getXMLValue=(u,n,s)=>{const f=new RegExp(`${n}="([^"]*)"`,"i").exec(u);if(f)return f[1];const d=new RegExp(`<${n}[^>]*>([\\s\\S]*?)</${n}>`,"i").exec(u);if(d){const y=d[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return y&&y.length===3?y.map(_=>_.replace(/<\/?rdf:li>/g,"")):d[1].trim()}if(s!==void 0)return s;throw new Error(`Can't find ${n} in gainmap metadata`)},extractXMP=u=>{let n;typeof TextDecoder<"u"?n=new TextDecoder().decode(u):n=u.toString();let s=n.indexOf("<x:xmpmeta");for(;s!==-1;){const f=n.indexOf("x:xmpmeta>",s),d=n.slice(s,f+10);try{const y=getXMLValue(d,"hdrgm:GainMapMin","0"),_=getXMLValue(d,"hdrgm:GainMapMax"),A=getXMLValue(d,"hdrgm:Gamma","1"),R=getXMLValue(d,"hdrgm:OffsetSDR","0.015625"),I=getXMLValue(d,"hdrgm:OffsetHDR","0.015625"),G=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(d),Y=G?G[1]:"0",q=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(d);if(!q)throw new Error("Incomplete gainmap metadata");const K=q[1];return{gainMapMin:Array.isArray(y)?y.map(Q=>parseFloat(Q)):[parseFloat(y),parseFloat(y),parseFloat(y)],gainMapMax:Array.isArray(_)?_.map(Q=>parseFloat(Q)):[parseFloat(_),parseFloat(_),parseFloat(_)],gamma:Array.isArray(A)?A.map(Q=>parseFloat(Q)):[parseFloat(A),parseFloat(A),parseFloat(A)],offsetSdr:Array.isArray(R)?R.map(Q=>parseFloat(Q)):[parseFloat(R),parseFloat(R),parseFloat(R)],offsetHdr:Array.isArray(I)?I.map(Q=>parseFloat(Q)):[parseFloat(I),parseFloat(I),parseFloat(I)],hdrCapacityMin:parseFloat(Y),hdrCapacityMax:parseFloat(K)}}catch{}s=n.indexOf("<x:xmpmeta",f)}};class MPFExtractor{constructor(n){as(this,"options");this.options={debug:n&&n.debug!==void 0?n.debug:!1,extractFII:n&&n.extractFII!==void 0?n.extractFII:!0,extractNonFII:n&&n.extractNonFII!==void 0?n.extractNonFII:!0}}extract(n){return new Promise((s,f)=>{const d=this.options.debug,y=new DataView(n.buffer);if(y.getUint16(0)!==65496){f(new Error("Not a valid jpeg"));return}const _=y.byteLength;let A=2,R=0,I;for(;A<_;){if(++R>250){f(new Error(`Found no marker after ${R} loops `));return}if(y.getUint8(A)!==255){f(new Error(`Not a valid marker at offset 0x${A.toString(16)}, found: 0x${y.getUint8(A).toString(16)}`));return}if(I=y.getUint8(A+1),d&&console.log(`Marker: ${I.toString(16)}`),I===226){d&&console.log("Found APP2 marker (0xffe2)");const G=A+4;if(y.getUint32(G)===1297106432){const Y=G+4;let q;if(y.getUint16(Y)===18761)q=!1;else if(y.getUint16(Y)===19789)q=!0;else{f(new Error("No valid endianness marker found in TIFF header"));return}if(y.getUint16(Y+2,!q)!==42){f(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const K=y.getUint32(Y+4,!q);if(K<8){f(new Error("Not valid TIFF data! (First offset less than 8)"));return}const Q=Y+K,ne=y.getUint16(Q,!q),te=Q+2;let J=0;for(let fe=te;fe<te+12*ne;fe+=12)y.getUint16(fe,!q)===45057&&(J=y.getUint32(fe+8,!q));const re=Q+2+ne*12+4,le=[];for(let fe=re;fe<re+J*16;fe+=16){const pe={MPType:y.getUint32(fe,!q),size:y.getUint32(fe+4,!q),dataOffset:y.getUint32(fe+8,!q),dependantImages:y.getUint32(fe+12,!q),start:-1,end:-1,isFII:!1};pe.dataOffset?(pe.start=Y+pe.dataOffset,pe.isFII=!1):(pe.start=0,pe.isFII=!0),pe.end=pe.start+pe.size,le.push(pe)}if(this.options.extractNonFII&&le.length){const fe=new Blob([y]),pe=[];for(const de of le){if(de.isFII&&!this.options.extractFII)continue;const se=fe.slice(de.start,de.end+1,"image/jpeg");pe.push(se)}s(pe)}}}A+=2+y.getUint16(A+2)}})}}const extractGainmapFromJPEG=async u=>{const n=extractXMP(u);if(!n)throw new XMPMetadataNotFoundError("Gain map XMP metadata not found");const f=await new MPFExtractor({extractFII:!0,extractNonFII:!0}).extract(u);if(f.length!==2)throw new GainMapNotFoundError("Gain map recovery image not found");return{sdr:new Uint8Array(await f[0].arrayBuffer()),gainMap:new Uint8Array(await f[1].arrayBuffer()),metadata:n}},getHTMLImageFromBlob=u=>new Promise((n,s)=>{const f=document.createElement("img");f.onload=()=>{n(f)},f.onerror=d=>{s(d)},f.src=URL.createObjectURL(u)});class LoaderBaseShared extends Loader{constructor(s,f){super(f);as(this,"_renderer");as(this,"_renderTargetOptions");as(this,"_internalLoadingManager");as(this,"_config");this._config=s,s.renderer&&(this._renderer=s.renderer),this._internalLoadingManager=new LoadingManager}setRenderer(s){return this._renderer=s,this}setRenderTargetOptions(s){return this._renderTargetOptions=s,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const s=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Texture,sdr:new Texture});return this._config.createQuadRenderer({width:16,height:16,type:HalfFloatType,colorSpace:LinearSRGBColorSpace,material:s,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(s,f,d){const y=f?new Blob([f],{type:"image/jpeg"}):void 0,_=new Blob([s],{type:"image/jpeg"});let A,R,I=!1;if(typeof createImageBitmap>"u"){const G=await Promise.all([y?getHTMLImageFromBlob(y):Promise.resolve(void 0),getHTMLImageFromBlob(_)]);R=G[0],A=G[1],I=d==="flipY"}else{const G=await Promise.all([y?createImageBitmap(y,{imageOrientation:d||"flipY"}):Promise.resolve(void 0),createImageBitmap(_,{imageOrientation:d||"flipY"})]);R=G[0],A=G[1]}return{sdrImage:A,gainMapImage:R,needsFlip:I}}createTextures(s,f,d){const y=new Texture(f||new ImageData(2,2),UVMapping,ClampToEdgeWrapping,ClampToEdgeWrapping,LinearFilter,LinearMipMapLinearFilter,RGBAFormat,UnsignedByteType,1,LinearSRGBColorSpace);y.flipY=d,y.needsUpdate=!0;const _=new Texture(s,UVMapping,ClampToEdgeWrapping,ClampToEdgeWrapping,LinearFilter,LinearMipMapLinearFilter,RGBAFormat,UnsignedByteType,1,SRGBColorSpace);return _.flipY=d,_.needsUpdate=!0,{gainMap:y,sdr:_}}updateQuadRenderer(s,f,d,y,_){s.width=f.width,s.height=f.height,s.material.gainMap=d,s.material.sdr=y,s.material.gainMapMin=_.gainMapMin,s.material.gainMapMax=_.gainMapMax,s.material.offsetHdr=_.offsetHdr,s.material.offsetSdr=_.offsetSdr,s.material.gamma=_.gamma,s.material.hdrCapacityMin=_.hdrCapacityMin,s.material.hdrCapacityMax=_.hdrCapacityMax,s.material.maxDisplayBoost=Math.pow(2,_.hdrCapacityMax),s.material.needsUpdate=!0}}const vertexShader=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class GainMapDecoderMaterial extends ShaderMaterial{constructor({gamma:s,offsetHdr:f,offsetSdr:d,gainMapMin:y,gainMapMax:_,maxDisplayBoost:A,hdrCapacityMin:R,hdrCapacityMax:I,sdr:G,gainMap:Y}){super({name:"GainMapDecoderMaterial",vertexShader,fragmentShader,uniforms:{sdr:{value:G},gainMap:{value:Y},gamma:{value:new Vector3(1/s[0],1/s[1],1/s[2])},offsetHdr:{value:new Vector3().fromArray(f)},offsetSdr:{value:new Vector3().fromArray(d)},gainMapMin:{value:new Vector3().fromArray(y)},gainMapMax:{value:new Vector3().fromArray(_)},weightFactor:{value:(Math.log2(A)-R)/(I-R)}},blending:NoBlending,depthTest:!1,depthWrite:!1});as(this,"_maxDisplayBoost");as(this,"_hdrCapacityMin");as(this,"_hdrCapacityMax");this._maxDisplayBoost=A,this._hdrCapacityMin=R,this._hdrCapacityMax=I,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(s){this.uniforms.sdr.value=s}get gainMap(){return this.uniforms.gainMap.value}set gainMap(s){this.uniforms.gainMap.value=s}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(s){this.uniforms.offsetHdr.value.fromArray(s)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(s){this.uniforms.offsetSdr.value.fromArray(s)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(s){this.uniforms.gainMapMin.value.fromArray(s)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(s){this.uniforms.gainMapMax.value.fromArray(s)}get gamma(){const s=this.uniforms.gamma.value;return[1/s.x,1/s.y,1/s.z]}set gamma(s){const f=this.uniforms.gamma.value;f.x=1/s[0],f.y=1/s[1],f.z=1/s[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(s){this._hdrCapacityMin=s,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(s){this._hdrCapacityMax=s,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(s){this._maxDisplayBoost=Math.max(1,Math.min(65504,s)),this.calculateWeight()}calculateWeight(){const s=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,s))}}class LoaderBaseWebGL extends LoaderBaseShared{constructor(n,s){super({renderer:n,createMaterial:f=>new GainMapDecoderMaterial(f),createQuadRenderer:f=>new QuadRenderer(f)},s)}async render(n,s,f,d){const{sdrImage:y,gainMapImage:_,needsFlip:A}=await this.processImages(f,d,"flipY"),{gainMap:R,sdr:I}=this.createTextures(y,_,A);this.updateQuadRenderer(n,y,R,I,s),n.render()}}class GainMapLoader extends LoaderBaseWebGL{load([n,s,f],d,y,_){const A=this.prepareQuadRenderer();let R,I,G;const Y=async()=>{if(R&&I&&G){try{await this.render(A,G,R,I)}catch(he){this.manager.itemError(n),this.manager.itemError(s),this.manager.itemError(f),typeof _=="function"&&_(he),A.disposeOnDemandRenderer();return}typeof d=="function"&&d(A),this.manager.itemEnd(n),this.manager.itemEnd(s),this.manager.itemEnd(f),A.disposeOnDemandRenderer()}};let q=!0,K=0,Q=0,ne=!0,te=0,J=0,ie=!0,re=0,le=0;const fe=()=>{if(typeof y=="function"){const he=K+te+re,Se=Q+J+le,ve=q&&ne&&ie;y(new ProgressEvent("progress",{lengthComputable:ve,loaded:Se,total:he}))}};this.manager.itemStart(n),this.manager.itemStart(s),this.manager.itemStart(f);const pe=new FileLoader(this._internalLoadingManager);pe.setResponseType("arraybuffer"),pe.setRequestHeader(this.requestHeader),pe.setPath(this.path),pe.setWithCredentials(this.withCredentials),pe.load(n,async he=>{if(typeof he=="string")throw new Error("Invalid sdr buffer");R=he,await Y()},he=>{q=he.lengthComputable,Q=he.loaded,K=he.total,fe()},he=>{this.manager.itemError(n),typeof _=="function"&&_(he)});const de=new FileLoader(this._internalLoadingManager);de.setResponseType("arraybuffer"),de.setRequestHeader(this.requestHeader),de.setPath(this.path),de.setWithCredentials(this.withCredentials),de.load(s,async he=>{if(typeof he=="string")throw new Error("Invalid gainmap buffer");I=he,await Y()},he=>{ne=he.lengthComputable,J=he.loaded,te=he.total,fe()},he=>{this.manager.itemError(s),typeof _=="function"&&_(he)});const se=new FileLoader(this._internalLoadingManager);return se.setRequestHeader(this.requestHeader),se.setPath(this.path),se.setWithCredentials(this.withCredentials),se.load(f,async he=>{if(typeof he!="string")throw new Error("Invalid metadata string");G=JSON.parse(he),await Y()},he=>{ie=he.lengthComputable,le=he.loaded,re=he.total,fe()},he=>{this.manager.itemError(f),typeof _=="function"&&_(he)}),A}}class HDRJPGLoader extends LoaderBaseWebGL{load(n,s,f,d){const y=this.prepareQuadRenderer(),_=new FileLoader(this._internalLoadingManager);return _.setResponseType("arraybuffer"),_.setRequestHeader(this.requestHeader),_.setPath(this.path),_.setWithCredentials(this.withCredentials),this.manager.itemStart(n),_.load(n,async A=>{if(typeof A=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const R=new Uint8Array(A);let I,G,Y;try{const q=await extractGainmapFromJPEG(R);I=q.sdr,G=q.gainMap,Y=q.metadata}catch(q){if(q instanceof XMPMetadataNotFoundError||q instanceof GainMapNotFoundError)console.warn(`Failure to reconstruct an HDR image from ${n}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),Y={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},I=R;else throw q}try{await this.render(y,Y,I.buffer,G==null?void 0:G.buffer)}catch(q){this.manager.itemError(n),typeof d=="function"&&d(q),y.disposeOnDemandRenderer();return}typeof s=="function"&&s(y),this.manager.itemEnd(n),y.disposeOnDemandRenderer()},f,A=>{this.manager.itemError(n),typeof d=="function"&&d(A)}),y}}const presetsObj={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},CUBEMAP_ROOT="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",isArray=u=>Array.isArray(u),defaultFiles=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function useEnvironment({files:u=defaultFiles,path:n="",preset:s=void 0,colorSpace:f=void 0,extensions:d}={}){s&&(validatePreset(s),u=presetsObj[s],n=CUBEMAP_ROOT);const y=isArray(u),{extension:_,isCubemap:A}=getExtension(u),R=getLoader(_);if(!R)throw new Error("useEnvironment: Unrecognized file extension: "+u);const I=useThree(K=>K.gl);reactExports.useLayoutEffect(()=>{if(_!=="webp"&&_!=="jpg"&&_!=="jpeg")return;function K(){useLoader.clear(R,y?[u]:u)}I.domElement.addEventListener("webglcontextlost",K,{once:!0})},[u,I.domElement]);const G=useLoader(R,y?[u]:u,K=>{(_==="webp"||_==="jpg"||_==="jpeg")&&K.setRenderer(I),K.setPath==null||K.setPath(n),d&&d(K)});let Y=y?G[0]:G;if(_==="jpg"||_==="jpeg"||_==="webp"){var q;Y=(q=Y.renderTarget)==null?void 0:q.texture}return Y.mapping=A?CubeReflectionMapping:EquirectangularReflectionMapping,Y.colorSpace=f??(A?"srgb":"srgb-linear"),Y}const preloadDefaultOptions={files:defaultFiles,path:"",preset:void 0,extensions:void 0};useEnvironment.preload=u=>{const n={...preloadDefaultOptions,...u};let{files:s,path:f=""}=n;const{preset:d,extensions:y}=n;d&&(validatePreset(d),s=presetsObj[d],f=CUBEMAP_ROOT);const{extension:_}=getExtension(s);if(_==="webp"||_==="jpg"||_==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const A=getLoader(_);if(!A)throw new Error("useEnvironment: Unrecognized file extension: "+s);useLoader.preload(A,isArray(s)?[s]:s,R=>{R.setPath==null||R.setPath(f),y&&y(R)})};const clearDefaultOptins={files:defaultFiles,preset:void 0};useEnvironment.clear=u=>{const n={...clearDefaultOptins,...u};let{files:s}=n;const{preset:f}=n;f&&(validatePreset(f),s=presetsObj[f]);const{extension:d}=getExtension(s),y=getLoader(d);if(!y)throw new Error("useEnvironment: Unrecognized file extension: "+s);useLoader.clear(y,isArray(s)?[s]:s)};function validatePreset(u){if(!(u in presetsObj))throw new Error("Preset must be one of: "+Object.keys(presetsObj).join(", "))}function getExtension(u){var n;const s=isArray(u)&&u.length===6,f=isArray(u)&&u.length===3&&u.some(_=>_.endsWith("json")),d=isArray(u)?u[0]:u;return{extension:s?"cube":f?"webp":d.startsWith("data:application/exr")?"exr":d.startsWith("data:application/hdr")?"hdr":d.startsWith("data:image/jpeg")?"jpg":(n=d.split(".").pop())==null||(n=n.split("?"))==null||(n=n.shift())==null?void 0:n.toLowerCase(),isCubemap:s,isGainmap:f}}function getLoader(u){return u==="cube"?CubeTextureLoader:u==="hdr"?RGBELoader:u==="exr"?EXRLoader:u==="jpg"||u==="jpeg"?HDRJPGLoader:u==="webp"?GainMapLoader:null}const isRef=u=>u.current&&u.current.isScene,resolveScene=u=>isRef(u)?u.current:u;function setEnvProps(u,n,s,f,d={}){var y,_,A,R;d={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...d};const I=resolveScene(n||s),G=I.background,Y=I.environment,q={backgroundBlurriness:I.backgroundBlurriness,backgroundIntensity:I.backgroundIntensity,backgroundRotation:(y=(_=I.backgroundRotation)==null||_.clone==null?void 0:_.clone())!==null&&y!==void 0?y:[0,0,0],environmentIntensity:I.environmentIntensity,environmentRotation:(A=(R=I.environmentRotation)==null||R.clone==null?void 0:R.clone())!==null&&A!==void 0?A:[0,0,0]};return u!=="only"&&(I.environment=f),u&&(I.background=f),applyProps(I,d),()=>{u!=="only"&&(I.environment=Y),u&&(I.background=G),applyProps(I,q)}}function EnvironmentMap({scene:u,background:n=!1,map:s,...f}){const d=useThree(y=>y.scene);return reactExports.useLayoutEffect(()=>{if(s)return setEnvProps(n,u,d,s,f)}),null}function EnvironmentCube({background:u=!1,scene:n,blur:s,backgroundBlurriness:f,backgroundIntensity:d,backgroundRotation:y,environmentIntensity:_,environmentRotation:A,...R}){const I=useEnvironment(R),G=useThree(Y=>Y.scene);return reactExports.useLayoutEffect(()=>setEnvProps(u,n,G,I,{backgroundBlurriness:s??f,backgroundIntensity:d,backgroundRotation:y,environmentIntensity:_,environmentRotation:A})),reactExports.useEffect(()=>()=>{I.dispose()},[I]),null}function EnvironmentPortal({children:u,near:n=.1,far:s=1e3,resolution:f=256,frames:d=1,map:y,background:_=!1,blur:A,backgroundBlurriness:R,backgroundIntensity:I,backgroundRotation:G,environmentIntensity:Y,environmentRotation:q,scene:K,files:Q,path:ne,preset:te=void 0,extensions:J}){const ie=useThree(se=>se.gl),re=useThree(se=>se.scene),le=reactExports.useRef(null),[fe]=reactExports.useState(()=>new Scene),pe=reactExports.useMemo(()=>{const se=new WebGLCubeRenderTarget(f);return se.texture.type=HalfFloatType,se},[f]);reactExports.useEffect(()=>()=>{pe.dispose()},[pe]),reactExports.useLayoutEffect(()=>{if(d===1){const se=ie.autoClear;ie.autoClear=!0,le.current.update(ie,fe),ie.autoClear=se}return setEnvProps(_,K,re,pe.texture,{backgroundBlurriness:A??R,backgroundIntensity:I,backgroundRotation:G,environmentIntensity:Y,environmentRotation:q})},[u,fe,pe.texture,K,re,_,d,ie]);let de=1;return useFrame(()=>{if(d===1/0||de<d){const se=ie.autoClear;ie.autoClear=!0,le.current.update(ie,fe),ie.autoClear=se,de++}}),reactExports.createElement(reactExports.Fragment,null,createPortal(reactExports.createElement(reactExports.Fragment,null,u,reactExports.createElement("cubeCamera",{ref:le,args:[n,s,pe]}),Q||te?reactExports.createElement(EnvironmentCube,{background:!0,files:Q,preset:te,path:ne,extensions:J}):y?reactExports.createElement(EnvironmentMap,{background:!0,map:y,extensions:J}):null),fe))}function EnvironmentGround(u){var n,s,f,d;const y=useEnvironment(u),_=u.map||y;reactExports.useMemo(()=>extend({GroundProjectedEnvImpl:GroundProjectedEnv}),[]),reactExports.useEffect(()=>()=>{y.dispose()},[y]);const A=reactExports.useMemo(()=>[_],[_]),R=(n=u.ground)==null?void 0:n.height,I=(s=u.ground)==null?void 0:s.radius,G=(f=(d=u.ground)==null?void 0:d.scale)!==null&&f!==void 0?f:1e3;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(EnvironmentMap,_extends({},u,{map:_})),reactExports.createElement("groundProjectedEnvImpl",{args:A,scale:G,height:R,radius:I}))}function Environment(u){return u.ground?reactExports.createElement(EnvironmentGround,u):u.map?reactExports.createElement(EnvironmentMap,u):u.children?reactExports.createElement(EnvironmentPortal,u):reactExports.createElement(EnvironmentCube,u)}const ContactShadows=reactExports.forwardRef(({scale:u=10,frames:n=1/0,opacity:s=1,width:f=1,height:d=1,blur:y=1,near:_=0,far:A=10,resolution:R=512,smooth:I=!0,color:G="#000000",depthWrite:Y=!1,renderOrder:q,...K},Q)=>{const ne=reactExports.useRef(null),te=useThree(Oe=>Oe.scene),J=useThree(Oe=>Oe.gl),ie=reactExports.useRef(null);f=f*(Array.isArray(u)?u[0]:u||1),d=d*(Array.isArray(u)?u[1]:u||1);const[re,le,fe,pe,de,se,he]=reactExports.useMemo(()=>{const Oe=new WebGLRenderTarget(R,R),Ne=new WebGLRenderTarget(R,R);Ne.texture.generateMipmaps=Oe.texture.generateMipmaps=!1;const ye=new PlaneGeometry(f,d).rotateX(Math.PI/2),Ae=new Mesh(ye),_e=new MeshDepthMaterial;_e.depthTest=_e.depthWrite=!1,_e.onBeforeCompile=ge=>{ge.uniforms={...ge.uniforms,ucolor:{value:new Color(G)}},ge.fragmentShader=ge.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),ge.fragmentShader=ge.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Te=new ShaderMaterial(HorizontalBlurShader),we=new ShaderMaterial(VerticalBlurShader);return we.depthTest=Te.depthTest=!1,[Oe,ye,_e,Ae,Te,we,Ne]},[R,f,d,u,G]),Se=Oe=>{pe.visible=!0,pe.material=de,de.uniforms.tDiffuse.value=re.texture,de.uniforms.h.value=Oe*1/256,J.setRenderTarget(he),J.render(pe,ie.current),pe.material=se,se.uniforms.tDiffuse.value=he.texture,se.uniforms.v.value=Oe*1/256,J.setRenderTarget(re),J.render(pe,ie.current),pe.visible=!1};let ve=0,Re,Ee;return useFrame(()=>{ie.current&&(n===1/0||ve<n)&&(ve++,Re=te.background,Ee=te.overrideMaterial,ne.current.visible=!1,te.background=null,te.overrideMaterial=fe,J.setRenderTarget(re),J.render(te,ie.current),Se(y),I&&Se(y*.4),J.setRenderTarget(null),ne.current.visible=!0,te.overrideMaterial=Ee,te.background=Re)}),reactExports.useImperativeHandle(Q,()=>ne.current,[]),reactExports.createElement("group",_extends({"rotation-x":Math.PI/2},K,{ref:ne}),reactExports.createElement("mesh",{renderOrder:q,geometry:le,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},reactExports.createElement("meshBasicMaterial",{transparent:!0,map:re.texture,opacity:s,depthWrite:Y})),reactExports.createElement("orthographicCamera",{ref:ie,args:[-f/2,f/2,d/2,-d/2,_,A]}))}),RobotModel=()=>{const u=reactExports.useRef(null),n=reactExports.useRef(null),s=reactExports.useRef(null),f=reactExports.useRef(null),{mouse:d,size:y}=useThree();return useFrame(_=>{if(!u.current)return;const A=d.x,R=d.y;if(u.current.rotation.y=MathUtils.lerp(u.current.rotation.y,A*.4,.05),n.current&&(n.current.rotation.y=MathUtils.lerp(n.current.rotation.y,A*.8,.1),n.current.rotation.x=MathUtils.lerp(n.current.rotation.x,-R*.4,.1)),s.current&&f.current){const I=MathUtils.lerp(s.current.rotation.x,R*.3,.08);s.current.rotation.x=I,f.current.rotation.x=I}u.current.position.y=Math.sin(_.clock.elapsedTime*.8)*.15,u.current.position.x=MathUtils.lerp(u.current.position.x,A*.2,.05)}),jsxRuntimeExports.jsxs("group",{ref:u,children:[jsxRuntimeExports.jsxs("mesh",{position:[0,-.2,0],children:[jsxRuntimeExports.jsx("capsuleGeometry",{args:[.7,1.2,8,16]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#0a0a0a",metalness:.9,roughness:.1})]}),jsxRuntimeExports.jsxs("group",{ref:n,position:[0,1.1,0],children:[jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.55,32,32]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#0d0d0d",metalness:1,roughness:.05})]}),jsxRuntimeExports.jsxs("mesh",{position:[-.2,.1,.45],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.08,16,16]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#4F9CF9",emissive:"#4F9CF9",emissiveIntensity:12,toneMapped:!1})]}),jsxRuntimeExports.jsxs("mesh",{position:[.2,.1,.45],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.08,16,16]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#4F9CF9",emissive:"#4F9CF9",emissiveIntensity:12,toneMapped:!1})]}),jsxRuntimeExports.jsxs("mesh",{position:[0,.08,.4],scale:[1.2,.4,.2],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.45,32,32]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#000000",metalness:1,roughness:0})]})]}),jsxRuntimeExports.jsx("group",{ref:s,position:[-1,.4,0],children:jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("capsuleGeometry",{args:[.22,.8,8,16]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#111111",metalness:.8,roughness:.2})]})}),jsxRuntimeExports.jsx("group",{ref:f,position:[1,.4,0],children:jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("capsuleGeometry",{args:[.22,.8,8,16]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#111111",metalness:.8,roughness:.2})]})}),jsxRuntimeExports.jsxs("mesh",{position:[0,-1,0],rotation:[-Math.PI/2,0,0],children:[jsxRuntimeExports.jsx("cylinderGeometry",{args:[.8,.8,.1,32]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#4F9CF9",emissive:"#4F9CF9",emissiveIntensity:4,transparent:!0,opacity:.3})]})]})},HeroRobotScene=()=>jsxRuntimeExports.jsx("div",{className:"w-full h-full min-h-[500px] cursor-grab active:cursor-grabbing",children:jsxRuntimeExports.jsx(Canvas,{shadows:!0,camera:{position:[0,0,6],fov:40},gl:{antialias:!0,alpha:!0},children:jsxRuntimeExports.jsxs(reactExports.Suspense,{fallback:null,children:[jsxRuntimeExports.jsx("ambientLight",{intensity:.4}),jsxRuntimeExports.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1,intensity:2,castShadow:!0}),jsxRuntimeExports.jsx("pointLight",{position:[-10,-10,-10],color:"#4F9CF9",intensity:1}),jsxRuntimeExports.jsx(Float,{speed:1.5,rotationIntensity:.5,floatIntensity:.5,children:jsxRuntimeExports.jsx(RobotModel,{})}),jsxRuntimeExports.jsx(Environment,{preset:"city"}),jsxRuntimeExports.jsx(ContactShadows,{position:[0,-2.5,0],opacity:.4,scale:10,blur:2.5,far:4.5})]})})}),HeroSection=()=>{const u=useNavigate();return jsxRuntimeExports.jsxs("section",{className:"relative min-h-[90vh] flex items-center pt-32 pb-20 overflow-hidden premium-gradient",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 z-0",children:[jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.2,1],opacity:[.3,.5,.3],x:[0,50,0],y:[0,30,0]},transition:{duration:10,repeat:1/0,ease:"linear"},className:"absolute -top-40 -left-40 w-96 h-96 bg-accent/20 blur-[120px] rounded-full"}),jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1.2,1,1.2],opacity:[.2,.4,.2],x:[0,-50,0],y:[0,-30,0]},transition:{duration:8,repeat:1/0,ease:"linear"},className:"absolute -bottom-40 -right-40 w-96 h-96 bg-glow/10 blur-[120px] rounded-full"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",children:[...Array(20)].map((n,s)=>jsxRuntimeExports.jsx(motion.div,{initial:{x:Math.random()*100+"%",y:Math.random()*100+"%"},animate:{y:["-10%","110%"],opacity:[0,1,0]},transition:{duration:Math.random()*10+10,repeat:1/0,ease:"linear",delay:s*.5},className:"absolute w-1 h-1 bg-white rounded-full"},s))})]}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative z-10 grid lg:grid-cols-2 gap-16 items-center",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},className:"space-y-8",children:[jsxRuntimeExports.jsxs("h1",{className:"text-6xl md:text-8xl font-display font-black leading-[1.1] tracking-tight text-white italic",children:["Meet Your ",jsxRuntimeExports.jsx("span",{className:"text-glow text-accent whitespace-nowrap",children:"AI Co-Founder."})]}),jsxRuntimeExports.jsxs("p",{className:"text-xl text-slate-400 max-w-lg leading-relaxed",children:["Validate ideas. Build MVPs. Outpace doubt. ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"text-white/60",children:"Crafted for builders who move at lightspeed."})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center lg:justify-start",children:jsxRuntimeExports.jsxs(motion.button,{onClick:()=>u("/login"),whileHover:{scale:1.05,boxShadow:"0 0 40px rgba(79, 156, 249, 0.6)",background:"linear-gradient(135deg, #4f9cf9 0%, #6366f1 100%)"},whileTap:{scale:.98},className:"group relative px-10 py-5 bg-accent text-white rounded-2xl font-black text-xl flex items-center justify-center gap-3 transition-all overflow-hidden shadow-2xl shadow-accent/20",children:[jsxRuntimeExports.jsx(motion.div,{initial:{x:"-100%"},whileHover:{x:"100%"},transition:{duration:.6,ease:"easeInOut"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12"}),jsxRuntimeExports.jsx(Sparkles,{size:22,className:"group-hover:rotate-12 transition-transform duration-300"}),jsxRuntimeExports.jsx("span",{children:"Get Started"}),jsxRuntimeExports.jsx(MousePointer2,{size:20,className:"group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform duration-300"})]})})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8,rotateY:20},animate:{opacity:1,scale:1,rotateY:0},transition:{duration:1,delay:.2,ease:"easeOut"},className:"relative perspective-1000",style:{perspective:"1000px"},children:[jsxRuntimeExports.jsx("div",{className:"relative z-10 w-full h-[500px]",children:jsxRuntimeExports.jsx(HeroRobotScene,{})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-accent/20 blur-[80px] rounded-full -z-10"})]})]})]})};var lottie$2={exports:{}},lottie$1=lottie$2.exports,hasRequiredLottie;function requireLottie(){return hasRequiredLottie||(hasRequiredLottie=1,(function(module,exports$1){typeof document<"u"&&typeof navigator<"u"&&(function(u,n){module.exports=n()})(lottie$1,(function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(n){_useWebWorker=!!n},getWebWorker=function(){return _useWebWorker},setLocationHref=function(n){locationHref=n},getLocationHref=function(){return locationHref};function createTag(u){return document.createElement(u)}function extendPrototype(u,n){var s,f=u.length,d;for(s=0;s<f;s+=1){d=u[s].prototype;for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(n.prototype[y]=d[y])}}function getDescriptor(u,n){return Object.getOwnPropertyDescriptor(u,n)}function createProxyFunction(u){function n(){}return n.prototype=u,n}var audioControllerFactory=(function(){function u(n){this.audios=[],this.audioFactory=n,this._volume=1,this._isMuted=!1}return u.prototype={addAudio:function(s){this.audios.push(s)},pause:function(){var s,f=this.audios.length;for(s=0;s<f;s+=1)this.audios[s].pause()},resume:function(){var s,f=this.audios.length;for(s=0;s<f;s+=1)this.audios[s].resume()},setRate:function(s){var f,d=this.audios.length;for(f=0;f<d;f+=1)this.audios[f].setRate(s)},createAudio:function(s){return this.audioFactory?this.audioFactory(s):window.Howl?new window.Howl({src:[s]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(s){this.audioFactory=s},setVolume:function(s){this._volume=s,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var s,f=this.audios.length;for(s=0;s<f;s+=1)this.audios[s].volume(this._volume*(this._isMuted?0:1))}},function(){return new u}})(),createTypedArray=(function(){function u(s,f){var d=0,y=[],_;switch(s){case"int16":case"uint8c":_=1;break;default:_=1.1;break}for(d=0;d<f;d+=1)y.push(_);return y}function n(s,f){return s==="float32"?new Float32Array(f):s==="int16"?new Int16Array(f):s==="uint8c"?new Uint8ClampedArray(f):u(s,f)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?n:u})();function createSizedArray(u){return Array.apply(null,{length:u})}function _typeof$6(u){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$6(u)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var u=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],n,s=u.length;for(n=0;n<s;n+=1)BMMath[u[n]]=Math[u[n]]})(),BMMath.random=Math.random,BMMath.abs=function(u){var n=_typeof$6(u);if(n==="object"&&u.length){var s=createSizedArray(u.length),f,d=u.length;for(f=0;f<d;f+=1)s[f]=Math.abs(u[f]);return s}return Math.abs(u)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(u){u.style.position="absolute",u.style.top=0,u.style.left=0,u.style.display="block",u.style.transformOrigin="0 0",u.style.webkitTransformOrigin="0 0",u.style.backfaceVisibility="visible",u.style.webkitBackfaceVisibility="visible",u.style.transformStyle="preserve-3d",u.style.webkitTransformStyle="preserve-3d",u.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(u,n,s,f){this.type=u,this.currentTime=n,this.totalTime=s,this.direction=f<0?-1:1}function BMCompleteEvent(u,n){this.type=u,this.direction=n<0?-1:1}function BMCompleteLoopEvent(u,n,s,f){this.type=u,this.currentLoop=s,this.totalLoops=n,this.direction=f<0?-1:1}function BMSegmentStartEvent(u,n,s){this.type=u,this.firstFrame=n,this.totalFrames=s}function BMDestroyEvent(u,n){this.type=u,this.target=n}function BMRenderFrameErrorEvent(u,n){this.type="renderFrameError",this.nativeError=u,this.currentTime=n}function BMConfigErrorEvent(u){this.type="configError",this.nativeError=u}var createElementID=(function(){var u=0;return function(){return u+=1,idPrefix$1+"__lottie_element_"+u}})();function HSVtoRGB(u,n,s){var f,d,y,_,A,R,I,G;switch(_=Math.floor(u*6),A=u*6-_,R=s*(1-n),I=s*(1-A*n),G=s*(1-(1-A)*n),_%6){case 0:f=s,d=G,y=R;break;case 1:f=I,d=s,y=R;break;case 2:f=R,d=s,y=G;break;case 3:f=R,d=I,y=s;break;case 4:f=G,d=R,y=s;break;case 5:f=s,d=R,y=I;break}return[f,d,y]}function RGBtoHSV(u,n,s){var f=Math.max(u,n,s),d=Math.min(u,n,s),y=f-d,_,A=f===0?0:y/f,R=f/255;switch(f){case d:_=0;break;case u:_=n-s+y*(n<s?6:0),_/=6*y;break;case n:_=s-u+y*2,_/=6*y;break;case s:_=u-n+y*4,_/=6*y;break}return[_,A,R]}function addSaturationToRGB(u,n){var s=RGBtoHSV(u[0]*255,u[1]*255,u[2]*255);return s[1]+=n,s[1]>1?s[1]=1:s[1]<=0&&(s[1]=0),HSVtoRGB(s[0],s[1],s[2])}function addBrightnessToRGB(u,n){var s=RGBtoHSV(u[0]*255,u[1]*255,u[2]*255);return s[2]+=n,s[2]>1?s[2]=1:s[2]<0&&(s[2]=0),HSVtoRGB(s[0],s[1],s[2])}function addHueToRGB(u,n){var s=RGBtoHSV(u[0]*255,u[1]*255,u[2]*255);return s[0]+=n/360,s[0]>1?s[0]-=1:s[0]<0&&(s[0]+=1),HSVtoRGB(s[0],s[1],s[2])}var rgbToHex=(function(){var u=[],n,s;for(n=0;n<256;n+=1)s=n.toString(16),u[n]=s.length===1?"0"+s:s;return function(f,d,y){return f<0&&(f=0),d<0&&(d=0),y<0&&(y=0),"#"+u[f]+u[d]+u[y]}})(),setSubframeEnabled=function(n){subframeEnabled=!!n},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(n){expressionsPlugin=n},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(n){expressionsInterfaces=n},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(n){defaultCurveSegments=n},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(n){idPrefix$1=n};function createNS(u){return document.createElementNS(svgNS,u)}function _typeof$5(u){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$5(u)}var dataManager=(function(){var u=1,n=[],s,f,d={onmessage:function(){},postMessage:function(K){s({data:K})}},y={postMessage:function(K){d.onmessage({data:K})}};function _(q){if(window.Worker&&window.Blob&&getWebWorker()){var K=new Blob(["var _workerSelf = self; self.onmessage = ",q.toString()],{type:"text/javascript"}),Q=URL.createObjectURL(K);return new Worker(Q)}return s=q,d}function A(){f||(f=_(function(K){function Q(){function te(Ne,ye){var Ae,_e,Te=Ne.length,we,ge,De,ze;for(_e=0;_e<Te;_e+=1)if(Ae=Ne[_e],"ks"in Ae&&!Ae.completed){if(Ae.completed=!0,Ae.hasMask){var He=Ae.masksProperties;for(ge=He.length,we=0;we<ge;we+=1)if(He[we].pt.k.i)fe(He[we].pt.k);else for(ze=He[we].pt.k.length,De=0;De<ze;De+=1)He[we].pt.k[De].s&&fe(He[we].pt.k[De].s[0]),He[we].pt.k[De].e&&fe(He[we].pt.k[De].e[0])}Ae.ty===0?(Ae.layers=re(Ae.refId,ye),te(Ae.layers,ye)):Ae.ty===4?le(Ae.shapes):Ae.ty===5&&Ee(Ae)}}function J(Ne,ye){if(Ne){var Ae=0,_e=Ne.length;for(Ae=0;Ae<_e;Ae+=1)Ne[Ae].t===1&&(Ne[Ae].data.layers=re(Ne[Ae].data.refId,ye),te(Ne[Ae].data.layers,ye))}}function ie(Ne,ye){for(var Ae=0,_e=ye.length;Ae<_e;){if(ye[Ae].id===Ne)return ye[Ae];Ae+=1}return null}function re(Ne,ye){var Ae=ie(Ne,ye);return Ae?Ae.layers.__used?JSON.parse(JSON.stringify(Ae.layers)):(Ae.layers.__used=!0,Ae.layers):null}function le(Ne){var ye,Ae=Ne.length,_e,Te;for(ye=Ae-1;ye>=0;ye-=1)if(Ne[ye].ty==="sh")if(Ne[ye].ks.k.i)fe(Ne[ye].ks.k);else for(Te=Ne[ye].ks.k.length,_e=0;_e<Te;_e+=1)Ne[ye].ks.k[_e].s&&fe(Ne[ye].ks.k[_e].s[0]),Ne[ye].ks.k[_e].e&&fe(Ne[ye].ks.k[_e].e[0]);else Ne[ye].ty==="gr"&&le(Ne[ye].it)}function fe(Ne){var ye,Ae=Ne.i.length;for(ye=0;ye<Ae;ye+=1)Ne.i[ye][0]+=Ne.v[ye][0],Ne.i[ye][1]+=Ne.v[ye][1],Ne.o[ye][0]+=Ne.v[ye][0],Ne.o[ye][1]+=Ne.v[ye][1]}function pe(Ne,ye){var Ae=ye?ye.split("."):[100,100,100];return Ne[0]>Ae[0]?!0:Ae[0]>Ne[0]?!1:Ne[1]>Ae[1]?!0:Ae[1]>Ne[1]?!1:Ne[2]>Ae[2]?!0:Ae[2]>Ne[2]?!1:null}var de=(function(){var Ne=[4,4,14];function ye(_e){var Te=_e.t.d;_e.t.d={k:[{s:Te,t:0}]}}function Ae(_e){var Te,we=_e.length;for(Te=0;Te<we;Te+=1)_e[Te].ty===5&&ye(_e[Te])}return function(_e){if(pe(Ne,_e.v)&&(Ae(_e.layers),_e.assets)){var Te,we=_e.assets.length;for(Te=0;Te<we;Te+=1)_e.assets[Te].layers&&Ae(_e.assets[Te].layers)}}})(),se=(function(){var Ne=[4,7,99];return function(ye){if(ye.chars&&!pe(Ne,ye.v)){var Ae,_e=ye.chars.length;for(Ae=0;Ae<_e;Ae+=1){var Te=ye.chars[Ae];Te.data&&Te.data.shapes&&(le(Te.data.shapes),Te.data.ip=0,Te.data.op=99999,Te.data.st=0,Te.data.sr=1,Te.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},ye.chars[Ae].t||(Te.data.shapes.push({ty:"no"}),Te.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}})(),he=(function(){var Ne=[5,7,15];function ye(_e){var Te=_e.t.p;typeof Te.a=="number"&&(Te.a={a:0,k:Te.a}),typeof Te.p=="number"&&(Te.p={a:0,k:Te.p}),typeof Te.r=="number"&&(Te.r={a:0,k:Te.r})}function Ae(_e){var Te,we=_e.length;for(Te=0;Te<we;Te+=1)_e[Te].ty===5&&ye(_e[Te])}return function(_e){if(pe(Ne,_e.v)&&(Ae(_e.layers),_e.assets)){var Te,we=_e.assets.length;for(Te=0;Te<we;Te+=1)_e.assets[Te].layers&&Ae(_e.assets[Te].layers)}}})(),Se=(function(){var Ne=[4,1,9];function ye(_e){var Te,we=_e.length,ge,De;for(Te=0;Te<we;Te+=1)if(_e[Te].ty==="gr")ye(_e[Te].it);else if(_e[Te].ty==="fl"||_e[Te].ty==="st")if(_e[Te].c.k&&_e[Te].c.k[0].i)for(De=_e[Te].c.k.length,ge=0;ge<De;ge+=1)_e[Te].c.k[ge].s&&(_e[Te].c.k[ge].s[0]/=255,_e[Te].c.k[ge].s[1]/=255,_e[Te].c.k[ge].s[2]/=255,_e[Te].c.k[ge].s[3]/=255),_e[Te].c.k[ge].e&&(_e[Te].c.k[ge].e[0]/=255,_e[Te].c.k[ge].e[1]/=255,_e[Te].c.k[ge].e[2]/=255,_e[Te].c.k[ge].e[3]/=255);else _e[Te].c.k[0]/=255,_e[Te].c.k[1]/=255,_e[Te].c.k[2]/=255,_e[Te].c.k[3]/=255}function Ae(_e){var Te,we=_e.length;for(Te=0;Te<we;Te+=1)_e[Te].ty===4&&ye(_e[Te].shapes)}return function(_e){if(pe(Ne,_e.v)&&(Ae(_e.layers),_e.assets)){var Te,we=_e.assets.length;for(Te=0;Te<we;Te+=1)_e.assets[Te].layers&&Ae(_e.assets[Te].layers)}}})(),ve=(function(){var Ne=[4,4,18];function ye(_e){var Te,we=_e.length,ge,De;for(Te=we-1;Te>=0;Te-=1)if(_e[Te].ty==="sh")if(_e[Te].ks.k.i)_e[Te].ks.k.c=_e[Te].closed;else for(De=_e[Te].ks.k.length,ge=0;ge<De;ge+=1)_e[Te].ks.k[ge].s&&(_e[Te].ks.k[ge].s[0].c=_e[Te].closed),_e[Te].ks.k[ge].e&&(_e[Te].ks.k[ge].e[0].c=_e[Te].closed);else _e[Te].ty==="gr"&&ye(_e[Te].it)}function Ae(_e){var Te,we,ge=_e.length,De,ze,He,yt;for(we=0;we<ge;we+=1){if(Te=_e[we],Te.hasMask){var Ge=Te.masksProperties;for(ze=Ge.length,De=0;De<ze;De+=1)if(Ge[De].pt.k.i)Ge[De].pt.k.c=Ge[De].cl;else for(yt=Ge[De].pt.k.length,He=0;He<yt;He+=1)Ge[De].pt.k[He].s&&(Ge[De].pt.k[He].s[0].c=Ge[De].cl),Ge[De].pt.k[He].e&&(Ge[De].pt.k[He].e[0].c=Ge[De].cl)}Te.ty===4&&ye(Te.shapes)}}return function(_e){if(pe(Ne,_e.v)&&(Ae(_e.layers),_e.assets)){var Te,we=_e.assets.length;for(Te=0;Te<we;Te+=1)_e.assets[Te].layers&&Ae(_e.assets[Te].layers)}}})();function Re(Ne){Ne.__complete||(Se(Ne),de(Ne),se(Ne),he(Ne),ve(Ne),te(Ne.layers,Ne.assets),J(Ne.chars,Ne.assets),Ne.__complete=!0)}function Ee(Ne){Ne.t.a.length===0&&"m"in Ne.t.p}var Oe={};return Oe.completeData=Re,Oe.checkColors=Se,Oe.checkChars=se,Oe.checkPathProperties=he,Oe.checkShapes=ve,Oe.completeLayers=te,Oe}if(y.dataManager||(y.dataManager=Q()),y.assetLoader||(y.assetLoader=(function(){function te(ie){var re=ie.getResponseHeader("content-type");return re&&ie.responseType==="json"&&re.indexOf("json")!==-1||ie.response&&_typeof$5(ie.response)==="object"?ie.response:ie.response&&typeof ie.response=="string"?JSON.parse(ie.response):ie.responseText?JSON.parse(ie.responseText):null}function J(ie,re,le,fe){var pe,de=new XMLHttpRequest;try{de.responseType="json"}catch{}de.onreadystatechange=function(){if(de.readyState===4)if(de.status===200)pe=te(de),le(pe);else try{pe=te(de),le(pe)}catch(se){fe&&fe(se)}};try{de.open(["G","E","T"].join(""),ie,!0)}catch{de.open(["G","E","T"].join(""),re+"/"+ie,!0)}de.send()}return{load:J}})()),K.data.type==="loadAnimation")y.assetLoader.load(K.data.path,K.data.fullPath,function(te){y.dataManager.completeData(te),y.postMessage({id:K.data.id,payload:te,status:"success"})},function(){y.postMessage({id:K.data.id,status:"error"})});else if(K.data.type==="complete"){var ne=K.data.animation;y.dataManager.completeData(ne),y.postMessage({id:K.data.id,payload:ne,status:"success"})}else K.data.type==="loadData"&&y.assetLoader.load(K.data.path,K.data.fullPath,function(te){y.postMessage({id:K.data.id,payload:te,status:"success"})},function(){y.postMessage({id:K.data.id,status:"error"})})}),f.onmessage=function(q){var K=q.data,Q=K.id,ne=n[Q];n[Q]=null,K.status==="success"?ne.onComplete(K.payload):ne.onError&&ne.onError()})}function R(q,K){u+=1;var Q="processId_"+u;return n[Q]={onComplete:q,onError:K},Q}function I(q,K,Q){A();var ne=R(K,Q);f.postMessage({type:"loadAnimation",path:q,fullPath:window.location.origin+window.location.pathname,id:ne})}function G(q,K,Q){A();var ne=R(K,Q);f.postMessage({type:"loadData",path:q,fullPath:window.location.origin+window.location.pathname,id:ne})}function Y(q,K,Q){A();var ne=R(K,Q);f.postMessage({type:"complete",animation:q,id:ne})}return{loadAnimation:I,loadData:G,completeAnimation:Y}})(),ImagePreloader=(function(){var u=(function(){var J=createTag("canvas");J.width=1,J.height=1;var ie=J.getContext("2d");return ie.fillStyle="rgba(0,0,0,0)",ie.fillRect(0,0,1,1),J})();function n(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function s(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function f(J,ie,re){var le="";if(J.e)le=J.p;else if(ie){var fe=J.p;fe.indexOf("images/")!==-1&&(fe=fe.split("/")[1]),le=ie+fe}else le=re,le+=J.u?J.u:"",le+=J.p;return le}function d(J){var ie=0,re=setInterval((function(){var le=J.getBBox();(le.width||ie>500)&&(this._imageLoaded(),clearInterval(re)),ie+=1}).bind(this),50)}function y(J){var ie=f(J,this.assetsPath,this.path),re=createNS("image");isSafari?this.testImageLoaded(re):re.addEventListener("load",this._imageLoaded,!1),re.addEventListener("error",(function(){le.img=u,this._imageLoaded()}).bind(this),!1),re.setAttributeNS("http://www.w3.org/1999/xlink","href",ie),this._elementHelper.append?this._elementHelper.append(re):this._elementHelper.appendChild(re);var le={img:re,assetData:J};return le}function _(J){var ie=f(J,this.assetsPath,this.path),re=createTag("img");re.crossOrigin="anonymous",re.addEventListener("load",this._imageLoaded,!1),re.addEventListener("error",(function(){le.img=u,this._imageLoaded()}).bind(this),!1),re.src=ie;var le={img:re,assetData:J};return le}function A(J){var ie={assetData:J},re=f(J,this.assetsPath,this.path);return dataManager.loadData(re,(function(le){ie.img=le,this._footageLoaded()}).bind(this),(function(){ie.img={},this._footageLoaded()}).bind(this)),ie}function R(J,ie){this.imagesLoadedCb=ie;var re,le=J.length;for(re=0;re<le;re+=1)J[re].layers||(!J[re].t||J[re].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(J[re]))):J[re].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(J[re]))))}function I(J){this.path=J||""}function G(J){this.assetsPath=J||""}function Y(J){for(var ie=0,re=this.images.length;ie<re;){if(this.images[ie].assetData===J)return this.images[ie].img;ie+=1}return null}function q(){this.imagesLoadedCb=null,this.images.length=0}function K(){return this.totalImages===this.loadedAssets}function Q(){return this.totalFootages===this.loadedFootagesCount}function ne(J,ie){J==="svg"?(this._elementHelper=ie,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function te(){this._imageLoaded=n.bind(this),this._footageLoaded=s.bind(this),this.testImageLoaded=d.bind(this),this.createFootageData=A.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return te.prototype={loadAssets:R,setAssetsPath:G,setPath:I,loadedImages:K,loadedFootages:Q,destroy:q,getAsset:Y,createImgData:_,createImageData:y,imageLoaded:n,footageLoaded:s,setCacheType:ne},te})();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(n,s){if(this._cbs[n])for(var f=this._cbs[n],d=0;d<f.length;d+=1)f[d](s)},addEventListener:function(n,s){return this._cbs[n]||(this._cbs[n]=[]),this._cbs[n].push(s),(function(){this.removeEventListener(n,s)}).bind(this)},removeEventListener:function(n,s){if(!s)this._cbs[n]=null;else if(this._cbs[n]){for(var f=0,d=this._cbs[n].length;f<d;)this._cbs[n][f]===s&&(this._cbs[n].splice(f,1),f-=1,d-=1),f+=1;this._cbs[n].length||(this._cbs[n]=null)}}};var markerParser=(function(){function u(n){for(var s=n.split(`\r
`),f={},d,y=0,_=0;_<s.length;_+=1)d=s[_].split(":"),d.length===2&&(f[d[0]]=d[1].trim(),y+=1);if(y===0)throw new Error;return f}return function(n){for(var s=[],f=0;f<n.length;f+=1){var d=n[f],y={time:d.tm,duration:d.dr};try{y.payload=JSON.parse(n[f].cm)}catch{try{y.payload=u(n[f].cm)}catch{y.payload={name:n[f].cm}}}s.push(y)}return s}})(),ProjectInterface=(function(){function u(n){this.compositions.push(n)}return function(){function n(s){for(var f=0,d=this.compositions.length;f<d;){if(this.compositions[f].data&&this.compositions[f].data.nm===s)return this.compositions[f].prepareFrame&&this.compositions[f].data.xt&&this.compositions[f].prepareFrame(this.currentFrame),this.compositions[f].compInterface;f+=1}return null}return n.compositions=[],n.currentFrame=0,n.registerComposition=u,n}})(),renderers={},registerRenderer=function(n,s){renderers[n]=s};function getRenderer(u){return renderers[u]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var u in renderers)if(renderers[u])return u;return""}function _typeof$4(u){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$4(u)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(u){(u.wrapper||u.container)&&(this.wrapper=u.wrapper||u.container);var n="svg";u.animType?n=u.animType:u.renderer&&(n=u.renderer);var s=getRenderer(n);this.renderer=new s(this,u.rendererSettings),this.imagePreloader.setCacheType(n,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=n,u.loop===""||u.loop===null||u.loop===void 0||u.loop===!0?this.loop=!0:u.loop===!1?this.loop=!1:this.loop=parseInt(u.loop,10),this.autoplay="autoplay"in u?u.autoplay:!0,this.name=u.name?u.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(u,"autoloadSegments")?u.autoloadSegments:!0,this.assetsPath=u.assetsPath,this.initialSegment=u.initialSegment,u.audioFactory&&this.audioController.setAudioFactory(u.audioFactory),u.animationData?this.setupAnimation(u.animationData):u.path&&(u.path.lastIndexOf("\\")!==-1?this.path=u.path.substr(0,u.path.lastIndexOf("\\")+1):this.path=u.path.substr(0,u.path.lastIndexOf("/")+1),this.fileName=u.path.substr(u.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(u.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(u){dataManager.completeAnimation(u,this.configAnimation)},AnimationItem.prototype.setData=function(u,n){n&&_typeof$4(n)!=="object"&&(n=JSON.parse(n));var s={wrapper:u,animationData:n},f=u.attributes;s.path=f.getNamedItem("data-animation-path")?f.getNamedItem("data-animation-path").value:f.getNamedItem("data-bm-path")?f.getNamedItem("data-bm-path").value:f.getNamedItem("bm-path")?f.getNamedItem("bm-path").value:"",s.animType=f.getNamedItem("data-anim-type")?f.getNamedItem("data-anim-type").value:f.getNamedItem("data-bm-type")?f.getNamedItem("data-bm-type").value:f.getNamedItem("bm-type")?f.getNamedItem("bm-type").value:f.getNamedItem("data-bm-renderer")?f.getNamedItem("data-bm-renderer").value:f.getNamedItem("bm-renderer")?f.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var d=f.getNamedItem("data-anim-loop")?f.getNamedItem("data-anim-loop").value:f.getNamedItem("data-bm-loop")?f.getNamedItem("data-bm-loop").value:f.getNamedItem("bm-loop")?f.getNamedItem("bm-loop").value:"";d==="false"?s.loop=!1:d==="true"?s.loop=!0:d!==""&&(s.loop=parseInt(d,10));var y=f.getNamedItem("data-anim-autoplay")?f.getNamedItem("data-anim-autoplay").value:f.getNamedItem("data-bm-autoplay")?f.getNamedItem("data-bm-autoplay").value:f.getNamedItem("bm-autoplay")?f.getNamedItem("bm-autoplay").value:!0;s.autoplay=y!=="false",s.name=f.getNamedItem("data-name")?f.getNamedItem("data-name").value:f.getNamedItem("data-bm-name")?f.getNamedItem("data-bm-name").value:f.getNamedItem("bm-name")?f.getNamedItem("bm-name").value:"";var _=f.getNamedItem("data-anim-prerender")?f.getNamedItem("data-anim-prerender").value:f.getNamedItem("data-bm-prerender")?f.getNamedItem("data-bm-prerender").value:f.getNamedItem("bm-prerender")?f.getNamedItem("bm-prerender").value:"";_==="false"&&(s.prerender=!1),s.path?this.setParams(s):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(u){u.op>this.animationData.op&&(this.animationData.op=u.op,this.totalFrames=Math.floor(u.op-this.animationData.ip));var n=this.animationData.layers,s,f=n.length,d=u.layers,y,_=d.length;for(y=0;y<_;y+=1)for(s=0;s<f;){if(n[s].id===d[y].id){n[s]=d[y];break}s+=1}if((u.chars||u.fonts)&&(this.renderer.globalData.fontManager.addChars(u.chars),this.renderer.globalData.fontManager.addFonts(u.fonts,this.renderer.globalData.defs)),u.assets)for(f=u.assets.length,s=0;s<f;s+=1)this.animationData.assets.push(u.assets[s]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(u){this.animationData=u;var n=getExpressionsPlugin();n&&n.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var u=this.animationData.segments;if(!u||u.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var n=u.shift();this.timeCompleted=n.time*this.frameRate;var s=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(s,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var u=this.animationData.segments;u||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(u){if(this.renderer)try{this.animationData=u,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(u),u.assets||(u.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(u.assets),this.markers=markerParser(u.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(n){this.triggerConfigError(n)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var u=getExpressionsPlugin();u&&u.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(u,n){var s=typeof u=="number"?u:void 0,f=typeof n=="number"?n:void 0;this.renderer.updateContainerSize(s,f)},AnimationItem.prototype.setSubframe=function(u){this.isSubframeEnabled=!!u},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(u){this.triggerRenderFrameError(u)}},AnimationItem.prototype.play=function(u){u&&this.name!==u||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(u){u&&this.name!==u||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(u){u&&this.name!==u||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(u){u&&this.name!==u||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(u){for(var n,s=0;s<this.markers.length;s+=1)if(n=this.markers[s],n.payload&&n.payload.name===u)return n;return null},AnimationItem.prototype.goToAndStop=function(u,n,s){if(!(s&&this.name!==s)){var f=Number(u);if(isNaN(f)){var d=this.getMarkerData(u);d&&this.goToAndStop(d.time,!0)}else n?this.setCurrentRawFrameValue(u):this.setCurrentRawFrameValue(u*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(u,n,s){if(!(s&&this.name!==s)){var f=Number(u);if(isNaN(f)){var d=this.getMarkerData(u);d&&(d.duration?this.playSegments([d.time,d.time+d.duration],!0):this.goToAndStop(d.time,!0))}else this.goToAndStop(f,n,s);this.play()}},AnimationItem.prototype.advanceTime=function(u){if(!(this.isPaused===!0||this.isLoaded===!1)){var n=this.currentRawFrame+u*this.frameModifier,s=!1;n>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(n>this.totalFrames?n%this.totalFrames:0)||(s=!0,n=this.totalFrames-1):n>=this.totalFrames?(this.playCount+=1,this.checkSegments(n%this.totalFrames)||(this.setCurrentRawFrameValue(n%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(n):n<0?this.checkSegments(n%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+n%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(s=!0,n=0)):this.setCurrentRawFrameValue(n),s&&(this.setCurrentRawFrameValue(n),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(u,n){this.playCount=0,u[1]<u[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=u[0]-u[1],this.timeCompleted=this.totalFrames,this.firstFrame=u[1],this.setCurrentRawFrameValue(this.totalFrames-.001-n)):u[1]>u[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=u[1]-u[0],this.timeCompleted=this.totalFrames,this.firstFrame=u[0],this.setCurrentRawFrameValue(.001+n)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(u,n){var s=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<u?s=u:this.currentRawFrame+this.firstFrame>n&&(s=n-u)),this.firstFrame=u,this.totalFrames=n-u,this.timeCompleted=this.totalFrames,s!==-1&&this.goToAndStop(s,!0)},AnimationItem.prototype.playSegments=function(u,n){if(n&&(this.segments.length=0),_typeof$4(u[0])==="object"){var s,f=u.length;for(s=0;s<f;s+=1)this.segments.push(u[s])}else this.segments.push(u);this.segments.length&&n&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(u){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),u&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(u){return this.segments.length?(this.adjustSegment(this.segments.shift(),u),!0):!1},AnimationItem.prototype.destroy=function(u){u&&this.name!==u||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(u){this.currentRawFrame=u,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(u){this.playSpeed=u,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(u){this.playDirection=u<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(u){this.loop=u},AnimationItem.prototype.setVolume=function(u,n){n&&this.name!==n||this.audioController.setVolume(u)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(u){u&&this.name!==u||this.audioController.mute()},AnimationItem.prototype.unmute=function(u){u&&this.name!==u||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(u){var n="";if(u.e)n=u.p;else if(this.assetsPath){var s=u.p;s.indexOf("images/")!==-1&&(s=s.split("/")[1]),n=this.assetsPath+s}else n=this.path,n+=u.u?u.u:"",n+=u.p;return n},AnimationItem.prototype.getAssetData=function(u){for(var n=0,s=this.assets.length;n<s;){if(u===this.assets[n].id)return this.assets[n];n+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(u){return u?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(u,n,s){try{var f=this.renderer.getElementByPath(u);f.updateDocumentData(n,s)}catch{}},AnimationItem.prototype.trigger=function(u){if(this._cbs&&this._cbs[u])switch(u){case"enterFrame":this.triggerEvent(u,new BMEnterFrameEvent(u,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(u,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(u,new BMCompleteLoopEvent(u,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(u,new BMCompleteEvent(u,this.frameMult));break;case"segmentStart":this.triggerEvent(u,new BMSegmentStartEvent(u,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(u,new BMDestroyEvent(u,this));break;default:this.triggerEvent(u)}u==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(u,this.currentFrame,this.totalFrames,this.frameMult)),u==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(u,this.loop,this.playCount,this.frameMult)),u==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(u,this.frameMult)),u==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(u,this.firstFrame,this.totalFrames)),u==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(u,this))},AnimationItem.prototype.triggerRenderFrameError=function(u){var n=new BMRenderFrameErrorEvent(u,this.currentFrame);this.triggerEvent("error",n),this.onError&&this.onError.call(this,n)},AnimationItem.prototype.triggerConfigError=function(u){var n=new BMConfigErrorEvent(u,this.currentFrame);this.triggerEvent("error",n),this.onError&&this.onError.call(this,n)};var animationManager=(function(){var u={},n=[],s=0,f=0,d=0,y=!0,_=!1;function A(ye){for(var Ae=0,_e=ye.target;Ae<f;)n[Ae].animation===_e&&(n.splice(Ae,1),Ae-=1,f-=1,_e.isPaused||Y()),Ae+=1}function R(ye,Ae){if(!ye)return null;for(var _e=0;_e<f;){if(n[_e].elem===ye&&n[_e].elem!==null)return n[_e].animation;_e+=1}var Te=new AnimationItem;return q(Te,ye),Te.setData(ye,Ae),Te}function I(){var ye,Ae=n.length,_e=[];for(ye=0;ye<Ae;ye+=1)_e.push(n[ye].animation);return _e}function G(){d+=1,Se()}function Y(){d-=1}function q(ye,Ae){ye.addEventListener("destroy",A),ye.addEventListener("_active",G),ye.addEventListener("_idle",Y),n.push({elem:Ae,animation:ye}),f+=1}function K(ye){var Ae=new AnimationItem;return q(Ae,null),Ae.setParams(ye),Ae}function Q(ye,Ae){var _e;for(_e=0;_e<f;_e+=1)n[_e].animation.setSpeed(ye,Ae)}function ne(ye,Ae){var _e;for(_e=0;_e<f;_e+=1)n[_e].animation.setDirection(ye,Ae)}function te(ye){var Ae;for(Ae=0;Ae<f;Ae+=1)n[Ae].animation.play(ye)}function J(ye){var Ae=ye-s,_e;for(_e=0;_e<f;_e+=1)n[_e].animation.advanceTime(Ae);s=ye,d&&!_?window.requestAnimationFrame(J):y=!0}function ie(ye){s=ye,window.requestAnimationFrame(J)}function re(ye){var Ae;for(Ae=0;Ae<f;Ae+=1)n[Ae].animation.pause(ye)}function le(ye,Ae,_e){var Te;for(Te=0;Te<f;Te+=1)n[Te].animation.goToAndStop(ye,Ae,_e)}function fe(ye){var Ae;for(Ae=0;Ae<f;Ae+=1)n[Ae].animation.stop(ye)}function pe(ye){var Ae;for(Ae=0;Ae<f;Ae+=1)n[Ae].animation.togglePause(ye)}function de(ye){var Ae;for(Ae=f-1;Ae>=0;Ae-=1)n[Ae].animation.destroy(ye)}function se(ye,Ae,_e){var Te=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),we,ge=Te.length;for(we=0;we<ge;we+=1)_e&&Te[we].setAttribute("data-bm-type",_e),R(Te[we],ye);if(Ae&&ge===0){_e||(_e="svg");var De=document.getElementsByTagName("body")[0];De.innerText="";var ze=createTag("div");ze.style.width="100%",ze.style.height="100%",ze.setAttribute("data-bm-type",_e),De.appendChild(ze),R(ze,ye)}}function he(){var ye;for(ye=0;ye<f;ye+=1)n[ye].animation.resize()}function Se(){!_&&d&&y&&(window.requestAnimationFrame(ie),y=!1)}function ve(){_=!0}function Re(){_=!1,Se()}function Ee(ye,Ae){var _e;for(_e=0;_e<f;_e+=1)n[_e].animation.setVolume(ye,Ae)}function Oe(ye){var Ae;for(Ae=0;Ae<f;Ae+=1)n[Ae].animation.mute(ye)}function Ne(ye){var Ae;for(Ae=0;Ae<f;Ae+=1)n[Ae].animation.unmute(ye)}return u.registerAnimation=R,u.loadAnimation=K,u.setSpeed=Q,u.setDirection=ne,u.play=te,u.pause=re,u.stop=fe,u.togglePause=pe,u.searchAnimations=se,u.resize=he,u.goToAndStop=le,u.destroy=de,u.freeze=ve,u.unfreeze=Re,u.setVolume=Ee,u.mute=Oe,u.unmute=Ne,u.getRegisteredAnimations=I,u})(),BezierFactory=(function(){var u={};u.getBezierEasing=s;var n={};function s(ie,re,le,fe,pe){var de=pe||("bez_"+ie+"_"+re+"_"+le+"_"+fe).replace(/\./g,"p");if(n[de])return n[de];var se=new J([ie,re,le,fe]);return n[de]=se,se}var f=4,d=.001,y=1e-7,_=10,A=11,R=1/(A-1),I=typeof Float32Array=="function";function G(ie,re){return 1-3*re+3*ie}function Y(ie,re){return 3*re-6*ie}function q(ie){return 3*ie}function K(ie,re,le){return((G(re,le)*ie+Y(re,le))*ie+q(re))*ie}function Q(ie,re,le){return 3*G(re,le)*ie*ie+2*Y(re,le)*ie+q(re)}function ne(ie,re,le,fe,pe){var de,se,he=0;do se=re+(le-re)/2,de=K(se,fe,pe)-ie,de>0?le=se:re=se;while(Math.abs(de)>y&&++he<_);return se}function te(ie,re,le,fe){for(var pe=0;pe<f;++pe){var de=Q(re,le,fe);if(de===0)return re;var se=K(re,le,fe)-ie;re-=se/de}return re}function J(ie){this._p=ie,this._mSampleValues=I?new Float32Array(A):new Array(A),this._precomputed=!1,this.get=this.get.bind(this)}return J.prototype={get:function(re){var le=this._p[0],fe=this._p[1],pe=this._p[2],de=this._p[3];return this._precomputed||this._precompute(),le===fe&&pe===de?re:re===0?0:re===1?1:K(this._getTForX(re),fe,de)},_precompute:function(){var re=this._p[0],le=this._p[1],fe=this._p[2],pe=this._p[3];this._precomputed=!0,(re!==le||fe!==pe)&&this._calcSampleValues()},_calcSampleValues:function(){for(var re=this._p[0],le=this._p[2],fe=0;fe<A;++fe)this._mSampleValues[fe]=K(fe*R,re,le)},_getTForX:function(re){for(var le=this._p[0],fe=this._p[2],pe=this._mSampleValues,de=0,se=1,he=A-1;se!==he&&pe[se]<=re;++se)de+=R;--se;var Se=(re-pe[se])/(pe[se+1]-pe[se]),ve=de+Se*R,Re=Q(ve,le,fe);return Re>=d?te(re,ve,le,fe):Re===0?ve:ne(re,de,de+R,le,fe)}},u})(),pooling=(function(){function u(n){return n.concat(createSizedArray(n.length))}return{double:u}})(),poolFactory=(function(){return function(u,n,s){var f=0,d=u,y=createSizedArray(d),_={newElement:A,release:R};function A(){var I;return f?(f-=1,I=y[f]):I=n(),I}function R(I){f===d&&(y=pooling.double(y),d*=2),s&&s(I),y[f]=I,f+=1}return _}})(),bezierLengthPool=(function(){function u(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,u)})(),segmentsLengthPool=(function(){function u(){return{lengths:[],totalLength:0}}function n(s){var f,d=s.lengths.length;for(f=0;f<d;f+=1)bezierLengthPool.release(s.lengths[f]);s.lengths.length=0}return poolFactory(8,u,n)})();function bezFunction(){var u=Math;function n(q,K,Q,ne,te,J){var ie=q*ne+K*te+Q*J-te*ne-J*q-Q*K;return ie>-.001&&ie<.001}function s(q,K,Q,ne,te,J,ie,re,le){if(Q===0&&J===0&&le===0)return n(q,K,ne,te,ie,re);var fe=u.sqrt(u.pow(ne-q,2)+u.pow(te-K,2)+u.pow(J-Q,2)),pe=u.sqrt(u.pow(ie-q,2)+u.pow(re-K,2)+u.pow(le-Q,2)),de=u.sqrt(u.pow(ie-ne,2)+u.pow(re-te,2)+u.pow(le-J,2)),se;return fe>pe?fe>de?se=fe-pe-de:se=de-pe-fe:de>pe?se=de-pe-fe:se=pe-fe-de,se>-1e-4&&se<1e-4}var f=(function(){return function(q,K,Q,ne){var te=getDefaultCurveSegments(),J,ie,re,le,fe,pe=0,de,se=[],he=[],Se=bezierLengthPool.newElement();for(re=Q.length,J=0;J<te;J+=1){for(fe=J/(te-1),de=0,ie=0;ie<re;ie+=1)le=bmPow(1-fe,3)*q[ie]+3*bmPow(1-fe,2)*fe*Q[ie]+3*(1-fe)*bmPow(fe,2)*ne[ie]+bmPow(fe,3)*K[ie],se[ie]=le,he[ie]!==null&&(de+=bmPow(se[ie]-he[ie],2)),he[ie]=se[ie];de&&(de=bmSqrt(de),pe+=de),Se.percents[J]=fe,Se.lengths[J]=pe}return Se.addedLength=pe,Se}})();function d(q){var K=segmentsLengthPool.newElement(),Q=q.c,ne=q.v,te=q.o,J=q.i,ie,re=q._length,le=K.lengths,fe=0;for(ie=0;ie<re-1;ie+=1)le[ie]=f(ne[ie],ne[ie+1],te[ie],J[ie+1]),fe+=le[ie].addedLength;return Q&&re&&(le[ie]=f(ne[ie],ne[0],te[ie],J[0]),fe+=le[ie].addedLength),K.totalLength=fe,K}function y(q){this.segmentLength=0,this.points=new Array(q)}function _(q,K){this.partialLength=q,this.point=K}var A=(function(){var q={};return function(K,Q,ne,te){var J=(K[0]+"_"+K[1]+"_"+Q[0]+"_"+Q[1]+"_"+ne[0]+"_"+ne[1]+"_"+te[0]+"_"+te[1]).replace(/\./g,"p");if(!q[J]){var ie=getDefaultCurveSegments(),re,le,fe,pe,de,se=0,he,Se,ve=null;K.length===2&&(K[0]!==Q[0]||K[1]!==Q[1])&&n(K[0],K[1],Q[0],Q[1],K[0]+ne[0],K[1]+ne[1])&&n(K[0],K[1],Q[0],Q[1],Q[0]+te[0],Q[1]+te[1])&&(ie=2);var Re=new y(ie);for(fe=ne.length,re=0;re<ie;re+=1){for(Se=createSizedArray(fe),de=re/(ie-1),he=0,le=0;le<fe;le+=1)pe=bmPow(1-de,3)*K[le]+3*bmPow(1-de,2)*de*(K[le]+ne[le])+3*(1-de)*bmPow(de,2)*(Q[le]+te[le])+bmPow(de,3)*Q[le],Se[le]=pe,ve!==null&&(he+=bmPow(Se[le]-ve[le],2));he=bmSqrt(he),se+=he,Re.points[re]=new _(he,Se),ve=Se}Re.segmentLength=se,q[J]=Re}return q[J]}})();function R(q,K){var Q=K.percents,ne=K.lengths,te=Q.length,J=bmFloor((te-1)*q),ie=q*K.addedLength,re=0;if(J===te-1||J===0||ie===ne[J])return Q[J];for(var le=ne[J]>ie?-1:1,fe=!0;fe;)if(ne[J]<=ie&&ne[J+1]>ie?(re=(ie-ne[J])/(ne[J+1]-ne[J]),fe=!1):J+=le,J<0||J>=te-1){if(J===te-1)return Q[J];fe=!1}return Q[J]+(Q[J+1]-Q[J])*re}function I(q,K,Q,ne,te,J){var ie=R(te,J),re=1-ie,le=u.round((re*re*re*q[0]+(ie*re*re+re*ie*re+re*re*ie)*Q[0]+(ie*ie*re+re*ie*ie+ie*re*ie)*ne[0]+ie*ie*ie*K[0])*1e3)/1e3,fe=u.round((re*re*re*q[1]+(ie*re*re+re*ie*re+re*re*ie)*Q[1]+(ie*ie*re+re*ie*ie+ie*re*ie)*ne[1]+ie*ie*ie*K[1])*1e3)/1e3;return[le,fe]}var G=createTypedArray("float32",8);function Y(q,K,Q,ne,te,J,ie){te<0?te=0:te>1&&(te=1);var re=R(te,ie);J=J>1?1:J;var le=R(J,ie),fe,pe=q.length,de=1-re,se=1-le,he=de*de*de,Se=re*de*de*3,ve=re*re*de*3,Re=re*re*re,Ee=de*de*se,Oe=re*de*se+de*re*se+de*de*le,Ne=re*re*se+de*re*le+re*de*le,ye=re*re*le,Ae=de*se*se,_e=re*se*se+de*le*se+de*se*le,Te=re*le*se+de*le*le+re*se*le,we=re*le*le,ge=se*se*se,De=le*se*se+se*le*se+se*se*le,ze=le*le*se+se*le*le+le*se*le,He=le*le*le;for(fe=0;fe<pe;fe+=1)G[fe*4]=u.round((he*q[fe]+Se*Q[fe]+ve*ne[fe]+Re*K[fe])*1e3)/1e3,G[fe*4+1]=u.round((Ee*q[fe]+Oe*Q[fe]+Ne*ne[fe]+ye*K[fe])*1e3)/1e3,G[fe*4+2]=u.round((Ae*q[fe]+_e*Q[fe]+Te*ne[fe]+we*K[fe])*1e3)/1e3,G[fe*4+3]=u.round((ge*q[fe]+De*Q[fe]+ze*ne[fe]+He*K[fe])*1e3)/1e3;return G}return{getSegmentsLength:d,getNewSegment:Y,getPointInSegment:I,buildBezierData:A,pointOnLine2D:n,pointOnLine3D:s}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(u,n){var s=this.offsetTime,f;this.propType==="multidimensional"&&(f=createTypedArray("float32",this.pv.length));for(var d=n.lastIndex,y=d,_=this.keyframes.length-1,A=!0,R,I,G;A;){if(R=this.keyframes[y],I=this.keyframes[y+1],y===_-1&&u>=I.t-s){R.h&&(R=I),d=0;break}if(I.t-s>u){d=y;break}y<_-1?y+=1:(d=0,A=!1)}G=this.keyframesMetadata[y]||{};var Y,q,K,Q,ne,te,J=I.t-s,ie=R.t-s,re;if(R.to){G.bezierData||(G.bezierData=bez.buildBezierData(R.s,I.s||R.e,R.to,R.ti));var le=G.bezierData;if(u>=J||u<ie){var fe=u>=J?le.points.length-1:0;for(q=le.points[fe].point.length,Y=0;Y<q;Y+=1)f[Y]=le.points[fe].point[Y]}else{G.__fnct?te=G.__fnct:(te=BezierFactory.getBezierEasing(R.o.x,R.o.y,R.i.x,R.i.y,R.n).get,G.__fnct=te),K=te((u-ie)/(J-ie));var pe=le.segmentLength*K,de,se=n.lastFrame<u&&n._lastKeyframeIndex===y?n._lastAddedLength:0;for(ne=n.lastFrame<u&&n._lastKeyframeIndex===y?n._lastPoint:0,A=!0,Q=le.points.length;A;){if(se+=le.points[ne].partialLength,pe===0||K===0||ne===le.points.length-1){for(q=le.points[ne].point.length,Y=0;Y<q;Y+=1)f[Y]=le.points[ne].point[Y];break}else if(pe>=se&&pe<se+le.points[ne+1].partialLength){for(de=(pe-se)/le.points[ne+1].partialLength,q=le.points[ne].point.length,Y=0;Y<q;Y+=1)f[Y]=le.points[ne].point[Y]+(le.points[ne+1].point[Y]-le.points[ne].point[Y])*de;break}ne<Q-1?ne+=1:A=!1}n._lastPoint=ne,n._lastAddedLength=se-le.points[ne].partialLength,n._lastKeyframeIndex=y}}else{var he,Se,ve,Re,Ee;if(_=R.s.length,re=I.s||R.e,this.sh&&R.h!==1)if(u>=J)f[0]=re[0],f[1]=re[1],f[2]=re[2];else if(u<=ie)f[0]=R.s[0],f[1]=R.s[1],f[2]=R.s[2];else{var Oe=createQuaternion(R.s),Ne=createQuaternion(re),ye=(u-ie)/(J-ie);quaternionToEuler(f,slerp(Oe,Ne,ye))}else for(y=0;y<_;y+=1)R.h!==1&&(u>=J?K=1:u<ie?K=0:(R.o.x.constructor===Array?(G.__fnct||(G.__fnct=[]),G.__fnct[y]?te=G.__fnct[y]:(he=R.o.x[y]===void 0?R.o.x[0]:R.o.x[y],Se=R.o.y[y]===void 0?R.o.y[0]:R.o.y[y],ve=R.i.x[y]===void 0?R.i.x[0]:R.i.x[y],Re=R.i.y[y]===void 0?R.i.y[0]:R.i.y[y],te=BezierFactory.getBezierEasing(he,Se,ve,Re).get,G.__fnct[y]=te)):G.__fnct?te=G.__fnct:(he=R.o.x,Se=R.o.y,ve=R.i.x,Re=R.i.y,te=BezierFactory.getBezierEasing(he,Se,ve,Re).get,R.keyframeMetadata=te),K=te((u-ie)/(J-ie)))),re=I.s||R.e,Ee=R.h===1?R.s[y]:R.s[y]+(re[y]-R.s[y])*K,this.propType==="multidimensional"?f[y]=Ee:f=Ee}return n.lastIndex=d,f}function slerp(u,n,s){var f=[],d=u[0],y=u[1],_=u[2],A=u[3],R=n[0],I=n[1],G=n[2],Y=n[3],q,K,Q,ne,te;return K=d*R+y*I+_*G+A*Y,K<0&&(K=-K,R=-R,I=-I,G=-G,Y=-Y),1-K>1e-6?(q=Math.acos(K),Q=Math.sin(q),ne=Math.sin((1-s)*q)/Q,te=Math.sin(s*q)/Q):(ne=1-s,te=s),f[0]=ne*d+te*R,f[1]=ne*y+te*I,f[2]=ne*_+te*G,f[3]=ne*A+te*Y,f}function quaternionToEuler(u,n){var s=n[0],f=n[1],d=n[2],y=n[3],_=Math.atan2(2*f*y-2*s*d,1-2*f*f-2*d*d),A=Math.asin(2*s*f+2*d*y),R=Math.atan2(2*s*y-2*f*d,1-2*s*s-2*d*d);u[0]=_/degToRads,u[1]=A/degToRads,u[2]=R/degToRads}function createQuaternion(u){var n=u[0]*degToRads,s=u[1]*degToRads,f=u[2]*degToRads,d=Math.cos(n/2),y=Math.cos(s/2),_=Math.cos(f/2),A=Math.sin(n/2),R=Math.sin(s/2),I=Math.sin(f/2),G=d*y*_-A*R*I,Y=A*R*_+d*y*I,q=A*y*_+d*R*I,K=d*R*_-A*y*I;return[Y,q,K,G]}function getValueAtCurrentTime(){var u=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,s=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(u===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=s&&u>=s||this._caching.lastFrame<n&&u<n))){this._caching.lastFrame>=u&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var f=this.interpolateValue(u,this._caching);this.pv=f}return this._caching.lastFrame=u,this.pv}function setVValue(u){var n;if(this.propType==="unidimensional")n=u*this.mult,mathAbs(this.v-n)>1e-5&&(this.v=n,this._mdf=!0);else for(var s=0,f=this.v.length;s<f;)n=u[s]*this.mult,mathAbs(this.v[s]-n)>1e-5&&(this.v[s]=n,this._mdf=!0),s+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var u,n=this.effectsSequence.length,s=this.kf?this.pv:this.data.k;for(u=0;u<n;u+=1)s=this.effectsSequence[u](s);this.setVValue(s),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(u){this.effectsSequence.push(u),this.container.addDynamicProperty(this)}function ValueProperty(u,n,s,f){this.propType="unidimensional",this.mult=s||1,this.data=n,this.v=s?n.k*s:n.k,this.pv=n.k,this._mdf=!1,this.elem=u,this.container=f,this.comp=u.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(u,n,s,f){this.propType="multidimensional",this.mult=s||1,this.data=n,this._mdf=!1,this.elem=u,this.container=f,this.comp=u.comp,this.k=!1,this.kf=!1,this.frameId=-1;var d,y=n.k.length;for(this.v=createTypedArray("float32",y),this.pv=createTypedArray("float32",y),this.vel=createTypedArray("float32",y),d=0;d<y;d+=1)this.v[d]=n.k[d]*this.mult,this.pv[d]=n.k[d];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(u,n,s,f){this.propType="unidimensional",this.keyframes=n.k,this.keyframesMetadata=[],this.offsetTime=u.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=n,this.mult=s||1,this.elem=u,this.container=f,this.comp=u.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(u,n,s,f){this.propType="multidimensional";var d,y=n.k.length,_,A,R,I;for(d=0;d<y-1;d+=1)n.k[d].to&&n.k[d].s&&n.k[d+1]&&n.k[d+1].s&&(_=n.k[d].s,A=n.k[d+1].s,R=n.k[d].to,I=n.k[d].ti,(_.length===2&&!(_[0]===A[0]&&_[1]===A[1])&&bez.pointOnLine2D(_[0],_[1],A[0],A[1],_[0]+R[0],_[1]+R[1])&&bez.pointOnLine2D(_[0],_[1],A[0],A[1],A[0]+I[0],A[1]+I[1])||_.length===3&&!(_[0]===A[0]&&_[1]===A[1]&&_[2]===A[2])&&bez.pointOnLine3D(_[0],_[1],_[2],A[0],A[1],A[2],_[0]+R[0],_[1]+R[1],_[2]+R[2])&&bez.pointOnLine3D(_[0],_[1],_[2],A[0],A[1],A[2],A[0]+I[0],A[1]+I[1],A[2]+I[2]))&&(n.k[d].to=null,n.k[d].ti=null),_[0]===A[0]&&_[1]===A[1]&&R[0]===0&&R[1]===0&&I[0]===0&&I[1]===0&&(_.length===2||_[2]===A[2]&&R[2]===0&&I[2]===0)&&(n.k[d].to=null,n.k[d].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=n,this.keyframes=n.k,this.keyframesMetadata=[],this.offsetTime=u.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=s||1,this.elem=u,this.container=f,this.comp=u.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var G=n.k[0].s.length;for(this.v=createTypedArray("float32",G),this.pv=createTypedArray("float32",G),d=0;d<G;d+=1)this.v[d]=initFrame,this.pv[d]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",G)},this.addEffect=addEffect}var PropertyFactory=(function(){function u(s,f,d,y,_){f.sid&&(f=s.globalData.slotManager.getProp(f));var A;if(!f.k.length)A=new ValueProperty(s,f,y,_);else if(typeof f.k[0]=="number")A=new MultiDimensionalProperty(s,f,y,_);else switch(d){case 0:A=new KeyframedValueProperty(s,f,y,_);break;case 1:A=new KeyframedMultidimensionalProperty(s,f,y,_);break}return A.effectsSequence.length&&_.addDynamicProperty(A),A}var n={getProp:u};return n})();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(n){this.dynamicProperties.indexOf(n)===-1&&(this.dynamicProperties.push(n),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var n,s=this.dynamicProperties.length;for(n=0;n<s;n+=1)this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(n){this.container=n,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=(function(){function u(){return createTypedArray("float32",2)}return poolFactory(8,u)})();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(u,n){this.c=u,this.setLength(n);for(var s=0;s<n;)this.v[s]=pointPool.newElement(),this.o[s]=pointPool.newElement(),this.i[s]=pointPool.newElement(),s+=1},ShapePath.prototype.setLength=function(u){for(;this._maxLength<u;)this.doubleArrayLength();this._length=u},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(u,n,s,f,d){var y;switch(this._length=Math.max(this._length,f+1),this._length>=this._maxLength&&this.doubleArrayLength(),s){case"v":y=this.v;break;case"i":y=this.i;break;case"o":y=this.o;break;default:y=[];break}(!y[f]||y[f]&&!d)&&(y[f]=pointPool.newElement()),y[f][0]=u,y[f][1]=n},ShapePath.prototype.setTripleAt=function(u,n,s,f,d,y,_,A){this.setXYAt(u,n,"v",_,A),this.setXYAt(s,f,"o",_,A),this.setXYAt(d,y,"i",_,A)},ShapePath.prototype.reverse=function(){var u=new ShapePath;u.setPathData(this.c,this._length);var n=this.v,s=this.o,f=this.i,d=0;this.c&&(u.setTripleAt(n[0][0],n[0][1],f[0][0],f[0][1],s[0][0],s[0][1],0,!1),d=1);var y=this._length-1,_=this._length,A;for(A=d;A<_;A+=1)u.setTripleAt(n[y][0],n[y][1],f[y][0],f[y][1],s[y][0],s[y][1],A,!1),y-=1;return u},ShapePath.prototype.length=function(){return this._length};var shapePool=(function(){function u(){return new ShapePath}function n(d){var y=d._length,_;for(_=0;_<y;_+=1)pointPool.release(d.v[_]),pointPool.release(d.i[_]),pointPool.release(d.o[_]),d.v[_]=null,d.i[_]=null,d.o[_]=null;d._length=0,d.c=!1}function s(d){var y=f.newElement(),_,A=d._length===void 0?d.v.length:d._length;for(y.setLength(A),y.c=d.c,_=0;_<A;_+=1)y.setTripleAt(d.v[_][0],d.v[_][1],d.o[_][0],d.o[_][1],d.i[_][0],d.i[_][1],_);return y}var f=poolFactory(4,u,n);return f.clone=s,f})();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(u){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=u,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var u;for(u=0;u<this._length;u+=1)shapePool.release(this.shapes[u]);this._length=0};var shapeCollectionPool=(function(){var u={newShapeCollection:d,release:y},n=0,s=4,f=createSizedArray(s);function d(){var _;return n?(n-=1,_=f[n]):_=new ShapeCollection,_}function y(_){var A,R=_._length;for(A=0;A<R;A+=1)shapePool.release(_.shapes[A]);_._length=0,n===s&&(f=pooling.double(f),s*=2),f[n]=_,n+=1}return u})(),ShapePropertyFactory=(function(){var u=-999999;function n(J,ie,re){var le=re.lastIndex,fe,pe,de,se,he,Se,ve,Re,Ee,Oe=this.keyframes;if(J<Oe[0].t-this.offsetTime)fe=Oe[0].s[0],de=!0,le=0;else if(J>=Oe[Oe.length-1].t-this.offsetTime)fe=Oe[Oe.length-1].s?Oe[Oe.length-1].s[0]:Oe[Oe.length-2].e[0],de=!0;else{for(var Ne=le,ye=Oe.length-1,Ae=!0,_e,Te,we;Ae&&(_e=Oe[Ne],Te=Oe[Ne+1],!(Te.t-this.offsetTime>J));)Ne<ye-1?Ne+=1:Ae=!1;if(we=this.keyframesMetadata[Ne]||{},de=_e.h===1,le=Ne,!de){if(J>=Te.t-this.offsetTime)Re=1;else if(J<_e.t-this.offsetTime)Re=0;else{var ge;we.__fnct?ge=we.__fnct:(ge=BezierFactory.getBezierEasing(_e.o.x,_e.o.y,_e.i.x,_e.i.y).get,we.__fnct=ge),Re=ge((J-(_e.t-this.offsetTime))/(Te.t-this.offsetTime-(_e.t-this.offsetTime)))}pe=Te.s?Te.s[0]:_e.e[0]}fe=_e.s[0]}for(Se=ie._length,ve=fe.i[0].length,re.lastIndex=le,se=0;se<Se;se+=1)for(he=0;he<ve;he+=1)Ee=de?fe.i[se][he]:fe.i[se][he]+(pe.i[se][he]-fe.i[se][he])*Re,ie.i[se][he]=Ee,Ee=de?fe.o[se][he]:fe.o[se][he]+(pe.o[se][he]-fe.o[se][he])*Re,ie.o[se][he]=Ee,Ee=de?fe.v[se][he]:fe.v[se][he]+(pe.v[se][he]-fe.v[se][he])*Re,ie.v[se][he]=Ee}function s(){var J=this.comp.renderedFrame-this.offsetTime,ie=this.keyframes[0].t-this.offsetTime,re=this.keyframes[this.keyframes.length-1].t-this.offsetTime,le=this._caching.lastFrame;return le!==u&&(le<ie&&J<ie||le>re&&J>re)||(this._caching.lastIndex=le<J?this._caching.lastIndex:0,this.interpolateShape(J,this.pv,this._caching)),this._caching.lastFrame=J,this.pv}function f(){this.paths=this.localShapeCollection}function d(J,ie){if(J._length!==ie._length||J.c!==ie.c)return!1;var re,le=J._length;for(re=0;re<le;re+=1)if(J.v[re][0]!==ie.v[re][0]||J.v[re][1]!==ie.v[re][1]||J.o[re][0]!==ie.o[re][0]||J.o[re][1]!==ie.o[re][1]||J.i[re][0]!==ie.i[re][0]||J.i[re][1]!==ie.i[re][1])return!1;return!0}function y(J){d(this.v,J)||(this.v=shapePool.clone(J),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function _(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var J;this.kf?J=this.pv:this.data.ks?J=this.data.ks.k:J=this.data.pt.k;var ie,re=this.effectsSequence.length;for(ie=0;ie<re;ie+=1)J=this.effectsSequence[ie](J);this.setVValue(J),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function A(J,ie,re){this.propType="shape",this.comp=J.comp,this.container=J,this.elem=J,this.data=ie,this.k=!1,this.kf=!1,this._mdf=!1;var le=re===3?ie.pt.k:ie.ks.k;this.v=shapePool.clone(le),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=f,this.effectsSequence=[]}function R(J){this.effectsSequence.push(J),this.container.addDynamicProperty(this)}A.prototype.interpolateShape=n,A.prototype.getValue=_,A.prototype.setVValue=y,A.prototype.addEffect=R;function I(J,ie,re){this.propType="shape",this.comp=J.comp,this.elem=J,this.container=J,this.offsetTime=J.data.st,this.keyframes=re===3?ie.pt.k:ie.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var le=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,le),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=u,this.reset=f,this._caching={lastFrame:u,lastIndex:0},this.effectsSequence=[s.bind(this)]}I.prototype.getValue=_,I.prototype.interpolateShape=n,I.prototype.setVValue=y,I.prototype.addEffect=R;var G=(function(){var J=roundCorner;function ie(re,le){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=le.d,this.elem=re,this.comp=re.comp,this.frameId=-1,this.initDynamicPropertyContainer(re),this.p=PropertyFactory.getProp(re,le.p,1,0,this),this.s=PropertyFactory.getProp(re,le.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return ie.prototype={reset:f,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var le=this.p.v[0],fe=this.p.v[1],pe=this.s.v[0]/2,de=this.s.v[1]/2,se=this.d!==3,he=this.v;he.v[0][0]=le,he.v[0][1]=fe-de,he.v[1][0]=se?le+pe:le-pe,he.v[1][1]=fe,he.v[2][0]=le,he.v[2][1]=fe+de,he.v[3][0]=se?le-pe:le+pe,he.v[3][1]=fe,he.i[0][0]=se?le-pe*J:le+pe*J,he.i[0][1]=fe-de,he.i[1][0]=se?le+pe:le-pe,he.i[1][1]=fe-de*J,he.i[2][0]=se?le+pe*J:le-pe*J,he.i[2][1]=fe+de,he.i[3][0]=se?le-pe:le+pe,he.i[3][1]=fe+de*J,he.o[0][0]=se?le+pe*J:le-pe*J,he.o[0][1]=fe-de,he.o[1][0]=se?le+pe:le-pe,he.o[1][1]=fe+de*J,he.o[2][0]=se?le-pe*J:le+pe*J,he.o[2][1]=fe+de,he.o[3][0]=se?le-pe:le+pe,he.o[3][1]=fe-de*J}},extendPrototype([DynamicPropertyContainer],ie),ie})(),Y=(function(){function J(ie,re){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=ie,this.comp=ie.comp,this.data=re,this.frameId=-1,this.d=re.d,this.initDynamicPropertyContainer(ie),re.sy===1?(this.ir=PropertyFactory.getProp(ie,re.ir,0,0,this),this.is=PropertyFactory.getProp(ie,re.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(ie,re.pt,0,0,this),this.p=PropertyFactory.getProp(ie,re.p,1,0,this),this.r=PropertyFactory.getProp(ie,re.r,0,degToRads,this),this.or=PropertyFactory.getProp(ie,re.or,0,0,this),this.os=PropertyFactory.getProp(ie,re.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return J.prototype={reset:f,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var re=Math.floor(this.pt.v)*2,le=Math.PI*2/re,fe=!0,pe=this.or.v,de=this.ir.v,se=this.os.v,he=this.is.v,Se=2*Math.PI*pe/(re*2),ve=2*Math.PI*de/(re*2),Re,Ee,Oe,Ne,ye=-Math.PI/2;ye+=this.r.v;var Ae=this.data.d===3?-1:1;for(this.v._length=0,Re=0;Re<re;Re+=1){Ee=fe?pe:de,Oe=fe?se:he,Ne=fe?Se:ve;var _e=Ee*Math.cos(ye),Te=Ee*Math.sin(ye),we=_e===0&&Te===0?0:Te/Math.sqrt(_e*_e+Te*Te),ge=_e===0&&Te===0?0:-_e/Math.sqrt(_e*_e+Te*Te);_e+=+this.p.v[0],Te+=+this.p.v[1],this.v.setTripleAt(_e,Te,_e-we*Ne*Oe*Ae,Te-ge*Ne*Oe*Ae,_e+we*Ne*Oe*Ae,Te+ge*Ne*Oe*Ae,Re,!0),fe=!fe,ye+=le*Ae}},convertPolygonToPath:function(){var re=Math.floor(this.pt.v),le=Math.PI*2/re,fe=this.or.v,pe=this.os.v,de=2*Math.PI*fe/(re*4),se,he=-Math.PI*.5,Se=this.data.d===3?-1:1;for(he+=this.r.v,this.v._length=0,se=0;se<re;se+=1){var ve=fe*Math.cos(he),Re=fe*Math.sin(he),Ee=ve===0&&Re===0?0:Re/Math.sqrt(ve*ve+Re*Re),Oe=ve===0&&Re===0?0:-ve/Math.sqrt(ve*ve+Re*Re);ve+=+this.p.v[0],Re+=+this.p.v[1],this.v.setTripleAt(ve,Re,ve-Ee*de*pe*Se,Re-Oe*de*pe*Se,ve+Ee*de*pe*Se,Re+Oe*de*pe*Se,se,!0),he+=le*Se}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],J),J})(),q=(function(){function J(ie,re){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=ie,this.comp=ie.comp,this.frameId=-1,this.d=re.d,this.initDynamicPropertyContainer(ie),this.p=PropertyFactory.getProp(ie,re.p,1,0,this),this.s=PropertyFactory.getProp(ie,re.s,1,0,this),this.r=PropertyFactory.getProp(ie,re.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return J.prototype={convertRectToPath:function(){var re=this.p.v[0],le=this.p.v[1],fe=this.s.v[0]/2,pe=this.s.v[1]/2,de=bmMin(fe,pe,this.r.v),se=de*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(re+fe,le-pe+de,re+fe,le-pe+de,re+fe,le-pe+se,0,!0),this.v.setTripleAt(re+fe,le+pe-de,re+fe,le+pe-se,re+fe,le+pe-de,1,!0),de!==0?(this.v.setTripleAt(re+fe-de,le+pe,re+fe-de,le+pe,re+fe-se,le+pe,2,!0),this.v.setTripleAt(re-fe+de,le+pe,re-fe+se,le+pe,re-fe+de,le+pe,3,!0),this.v.setTripleAt(re-fe,le+pe-de,re-fe,le+pe-de,re-fe,le+pe-se,4,!0),this.v.setTripleAt(re-fe,le-pe+de,re-fe,le-pe+se,re-fe,le-pe+de,5,!0),this.v.setTripleAt(re-fe+de,le-pe,re-fe+de,le-pe,re-fe+se,le-pe,6,!0),this.v.setTripleAt(re+fe-de,le-pe,re+fe-se,le-pe,re+fe-de,le-pe,7,!0)):(this.v.setTripleAt(re-fe,le+pe,re-fe+se,le+pe,re-fe,le+pe,2),this.v.setTripleAt(re-fe,le-pe,re-fe,le-pe+se,re-fe,le-pe,3))):(this.v.setTripleAt(re+fe,le-pe+de,re+fe,le-pe+se,re+fe,le-pe+de,0,!0),de!==0?(this.v.setTripleAt(re+fe-de,le-pe,re+fe-de,le-pe,re+fe-se,le-pe,1,!0),this.v.setTripleAt(re-fe+de,le-pe,re-fe+se,le-pe,re-fe+de,le-pe,2,!0),this.v.setTripleAt(re-fe,le-pe+de,re-fe,le-pe+de,re-fe,le-pe+se,3,!0),this.v.setTripleAt(re-fe,le+pe-de,re-fe,le+pe-se,re-fe,le+pe-de,4,!0),this.v.setTripleAt(re-fe+de,le+pe,re-fe+de,le+pe,re-fe+se,le+pe,5,!0),this.v.setTripleAt(re+fe-de,le+pe,re+fe-se,le+pe,re+fe-de,le+pe,6,!0),this.v.setTripleAt(re+fe,le+pe-de,re+fe,le+pe-de,re+fe,le+pe-se,7,!0)):(this.v.setTripleAt(re-fe,le-pe,re-fe+se,le-pe,re-fe,le-pe,1,!0),this.v.setTripleAt(re-fe,le+pe,re-fe,le+pe-se,re-fe,le+pe,2,!0),this.v.setTripleAt(re+fe,le+pe,re+fe-se,le+pe,re+fe,le+pe,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:f},extendPrototype([DynamicPropertyContainer],J),J})();function K(J,ie,re){var le;if(re===3||re===4){var fe=re===3?ie.pt:ie.ks,pe=fe.k;pe.length?le=new I(J,ie,re):le=new A(J,ie,re)}else re===5?le=new q(J,ie):re===6?le=new G(J,ie):re===7&&(le=new Y(J,ie));return le.k&&J.addDynamicProperty(le),le}function Q(){return A}function ne(){return I}var te={};return te.getShapeProp=K,te.getConstructorFunction=Q,te.getKeyframedConstructorFunction=ne,te})();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=(function(){var u=Math.cos,n=Math.sin,s=Math.tan,f=Math.round;function d(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function y(_e){if(_e===0)return this;var Te=u(_e),we=n(_e);return this._t(Te,-we,0,0,we,Te,0,0,0,0,1,0,0,0,0,1)}function _(_e){if(_e===0)return this;var Te=u(_e),we=n(_e);return this._t(1,0,0,0,0,Te,-we,0,0,we,Te,0,0,0,0,1)}function A(_e){if(_e===0)return this;var Te=u(_e),we=n(_e);return this._t(Te,0,we,0,0,1,0,0,-we,0,Te,0,0,0,0,1)}function R(_e){if(_e===0)return this;var Te=u(_e),we=n(_e);return this._t(Te,-we,0,0,we,Te,0,0,0,0,1,0,0,0,0,1)}function I(_e,Te){return this._t(1,Te,_e,1,0,0)}function G(_e,Te){return this.shear(s(_e),s(Te))}function Y(_e,Te){var we=u(Te),ge=n(Te);return this._t(we,ge,0,0,-ge,we,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,s(_e),1,0,0,0,0,1,0,0,0,0,1)._t(we,-ge,0,0,ge,we,0,0,0,0,1,0,0,0,0,1)}function q(_e,Te,we){return!we&&we!==0&&(we=1),_e===1&&Te===1&&we===1?this:this._t(_e,0,0,0,0,Te,0,0,0,0,we,0,0,0,0,1)}function K(_e,Te,we,ge,De,ze,He,yt,Ge,lt,Mt,hn,Fn,Vn,ni,In){return this.props[0]=_e,this.props[1]=Te,this.props[2]=we,this.props[3]=ge,this.props[4]=De,this.props[5]=ze,this.props[6]=He,this.props[7]=yt,this.props[8]=Ge,this.props[9]=lt,this.props[10]=Mt,this.props[11]=hn,this.props[12]=Fn,this.props[13]=Vn,this.props[14]=ni,this.props[15]=In,this}function Q(_e,Te,we){return we=we||0,_e!==0||Te!==0||we!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,_e,Te,we,1):this}function ne(_e,Te,we,ge,De,ze,He,yt,Ge,lt,Mt,hn,Fn,Vn,ni,In){var qe=this.props;if(_e===1&&Te===0&&we===0&&ge===0&&De===0&&ze===1&&He===0&&yt===0&&Ge===0&&lt===0&&Mt===1&&hn===0)return qe[12]=qe[12]*_e+qe[15]*Fn,qe[13]=qe[13]*ze+qe[15]*Vn,qe[14]=qe[14]*Mt+qe[15]*ni,qe[15]*=In,this._identityCalculated=!1,this;var vn=qe[0],dn=qe[1],Mn=qe[2],je=qe[3],qn=qe[4],An=qe[5],ri=qe[6],On=qe[7],Be=qe[8],Pe=qe[9],Ke=qe[10],Ft=qe[11],bn=qe[12],ln=qe[13],Zn=qe[14],Gn=qe[15];return qe[0]=vn*_e+dn*De+Mn*Ge+je*Fn,qe[1]=vn*Te+dn*ze+Mn*lt+je*Vn,qe[2]=vn*we+dn*He+Mn*Mt+je*ni,qe[3]=vn*ge+dn*yt+Mn*hn+je*In,qe[4]=qn*_e+An*De+ri*Ge+On*Fn,qe[5]=qn*Te+An*ze+ri*lt+On*Vn,qe[6]=qn*we+An*He+ri*Mt+On*ni,qe[7]=qn*ge+An*yt+ri*hn+On*In,qe[8]=Be*_e+Pe*De+Ke*Ge+Ft*Fn,qe[9]=Be*Te+Pe*ze+Ke*lt+Ft*Vn,qe[10]=Be*we+Pe*He+Ke*Mt+Ft*ni,qe[11]=Be*ge+Pe*yt+Ke*hn+Ft*In,qe[12]=bn*_e+ln*De+Zn*Ge+Gn*Fn,qe[13]=bn*Te+ln*ze+Zn*lt+Gn*Vn,qe[14]=bn*we+ln*He+Zn*Mt+Gn*ni,qe[15]=bn*ge+ln*yt+Zn*hn+Gn*In,this._identityCalculated=!1,this}function te(_e){var Te=_e.props;return this.transform(Te[0],Te[1],Te[2],Te[3],Te[4],Te[5],Te[6],Te[7],Te[8],Te[9],Te[10],Te[11],Te[12],Te[13],Te[14],Te[15])}function J(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function ie(_e){for(var Te=0;Te<16;){if(_e.props[Te]!==this.props[Te])return!1;Te+=1}return!0}function re(_e){var Te;for(Te=0;Te<16;Te+=1)_e.props[Te]=this.props[Te];return _e}function le(_e){var Te;for(Te=0;Te<16;Te+=1)this.props[Te]=_e[Te]}function fe(_e,Te,we){return{x:_e*this.props[0]+Te*this.props[4]+we*this.props[8]+this.props[12],y:_e*this.props[1]+Te*this.props[5]+we*this.props[9]+this.props[13],z:_e*this.props[2]+Te*this.props[6]+we*this.props[10]+this.props[14]}}function pe(_e,Te,we){return _e*this.props[0]+Te*this.props[4]+we*this.props[8]+this.props[12]}function de(_e,Te,we){return _e*this.props[1]+Te*this.props[5]+we*this.props[9]+this.props[13]}function se(_e,Te,we){return _e*this.props[2]+Te*this.props[6]+we*this.props[10]+this.props[14]}function he(){var _e=this.props[0]*this.props[5]-this.props[1]*this.props[4],Te=this.props[5]/_e,we=-this.props[1]/_e,ge=-this.props[4]/_e,De=this.props[0]/_e,ze=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/_e,He=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/_e,yt=new Matrix;return yt.props[0]=Te,yt.props[1]=we,yt.props[4]=ge,yt.props[5]=De,yt.props[12]=ze,yt.props[13]=He,yt}function Se(_e){var Te=this.getInverseMatrix();return Te.applyToPointArray(_e[0],_e[1],_e[2]||0)}function ve(_e){var Te,we=_e.length,ge=[];for(Te=0;Te<we;Te+=1)ge[Te]=Se(_e[Te]);return ge}function Re(_e,Te,we){var ge=createTypedArray("float32",6);if(this.isIdentity())ge[0]=_e[0],ge[1]=_e[1],ge[2]=Te[0],ge[3]=Te[1],ge[4]=we[0],ge[5]=we[1];else{var De=this.props[0],ze=this.props[1],He=this.props[4],yt=this.props[5],Ge=this.props[12],lt=this.props[13];ge[0]=_e[0]*De+_e[1]*He+Ge,ge[1]=_e[0]*ze+_e[1]*yt+lt,ge[2]=Te[0]*De+Te[1]*He+Ge,ge[3]=Te[0]*ze+Te[1]*yt+lt,ge[4]=we[0]*De+we[1]*He+Ge,ge[5]=we[0]*ze+we[1]*yt+lt}return ge}function Ee(_e,Te,we){var ge;return this.isIdentity()?ge=[_e,Te,we]:ge=[_e*this.props[0]+Te*this.props[4]+we*this.props[8]+this.props[12],_e*this.props[1]+Te*this.props[5]+we*this.props[9]+this.props[13],_e*this.props[2]+Te*this.props[6]+we*this.props[10]+this.props[14]],ge}function Oe(_e,Te){if(this.isIdentity())return _e+","+Te;var we=this.props;return Math.round((_e*we[0]+Te*we[4]+we[12])*100)/100+","+Math.round((_e*we[1]+Te*we[5]+we[13])*100)/100}function Ne(){for(var _e=0,Te=this.props,we="matrix3d(",ge=1e4;_e<16;)we+=f(Te[_e]*ge)/ge,we+=_e===15?")":",",_e+=1;return we}function ye(_e){var Te=1e4;return _e<1e-6&&_e>0||_e>-1e-6&&_e<0?f(_e*Te)/Te:_e}function Ae(){var _e=this.props,Te=ye(_e[0]),we=ye(_e[1]),ge=ye(_e[4]),De=ye(_e[5]),ze=ye(_e[12]),He=ye(_e[13]);return"matrix("+Te+","+we+","+ge+","+De+","+ze+","+He+")"}return function(){this.reset=d,this.rotate=y,this.rotateX=_,this.rotateY=A,this.rotateZ=R,this.skew=G,this.skewFromAxis=Y,this.shear=I,this.scale=q,this.setTransform=K,this.translate=Q,this.transform=ne,this.multiply=te,this.applyToPoint=fe,this.applyToX=pe,this.applyToY=de,this.applyToZ=se,this.applyToPointArray=Ee,this.applyToTriplePoints=Re,this.applyToPointStringified=Oe,this.toCSS=Ne,this.to2dCSS=Ae,this.clone=re,this.cloneFromProps=le,this.equals=ie,this.inversePoints=ve,this.inversePoint=Se,this.getInverseMatrix=he,this._t=this.transform,this.isIdentity=J,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}})();function _typeof$3(u){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$3(u)}var lottie={};function setLocation(u){setLocationHref(u)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(u){setSubframeEnabled(u)}function setPrefix(u){setIdPrefix(u)}function loadAnimation(u){return animationManager.loadAnimation(u)}function setQuality(u){if(typeof u=="string")switch(u){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(u)&&u>1&&setDefaultCurveSegments(u)}function inBrowser(){return typeof navigator<"u"}function installPlugin(u,n){u==="expressions"&&setExpressionsPlugin(n)}function getFactory(u){switch(u){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.13.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(u){for(var n=queryString.split("&"),s=0;s<n.length;s+=1){var f=n[s].split("=");if(decodeURIComponent(f[0])==u)return decodeURIComponent(f[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports$1)!=="object"&&(window.bodymovin=lottie)}catch(u){}var ShapeModifiers=(function(){var u={},n={};u.registerModifier=s,u.getModifier=f;function s(d,y){n[d]||(n[d]=y)}function f(d,y,_){return new n[d](y,_)}return u})();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(u){if(!this.closed){u.sh.container.addDynamicProperty(u.sh);var n={shape:u.sh,data:u,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(n),this.addShapeToModifier(n),this._isAnimated&&u.setAsAnimated()}},ShapeModifier.prototype.init=function(u,n){this.shapes=[],this.elem=u,this.initDynamicPropertyContainer(u),this.initModifierProperties(u,n),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(u,n){this.s=PropertyFactory.getProp(u,n.s,0,.01,this),this.e=PropertyFactory.getProp(u,n.e,0,.01,this),this.o=PropertyFactory.getProp(u,n.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=n.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(u){u.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(u,n,s,f,d){var y=[];n<=1?y.push({s:u,e:n}):u>=1?y.push({s:u-1,e:n-1}):(y.push({s:u,e:1}),y.push({s:0,e:n-1}));var _=[],A,R=y.length,I;for(A=0;A<R;A+=1)if(I=y[A],!(I.e*d<f||I.s*d>f+s)){var G,Y;I.s*d<=f?G=0:G=(I.s*d-f)/s,I.e*d>=f+s?Y=1:Y=(I.e*d-f)/s,_.push([G,Y])}return _.length||_.push([0,0]),_},TrimModifier.prototype.releasePathsData=function(u){var n,s=u.length;for(n=0;n<s;n+=1)segmentsLengthPool.release(u[n]);return u.length=0,u},TrimModifier.prototype.processShapes=function(u){var n,s;if(this._mdf||u){var f=this.o.v%360/360;if(f<0&&(f+=1),this.s.v>1?n=1+f:this.s.v<0?n=0+f:n=this.s.v+f,this.e.v>1?s=1+f:this.e.v<0?s=0+f:s=this.e.v+f,n>s){var d=n;n=s,s=d}n=Math.round(n*1e4)*1e-4,s=Math.round(s*1e4)*1e-4,this.sValue=n,this.eValue=s}else n=this.sValue,s=this.eValue;var y,_,A=this.shapes.length,R,I,G,Y,q,K=0;if(s===n)for(_=0;_<A;_+=1)this.shapes[_].localShapeCollection.releaseShapes(),this.shapes[_].shape._mdf=!0,this.shapes[_].shape.paths=this.shapes[_].localShapeCollection,this._mdf&&(this.shapes[_].pathsData.length=0);else if(s===1&&n===0||s===0&&n===1){if(this._mdf)for(_=0;_<A;_+=1)this.shapes[_].pathsData.length=0,this.shapes[_].shape._mdf=!0}else{var Q=[],ne,te;for(_=0;_<A;_+=1)if(ne=this.shapes[_],!ne.shape._mdf&&!this._mdf&&!u&&this.m!==2)ne.shape.paths=ne.localShapeCollection;else{if(y=ne.shape.paths,I=y._length,q=0,!ne.shape._mdf&&ne.pathsData.length)q=ne.totalShapeLength;else{for(G=this.releasePathsData(ne.pathsData),R=0;R<I;R+=1)Y=bez.getSegmentsLength(y.shapes[R]),G.push(Y),q+=Y.totalLength;ne.totalShapeLength=q,ne.pathsData=G}K+=q,ne.shape._mdf=!0}var J=n,ie=s,re=0,le;for(_=A-1;_>=0;_-=1)if(ne=this.shapes[_],ne.shape._mdf){for(te=ne.localShapeCollection,te.releaseShapes(),this.m===2&&A>1?(le=this.calculateShapeEdges(n,s,ne.totalShapeLength,re,K),re+=ne.totalShapeLength):le=[[J,ie]],I=le.length,R=0;R<I;R+=1){J=le[R][0],ie=le[R][1],Q.length=0,ie<=1?Q.push({s:ne.totalShapeLength*J,e:ne.totalShapeLength*ie}):J>=1?Q.push({s:ne.totalShapeLength*(J-1),e:ne.totalShapeLength*(ie-1)}):(Q.push({s:ne.totalShapeLength*J,e:ne.totalShapeLength}),Q.push({s:0,e:ne.totalShapeLength*(ie-1)}));var fe=this.addShapes(ne,Q[0]);if(Q[0].s!==Q[0].e){if(Q.length>1){var pe=ne.shape.paths.shapes[ne.shape.paths._length-1];if(pe.c){var de=fe.pop();this.addPaths(fe,te),fe=this.addShapes(ne,Q[1],de)}else this.addPaths(fe,te),fe=this.addShapes(ne,Q[1])}this.addPaths(fe,te)}}ne.shape.paths=te}}},TrimModifier.prototype.addPaths=function(u,n){var s,f=u.length;for(s=0;s<f;s+=1)n.addShape(u[s])},TrimModifier.prototype.addSegment=function(u,n,s,f,d,y,_){d.setXYAt(n[0],n[1],"o",y),d.setXYAt(s[0],s[1],"i",y+1),_&&d.setXYAt(u[0],u[1],"v",y),d.setXYAt(f[0],f[1],"v",y+1)},TrimModifier.prototype.addSegmentFromArray=function(u,n,s,f){n.setXYAt(u[1],u[5],"o",s),n.setXYAt(u[2],u[6],"i",s+1),f&&n.setXYAt(u[0],u[4],"v",s),n.setXYAt(u[3],u[7],"v",s+1)},TrimModifier.prototype.addShapes=function(u,n,s){var f=u.pathsData,d=u.shape.paths.shapes,y,_=u.shape.paths._length,A,R,I=0,G,Y,q,K,Q=[],ne,te=!0;for(s?(Y=s._length,ne=s._length):(s=shapePool.newElement(),Y=0,ne=0),Q.push(s),y=0;y<_;y+=1){for(q=f[y].lengths,s.c=d[y].c,R=d[y].c?q.length:q.length+1,A=1;A<R;A+=1)if(G=q[A-1],I+G.addedLength<n.s)I+=G.addedLength,s.c=!1;else if(I>n.e){s.c=!1;break}else n.s<=I&&n.e>=I+G.addedLength?(this.addSegment(d[y].v[A-1],d[y].o[A-1],d[y].i[A],d[y].v[A],s,Y,te),te=!1):(K=bez.getNewSegment(d[y].v[A-1],d[y].v[A],d[y].o[A-1],d[y].i[A],(n.s-I)/G.addedLength,(n.e-I)/G.addedLength,q[A-1]),this.addSegmentFromArray(K,s,Y,te),te=!1,s.c=!1),I+=G.addedLength,Y+=1;if(d[y].c&&q.length){if(G=q[A-1],I<=n.e){var J=q[A-1].addedLength;n.s<=I&&n.e>=I+J?(this.addSegment(d[y].v[A-1],d[y].o[A-1],d[y].i[0],d[y].v[0],s,Y,te),te=!1):(K=bez.getNewSegment(d[y].v[A-1],d[y].v[0],d[y].o[A-1],d[y].i[0],(n.s-I)/J,(n.e-I)/J,q[A-1]),this.addSegmentFromArray(K,s,Y,te),te=!1,s.c=!1)}else s.c=!1;I+=G.addedLength,Y+=1}if(s._length&&(s.setXYAt(s.v[ne][0],s.v[ne][1],"i",ne),s.setXYAt(s.v[s._length-1][0],s.v[s._length-1][1],"o",s._length-1)),I>n.e)break;y<_-1&&(s=shapePool.newElement(),te=!0,Q.push(s),Y=0)}return Q};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(u,n){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(u,n.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(u,n){var s=n/100,f=[0,0],d=u._length,y=0;for(y=0;y<d;y+=1)f[0]+=u.v[y][0],f[1]+=u.v[y][1];f[0]/=d,f[1]/=d;var _=shapePool.newElement();_.c=u.c;var A,R,I,G,Y,q;for(y=0;y<d;y+=1)A=u.v[y][0]+(f[0]-u.v[y][0])*s,R=u.v[y][1]+(f[1]-u.v[y][1])*s,I=u.o[y][0]+(f[0]-u.o[y][0])*-s,G=u.o[y][1]+(f[1]-u.o[y][1])*-s,Y=u.i[y][0]+(f[0]-u.i[y][0])*-s,q=u.i[y][1]+(f[1]-u.i[y][1])*-s,_.setTripleAt(A,R,I,G,Y,q,y);return _},PuckerAndBloatModifier.prototype.processShapes=function(u){var n,s,f=this.shapes.length,d,y,_=this.amount.v;if(_!==0){var A,R;for(s=0;s<f;s+=1){if(A=this.shapes[s],R=A.localShapeCollection,!(!A.shape._mdf&&!this._mdf&&!u))for(R.releaseShapes(),A.shape._mdf=!0,n=A.shape.paths.shapes,y=A.shape.paths._length,d=0;d<y;d+=1)R.addShape(this.processPath(n[d],_));A.shape.paths=A.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=(function(){var u=[0,0];function n(R){var I=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||I,this.a&&R.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&R.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&R.skewFromAxis(-this.sk.v,this.sa.v),this.r?R.rotate(-this.r.v):R.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?R.translate(this.px.v,this.py.v,-this.pz.v):R.translate(this.px.v,this.py.v,0):R.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function s(R){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||R){var I;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var G,Y;if(I=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(G=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/I,0),Y=this.p.getValueAtTime(this.p.keyframes[0].t/I,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(G=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/I,0),Y=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/I,0)):(G=this.p.pv,Y=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/I,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){G=[],Y=[];var q=this.px,K=this.py;q._caching.lastFrame+q.offsetTime<=q.keyframes[0].t?(G[0]=q.getValueAtTime((q.keyframes[0].t+.01)/I,0),G[1]=K.getValueAtTime((K.keyframes[0].t+.01)/I,0),Y[0]=q.getValueAtTime(q.keyframes[0].t/I,0),Y[1]=K.getValueAtTime(K.keyframes[0].t/I,0)):q._caching.lastFrame+q.offsetTime>=q.keyframes[q.keyframes.length-1].t?(G[0]=q.getValueAtTime(q.keyframes[q.keyframes.length-1].t/I,0),G[1]=K.getValueAtTime(K.keyframes[K.keyframes.length-1].t/I,0),Y[0]=q.getValueAtTime((q.keyframes[q.keyframes.length-1].t-.01)/I,0),Y[1]=K.getValueAtTime((K.keyframes[K.keyframes.length-1].t-.01)/I,0)):(G=[q.pv,K.pv],Y[0]=q.getValueAtTime((q._caching.lastFrame+q.offsetTime-.01)/I,q.offsetTime),Y[1]=K.getValueAtTime((K._caching.lastFrame+K.offsetTime-.01)/I,K.offsetTime))}else Y=u,G=Y;this.v.rotate(-Math.atan2(G[1]-Y[1],G[0]-Y[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function f(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function d(){}function y(R){this._addDynamicProperty(R),this.elem.addDynamicProperty(R),this._isDirty=!0}function _(R,I,G){if(this.elem=R,this.frameId=-1,this.propType="transform",this.data=I,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(G||R),I.p&&I.p.s?(this.px=PropertyFactory.getProp(R,I.p.x,0,0,this),this.py=PropertyFactory.getProp(R,I.p.y,0,0,this),I.p.z&&(this.pz=PropertyFactory.getProp(R,I.p.z,0,0,this))):this.p=PropertyFactory.getProp(R,I.p||{k:[0,0,0]},1,0,this),I.rx){if(this.rx=PropertyFactory.getProp(R,I.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(R,I.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(R,I.rz,0,degToRads,this),I.or.k[0].ti){var Y,q=I.or.k.length;for(Y=0;Y<q;Y+=1)I.or.k[Y].to=null,I.or.k[Y].ti=null}this.or=PropertyFactory.getProp(R,I.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(R,I.r||{k:0},0,degToRads,this);I.sk&&(this.sk=PropertyFactory.getProp(R,I.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(R,I.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(R,I.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(R,I.s||{k:[100,100,100]},1,.01,this),I.o?this.o=PropertyFactory.getProp(R,I.o,0,.01,R):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}_.prototype={applyToMatrix:n,getValue:s,precalculateMatrix:f,autoOrient:d},extendPrototype([DynamicPropertyContainer],_),_.prototype.addDynamicProperty=y,_.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function A(R,I,G){return new _(R,I,G)}return{getTransformProperty:A}})();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(u,n){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(u,n.c,0,null,this),this.o=PropertyFactory.getProp(u,n.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(u,n.tr,this),this.so=PropertyFactory.getProp(u,n.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(u,n.tr.eo,0,.01,this),this.data=n,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(u,n,s,f,d,y){var _=y?-1:1,A=f.s.v[0]+(1-f.s.v[0])*(1-d),R=f.s.v[1]+(1-f.s.v[1])*(1-d);u.translate(f.p.v[0]*_*d,f.p.v[1]*_*d,f.p.v[2]),n.translate(-f.a.v[0],-f.a.v[1],f.a.v[2]),n.rotate(-f.r.v*_*d),n.translate(f.a.v[0],f.a.v[1],f.a.v[2]),s.translate(-f.a.v[0],-f.a.v[1],f.a.v[2]),s.scale(y?1/A:A,y?1/R:R),s.translate(f.a.v[0],f.a.v[1],f.a.v[2])},RepeaterModifier.prototype.init=function(u,n,s,f){for(this.elem=u,this.arr=n,this.pos=s,this.elemsData=f,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(u),this.initModifierProperties(u,n[s]);s>0;)s-=1,this._elements.unshift(n[s]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(u){var n,s=u.length;for(n=0;n<s;n+=1)u[n]._processed=!1,u[n].ty==="gr"&&this.resetElements(u[n].it)},RepeaterModifier.prototype.cloneElements=function(u){var n=JSON.parse(JSON.stringify(u));return this.resetElements(n),n},RepeaterModifier.prototype.changeGroupRender=function(u,n){var s,f=u.length;for(s=0;s<f;s+=1)u[s]._render=n,u[s].ty==="gr"&&this.changeGroupRender(u[s].it,n)},RepeaterModifier.prototype.processShapes=function(u){var n,s,f,d,y,_=!1;if(this._mdf||u){var A=Math.ceil(this.c.v);if(this._groups.length<A){for(;this._groups.length<A;){var R={it:this.cloneElements(this._elements),ty:"gr"};R.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,R),this._groups.splice(0,0,R),this._currentCopies+=1}this.elem.reloadShapes(),_=!0}y=0;var I;for(f=0;f<=this._groups.length-1;f+=1){if(I=y<A,this._groups[f]._render=I,this.changeGroupRender(this._groups[f].it,I),!I){var G=this.elemsData[f].it,Y=G[G.length-1];Y.transform.op.v!==0?(Y.transform.op._mdf=!0,Y.transform.op.v=0):Y.transform.op._mdf=!1}y+=1}this._currentCopies=A;var q=this.o.v,K=q%1,Q=q>0?Math.floor(q):Math.ceil(q),ne=this.pMatrix.props,te=this.rMatrix.props,J=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var ie=0;if(q>0){for(;ie<Q;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),ie+=1;K&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,K,!1),ie+=K)}else if(q<0){for(;ie>Q;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),ie-=1;K&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-K,!0),ie-=K)}f=this.data.m===1?0:this._currentCopies-1,d=this.data.m===1?1:-1,y=this._currentCopies;for(var re,le;y;){if(n=this.elemsData[f].it,s=n[n.length-1].transform.mProps.v.props,le=s.length,n[n.length-1].transform.mProps._mdf=!0,n[n.length-1].transform.op._mdf=!0,n[n.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(f/(this._currentCopies-1)),ie!==0){for((f!==0&&d===1||f!==this._currentCopies-1&&d===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(te[0],te[1],te[2],te[3],te[4],te[5],te[6],te[7],te[8],te[9],te[10],te[11],te[12],te[13],te[14],te[15]),this.matrix.transform(J[0],J[1],J[2],J[3],J[4],J[5],J[6],J[7],J[8],J[9],J[10],J[11],J[12],J[13],J[14],J[15]),this.matrix.transform(ne[0],ne[1],ne[2],ne[3],ne[4],ne[5],ne[6],ne[7],ne[8],ne[9],ne[10],ne[11],ne[12],ne[13],ne[14],ne[15]),re=0;re<le;re+=1)s[re]=this.matrix.props[re];this.matrix.reset()}else for(this.matrix.reset(),re=0;re<le;re+=1)s[re]=this.matrix.props[re];ie+=1,y-=1,f+=d}}else for(y=this._currentCopies,f=0,d=1;y;)n=this.elemsData[f].it,s=n[n.length-1].transform.mProps.v.props,n[n.length-1].transform.mProps._mdf=!1,n[n.length-1].transform.op._mdf=!1,y-=1,f+=d;return _},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(u,n){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(u,n.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(u,n){var s=shapePool.newElement();s.c=u.c;var f,d=u._length,y,_,A,R,I,G,Y=0,q,K,Q,ne,te,J;for(f=0;f<d;f+=1)y=u.v[f],A=u.o[f],_=u.i[f],y[0]===A[0]&&y[1]===A[1]&&y[0]===_[0]&&y[1]===_[1]?(f===0||f===d-1)&&!u.c?(s.setTripleAt(y[0],y[1],A[0],A[1],_[0],_[1],Y),Y+=1):(f===0?R=u.v[d-1]:R=u.v[f-1],I=Math.sqrt(Math.pow(y[0]-R[0],2)+Math.pow(y[1]-R[1],2)),G=I?Math.min(I/2,n)/I:0,te=y[0]+(R[0]-y[0])*G,q=te,J=y[1]-(y[1]-R[1])*G,K=J,Q=q-(q-y[0])*roundCorner,ne=K-(K-y[1])*roundCorner,s.setTripleAt(q,K,Q,ne,te,J,Y),Y+=1,f===d-1?R=u.v[0]:R=u.v[f+1],I=Math.sqrt(Math.pow(y[0]-R[0],2)+Math.pow(y[1]-R[1],2)),G=I?Math.min(I/2,n)/I:0,Q=y[0]+(R[0]-y[0])*G,q=Q,ne=y[1]+(R[1]-y[1])*G,K=ne,te=q-(q-y[0])*roundCorner,J=K-(K-y[1])*roundCorner,s.setTripleAt(q,K,Q,ne,te,J,Y),Y+=1):(s.setTripleAt(u.v[f][0],u.v[f][1],u.o[f][0],u.o[f][1],u.i[f][0],u.i[f][1],Y),Y+=1);return s},RoundCornersModifier.prototype.processShapes=function(u){var n,s,f=this.shapes.length,d,y,_=this.rd.v;if(_!==0){var A,R;for(s=0;s<f;s+=1){if(A=this.shapes[s],R=A.localShapeCollection,!(!A.shape._mdf&&!this._mdf&&!u))for(R.releaseShapes(),A.shape._mdf=!0,n=A.shape.paths.shapes,y=A.shape.paths._length,d=0;d<y;d+=1)R.addShape(this.processPath(n[d],_));A.shape.paths=A.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(u,n){return Math.abs(u-n)*1e5<=Math.min(Math.abs(u),Math.abs(n))}function floatZero(u){return Math.abs(u)<=1e-5}function lerp(u,n,s){return u*(1-s)+n*s}function lerpPoint(u,n,s){return[lerp(u[0],n[0],s),lerp(u[1],n[1],s)]}function quadRoots(u,n,s){if(u===0)return[];var f=n*n-4*u*s;if(f<0)return[];var d=-n/(2*u);if(f===0)return[d];var y=Math.sqrt(f)/(2*u);return[d-y,d+y]}function polynomialCoefficients(u,n,s,f){return[-u+3*n-3*s+f,3*u-6*n+3*s,-3*u+3*n,u]}function singlePoint(u){return new PolynomialBezier(u,u,u,u,!1)}function PolynomialBezier(u,n,s,f,d){d&&pointEqual(u,n)&&(n=lerpPoint(u,f,1/3)),d&&pointEqual(s,f)&&(s=lerpPoint(u,f,2/3));var y=polynomialCoefficients(u[0],n[0],s[0],f[0]),_=polynomialCoefficients(u[1],n[1],s[1],f[1]);this.a=[y[0],_[0]],this.b=[y[1],_[1]],this.c=[y[2],_[2]],this.d=[y[3],_[3]],this.points=[u,n,s,f]}PolynomialBezier.prototype.point=function(u){return[((this.a[0]*u+this.b[0])*u+this.c[0])*u+this.d[0],((this.a[1]*u+this.b[1])*u+this.c[1])*u+this.d[1]]},PolynomialBezier.prototype.derivative=function(u){return[(3*u*this.a[0]+2*this.b[0])*u+this.c[0],(3*u*this.a[1]+2*this.b[1])*u+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(u){var n=this.derivative(u);return Math.atan2(n[1],n[0])},PolynomialBezier.prototype.normalAngle=function(u){var n=this.derivative(u);return Math.atan2(n[0],n[1])},PolynomialBezier.prototype.inflectionPoints=function(){var u=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(u))return[];var n=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/u,s=n*n-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/u;if(s<0)return[];var f=Math.sqrt(s);return floatZero(f)?f>0&&f<1?[n]:[]:[n-f,n+f].filter(function(d){return d>0&&d<1})},PolynomialBezier.prototype.split=function(u){if(u<=0)return[singlePoint(this.points[0]),this];if(u>=1)return[this,singlePoint(this.points[this.points.length-1])];var n=lerpPoint(this.points[0],this.points[1],u),s=lerpPoint(this.points[1],this.points[2],u),f=lerpPoint(this.points[2],this.points[3],u),d=lerpPoint(n,s,u),y=lerpPoint(s,f,u),_=lerpPoint(d,y,u);return[new PolynomialBezier(this.points[0],n,d,_,!0),new PolynomialBezier(_,y,f,this.points[3],!0)]};function extrema(u,n){var s=u.points[0][n],f=u.points[u.points.length-1][n];if(s>f){var d=f;f=s,s=d}for(var y=quadRoots(3*u.a[n],2*u.b[n],u.c[n]),_=0;_<y.length;_+=1)if(y[_]>0&&y[_]<1){var A=u.point(y[_])[n];A<s?s=A:A>f&&(f=A)}return{min:s,max:f}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var u=this.bounds();return{left:u.x.min,right:u.x.max,top:u.y.min,bottom:u.y.max,width:u.x.max-u.x.min,height:u.y.max-u.y.min,cx:(u.x.max+u.x.min)/2,cy:(u.y.max+u.y.min)/2}};function intersectData(u,n,s){var f=u.boundingBox();return{cx:f.cx,cy:f.cy,width:f.width,height:f.height,bez:u,t:(n+s)/2,t1:n,t2:s}}function splitData(u){var n=u.bez.split(.5);return[intersectData(n[0],u.t1,u.t),intersectData(n[1],u.t,u.t2)]}function boxIntersect(u,n){return Math.abs(u.cx-n.cx)*2<u.width+n.width&&Math.abs(u.cy-n.cy)*2<u.height+n.height}function intersectsImpl(u,n,s,f,d,y){if(boxIntersect(u,n)){if(s>=y||u.width<=f&&u.height<=f&&n.width<=f&&n.height<=f){d.push([u.t,n.t]);return}var _=splitData(u),A=splitData(n);intersectsImpl(_[0],A[0],s+1,f,d,y),intersectsImpl(_[0],A[1],s+1,f,d,y),intersectsImpl(_[1],A[0],s+1,f,d,y),intersectsImpl(_[1],A[1],s+1,f,d,y)}}PolynomialBezier.prototype.intersections=function(u,n,s){n===void 0&&(n=2),s===void 0&&(s=7);var f=[];return intersectsImpl(intersectData(this,0,1),intersectData(u,0,1),0,n,f,s),f},PolynomialBezier.shapeSegment=function(u,n){var s=(n+1)%u.length();return new PolynomialBezier(u.v[n],u.o[n],u.i[s],u.v[s],!0)},PolynomialBezier.shapeSegmentInverted=function(u,n){var s=(n+1)%u.length();return new PolynomialBezier(u.v[s],u.i[s],u.o[n],u.v[n],!0)};function crossProduct(u,n){return[u[1]*n[2]-u[2]*n[1],u[2]*n[0]-u[0]*n[2],u[0]*n[1]-u[1]*n[0]]}function lineIntersection(u,n,s,f){var d=[u[0],u[1],1],y=[n[0],n[1],1],_=[s[0],s[1],1],A=[f[0],f[1],1],R=crossProduct(crossProduct(d,y),crossProduct(_,A));return floatZero(R[2])?null:[R[0]/R[2],R[1]/R[2]]}function polarOffset(u,n,s){return[u[0]+Math.cos(n)*s,u[1]-Math.sin(n)*s]}function pointDistance(u,n){return Math.hypot(u[0]-n[0],u[1]-n[1])}function pointEqual(u,n){return floatEqual(u[0],n[0])&&floatEqual(u[1],n[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(u,n){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(u,n.s,0,null,this),this.frequency=PropertyFactory.getProp(u,n.r,0,null,this),this.pointsType=PropertyFactory.getProp(u,n.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(u,n,s,f,d,y,_){var A=s-Math.PI/2,R=s+Math.PI/2,I=n[0]+Math.cos(s)*f*d,G=n[1]-Math.sin(s)*f*d;u.setTripleAt(I,G,I+Math.cos(A)*y,G-Math.sin(A)*y,I+Math.cos(R)*_,G-Math.sin(R)*_,u.length())}function getPerpendicularVector(u,n){var s=[n[0]-u[0],n[1]-u[1]],f=-Math.PI*.5,d=[Math.cos(f)*s[0]-Math.sin(f)*s[1],Math.sin(f)*s[0]+Math.cos(f)*s[1]];return d}function getProjectingAngle(u,n){var s=n===0?u.length()-1:n-1,f=(n+1)%u.length(),d=u.v[s],y=u.v[f],_=getPerpendicularVector(d,y);return Math.atan2(0,1)-Math.atan2(_[1],_[0])}function zigZagCorner(u,n,s,f,d,y,_){var A=getProjectingAngle(n,s),R=n.v[s%n._length],I=n.v[s===0?n._length-1:s-1],G=n.v[(s+1)%n._length],Y=y===2?Math.sqrt(Math.pow(R[0]-I[0],2)+Math.pow(R[1]-I[1],2)):0,q=y===2?Math.sqrt(Math.pow(R[0]-G[0],2)+Math.pow(R[1]-G[1],2)):0;setPoint(u,n.v[s%n._length],A,_,f,q/((d+1)*2),Y/((d+1)*2))}function zigZagSegment(u,n,s,f,d,y){for(var _=0;_<f;_+=1){var A=(_+1)/(f+1),R=d===2?Math.sqrt(Math.pow(n.points[3][0]-n.points[0][0],2)+Math.pow(n.points[3][1]-n.points[0][1],2)):0,I=n.normalAngle(A),G=n.point(A);setPoint(u,G,I,y,s,R/((f+1)*2),R/((f+1)*2)),y=-y}return y}ZigZagModifier.prototype.processPath=function(u,n,s,f){var d=u._length,y=shapePool.newElement();if(y.c=u.c,u.c||(d-=1),d===0)return y;var _=-1,A=PolynomialBezier.shapeSegment(u,0);zigZagCorner(y,u,0,n,s,f,_);for(var R=0;R<d;R+=1)_=zigZagSegment(y,A,n,s,f,-_),R===d-1&&!u.c?A=null:A=PolynomialBezier.shapeSegment(u,(R+1)%d),zigZagCorner(y,u,R+1,n,s,f,_);return y},ZigZagModifier.prototype.processShapes=function(u){var n,s,f=this.shapes.length,d,y,_=this.amplitude.v,A=Math.max(0,Math.round(this.frequency.v)),R=this.pointsType.v;if(_!==0){var I,G;for(s=0;s<f;s+=1){if(I=this.shapes[s],G=I.localShapeCollection,!(!I.shape._mdf&&!this._mdf&&!u))for(G.releaseShapes(),I.shape._mdf=!0,n=I.shape.paths.shapes,y=I.shape.paths._length,d=0;d<y;d+=1)G.addShape(this.processPath(n[d],_,A,R));I.shape.paths=I.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(u,n,s){var f=Math.atan2(n[0]-u[0],n[1]-u[1]);return[polarOffset(u,f,s),polarOffset(n,f,s)]}function offsetSegment(u,n){var s,f,d,y,_,A,R;R=linearOffset(u.points[0],u.points[1],n),s=R[0],f=R[1],R=linearOffset(u.points[1],u.points[2],n),d=R[0],y=R[1],R=linearOffset(u.points[2],u.points[3],n),_=R[0],A=R[1];var I=lineIntersection(s,f,d,y);I===null&&(I=f);var G=lineIntersection(_,A,d,y);return G===null&&(G=_),new PolynomialBezier(s,I,G,A)}function joinLines(u,n,s,f,d){var y=n.points[3],_=s.points[0];if(f===3||pointEqual(y,_))return y;if(f===2){var A=-n.tangentAngle(1),R=-s.tangentAngle(0)+Math.PI,I=lineIntersection(y,polarOffset(y,A+Math.PI/2,100),_,polarOffset(_,A+Math.PI/2,100)),G=I?pointDistance(I,y):pointDistance(y,_)/2,Y=polarOffset(y,A,2*G*roundCorner);return u.setXYAt(Y[0],Y[1],"o",u.length()-1),Y=polarOffset(_,R,2*G*roundCorner),u.setTripleAt(_[0],_[1],_[0],_[1],Y[0],Y[1],u.length()),_}var q=pointEqual(y,n.points[2])?n.points[0]:n.points[2],K=pointEqual(_,s.points[1])?s.points[3]:s.points[1],Q=lineIntersection(q,y,_,K);return Q&&pointDistance(Q,y)<d?(u.setTripleAt(Q[0],Q[1],Q[0],Q[1],Q[0],Q[1],u.length()),Q):y}function getIntersection(u,n){var s=u.intersections(n);return s.length&&floatEqual(s[0][0],1)&&s.shift(),s.length?s[0]:null}function pruneSegmentIntersection(u,n){var s=u.slice(),f=n.slice(),d=getIntersection(u[u.length-1],n[0]);return d&&(s[u.length-1]=u[u.length-1].split(d[0])[0],f[0]=n[0].split(d[1])[1]),u.length>1&&n.length>1&&(d=getIntersection(u[0],n[n.length-1]),d)?[[u[0].split(d[0])[0]],[n[n.length-1].split(d[1])[1]]]:[s,f]}function pruneIntersections(u){for(var n,s=1;s<u.length;s+=1)n=pruneSegmentIntersection(u[s-1],u[s]),u[s-1]=n[0],u[s]=n[1];return u.length>1&&(n=pruneSegmentIntersection(u[u.length-1],u[0]),u[u.length-1]=n[0],u[0]=n[1]),u}function offsetSegmentSplit(u,n){var s=u.inflectionPoints(),f,d,y,_;if(s.length===0)return[offsetSegment(u,n)];if(s.length===1||floatEqual(s[1],1))return y=u.split(s[0]),f=y[0],d=y[1],[offsetSegment(f,n),offsetSegment(d,n)];y=u.split(s[0]),f=y[0];var A=(s[1]-s[0])/(1-s[0]);return y=y[1].split(A),_=y[0],d=y[1],[offsetSegment(f,n),offsetSegment(_,n),offsetSegment(d,n)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(u,n){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(u,n.a,0,null,this),this.miterLimit=PropertyFactory.getProp(u,n.ml,0,null,this),this.lineJoin=n.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(u,n,s,f){var d=shapePool.newElement();d.c=u.c;var y=u.length();u.c||(y-=1);var _,A,R,I=[];for(_=0;_<y;_+=1)R=PolynomialBezier.shapeSegment(u,_),I.push(offsetSegmentSplit(R,n));if(!u.c)for(_=y-1;_>=0;_-=1)R=PolynomialBezier.shapeSegmentInverted(u,_),I.push(offsetSegmentSplit(R,n));I=pruneIntersections(I);var G=null,Y=null;for(_=0;_<I.length;_+=1){var q=I[_];for(Y&&(G=joinLines(d,Y,q[0],s,f)),Y=q[q.length-1],A=0;A<q.length;A+=1)R=q[A],G&&pointEqual(R.points[0],G)?d.setXYAt(R.points[1][0],R.points[1][1],"o",d.length()-1):d.setTripleAt(R.points[0][0],R.points[0][1],R.points[1][0],R.points[1][1],R.points[0][0],R.points[0][1],d.length()),d.setTripleAt(R.points[3][0],R.points[3][1],R.points[3][0],R.points[3][1],R.points[2][0],R.points[2][1],d.length()),G=R.points[3]}return I.length&&joinLines(d,Y,I[0][0],s,f),d},OffsetPathModifier.prototype.processShapes=function(u){var n,s,f=this.shapes.length,d,y,_=this.amount.v,A=this.miterLimit.v,R=this.lineJoin;if(_!==0){var I,G;for(s=0;s<f;s+=1){if(I=this.shapes[s],G=I.localShapeCollection,!(!I.shape._mdf&&!this._mdf&&!u))for(G.releaseShapes(),I.shape._mdf=!0,n=I.shape.paths.shapes,y=I.shape.paths._length,d=0;d<y;d+=1)G.addShape(this.processPath(n[d],_,R,A));I.shape.paths=I.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(u){for(var n=u.fStyle?u.fStyle.split(" "):[],s="normal",f="normal",d=n.length,y,_=0;_<d;_+=1)switch(y=n[_].toLowerCase(),y){case"italic":f="italic";break;case"bold":s="700";break;case"black":s="900";break;case"medium":s="500";break;case"regular":case"normal":s="400";break;case"light":case"thin":s="200";break}return{style:f,weight:u.fWeight||s}}var FontManager=(function(){var u=5e3,n={w:0,size:0,shapes:[],data:{shapes:[]}},s=[];s=s.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var f=127988,d=917631,y=917601,_=917626,A=65039,R=8205,I=127462,G=127487,Y=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function q(ye){var Ae=ye.split(","),_e,Te=Ae.length,we=[];for(_e=0;_e<Te;_e+=1)Ae[_e]!=="sans-serif"&&Ae[_e]!=="monospace"&&we.push(Ae[_e]);return we.join(",")}function K(ye,Ae){var _e=createTag("span");_e.setAttribute("aria-hidden",!0),_e.style.fontFamily=Ae;var Te=createTag("span");Te.innerText="giItT1WQy@!-/#",_e.style.position="absolute",_e.style.left="-10000px",_e.style.top="-10000px",_e.style.fontSize="300px",_e.style.fontVariant="normal",_e.style.fontStyle="normal",_e.style.fontWeight="normal",_e.style.letterSpacing="0",_e.appendChild(Te),document.body.appendChild(_e);var we=Te.offsetWidth;return Te.style.fontFamily=q(ye)+", "+Ae,{node:Te,w:we,parent:_e}}function Q(){var ye,Ae=this.fonts.length,_e,Te,we=Ae;for(ye=0;ye<Ae;ye+=1)this.fonts[ye].loaded?we-=1:this.fonts[ye].fOrigin==="n"||this.fonts[ye].origin===0?this.fonts[ye].loaded=!0:(_e=this.fonts[ye].monoCase.node,Te=this.fonts[ye].monoCase.w,_e.offsetWidth!==Te?(we-=1,this.fonts[ye].loaded=!0):(_e=this.fonts[ye].sansCase.node,Te=this.fonts[ye].sansCase.w,_e.offsetWidth!==Te&&(we-=1,this.fonts[ye].loaded=!0)),this.fonts[ye].loaded&&(this.fonts[ye].sansCase.parent.parentNode.removeChild(this.fonts[ye].sansCase.parent),this.fonts[ye].monoCase.parent.parentNode.removeChild(this.fonts[ye].monoCase.parent)));we!==0&&Date.now()-this.initTime<u?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function ne(ye,Ae){var _e=document.body&&Ae?"svg":"canvas",Te,we=getFontProperties(ye);if(_e==="svg"){var ge=createNS("text");ge.style.fontSize="100px",ge.setAttribute("font-family",ye.fFamily),ge.setAttribute("font-style",we.style),ge.setAttribute("font-weight",we.weight),ge.textContent="1",ye.fClass?(ge.style.fontFamily="inherit",ge.setAttribute("class",ye.fClass)):ge.style.fontFamily=ye.fFamily,Ae.appendChild(ge),Te=ge}else{var De=new OffscreenCanvas(500,500).getContext("2d");De.font=we.style+" "+we.weight+" 100px "+ye.fFamily,Te=De}function ze(He){return _e==="svg"?(Te.textContent=He,Te.getComputedTextLength()):Te.measureText(He).width}return{measureText:ze}}function te(ye,Ae){if(!ye){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=ye.list;return}if(!document.body){this.isLoaded=!0,ye.list.forEach(function(Mt){Mt.helper=ne(Mt),Mt.cache={}}),this.fonts=ye.list;return}var _e=ye.list,Te,we=_e.length,ge=we;for(Te=0;Te<we;Te+=1){var De=!0,ze,He;if(_e[Te].loaded=!1,_e[Te].monoCase=K(_e[Te].fFamily,"monospace"),_e[Te].sansCase=K(_e[Te].fFamily,"sans-serif"),!_e[Te].fPath)_e[Te].loaded=!0,ge-=1;else if(_e[Te].fOrigin==="p"||_e[Te].origin===3){if(ze=document.querySelectorAll('style[f-forigin="p"][f-family="'+_e[Te].fFamily+'"], style[f-origin="3"][f-family="'+_e[Te].fFamily+'"]'),ze.length>0&&(De=!1),De){var yt=createTag("style");yt.setAttribute("f-forigin",_e[Te].fOrigin),yt.setAttribute("f-origin",_e[Te].origin),yt.setAttribute("f-family",_e[Te].fFamily),yt.type="text/css",yt.innerText="@font-face {font-family: "+_e[Te].fFamily+"; font-style: normal; src: url('"+_e[Te].fPath+"');}",Ae.appendChild(yt)}}else if(_e[Te].fOrigin==="g"||_e[Te].origin===1){for(ze=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),He=0;He<ze.length;He+=1)ze[He].href.indexOf(_e[Te].fPath)!==-1&&(De=!1);if(De){var Ge=createTag("link");Ge.setAttribute("f-forigin",_e[Te].fOrigin),Ge.setAttribute("f-origin",_e[Te].origin),Ge.type="text/css",Ge.rel="stylesheet",Ge.href=_e[Te].fPath,document.body.appendChild(Ge)}}else if(_e[Te].fOrigin==="t"||_e[Te].origin===2){for(ze=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),He=0;He<ze.length;He+=1)_e[Te].fPath===ze[He].src&&(De=!1);if(De){var lt=createTag("link");lt.setAttribute("f-forigin",_e[Te].fOrigin),lt.setAttribute("f-origin",_e[Te].origin),lt.setAttribute("rel","stylesheet"),lt.setAttribute("href",_e[Te].fPath),Ae.appendChild(lt)}}_e[Te].helper=ne(_e[Te],Ae),_e[Te].cache={},this.fonts.push(_e[Te])}ge===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function J(ye){if(ye){this.chars||(this.chars=[]);var Ae,_e=ye.length,Te,we=this.chars.length,ge;for(Ae=0;Ae<_e;Ae+=1){for(Te=0,ge=!1;Te<we;)this.chars[Te].style===ye[Ae].style&&this.chars[Te].fFamily===ye[Ae].fFamily&&this.chars[Te].ch===ye[Ae].ch&&(ge=!0),Te+=1;ge||(this.chars.push(ye[Ae]),we+=1)}}}function ie(ye,Ae,_e){for(var Te=0,we=this.chars.length;Te<we;){if(this.chars[Te].ch===ye&&this.chars[Te].style===Ae&&this.chars[Te].fFamily===_e)return this.chars[Te];Te+=1}return(typeof ye=="string"&&ye.charCodeAt(0)!==13||!ye)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",ye,Ae,_e)),n}function re(ye,Ae,_e){var Te=this.getFontByName(Ae),we=ye;if(!Te.cache[we]){var ge=Te.helper;if(ye===" "){var De=ge.measureText("|"+ye+"|"),ze=ge.measureText("||");Te.cache[we]=(De-ze)/100}else Te.cache[we]=ge.measureText(ye)/100}return Te.cache[we]*_e}function le(ye){for(var Ae=0,_e=this.fonts.length;Ae<_e;){if(this.fonts[Ae].fName===ye)return this.fonts[Ae];Ae+=1}return this.fonts[0]}function fe(ye){var Ae=0,_e=ye.charCodeAt(0);if(_e>=55296&&_e<=56319){var Te=ye.charCodeAt(1);Te>=56320&&Te<=57343&&(Ae=(_e-55296)*1024+Te-56320+65536)}return Ae}function pe(ye,Ae){var _e=ye.toString(16)+Ae.toString(16);return Y.indexOf(_e)!==-1}function de(ye){return ye===R}function se(ye){return ye===A}function he(ye){var Ae=fe(ye);return Ae>=I&&Ae<=G}function Se(ye){return he(ye.substr(0,2))&&he(ye.substr(2,2))}function ve(ye){return s.indexOf(ye)!==-1}function Re(ye,Ae){var _e=fe(ye.substr(Ae,2));if(_e!==f)return!1;var Te=0;for(Ae+=2;Te<5;){if(_e=fe(ye.substr(Ae,2)),_e<y||_e>_)return!1;Te+=1,Ae+=2}return fe(ye.substr(Ae,2))===d}function Ee(){this.isLoaded=!0}var Oe=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Oe.isModifier=pe,Oe.isZeroWidthJoiner=de,Oe.isFlagEmoji=Se,Oe.isRegionalCode=he,Oe.isCombinedCharacter=ve,Oe.isRegionalFlag=Re,Oe.isVariationSelector=se,Oe.BLACK_FLAG_CODE_POINT=f;var Ne={addChars:J,addFonts:te,getCharData:ie,getFontByName:le,measureText:re,checkLoadedFonts:Q,setIsLoaded:Ee};return Oe.prototype=Ne,Oe})();function SlotManager(u){this.animationData=u}SlotManager.prototype.getProp=function(u){return this.animationData.slots&&this.animationData.slots[u.sid]?Object.assign(u,this.animationData.slots[u.sid].p):u};function slotFactory(u){return new SlotManager(u)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(n){this.renderableComponents.indexOf(n)===-1&&this.renderableComponents.push(n)},removeRenderableComponent:function(n){this.renderableComponents.indexOf(n)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(n),1)},prepareRenderableFrame:function(n){this.checkLayerLimits(n)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(n){this.data.ip-this.data.st<=n&&this.data.op-this.data.st>n?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var n,s=this.renderableComponents.length;for(n=0;n<s;n+=1)this.renderableComponents[n].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=(function(){var u={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(n){return u[n]||""}})();function SliderEffect(u,n,s){this.p=PropertyFactory.getProp(n,u.v,0,0,s)}function AngleEffect(u,n,s){this.p=PropertyFactory.getProp(n,u.v,0,0,s)}function ColorEffect(u,n,s){this.p=PropertyFactory.getProp(n,u.v,1,0,s)}function PointEffect(u,n,s){this.p=PropertyFactory.getProp(n,u.v,1,0,s)}function LayerIndexEffect(u,n,s){this.p=PropertyFactory.getProp(n,u.v,0,0,s)}function MaskIndexEffect(u,n,s){this.p=PropertyFactory.getProp(n,u.v,0,0,s)}function CheckboxEffect(u,n,s){this.p=PropertyFactory.getProp(n,u.v,0,0,s)}function NoValueEffect(){this.p={}}function EffectsManager(u,n){var s=u.ef||[];this.effectElements=[];var f,d=s.length,y;for(f=0;f<d;f+=1)y=new GroupEffect(s[f],n),this.effectElements.push(y)}function GroupEffect(u,n){this.init(u,n)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(u,n){this.data=u,this.effectElements=[],this.initDynamicPropertyContainer(n);var s,f=this.data.ef.length,d,y=this.data.ef;for(s=0;s<f;s+=1){switch(d=null,y[s].ty){case 0:d=new SliderEffect(y[s],n,this);break;case 1:d=new AngleEffect(y[s],n,this);break;case 2:d=new ColorEffect(y[s],n,this);break;case 3:d=new PointEffect(y[s],n,this);break;case 4:case 7:d=new CheckboxEffect(y[s],n,this);break;case 10:d=new LayerIndexEffect(y[s],n,this);break;case 11:d=new MaskIndexEffect(y[s],n,this);break;case 5:d=new EffectsManager(y[s],n);break;default:d=new NoValueEffect(y[s]);break}d&&this.effectElements.push(d)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var n=0,s=this.data.masksProperties.length;n<s;){if(this.data.masksProperties[n].mode!=="n"&&this.data.masksProperties[n].cl!==!1)return!0;n+=1}return!1},initExpressions:function(){var n=getExpressionInterfaces();if(n){var s=n("layer"),f=n("effects"),d=n("shape"),y=n("text"),_=n("comp");this.layerInterface=s(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var A=f.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(A),this.data.ty===0||this.data.xt?this.compInterface=_(this):this.data.ty===4?(this.layerInterface.shapeInterface=d(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=y(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var n=getBlendMode(this.data.bm),s=this.baseElement||this.layerElement;s.style["mix-blend-mode"]=n},initBaseData:function(n,s,f){this.globalData=s,this.comp=f,this.data=n,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(n,s){var f,d=this.dynamicProperties.length;for(f=0;f<d;f+=1)(s||this._isParent&&this.dynamicProperties[f].propType==="transform")&&(this.dynamicProperties[f].getValue(),this.dynamicProperties[f]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(n){this.dynamicProperties.indexOf(n)===-1&&this.dynamicProperties.push(n)}};function FootageElement(u,n,s){this.initFrame(),this.initRenderable(),this.assetData=n.getAssetData(u.refId),this.footageData=n.imageLoader.getAsset(this.assetData),this.initBaseData(u,n,s)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var u=getExpressionInterfaces();if(u){var n=u("footage");this.layerInterface=n(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(u,n,s){this.initFrame(),this.initRenderable(),this.assetData=n.getAssetData(u.refId),this.initBaseData(u,n,s),this._isPlaying=!1,this._canPlay=!1;var f=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(f),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=u.tm?PropertyFactory.getProp(this,u.tm,0,n.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,u.au&&u.au.lv?u.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(u){if(this.prepareRenderableFrame(u,!0),this.prepareProperties(u,!0),this.tm._placeholder)this._currentTime=u/this.data.sr;else{var n=this.tm.v;this._currentTime=n}this._volume=this.lv.v[0];var s=this._volume*this._volumeMultiplier;this._previousVolume!==s&&(this._previousVolume=s,this.audio.volume(s))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(u){this.audio.rate(u)},AudioElement.prototype.volume=function(u){this._volumeMultiplier=u,this._previousVolume=u*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(u){var n,s=this.layers.length,f;for(this.completeLayers=!0,n=s-1;n>=0;n-=1)this.elements[n]||(f=this.layers[n],f.ip-f.st<=u-this.layers[n].st&&f.op-f.st>u-this.layers[n].st&&this.buildItem(n)),this.completeLayers=this.elements[n]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(u){switch(u.ty){case 2:return this.createImage(u);case 0:return this.createComp(u);case 1:return this.createSolid(u);case 3:return this.createNull(u);case 4:return this.createShape(u);case 5:return this.createText(u);case 6:return this.createAudio(u);case 13:return this.createCamera(u);case 15:return this.createFootage(u);default:return this.createNull(u)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(u){return new AudioElement(u,this.globalData,this)},BaseRenderer.prototype.createFootage=function(u){return new FootageElement(u,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var u,n=this.layers.length;for(u=0;u<n;u+=1)this.buildItem(u);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(u){this.completeLayers=!1;var n,s=u.length,f,d=this.layers.length;for(n=0;n<s;n+=1)for(f=0;f<d;){if(this.layers[f].id===u[n].id){this.layers[f]=u[n];break}f+=1}},BaseRenderer.prototype.setProjectInterface=function(u){this.globalData.projectInterface=u},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(u,n,s){for(var f=this.elements,d=this.layers,y=0,_=d.length;y<_;)d[y].ind==n&&(!f[y]||f[y]===!0?(this.buildItem(y),this.addPendingElement(u)):(s.push(f[y]),f[y].setAsParent(),d[y].parent!==void 0?this.buildElementParenting(u,d[y].parent,s):u.setHierarchy(s))),y+=1},BaseRenderer.prototype.addPendingElement=function(u){this.pendingElements.push(u)},BaseRenderer.prototype.searchExtraCompositions=function(u){var n,s=u.length;for(n=0;n<s;n+=1)if(u[n].xt){var f=this.createComp(u[n]);f.initExpressions(),this.globalData.projectInterface.registerComposition(f)}},BaseRenderer.prototype.getElementById=function(u){var n,s=this.elements.length;for(n=0;n<s;n+=1)if(this.elements[n].data.ind===u)return this.elements[n];return null},BaseRenderer.prototype.getElementByPath=function(u){var n=u.shift(),s;if(typeof n=="number")s=this.elements[n];else{var f,d=this.elements.length;for(f=0;f<d;f+=1)if(this.elements[f].data.nm===n){s=this.elements[f];break}}return u.length===0?s:s.getElementByPath(u)},BaseRenderer.prototype.setupGlobalData=function(u,n){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(u),this.globalData.fontManager.addChars(u.chars),this.globalData.fontManager.addFonts(u.fonts,n),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=u.fr,this.globalData.nm=u.nm,this.globalData.compSize={w:u.w,h:u.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var n=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:n,localMat:n,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var n,s=this.finalTransform.mat,f=0,d=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;f<d;){if(this.hierarchy[f].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}f+=1}if(this.finalTransform._matMdf)for(n=this.finalTransform.mProp.v.props,s.cloneFromProps(n),f=0;f<d;f+=1)s.multiply(this.hierarchy[f].finalTransform.mProp.v)}(!this.localTransforms||this.finalTransform._matMdf)&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var n=0,s=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;n<s;)this.localTransforms[n]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[n]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),n+=1;if(this.finalTransform._localMatMdf){var f=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(f),n=1;n<s;n+=1){var d=this.localTransforms[n].matrix;f.multiply(d)}f.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var y=this.finalTransform.localOpacity;for(n=0;n<s;n+=1)y*=this.localTransforms[n].opacity*.01;this.finalTransform.localOpacity=y}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var n=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(n.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var s=0,f=n.length;for(s=0;s<f;s+=1)this.localTransforms.push(n[s])}}},globalToLocal:function(n){var s=[];s.push(this.finalTransform);for(var f=!0,d=this.comp;f;)d.finalTransform?(d.data.hasMask&&s.splice(0,0,d.finalTransform),d=d.comp):f=!1;var y,_=s.length,A;for(y=0;y<_;y+=1)A=s[y].mat.applyToPointArray(0,0,0),n=[n[0]-A[0],n[1]-A[1],0];return n},mHelper:new Matrix};function MaskElement(u,n,s){this.data=u,this.element=n,this.globalData=s,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var f=this.globalData.defs,d,y=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(y),this.solidPath="";var _,A=this.masksProperties,R=0,I=[],G,Y,q=createElementID(),K,Q,ne,te,J="clipPath",ie="clip-path";for(d=0;d<y;d+=1)if((A[d].mode!=="a"&&A[d].mode!=="n"||A[d].inv||A[d].o.k!==100||A[d].o.x)&&(J="mask",ie="mask"),(A[d].mode==="s"||A[d].mode==="i")&&R===0?(K=createNS("rect"),K.setAttribute("fill","#ffffff"),K.setAttribute("width",this.element.comp.data.w||0),K.setAttribute("height",this.element.comp.data.h||0),I.push(K)):K=null,_=createNS("path"),A[d].mode==="n")this.viewData[d]={op:PropertyFactory.getProp(this.element,A[d].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,A[d],3),elem:_,lastPath:""},f.appendChild(_);else{R+=1,_.setAttribute("fill",A[d].mode==="s"?"#000000":"#ffffff"),_.setAttribute("clip-rule","nonzero");var re;if(A[d].x.k!==0?(J="mask",ie="mask",te=PropertyFactory.getProp(this.element,A[d].x,0,null,this.element),re=createElementID(),Q=createNS("filter"),Q.setAttribute("id",re),ne=createNS("feMorphology"),ne.setAttribute("operator","erode"),ne.setAttribute("in","SourceGraphic"),ne.setAttribute("radius","0"),Q.appendChild(ne),f.appendChild(Q),_.setAttribute("stroke",A[d].mode==="s"?"#000000":"#ffffff")):(ne=null,te=null),this.storedData[d]={elem:_,x:te,expan:ne,lastPath:"",lastOperator:"",filterId:re,lastRadius:0},A[d].mode==="i"){Y=I.length;var le=createNS("g");for(G=0;G<Y;G+=1)le.appendChild(I[G]);var fe=createNS("mask");fe.setAttribute("mask-type","alpha"),fe.setAttribute("id",q+"_"+R),fe.appendChild(_),f.appendChild(fe),le.setAttribute("mask","url("+getLocationHref()+"#"+q+"_"+R+")"),I.length=0,I.push(le)}else I.push(_);A[d].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[d]={elem:_,lastPath:"",op:PropertyFactory.getProp(this.element,A[d].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,A[d],3),invRect:K},this.viewData[d].prop.k||this.drawPath(A[d],this.viewData[d].prop.v,this.viewData[d])}for(this.maskElement=createNS(J),y=I.length,d=0;d<y;d+=1)this.maskElement.appendChild(I[d]);R>0&&(this.maskElement.setAttribute("id",q),this.element.maskedElement.setAttribute(ie,"url("+getLocationHref()+"#"+q+")"),f.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(u){return this.viewData[u].prop},MaskElement.prototype.renderFrame=function(u){var n=this.element.finalTransform.mat,s,f=this.masksProperties.length;for(s=0;s<f;s+=1)if((this.viewData[s].prop._mdf||u)&&this.drawPath(this.masksProperties[s],this.viewData[s].prop.v,this.viewData[s]),(this.viewData[s].op._mdf||u)&&this.viewData[s].elem.setAttribute("fill-opacity",this.viewData[s].op.v),this.masksProperties[s].mode!=="n"&&(this.viewData[s].invRect&&(this.element.finalTransform.mProp._mdf||u)&&this.viewData[s].invRect.setAttribute("transform",n.getInverseMatrix().to2dCSS()),this.storedData[s].x&&(this.storedData[s].x._mdf||u))){var d=this.storedData[s].expan;this.storedData[s].x.v<0?(this.storedData[s].lastOperator!=="erode"&&(this.storedData[s].lastOperator="erode",this.storedData[s].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[s].filterId+")")),d.setAttribute("radius",-this.storedData[s].x.v)):(this.storedData[s].lastOperator!=="dilate"&&(this.storedData[s].lastOperator="dilate",this.storedData[s].elem.setAttribute("filter",null)),this.storedData[s].elem.setAttribute("stroke-width",this.storedData[s].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var u="M0,0 ";return u+=" h"+this.globalData.compSize.w,u+=" v"+this.globalData.compSize.h,u+=" h-"+this.globalData.compSize.w,u+=" v-"+this.globalData.compSize.h+" ",u},MaskElement.prototype.drawPath=function(u,n,s){var f=" M"+n.v[0][0]+","+n.v[0][1],d,y;for(y=n._length,d=1;d<y;d+=1)f+=" C"+n.o[d-1][0]+","+n.o[d-1][1]+" "+n.i[d][0]+","+n.i[d][1]+" "+n.v[d][0]+","+n.v[d][1];if(n.c&&y>1&&(f+=" C"+n.o[d-1][0]+","+n.o[d-1][1]+" "+n.i[0][0]+","+n.i[0][1]+" "+n.v[0][0]+","+n.v[0][1]),s.lastPath!==f){var _="";s.elem&&(n.c&&(_=u.inv?this.solidPath+f:f),s.elem.setAttribute("d",_)),s.lastPath=f}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=(function(){var u={};u.createFilter=n,u.createAlphaToLuminanceFilter=s;function n(f,d){var y=createNS("filter");return y.setAttribute("id",f),d!==!0&&(y.setAttribute("filterUnits","objectBoundingBox"),y.setAttribute("x","0%"),y.setAttribute("y","0%"),y.setAttribute("width","100%"),y.setAttribute("height","100%")),y}function s(){var f=createNS("feColorMatrix");return f.setAttribute("type","matrix"),f.setAttribute("color-interpolation-filters","sRGB"),f.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),f}return u})(),featureSupport=(function(){var u={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(u.maskType=!1),/firefox/i.test(navigator.userAgent)&&(u.svgLumaHidden=!1),u})(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(u){var n,s="SourceGraphic",f=u.data.ef?u.data.ef.length:0,d=createElementID(),y=filtersFactory.createFilter(d,!0),_=0;this.filters=[];var A;for(n=0;n<f;n+=1){A=null;var R=u.data.ef[n].ty;if(registeredEffects$1[R]){var I=registeredEffects$1[R].effect;A=new I(y,u.effectsManager.effectElements[n],u,idPrefix+_,s),s=idPrefix+_,registeredEffects$1[R].countsAsEffect&&(_+=1)}A&&this.filters.push(A)}_&&(u.globalData.defs.appendChild(y),u.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+d+")")),this.filters.length&&u.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(u){var n,s=this.filters.length;for(n=0;n<s;n+=1)this.filters[n].renderFrame(u)},SVGEffects.prototype.getEffects=function(u){var n,s=this.filters.length,f=[];for(n=0;n<s;n+=1)this.filters[n].type===u&&f.push(this.filters[n]);return f};function registerEffect$1(u,n,s){registeredEffects$1[u]={effect:n,countsAsEffect:s}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var n=null;if(this.data.td){this.matteMasks={};var s=createNS("g");s.setAttribute("id",this.layerId),s.appendChild(this.layerElement),n=s,this.globalData.defs.appendChild(s)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),n=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var f=createNS("clipPath"),d=createNS("path");d.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var y=createElementID();if(f.setAttribute("id",y),f.appendChild(d),this.globalData.defs.appendChild(f),this.checkMasks()){var _=createNS("g");_.setAttribute("clip-path","url("+getLocationHref()+"#"+y+")"),_.appendChild(this.layerElement),this.transformedElement=_,n?n.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+y+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(n){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[n]){var s=this.layerId+"_"+n,f,d,y,_;if(n===1||n===3){var A=createNS("mask");A.setAttribute("id",s),A.setAttribute("mask-type",n===3?"luminance":"alpha"),y=createNS("use"),y.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),A.appendChild(y),this.globalData.defs.appendChild(A),!featureSupport.maskType&&n===1&&(A.setAttribute("mask-type","luminance"),f=createElementID(),d=filtersFactory.createFilter(f),this.globalData.defs.appendChild(d),d.appendChild(filtersFactory.createAlphaToLuminanceFilter()),_=createNS("g"),_.appendChild(y),A.appendChild(_),_.setAttribute("filter","url("+getLocationHref()+"#"+f+")"))}else if(n===2){var R=createNS("mask");R.setAttribute("id",s),R.setAttribute("mask-type","alpha");var I=createNS("g");R.appendChild(I),f=createElementID(),d=filtersFactory.createFilter(f);var G=createNS("feComponentTransfer");G.setAttribute("in","SourceGraphic"),d.appendChild(G);var Y=createNS("feFuncA");Y.setAttribute("type","table"),Y.setAttribute("tableValues","1.0 0.0"),G.appendChild(Y),this.globalData.defs.appendChild(d);var q=createNS("rect");q.setAttribute("width",this.comp.data.w),q.setAttribute("height",this.comp.data.h),q.setAttribute("x","0"),q.setAttribute("y","0"),q.setAttribute("fill","#ffffff"),q.setAttribute("opacity","0"),I.setAttribute("filter","url("+getLocationHref()+"#"+f+")"),I.appendChild(q),y=createNS("use"),y.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),I.appendChild(y),featureSupport.maskType||(R.setAttribute("mask-type","luminance"),d.appendChild(filtersFactory.createAlphaToLuminanceFilter()),_=createNS("g"),I.appendChild(q),_.appendChild(this.layerElement),I.appendChild(_)),this.globalData.defs.appendChild(R)}this.matteMasks[n]=s}return this.matteMasks[n]},setMatte:function(n){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+n+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(n){this.hierarchy=n},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var u={initElement:function(s,f,d){this.initFrame(),this.initBaseData(s,f,d),this.initTransform(s,f,d),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var s=this.baseElement||this.layerElement;s.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var s=this.baseElement||this.layerElement;s.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(s){this._mdf=!1,this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(u)],RenderableDOMElement)})();function IImageElement(u,n,s){this.assetData=n.getAssetData(u.refId),this.assetData&&this.assetData.sid&&(this.assetData=n.slotManager.getProp(this.assetData)),this.initElement(u,n,s),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var u=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",u),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(u,n){this.elem=u,this.pos=n}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(n){var s,f=this.shapeModifiers.length;for(s=0;s<f;s+=1)this.shapeModifiers[s].addShape(n)},isShapeInAnimatedModifiers:function(n){for(var s=0,f=this.shapeModifiers.length;s<f;)if(this.shapeModifiers[s].isAnimatedWithShape(n))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var n,s=this.shapes.length;for(n=0;n<s;n+=1)this.shapes[n].sh.reset();s=this.shapeModifiers.length;var f;for(n=s-1;n>=0&&(f=this.shapeModifiers[n].processShapes(this._isFirstFrame),!f);n-=1);}},searchProcessedElement:function(n){for(var s=this.processedElements,f=0,d=s.length;f<d;){if(s[f].elem===n)return s[f].pos;f+=1}return 0},addProcessedElement:function(n,s){for(var f=this.processedElements,d=f.length;d;)if(d-=1,f[d].elem===n){f[d].pos=s;return}f.push(new ProcessedElement(n,s))},prepareFrame:function(n){this.prepareRenderableFrame(n),this.prepareProperties(n,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(u,n,s){this.caches=[],this.styles=[],this.transformers=u,this.lStr="",this.sh=s,this.lvl=n,this._isAnimated=!!s.k;for(var f=0,d=u.length;f<d;){if(u[f].mProps.dynamicProperties.length){this._isAnimated=!0;break}f+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(u,n){this.data=u,this.type=u.ty,this.d="",this.lvl=n,this._mdf=!1,this.closed=u.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(u,n,s,f){this.elem=u,this.frameId=-1,this.dataProps=createSizedArray(n.length),this.renderer=s,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",n.length?n.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(f);var d,y=n.length||0,_;for(d=0;d<y;d+=1)_=PropertyFactory.getProp(u,n[d].v,0,0,this),this.k=_.k||this.k,this.dataProps[d]={n:n[d].n,p:_};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(u){if(!(this.elem.globalData.frameId===this.frameId&&!u)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||u,this._mdf)){var n=0,s=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),n=0;n<s;n+=1)this.dataProps[n].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[n].p.v:this.dashArray[n]=this.dataProps[n].p.v:this.dashoffset[0]=this.dataProps[n].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(u,n,s){this.initDynamicPropertyContainer(u),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(u,n.o,0,.01,this),this.w=PropertyFactory.getProp(u,n.w,0,null,this),this.d=new DashProperty(u,n.d||{},"svg",this),this.c=PropertyFactory.getProp(u,n.c,1,255,this),this.style=s,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(u,n,s){this.initDynamicPropertyContainer(u),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(u,n.o,0,.01,this),this.c=PropertyFactory.getProp(u,n.c,1,255,this),this.style=s}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(u,n,s){this.initDynamicPropertyContainer(u),this.getValue=this.iterateDynamicProperties,this.style=s}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(u,n,s){this.data=n,this.c=createTypedArray("uint8c",n.p*4);var f=n.k.k[0].s?n.k.k[0].s.length-n.p*4:n.k.k.length-n.p*4;this.o=createTypedArray("float32",f),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=f,this.initDynamicPropertyContainer(s),this.prop=PropertyFactory.getProp(u,n.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(u,n){for(var s=0,f=this.o.length/2,d;s<f;){if(d=Math.abs(u[s*4]-u[n*4+s*2]),d>.01)return!1;s+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var u=0,n=this.data.k.k.length;u<n;){if(!this.comparePoints(this.data.k.k[u].s,this.data.p))return!1;u+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(u){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||u){var n,s=this.data.p*4,f,d;for(n=0;n<s;n+=1)f=n%4===0?100:255,d=Math.round(this.prop.v[n]*f),this.c[n]!==d&&(this.c[n]=d,this._cmdf=!u);if(this.o.length)for(s=this.prop.v.length,n=this.data.p*4;n<s;n+=1)f=n%2===0?100:1,d=n%2===0?Math.round(this.prop.v[n]*100):this.prop.v[n],this.o[n-this.data.p*4]!==d&&(this.o[n-this.data.p*4]=d,this._omdf=!u);this._mdf=!u}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(u,n,s){this.initDynamicPropertyContainer(u),this.getValue=this.iterateDynamicProperties,this.initGradientData(u,n,s)}SVGGradientFillStyleData.prototype.initGradientData=function(u,n,s){this.o=PropertyFactory.getProp(u,n.o,0,.01,this),this.s=PropertyFactory.getProp(u,n.s,1,null,this),this.e=PropertyFactory.getProp(u,n.e,1,null,this),this.h=PropertyFactory.getProp(u,n.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(u,n.a||{k:0},0,degToRads,this),this.g=new GradientProperty(u,n.g,this),this.style=s,this.stops=[],this.setGradientData(s.pElem,n),this.setGradientOpacity(n,s),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(u,n){var s=createElementID(),f=createNS(n.t===1?"linearGradient":"radialGradient");f.setAttribute("id",s),f.setAttribute("spreadMethod","pad"),f.setAttribute("gradientUnits","userSpaceOnUse");var d=[],y,_,A;for(A=n.g.p*4,_=0;_<A;_+=4)y=createNS("stop"),f.appendChild(y),d.push(y);u.setAttribute(n.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+s+")"),this.gf=f,this.cst=d},SVGGradientFillStyleData.prototype.setGradientOpacity=function(u,n){if(this.g._hasOpacity&&!this.g._collapsable){var s,f,d,y=createNS("mask"),_=createNS("path");y.appendChild(_);var A=createElementID(),R=createElementID();y.setAttribute("id",R);var I=createNS(u.t===1?"linearGradient":"radialGradient");I.setAttribute("id",A),I.setAttribute("spreadMethod","pad"),I.setAttribute("gradientUnits","userSpaceOnUse"),d=u.g.k.k[0].s?u.g.k.k[0].s.length:u.g.k.k.length;var G=this.stops;for(f=u.g.p*4;f<d;f+=2)s=createNS("stop"),s.setAttribute("stop-color","rgb(255,255,255)"),I.appendChild(s),G.push(s);_.setAttribute(u.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+A+")"),u.ty==="gs"&&(_.setAttribute("stroke-linecap",lineCapEnum[u.lc||2]),_.setAttribute("stroke-linejoin",lineJoinEnum[u.lj||2]),u.lj===1&&_.setAttribute("stroke-miterlimit",u.ml)),this.of=I,this.ms=y,this.ost=G,this.maskId=R,n.msElem=_}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(u,n,s){this.initDynamicPropertyContainer(u),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(u,n.w,0,null,this),this.d=new DashProperty(u,n.d||{},"svg",this),this.initGradientData(u,n,s),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(u,n,s){this.transform={mProps:u,op:n,container:s},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(n,s,f,d){if(s===0)return"";var y=n.o,_=n.i,A=n.v,R,I=" M"+d.applyToPointStringified(A[0][0],A[0][1]);for(R=1;R<s;R+=1)I+=" C"+d.applyToPointStringified(y[R-1][0],y[R-1][1])+" "+d.applyToPointStringified(_[R][0],_[R][1])+" "+d.applyToPointStringified(A[R][0],A[R][1]);return f&&s&&(I+=" C"+d.applyToPointStringified(y[R-1][0],y[R-1][1])+" "+d.applyToPointStringified(_[0][0],_[0][1])+" "+d.applyToPointStringified(A[0][0],A[0][1]),I+="z"),I},SVGElementsRenderer=(function(){var u=new Matrix,n=new Matrix,s={createRenderFunction:f};function f(Y){switch(Y.ty){case"fl":return A;case"gf":return I;case"gs":return R;case"st":return G;case"sh":case"el":case"rc":case"sr":return _;case"tr":return d;case"no":return y;default:return null}}function d(Y,q,K){(K||q.transform.op._mdf)&&q.transform.container.setAttribute("opacity",q.transform.op.v),(K||q.transform.mProps._mdf)&&q.transform.container.setAttribute("transform",q.transform.mProps.v.to2dCSS())}function y(){}function _(Y,q,K){var Q,ne,te,J,ie,re,le=q.styles.length,fe=q.lvl,pe,de,se,he;for(re=0;re<le;re+=1){if(J=q.sh._mdf||K,q.styles[re].lvl<fe){for(de=n.reset(),se=fe-q.styles[re].lvl,he=q.transformers.length-1;!J&&se>0;)J=q.transformers[he].mProps._mdf||J,se-=1,he-=1;if(J)for(se=fe-q.styles[re].lvl,he=q.transformers.length-1;se>0;)de.multiply(q.transformers[he].mProps.v),se-=1,he-=1}else de=u;if(pe=q.sh.paths,ne=pe._length,J){for(te="",Q=0;Q<ne;Q+=1)ie=pe.shapes[Q],ie&&ie._length&&(te+=buildShapeString(ie,ie._length,ie.c,de));q.caches[re]=te}else te=q.caches[re];q.styles[re].d+=Y.hd===!0?"":te,q.styles[re]._mdf=J||q.styles[re]._mdf}}function A(Y,q,K){var Q=q.style;(q.c._mdf||K)&&Q.pElem.setAttribute("fill","rgb("+bmFloor(q.c.v[0])+","+bmFloor(q.c.v[1])+","+bmFloor(q.c.v[2])+")"),(q.o._mdf||K)&&Q.pElem.setAttribute("fill-opacity",q.o.v)}function R(Y,q,K){I(Y,q,K),G(Y,q,K)}function I(Y,q,K){var Q=q.gf,ne=q.g._hasOpacity,te=q.s.v,J=q.e.v;if(q.o._mdf||K){var ie=Y.ty==="gf"?"fill-opacity":"stroke-opacity";q.style.pElem.setAttribute(ie,q.o.v)}if(q.s._mdf||K){var re=Y.t===1?"x1":"cx",le=re==="x1"?"y1":"cy";Q.setAttribute(re,te[0]),Q.setAttribute(le,te[1]),ne&&!q.g._collapsable&&(q.of.setAttribute(re,te[0]),q.of.setAttribute(le,te[1]))}var fe,pe,de,se;if(q.g._cmdf||K){fe=q.cst;var he=q.g.c;for(de=fe.length,pe=0;pe<de;pe+=1)se=fe[pe],se.setAttribute("offset",he[pe*4]+"%"),se.setAttribute("stop-color","rgb("+he[pe*4+1]+","+he[pe*4+2]+","+he[pe*4+3]+")")}if(ne&&(q.g._omdf||K)){var Se=q.g.o;for(q.g._collapsable?fe=q.cst:fe=q.ost,de=fe.length,pe=0;pe<de;pe+=1)se=fe[pe],q.g._collapsable||se.setAttribute("offset",Se[pe*2]+"%"),se.setAttribute("stop-opacity",Se[pe*2+1])}if(Y.t===1)(q.e._mdf||K)&&(Q.setAttribute("x2",J[0]),Q.setAttribute("y2",J[1]),ne&&!q.g._collapsable&&(q.of.setAttribute("x2",J[0]),q.of.setAttribute("y2",J[1])));else{var ve;if((q.s._mdf||q.e._mdf||K)&&(ve=Math.sqrt(Math.pow(te[0]-J[0],2)+Math.pow(te[1]-J[1],2)),Q.setAttribute("r",ve),ne&&!q.g._collapsable&&q.of.setAttribute("r",ve)),q.s._mdf||q.e._mdf||q.h._mdf||q.a._mdf||K){ve||(ve=Math.sqrt(Math.pow(te[0]-J[0],2)+Math.pow(te[1]-J[1],2)));var Re=Math.atan2(J[1]-te[1],J[0]-te[0]),Ee=q.h.v;Ee>=1?Ee=.99:Ee<=-1&&(Ee=-.99);var Oe=ve*Ee,Ne=Math.cos(Re+q.a.v)*Oe+te[0],ye=Math.sin(Re+q.a.v)*Oe+te[1];Q.setAttribute("fx",Ne),Q.setAttribute("fy",ye),ne&&!q.g._collapsable&&(q.of.setAttribute("fx",Ne),q.of.setAttribute("fy",ye))}}}function G(Y,q,K){var Q=q.style,ne=q.d;ne&&(ne._mdf||K)&&ne.dashStr&&(Q.pElem.setAttribute("stroke-dasharray",ne.dashStr),Q.pElem.setAttribute("stroke-dashoffset",ne.dashoffset[0])),q.c&&(q.c._mdf||K)&&Q.pElem.setAttribute("stroke","rgb("+bmFloor(q.c.v[0])+","+bmFloor(q.c.v[1])+","+bmFloor(q.c.v[2])+")"),(q.o._mdf||K)&&Q.pElem.setAttribute("stroke-opacity",q.o.v),(q.w._mdf||K)&&(Q.pElem.setAttribute("stroke-width",q.w.v),Q.msElem&&Q.msElem.setAttribute("stroke-width",q.w.v))}return s})();function SVGShapeElement(u,n,s){this.shapes=[],this.shapesData=u.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(u,n,s),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var u,n=this.shapes.length,s,f,d=this.stylesList.length,y,_=[],A=!1;for(f=0;f<d;f+=1){for(y=this.stylesList[f],A=!1,_.length=0,u=0;u<n;u+=1)s=this.shapes[u],s.styles.indexOf(y)!==-1&&(_.push(s),A=s._isAnimated||A);_.length>1&&A&&this.setShapesAsAnimated(_)}},SVGShapeElement.prototype.setShapesAsAnimated=function(u){var n,s=u.length;for(n=0;n<s;n+=1)u[n].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(u,n){var s,f=new SVGStyleData(u,n),d=f.pElem;if(u.ty==="st")s=new SVGStrokeStyleData(this,u,f);else if(u.ty==="fl")s=new SVGFillStyleData(this,u,f);else if(u.ty==="gf"||u.ty==="gs"){var y=u.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;s=new y(this,u,f),this.globalData.defs.appendChild(s.gf),s.maskId&&(this.globalData.defs.appendChild(s.ms),this.globalData.defs.appendChild(s.of),d.setAttribute("mask","url("+getLocationHref()+"#"+s.maskId+")"))}else u.ty==="no"&&(s=new SVGNoStyleData(this,u,f));return(u.ty==="st"||u.ty==="gs")&&(d.setAttribute("stroke-linecap",lineCapEnum[u.lc||2]),d.setAttribute("stroke-linejoin",lineJoinEnum[u.lj||2]),d.setAttribute("fill-opacity","0"),u.lj===1&&d.setAttribute("stroke-miterlimit",u.ml)),u.r===2&&d.setAttribute("fill-rule","evenodd"),u.ln&&d.setAttribute("id",u.ln),u.cl&&d.setAttribute("class",u.cl),u.bm&&(d.style["mix-blend-mode"]=getBlendMode(u.bm)),this.stylesList.push(f),this.addToAnimatedContents(u,s),s},SVGShapeElement.prototype.createGroupElement=function(u){var n=new ShapeGroupData;return u.ln&&n.gr.setAttribute("id",u.ln),u.cl&&n.gr.setAttribute("class",u.cl),u.bm&&(n.gr.style["mix-blend-mode"]=getBlendMode(u.bm)),n},SVGShapeElement.prototype.createTransformElement=function(u,n){var s=TransformPropertyFactory.getTransformProperty(this,u,this),f=new SVGTransformData(s,s.o,n);return this.addToAnimatedContents(u,f),f},SVGShapeElement.prototype.createShapeElement=function(u,n,s){var f=4;u.ty==="rc"?f=5:u.ty==="el"?f=6:u.ty==="sr"&&(f=7);var d=ShapePropertyFactory.getShapeProp(this,u,f,this),y=new SVGShapeData(n,s,d);return this.shapes.push(y),this.addShapeToModifiers(y),this.addToAnimatedContents(u,y),y},SVGShapeElement.prototype.addToAnimatedContents=function(u,n){for(var s=0,f=this.animatedContents.length;s<f;){if(this.animatedContents[s].element===n)return;s+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(u),element:n,data:u})},SVGShapeElement.prototype.setElementStyles=function(u){var n=u.styles,s,f=this.stylesList.length;for(s=0;s<f;s+=1)n.indexOf(this.stylesList[s])===-1&&!this.stylesList[s].closed&&n.push(this.stylesList[s])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var u,n=this.itemsData.length;for(u=0;u<n;u+=1)this.prevViewData[u]=this.itemsData[u];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),n=this.dynamicProperties.length,u=0;u<n;u+=1)this.dynamicProperties[u].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(u,n,s,f,d,y,_){var A=[].concat(y),R,I=u.length-1,G,Y,q=[],K=[],Q,ne,te;for(R=I;R>=0;R-=1){if(te=this.searchProcessedElement(u[R]),te?n[R]=s[te-1]:u[R]._render=_,u[R].ty==="fl"||u[R].ty==="st"||u[R].ty==="gf"||u[R].ty==="gs"||u[R].ty==="no")te?n[R].style.closed=u[R].hd:n[R]=this.createStyleElement(u[R],d),u[R]._render&&n[R].style.pElem.parentNode!==f&&f.appendChild(n[R].style.pElem),q.push(n[R].style);else if(u[R].ty==="gr"){if(!te)n[R]=this.createGroupElement(u[R]);else for(Y=n[R].it.length,G=0;G<Y;G+=1)n[R].prevViewData[G]=n[R].it[G];this.searchShapes(u[R].it,n[R].it,n[R].prevViewData,n[R].gr,d+1,A,_),u[R]._render&&n[R].gr.parentNode!==f&&f.appendChild(n[R].gr)}else u[R].ty==="tr"?(te||(n[R]=this.createTransformElement(u[R],f)),Q=n[R].transform,A.push(Q)):u[R].ty==="sh"||u[R].ty==="rc"||u[R].ty==="el"||u[R].ty==="sr"?(te||(n[R]=this.createShapeElement(u[R],A,d)),this.setElementStyles(n[R])):u[R].ty==="tm"||u[R].ty==="rd"||u[R].ty==="ms"||u[R].ty==="pb"||u[R].ty==="zz"||u[R].ty==="op"?(te?(ne=n[R],ne.closed=!1):(ne=ShapeModifiers.getModifier(u[R].ty),ne.init(this,u[R]),n[R]=ne,this.shapeModifiers.push(ne)),K.push(ne)):u[R].ty==="rp"&&(te?(ne=n[R],ne.closed=!0):(ne=ShapeModifiers.getModifier(u[R].ty),n[R]=ne,ne.init(this,u,R,n),this.shapeModifiers.push(ne),_=!1),K.push(ne));this.addProcessedElement(u[R],R+1)}for(I=q.length,R=0;R<I;R+=1)q[R].closed=!0;for(I=K.length,R=0;R<I;R+=1)K[R].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var u,n=this.stylesList.length;for(u=0;u<n;u+=1)this.stylesList[u].reset();for(this.renderShape(),u=0;u<n;u+=1)(this.stylesList[u]._mdf||this._isFirstFrame)&&(this.stylesList[u].msElem&&(this.stylesList[u].msElem.setAttribute("d",this.stylesList[u].d),this.stylesList[u].d="M0 0"+this.stylesList[u].d),this.stylesList[u].pElem.setAttribute("d",this.stylesList[u].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var u,n=this.animatedContents.length,s;for(u=0;u<n;u+=1)s=this.animatedContents[u],(this._isFirstFrame||s.element._isAnimated)&&s.data!==!0&&s.fn(s.data,s.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(u,n,s,f,d,y){this.o=u,this.sw=n,this.sc=s,this.fc=f,this.m=d,this.p=y,this._mdf={o:!0,sw:!!n,sc:!!s,fc:!!f,m:!0,p:!0}}LetterProps.prototype.update=function(u,n,s,f,d,y){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var _=!1;return this.o!==u&&(this.o=u,this._mdf.o=!0,_=!0),this.sw!==n&&(this.sw=n,this._mdf.sw=!0,_=!0),this.sc!==s&&(this.sc=s,this._mdf.sc=!0,_=!0),this.fc!==f&&(this.fc=f,this._mdf.fc=!0,_=!0),this.m!==d&&(this.m=d,this._mdf.m=!0,_=!0),y.length&&(this.p[0]!==y[0]||this.p[1]!==y[1]||this.p[4]!==y[4]||this.p[5]!==y[5]||this.p[12]!==y[12]||this.p[13]!==y[13])&&(this.p=y,this._mdf.p=!0,_=!0),_};function TextProperty(u,n){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,n.d&&n.d.sid&&(n.d=u.globalData.slotManager.getProp(n.d)),this.data=n,this.elem=u,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(u,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(u[s]=n[s]);return u},TextProperty.prototype.setCurrentData=function(u){u.__complete||this.completeTextData(u),this.currentData=u,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(u){this.effectsSequence.push(u),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(u){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!u)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var n=this.currentData,s=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var f,d=this.effectsSequence.length,y=u||this.data.d.k[this.keysIndex].s;for(f=0;f<d;f+=1)s!==this.keysIndex?y=this.effectsSequence[f](y,y.t):y=this.effectsSequence[f](this.currentData,y.t);n!==y&&this.setCurrentData(y),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var u=this.data.d.k,n=this.elem.comp.renderedFrame,s=0,f=u.length;s<=f-1&&!(s===f-1||u[s+1].t>n);)s+=1;return this.keysIndex!==s&&(this.keysIndex=s),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(u){for(var n=[],s=0,f=u.length,d,y,_=!1,A=!1,R="";s<f;)_=A,A=!1,d=u.charCodeAt(s),R=u.charAt(s),FontManager.isCombinedCharacter(d)?_=!0:d>=55296&&d<=56319?FontManager.isRegionalFlag(u,s)?R=u.substr(s,14):(y=u.charCodeAt(s+1),y>=56320&&y<=57343&&(FontManager.isModifier(d,y)?(R=u.substr(s,2),_=!0):FontManager.isFlagEmoji(u.substr(s,4))?R=u.substr(s,4):R=u.substr(s,2))):d>56319?(y=u.charCodeAt(s+1),FontManager.isVariationSelector(d)&&(_=!0)):FontManager.isZeroWidthJoiner(d)&&(_=!0,A=!0),_?(n[n.length-1]+=R,_=!1):n.push(R),s+=R.length;return n},TextProperty.prototype.completeTextData=function(u){u.__complete=!0;var n=this.elem.globalData.fontManager,s=this.data,f=[],d,y,_,A=0,R,I=s.m.g,G=0,Y=0,q=0,K=[],Q=0,ne=0,te,J,ie=n.getFontByName(u.f),re,le=0,fe=getFontProperties(ie);u.fWeight=fe.weight,u.fStyle=fe.style,u.finalSize=u.s,u.finalText=this.buildFinalText(u.t),y=u.finalText.length,u.finalLineHeight=u.lh;var pe=u.tr/1e3*u.finalSize,de;if(u.sz)for(var se=!0,he=u.sz[0],Se=u.sz[1],ve,Re;se;){Re=this.buildFinalText(u.t),ve=0,Q=0,y=Re.length,pe=u.tr/1e3*u.finalSize;var Ee=-1;for(d=0;d<y;d+=1)de=Re[d].charCodeAt(0),_=!1,Re[d]===" "?Ee=d:(de===13||de===3)&&(Q=0,_=!0,ve+=u.finalLineHeight||u.finalSize*1.2),n.chars?(re=n.getCharData(Re[d],ie.fStyle,ie.fFamily),le=_?0:re.w*u.finalSize/100):le=n.measureText(Re[d],u.f,u.finalSize),Q+le>he&&Re[d]!==" "?(Ee===-1?y+=1:d=Ee,ve+=u.finalLineHeight||u.finalSize*1.2,Re.splice(d,Ee===d?1:0,"\r"),Ee=-1,Q=0):(Q+=le,Q+=pe);ve+=ie.ascent*u.finalSize/100,this.canResize&&u.finalSize>this.minimumFontSize&&Se<ve?(u.finalSize-=1,u.finalLineHeight=u.finalSize*u.lh/u.s):(u.finalText=Re,y=u.finalText.length,se=!1)}Q=-pe,le=0;var Oe=0,Ne;for(d=0;d<y;d+=1)if(_=!1,Ne=u.finalText[d],de=Ne.charCodeAt(0),de===13||de===3?(Oe=0,K.push(Q),ne=Q>ne?Q:ne,Q=-2*pe,R="",_=!0,q+=1):R=Ne,n.chars?(re=n.getCharData(Ne,ie.fStyle,n.getFontByName(u.f).fFamily),le=_?0:re.w*u.finalSize/100):le=n.measureText(R,u.f,u.finalSize),Ne===" "?Oe+=le+pe:(Q+=le+pe+Oe,Oe=0),f.push({l:le,an:le,add:G,n:_,anIndexes:[],val:R,line:q,animatorJustifyOffset:0}),I==2){if(G+=le,R===""||R===" "||d===y-1){for((R===""||R===" ")&&(G-=le);Y<=d;)f[Y].an=G,f[Y].ind=A,f[Y].extra=le,Y+=1;A+=1,G=0}}else if(I==3){if(G+=le,R===""||d===y-1){for(R===""&&(G-=le);Y<=d;)f[Y].an=G,f[Y].ind=A,f[Y].extra=le,Y+=1;G=0,A+=1}}else f[A].ind=A,f[A].extra=0,A+=1;if(u.l=f,ne=Q>ne?Q:ne,K.push(Q),u.sz)u.boxWidth=u.sz[0],u.justifyOffset=0;else switch(u.boxWidth=ne,u.j){case 1:u.justifyOffset=-u.boxWidth;break;case 2:u.justifyOffset=-u.boxWidth/2;break;default:u.justifyOffset=0}u.lineWidths=K;var ye=s.a,Ae,_e;J=ye.length;var Te,we,ge=[];for(te=0;te<J;te+=1){for(Ae=ye[te],Ae.a.sc&&(u.strokeColorAnim=!0),Ae.a.sw&&(u.strokeWidthAnim=!0),(Ae.a.fc||Ae.a.fh||Ae.a.fs||Ae.a.fb)&&(u.fillColorAnim=!0),we=0,Te=Ae.s.b,d=0;d<y;d+=1)_e=f[d],_e.anIndexes[te]=we,(Te==1&&_e.val!==""||Te==2&&_e.val!==""&&_e.val!==" "||Te==3&&(_e.n||_e.val==" "||d==y-1)||Te==4&&(_e.n||d==y-1))&&(Ae.s.rn===1&&ge.push(we),we+=1);s.a[te].s.totalChars=we;var De=-1,ze;if(Ae.s.rn===1)for(d=0;d<y;d+=1)_e=f[d],De!=_e.anIndexes[te]&&(De=_e.anIndexes[te],ze=ge.splice(Math.floor(Math.random()*ge.length),1)[0]),_e.anIndexes[te]=ze}u.yOffset=u.finalLineHeight||u.finalSize*1.2,u.ls=u.ls||0,u.ascent=ie.ascent*u.finalSize/100},TextProperty.prototype.updateDocumentData=function(u,n){n=n===void 0?this.keysIndex:n;var s=this.copyData({},this.data.d.k[n].s);s=this.copyData(s,u),this.data.d.k[n].s=s,this.recalculate(n),this.setCurrentData(s),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(u){var n=this.data.d.k[u].s;n.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(n)},TextProperty.prototype.canResizeFont=function(u){this.canResize=u,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(u){this.minimumFontSize=Math.floor(u)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=(function(){var u=Math.max,n=Math.min,s=Math.floor;function f(y,_){this._currentTextLength=-1,this.k=!1,this.data=_,this.elem=y,this.comp=y.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(y),this.s=PropertyFactory.getProp(y,_.s||{k:0},0,0,this),"e"in _?this.e=PropertyFactory.getProp(y,_.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(y,_.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(y,_.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(y,_.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(y,_.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(y,_.a,0,.01,this),this.dynamicProperties.length||this.getValue()}f.prototype={getMult:function(_){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var A=0,R=0,I=1,G=1;this.ne.v>0?A=this.ne.v/100:R=-this.ne.v/100,this.xe.v>0?I=1-this.xe.v/100:G=1+this.xe.v/100;var Y=BezierFactory.getBezierEasing(A,R,I,G).get,q=0,K=this.finalS,Q=this.finalE,ne=this.data.sh;if(ne===2)Q===K?q=_>=Q?1:0:q=u(0,n(.5/(Q-K)+(_-K)/(Q-K),1)),q=Y(q);else if(ne===3)Q===K?q=_>=Q?0:1:q=1-u(0,n(.5/(Q-K)+(_-K)/(Q-K),1)),q=Y(q);else if(ne===4)Q===K?q=0:(q=u(0,n(.5/(Q-K)+(_-K)/(Q-K),1)),q<.5?q*=2:q=1-2*(q-.5)),q=Y(q);else if(ne===5){if(Q===K)q=0;else{var te=Q-K;_=n(u(0,_+.5-K),Q-K);var J=-te/2+_,ie=te/2;q=Math.sqrt(1-J*J/(ie*ie))}q=Y(q)}else ne===6?(Q===K?q=0:(_=n(u(0,_+.5-K),Q-K),q=(1+Math.cos(Math.PI+Math.PI*2*_/(Q-K)))/2),q=Y(q)):(_>=s(K)&&(_-K<0?q=u(0,n(n(Q,1)-(K-_),1)):q=u(0,n(Q-_,1))),q=Y(q));if(this.sm.v!==100){var re=this.sm.v*.01;re===0&&(re=1e-8);var le=.5-re*.5;q<le?q=0:(q=(q-le)/re,q>1&&(q=1))}return q*this.a.v},getValue:function(_){this.iterateDynamicProperties(),this._mdf=_||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,_&&this.data.r===2&&(this.e.v=this._currentTextLength);var A=this.data.r===2?1:100/this.data.totalChars,R=this.o.v/A,I=this.s.v/A+R,G=this.e.v/A+R;if(I>G){var Y=I;I=G,G=Y}this.finalS=I,this.finalE=G}},extendPrototype([DynamicPropertyContainer],f);function d(y,_,A){return new f(y,_)}return{getTextSelectorProp:d}})();function TextAnimatorDataProperty(u,n,s){var f={propType:!1},d=PropertyFactory.getProp,y=n.a;this.a={r:y.r?d(u,y.r,0,degToRads,s):f,rx:y.rx?d(u,y.rx,0,degToRads,s):f,ry:y.ry?d(u,y.ry,0,degToRads,s):f,sk:y.sk?d(u,y.sk,0,degToRads,s):f,sa:y.sa?d(u,y.sa,0,degToRads,s):f,s:y.s?d(u,y.s,1,.01,s):f,a:y.a?d(u,y.a,1,0,s):f,o:y.o?d(u,y.o,0,.01,s):f,p:y.p?d(u,y.p,1,0,s):f,sw:y.sw?d(u,y.sw,0,0,s):f,sc:y.sc?d(u,y.sc,1,0,s):f,fc:y.fc?d(u,y.fc,1,0,s):f,fh:y.fh?d(u,y.fh,0,0,s):f,fs:y.fs?d(u,y.fs,0,.01,s):f,fb:y.fb?d(u,y.fb,0,.01,s):f,t:y.t?d(u,y.t,0,0,s):f},this.s=TextSelectorProp.getTextSelectorProp(u,n.s,s),this.s.t=n.s.t}function TextAnimatorProperty(u,n,s){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=u,this._renderType=n,this._elem=s,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(s)}TextAnimatorProperty.prototype.searchProperties=function(){var u,n=this._textData.a.length,s,f=PropertyFactory.getProp;for(u=0;u<n;u+=1)s=this._textData.a[u],this._animatorsData[u]=new TextAnimatorDataProperty(this._elem,s,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:f(this._elem,this._textData.p.a,0,0,this),f:f(this._elem,this._textData.p.f,0,0,this),l:f(this._elem,this._textData.p.l,0,0,this),r:f(this._elem,this._textData.p.r,0,0,this),p:f(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=f(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(u,n){if(this.lettersChangedFlag=n,!(!this._mdf&&!this._isFirstFrame&&!n&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var s=this._moreOptions.alignment.v,f=this._animatorsData,d=this._textData,y=this.mHelper,_=this._renderType,A=this.renderedLetters.length,R,I,G,Y,q=u.l,K,Q,ne,te,J,ie,re,le,fe,pe,de,se,he,Se,ve;if(this._hasMaskedPath){if(ve=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Re=ve.v;this._pathData.r.v&&(Re=Re.reverse()),K={tLength:0,segments:[]},Y=Re._length-1;var Ee;for(se=0,G=0;G<Y;G+=1)Ee=bez.buildBezierData(Re.v[G],Re.v[G+1],[Re.o[G][0]-Re.v[G][0],Re.o[G][1]-Re.v[G][1]],[Re.i[G+1][0]-Re.v[G+1][0],Re.i[G+1][1]-Re.v[G+1][1]]),K.tLength+=Ee.segmentLength,K.segments.push(Ee),se+=Ee.segmentLength;G=Y,ve.v.c&&(Ee=bez.buildBezierData(Re.v[G],Re.v[0],[Re.o[G][0]-Re.v[G][0],Re.o[G][1]-Re.v[G][1]],[Re.i[0][0]-Re.v[0][0],Re.i[0][1]-Re.v[0][1]]),K.tLength+=Ee.segmentLength,K.segments.push(Ee),se+=Ee.segmentLength),this._pathData.pi=K}if(K=this._pathData.pi,Q=this._pathData.f.v,re=0,ie=1,te=0,J=!0,pe=K.segments,Q<0&&ve.v.c)for(K.tLength<Math.abs(Q)&&(Q=-Math.abs(Q)%K.tLength),re=pe.length-1,fe=pe[re].points,ie=fe.length-1;Q<0;)Q+=fe[ie].partialLength,ie-=1,ie<0&&(re-=1,fe=pe[re].points,ie=fe.length-1);fe=pe[re].points,le=fe[ie-1],ne=fe[ie],de=ne.partialLength}Y=q.length,R=0,I=0;var Oe=u.finalSize*1.2*.714,Ne=!0,ye,Ae,_e,Te,we;Te=f.length;var ge,De=-1,ze,He,yt,Ge=Q,lt=re,Mt=ie,hn=-1,Fn,Vn,ni,In,qe,vn,dn,Mn,je="",qn=this.defaultPropsArray,An;if(u.j===2||u.j===1){var ri=0,On=0,Be=u.j===2?-.5:-1,Pe=0,Ke=!0;for(G=0;G<Y;G+=1)if(q[G].n){for(ri&&(ri+=On);Pe<G;)q[Pe].animatorJustifyOffset=ri,Pe+=1;ri=0,Ke=!0}else{for(_e=0;_e<Te;_e+=1)ye=f[_e].a,ye.t.propType&&(Ke&&u.j===2&&(On+=ye.t.v*Be),Ae=f[_e].s,ge=Ae.getMult(q[G].anIndexes[_e],d.a[_e].s.totalChars),ge.length?ri+=ye.t.v*ge[0]*Be:ri+=ye.t.v*ge*Be);Ke=!1}for(ri&&(ri+=On);Pe<G;)q[Pe].animatorJustifyOffset=ri,Pe+=1}for(G=0;G<Y;G+=1){if(y.reset(),Fn=1,q[G].n)R=0,I+=u.yOffset,I+=Ne?1:0,Q=Ge,Ne=!1,this._hasMaskedPath&&(re=lt,ie=Mt,fe=pe[re].points,le=fe[ie-1],ne=fe[ie],de=ne.partialLength,te=0),je="",Mn="",vn="",An="",qn=this.defaultPropsArray;else{if(this._hasMaskedPath){if(hn!==q[G].line){switch(u.j){case 1:Q+=se-u.lineWidths[q[G].line];break;case 2:Q+=(se-u.lineWidths[q[G].line])/2;break}hn=q[G].line}De!==q[G].ind&&(q[De]&&(Q+=q[De].extra),Q+=q[G].an/2,De=q[G].ind),Q+=s[0]*q[G].an*.005;var Ft=0;for(_e=0;_e<Te;_e+=1)ye=f[_e].a,ye.p.propType&&(Ae=f[_e].s,ge=Ae.getMult(q[G].anIndexes[_e],d.a[_e].s.totalChars),ge.length?Ft+=ye.p.v[0]*ge[0]:Ft+=ye.p.v[0]*ge),ye.a.propType&&(Ae=f[_e].s,ge=Ae.getMult(q[G].anIndexes[_e],d.a[_e].s.totalChars),ge.length?Ft+=ye.a.v[0]*ge[0]:Ft+=ye.a.v[0]*ge);for(J=!0,this._pathData.a.v&&(Q=q[0].an*.5+(se-this._pathData.f.v-q[0].an*.5-q[q.length-1].an*.5)*De/(Y-1),Q+=this._pathData.f.v);J;)te+de>=Q+Ft||!fe?(he=(Q+Ft-te)/ne.partialLength,He=le.point[0]+(ne.point[0]-le.point[0])*he,yt=le.point[1]+(ne.point[1]-le.point[1])*he,y.translate(-s[0]*q[G].an*.005,-(s[1]*Oe)*.01),J=!1):fe&&(te+=ne.partialLength,ie+=1,ie>=fe.length&&(ie=0,re+=1,pe[re]?fe=pe[re].points:ve.v.c?(ie=0,re=0,fe=pe[re].points):(te-=ne.partialLength,fe=null)),fe&&(le=ne,ne=fe[ie],de=ne.partialLength));ze=q[G].an/2-q[G].add,y.translate(-ze,0,0)}else ze=q[G].an/2-q[G].add,y.translate(-ze,0,0),y.translate(-s[0]*q[G].an*.005,-s[1]*Oe*.01,0);for(_e=0;_e<Te;_e+=1)ye=f[_e].a,ye.t.propType&&(Ae=f[_e].s,ge=Ae.getMult(q[G].anIndexes[_e],d.a[_e].s.totalChars),(R!==0||u.j!==0)&&(this._hasMaskedPath?ge.length?Q+=ye.t.v*ge[0]:Q+=ye.t.v*ge:ge.length?R+=ye.t.v*ge[0]:R+=ye.t.v*ge));for(u.strokeWidthAnim&&(ni=u.sw||0),u.strokeColorAnim&&(u.sc?Vn=[u.sc[0],u.sc[1],u.sc[2]]:Vn=[0,0,0]),u.fillColorAnim&&u.fc&&(In=[u.fc[0],u.fc[1],u.fc[2]]),_e=0;_e<Te;_e+=1)ye=f[_e].a,ye.a.propType&&(Ae=f[_e].s,ge=Ae.getMult(q[G].anIndexes[_e],d.a[_e].s.totalChars),ge.length?y.translate(-ye.a.v[0]*ge[0],-ye.a.v[1]*ge[1],ye.a.v[2]*ge[2]):y.translate(-ye.a.v[0]*ge,-ye.a.v[1]*ge,ye.a.v[2]*ge));for(_e=0;_e<Te;_e+=1)ye=f[_e].a,ye.s.propType&&(Ae=f[_e].s,ge=Ae.getMult(q[G].anIndexes[_e],d.a[_e].s.totalChars),ge.length?y.scale(1+(ye.s.v[0]-1)*ge[0],1+(ye.s.v[1]-1)*ge[1],1):y.scale(1+(ye.s.v[0]-1)*ge,1+(ye.s.v[1]-1)*ge,1));for(_e=0;_e<Te;_e+=1){if(ye=f[_e].a,Ae=f[_e].s,ge=Ae.getMult(q[G].anIndexes[_e],d.a[_e].s.totalChars),ye.sk.propType&&(ge.length?y.skewFromAxis(-ye.sk.v*ge[0],ye.sa.v*ge[1]):y.skewFromAxis(-ye.sk.v*ge,ye.sa.v*ge)),ye.r.propType&&(ge.length?y.rotateZ(-ye.r.v*ge[2]):y.rotateZ(-ye.r.v*ge)),ye.ry.propType&&(ge.length?y.rotateY(ye.ry.v*ge[1]):y.rotateY(ye.ry.v*ge)),ye.rx.propType&&(ge.length?y.rotateX(ye.rx.v*ge[0]):y.rotateX(ye.rx.v*ge)),ye.o.propType&&(ge.length?Fn+=(ye.o.v*ge[0]-Fn)*ge[0]:Fn+=(ye.o.v*ge-Fn)*ge),u.strokeWidthAnim&&ye.sw.propType&&(ge.length?ni+=ye.sw.v*ge[0]:ni+=ye.sw.v*ge),u.strokeColorAnim&&ye.sc.propType)for(qe=0;qe<3;qe+=1)ge.length?Vn[qe]+=(ye.sc.v[qe]-Vn[qe])*ge[0]:Vn[qe]+=(ye.sc.v[qe]-Vn[qe])*ge;if(u.fillColorAnim&&u.fc){if(ye.fc.propType)for(qe=0;qe<3;qe+=1)ge.length?In[qe]+=(ye.fc.v[qe]-In[qe])*ge[0]:In[qe]+=(ye.fc.v[qe]-In[qe])*ge;ye.fh.propType&&(ge.length?In=addHueToRGB(In,ye.fh.v*ge[0]):In=addHueToRGB(In,ye.fh.v*ge)),ye.fs.propType&&(ge.length?In=addSaturationToRGB(In,ye.fs.v*ge[0]):In=addSaturationToRGB(In,ye.fs.v*ge)),ye.fb.propType&&(ge.length?In=addBrightnessToRGB(In,ye.fb.v*ge[0]):In=addBrightnessToRGB(In,ye.fb.v*ge))}}for(_e=0;_e<Te;_e+=1)ye=f[_e].a,ye.p.propType&&(Ae=f[_e].s,ge=Ae.getMult(q[G].anIndexes[_e],d.a[_e].s.totalChars),this._hasMaskedPath?ge.length?y.translate(0,ye.p.v[1]*ge[0],-ye.p.v[2]*ge[1]):y.translate(0,ye.p.v[1]*ge,-ye.p.v[2]*ge):ge.length?y.translate(ye.p.v[0]*ge[0],ye.p.v[1]*ge[1],-ye.p.v[2]*ge[2]):y.translate(ye.p.v[0]*ge,ye.p.v[1]*ge,-ye.p.v[2]*ge));if(u.strokeWidthAnim&&(vn=ni<0?0:ni),u.strokeColorAnim&&(dn="rgb("+Math.round(Vn[0]*255)+","+Math.round(Vn[1]*255)+","+Math.round(Vn[2]*255)+")"),u.fillColorAnim&&u.fc&&(Mn="rgb("+Math.round(In[0]*255)+","+Math.round(In[1]*255)+","+Math.round(In[2]*255)+")"),this._hasMaskedPath){if(y.translate(0,-u.ls),y.translate(0,s[1]*Oe*.01+I,0),this._pathData.p.v){Se=(ne.point[1]-le.point[1])/(ne.point[0]-le.point[0]);var bn=Math.atan(Se)*180/Math.PI;ne.point[0]<le.point[0]&&(bn+=180),y.rotate(-bn*Math.PI/180)}y.translate(He,yt,0),Q-=s[0]*q[G].an*.005,q[G+1]&&De!==q[G+1].ind&&(Q+=q[G].an/2,Q+=u.tr*.001*u.finalSize)}else{switch(y.translate(R,I,0),u.ps&&y.translate(u.ps[0],u.ps[1]+u.ascent,0),u.j){case 1:y.translate(q[G].animatorJustifyOffset+u.justifyOffset+(u.boxWidth-u.lineWidths[q[G].line]),0,0);break;case 2:y.translate(q[G].animatorJustifyOffset+u.justifyOffset+(u.boxWidth-u.lineWidths[q[G].line])/2,0,0);break}y.translate(0,-u.ls),y.translate(ze,0,0),y.translate(s[0]*q[G].an*.005,s[1]*Oe*.01,0),R+=q[G].l+u.tr*.001*u.finalSize}_==="html"?je=y.toCSS():_==="svg"?je=y.to2dCSS():qn=[y.props[0],y.props[1],y.props[2],y.props[3],y.props[4],y.props[5],y.props[6],y.props[7],y.props[8],y.props[9],y.props[10],y.props[11],y.props[12],y.props[13],y.props[14],y.props[15]],An=Fn}A<=G?(we=new LetterProps(An,vn,dn,Mn,je,qn),this.renderedLetters.push(we),A+=1,this.lettersChangedFlag=!0):(we=this.renderedLetters[G],this.lettersChangedFlag=we.update(An,vn,dn,Mn,je,qn)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(u,n,s){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(u,n,s),this.textProperty=new TextProperty(this,u.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(u.t,this.renderType,this),this.initTransform(u,n,s),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(u){this._mdf=!1,this.prepareRenderableFrame(u),this.prepareProperties(u,this.isInRange)},ITextElement.prototype.createPathShape=function(u,n){var s,f=n.length,d,y="";for(s=0;s<f;s+=1)n[s].ty==="sh"&&(d=n[s].ks.k,y+=buildShapeString(d,d.i.length,!0,u));return y},ITextElement.prototype.updateDocumentData=function(u,n){this.textProperty.updateDocumentData(u,n)},ITextElement.prototype.canResizeFont=function(u){this.textProperty.canResizeFont(u)},ITextElement.prototype.setMinimumFontSize=function(u){this.textProperty.setMinimumFontSize(u)},ITextElement.prototype.applyTextPropertiesToMatrix=function(u,n,s,f,d){switch(u.ps&&n.translate(u.ps[0],u.ps[1]+u.ascent,0),n.translate(0,-u.ls,0),u.j){case 1:n.translate(u.justifyOffset+(u.boxWidth-u.lineWidths[s]),0,0);break;case 2:n.translate(u.justifyOffset+(u.boxWidth-u.lineWidths[s])/2,0,0);break}n.translate(f,d,0)},ITextElement.prototype.buildColor=function(u){return"rgb("+Math.round(u[0]*255)+","+Math.round(u[1]*255)+","+Math.round(u[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(u,n,s){this.textSpans=[],this.renderType="svg",this.initElement(u,n,s)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(u){for(var n=0,s=u.length,f=[],d="";n<s;)u[n]==="\r"||u[n]===""?(f.push(d),d=""):d+=u[n],n+=1;return f.push(d),f},SVGTextLottieElement.prototype.buildShapeData=function(u,n){if(u.shapes&&u.shapes.length){var s=u.shapes[0];if(s.it){var f=s.it[s.it.length-1];f.s&&(f.s.k[0]=n,f.s.k[1]=n)}}return u},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var u,n,s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s?s.l.length:0),s.fc?this.layerElement.setAttribute("fill",this.buildColor(s.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),s.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(s.sc)),this.layerElement.setAttribute("stroke-width",s.sw)),this.layerElement.setAttribute("font-size",s.finalSize);var f=this.globalData.fontManager.getFontByName(s.f);if(f.fClass)this.layerElement.setAttribute("class",f.fClass);else{this.layerElement.setAttribute("font-family",f.fFamily);var d=s.fWeight,y=s.fStyle;this.layerElement.setAttribute("font-style",y),this.layerElement.setAttribute("font-weight",d)}this.layerElement.setAttribute("aria-label",s.t);var _=s.l||[],A=!!this.globalData.fontManager.chars;n=_.length;var R,I=this.mHelper,G="",Y=this.data.singleShape,q=0,K=0,Q=!0,ne=s.tr*.001*s.finalSize;if(Y&&!A&&!s.sz){var te=this.textContainer,J="start";switch(s.j){case 1:J="end";break;case 2:J="middle";break;default:J="start";break}te.setAttribute("text-anchor",J),te.setAttribute("letter-spacing",ne);var ie=this.buildTextContents(s.finalText);for(n=ie.length,K=s.ps?s.ps[1]+s.ascent:0,u=0;u<n;u+=1)R=this.textSpans[u].span||createNS("tspan"),R.textContent=ie[u],R.setAttribute("x",0),R.setAttribute("y",K),R.style.display="inherit",te.appendChild(R),this.textSpans[u]||(this.textSpans[u]={span:null,glyph:null}),this.textSpans[u].span=R,K+=s.finalLineHeight;this.layerElement.appendChild(te)}else{var re=this.textSpans.length,le;for(u=0;u<n;u+=1){if(this.textSpans[u]||(this.textSpans[u]={span:null,childSpan:null,glyph:null}),!A||!Y||u===0){if(R=re>u?this.textSpans[u].span:createNS(A?"g":"text"),re<=u){if(R.setAttribute("stroke-linecap","butt"),R.setAttribute("stroke-linejoin","round"),R.setAttribute("stroke-miterlimit","4"),this.textSpans[u].span=R,A){var fe=createNS("g");R.appendChild(fe),this.textSpans[u].childSpan=fe}this.textSpans[u].span=R,this.layerElement.appendChild(R)}R.style.display="inherit"}if(I.reset(),Y&&(_[u].n&&(q=-ne,K+=s.yOffset,K+=Q?1:0,Q=!1),this.applyTextPropertiesToMatrix(s,I,_[u].line,q,K),q+=_[u].l||0,q+=ne),A){le=this.globalData.fontManager.getCharData(s.finalText[u],f.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily);var pe;if(le.t===1)pe=new SVGCompElement(le.data,this.globalData,this);else{var de=emptyShapeData;le.data&&le.data.shapes&&(de=this.buildShapeData(le.data,s.finalSize)),pe=new SVGShapeElement(de,this.globalData,this)}if(this.textSpans[u].glyph){var se=this.textSpans[u].glyph;this.textSpans[u].childSpan.removeChild(se.layerElement),se.destroy()}this.textSpans[u].glyph=pe,pe._debug=!0,pe.prepareFrame(0),pe.renderFrame(),this.textSpans[u].childSpan.appendChild(pe.layerElement),le.t===1&&this.textSpans[u].childSpan.setAttribute("transform","scale("+s.finalSize/100+","+s.finalSize/100+")")}else Y&&R.setAttribute("transform","translate("+I.props[12]+","+I.props[13]+")"),R.textContent=_[u].val,R.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}Y&&R&&R.setAttribute("d",G)}for(;u<this.textSpans.length;)this.textSpans[u].span.style.display="none",u+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var u=this.layerElement.getBBox();this.bbox={top:u.y,left:u.x,width:u.width,height:u.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var u,n=this.textSpans.length,s;for(this.renderedFrame=this.comp.renderedFrame,u=0;u<n;u+=1)s=this.textSpans[u].glyph,s&&(s.prepareFrame(this.comp.renderedFrame-this.data.st),s._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var u,n,s=this.textAnimator.renderedLetters,f=this.textProperty.currentData.l;n=f.length;var d,y,_;for(u=0;u<n;u+=1)f[u].n||(d=s[u],y=this.textSpans[u].span,_=this.textSpans[u].glyph,_&&_.renderFrame(),d._mdf.m&&y.setAttribute("transform",d.m),d._mdf.o&&y.setAttribute("opacity",d.o),d._mdf.sw&&y.setAttribute("stroke-width",d.sw),d._mdf.sc&&y.setAttribute("stroke",d.sc),d._mdf.fc&&y.setAttribute("fill",d.fc))}};function ISolidElement(u,n,s){this.initElement(u,n,s)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var u=createNS("rect");u.setAttribute("width",this.data.sw),u.setAttribute("height",this.data.sh),u.setAttribute("fill",this.data.sc),this.layerElement.appendChild(u)};function NullElement(u,n,s){this.initFrame(),this.initBaseData(u,n,s),this.initFrame(),this.initTransform(u,n,s),this.initHierarchy()}NullElement.prototype.prepareFrame=function(u){this.prepareProperties(u,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(u){return new NullElement(u,this.globalData,this)},SVGRendererBase.prototype.createShape=function(u){return new SVGShapeElement(u,this.globalData,this)},SVGRendererBase.prototype.createText=function(u){return new SVGTextLottieElement(u,this.globalData,this)},SVGRendererBase.prototype.createImage=function(u){return new IImageElement(u,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(u){return new ISolidElement(u,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(u){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+u.w+" "+u.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",u.w),this.svgElement.setAttribute("height",u.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var n=this.globalData.defs;this.setupGlobalData(u,n),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=u;var s=createNS("clipPath"),f=createNS("rect");f.setAttribute("width",u.w),f.setAttribute("height",u.h),f.setAttribute("x",0),f.setAttribute("y",0);var d=createElementID();s.setAttribute("id",d),s.appendChild(f),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+d+")"),n.appendChild(s),this.layers=u.layers,this.elements=createSizedArray(u.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var u,n=this.layers?this.layers.length:0;for(u=0;u<n;u+=1)this.elements[u]&&this.elements[u].destroy&&this.elements[u].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(u){var n=0,s=this.layers.length;for(n=0;n<s;n+=1)if(this.layers[n].ind===u)return n;return-1},SVGRendererBase.prototype.buildItem=function(u){var n=this.elements;if(!(n[u]||this.layers[u].ty===99)){n[u]=!0;var s=this.createItem(this.layers[u]);if(n[u]=s,getExpressionsPlugin()&&(this.layers[u].ty===0&&this.globalData.projectInterface.registerComposition(s),s.initExpressions()),this.appendElementInPos(s,u),this.layers[u].tt){var f="tp"in this.layers[u]?this.findIndexByInd(this.layers[u].tp):u-1;if(f===-1)return;if(!this.elements[f]||this.elements[f]===!0)this.buildItem(f),this.addPendingElement(s);else{var d=n[f],y=d.getMatte(this.layers[u].tt);s.setMatte(y)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var u=this.pendingElements.pop();if(u.checkParenting(),u.data.tt)for(var n=0,s=this.elements.length;n<s;){if(this.elements[n]===u){var f="tp"in u.data?this.findIndexByInd(u.data.tp):n-1,d=this.elements[f],y=d.getMatte(this.layers[n].tt);u.setMatte(y);break}n+=1}}},SVGRendererBase.prototype.renderFrame=function(u){if(!(this.renderedFrame===u||this.destroyed)){u===null?u=this.renderedFrame:this.renderedFrame=u,this.globalData.frameNum=u,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=u,this.globalData._mdf=!1;var n,s=this.layers.length;for(this.completeLayers||this.checkLayers(u),n=s-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(u-this.layers[n].st);if(this.globalData._mdf)for(n=0;n<s;n+=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(u,n){var s=u.getBaseElement();if(s){for(var f=0,d;f<n;)this.elements[f]&&this.elements[f]!==!0&&this.elements[f].getBaseElement()&&(d=this.elements[f].getBaseElement()),f+=1;d?this.layerElement.insertBefore(s,d):this.layerElement.appendChild(s)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(u,n,s){this.initFrame(),this.initBaseData(u,n,s),this.initTransform(u,n,s),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!n.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(u){if(this._mdf=!1,this.prepareRenderableFrame(u),this.prepareProperties(u,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=u/this.data.sr;else{var n=this.tm.v;n===this.data.op&&(n=this.data.op-1),this.renderedFrame=n}var s,f=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),s=f-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&(this.elements[s].prepareFrame(this.renderedFrame-this.layers[s].st),this.elements[s]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var u,n=this.layers.length;for(u=0;u<n;u+=1)(this.completeLayers||this.elements[u])&&this.elements[u].renderFrame()},ICompElement.prototype.setElements=function(u){this.elements=u},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var u,n=this.layers.length;for(u=0;u<n;u+=1)this.elements[u]&&this.elements[u].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(u,n,s){this.layers=u.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(u,n,s),this.tm=u.tm?PropertyFactory.getProp(this,u.tm,0,n.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(u){return new SVGCompElement(u,this.globalData,this)};function SVGRenderer(u,n){this.animationItem=u,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var s="";if(n&&n.title){var f=createNS("title"),d=createElementID();f.setAttribute("id",d),f.textContent=n.title,this.svgElement.appendChild(f),s+=d}if(n&&n.description){var y=createNS("desc"),_=createElementID();y.setAttribute("id",_),y.textContent=n.description,this.svgElement.appendChild(y),s+=" "+_}s&&this.svgElement.setAttribute("aria-labelledby",s);var A=createNS("defs");this.svgElement.appendChild(A);var R=createNS("g");this.svgElement.appendChild(R),this.layerElement=R,this.renderConfig={preserveAspectRatio:n&&n.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:n&&n.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:n&&n.contentVisibility||"visible",progressiveLoad:n&&n.progressiveLoad||!1,hideOnTransparent:!(n&&n.hideOnTransparent===!1),viewBoxOnly:n&&n.viewBoxOnly||!1,viewBoxSize:n&&n.viewBoxSize||!1,className:n&&n.className||"",id:n&&n.id||"",focusable:n&&n.focusable,filterSize:{width:n&&n.filterSize&&n.filterSize.width||"100%",height:n&&n.filterSize&&n.filterSize.height||"100%",x:n&&n.filterSize&&n.filterSize.x||"0%",y:n&&n.filterSize&&n.filterSize.y||"0%"},width:n&&n.width,height:n&&n.height,runExpressions:!n||n.runExpressions===void 0||n.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:A,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(u){return new SVGCompElement(u,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(n){var s,f=n.length,d="_";for(s=0;s<f;s+=1)d+=n[s].transform.key+"_";var y=this.sequences[d];return y||(y={transforms:[].concat(n),finalTransform:new Matrix,_mdf:!1},this.sequences[d]=y,this.sequenceList.push(y)),y},processSequence:function(n,s){for(var f=0,d=n.transforms.length,y=s;f<d&&!s;){if(n.transforms[f].transform.mProps._mdf){y=!0;break}f+=1}if(y)for(n.finalTransform.reset(),f=d-1;f>=0;f-=1)n.finalTransform.multiply(n.transforms[f].transform.mProps.v);n._mdf=y},processSequences:function(n){var s,f=this.sequenceList.length;for(s=0;s<f;s+=1)this.processSequence(this.sequenceList[s],n)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var n="__lottie_element_luma_buffer",s=null,f=null,d=null;function y(){var R=createNS("svg"),I=createNS("filter"),G=createNS("feColorMatrix");return I.setAttribute("id",n),G.setAttribute("type","matrix"),G.setAttribute("color-interpolation-filters","sRGB"),G.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),I.appendChild(G),R.appendChild(I),R.setAttribute("id",n+"_svg"),featureSupport.svgLumaHidden&&(R.style.display="none"),R}function _(){s||(d=y(),document.body.appendChild(d),s=createTag("canvas"),f=s.getContext("2d"),f.filter="url(#"+n+")",f.fillStyle="rgba(0,0,0,0)",f.fillRect(0,0,1,1))}function A(R){return s||_(),s.width=R.width,s.height=R.height,f.filter="url(#"+n+")",s}return{load:_,get:A}};function createCanvas(u,n){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(u,n);var s=createTag("canvas");return s.width=u,s.height=n,s}var assetLoader=(function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}})(),registeredEffects={};function CVEffects(u){var n,s=u.data.ef?u.data.ef.length:0;this.filters=[];var f;for(n=0;n<s;n+=1){f=null;var d=u.data.ef[n].ty;if(registeredEffects[d]){var y=registeredEffects[d].effect;f=new y(u.effectsManager.effectElements[n],u)}f&&this.filters.push(f)}this.filters.length&&u.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(u){var n,s=this.filters.length;for(n=0;n<s;n+=1)this.filters[n].renderFrame(u)},CVEffects.prototype.getEffects=function(u){var n,s=this.filters.length,f=[];for(n=0;n<s;n+=1)this.filters[n].type===u&&f.push(this.filters[n]);return f};function registerEffect(u,n){registeredEffects[u]={effect:n}}function CVMaskElement(u,n){this.data=u,this.element=n,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var s,f=this.masksProperties.length,d=!1;for(s=0;s<f;s+=1)this.masksProperties[s].mode!=="n"&&(d=!0),this.viewData[s]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[s],3);this.hasMasks=d,d&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var u=this.element.finalTransform.mat,n=this.element.canvasContext,s,f=this.masksProperties.length,d,y,_;for(n.beginPath(),s=0;s<f;s+=1)if(this.masksProperties[s].mode!=="n"){this.masksProperties[s].inv&&(n.moveTo(0,0),n.lineTo(this.element.globalData.compSize.w,0),n.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),n.lineTo(0,this.element.globalData.compSize.h),n.lineTo(0,0)),_=this.viewData[s].v,d=u.applyToPointArray(_.v[0][0],_.v[0][1],0),n.moveTo(d[0],d[1]);var A,R=_._length;for(A=1;A<R;A+=1)y=u.applyToTriplePoints(_.o[A-1],_.i[A],_.v[A]),n.bezierCurveTo(y[0],y[1],y[2],y[3],y[4],y[5]);y=u.applyToTriplePoints(_.o[A-1],_.i[0],_.v[0]),n.bezierCurveTo(y[0],y[1],y[2],y[3],y[4],y[5])}this.element.globalData.renderer.save(!0),n.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var n=this.globalData.canvasContext,s=assetLoader.createCanvas(n.canvas.width,n.canvas.height);this.buffers.push(s);var f=assetLoader.createCanvas(n.canvas.width,n.canvas.height);this.buffers.push(f),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var n=this.globalData;if(n.blendMode!==this.data.bm){n.blendMode=this.data.bm;var s=getBlendMode(this.data.bm);n.canvasContext.globalCompositeOperation=s}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(n){n.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var n=this.buffers[0],s=n.getContext("2d");this.clearCanvas(s),s.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var n=this.buffers[1],s=n.getContext("2d");this.clearCanvas(s),s.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var f=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(f.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var d=assetLoader.getLumaCanvas(this.canvasContext.canvas),y=d.getContext("2d");y.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(d,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(n,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(n){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!n)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var s=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(s),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(s),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(u,n,s,f){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var d=4;n.ty==="rc"?d=5:n.ty==="el"?d=6:n.ty==="sr"&&(d=7),this.sh=ShapePropertyFactory.getShapeProp(u,n,d,u);var y,_=s.length,A;for(y=0;y<_;y+=1)s[y].closed||(A={transforms:f.addTransformSequence(s[y].transforms),trNodes:[]},this.styledShapes.push(A),s[y].elements.push(A))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(u,n,s){this.shapes=[],this.shapesData=u.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(u,n,s)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(u,n){var s={data:u,type:u.ty,preTransforms:this.transformsManager.addTransformSequence(n),transforms:[],elements:[],closed:u.hd===!0},f={};if(u.ty==="fl"||u.ty==="st"?(f.c=PropertyFactory.getProp(this,u.c,1,255,this),f.c.k||(s.co="rgb("+bmFloor(f.c.v[0])+","+bmFloor(f.c.v[1])+","+bmFloor(f.c.v[2])+")")):(u.ty==="gf"||u.ty==="gs")&&(f.s=PropertyFactory.getProp(this,u.s,1,null,this),f.e=PropertyFactory.getProp(this,u.e,1,null,this),f.h=PropertyFactory.getProp(this,u.h||{k:0},0,.01,this),f.a=PropertyFactory.getProp(this,u.a||{k:0},0,degToRads,this),f.g=new GradientProperty(this,u.g,this)),f.o=PropertyFactory.getProp(this,u.o,0,.01,this),u.ty==="st"||u.ty==="gs"){if(s.lc=lineCapEnum[u.lc||2],s.lj=lineJoinEnum[u.lj||2],u.lj==1&&(s.ml=u.ml),f.w=PropertyFactory.getProp(this,u.w,0,null,this),f.w.k||(s.wi=f.w.v),u.d){var d=new DashProperty(this,u.d,"canvas",this);f.d=d,f.d.k||(s.da=f.d.dashArray,s.do=f.d.dashoffset[0])}}else s.r=u.r===2?"evenodd":"nonzero";return this.stylesList.push(s),f.style=s,f},CVShapeElement.prototype.createGroupElement=function(){var u={it:[],prevViewData:[]};return u},CVShapeElement.prototype.createTransformElement=function(u){var n={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,u.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,u,this)}};return n},CVShapeElement.prototype.createShapeElement=function(u){var n=new CVShapeData(this,u,this.stylesList,this.transformsManager);return this.shapes.push(n),this.addShapeToModifiers(n),n},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var u,n=this.itemsData.length;for(u=0;u<n;u+=1)this.prevViewData[u]=this.itemsData[u];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),n=this.dynamicProperties.length,u=0;u<n;u+=1)this.dynamicProperties[u].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(u){var n,s=this.stylesList.length;for(n=0;n<s;n+=1)this.stylesList[n].closed||this.stylesList[n].transforms.push(u)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var u,n=this.stylesList.length;for(u=0;u<n;u+=1)this.stylesList[u].closed||this.stylesList[u].transforms.pop()},CVShapeElement.prototype.closeStyles=function(u){var n,s=u.length;for(n=0;n<s;n+=1)u[n].closed=!0},CVShapeElement.prototype.searchShapes=function(u,n,s,f,d){var y,_=u.length-1,A,R,I=[],G=[],Y,q,K,Q=[].concat(d);for(y=_;y>=0;y-=1){if(Y=this.searchProcessedElement(u[y]),Y?n[y]=s[Y-1]:u[y]._shouldRender=f,u[y].ty==="fl"||u[y].ty==="st"||u[y].ty==="gf"||u[y].ty==="gs")Y?n[y].style.closed=!1:n[y]=this.createStyleElement(u[y],Q),I.push(n[y].style);else if(u[y].ty==="gr"){if(!Y)n[y]=this.createGroupElement(u[y]);else for(R=n[y].it.length,A=0;A<R;A+=1)n[y].prevViewData[A]=n[y].it[A];this.searchShapes(u[y].it,n[y].it,n[y].prevViewData,f,Q)}else u[y].ty==="tr"?(Y||(K=this.createTransformElement(u[y]),n[y]=K),Q.push(n[y]),this.addTransformToStyleList(n[y])):u[y].ty==="sh"||u[y].ty==="rc"||u[y].ty==="el"||u[y].ty==="sr"?Y||(n[y]=this.createShapeElement(u[y])):u[y].ty==="tm"||u[y].ty==="rd"||u[y].ty==="pb"||u[y].ty==="zz"||u[y].ty==="op"?(Y?(q=n[y],q.closed=!1):(q=ShapeModifiers.getModifier(u[y].ty),q.init(this,u[y]),n[y]=q,this.shapeModifiers.push(q)),G.push(q)):u[y].ty==="rp"&&(Y?(q=n[y],q.closed=!0):(q=ShapeModifiers.getModifier(u[y].ty),n[y]=q,q.init(this,u,y,n),this.shapeModifiers.push(q),f=!1),G.push(q));this.addProcessedElement(u[y],y+1)}for(this.removeTransformFromStyleList(),this.closeStyles(I),_=G.length,y=0;y<_;y+=1)G[y].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(u,n){(u._opMdf||n.op._mdf||this._isFirstFrame)&&(n.opacity=u.opacity,n.opacity*=n.op.v,n._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var u,n=this.stylesList.length,s,f,d,y,_,A,R=this.globalData.renderer,I=this.globalData.canvasContext,G,Y;for(u=0;u<n;u+=1)if(Y=this.stylesList[u],G=Y.type,!((G==="st"||G==="gs")&&Y.wi===0||!Y.data._shouldRender||Y.coOp===0||this.globalData.currentGlobalAlpha===0)){for(R.save(),_=Y.elements,G==="st"||G==="gs"?(R.ctxStrokeStyle(G==="st"?Y.co:Y.grd),R.ctxLineWidth(Y.wi),R.ctxLineCap(Y.lc),R.ctxLineJoin(Y.lj),R.ctxMiterLimit(Y.ml||0)):R.ctxFillStyle(G==="fl"?Y.co:Y.grd),R.ctxOpacity(Y.coOp),G!=="st"&&G!=="gs"&&I.beginPath(),R.ctxTransform(Y.preTransforms.finalTransform.props),f=_.length,s=0;s<f;s+=1){for((G==="st"||G==="gs")&&(I.beginPath(),Y.da&&(I.setLineDash(Y.da),I.lineDashOffset=Y.do)),A=_[s].trNodes,y=A.length,d=0;d<y;d+=1)A[d].t==="m"?I.moveTo(A[d].p[0],A[d].p[1]):A[d].t==="c"?I.bezierCurveTo(A[d].pts[0],A[d].pts[1],A[d].pts[2],A[d].pts[3],A[d].pts[4],A[d].pts[5]):I.closePath();(G==="st"||G==="gs")&&(R.ctxStroke(),Y.da&&I.setLineDash(this.dashResetter))}G!=="st"&&G!=="gs"&&this.globalData.renderer.ctxFill(Y.r),R.restore()}},CVShapeElement.prototype.renderShape=function(u,n,s,f){var d,y=n.length-1,_;for(_=u,d=y;d>=0;d-=1)n[d].ty==="tr"?(_=s[d].transform,this.renderShapeTransform(u,_)):n[d].ty==="sh"||n[d].ty==="el"||n[d].ty==="rc"||n[d].ty==="sr"?this.renderPath(n[d],s[d]):n[d].ty==="fl"?this.renderFill(n[d],s[d],_):n[d].ty==="st"?this.renderStroke(n[d],s[d],_):n[d].ty==="gf"||n[d].ty==="gs"?this.renderGradientFill(n[d],s[d],_):n[d].ty==="gr"?this.renderShape(_,n[d].it,s[d].it):n[d].ty;f&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(u,n){if(this._isFirstFrame||n._mdf||u.transforms._mdf){var s=u.trNodes,f=n.paths,d,y,_,A=f._length;s.length=0;var R=u.transforms.finalTransform;for(_=0;_<A;_+=1){var I=f.shapes[_];if(I&&I.v){for(y=I._length,d=1;d<y;d+=1)d===1&&s.push({t:"m",p:R.applyToPointArray(I.v[0][0],I.v[0][1],0)}),s.push({t:"c",pts:R.applyToTriplePoints(I.o[d-1],I.i[d],I.v[d])});y===1&&s.push({t:"m",p:R.applyToPointArray(I.v[0][0],I.v[0][1],0)}),I.c&&y&&(s.push({t:"c",pts:R.applyToTriplePoints(I.o[d-1],I.i[0],I.v[0])}),s.push({t:"z"}))}}u.trNodes=s}},CVShapeElement.prototype.renderPath=function(u,n){if(u.hd!==!0&&u._shouldRender){var s,f=n.styledShapes.length;for(s=0;s<f;s+=1)this.renderStyledShape(n.styledShapes[s],n.sh)}},CVShapeElement.prototype.renderFill=function(u,n,s){var f=n.style;(n.c._mdf||this._isFirstFrame)&&(f.co="rgb("+bmFloor(n.c.v[0])+","+bmFloor(n.c.v[1])+","+bmFloor(n.c.v[2])+")"),(n.o._mdf||s._opMdf||this._isFirstFrame)&&(f.coOp=n.o.v*s.opacity)},CVShapeElement.prototype.renderGradientFill=function(u,n,s){var f=n.style,d;if(!f.grd||n.g._mdf||n.s._mdf||n.e._mdf||u.t!==1&&(n.h._mdf||n.a._mdf)){var y=this.globalData.canvasContext,_=n.s.v,A=n.e.v;if(u.t===1)d=y.createLinearGradient(_[0],_[1],A[0],A[1]);else{var R=Math.sqrt(Math.pow(_[0]-A[0],2)+Math.pow(_[1]-A[1],2)),I=Math.atan2(A[1]-_[1],A[0]-_[0]),G=n.h.v;G>=1?G=.99:G<=-1&&(G=-.99);var Y=R*G,q=Math.cos(I+n.a.v)*Y+_[0],K=Math.sin(I+n.a.v)*Y+_[1];d=y.createRadialGradient(q,K,0,_[0],_[1],R)}var Q,ne=u.g.p,te=n.g.c,J=1;for(Q=0;Q<ne;Q+=1)n.g._hasOpacity&&n.g._collapsable&&(J=n.g.o[Q*2+1]),d.addColorStop(te[Q*4]/100,"rgba("+te[Q*4+1]+","+te[Q*4+2]+","+te[Q*4+3]+","+J+")");f.grd=d}f.coOp=n.o.v*s.opacity},CVShapeElement.prototype.renderStroke=function(u,n,s){var f=n.style,d=n.d;d&&(d._mdf||this._isFirstFrame)&&(f.da=d.dashArray,f.do=d.dashoffset[0]),(n.c._mdf||this._isFirstFrame)&&(f.co="rgb("+bmFloor(n.c.v[0])+","+bmFloor(n.c.v[1])+","+bmFloor(n.c.v[2])+")"),(n.o._mdf||s._opMdf||this._isFirstFrame)&&(f.coOp=n.o.v*s.opacity),(n.w._mdf||this._isFirstFrame)&&(f.wi=n.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(u,n,s){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(u,n,s)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var u=this.textProperty.currentData;this.renderedLetters=createSizedArray(u.l?u.l.length:0);var n=!1;u.fc?(n=!0,this.values.fill=this.buildColor(u.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=n;var s=!1;u.sc&&(s=!0,this.values.stroke=this.buildColor(u.sc),this.values.sWidth=u.sw);var f=this.globalData.fontManager.getFontByName(u.f),d,y,_=u.l,A=this.mHelper;this.stroke=s,this.values.fValue=u.finalSize+"px "+this.globalData.fontManager.getFontByName(u.f).fFamily,y=u.finalText.length;var R,I,G,Y,q,K,Q,ne,te,J,ie=this.data.singleShape,re=u.tr*.001*u.finalSize,le=0,fe=0,pe=!0,de=0;for(d=0;d<y;d+=1){R=this.globalData.fontManager.getCharData(u.finalText[d],f.fStyle,this.globalData.fontManager.getFontByName(u.f).fFamily),I=R&&R.data||{},A.reset(),ie&&_[d].n&&(le=-re,fe+=u.yOffset,fe+=pe?1:0,pe=!1),q=I.shapes?I.shapes[0].it:[],Q=q.length,A.scale(u.finalSize/100,u.finalSize/100),ie&&this.applyTextPropertiesToMatrix(u,A,_[d].line,le,fe),te=createSizedArray(Q-1);var se=0;for(K=0;K<Q;K+=1)if(q[K].ty==="sh"){for(Y=q[K].ks.k.i.length,ne=q[K].ks.k,J=[],G=1;G<Y;G+=1)G===1&&J.push(A.applyToX(ne.v[0][0],ne.v[0][1],0),A.applyToY(ne.v[0][0],ne.v[0][1],0)),J.push(A.applyToX(ne.o[G-1][0],ne.o[G-1][1],0),A.applyToY(ne.o[G-1][0],ne.o[G-1][1],0),A.applyToX(ne.i[G][0],ne.i[G][1],0),A.applyToY(ne.i[G][0],ne.i[G][1],0),A.applyToX(ne.v[G][0],ne.v[G][1],0),A.applyToY(ne.v[G][0],ne.v[G][1],0));J.push(A.applyToX(ne.o[G-1][0],ne.o[G-1][1],0),A.applyToY(ne.o[G-1][0],ne.o[G-1][1],0),A.applyToX(ne.i[0][0],ne.i[0][1],0),A.applyToY(ne.i[0][0],ne.i[0][1],0),A.applyToX(ne.v[0][0],ne.v[0][1],0),A.applyToY(ne.v[0][0],ne.v[0][1],0)),te[se]=J,se+=1}ie&&(le+=_[d].l,le+=re),this.textSpans[de]?this.textSpans[de].elem=te:this.textSpans[de]={elem:te},de+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var u=this.canvasContext;u.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var n,s,f,d,y,_,A=this.textAnimator.renderedLetters,R=this.textProperty.currentData.l;s=R.length;var I,G=null,Y=null,q=null,K,Q,ne=this.globalData.renderer;for(n=0;n<s;n+=1)if(!R[n].n){if(I=A[n],I&&(ne.save(),ne.ctxTransform(I.p),ne.ctxOpacity(I.o)),this.fill){for(I&&I.fc?G!==I.fc&&(ne.ctxFillStyle(I.fc),G=I.fc):G!==this.values.fill&&(G=this.values.fill,ne.ctxFillStyle(this.values.fill)),K=this.textSpans[n].elem,d=K.length,this.globalData.canvasContext.beginPath(),f=0;f<d;f+=1)for(Q=K[f],_=Q.length,this.globalData.canvasContext.moveTo(Q[0],Q[1]),y=2;y<_;y+=6)this.globalData.canvasContext.bezierCurveTo(Q[y],Q[y+1],Q[y+2],Q[y+3],Q[y+4],Q[y+5]);this.globalData.canvasContext.closePath(),ne.ctxFill()}if(this.stroke){for(I&&I.sw?q!==I.sw&&(q=I.sw,ne.ctxLineWidth(I.sw)):q!==this.values.sWidth&&(q=this.values.sWidth,ne.ctxLineWidth(this.values.sWidth)),I&&I.sc?Y!==I.sc&&(Y=I.sc,ne.ctxStrokeStyle(I.sc)):Y!==this.values.stroke&&(Y=this.values.stroke,ne.ctxStrokeStyle(this.values.stroke)),K=this.textSpans[n].elem,d=K.length,this.globalData.canvasContext.beginPath(),f=0;f<d;f+=1)for(Q=K[f],_=Q.length,this.globalData.canvasContext.moveTo(Q[0],Q[1]),y=2;y<_;y+=6)this.globalData.canvasContext.bezierCurveTo(Q[y],Q[y+1],Q[y+2],Q[y+3],Q[y+4],Q[y+5]);this.globalData.canvasContext.closePath(),ne.ctxStroke()}I&&this.globalData.renderer.restore()}};function CVImageElement(u,n,s){this.assetData=n.getAssetData(u.refId),this.img=n.imageLoader.getAsset(this.assetData),this.initElement(u,n,s)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var u=createTag("canvas");u.width=this.assetData.w,u.height=this.assetData.h;var n=u.getContext("2d"),s=this.img.width,f=this.img.height,d=s/f,y=this.assetData.w/this.assetData.h,_,A,R=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;d>y&&R==="xMidYMid slice"||d<y&&R!=="xMidYMid slice"?(A=f,_=A*y):(_=s,A=_/y),n.drawImage(this.img,(s-_)/2,(f-A)/2,_,A,0,0,this.assetData.w,this.assetData.h),this.img=u}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(u,n,s){this.initElement(u,n,s)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(u){return new CVShapeElement(u,this.globalData,this)},CanvasRendererBase.prototype.createText=function(u){return new CVTextElement(u,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(u){return new CVImageElement(u,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(u){return new CVSolidElement(u,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(u){u[0]===1&&u[1]===0&&u[4]===0&&u[5]===1&&u[12]===0&&u[13]===0||this.canvasContext.transform(u[0],u[1],u[4],u[5],u[12],u[13])},CanvasRendererBase.prototype.ctxOpacity=function(u){this.canvasContext.globalAlpha*=u<0?0:u},CanvasRendererBase.prototype.ctxFillStyle=function(u){this.canvasContext.fillStyle=u},CanvasRendererBase.prototype.ctxStrokeStyle=function(u){this.canvasContext.strokeStyle=u},CanvasRendererBase.prototype.ctxLineWidth=function(u){this.canvasContext.lineWidth=u},CanvasRendererBase.prototype.ctxLineCap=function(u){this.canvasContext.lineCap=u},CanvasRendererBase.prototype.ctxLineJoin=function(u){this.canvasContext.lineJoin=u},CanvasRendererBase.prototype.ctxMiterLimit=function(u){this.canvasContext.miterLimit=u},CanvasRendererBase.prototype.ctxFill=function(u){this.canvasContext.fill(u)},CanvasRendererBase.prototype.ctxFillRect=function(u,n,s,f){this.canvasContext.fillRect(u,n,s,f)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(u){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}u&&(this.globalData.blendMode="source-over"),this.contextData.restore(u)},CanvasRendererBase.prototype.configAnimation=function(u){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var n=this.animationItem.container.style;n.width="100%",n.height="100%";var s="0px 0px 0px";n.transformOrigin=s,n.mozTransformOrigin=s,n.webkitTransformOrigin=s,n["-webkit-transform"]=s,n.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=u,this.layers=u.layers,this.transformCanvas={w:u.w,h:u.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(u,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(u.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(u,n){this.reset();var s,f;u?(s=u,f=n,this.canvasContext.canvas.width=s,this.canvasContext.canvas.height=f):(this.animationItem.wrapper&&this.animationItem.container?(s=this.animationItem.wrapper.offsetWidth,f=this.animationItem.wrapper.offsetHeight):(s=this.canvasContext.canvas.width,f=this.canvasContext.canvas.height),this.canvasContext.canvas.width=s*this.renderConfig.dpr,this.canvasContext.canvas.height=f*this.renderConfig.dpr);var d,y;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var _=this.renderConfig.preserveAspectRatio.split(" "),A=_[1]||"meet",R=_[0]||"xMidYMid",I=R.substr(0,4),G=R.substr(4);d=s/f,y=this.transformCanvas.w/this.transformCanvas.h,y>d&&A==="meet"||y<d&&A==="slice"?(this.transformCanvas.sx=s/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=s/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=f/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=f/(this.transformCanvas.h/this.renderConfig.dpr)),I==="xMid"&&(y<d&&A==="meet"||y>d&&A==="slice")?this.transformCanvas.tx=(s-this.transformCanvas.w*(f/this.transformCanvas.h))/2*this.renderConfig.dpr:I==="xMax"&&(y<d&&A==="meet"||y>d&&A==="slice")?this.transformCanvas.tx=(s-this.transformCanvas.w*(f/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,G==="YMid"&&(y>d&&A==="meet"||y<d&&A==="slice")?this.transformCanvas.ty=(f-this.transformCanvas.h*(s/this.transformCanvas.w))/2*this.renderConfig.dpr:G==="YMax"&&(y>d&&A==="meet"||y<d&&A==="slice")?this.transformCanvas.ty=(f-this.transformCanvas.h*(s/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=s/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=f/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var u,n=this.layers?this.layers.length:0;for(u=n-1;u>=0;u-=1)this.elements[u]&&this.elements[u].destroy&&this.elements[u].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(u,n){if(!(this.renderedFrame===u&&this.renderConfig.clearCanvas===!0&&!n||this.destroyed||u===-1)){this.renderedFrame=u,this.globalData.frameNum=u-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||n,this.globalData.projectInterface.currentFrame=u;var s,f=this.layers.length;for(this.completeLayers||this.checkLayers(u),s=f-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&this.elements[s].prepareFrame(u-this.layers[s].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),s=f-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&this.elements[s].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(u){var n=this.elements;if(!(n[u]||this.layers[u].ty===99)){var s=this.createItem(this.layers[u],this,this.globalData);n[u]=s,s.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var u=this.pendingElements.pop();u.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var u,n=15;for(u=0;u<n;u+=1){var s=new CanvasContext;this.stack[u]=s}this._length=n,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var u=this._length*2,n=0;for(n=this._length;n<u;n+=1)this.stack[n]=new CanvasContext;this._length=u},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(u){this.cArrPos-=1;var n=this.stack[this.cArrPos],s=n.transform,f,d=this.cTr.props;for(f=0;f<16;f+=1)d[f]=s[f];if(u){this.nativeContext.restore();var y=this.stack[this.cArrPos+1];this.appliedFillStyle=y.fillStyle,this.appliedStrokeStyle=y.strokeStyle,this.appliedLineWidth=y.lineWidth,this.appliedLineCap=y.lineCap,this.appliedLineJoin=y.lineJoin,this.appliedMiterLimit=y.miterLimit}this.nativeContext.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),(u||n.opacity!==-1&&this.currentOpacity!==n.opacity)&&(this.nativeContext.globalAlpha=n.opacity,this.currentOpacity=n.opacity),this.currentFillStyle=n.fillStyle,this.currentStrokeStyle=n.strokeStyle,this.currentLineWidth=n.lineWidth,this.currentLineCap=n.lineCap,this.currentLineJoin=n.lineJoin,this.currentMiterLimit=n.miterLimit},CVContextData.prototype.save=function(u){u&&this.nativeContext.save();var n=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var s=this.stack[this.cArrPos],f;for(f=0;f<16;f+=1)s.transform[f]=n[f];this.cArrPos+=1;var d=this.stack[this.cArrPos];d.opacity=s.opacity,d.fillStyle=s.fillStyle,d.strokeStyle=s.strokeStyle,d.lineWidth=s.lineWidth,d.lineCap=s.lineCap,d.lineJoin=s.lineJoin,d.miterLimit=s.miterLimit},CVContextData.prototype.setOpacity=function(u){this.stack[this.cArrPos].opacity=u},CVContextData.prototype.setContext=function(u){this.nativeContext=u},CVContextData.prototype.fillStyle=function(u){this.stack[this.cArrPos].fillStyle!==u&&(this.currentFillStyle=u,this.stack[this.cArrPos].fillStyle=u)},CVContextData.prototype.strokeStyle=function(u){this.stack[this.cArrPos].strokeStyle!==u&&(this.currentStrokeStyle=u,this.stack[this.cArrPos].strokeStyle=u)},CVContextData.prototype.lineWidth=function(u){this.stack[this.cArrPos].lineWidth!==u&&(this.currentLineWidth=u,this.stack[this.cArrPos].lineWidth=u)},CVContextData.prototype.lineCap=function(u){this.stack[this.cArrPos].lineCap!==u&&(this.currentLineCap=u,this.stack[this.cArrPos].lineCap=u)},CVContextData.prototype.lineJoin=function(u){this.stack[this.cArrPos].lineJoin!==u&&(this.currentLineJoin=u,this.stack[this.cArrPos].lineJoin=u)},CVContextData.prototype.miterLimit=function(u){this.stack[this.cArrPos].miterLimit!==u&&(this.currentMiterLimit=u,this.stack[this.cArrPos].miterLimit=u)},CVContextData.prototype.transform=function(u){this.transformMat.cloneFromProps(u);var n=this.cTr;this.transformMat.multiply(n),n.cloneFromProps(this.transformMat.props);var s=n.props;this.nativeContext.setTransform(s[0],s[1],s[4],s[5],s[12],s[13])},CVContextData.prototype.opacity=function(u){var n=this.stack[this.cArrPos].opacity;n*=u<0?0:u,this.stack[this.cArrPos].opacity!==n&&(this.currentOpacity!==u&&(this.nativeContext.globalAlpha=u,this.currentOpacity=u),this.stack[this.cArrPos].opacity=n)},CVContextData.prototype.fill=function(u){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(u)},CVContextData.prototype.fillRect=function(u,n,s,f){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(u,n,s,f)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(u,n,s){this.completeLayers=!1,this.layers=u.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(u,n,s),this.tm=u.tm?PropertyFactory.getProp(this,u.tm,0,n.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var u=this.canvasContext;u.beginPath(),u.moveTo(0,0),u.lineTo(this.data.w,0),u.lineTo(this.data.w,this.data.h),u.lineTo(0,this.data.h),u.lineTo(0,0),u.clip();var n,s=this.layers.length;for(n=s-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame()},CVCompElement.prototype.destroy=function(){var u,n=this.layers.length;for(u=n-1;u>=0;u-=1)this.elements[u]&&this.elements[u].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(u){return new CVCompElement(u,this.globalData,this)};function CanvasRenderer(u,n){this.animationItem=u,this.renderConfig={clearCanvas:n&&n.clearCanvas!==void 0?n.clearCanvas:!0,context:n&&n.context||null,progressiveLoad:n&&n.progressiveLoad||!1,preserveAspectRatio:n&&n.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:n&&n.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:n&&n.contentVisibility||"visible",className:n&&n.className||"",id:n&&n.id||"",runExpressions:!n||n.runExpressions===void 0||n.runExpressions},this.renderConfig.dpr=n&&n.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=n&&n.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(u){return new CVCompElement(u,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var n=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var s=this.finalTransform.mat.toCSS();n.transform=s,n.webkitTransform=s}this.finalTransform._opMdf&&(n.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(u,n,s){this.initElement(u,n,s)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var u;this.data.hasMask?(u=createNS("rect"),u.setAttribute("width",this.data.sw),u.setAttribute("height",this.data.sh),u.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(u=createTag("div"),u.style.width=this.data.sw+"px",u.style.height=this.data.sh+"px",u.style.backgroundColor=this.data.sc),this.layerElement.appendChild(u)};function HShapeElement(u,n,s){this.shapes=[],this.shapesData=u.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(u,n,s),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var u;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),u=this.svgElement;else{u=createNS("svg");var n=this.comp.data?this.comp.data:this.globalData.compSize;u.setAttribute("width",n.w),u.setAttribute("height",n.h),u.appendChild(this.shapesContainer),this.layerElement.appendChild(u)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=u},HShapeElement.prototype.getTransformedPoint=function(u,n){var s,f=u.length;for(s=0;s<f;s+=1)n=u[s].mProps.v.applyToPointArray(n[0],n[1],0);return n},HShapeElement.prototype.calculateShapeBoundingBox=function(u,n){var s=u.sh.v,f=u.transformers,d,y=s._length,_,A,R,I;if(!(y<=1)){for(d=0;d<y-1;d+=1)_=this.getTransformedPoint(f,s.v[d]),A=this.getTransformedPoint(f,s.o[d]),R=this.getTransformedPoint(f,s.i[d+1]),I=this.getTransformedPoint(f,s.v[d+1]),this.checkBounds(_,A,R,I,n);s.c&&(_=this.getTransformedPoint(f,s.v[d]),A=this.getTransformedPoint(f,s.o[d]),R=this.getTransformedPoint(f,s.i[0]),I=this.getTransformedPoint(f,s.v[0]),this.checkBounds(_,A,R,I,n))}},HShapeElement.prototype.checkBounds=function(u,n,s,f,d){this.getBoundsOfCurve(u,n,s,f);var y=this.shapeBoundingBox;d.x=bmMin(y.left,d.x),d.xMax=bmMax(y.right,d.xMax),d.y=bmMin(y.top,d.y),d.yMax=bmMax(y.bottom,d.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(u,n,s,f){for(var d=[[u[0],f[0]],[u[1],f[1]]],y,_,A,R,I,G,Y,q=0;q<2;++q)_=6*u[q]-12*n[q]+6*s[q],y=-3*u[q]+9*n[q]-9*s[q]+3*f[q],A=3*n[q]-3*u[q],_|=0,y|=0,A|=0,y===0&&_===0||(y===0?(R=-A/_,R>0&&R<1&&d[q].push(this.calculateF(R,u,n,s,f,q))):(I=_*_-4*A*y,I>=0&&(G=(-_+bmSqrt(I))/(2*y),G>0&&G<1&&d[q].push(this.calculateF(G,u,n,s,f,q)),Y=(-_-bmSqrt(I))/(2*y),Y>0&&Y<1&&d[q].push(this.calculateF(Y,u,n,s,f,q)))));this.shapeBoundingBox.left=bmMin.apply(null,d[0]),this.shapeBoundingBox.top=bmMin.apply(null,d[1]),this.shapeBoundingBox.right=bmMax.apply(null,d[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,d[1])},HShapeElement.prototype.calculateF=function(u,n,s,f,d,y){return bmPow(1-u,3)*n[y]+3*bmPow(1-u,2)*u*s[y]+3*(1-u)*bmPow(u,2)*f[y]+bmPow(u,3)*d[y]},HShapeElement.prototype.calculateBoundingBox=function(u,n){var s,f=u.length;for(s=0;s<f;s+=1)u[s]&&u[s].sh?this.calculateShapeBoundingBox(u[s],n):u[s]&&u[s].it?this.calculateBoundingBox(u[s].it,n):u[s]&&u[s].style&&u[s].w&&this.expandStrokeBoundingBox(u[s].w,n)},HShapeElement.prototype.expandStrokeBoundingBox=function(u,n){var s=0;if(u.keyframes){for(var f=0;f<u.keyframes.length;f+=1){var d=u.keyframes[f].s;d>s&&(s=d)}s*=u.mult}else s=u.v*u.mult;n.x-=s,n.xMax+=s,n.y-=s,n.yMax+=s},HShapeElement.prototype.currentBoxContains=function(u){return this.currentBBox.x<=u.x&&this.currentBBox.y<=u.y&&this.currentBBox.width+this.currentBBox.x>=u.x+u.width&&this.currentBBox.height+this.currentBBox.y>=u.y+u.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var u=this.tempBoundingBox,n=999999;if(u.x=n,u.xMax=-n,u.y=n,u.yMax=-n,this.calculateBoundingBox(this.itemsData,u),u.width=u.xMax<u.x?0:u.xMax-u.x,u.height=u.yMax<u.y?0:u.yMax-u.y,this.currentBoxContains(u))return;var s=!1;if(this.currentBBox.w!==u.width&&(this.currentBBox.w=u.width,this.shapeCont.setAttribute("width",u.width),s=!0),this.currentBBox.h!==u.height&&(this.currentBBox.h=u.height,this.shapeCont.setAttribute("height",u.height),s=!0),s||this.currentBBox.x!==u.x||this.currentBBox.y!==u.y){this.currentBBox.w=u.width,this.currentBBox.h=u.height,this.currentBBox.x=u.x,this.currentBBox.y=u.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var f=this.shapeCont.style,d="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";f.transform=d,f.webkitTransform=d}}};function HTextElement(u,n,s){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(u,n,s)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var u=createNS("g");this.maskedElement.appendChild(u),this.innerElem=u}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var u=this.textProperty.currentData;this.renderedLetters=createSizedArray(u.l?u.l.length:0);var n=this.innerElem.style,s=u.fc?this.buildColor(u.fc):"rgba(0,0,0,0)";n.fill=s,n.color=s,u.sc&&(n.stroke=this.buildColor(u.sc),n.strokeWidth=u.sw+"px");var f=this.globalData.fontManager.getFontByName(u.f);if(!this.globalData.fontManager.chars)if(n.fontSize=u.finalSize+"px",n.lineHeight=u.finalSize+"px",f.fClass)this.innerElem.className=f.fClass;else{n.fontFamily=f.fFamily;var d=u.fWeight,y=u.fStyle;n.fontStyle=y,n.fontWeight=d}var _,A,R=u.l;A=R.length;var I,G,Y,q=this.mHelper,K,Q="",ne=0;for(_=0;_<A;_+=1){if(this.globalData.fontManager.chars?(this.textPaths[ne]?I=this.textPaths[ne]:(I=createNS("path"),I.setAttribute("stroke-linecap",lineCapEnum[1]),I.setAttribute("stroke-linejoin",lineJoinEnum[2]),I.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[ne]?(G=this.textSpans[ne],Y=G.children[0]):(G=createTag("div"),G.style.lineHeight=0,Y=createNS("svg"),Y.appendChild(I),styleDiv(G)))):this.isMasked?I=this.textPaths[ne]?this.textPaths[ne]:createNS("text"):this.textSpans[ne]?(G=this.textSpans[ne],I=this.textPaths[ne]):(G=createTag("span"),styleDiv(G),I=createTag("span"),styleDiv(I),G.appendChild(I)),this.globalData.fontManager.chars){var te=this.globalData.fontManager.getCharData(u.finalText[_],f.fStyle,this.globalData.fontManager.getFontByName(u.f).fFamily),J;if(te?J=te.data:J=null,q.reset(),J&&J.shapes&&J.shapes.length&&(K=J.shapes[0].it,q.scale(u.finalSize/100,u.finalSize/100),Q=this.createPathShape(q,K),I.setAttribute("d",Q)),this.isMasked)this.innerElem.appendChild(I);else{if(this.innerElem.appendChild(G),J&&J.shapes){document.body.appendChild(Y);var ie=Y.getBBox();Y.setAttribute("width",ie.width+2),Y.setAttribute("height",ie.height+2),Y.setAttribute("viewBox",ie.x-1+" "+(ie.y-1)+" "+(ie.width+2)+" "+(ie.height+2));var re=Y.style,le="translate("+(ie.x-1)+"px,"+(ie.y-1)+"px)";re.transform=le,re.webkitTransform=le,R[_].yOffset=ie.y-1}else Y.setAttribute("width",1),Y.setAttribute("height",1);G.appendChild(Y)}}else if(I.textContent=R[_].val,I.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(I);else{this.innerElem.appendChild(G);var fe=I.style,pe="translate3d(0,"+-u.finalSize/1.2+"px,0)";fe.transform=pe,fe.webkitTransform=pe}this.isMasked?this.textSpans[ne]=I:this.textSpans[ne]=G,this.textSpans[ne].style.display="block",this.textPaths[ne]=I,ne+=1}for(;ne<this.textSpans.length;)this.textSpans[ne].style.display="none",ne+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var u;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),u=this.svgElement.style;var n="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";u.transform=n,u.webkitTransform=n}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var s,f,d=0,y=this.textAnimator.renderedLetters,_=this.textProperty.currentData.l;f=_.length;var A,R,I;for(s=0;s<f;s+=1)_[s].n?d+=1:(R=this.textSpans[s],I=this.textPaths[s],A=y[d],d+=1,A._mdf.m&&(this.isMasked?R.setAttribute("transform",A.m):(R.style.webkitTransform=A.m,R.style.transform=A.m)),R.style.opacity=A.o,A.sw&&A._mdf.sw&&I.setAttribute("stroke-width",A.sw),A.sc&&A._mdf.sc&&I.setAttribute("stroke",A.sc),A.fc&&A._mdf.fc&&(I.setAttribute("fill",A.fc),I.style.color=A.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var G=this.innerElem.getBBox();this.currentBBox.w!==G.width&&(this.currentBBox.w=G.width,this.svgElement.setAttribute("width",G.width)),this.currentBBox.h!==G.height&&(this.currentBBox.h=G.height,this.svgElement.setAttribute("height",G.height));var Y=1;if(this.currentBBox.w!==G.width+Y*2||this.currentBBox.h!==G.height+Y*2||this.currentBBox.x!==G.x-Y||this.currentBBox.y!==G.y-Y){this.currentBBox.w=G.width+Y*2,this.currentBBox.h=G.height+Y*2,this.currentBBox.x=G.x-Y,this.currentBBox.y=G.y-Y,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),u=this.svgElement.style;var q="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";u.transform=q,u.webkitTransform=q}}}};function HCameraElement(u,n,s){this.initFrame(),this.initBaseData(u,n,s),this.initHierarchy();var f=PropertyFactory.getProp;if(this.pe=f(this,u.pe,0,0,this),u.ks.p.s?(this.px=f(this,u.ks.p.x,1,0,this),this.py=f(this,u.ks.p.y,1,0,this),this.pz=f(this,u.ks.p.z,1,0,this)):this.p=f(this,u.ks.p,1,0,this),u.ks.a&&(this.a=f(this,u.ks.a,1,0,this)),u.ks.or.k.length&&u.ks.or.k[0].to){var d,y=u.ks.or.k.length;for(d=0;d<y;d+=1)u.ks.or.k[d].to=null,u.ks.or.k[d].ti=null}this.or=f(this,u.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=f(this,u.ks.rx,0,degToRads,this),this.ry=f(this,u.ks.ry,0,degToRads,this),this.rz=f(this,u.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var u,n=this.comp.threeDElements.length,s,f,d;for(u=0;u<n;u+=1)if(s=this.comp.threeDElements[u],s.type==="3d"){f=s.perspectiveElem.style,d=s.container.style;var y=this.pe.v+"px",_="0px 0px 0px",A="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";f.perspective=y,f.webkitPerspective=y,d.transformOrigin=_,d.mozTransformOrigin=_,d.webkitTransformOrigin=_,f.transform=A,f.webkitTransform=A}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var u=this._isFirstFrame,n,s;if(this.hierarchy)for(s=this.hierarchy.length,n=0;n<s;n+=1)u=this.hierarchy[n].finalTransform.mProp._mdf||u;if(u||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(s=this.hierarchy.length-1,n=s;n>=0;n-=1){var f=this.hierarchy[n].finalTransform.mProp;this.mat.translate(-f.p.v[0],-f.p.v[1],f.p.v[2]),this.mat.rotateX(-f.or.v[0]).rotateY(-f.or.v[1]).rotateZ(f.or.v[2]),this.mat.rotateX(-f.rx.v).rotateY(-f.ry.v).rotateZ(f.rz.v),this.mat.scale(1/f.s.v[0],1/f.s.v[1],1/f.s.v[2]),this.mat.translate(f.a.v[0],f.a.v[1],f.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var d;this.p?d=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:d=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var y=Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)),_=[d[0]/y,d[1]/y,d[2]/y],A=Math.sqrt(_[2]*_[2]+_[0]*_[0]),R=Math.atan2(_[1],A),I=Math.atan2(_[0],-_[2]);this.mat.rotateY(I).rotateX(-R)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var G=!this._prevMat.equals(this.mat);if((G||this.pe._mdf)&&this.comp.threeDElements){s=this.comp.threeDElements.length;var Y,q,K;for(n=0;n<s;n+=1)if(Y=this.comp.threeDElements[n],Y.type==="3d"){if(G){var Q=this.mat.toCSS();K=Y.container.style,K.transform=Q,K.webkitTransform=Q}this.pe._mdf&&(q=Y.perspectiveElem.style,q.perspective=this.pe.v+"px",q.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(u){this.prepareProperties(u,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(u,n,s){this.assetData=n.getAssetData(u.refId),this.initElement(u,n,s)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var u=this.globalData.getAssetsPath(this.assetData),n=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",u),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(n),n.crossOrigin="anonymous",n.src=u,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(u,n){this.animationItem=u,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:n&&n.className||"",imagePreserveAspectRatio:n&&n.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(n&&n.hideOnTransparent===!1),filterSize:{width:n&&n.filterSize&&n.filterSize.width||"400%",height:n&&n.filterSize&&n.filterSize.height||"400%",x:n&&n.filterSize&&n.filterSize.x||"-100%",y:n&&n.filterSize&&n.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var u=this.pendingElements.pop();u.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(u,n){var s=u.getBaseElement();if(s){var f=this.layers[n];if(!f.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(s,n);else{for(var d=0,y,_,A;d<n;)this.elements[d]&&this.elements[d]!==!0&&this.elements[d].getBaseElement&&(_=this.elements[d],A=this.layers[d].ddd?this.getThreeDContainerByPos(d):_.getBaseElement(),y=A||y),d+=1;y?(!f.ddd||!this.supports3d)&&this.layerElement.insertBefore(s,y):(!f.ddd||!this.supports3d)&&this.layerElement.appendChild(s)}else this.addTo3dContainer(s,n)}},HybridRendererBase.prototype.createShape=function(u){return this.supports3d?new HShapeElement(u,this.globalData,this):new SVGShapeElement(u,this.globalData,this)},HybridRendererBase.prototype.createText=function(u){return this.supports3d?new HTextElement(u,this.globalData,this):new SVGTextLottieElement(u,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(u){return this.camera=new HCameraElement(u,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(u){return this.supports3d?new HImageElement(u,this.globalData,this):new IImageElement(u,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(u){return this.supports3d?new HSolidElement(u,this.globalData,this):new ISolidElement(u,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(u){for(var n=0,s=this.threeDElements.length;n<s;){if(this.threeDElements[n].startPos<=u&&this.threeDElements[n].endPos>=u)return this.threeDElements[n].perspectiveElem;n+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(u,n){var s=createTag("div"),f,d;styleDiv(s);var y=createTag("div");if(styleDiv(y),n==="3d"){f=s.style,f.width=this.globalData.compSize.w+"px",f.height=this.globalData.compSize.h+"px";var _="50% 50%";f.webkitTransformOrigin=_,f.mozTransformOrigin=_,f.transformOrigin=_,d=y.style;var A="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";d.transform=A,d.webkitTransform=A}s.appendChild(y);var R={container:y,perspectiveElem:s,startPos:u,endPos:u,type:n};return this.threeDElements.push(R),R},HybridRendererBase.prototype.build3dContainers=function(){var u,n=this.layers.length,s,f="";for(u=0;u<n;u+=1)this.layers[u].ddd&&this.layers[u].ty!==3?(f!=="3d"&&(f="3d",s=this.createThreeDContainer(u,"3d")),s.endPos=Math.max(s.endPos,u)):(f!=="2d"&&(f="2d",s=this.createThreeDContainer(u,"2d")),s.endPos=Math.max(s.endPos,u));for(n=this.threeDElements.length,u=n-1;u>=0;u-=1)this.resizerElem.appendChild(this.threeDElements[u].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(u,n){for(var s=0,f=this.threeDElements.length;s<f;){if(n<=this.threeDElements[s].endPos){for(var d=this.threeDElements[s].startPos,y;d<n;)this.elements[d]&&this.elements[d].getBaseElement&&(y=this.elements[d].getBaseElement()),d+=1;y?this.threeDElements[s].container.insertBefore(u,y):this.threeDElements[s].container.appendChild(u);break}s+=1}},HybridRendererBase.prototype.configAnimation=function(u){var n=createTag("div"),s=this.animationItem.wrapper,f=n.style;f.width=u.w+"px",f.height=u.h+"px",this.resizerElem=n,styleDiv(n),f.transformStyle="flat",f.mozTransformStyle="flat",f.webkitTransformStyle="flat",this.renderConfig.className&&n.setAttribute("class",this.renderConfig.className),s.appendChild(n),f.overflow="hidden";var d=createNS("svg");d.setAttribute("width","1"),d.setAttribute("height","1"),styleDiv(d),this.resizerElem.appendChild(d);var y=createNS("defs");d.appendChild(y),this.data=u,this.setupGlobalData(u,d),this.globalData.defs=y,this.layers=u.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var u,n=this.layers?this.layers.length:0;for(u=0;u<n;u+=1)this.elements[u]&&this.elements[u].destroy&&this.elements[u].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var u=this.animationItem.wrapper.offsetWidth,n=this.animationItem.wrapper.offsetHeight,s=u/n,f=this.globalData.compSize.w/this.globalData.compSize.h,d,y,_,A;f>s?(d=u/this.globalData.compSize.w,y=u/this.globalData.compSize.w,_=0,A=(n-this.globalData.compSize.h*(u/this.globalData.compSize.w))/2):(d=n/this.globalData.compSize.h,y=n/this.globalData.compSize.h,_=(u-this.globalData.compSize.w*(n/this.globalData.compSize.h))/2,A=0);var R=this.resizerElem.style;R.webkitTransform="matrix3d("+d+",0,0,0,0,"+y+",0,0,0,0,1,0,"+_+","+A+",0,1)",R.transform=R.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var u=this.globalData.compSize.w,n=this.globalData.compSize.h,s,f=this.threeDElements.length;for(s=0;s<f;s+=1){var d=this.threeDElements[s].perspectiveElem.style;d.webkitPerspective=Math.sqrt(Math.pow(u,2)+Math.pow(n,2))+"px",d.perspective=d.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(u){var n,s=u.length,f=createTag("div");for(n=0;n<s;n+=1)if(u[n].xt){var d=this.createComp(u[n],f,this.globalData.comp,null);d.initExpressions(),this.globalData.projectInterface.registerComposition(d)}};function HCompElement(u,n,s){this.layers=u.layers,this.supports3d=!u.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(u,n,s),this.tm=u.tm?PropertyFactory.getProp(this,u.tm,0,n.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(u,n){for(var s=0,f;s<n;)this.elements[s]&&this.elements[s].getBaseElement&&(f=this.elements[s].getBaseElement()),s+=1;f?this.layerElement.insertBefore(u,f):this.layerElement.appendChild(u)},HCompElement.prototype.createComp=function(u){return this.supports3d?new HCompElement(u,this.globalData,this):new SVGCompElement(u,this.globalData,this)};function HybridRenderer(u,n){this.animationItem=u,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:n&&n.className||"",imagePreserveAspectRatio:n&&n.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(n&&n.hideOnTransparent===!1),filterSize:{width:n&&n.filterSize&&n.filterSize.width||"400%",height:n&&n.filterSize&&n.filterSize.height||"400%",x:n&&n.filterSize&&n.filterSize.x||"-100%",y:n&&n.filterSize&&n.filterSize.y||"-100%"},runExpressions:!n||n.runExpressions===void 0||n.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(u){return this.supports3d?new HCompElement(u,this.globalData,this):new SVGCompElement(u,this.globalData,this)};var CompExpressionInterface=(function(){return function(u){function n(s){for(var f=0,d=u.layers.length;f<d;){if(u.layers[f].nm===s||u.layers[f].ind===s)return u.elements[f].layerInterface;f+=1}return null}return Object.defineProperty(n,"_name",{value:u.data.nm}),n.layer=n,n.pixelAspect=1,n.height=u.data.h||u.globalData.compSize.h,n.width=u.data.w||u.globalData.compSize.w,n.pixelAspect=1,n.frameDuration=1/u.globalData.frameRate,n.displayStartTime=0,n.numLayers=u.layers.length,n}})();function _typeof$2(u){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$2(u)}function seedRandom(u,n){var s=this,f=256,d=6,y=52,_="random",A=n.pow(f,d),R=n.pow(2,y),I=R*2,G=f-1,Y;function q(re,le,fe){var pe=[];le=le===!0?{entropy:!0}:le||{};var de=te(ne(le.entropy?[re,ie(u)]:re===null?J():re,3),pe),se=new K(pe),he=function(){for(var ve=se.g(d),Re=A,Ee=0;ve<R;)ve=(ve+Ee)*f,Re*=f,Ee=se.g(1);for(;ve>=I;)ve/=2,Re/=2,Ee>>>=1;return(ve+Ee)/Re};return he.int32=function(){return se.g(4)|0},he.quick=function(){return se.g(4)/4294967296},he.double=he,te(ie(se.S),u),(le.pass||fe||function(Se,ve,Re,Ee){return Ee&&(Ee.S&&Q(Ee,se),Se.state=function(){return Q(se,{})}),Re?(n[_]=Se,ve):Se})(he,de,"global"in le?le.global:this==n,le.state)}n["seed"+_]=q;function K(re){var le,fe=re.length,pe=this,de=0,se=pe.i=pe.j=0,he=pe.S=[];for(fe||(re=[fe++]);de<f;)he[de]=de++;for(de=0;de<f;de++)he[de]=he[se=G&se+re[de%fe]+(le=he[de])],he[se]=le;pe.g=function(Se){for(var ve,Re=0,Ee=pe.i,Oe=pe.j,Ne=pe.S;Se--;)ve=Ne[Ee=G&Ee+1],Re=Re*f+Ne[G&(Ne[Ee]=Ne[Oe=G&Oe+ve])+(Ne[Oe]=ve)];return pe.i=Ee,pe.j=Oe,Re}}function Q(re,le){return le.i=re.i,le.j=re.j,le.S=re.S.slice(),le}function ne(re,le){var fe=[],pe=_typeof$2(re),de;if(le&&pe=="object")for(de in re)try{fe.push(ne(re[de],le-1))}catch{}return fe.length?fe:pe=="string"?re:re+"\0"}function te(re,le){for(var fe=re+"",pe,de=0;de<fe.length;)le[G&de]=G&(pe^=le[G&de]*19)+fe.charCodeAt(de++);return ie(le)}function J(){try{var re=new Uint8Array(f);return(s.crypto||s.msCrypto).getRandomValues(re),ie(re)}catch{var le=s.navigator,fe=le&&le.plugins;return[+new Date,s,fe,s.screen,ie(u)]}}function ie(re){return String.fromCharCode.apply(0,re)}te(n.random(),u)}function initialize$2(u){seedRandom([],u)}var propTypes={SHAPE:"shape"};function _typeof$1(u){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(u)}var ExpressionManager=(function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(u){return u.constructor===Array||u.constructor===Float32Array}function isNumerable(u,n){return u==="number"||n instanceof Number||u==="boolean"||u==="string"}function $bm_neg(u){var n=_typeof$1(u);if(n==="number"||u instanceof Number||n==="boolean")return-u;if($bm_isInstanceOfArray(u)){var s,f=u.length,d=[];for(s=0;s<f;s+=1)d[s]=-u[s];return d}return u.propType?u.v:-u}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(u,n){var s=_typeof$1(u),f=_typeof$1(n);if(isNumerable(s,u)&&isNumerable(f,n)||s==="string"||f==="string")return u+n;if($bm_isInstanceOfArray(u)&&isNumerable(f,n))return u=u.slice(0),u[0]+=n,u;if(isNumerable(s,u)&&$bm_isInstanceOfArray(n))return n=n.slice(0),n[0]=u+n[0],n;if($bm_isInstanceOfArray(u)&&$bm_isInstanceOfArray(n)){for(var d=0,y=u.length,_=n.length,A=[];d<y||d<_;)(typeof u[d]=="number"||u[d]instanceof Number)&&(typeof n[d]=="number"||n[d]instanceof Number)?A[d]=u[d]+n[d]:A[d]=n[d]===void 0?u[d]:u[d]||n[d],d+=1;return A}return 0}var add=sum;function sub(u,n){var s=_typeof$1(u),f=_typeof$1(n);if(isNumerable(s,u)&&isNumerable(f,n))return s==="string"&&(u=parseInt(u,10)),f==="string"&&(n=parseInt(n,10)),u-n;if($bm_isInstanceOfArray(u)&&isNumerable(f,n))return u=u.slice(0),u[0]-=n,u;if(isNumerable(s,u)&&$bm_isInstanceOfArray(n))return n=n.slice(0),n[0]=u-n[0],n;if($bm_isInstanceOfArray(u)&&$bm_isInstanceOfArray(n)){for(var d=0,y=u.length,_=n.length,A=[];d<y||d<_;)(typeof u[d]=="number"||u[d]instanceof Number)&&(typeof n[d]=="number"||n[d]instanceof Number)?A[d]=u[d]-n[d]:A[d]=n[d]===void 0?u[d]:u[d]||n[d],d+=1;return A}return 0}function mul(u,n){var s=_typeof$1(u),f=_typeof$1(n),d;if(isNumerable(s,u)&&isNumerable(f,n))return u*n;var y,_;if($bm_isInstanceOfArray(u)&&isNumerable(f,n)){for(_=u.length,d=createTypedArray("float32",_),y=0;y<_;y+=1)d[y]=u[y]*n;return d}if(isNumerable(s,u)&&$bm_isInstanceOfArray(n)){for(_=n.length,d=createTypedArray("float32",_),y=0;y<_;y+=1)d[y]=u*n[y];return d}return 0}function div(u,n){var s=_typeof$1(u),f=_typeof$1(n),d;if(isNumerable(s,u)&&isNumerable(f,n))return u/n;var y,_;if($bm_isInstanceOfArray(u)&&isNumerable(f,n)){for(_=u.length,d=createTypedArray("float32",_),y=0;y<_;y+=1)d[y]=u[y]/n;return d}if(isNumerable(s,u)&&$bm_isInstanceOfArray(n)){for(_=n.length,d=createTypedArray("float32",_),y=0;y<_;y+=1)d[y]=u/n[y];return d}return 0}function mod(u,n){return typeof u=="string"&&(u=parseInt(u,10)),typeof n=="string"&&(n=parseInt(n,10)),u%n}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(u,n,s){if(n>s){var f=s;s=n,n=f}return Math.min(Math.max(u,n),s)}function radiansToDegrees(u){return u/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(u){return u*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(u,n){if(typeof u=="number"||u instanceof Number)return n=n||0,Math.abs(u-n);n||(n=helperLengthArray);var s,f=Math.min(u.length,n.length),d=0;for(s=0;s<f;s+=1)d+=Math.pow(n[s]-u[s],2);return Math.sqrt(d)}function normalize(u){return div(u,length(u))}function rgbToHsl(u){var n=u[0],s=u[1],f=u[2],d=Math.max(n,s,f),y=Math.min(n,s,f),_,A,R=(d+y)/2;if(d===y)_=0,A=0;else{var I=d-y;switch(A=R>.5?I/(2-d-y):I/(d+y),d){case n:_=(s-f)/I+(s<f?6:0);break;case s:_=(f-n)/I+2;break;case f:_=(n-s)/I+4;break}_/=6}return[_,A,R,u[3]]}function hue2rgb(u,n,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?u+(n-u)*6*s:s<1/2?n:s<2/3?u+(n-u)*(2/3-s)*6:u}function hslToRgb(u){var n=u[0],s=u[1],f=u[2],d,y,_;if(s===0)d=f,_=f,y=f;else{var A=f<.5?f*(1+s):f+s-f*s,R=2*f-A;d=hue2rgb(R,A,n+1/3),y=hue2rgb(R,A,n),_=hue2rgb(R,A,n-1/3)}return[d,y,_,u[3]]}function linear(u,n,s,f,d){if((f===void 0||d===void 0)&&(f=n,d=s,n=0,s=1),s<n){var y=s;s=n,n=y}if(u<=n)return f;if(u>=s)return d;var _=s===n?0:(u-n)/(s-n);if(!f.length)return f+(d-f)*_;var A,R=f.length,I=createTypedArray("float32",R);for(A=0;A<R;A+=1)I[A]=f[A]+(d[A]-f[A])*_;return I}function random(u,n){if(n===void 0&&(u===void 0?(u=0,n=1):(n=u,u=void 0)),n.length){var s,f=n.length;u||(u=createTypedArray("float32",f));var d=createTypedArray("float32",f),y=BMMath.random();for(s=0;s<f;s+=1)d[s]=u[s]+y*(n[s]-u[s]);return d}u===void 0&&(u=0);var _=BMMath.random();return u+_*(n-u)}function createPath(u,n,s,f){var d,y=u.length,_=shapePool.newElement();_.setPathData(!!f,y);var A=[0,0],R,I;for(d=0;d<y;d+=1)R=n&&n[d]?n[d]:A,I=s&&s[d]?s[d]:A,_.setTripleAt(u[d][0],u[d][1],I[0]+u[d][0],I[1]+u[d][1],R[0]+u[d][0],R[1]+u[d][1],d,!0);return _}function initiateExpression(elem,data,property){function noOp(u){return u}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty._name=elem.data.nm,thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function u(n,s){var f,d,y=this.pv.length?this.pv.length:1,_=createTypedArray("float32",y);n=5;var A=Math.floor(time*n);for(f=0,d=0;f<A;){for(d=0;d<y;d+=1)_[d]+=-s+s*2*BMMath.random();f+=1}var R=time*n,I=R-Math.floor(R),G=createTypedArray("float32",y);if(y>1){for(d=0;d<y;d+=1)G[d]=this.pv[d]+_[d]+(-s+s*2*BMMath.random())*I;return G}return this.pv+_[0]+(-s+s*2*BMMath.random())*I}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(u,n){return loopIn(u,n,!0)}function loopOutDuration(u,n){return loopOut(u,n,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(u,n){var s=[n[0]-u[0],n[1]-u[1],n[2]-u[2]],f=Math.atan2(s[0],Math.sqrt(s[1]*s[1]+s[2]*s[2]))/degToRads,d=-Math.atan2(s[1],s[2])/degToRads;return[d,f,0]}function easeOut(u,n,s,f,d){return applyEase(easeOutBez,u,n,s,f,d)}function easeIn(u,n,s,f,d){return applyEase(easeInBez,u,n,s,f,d)}function ease(u,n,s,f,d){return applyEase(easeInOutBez,u,n,s,f,d)}function applyEase(u,n,s,f,d,y){d===void 0?(d=s,y=f):n=(n-s)/(f-s),n>1?n=1:n<0&&(n=0);var _=u(n);if($bm_isInstanceOfArray(d)){var A,R=d.length,I=createTypedArray("float32",R);for(A=0;A<R;A+=1)I[A]=(y[A]-d[A])*_+d[A];return I}return(y-d)*_+d}function nearestKey(u){var n,s=data.k.length,f,d;if(!data.k.length||typeof data.k[0]=="number")f=0,d=0;else if(f=-1,u*=elem.comp.globalData.frameRate,u<data.k[0].t)f=1,d=data.k[0].t;else{for(n=0;n<s-1;n+=1)if(u===data.k[n].t){f=n+1,d=data.k[n].t;break}else if(u>data.k[n].t&&u<data.k[n+1].t){u-data.k[n].t>data.k[n+1].t-u?(f=n+2,d=data.k[n+1].t):(f=n+1,d=data.k[n].t);break}f===-1&&(f=n+1,d=data.k[n].t)}var y={};return y.index=f,y.time=d/elem.comp.globalData.frameRate,y}function key(u){var n,s,f;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+u);u-=1,n={time:data.k[u].t/elem.comp.globalData.frameRate,value:[]};var d=Object.prototype.hasOwnProperty.call(data.k[u],"s")?data.k[u].s:data.k[u-1].e;for(f=d.length,s=0;s<f;s+=1)n[s]=d[s],n.value[s]=d[s];return n}function framesToTime(u,n){return n||(n=elem.comp.globalData.frameRate),u/n}function timeToFrames(u,n){return!u&&u!==0&&(u=time),n||(n=elem.comp.globalData.frameRate),u*n}function seedRandom(u){BMMath.seedrandom(randSeed+u)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(u,n){return typeof value=="string"?n===void 0?value.substring(u):value.substring(u,n):""}function substr(u,n){return typeof value=="string"?n===void 0?value.substr(u):value.substr(u,n):""}function posterizeTime(u){time=u===0?0:Math.floor(time*u)/u,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(u){return value=u,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob})(),Expressions=(function(){var u={};u.initExpressions=n,u.resetFrame=ExpressionManager.resetFrame;function n(s){var f=0,d=[];function y(){f+=1}function _(){f-=1,f===0&&R()}function A(I){d.indexOf(I)===-1&&d.push(I)}function R(){var I,G=d.length;for(I=0;I<G;I+=1)d[I].release();d.length=0}s.renderer.compInterface=CompExpressionInterface(s.renderer),s.renderer.globalData.projectInterface.registerComposition(s.renderer),s.renderer.globalData.pushExpression=y,s.renderer.globalData.popExpression=_,s.renderer.globalData.registerExpressionProperty=A}return u})(),MaskManagerInterface=(function(){function u(s,f){this._mask=s,this._data=f}Object.defineProperty(u.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(u.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var n=function(f){var d=createSizedArray(f.viewData.length),y,_=f.viewData.length;for(y=0;y<_;y+=1)d[y]=new u(f.viewData[y],f.masksProperties[y]);var A=function(I){for(y=0;y<_;){if(f.masksProperties[y].nm===I)return d[y];y+=1}return null};return A};return n})(),ExpressionPropertyInterface=(function(){var u={pv:0,v:0,mult:1},n={pv:[0,0,0],v:[0,0,0],mult:1};function s(_,A,R){Object.defineProperty(_,"velocity",{get:function(){return A.getVelocityAtTime(A.comp.currentFrame)}}),_.numKeys=A.keyframes?A.keyframes.length:0,_.key=function(I){if(!_.numKeys)return 0;var G="";"s"in A.keyframes[I-1]?G=A.keyframes[I-1].s:"e"in A.keyframes[I-2]?G=A.keyframes[I-2].e:G=A.keyframes[I-2].s;var Y=R==="unidimensional"?new Number(G):Object.assign({},G);return Y.time=A.keyframes[I-1].t/A.elem.comp.globalData.frameRate,Y.value=R==="unidimensional"?G[0]:G,Y},_.valueAtTime=A.getValueAtTime,_.speedAtTime=A.getSpeedAtTime,_.velocityAtTime=A.getVelocityAtTime,_.propertyGroup=A.propertyGroup}function f(_){(!_||!("pv"in _))&&(_=u);var A=1/_.mult,R=_.pv*A,I=new Number(R);return I.value=R,s(I,_,"unidimensional"),function(){return _.k&&_.getValue(),R=_.v*A,I.value!==R&&(I=new Number(R),I.value=R,I[0]=R,s(I,_,"unidimensional")),I}}function d(_){(!_||!("pv"in _))&&(_=n);var A=1/_.mult,R=_.data&&_.data.l||_.pv.length,I=createTypedArray("float32",R),G=createTypedArray("float32",R);return I.value=G,s(I,_,"multidimensional"),function(){_.k&&_.getValue();for(var Y=0;Y<R;Y+=1)G[Y]=_.v[Y]*A,I[Y]=G[Y];return I}}function y(){return u}return function(_){return _?_.propType==="unidimensional"?f(_):d(_):y}})(),TransformExpressionInterface=(function(){return function(u){function n(_){switch(_){case"scale":case"Scale":case"ADBE Scale":case 6:return n.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return n.rotation;case"ADBE Rotate X":return n.xRotation;case"ADBE Rotate Y":return n.yRotation;case"position":case"Position":case"ADBE Position":case 2:return n.position;case"ADBE Position_0":return n.xPosition;case"ADBE Position_1":return n.yPosition;case"ADBE Position_2":return n.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return n.anchorPoint;case"opacity":case"Opacity":case 11:return n.opacity;default:return null}}Object.defineProperty(n,"rotation",{get:ExpressionPropertyInterface(u.r||u.rz)}),Object.defineProperty(n,"zRotation",{get:ExpressionPropertyInterface(u.rz||u.r)}),Object.defineProperty(n,"xRotation",{get:ExpressionPropertyInterface(u.rx)}),Object.defineProperty(n,"yRotation",{get:ExpressionPropertyInterface(u.ry)}),Object.defineProperty(n,"scale",{get:ExpressionPropertyInterface(u.s)});var s,f,d,y;return u.p?y=ExpressionPropertyInterface(u.p):(s=ExpressionPropertyInterface(u.px),f=ExpressionPropertyInterface(u.py),u.pz&&(d=ExpressionPropertyInterface(u.pz))),Object.defineProperty(n,"position",{get:function(){return u.p?y():[s(),f(),d?d():0]}}),Object.defineProperty(n,"xPosition",{get:ExpressionPropertyInterface(u.px)}),Object.defineProperty(n,"yPosition",{get:ExpressionPropertyInterface(u.py)}),Object.defineProperty(n,"zPosition",{get:ExpressionPropertyInterface(u.pz)}),Object.defineProperty(n,"anchorPoint",{get:ExpressionPropertyInterface(u.a)}),Object.defineProperty(n,"opacity",{get:ExpressionPropertyInterface(u.o)}),Object.defineProperty(n,"skew",{get:ExpressionPropertyInterface(u.sk)}),Object.defineProperty(n,"skewAxis",{get:ExpressionPropertyInterface(u.sa)}),Object.defineProperty(n,"orientation",{get:ExpressionPropertyInterface(u.or)}),n}})(),LayerExpressionInterface=(function(){function u(I){var G=new Matrix;if(I!==void 0){var Y=this._elem.finalTransform.mProp.getValueAtTime(I);Y.clone(G)}else{var q=this._elem.finalTransform.mProp;q.applyToMatrix(G)}return G}function n(I,G){var Y=this.getMatrix(G);return Y.props[12]=0,Y.props[13]=0,Y.props[14]=0,this.applyPoint(Y,I)}function s(I,G){var Y=this.getMatrix(G);return this.applyPoint(Y,I)}function f(I,G){var Y=this.getMatrix(G);return Y.props[12]=0,Y.props[13]=0,Y.props[14]=0,this.invertPoint(Y,I)}function d(I,G){var Y=this.getMatrix(G);return this.invertPoint(Y,I)}function y(I,G){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Y,q=this._elem.hierarchy.length;for(Y=0;Y<q;Y+=1)this._elem.hierarchy[Y].finalTransform.mProp.applyToMatrix(I)}return I.applyToPointArray(G[0],G[1],G[2]||0)}function _(I,G){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Y,q=this._elem.hierarchy.length;for(Y=0;Y<q;Y+=1)this._elem.hierarchy[Y].finalTransform.mProp.applyToMatrix(I)}return I.inversePoint(G)}function A(I){var G=new Matrix;if(G.reset(),this._elem.finalTransform.mProp.applyToMatrix(G),this._elem.hierarchy&&this._elem.hierarchy.length){var Y,q=this._elem.hierarchy.length;for(Y=0;Y<q;Y+=1)this._elem.hierarchy[Y].finalTransform.mProp.applyToMatrix(G);return G.inversePoint(I)}return G.inversePoint(I)}function R(){return[1,1,1,1]}return function(I){var G;function Y(ne){K.mask=new MaskManagerInterface(ne,I)}function q(ne){K.effect=ne}function K(ne){switch(ne){case"ADBE Root Vectors Group":case"Contents":case 2:return K.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return G;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return K.effect;case"ADBE Text Properties":return K.textInterface;default:return null}}K.getMatrix=u,K.invertPoint=_,K.applyPoint=y,K.toWorld=s,K.toWorldVec=n,K.fromWorld=d,K.fromWorldVec=f,K.toComp=s,K.fromComp=A,K.sampleImage=R,K.sourceRectAtTime=I.sourceRectAtTime.bind(I),K._elem=I,G=TransformExpressionInterface(I.finalTransform.mProp);var Q=getDescriptor(G,"anchorPoint");return Object.defineProperties(K,{hasParent:{get:function(){return I.hierarchy.length}},parent:{get:function(){return I.hierarchy[0].layerInterface}},rotation:getDescriptor(G,"rotation"),scale:getDescriptor(G,"scale"),position:getDescriptor(G,"position"),opacity:getDescriptor(G,"opacity"),anchorPoint:Q,anchor_point:Q,transform:{get:function(){return G}},active:{get:function(){return I.isInRange}}}),K.startTime=I.data.st,K.index=I.data.ind,K.source=I.data.refId,K.height=I.data.ty===0?I.data.h:100,K.width=I.data.ty===0?I.data.w:100,K.inPoint=I.data.ip/I.comp.globalData.frameRate,K.outPoint=I.data.op/I.comp.globalData.frameRate,K._name=I.data.nm,K.registerMaskInterface=Y,K.registerEffectsInterface=q,K}})(),propertyGroupFactory=(function(){return function(u,n){return function(s){return s=s===void 0?1:s,s<=0?u:n(s-1)}}})(),PropertyInterface=(function(){return function(u,n){var s={_name:u};function f(d){return d=d===void 0?1:d,d<=0?s:n(d-1)}return f}})(),EffectsExpressionInterface=(function(){var u={createEffectsInterface:n};function n(d,y){if(d.effectsManager){var _=[],A=d.data.ef,R,I=d.effectsManager.effectElements.length;for(R=0;R<I;R+=1)_.push(s(A[R],d.effectsManager.effectElements[R],y,d));var G=d.data.ef||[],Y=function(K){for(R=0,I=G.length;R<I;){if(K===G[R].nm||K===G[R].mn||K===G[R].ix)return _[R];R+=1}return null};return Object.defineProperty(Y,"numProperties",{get:function(){return G.length}}),Y}return null}function s(d,y,_,A){function R(K){for(var Q=d.ef,ne=0,te=Q.length;ne<te;){if(K===Q[ne].nm||K===Q[ne].mn||K===Q[ne].ix)return Q[ne].ty===5?G[ne]:G[ne]();ne+=1}throw new Error}var I=propertyGroupFactory(R,_),G=[],Y,q=d.ef.length;for(Y=0;Y<q;Y+=1)d.ef[Y].ty===5?G.push(s(d.ef[Y],y.effectElements[Y],y.effectElements[Y].propertyGroup,A)):G.push(f(y.effectElements[Y],d.ef[Y].ty,A,I));return d.mn==="ADBE Color Control"&&Object.defineProperty(R,"color",{get:function(){return G[0]()}}),Object.defineProperties(R,{numProperties:{get:function(){return d.np}},_name:{value:d.nm},propertyGroup:{value:I}}),R.enabled=d.en!==0,R.active=R.enabled,R}function f(d,y,_,A){var R=ExpressionPropertyInterface(d.p);function I(){return y===10?_.comp.compInterface(d.p.v):R()}return d.p.setGroupProperty&&d.p.setGroupProperty(PropertyInterface("",A)),I}return u})(),ShapePathInterface=(function(){return function(n,s,f){var d=s.sh;function y(A){return A==="Shape"||A==="shape"||A==="Path"||A==="path"||A==="ADBE Vector Shape"||A===2?y.path:null}var _=propertyGroupFactory(y,f);return d.setGroupProperty(PropertyInterface("Path",_)),Object.defineProperties(y,{path:{get:function(){return d.k&&d.getValue(),d}},shape:{get:function(){return d.k&&d.getValue(),d}},_name:{value:n.nm},ix:{value:n.ix},propertyIndex:{value:n.ix},mn:{value:n.mn},propertyGroup:{value:f}}),y}})(),ShapeExpressionInterface=(function(){function u(Q,ne,te){var J=[],ie,re=Q?Q.length:0;for(ie=0;ie<re;ie+=1)Q[ie].ty==="gr"?J.push(s(Q[ie],ne[ie],te)):Q[ie].ty==="fl"?J.push(f(Q[ie],ne[ie],te)):Q[ie].ty==="st"?J.push(_(Q[ie],ne[ie],te)):Q[ie].ty==="tm"?J.push(A(Q[ie],ne[ie],te)):Q[ie].ty==="tr"||(Q[ie].ty==="el"?J.push(I(Q[ie],ne[ie],te)):Q[ie].ty==="sr"?J.push(G(Q[ie],ne[ie],te)):Q[ie].ty==="sh"?J.push(ShapePathInterface(Q[ie],ne[ie],te)):Q[ie].ty==="rc"?J.push(Y(Q[ie],ne[ie],te)):Q[ie].ty==="rd"?J.push(q(Q[ie],ne[ie],te)):Q[ie].ty==="rp"?J.push(K(Q[ie],ne[ie],te)):Q[ie].ty==="gf"?J.push(d(Q[ie],ne[ie],te)):J.push(y(Q[ie],ne[ie])));return J}function n(Q,ne,te){var J,ie=function(fe){for(var pe=0,de=J.length;pe<de;){if(J[pe]._name===fe||J[pe].mn===fe||J[pe].propertyIndex===fe||J[pe].ix===fe||J[pe].ind===fe)return J[pe];pe+=1}return typeof fe=="number"?J[fe-1]:null};ie.propertyGroup=propertyGroupFactory(ie,te),J=u(Q.it,ne.it,ie.propertyGroup),ie.numProperties=J.length;var re=R(Q.it[Q.it.length-1],ne.it[ne.it.length-1],ie.propertyGroup);return ie.transform=re,ie.propertyIndex=Q.cix,ie._name=Q.nm,ie}function s(Q,ne,te){var J=function(fe){switch(fe){case"ADBE Vectors Group":case"Contents":case 2:return J.content;default:return J.transform}};J.propertyGroup=propertyGroupFactory(J,te);var ie=n(Q,ne,J.propertyGroup),re=R(Q.it[Q.it.length-1],ne.it[ne.it.length-1],J.propertyGroup);return J.content=ie,J.transform=re,Object.defineProperty(J,"_name",{get:function(){return Q.nm}}),J.numProperties=Q.np,J.propertyIndex=Q.ix,J.nm=Q.nm,J.mn=Q.mn,J}function f(Q,ne,te){function J(ie){return ie==="Color"||ie==="color"?J.color:ie==="Opacity"||ie==="opacity"?J.opacity:null}return Object.defineProperties(J,{color:{get:ExpressionPropertyInterface(ne.c)},opacity:{get:ExpressionPropertyInterface(ne.o)},_name:{value:Q.nm},mn:{value:Q.mn}}),ne.c.setGroupProperty(PropertyInterface("Color",te)),ne.o.setGroupProperty(PropertyInterface("Opacity",te)),J}function d(Q,ne,te){function J(ie){return ie==="Start Point"||ie==="start point"?J.startPoint:ie==="End Point"||ie==="end point"?J.endPoint:ie==="Opacity"||ie==="opacity"?J.opacity:null}return Object.defineProperties(J,{startPoint:{get:ExpressionPropertyInterface(ne.s)},endPoint:{get:ExpressionPropertyInterface(ne.e)},opacity:{get:ExpressionPropertyInterface(ne.o)},type:{get:function(){return"a"}},_name:{value:Q.nm},mn:{value:Q.mn}}),ne.s.setGroupProperty(PropertyInterface("Start Point",te)),ne.e.setGroupProperty(PropertyInterface("End Point",te)),ne.o.setGroupProperty(PropertyInterface("Opacity",te)),J}function y(){function Q(){return null}return Q}function _(Q,ne,te){var J=propertyGroupFactory(de,te),ie=propertyGroupFactory(pe,J);function re(se){Object.defineProperty(pe,Q.d[se].nm,{get:ExpressionPropertyInterface(ne.d.dataProps[se].p)})}var le,fe=Q.d?Q.d.length:0,pe={};for(le=0;le<fe;le+=1)re(le),ne.d.dataProps[le].p.setGroupProperty(ie);function de(se){return se==="Color"||se==="color"?de.color:se==="Opacity"||se==="opacity"?de.opacity:se==="Stroke Width"||se==="stroke width"?de.strokeWidth:null}return Object.defineProperties(de,{color:{get:ExpressionPropertyInterface(ne.c)},opacity:{get:ExpressionPropertyInterface(ne.o)},strokeWidth:{get:ExpressionPropertyInterface(ne.w)},dash:{get:function(){return pe}},_name:{value:Q.nm},mn:{value:Q.mn}}),ne.c.setGroupProperty(PropertyInterface("Color",J)),ne.o.setGroupProperty(PropertyInterface("Opacity",J)),ne.w.setGroupProperty(PropertyInterface("Stroke Width",J)),de}function A(Q,ne,te){function J(re){return re===Q.e.ix||re==="End"||re==="end"?J.end:re===Q.s.ix?J.start:re===Q.o.ix?J.offset:null}var ie=propertyGroupFactory(J,te);return J.propertyIndex=Q.ix,ne.s.setGroupProperty(PropertyInterface("Start",ie)),ne.e.setGroupProperty(PropertyInterface("End",ie)),ne.o.setGroupProperty(PropertyInterface("Offset",ie)),J.propertyIndex=Q.ix,J.propertyGroup=te,Object.defineProperties(J,{start:{get:ExpressionPropertyInterface(ne.s)},end:{get:ExpressionPropertyInterface(ne.e)},offset:{get:ExpressionPropertyInterface(ne.o)},_name:{value:Q.nm}}),J.mn=Q.mn,J}function R(Q,ne,te){function J(re){return Q.a.ix===re||re==="Anchor Point"?J.anchorPoint:Q.o.ix===re||re==="Opacity"?J.opacity:Q.p.ix===re||re==="Position"?J.position:Q.r.ix===re||re==="Rotation"||re==="ADBE Vector Rotation"?J.rotation:Q.s.ix===re||re==="Scale"?J.scale:Q.sk&&Q.sk.ix===re||re==="Skew"?J.skew:Q.sa&&Q.sa.ix===re||re==="Skew Axis"?J.skewAxis:null}var ie=propertyGroupFactory(J,te);return ne.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",ie)),ne.transform.mProps.p.setGroupProperty(PropertyInterface("Position",ie)),ne.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",ie)),ne.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",ie)),ne.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",ie)),ne.transform.mProps.sk&&(ne.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",ie)),ne.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",ie))),ne.transform.op.setGroupProperty(PropertyInterface("Opacity",ie)),Object.defineProperties(J,{opacity:{get:ExpressionPropertyInterface(ne.transform.mProps.o)},position:{get:ExpressionPropertyInterface(ne.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(ne.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(ne.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(ne.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(ne.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(ne.transform.mProps.sa)},_name:{value:Q.nm}}),J.ty="tr",J.mn=Q.mn,J.propertyGroup=te,J}function I(Q,ne,te){function J(le){return Q.p.ix===le?J.position:Q.s.ix===le?J.size:null}var ie=propertyGroupFactory(J,te);J.propertyIndex=Q.ix;var re=ne.sh.ty==="tm"?ne.sh.prop:ne.sh;return re.s.setGroupProperty(PropertyInterface("Size",ie)),re.p.setGroupProperty(PropertyInterface("Position",ie)),Object.defineProperties(J,{size:{get:ExpressionPropertyInterface(re.s)},position:{get:ExpressionPropertyInterface(re.p)},_name:{value:Q.nm}}),J.mn=Q.mn,J}function G(Q,ne,te){function J(le){return Q.p.ix===le?J.position:Q.r.ix===le?J.rotation:Q.pt.ix===le?J.points:Q.or.ix===le||le==="ADBE Vector Star Outer Radius"?J.outerRadius:Q.os.ix===le?J.outerRoundness:Q.ir&&(Q.ir.ix===le||le==="ADBE Vector Star Inner Radius")?J.innerRadius:Q.is&&Q.is.ix===le?J.innerRoundness:null}var ie=propertyGroupFactory(J,te),re=ne.sh.ty==="tm"?ne.sh.prop:ne.sh;return J.propertyIndex=Q.ix,re.or.setGroupProperty(PropertyInterface("Outer Radius",ie)),re.os.setGroupProperty(PropertyInterface("Outer Roundness",ie)),re.pt.setGroupProperty(PropertyInterface("Points",ie)),re.p.setGroupProperty(PropertyInterface("Position",ie)),re.r.setGroupProperty(PropertyInterface("Rotation",ie)),Q.ir&&(re.ir.setGroupProperty(PropertyInterface("Inner Radius",ie)),re.is.setGroupProperty(PropertyInterface("Inner Roundness",ie))),Object.defineProperties(J,{position:{get:ExpressionPropertyInterface(re.p)},rotation:{get:ExpressionPropertyInterface(re.r)},points:{get:ExpressionPropertyInterface(re.pt)},outerRadius:{get:ExpressionPropertyInterface(re.or)},outerRoundness:{get:ExpressionPropertyInterface(re.os)},innerRadius:{get:ExpressionPropertyInterface(re.ir)},innerRoundness:{get:ExpressionPropertyInterface(re.is)},_name:{value:Q.nm}}),J.mn=Q.mn,J}function Y(Q,ne,te){function J(le){return Q.p.ix===le?J.position:Q.r.ix===le?J.roundness:Q.s.ix===le||le==="Size"||le==="ADBE Vector Rect Size"?J.size:null}var ie=propertyGroupFactory(J,te),re=ne.sh.ty==="tm"?ne.sh.prop:ne.sh;return J.propertyIndex=Q.ix,re.p.setGroupProperty(PropertyInterface("Position",ie)),re.s.setGroupProperty(PropertyInterface("Size",ie)),re.r.setGroupProperty(PropertyInterface("Rotation",ie)),Object.defineProperties(J,{position:{get:ExpressionPropertyInterface(re.p)},roundness:{get:ExpressionPropertyInterface(re.r)},size:{get:ExpressionPropertyInterface(re.s)},_name:{value:Q.nm}}),J.mn=Q.mn,J}function q(Q,ne,te){function J(le){return Q.r.ix===le||le==="Round Corners 1"?J.radius:null}var ie=propertyGroupFactory(J,te),re=ne;return J.propertyIndex=Q.ix,re.rd.setGroupProperty(PropertyInterface("Radius",ie)),Object.defineProperties(J,{radius:{get:ExpressionPropertyInterface(re.rd)},_name:{value:Q.nm}}),J.mn=Q.mn,J}function K(Q,ne,te){function J(le){return Q.c.ix===le||le==="Copies"?J.copies:Q.o.ix===le||le==="Offset"?J.offset:null}var ie=propertyGroupFactory(J,te),re=ne;return J.propertyIndex=Q.ix,re.c.setGroupProperty(PropertyInterface("Copies",ie)),re.o.setGroupProperty(PropertyInterface("Offset",ie)),Object.defineProperties(J,{copies:{get:ExpressionPropertyInterface(re.c)},offset:{get:ExpressionPropertyInterface(re.o)},_name:{value:Q.nm}}),J.mn=Q.mn,J}return function(Q,ne,te){var J;function ie(le){if(typeof le=="number")return le=le===void 0?1:le,le===0?te:J[le-1];for(var fe=0,pe=J.length;fe<pe;){if(J[fe]._name===le)return J[fe];fe+=1}return null}function re(){return te}return ie.propertyGroup=propertyGroupFactory(ie,re),J=u(Q,ne,ie.propertyGroup),ie.numProperties=J.length,ie._name="Contents",ie}})(),TextExpressionInterface=(function(){return function(u){var n;function s(f){switch(f){case"ADBE Text Document":return s.sourceText;default:return null}}return Object.defineProperty(s,"sourceText",{get:function(){u.textProperty.getValue();var d=u.textProperty.currentData.t;return(!n||d!==n.value)&&(n=new String(d),n.value=d||new String(d),Object.defineProperty(n,"style",{get:function(){return{fillColor:u.textProperty.currentData.fc}}})),n}}),s}})();function _typeof(u){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(u)}var FootageInterface=(function(){var u=function(f){var d="",y=f.getFootageData();function _(){return d="",y=f.getFootageData(),A}function A(R){if(y[R])return d=R,y=y[R],_typeof(y)==="object"?A:y;var I=R.indexOf(d);if(I!==-1){var G=parseInt(R.substr(I+d.length),10);return y=y[G],_typeof(y)==="object"?A:y}return""}return _},n=function(f){function d(y){return y==="Outline"?d.outlineInterface():null}return d._name="Outline",d.outlineInterface=u(f),d};return function(s){function f(d){return d==="Data"?f.dataInterface:null}return f._name="Data",f.dataInterface=n(s),f}})(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(u){return interfaces[u]||null}var expressionHelpers=(function(){function u(_,A,R){A.x&&(R.k=!0,R.x=!0,R.initiateExpression=ExpressionManager.initiateExpression,R.effectsSequence.push(R.initiateExpression(_,A,R).bind(R)))}function n(_){return _*=this.elem.globalData.frameRate,_-=this.offsetTime,_!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<_?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(_,this._cachingAtTime),this._cachingAtTime.lastFrame=_),this._cachingAtTime.value}function s(_){var A=-.01,R=this.getValueAtTime(_),I=this.getValueAtTime(_+A),G=0;if(R.length){var Y;for(Y=0;Y<R.length;Y+=1)G+=Math.pow(I[Y]-R[Y],2);G=Math.sqrt(G)*100}else G=0;return G}function f(_){if(this.vel!==void 0)return this.vel;var A=-.001,R=this.getValueAtTime(_),I=this.getValueAtTime(_+A),G;if(R.length){G=createTypedArray("float32",R.length);var Y;for(Y=0;Y<R.length;Y+=1)G[Y]=(I[Y]-R[Y])/A}else G=(I-R)/A;return G}function d(){return this.pv}function y(_){this.propertyGroup=_}return{searchExpressions:u,getSpeedAtTime:s,getVelocityAtTime:f,getValueAtTime:n,getStaticValueAtTime:d,setGroupProperty:y}})();function addPropertyDecorator(){function u(q,K,Q){if(!this.k||!this.keyframes)return this.pv;q=q?q.toLowerCase():"";var ne=this.comp.renderedFrame,te=this.keyframes,J=te[te.length-1].t;if(ne<=J)return this.pv;var ie,re;Q?(K?ie=Math.abs(J-this.elem.comp.globalData.frameRate*K):ie=Math.max(0,J-this.elem.data.ip),re=J-ie):((!K||K>te.length-1)&&(K=te.length-1),re=te[te.length-1-K].t,ie=J-re);var le,fe,pe;if(q==="pingpong"){var de=Math.floor((ne-re)/ie);if(de%2!==0)return this.getValueAtTime((ie-(ne-re)%ie+re)/this.comp.globalData.frameRate,0)}else if(q==="offset"){var se=this.getValueAtTime(re/this.comp.globalData.frameRate,0),he=this.getValueAtTime(J/this.comp.globalData.frameRate,0),Se=this.getValueAtTime(((ne-re)%ie+re)/this.comp.globalData.frameRate,0),ve=Math.floor((ne-re)/ie);if(this.pv.length){for(pe=new Array(se.length),fe=pe.length,le=0;le<fe;le+=1)pe[le]=(he[le]-se[le])*ve+Se[le];return pe}return(he-se)*ve+Se}else if(q==="continue"){var Re=this.getValueAtTime(J/this.comp.globalData.frameRate,0),Ee=this.getValueAtTime((J-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(pe=new Array(Re.length),fe=pe.length,le=0;le<fe;le+=1)pe[le]=Re[le]+(Re[le]-Ee[le])*((ne-J)/this.comp.globalData.frameRate)/5e-4;return pe}return Re+(Re-Ee)*((ne-J)/.001)}return this.getValueAtTime(((ne-re)%ie+re)/this.comp.globalData.frameRate,0)}function n(q,K,Q){if(!this.k)return this.pv;q=q?q.toLowerCase():"";var ne=this.comp.renderedFrame,te=this.keyframes,J=te[0].t;if(ne>=J)return this.pv;var ie,re;Q?(K?ie=Math.abs(this.elem.comp.globalData.frameRate*K):ie=Math.max(0,this.elem.data.op-J),re=J+ie):((!K||K>te.length-1)&&(K=te.length-1),re=te[K].t,ie=re-J);var le,fe,pe;if(q==="pingpong"){var de=Math.floor((J-ne)/ie);if(de%2===0)return this.getValueAtTime(((J-ne)%ie+J)/this.comp.globalData.frameRate,0)}else if(q==="offset"){var se=this.getValueAtTime(J/this.comp.globalData.frameRate,0),he=this.getValueAtTime(re/this.comp.globalData.frameRate,0),Se=this.getValueAtTime((ie-(J-ne)%ie+J)/this.comp.globalData.frameRate,0),ve=Math.floor((J-ne)/ie)+1;if(this.pv.length){for(pe=new Array(se.length),fe=pe.length,le=0;le<fe;le+=1)pe[le]=Se[le]-(he[le]-se[le])*ve;return pe}return Se-(he-se)*ve}else if(q==="continue"){var Re=this.getValueAtTime(J/this.comp.globalData.frameRate,0),Ee=this.getValueAtTime((J+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(pe=new Array(Re.length),fe=pe.length,le=0;le<fe;le+=1)pe[le]=Re[le]+(Re[le]-Ee[le])*(J-ne)/.001;return pe}return Re+(Re-Ee)*(J-ne)/.001}return this.getValueAtTime((ie-((J-ne)%ie+J))/this.comp.globalData.frameRate,0)}function s(q,K){if(!this.k)return this.pv;if(q=(q||.4)*.5,K=Math.floor(K||5),K<=1)return this.pv;var Q=this.comp.renderedFrame/this.comp.globalData.frameRate,ne=Q-q,te=Q+q,J=K>1?(te-ne)/(K-1):1,ie=0,re=0,le;this.pv.length?le=createTypedArray("float32",this.pv.length):le=0;for(var fe;ie<K;){if(fe=this.getValueAtTime(ne+ie*J),this.pv.length)for(re=0;re<this.pv.length;re+=1)le[re]+=fe[re];else le+=fe;ie+=1}if(this.pv.length)for(re=0;re<this.pv.length;re+=1)le[re]/=K;else le/=K;return le}function f(q){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var K=this._transformCachingAtTime.v;if(K.cloneFromProps(this.pre.props),this.appliedTransformations<1){var Q=this.a.getValueAtTime(q);K.translate(-Q[0]*this.a.mult,-Q[1]*this.a.mult,Q[2]*this.a.mult)}if(this.appliedTransformations<2){var ne=this.s.getValueAtTime(q);K.scale(ne[0]*this.s.mult,ne[1]*this.s.mult,ne[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var te=this.sk.getValueAtTime(q),J=this.sa.getValueAtTime(q);K.skewFromAxis(-te*this.sk.mult,J*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var ie=this.r.getValueAtTime(q);K.rotate(-ie*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var re=this.rz.getValueAtTime(q),le=this.ry.getValueAtTime(q),fe=this.rx.getValueAtTime(q),pe=this.or.getValueAtTime(q);K.rotateZ(-re*this.rz.mult).rotateY(le*this.ry.mult).rotateX(fe*this.rx.mult).rotateZ(-pe[2]*this.or.mult).rotateY(pe[1]*this.or.mult).rotateX(pe[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var de=this.px.getValueAtTime(q),se=this.py.getValueAtTime(q);if(this.data.p.z){var he=this.pz.getValueAtTime(q);K.translate(de*this.px.mult,se*this.py.mult,-he*this.pz.mult)}else K.translate(de*this.px.mult,se*this.py.mult,0)}else{var Se=this.p.getValueAtTime(q);K.translate(Se[0]*this.p.mult,Se[1]*this.p.mult,-Se[2]*this.p.mult)}return K}function d(){return this.v.clone(new Matrix)}var y=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(q,K,Q){var ne=y(q,K,Q);return ne.dynamicProperties.length?ne.getValueAtTime=f.bind(ne):ne.getValueAtTime=d.bind(ne),ne.setGroupProperty=expressionHelpers.setGroupProperty,ne};var _=PropertyFactory.getProp;PropertyFactory.getProp=function(q,K,Q,ne,te){var J=_(q,K,Q,ne,te);J.kf?J.getValueAtTime=expressionHelpers.getValueAtTime.bind(J):J.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(J),J.setGroupProperty=expressionHelpers.setGroupProperty,J.loopOut=u,J.loopIn=n,J.smooth=s,J.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(J),J.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(J),J.numKeys=K.a===1?K.k.length:0,J.propertyIndex=K.ix;var ie=0;return Q!==0&&(ie=createTypedArray("float32",K.a===1?K.k[0].s.length:K.k.length)),J._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:ie},expressionHelpers.searchExpressions(q,K,J),J.k&&te.addDynamicProperty(J),J};function A(q){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),q*=this.elem.globalData.frameRate,q-=this.offsetTime,q!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<q?this._caching.lastIndex:0,this._cachingAtTime.lastTime=q,this.interpolateShape(q,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var R=ShapePropertyFactory.getConstructorFunction(),I=ShapePropertyFactory.getKeyframedConstructorFunction();function G(){}G.prototype={vertices:function(K,Q){this.k&&this.getValue();var ne=this.v;Q!==void 0&&(ne=this.getValueAtTime(Q,0));var te,J=ne._length,ie=ne[K],re=ne.v,le=createSizedArray(J);for(te=0;te<J;te+=1)K==="i"||K==="o"?le[te]=[ie[te][0]-re[te][0],ie[te][1]-re[te][1]]:le[te]=[ie[te][0],ie[te][1]];return le},points:function(K){return this.vertices("v",K)},inTangents:function(K){return this.vertices("i",K)},outTangents:function(K){return this.vertices("o",K)},isClosed:function(){return this.v.c},pointOnPath:function(K,Q){var ne=this.v;Q!==void 0&&(ne=this.getValueAtTime(Q,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(ne));for(var te=this._segmentsLength,J=te.lengths,ie=te.totalLength*K,re=0,le=J.length,fe=0,pe;re<le;){if(fe+J[re].addedLength>ie){var de=re,se=ne.c&&re===le-1?0:re+1,he=(ie-fe)/J[re].addedLength;pe=bez.getPointInSegment(ne.v[de],ne.v[se],ne.o[de],ne.i[se],he,J[re]);break}else fe+=J[re].addedLength;re+=1}return pe||(pe=ne.c?[ne.v[0][0],ne.v[0][1]]:[ne.v[ne._length-1][0],ne.v[ne._length-1][1]]),pe},vectorOnPath:function(K,Q,ne){K==1?K=this.v.c:K==0&&(K=.999);var te=this.pointOnPath(K,Q),J=this.pointOnPath(K+.001,Q),ie=J[0]-te[0],re=J[1]-te[1],le=Math.sqrt(Math.pow(ie,2)+Math.pow(re,2));if(le===0)return[0,0];var fe=ne==="tangent"?[ie/le,re/le]:[-re/le,ie/le];return fe},tangentOnPath:function(K,Q){return this.vectorOnPath(K,Q,"tangent")},normalOnPath:function(K,Q){return this.vectorOnPath(K,Q,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([G],R),extendPrototype([G],I),I.prototype.getValueAtTime=A,I.prototype.initiateExpression=ExpressionManager.initiateExpression;var Y=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(q,K,Q,ne,te){var J=Y(q,K,Q,ne,te);return J.propertyIndex=K.ix,J.lock=!1,Q===3?expressionHelpers.searchExpressions(q,K.pt,J):Q===4&&expressionHelpers.searchExpressions(q,K.ks,J),J.k&&q.addDynamicProperty(J),J}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function u(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(n,s){var f=this.calculateExpression(s);if(n.t!==f){var d={};return this.copyData(d,n),d.t=f.toString(),d.__complete=!1,d}return n},TextProperty.prototype.searchProperty=function(){var n=this.searchKeyframes(),s=this.searchExpressions();return this.kf=n||s,this.kf},TextProperty.prototype.searchExpressions=u}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function u(n,s){var f=createNS("feMerge");f.setAttribute("result",n);var d,y;for(y=0;y<s.length;y+=1)d=createNS("feMergeNode"),d.setAttribute("in",s[y]),f.appendChild(d),f.appendChild(d);return f}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(u,n,s,f,d){this.filterManager=n;var y=createNS("feColorMatrix");y.setAttribute("type","matrix"),y.setAttribute("color-interpolation-filters","linearRGB"),y.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=y,y.setAttribute("result",f+"_tint_1"),u.appendChild(y),y=createNS("feColorMatrix"),y.setAttribute("type","matrix"),y.setAttribute("color-interpolation-filters","sRGB"),y.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),y.setAttribute("result",f+"_tint_2"),u.appendChild(y),this.matrixFilter=y;var _=this.createMergeNode(f,[d,f+"_tint_1",f+"_tint_2"]);u.appendChild(_)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(u){if(u||this.filterManager._mdf){var n=this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,f=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+f+" 0"),this.matrixFilter.setAttribute("values",s[0]-n[0]+" 0 0 0 "+n[0]+" "+(s[1]-n[1])+" 0 0 0 "+n[1]+" "+(s[2]-n[2])+" 0 0 0 "+n[2]+" 0 0 0 1 0")}};function SVGFillFilter(u,n,s,f){this.filterManager=n;var d=createNS("feColorMatrix");d.setAttribute("type","matrix"),d.setAttribute("color-interpolation-filters","sRGB"),d.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),d.setAttribute("result",f),u.appendChild(d),this.matrixFilter=d}SVGFillFilter.prototype.renderFrame=function(u){if(u||this.filterManager._mdf){var n=this.filterManager.effectElements[2].p.v,s=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+n[0]+" 0 0 0 0 "+n[1]+" 0 0 0 0 "+n[2]+" 0 0 0 "+s+" 0")}};function SVGStrokeEffect(u,n,s){this.initialized=!1,this.filterManager=n,this.elem=s,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var u=this.elem.layerElement.children||this.elem.layerElement.childNodes,n,s,f,d;for(this.filterManager.effectElements[1].p.v===1?(d=this.elem.maskManager.masksProperties.length,f=0):(f=this.filterManager.effectElements[0].p.v-1,d=f+1),s=createNS("g"),s.setAttribute("fill","none"),s.setAttribute("stroke-linecap","round"),s.setAttribute("stroke-dashoffset",1),f;f<d;f+=1)n=createNS("path"),s.appendChild(n),this.paths.push({p:n,m:f});if(this.filterManager.effectElements[10].p.v===3){var y=createNS("mask"),_=createElementID();y.setAttribute("id",_),y.setAttribute("mask-type","alpha"),y.appendChild(s),this.elem.globalData.defs.appendChild(y);var A=createNS("g");for(A.setAttribute("mask","url("+getLocationHref()+"#"+_+")");u[0];)A.appendChild(u[0]);this.elem.layerElement.appendChild(A),this.masker=y,s.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(u=this.elem.layerElement.children||this.elem.layerElement.childNodes;u.length;)this.elem.layerElement.removeChild(u[0]);this.elem.layerElement.appendChild(s),this.elem.layerElement.removeAttribute("mask"),s.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=s},SVGStrokeEffect.prototype.renderFrame=function(u){this.initialized||this.initialize();var n,s=this.paths.length,f,d;for(n=0;n<s;n+=1)if(this.paths[n].m!==-1&&(f=this.elem.maskManager.viewData[this.paths[n].m],d=this.paths[n].p,(u||this.filterManager._mdf||f.prop._mdf)&&d.setAttribute("d",f.lastPath),u||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||f.prop._mdf)){var y;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var _=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,A=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,R=d.getTotalLength();y="0 0 0 "+R*_+" ";var I=R*(A-_),G=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,Y=Math.floor(I/G),q;for(q=0;q<Y;q+=1)y+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";y+="0 "+R*10+" 0 0"}else y="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;d.setAttribute("stroke-dasharray",y)}if((u||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(u||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(u||this.filterManager.effectElements[3].p._mdf)){var K=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(K[0]*255)+","+bmFloor(K[1]*255)+","+bmFloor(K[2]*255)+")")}};function SVGTritoneFilter(u,n,s,f){this.filterManager=n;var d=createNS("feColorMatrix");d.setAttribute("type","matrix"),d.setAttribute("color-interpolation-filters","linearRGB"),d.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),u.appendChild(d);var y=createNS("feComponentTransfer");y.setAttribute("color-interpolation-filters","sRGB"),y.setAttribute("result",f),this.matrixFilter=y;var _=createNS("feFuncR");_.setAttribute("type","table"),y.appendChild(_),this.feFuncR=_;var A=createNS("feFuncG");A.setAttribute("type","table"),y.appendChild(A),this.feFuncG=A;var R=createNS("feFuncB");R.setAttribute("type","table"),y.appendChild(R),this.feFuncB=R,u.appendChild(y)}SVGTritoneFilter.prototype.renderFrame=function(u){if(u||this.filterManager._mdf){var n=this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,f=this.filterManager.effectElements[2].p.v,d=f[0]+" "+s[0]+" "+n[0],y=f[1]+" "+s[1]+" "+n[1],_=f[2]+" "+s[2]+" "+n[2];this.feFuncR.setAttribute("tableValues",d),this.feFuncG.setAttribute("tableValues",y),this.feFuncB.setAttribute("tableValues",_)}};function SVGProLevelsFilter(u,n,s,f){this.filterManager=n;var d=this.filterManager.effectElements,y=createNS("feComponentTransfer");(d[10].p.k||d[10].p.v!==0||d[11].p.k||d[11].p.v!==1||d[12].p.k||d[12].p.v!==1||d[13].p.k||d[13].p.v!==0||d[14].p.k||d[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",y)),(d[17].p.k||d[17].p.v!==0||d[18].p.k||d[18].p.v!==1||d[19].p.k||d[19].p.v!==1||d[20].p.k||d[20].p.v!==0||d[21].p.k||d[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",y)),(d[24].p.k||d[24].p.v!==0||d[25].p.k||d[25].p.v!==1||d[26].p.k||d[26].p.v!==1||d[27].p.k||d[27].p.v!==0||d[28].p.k||d[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",y)),(d[31].p.k||d[31].p.v!==0||d[32].p.k||d[32].p.v!==1||d[33].p.k||d[33].p.v!==1||d[34].p.k||d[34].p.v!==0||d[35].p.k||d[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",y)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(y.setAttribute("color-interpolation-filters","sRGB"),u.appendChild(y)),(d[3].p.k||d[3].p.v!==0||d[4].p.k||d[4].p.v!==1||d[5].p.k||d[5].p.v!==1||d[6].p.k||d[6].p.v!==0||d[7].p.k||d[7].p.v!==1)&&(y=createNS("feComponentTransfer"),y.setAttribute("color-interpolation-filters","sRGB"),y.setAttribute("result",f),u.appendChild(y),this.feFuncRComposed=this.createFeFunc("feFuncR",y),this.feFuncGComposed=this.createFeFunc("feFuncG",y),this.feFuncBComposed=this.createFeFunc("feFuncB",y))}SVGProLevelsFilter.prototype.createFeFunc=function(u,n){var s=createNS(u);return s.setAttribute("type","table"),n.appendChild(s),s},SVGProLevelsFilter.prototype.getTableValue=function(u,n,s,f,d){for(var y=0,_=256,A,R=Math.min(u,n),I=Math.max(u,n),G=Array.call(null,{length:_}),Y,q=0,K=d-f,Q=n-u;y<=256;)A=y/256,A<=R?Y=Q<0?d:f:A>=I?Y=Q<0?f:d:Y=f+K*Math.pow((A-u)/Q,1/s),G[q]=Y,q+=1,y+=256/(_-1);return G.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(u){if(u||this.filterManager._mdf){var n,s=this.filterManager.effectElements;this.feFuncRComposed&&(u||s[3].p._mdf||s[4].p._mdf||s[5].p._mdf||s[6].p._mdf||s[7].p._mdf)&&(n=this.getTableValue(s[3].p.v,s[4].p.v,s[5].p.v,s[6].p.v,s[7].p.v),this.feFuncRComposed.setAttribute("tableValues",n),this.feFuncGComposed.setAttribute("tableValues",n),this.feFuncBComposed.setAttribute("tableValues",n)),this.feFuncR&&(u||s[10].p._mdf||s[11].p._mdf||s[12].p._mdf||s[13].p._mdf||s[14].p._mdf)&&(n=this.getTableValue(s[10].p.v,s[11].p.v,s[12].p.v,s[13].p.v,s[14].p.v),this.feFuncR.setAttribute("tableValues",n)),this.feFuncG&&(u||s[17].p._mdf||s[18].p._mdf||s[19].p._mdf||s[20].p._mdf||s[21].p._mdf)&&(n=this.getTableValue(s[17].p.v,s[18].p.v,s[19].p.v,s[20].p.v,s[21].p.v),this.feFuncG.setAttribute("tableValues",n)),this.feFuncB&&(u||s[24].p._mdf||s[25].p._mdf||s[26].p._mdf||s[27].p._mdf||s[28].p._mdf)&&(n=this.getTableValue(s[24].p.v,s[25].p.v,s[26].p.v,s[27].p.v,s[28].p.v),this.feFuncB.setAttribute("tableValues",n)),this.feFuncA&&(u||s[31].p._mdf||s[32].p._mdf||s[33].p._mdf||s[34].p._mdf||s[35].p._mdf)&&(n=this.getTableValue(s[31].p.v,s[32].p.v,s[33].p.v,s[34].p.v,s[35].p.v),this.feFuncA.setAttribute("tableValues",n))}};function SVGDropShadowEffect(u,n,s,f,d){var y=n.container.globalData.renderConfig.filterSize,_=n.data.fs||y;u.setAttribute("x",_.x||y.x),u.setAttribute("y",_.y||y.y),u.setAttribute("width",_.width||y.width),u.setAttribute("height",_.height||y.height),this.filterManager=n;var A=createNS("feGaussianBlur");A.setAttribute("in","SourceAlpha"),A.setAttribute("result",f+"_drop_shadow_1"),A.setAttribute("stdDeviation","0"),this.feGaussianBlur=A,u.appendChild(A);var R=createNS("feOffset");R.setAttribute("dx","25"),R.setAttribute("dy","0"),R.setAttribute("in",f+"_drop_shadow_1"),R.setAttribute("result",f+"_drop_shadow_2"),this.feOffset=R,u.appendChild(R);var I=createNS("feFlood");I.setAttribute("flood-color","#00ff00"),I.setAttribute("flood-opacity","1"),I.setAttribute("result",f+"_drop_shadow_3"),this.feFlood=I,u.appendChild(I);var G=createNS("feComposite");G.setAttribute("in",f+"_drop_shadow_3"),G.setAttribute("in2",f+"_drop_shadow_2"),G.setAttribute("operator","in"),G.setAttribute("result",f+"_drop_shadow_4"),u.appendChild(G);var Y=this.createMergeNode(f,[f+"_drop_shadow_4",d]);u.appendChild(Y)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(u){if(u||this.filterManager._mdf){if((u||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),u||this.filterManager.effectElements[0].p._mdf){var n=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(n[0]*255),Math.round(n[1]*255),Math.round(n[2]*255)))}if((u||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),u||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var s=this.filterManager.effectElements[3].p.v,f=(this.filterManager.effectElements[2].p.v-90)*degToRads,d=s*Math.cos(f),y=s*Math.sin(f);this.feOffset.setAttribute("dx",d),this.feOffset.setAttribute("dy",y)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(u,n,s){this.initialized=!1,this.filterManager=n,this.filterElem=u,this.elem=s,s.matteElement=createNS("g"),s.matteElement.appendChild(s.layerElement),s.matteElement.appendChild(s.transformedElement),s.baseElement=s.matteElement}SVGMatte3Effect.prototype.findSymbol=function(u){for(var n=0,s=_svgMatteSymbols.length;n<s;){if(_svgMatteSymbols[n]===u)return _svgMatteSymbols[n];n+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(u,n){var s=u.layerElement.parentNode;if(s){for(var f=s.children,d=0,y=f.length;d<y&&f[d]!==u.layerElement;)d+=1;var _;d<=y-2&&(_=f[d+1]);var A=createNS("use");A.setAttribute("href","#"+n),_?s.insertBefore(A,_):s.appendChild(A)}},SVGMatte3Effect.prototype.setElementAsMask=function(u,n){if(!this.findSymbol(n)){var s=createElementID(),f=createNS("mask");f.setAttribute("id",n.layerId),f.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(n);var d=u.globalData.defs;d.appendChild(f);var y=createNS("symbol");y.setAttribute("id",s),this.replaceInParent(n,s),y.appendChild(n.layerElement),d.appendChild(y);var _=createNS("use");_.setAttribute("href","#"+s),f.appendChild(_),n.data.hd=!1,n.show()}u.setMatte(n.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var u=this.filterManager.effectElements[0].p.v,n=this.elem.comp.elements,s=0,f=n.length;s<f;)n[s]&&n[s].data.ind===u&&this.setElementAsMask(this.elem,n[s]),s+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(u,n,s,f){u.setAttribute("x","-100%"),u.setAttribute("y","-100%"),u.setAttribute("width","300%"),u.setAttribute("height","300%"),this.filterManager=n;var d=createNS("feGaussianBlur");d.setAttribute("result",f),u.appendChild(d),this.feGaussianBlur=d}SVGGaussianBlurEffect.prototype.renderFrame=function(u){if(u||this.filterManager._mdf){var n=.3,s=this.filterManager.effectElements[0].p.v*n,f=this.filterManager.effectElements[1].p.v,d=f==3?0:s,y=f==2?0:s;this.feGaussianBlur.setAttribute("stdDeviation",d+" "+y);var _=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",_)}};function TransformEffect(){}TransformEffect.prototype.init=function(u){this.effectsManager=u,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(u){if(this._opMdf=!1,this._mdf=!1,u||this.effectsManager._mdf){var n=this.effectsManager.effectElements,s=n[0].p.v,f=n[1].p.v,d=n[2].p.v===1,y=n[3].p.v,_=d?y:n[4].p.v,A=n[5].p.v,R=n[6].p.v,I=n[7].p.v;this.matrix.reset(),this.matrix.translate(-s[0],-s[1],s[2]),this.matrix.scale(_*.01,y*.01,1),this.matrix.rotate(-I*degToRads),this.matrix.skewFromAxis(-A*degToRads,(R+90)*degToRads),this.matrix.translate(f[0],f[1],0),this._mdf=!0,this.opacity!==n[8].p.v&&(this.opacity=n[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(u,n){this.init(n)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(u){this.init(u)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie}))})(lottie$2,lottie$2.exports)),lottie$2.exports}var lottieExports=requireLottie();const lottie=getDefaultExportFromCjs(lottieExports);function _arrayLikeToArray(u,n){(n==null||n>u.length)&&(n=u.length);for(var s=0,f=Array(n);s<n;s++)f[s]=u[s];return f}function _arrayWithHoles(u){if(Array.isArray(u))return u}function _defineProperty(u,n,s){return(n=_toPropertyKey(n))in u?Object.defineProperty(u,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):u[n]=s,u}function _iterableToArrayLimit(u,n){var s=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(s!=null){var f,d,y,_,A=[],R=!0,I=!1;try{if(y=(s=s.call(u)).next,n!==0)for(;!(R=(f=y.call(s)).done)&&(A.push(f.value),A.length!==n);R=!0);}catch(G){I=!0,d=G}finally{try{if(!R&&s.return!=null&&(_=s.return(),Object(_)!==_))return}finally{if(I)throw d}}return A}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ownKeys(u,n){var s=Object.keys(u);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(u);n&&(f=f.filter(function(d){return Object.getOwnPropertyDescriptor(u,d).enumerable})),s.push.apply(s,f)}return s}function _objectSpread2(u){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?ownKeys(Object(s),!0).forEach(function(f){_defineProperty(u,f,s[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(f){Object.defineProperty(u,f,Object.getOwnPropertyDescriptor(s,f))})}return u}function _objectWithoutProperties(u,n){if(u==null)return{};var s,f,d=_objectWithoutPropertiesLoose(u,n);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(u);for(f=0;f<y.length;f++)s=y[f],n.includes(s)||{}.propertyIsEnumerable.call(u,s)&&(d[s]=u[s])}return d}function _objectWithoutPropertiesLoose(u,n){if(u==null)return{};var s={};for(var f in u)if({}.hasOwnProperty.call(u,f)){if(n.includes(f))continue;s[f]=u[f]}return s}function _slicedToArray(u,n){return _arrayWithHoles(u)||_iterableToArrayLimit(u,n)||_unsupportedIterableToArray(u,n)||_nonIterableRest()}function _toPrimitive(u,n){if(typeof u!="object"||!u)return u;var s=u[Symbol.toPrimitive];if(s!==void 0){var f=s.call(u,n);if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(u)}function _toPropertyKey(u){var n=_toPrimitive(u,"string");return typeof n=="symbol"?n:n+""}function _unsupportedIterableToArray(u,n){if(u){if(typeof u=="string")return _arrayLikeToArray(u,n);var s={}.toString.call(u).slice(8,-1);return s==="Object"&&u.constructor&&(s=u.constructor.name),s==="Map"||s==="Set"?Array.from(u):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(u,n):void 0}}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function u(n,s){var f=n.animationData,d=n.loop,y=n.autoplay,_=n.initialSegment,A=n.onComplete,R=n.onLoopComplete,I=n.onEnterFrame,G=n.onSegmentStart,Y=n.onConfigReady,q=n.onDataReady,K=n.onDataFailed,Q=n.onLoadedImages,ne=n.onDOMLoaded,te=n.onDestroy;n.lottieRef,n.renderer,n.name,n.assetsPath,n.rendererSettings;var J=_objectWithoutProperties(n,_excluded$1),ie=reactExports.useState(!1),re=_slicedToArray(ie,2),le=re[0],fe=re[1],pe=reactExports.useRef(),de=reactExports.useRef(null),se=function(){var De;(De=pe.current)===null||De===void 0||De.play()},he=function(){var De;(De=pe.current)===null||De===void 0||De.stop()},Se=function(){var De;(De=pe.current)===null||De===void 0||De.pause()},ve=function(De){var ze;(ze=pe.current)===null||ze===void 0||ze.setSpeed(De)},Re=function(De,ze){var He;(He=pe.current)===null||He===void 0||He.goToAndPlay(De,ze)},Ee=function(De,ze){var He;(He=pe.current)===null||He===void 0||He.goToAndStop(De,ze)},Oe=function(De){var ze;(ze=pe.current)===null||ze===void 0||ze.setDirection(De)},Ne=function(De,ze){var He;(He=pe.current)===null||He===void 0||He.playSegments(De,ze)},ye=function(De){var ze;(ze=pe.current)===null||ze===void 0||ze.setSubframe(De)},Ae=function(De){var ze;return(ze=pe.current)===null||ze===void 0?void 0:ze.getDuration(De)},_e=function(){var De;(De=pe.current)===null||De===void 0||De.destroy(),pe.current=void 0},Te=function(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze;if(de.current){(ze=pe.current)===null||ze===void 0||ze.destroy();var He=_objectSpread2(_objectSpread2(_objectSpread2({},n),De),{},{container:de.current});return pe.current=lottie.loadAnimation(He),fe(!!pe.current),function(){var yt;(yt=pe.current)===null||yt===void 0||yt.destroy(),pe.current=void 0}}};reactExports.useEffect(function(){var ge=Te();return function(){return ge==null?void 0:ge()}},[f,d]),reactExports.useEffect(function(){pe.current&&(pe.current.autoplay=!!y)},[y]),reactExports.useEffect(function(){if(pe.current){if(!_){pe.current.resetSegments(!0);return}!Array.isArray(_)||!_.length||((pe.current.currentRawFrame<_[0]||pe.current.currentRawFrame>_[1])&&(pe.current.currentRawFrame=_[0]),pe.current.setSegment(_[0],_[1]))}},[_]),reactExports.useEffect(function(){var ge=[{name:"complete",handler:A},{name:"loopComplete",handler:R},{name:"enterFrame",handler:I},{name:"segmentStart",handler:G},{name:"config_ready",handler:Y},{name:"data_ready",handler:q},{name:"data_failed",handler:K},{name:"loaded_images",handler:Q},{name:"DOMLoaded",handler:ne},{name:"destroy",handler:te}],De=ge.filter(function(He){return He.handler!=null});if(De.length){var ze=De.map(function(He){var yt;return(yt=pe.current)===null||yt===void 0||yt.addEventListener(He.name,He.handler),function(){var Ge;(Ge=pe.current)===null||Ge===void 0||Ge.removeEventListener(He.name,He.handler)}});return function(){ze.forEach(function(He){return He()})}}},[A,R,I,G,Y,q,K,Q,ne,te]);var we=React.createElement("div",_objectSpread2({style:s,ref:de},J));return{View:we,play:se,stop:he,pause:Se,setSpeed:ve,goToAndStop:Ee,goToAndPlay:Re,setDirection:Oe,playSegments:Ne,setSubframe:ye,getDuration:Ae,destroy:_e,animationContainerRef:de,animationLoaded:le,animationItem:pe.current}};function getContainerVisibility(u){var n=u.getBoundingClientRect(),s=n.top,f=n.height,d=window.innerHeight-s,y=window.innerHeight+f;return d/y}function getContainerCursorPosition(u,n,s){var f=u.getBoundingClientRect(),d=f.top,y=f.left,_=f.width,A=f.height,R=(n-y)/_,I=(s-d)/A;return{x:R,y:I}}var useInitInteractivity=function u(n){var s=n.wrapperRef,f=n.animationItem,d=n.mode,y=n.actions;reactExports.useEffect(function(){var _=s.current;if(!(!_||!f||!y.length)){f.stop();var A=function(){var G=null,Y=function(){var K=getContainerVisibility(_),Q=y.find(function(te){var J=te.visibility;return J&&K>=J[0]&&K<=J[1]});if(Q){if(Q.type==="seek"&&Q.visibility&&Q.frames.length===2){var ne=Q.frames[0]+Math.ceil((K-Q.visibility[0])/(Q.visibility[1]-Q.visibility[0])*Q.frames[1]);//! goToAndStop must be relative to the start of the current segment
f.goToAndStop(ne-f.firstFrame-1,!0)}Q.type==="loop"&&(G===null||G!==Q.frames||f.isPaused)&&(f.playSegments(Q.frames,!0),G=Q.frames),Q.type==="play"&&f.isPaused&&(f.resetSegments(!0),f.play()),Q.type==="stop"&&f.goToAndStop(Q.frames[0]-f.firstFrame-1,!0)}};return document.addEventListener("scroll",Y),function(){document.removeEventListener("scroll",Y)}},R=function(){var G=function(Q,ne){var te=Q,J=ne;if(te!==-1&&J!==-1){var ie=getContainerCursorPosition(_,te,J);te=ie.x,J=ie.y}var re=y.find(function(pe){var de=pe.position;return de&&Array.isArray(de.x)&&Array.isArray(de.y)?te>=de.x[0]&&te<=de.x[1]&&J>=de.y[0]&&J<=de.y[1]:de&&!Number.isNaN(de.x)&&!Number.isNaN(de.y)?te===de.x&&J===de.y:!1});if(re){if(re.type==="seek"&&re.position&&Array.isArray(re.position.x)&&Array.isArray(re.position.y)&&re.frames.length===2){var le=(te-re.position.x[0])/(re.position.x[1]-re.position.x[0]),fe=(J-re.position.y[0])/(re.position.y[1]-re.position.y[0]);f.playSegments(re.frames,!0),f.goToAndStop(Math.ceil((le+fe)/2*(re.frames[1]-re.frames[0])),!0)}re.type==="loop"&&f.playSegments(re.frames,!0),re.type==="play"&&(f.isPaused&&f.resetSegments(!1),f.playSegments(re.frames)),re.type==="stop"&&f.goToAndStop(re.frames[0],!0)}},Y=function(Q){G(Q.clientX,Q.clientY)},q=function(){G(-1,-1)};return _.addEventListener("mousemove",Y),_.addEventListener("mouseout",q),function(){_.removeEventListener("mousemove",Y),_.removeEventListener("mouseout",q)}};switch(d){case"scroll":return A();case"cursor":return R()}}},[d,f])},useLottieInteractivity=function u(n){var s=n.actions,f=n.mode,d=n.lottieObj,y=d.animationItem,_=d.View,A=d.animationContainerRef;return useInitInteractivity({actions:s,animationItem:y,mode:f,wrapperRef:A}),_},_excluded=["style","interactivity"],Lottie=function u(n){var s,f,d,y=n.style,_=n.interactivity,A=_objectWithoutProperties(n,_excluded),R=useLottie(A,y),I=R.View,G=R.play,Y=R.stop,q=R.pause,K=R.setSpeed,Q=R.goToAndStop,ne=R.goToAndPlay,te=R.setDirection,J=R.playSegments,ie=R.setSubframe,re=R.getDuration,le=R.destroy,fe=R.animationContainerRef,pe=R.animationLoaded,de=R.animationItem;return reactExports.useEffect(function(){n.lottieRef&&(n.lottieRef.current={play:G,stop:Y,pause:q,setSpeed:K,goToAndPlay:ne,goToAndStop:Q,setDirection:te,playSegments:J,setSubframe:ie,getDuration:re,destroy:le,animationContainerRef:fe,animationLoaded:pe,animationItem:de})},[(s=n.lottieRef)===null||s===void 0?void 0:s.current]),useLottieInteractivity({lottieObj:{View:I,play:G,stop:Y,pause:q,setSpeed:K,goToAndStop:Q,goToAndPlay:ne,setDirection:te,playSegments:J,setSubframe:ie,getDuration:re,destroy:le,animationContainerRef:fe,animationLoaded:pe,animationItem:de},actions:(f=_==null?void 0:_.actions)!==null&&f!==void 0?f:[],mode:(d=_==null?void 0:_.mode)!==null&&d!==void 0?d:"scroll"})};const v$1="5.9.6",fr$1=30,ip$1=0,op$1=86,w$1=952,h$1=784,nm$1="Live chatbot",ddd$1=0,assets$1=[],layers$1=JSON.parse('[{"ddd":0,"ind":1,"ty":4,"nm":"Shape Layer 1","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":22,"s":[-77]},{"i":{"x":[0.667],"y":[0.754]},"o":{"x":[0.333],"y":[0]},"t":26,"s":[-62]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[-0.339]},"t":30,"s":[-94.788]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":36,"s":[-59]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":42,"s":[-96]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":48,"s":[-63]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.158],"y":[0]},"t":54,"s":[-91]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":59,"s":[-59]},{"t":64,"s":[-77]}],"ix":10},"p":{"a":0,"k":[-169.089,-176.172,0],"ix":2,"l":2},"a":{"a":0,"k":[209,-129.688,0],"ix":1,"l":2},"s":{"a":0,"k":[142.857,142.857,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[214,-136],[203.25,-136],[203.375,-126],[214,-125.875]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.478431402468,1,0.984313785329,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 2","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[215.75,-192.5],[201.25,-192.5],[203.5,-145.75],[214,-146]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.478431402468,1,0.984313785329,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":5,"op":185,"st":5,"ct":1,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"chat 4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-103,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.191,"y":0.488},"o":{"x":0.275,"y":0},"t":7,"s":[620.5,323.625,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.685,"y":1},"o":{"x":0.329,"y":0.731},"t":14,"s":[683.5,277.625,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.685,"y":0.685},"o":{"x":0.407,"y":0.407},"t":27,"s":[651.5,303.625,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.671,"y":0.269},"o":{"x":0.315,"y":0},"t":57,"s":[651.5,303.625,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.725,"y":1},"o":{"x":0.809,"y":0.512},"t":70,"s":[683.5,277.625,0],"to":[0,0,0],"ti":[0,0,0]},{"t":77,"s":[620.5,323.625,0]}],"ix":2,"l":2},"a":{"a":0,"k":[-142.909,-103.418,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.191,0.191,0.191],"y":[0.641,0.641,1.359]},"o":{"x":[0.275,0.275,0.275],"y":[0,0,0]},"t":7,"s":[0,0,100]},{"i":{"x":[0.685,0.685,0.685],"y":[1,1,1]},"o":{"x":[0.329,0.329,0.329],"y":[0.95,0.95,-0.95]},"t":14,"s":[-94,-94,100]},{"i":{"x":[0.685,0.685,0.685],"y":[1,1,1]},"o":{"x":[0.462,0.462,0.462],"y":[0,0,0]},"t":27,"s":[-70,-70,100]},{"i":{"x":[0.671,0.671,0.671],"y":[2.059,2.059,0.73]},"o":{"x":[0.315,0.315,0.315],"y":[0,0,0]},"t":57,"s":[-70,-70,100]},{"i":{"x":[0.725,0.725,0.725],"y":[1,1,1]},"o":{"x":[0.809,0.809,0.809],"y":[0.359,0.359,0.359]},"t":70,"s":[-94,-94,100]},{"t":77,"s":[0,0,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[156,156],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.478,1,0.984,0.5,0.278,0.68,0.802,1,0.078,0.361,0.62],"ix":9}},"s":{"a":0,"k":[-79.376,-17.338],"ix":5},"e":{"a":0,"k":[77.236,20.693],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-214,-187],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[-153.75,-148.75],[-180,-125.5],[-138.75,-100.75]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.478,1,0.984,0.5,0.278,0.68,0.802,1,0.078,0.361,0.62],"ix":9}},"s":{"a":0,"k":[-144,-109],"ix":5},"e":{"a":0,"k":[-167.75,-135.5],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":7,"op":187,"st":7,"ct":1,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Layer 2","parent":4,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.414],"y":[1]},"o":{"x":[0.228],"y":[0]},"t":25,"s":[-172]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.506],"y":[0]},"t":39,"s":[-198]},{"i":{"x":[0.52],"y":[1]},"o":{"x":[0.228],"y":[0]},"t":51,"s":[-172]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":62,"s":[-145]},{"t":70,"s":[-172]}],"ix":10},"p":{"a":0,"k":[-193.727,-156.256,0],"ix":2,"l":2},"a":{"a":0,"k":[22.006,-26.641,0],"ix":1,"l":2},"s":{"a":0,"k":[-133,133,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.316,1.502],[1.814,0],[2.642,-3.062],[1.444,0],[0,2.743],[-1.096,0.943],[0,1.361],[0,0],[1.466,0],[0,-12.116],[-0.37,-1.597],[0,0],[-4.546,-4.605],[-3.15,0],[-2.173,2.199],[0,0],[-1.499,0],[0,12.094]],"o":[[0,0],[-1.361,0],[-0.943,1.096],[-2.743,0],[0,-1.444],[3.062,-2.642],[0,-1.814],[-1.422,-0.294],[-12.007,0],[0,1.524],[0,0],[-4.543,4.605],[2.213,2.232],[3.146,0],[0,0],[1.557,0.239],[12.206,0],[0,-1.531]],"v":[[33.995,-21.248],[30.842,-27.762],[21.411,-18.589],[17.663,-16.876],[12.699,-21.84],[14.412,-25.588],[23.585,-35.019],[17.057,-38.204],[12.699,-38.647],[-9.071,-16.673],[-8.516,-12.01],[-31.064,10.134],[-31.06,26.829],[-22.747,30.294],[-14.474,26.862],[8.128,4.655],[12.699,4.895],[34.47,-16.673]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.478431402468,1,0.984313785329,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":5,"op":185,"st":5,"ct":1,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"chat 3","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-8,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.191,"y":0.488},"o":{"x":0.275,"y":0},"t":2,"s":[607.5,434.125,0],"to":[12.917,6.583,0],"ti":[-6,-4.833,0]},{"i":{"x":0.685,"y":1},"o":{"x":0.329,"y":0.698},"t":9,"s":[685,473.625,0],"to":[6,4.833,0],"ti":[6.917,1.75,0]},{"i":{"x":0.685,"y":1},"o":{"x":0.407,"y":0},"t":22,"s":[643.5,463.125,0],"to":[0,0,0],"ti":[-6.917,-1.75,0]},{"i":{"x":0.671,"y":0.25},"o":{"x":0.315,"y":0},"t":52,"s":[643.5,463.125,0],"to":[6.917,1.75,0],"ti":[6,4.833,0]},{"i":{"x":0.725,"y":1},"o":{"x":0.809,"y":0.512},"t":65,"s":[685,473.625,0],"to":[-6,-4.833,0],"ti":[12.917,6.583,0]},{"t":72,"s":[607.5,434.125,0]}],"ix":2,"l":2},"a":{"a":0,"k":[-135.856,-99.234,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.191,0.191,0.191],"y":[0.488,0.488,1.512]},"o":{"x":[0.275,0.275,0.275],"y":[0,0,0]},"t":2,"s":[0,0,100]},{"i":{"x":[0.685,0.685,0.685],"y":[1,1,1]},"o":{"x":[0.329,0.329,0.329],"y":[0.731,0.731,-0.731]},"t":9,"s":[-97,-97,100]},{"i":{"x":[0.685,0.685,0.685],"y":[1,1,1]},"o":{"x":[0.462,0.462,0.462],"y":[0,0,0]},"t":22,"s":[-82,-82,100]},{"i":{"x":[0.671,0.671,0.671],"y":[3.498,3.498,0.614]},"o":{"x":[0.315,0.315,0.315],"y":[0,0,0]},"t":52,"s":[-82,-82,100]},{"i":{"x":[0.725,0.725,0.725],"y":[1,1,1]},"o":{"x":[0.809,0.809,0.809],"y":[0.512,0.512,0.512]},"t":65,"s":[-97,-97,100]},{"t":72,"s":[0,0,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[156,156],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.478,1,0.984,0.5,0.278,0.68,0.802,1,0.078,0.361,0.62],"ix":9}},"s":{"a":0,"k":[-14.336,72.452],"ix":5},"e":{"a":0,"k":[6.629,-79.912],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-214,-187],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[-153.75,-148.75],[-180,-125.5],[-138.75,-100.75]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.478,1,0.984,0.5,0.278,0.68,0.802,1,0.078,0.361,0.62],"ix":9}},"s":{"a":0,"k":[-144,-109],"ix":5},"e":{"a":0,"k":[-167.75,-135.5],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":2,"op":182,"st":2,"ct":1,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"Layer 1","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":25,"s":[75]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":47,"s":[356]},{"t":70,"s":[75]}],"ix":10},"p":{"a":0,"k":[-215.794,-186.855,0],"ix":2,"l":2},"a":{"a":0,"k":[2.26,-6.556,0],"ix":1,"l":2},"s":{"a":0,"k":[113,113,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-10.351,0],[0,-10.351],[10.351,0],[0,10.351]],"o":[[10.351,0],[0,10.351],[-10.351,0],[0,-10.351]],"v":[[2.26,-25.299],[21.003,-6.556],[2.26,12.187],[-16.484,-6.556]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,0],[0.431,-2.202],[0,0],[3.123,-2.563],[0,0],[1.125,-1.94],[0,0],[-1.692,-1.471],[0,0],[0,-2.065],[-0.321,-1.974],[0,0],[-1.12,-1.945],[0,0],[-2.123,0.726],[0,0],[-3.844,-1.454],[0,0],[-2.244,0],[0,0],[-0.431,2.202],[0,0],[-3.123,2.563],[0,0],[-1.125,1.945],[0,0],[1.692,1.471],[0,0],[0,2.065],[0.321,1.974],[0,0],[1.12,1.945],[0,0],[2.123,-0.726],[0,0],[3.844,1.454],[0,0],[2.244,0]],"o":[[-2.244,0],[0,0],[-3.846,1.454],[0,0],[-2.123,-0.731],[0,0],[-1.12,1.945],[0,0],[-0.321,1.974],[0,2.065],[0,0],[-1.692,1.471],[0,0],[1.12,1.945],[0,0],[3.122,2.562],[0,0],[0.431,2.202],[0,0],[2.244,0],[0,0],[3.846,-1.454],[0,0],[2.123,0.731],[0,0],[1.12,-1.945],[0,0],[0.321,-1.974],[0,-2.065],[0,0],[1.692,-1.471],[0,0],[-1.12,-1.945],[0,0],[-3.122,-2.562],[0,0],[-0.431,-2.202],[0,0]],"v":[[-4.815,-53.413],[-9.409,-49.625],[-10.974,-41.589],[-21.499,-35.54],[-29.205,-38.194],[-34.787,-36.107],[-41.853,-23.862],[-40.873,-17.977],[-34.696,-12.605],[-35.227,-6.556],[-34.696,-0.506],[-40.873,4.866],[-41.853,10.75],[-34.787,22.996],[-29.205,25.091],[-21.499,22.437],[-10.974,28.478],[-9.409,36.513],[-4.815,40.302],[9.334,40.302],[13.928,36.513],[15.493,28.478],[26.018,22.428],[33.724,25.082],[39.306,22.996],[46.372,10.741],[45.392,4.866],[39.215,-0.506],[39.746,-6.556],[39.215,-12.605],[45.392,-17.977],[46.372,-23.862],[39.306,-36.107],[33.724,-38.203],[26.018,-35.549],[15.493,-41.589],[13.928,-49.625],[9.334,-53.413]],"c":true},"ix":2},"nm":"Path 2","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.478431402468,1,0.984313785329,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":5,"op":185,"st":5,"ct":1,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"chat 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":105,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.191,"y":0.488},"o":{"x":0.275,"y":0},"t":3,"s":[381,437.625,0],"to":[-13.583,10.333,0],"ti":[6.333,-7.333,0]},{"i":{"x":0.685,"y":1},"o":{"x":0.329,"y":0.69},"t":10,"s":[299.5,499.625,0],"to":[-6.333,7.333,0],"ti":[-7.25,3,0]},{"i":{"x":0.685,"y":1},"o":{"x":0.407,"y":0},"t":23,"s":[343,481.625,0],"to":[0,0,0],"ti":[7.25,-3,0]},{"i":{"x":0.671,"y":0.207},"o":{"x":0.315,"y":0},"t":53,"s":[343,481.625,0],"to":[-7.25,3,0],"ti":[-6.333,7.333,0]},{"i":{"x":0.725,"y":1},"o":{"x":0.809,"y":0.512},"t":66,"s":[299.5,499.625,0],"to":[6.333,-7.333,0],"ti":[-13.583,10.333,0]},{"t":73,"s":[381,437.625,0]}],"ix":2,"l":2},"a":{"a":0,"k":[-138.949,-100.735,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.191,0.191,0.191],"y":[0.488,0.488,1.512]},"o":{"x":[0.275,0.275,0.275],"y":[0,0,0]},"t":3,"s":[0,0,100]},{"i":{"x":[0.685,0.685,0.685],"y":[1,1,1]},"o":{"x":[0.329,0.329,0.329],"y":[0.731,0.731,-0.731]},"t":10,"s":[-99,-99,100]},{"i":{"x":[0.685,0.685,0.685],"y":[1,1,1]},"o":{"x":[0.462,0.462,0.462],"y":[0,0,0]},"t":23,"s":[-81,-81,100]},{"i":{"x":[0.671,0.671,0.671],"y":[3.124,3.124,0.614]},"o":{"x":[0.315,0.315,0.315],"y":[0,0,0]},"t":53,"s":[-81,-81,100]},{"i":{"x":[0.725,0.725,0.725],"y":[1,1,1]},"o":{"x":[0.809,0.809,0.809],"y":[0.512,0.512,0.512]},"t":66,"s":[-99,-99,100]},{"t":73,"s":[0,0,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[156,156],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.478,1,0.984,0.5,0.278,0.68,0.802,1,0.078,0.361,0.62],"ix":9}},"s":{"a":0,"k":[88.398,-27.639],"ix":5},"e":{"a":0,"k":[-66.084,25.63],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-214,-187],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[-153.75,-148.75],[-180,-125.5],[-138.75,-100.75]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.478,1,0.984,0.5,0.278,0.68,0.802,1,0.078,0.361,0.62],"ix":9}},"s":{"a":0,"k":[-144,-109],"ix":5},"e":{"a":0,"k":[-167.75,-135.5],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":3,"op":183,"st":3,"ct":1,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"Rectangle 3","parent":10,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":0.989},"o":{"x":0.333,"y":0},"t":31,"s":[-169.25,-184.375,0],"to":[0,-5,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0.011},"t":41,"s":[-169.25,-214.375,0],"to":[0,0,0],"ti":[0,-5,0]},{"i":{"x":0.667,"y":0.989},"o":{"x":0.185,"y":0},"t":51,"s":[-169.25,-184.375,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0.011},"t":61,"s":[-169.25,-214.375,0],"to":[0,0,0],"ti":[0,-5,0]},{"t":71,"s":[-169.25,-184.375,0]}],"ix":2,"l":2},"a":{"a":0,"k":[-169.25,-184.375,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[22.5,23.25],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.478,1,0.984,0.5,0.278,0.68,0.802,1,0.078,0.361,0.62],"ix":9}},"s":{"a":0,"k":[0,0],"ix":5},"e":{"a":0,"k":[100,0],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-169.25,-184.375],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 3","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":5,"op":185,"st":5,"ct":1,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"Rectangle 2","parent":10,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":28,"s":[-211.5,-184.375,0],"to":[0,-5,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":38,"s":[-211.5,-214.375,0],"to":[0,0,0],"ti":[0,-5,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.185,"y":0},"t":48,"s":[-211.5,-184.375,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":58,"s":[-211.5,-214.375,0],"to":[0,0,0],"ti":[0,-5,0]},{"t":68,"s":[-211.5,-184.375,0]}],"ix":2,"l":2},"a":{"a":0,"k":[-211.5,-184.375,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[22.5,23.25],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.478,1,0.984,0.5,0.278,0.68,0.802,1,0.078,0.361,0.62],"ix":9}},"s":{"a":0,"k":[0,0],"ix":5},"e":{"a":0,"k":[100,0],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-211.5,-184.375],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 2","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":5,"op":185,"st":5,"ct":1,"bm":0},{"ddd":0,"ind":9,"ty":4,"nm":"Rectangle 1","parent":10,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":25,"s":[-253.5,-184.375,0],"to":[0,-5,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":35,"s":[-253.5,-214.375,0],"to":[0,0,0],"ti":[0,-5,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.185,"y":0},"t":45,"s":[-253.5,-184.375,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":55,"s":[-253.5,-214.375,0],"to":[0,0,0],"ti":[0,-5,0]},{"t":65,"s":[-253.5,-184.375,0]}],"ix":2,"l":2},"a":{"a":0,"k":[-253.5,-184.375,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[22.5,23.25],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.478,1,0.984,0.5,0.278,0.68,0.802,1,0.078,0.361,0.62],"ix":9}},"s":{"a":0,"k":[0,0],"ix":5},"e":{"a":0,"k":[100,0],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-253.5,-184.375],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":5,"op":185,"st":5,"ct":1,"bm":0},{"ddd":0,"ind":10,"ty":4,"nm":"chat 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.191,"y":0.488},"o":{"x":0.275,"y":0},"t":4,"s":[378.5,317.25,0],"to":[-8.833,-5.417,0],"ti":[4.5,2.5,0]},{"i":{"x":0.685,"y":1},"o":{"x":0.329,"y":0.705},"t":11,"s":[325.5,284.75,0],"to":[-4.5,-2.5,0],"ti":[-4.333,-2.917,0]},{"i":{"x":0.685,"y":1},"o":{"x":0.407,"y":0},"t":24,"s":[351.5,302.25,0],"to":[0,0,0],"ti":[4.333,2.917,0]},{"i":{"x":0.671,"y":0.261},"o":{"x":0.315,"y":0},"t":54,"s":[351.5,302.25,0],"to":[-4.333,-2.917,0],"ti":[-4.5,-2.5,0]},{"i":{"x":0.725,"y":1},"o":{"x":0.809,"y":0.512},"t":67,"s":[325.5,284.75,0],"to":[4.5,2.5,0],"ti":[-8.833,-5.417,0]},{"t":74,"s":[378.5,317.25,0]}],"ix":2,"l":2},"a":{"a":0,"k":[-138,-100.25,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.191,0.191,0.191],"y":[0.488,0.488,1.512]},"o":{"x":[0.275,0.275,0.275],"y":[0,0,0]},"t":4,"s":[0,0,100]},{"i":{"x":[0.685,0.685,0.685],"y":[1,1,1]},"o":{"x":[0.329,0.329,0.329],"y":[0.731,0.731,-0.731]},"t":11,"s":[124,124,100]},{"i":{"x":[0.685,0.685,0.685],"y":[1,1,1]},"o":{"x":[0.462,0.462,0.462],"y":[0,0,0]},"t":24,"s":[100,100,100]},{"i":{"x":[0.671,0.671,0.671],"y":[2.996,2.996,0.614]},"o":{"x":[0.315,0.315,0.315],"y":[0,0,0]},"t":54,"s":[100,100,100]},{"i":{"x":[0.725,0.725,0.725],"y":[1,1,1]},"o":{"x":[0.809,0.809,0.809],"y":[0.512,0.512,0.512]},"t":67,"s":[124,124,100]},{"t":74,"s":[0,0,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[156,156],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.478,1,0.984,0.5,0.278,0.68,0.802,1,0.078,0.361,0.62],"ix":9}},"s":{"a":0,"k":[3,-84],"ix":5},"e":{"a":0,"k":[0,91],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-214,-187],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[-153.75,-148.75],[-180,-125.5],[-138.75,-100.75]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.478,1,0.984,0.5,0.278,0.68,0.802,1,0.078,0.361,0.62],"ix":9}},"s":{"a":0,"k":[-144,-109],"ix":5},"e":{"a":0,"k":[-167.75,-135.5],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":4,"op":184,"st":4,"ct":1,"bm":0},{"ddd":0,"ind":11,"ty":4,"nm":"r hand","parent":17,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":0,"s":[-133]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":15,"s":[-63]},{"i":{"x":[0.812],"y":[1]},"o":{"x":[0.65],"y":[0]},"t":20,"s":[-63]},{"t":28,"s":[-133]}],"ix":10},"p":{"a":0,"k":[-66.25,61.501,0],"ix":2,"l":2},"a":{"a":0,"k":[195.254,52.216,0],"ix":1,"l":2},"s":{"a":0,"k":[-100,-100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-13.945],[0,0],[10.25,-0.25],[2.5,13.25],[0,0],[-13.945,0]],"o":[[0,0],[-1.75,12.75],[-8.751,0.213],[0,0],[0,-13.945],[13.945,0]],"v":[[25.25,-22.25],[18,23.75],[0,47.5],[-17.75,22.5],[-25.25,-22.25],[0,-47.5]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.043,0.31,0.424,0.5,0.376,0.574,0.69,1,0.709,0.838,0.957],"ix":9}},"s":{"a":0,"k":[1.631,-73.168],"ix":5},"e":{"a":0,"k":[-1.716,53.741],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[196.25,101],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"ct":1,"bm":0},{"ddd":0,"ind":12,"ty":4,"nm":"l hand","parent":17,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":0,"s":[-46]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":15,"s":[-118]},{"i":{"x":[0.812],"y":[1]},"o":{"x":[0.65],"y":[0]},"t":20,"s":[-118]},{"t":28,"s":[-46]}],"ix":10},"p":{"a":0,"k":[69.75,63.001,0],"ix":2,"l":2},"a":{"a":0,"k":[197.784,53.645,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-13.945],[0,0],[10.25,-0.25],[2.5,13.25],[0,0],[-13.945,0]],"o":[[0,0],[-1.75,12.75],[-8.751,0.213],[0,0],[0,-13.945],[13.945,0]],"v":[[25.25,-22.25],[18,23.75],[0,47.5],[-17.75,22.5],[-25.25,-22.25],[0,-47.5]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.043,0.31,0.424,0.5,0.376,0.574,0.69,1,0.709,0.838,0.957],"ix":9}},"s":{"a":0,"k":[1.631,-73.168],"ix":5},"e":{"a":0,"k":[-1.716,53.741],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[196.25,101],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"ct":1,"bm":0},{"ddd":0,"ind":13,"ty":4,"nm":"mic","parent":15,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[83.253,-27.54,0],"ix":2,"l":2},"a":{"a":0,"k":[85.253,-23.54,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[54.625,4.5],[36.625,4.5]],"c":false}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":15,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[54.5,-16.5],[36.5,-16.5]],"c":false}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":20,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[54.5,-16.5],[36.5,-16.5]],"c":false}]},{"t":28,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[54.625,4.5],[36.625,4.5]],"c":false}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.478431402468,1,0.984313785329,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":20,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 2","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[{"i":[[0,0],[20.179,-15.211],[0,0]],"o":[[0,0],[-32.5,24.5],[0,0]],"v":[[131.5,-52],[115.25,-15.5],[36,4]],"c":false}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":15,"s":[{"i":[[0,0],[22.262,-11.957],[0,0]],"o":[[0,0],[-35.375,19],[0,0]],"v":[[131.5,-52],[115.375,-31],[35.875,-17]],"c":false}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":20,"s":[{"i":[[0,0],[22.262,-11.957],[0,0]],"o":[[0,0],[-35.375,19],[0,0]],"v":[[131.5,-52],[115.375,-31],[35.875,-17]],"c":false}]},{"t":28,"s":[{"i":[[0,0],[20.179,-15.211],[0,0]],"o":[[0,0],[-32.5,24.5],[0,0]],"v":[[131.5,-52],[115.25,-15.5],[36,4]],"c":false}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.478431402468,1,0.984313785329,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":8,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"ct":1,"bm":0},{"ddd":0,"ind":14,"ty":4,"nm":"face","parent":15,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[-2.508,-56.75,0],"to":[0,-3.333,0],"ti":[0,3.333,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":15,"s":[-2.508,-76.75,0],"to":[0,0,0],"ti":[0,-3.333,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":20,"s":[-2.508,-76.75,0],"to":[0,3.333,0],"ti":[0,-3.333,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":28,"s":[-2.508,-56.75,0],"to":[0,3.333,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":30,"s":[-2.508,-56.75,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.167,"y":0.167},"t":45,"s":[-28.508,-68.75,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":49,"s":[-28.508,-68.75,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.167,"y":0.167},"t":64,"s":[8.992,-45.25,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":67,"s":[8.992,-45.25,0],"to":[0,0,0],"ti":[0,0,0]},{"t":75,"s":[-2.508,-56.75,0]}],"ix":2,"l":2},"a":{"a":0,"k":[-2.508,-68.25,0],"ix":1,"l":2},"s":{"a":0,"k":[69,69,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-34.42,1.268],[0,0]],"o":[[0,0],[28.082,-1.035],[0,0]],"v":[[-34.743,-41.62],[0.764,-9.373],[31.199,-40.533]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[{"i":[[-11.106,0],[0,-20.31],[11.106,0],[0,20.31]],"o":[[11.106,0],[0,20.31],[-11.106,0],[0,-20.31]],"v":[[0,-36.775],[20.109,0],[0,36.775],[-20.109,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":15,"s":[{"i":[[-11.106,0],[0,-20.31],[11.106,0],[0,20.31]],"o":[[11.106,0],[0,20.31],[-11.106,0],[0,-20.31]],"v":[[0,-36.775],[20.109,0],[0.323,9.964],[-20.109,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":20,"s":[{"i":[[-11.106,0],[0,-20.31],[11.106,0],[0,20.31]],"o":[[11.106,0],[0,20.31],[-11.106,0],[0,-20.31]],"v":[[0,-36.775],[20.109,0],[0.323,9.964],[-20.109,0]],"c":true}]},{"t":28,"s":[{"i":[[-11.106,0],[0,-20.31],[11.106,0],[0,20.31]],"o":[[11.106,0],[0,20.31],[-11.106,0],[0,-20.31]],"v":[[0,-36.775],[20.109,0],[0,36.775],[-20.109,0]],"c":true}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.478431402468,1,0.984313785329,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[69.061,-72.054],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":42,"s":[100,100]},{"i":{"x":[0.667,0.667],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":46,"s":[100,0]},{"i":{"x":[0.667,0.667],"y":[1,1]},"o":{"x":[0.296,0.296],"y":[0,0]},"t":50,"s":[100,100]},{"i":{"x":[0.667,0.667],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":60,"s":[100,100]},{"i":{"x":[0.667,0.667],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":64,"s":[100,0]},{"t":68,"s":[100,100]}],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 3","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[{"i":[[-11.106,0],[0,-20.31],[11.106,0],[0,20.31]],"o":[[11.106,0],[0,20.31],[-11.106,0],[0,-20.31]],"v":[[0,-36.775],[20.109,0],[0,36.775],[-20.109,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":15,"s":[{"i":[[-11.106,0],[0,-20.31],[11.106,0],[0,20.31]],"o":[[11.106,0],[0,20.31],[-11.106,0],[0,-20.31]],"v":[[0,-36.775],[20.109,0],[0.725,12.138],[-20.109,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":20,"s":[{"i":[[-11.106,0],[0,-20.31],[11.106,0],[0,20.31]],"o":[[11.106,0],[0,20.31],[-11.106,0],[0,-20.31]],"v":[[0,-36.775],[20.109,0],[0.725,12.138],[-20.109,0]],"c":true}]},{"t":28,"s":[{"i":[[-11.106,0],[0,-20.31],[11.106,0],[0,20.31]],"o":[[11.106,0],[0,20.31],[-11.106,0],[0,-20.31]],"v":[[0,-36.775],[20.109,0],[0,36.775],[-20.109,0]],"c":true}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.478431402468,1,0.984313785329,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-72.243,-72.054],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":42,"s":[100,100]},{"i":{"x":[0.667,0.667],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":46,"s":[100,0]},{"i":{"x":[0.667,0.667],"y":[1,1]},"o":{"x":[0.296,0.296],"y":[0,0]},"t":50,"s":[100,100]},{"i":{"x":[0.667,0.667],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":60,"s":[100,100]},{"i":{"x":[0.667,0.667],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"t":64,"s":[100,0]},{"t":68,"s":[100,100]}],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 2","np":3,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-71.521,0],[-6.667,-65.383],[71.521,0],[-9.076,85.953]],"o":[[71.521,0],[8.359,81.967],[-71.521,0],[6.902,-65.359]],"v":[[0,-119],[134.674,1.449],[-0.04,71.703],[-131.225,-0.362]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.078431372549,0.360784313725,0.619607843137,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-3.5,-60],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":4,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"ct":1,"bm":0},{"ddd":0,"ind":15,"ty":4,"nm":"head","parent":17,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-0.508,49,0],"ix":2,"l":2},"a":{"a":0,"k":[-2.508,42.5,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[70.5,-145.625],[103.375,-212]],"c":false}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":15,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[70.5,-145.625],[87.875,-177.5]],"c":false}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":20,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[70.5,-145.625],[87.875,-177.5]],"c":false}]},{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":28,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[70.5,-145.625],[103.375,-212]],"c":false}]},{"t":75,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[70.5,-145.625],[103.375,-212]],"c":false}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.478431402468,1,0.984313785329,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":8,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[18.75,13],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.121568634931,0.152941176471,0.105882360421,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0.5,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.286274509804,0.658823529412,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[69.125,-143.313],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":27,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 2","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-71.521,0],[-6.497,-65.4],[71.521,0],[-7.5,75]],"o":[[71.521,0],[7.5,75.5],[-71.521,0],[6.54,-65.396]],"v":[[0,-119],[132.5,0],[0,102.5],[-130.5,0]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.043,0.31,0.424,0.5,0.376,0.574,0.69,1,0.709,0.838,0.957],"ix":9}},"s":{"a":0,"k":[-210,3],"ix":5},"e":{"a":0,"k":[93,2],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-3.5,-60],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"ct":1,"bm":0},{"ddd":0,"ind":16,"ty":4,"nm":"ear","parent":15,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[-126.25,-59.25,0],"to":[0,1.667,0],"ti":[0,-1.667,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":15,"s":[-126.25,-49.25,0],"to":[0,0,0],"ti":[0,1.667,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":20,"s":[-126.25,-49.25,0],"to":[0,-1.667,0],"ti":[0,1.667,0]},{"i":{"x":0.593,"y":0.354},"o":{"x":0.252,"y":0},"t":28,"s":[-126.25,-59.25,0],"to":[0,-0.042,0],"ti":[0,0.038,0]},{"i":{"x":0.689,"y":1},"o":{"x":0.251,"y":0.05},"t":30,"s":[-126.25,-59.369,0],"to":[0,-1.465,0],"ti":[0,0,0]},{"i":{"x":0.689,"y":0.689},"o":{"x":0.167,"y":0.167},"t":45,"s":[-119.75,-57.75,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.689,"y":1},"o":{"x":0.167,"y":0},"t":49,"s":[-119.75,-57.75,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.689,"y":0.689},"o":{"x":0.167,"y":0.167},"t":64,"s":[-131.75,-69.25,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":67,"s":[-131.75,-69.25,0],"to":[0,0,0],"ti":[0,0,0]},{"t":75,"s":[-126.25,-59.25,0]}],"ix":2,"l":2},"a":{"a":0,"k":[-124.25,-55.25,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[50.5,50.5],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.078431372549,0.360784313725,0.619607843137,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[127.25,-55.25],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 2","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[50.5,50.5],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.078431372549,0.360784313725,0.619607843137,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-124.25,-55.25],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"ct":1,"bm":0},{"ddd":0,"ind":17,"ty":4,"nm":"body","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[487.5,509.75,0],"to":[0,-10,0],"ti":[0,10,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":15,"s":[487.5,449.75,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":17,"s":[487.5,449.75,0],"to":[0,10,0],"ti":[0,-10,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":28,"s":[487.5,509.75,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":30,"s":[487.5,509.75,0],"to":[2.333,0,0],"ti":[-2.333,0,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":45,"s":[501.5,509.75,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":49,"s":[501.5,509.75,0],"to":[-4.833,0,0],"ti":[4.833,0,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":64,"s":[472.5,509.75,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":67,"s":[472.5,509.75,0],"to":[2.5,0,0],"ti":[-2.5,0,0]},{"t":75,"s":[487.5,509.75,0]}],"ix":2,"l":2},"a":{"a":0,"k":[-0.5,108.25,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[19.75,19.75],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.478431402468,1,0.984313785329,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[23.625,103.375],"to":[0,-2],"ti":[0,2]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":15,"s":[23.625,91.375],"to":[0,0],"ti":[0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":19,"s":[23.625,91.375],"to":[0,2],"ti":[0,-2]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":28,"s":[23.625,103.375],"to":[0,0],"ti":[0,0]},{"t":75,"s":[23.625,103.375]}],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-18.225],[0,0],[18.225,0],[0,0],[1.5,14.5],[0,0],[-18.225,0],[0,0]],"o":[[0,0],[-4.25,18.75],[0,0],[-20,-0.5],[0,0],[0,-18.225],[0,0],[18.225,0]],"v":[[54.5,-11],[49.5,18.25],[9,52.625],[-9,52.625],[-49.5,16.75],[-53.75,-13.75],[-9,-47.75],[9,-47.75]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.043,0.31,0.424,0.5,0.376,0.574,0.69,1,0.709,0.838,0.957],"ix":9}},"s":{"a":0,"k":[-96,-4],"ix":5},"e":{"a":0,"k":[72,0],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-0.5,108.25],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"ct":1,"bm":0},{"ddd":0,"ind":18,"ty":4,"nm":"tail","parent":17,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":33,"s":[0.625,143.665,0],"to":[2.833,0.5,0],"ti":[-2.833,-0.5,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":45,"s":[17.625,146.665,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.744,"y":1},"o":{"x":0.676,"y":0},"t":49,"s":[17.625,146.665,0],"to":[-6.167,0,0],"ti":[6.167,0,0]},{"i":{"x":0.744,"y":0.744},"o":{"x":0.333,"y":0.333},"t":64,"s":[-19.375,146.665,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":67,"s":[-19.375,146.665,0],"to":[3.333,-0.5,0],"ti":[-3.333,0.5,0]},{"t":75,"s":[0.625,143.665,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0.625,141.165,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":0,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":15,"s":[93,177,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":17,"s":[93,177,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":28,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":33,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":45,"s":[97,128,100]},{"i":{"x":[0.744,0.744,0.744],"y":[1,1,1]},"o":{"x":[0.676,0.676,0.676],"y":[0,0,0]},"t":49,"s":[97,128,100]},{"i":{"x":[0.744,0.744,0.744],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":64,"s":[97,128,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":67,"s":[97,128,100]},{"t":75,"s":[100,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[48.25,48.25],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.517647058824,0.988235353956,0.988235353956,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-0.125,159.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[76,76],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 2","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[48.25,48.25],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.043,0.31,0.424,0.5,0.376,0.574,0.69,1,0.709,0.838,0.957],"ix":9}},"s":{"a":0,"k":[-1,-23],"ix":5},"e":{"a":0,"k":[-1,29],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0.625,165.875],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"ct":1,"bm":0}]'),markers$1=[],chatbotAnimation={v:v$1,fr:fr$1,ip:ip$1,op:op$1,w:w$1,h:h$1,nm:nm$1,ddd:ddd$1,assets:assets$1,layers:layers$1,markers:markers$1},painPoints=[{text:"No idea if market exists",delay:.3},{text:"Competitor confusion",delay:.45},{text:"No clear MVP roadmap",delay:.6},{text:"Wasted building costs",delay:.75}],ProblemSection=()=>jsxRuntimeExports.jsxs("section",{id:"features",className:"pt-24 pb-12 relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-0 -translate-y-1/2 w-[500px] h-[500px] bg-red-600/8 blur-[160px] rounded-full pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-1/4 w-72 h-72 bg-accent/8 blur-[120px] rounded-full pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-6 relative z-10",children:jsxRuntimeExports.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-stretch",children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.85},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.9,ease:"easeOut"},className:"flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center overflow-hidden",style:{height:"100%",maxHeight:"650px"},children:jsxRuntimeExports.jsx(Lottie,{animationData:chatbotAnimation,loop:!0,autoplay:!0,style:{width:"100%",maxWidth:"750px",height:"650px",objectFit:"contain"}})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.7},className:"mb-12",children:jsxRuntimeExports.jsxs("h2",{className:"text-5xl md:text-6xl font-display font-black tracking-tight text-white leading-[1.05]",children:["Great Ideas die in"," ",jsxRuntimeExports.jsx("span",{className:"text-red-500 italic",children:"uncertainty."})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[painPoints.map((u,n)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:40},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:u.delay},className:"flex items-center gap-4 group",children:[jsxRuntimeExports.jsx(motion.div,{className:"flex-shrink-0 w-2 h-2 rounded-full bg-red-500",animate:{opacity:[1,.4,1]},transition:{duration:2,repeat:1/0,delay:n*.4}}),jsxRuntimeExports.jsx("p",{className:"text-lg md:text-xl text-slate-300 font-medium group-hover:text-white transition-colors duration-200",children:u.text})]},n)),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:1},className:"mt-10 pt-10 border-t border-white/10",children:[jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-sm uppercase tracking-widest font-medium mb-3",children:"The solution"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-display font-bold text-white",children:"Your AI Co-Founder validates before you build."})]})]})]})]})})]});let stylesInjected=!1;const injectGlobalStyles=()=>{if(stylesInjected)return;const u=document.createElement("style");u.innerHTML=`
    @keyframes move-gradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
  `,document.head.appendChild(u),stylesInjected=!0},NeonGradient=({children:u,className:n="",colors:s="from-pink-600 via-purple-600 to-blue-500",blurSize:f="blur-2xl",padding:d="p-[1px]",rounded:y="rounded-[2.5rem]"})=>{reactExports.useEffect(()=>{injectGlobalStyles()},[]);const _={backgroundSize:"200% 200%",animation:"move-gradient 4s ease-in-out infinite"};return jsxRuntimeExports.jsxs("div",{className:`relative group ${n}`,children:[jsxRuntimeExports.jsx("div",{className:`absolute -inset-2 bg-gradient-to-r ${s} ${y} ${f} opacity-60 group-hover:opacity-90 transition duration-700 group-hover:duration-200`,style:_}),jsxRuntimeExports.jsx("div",{className:`relative ${y} bg-gradient-to-r ${s} ${d} transition-all duration-500`,style:_,children:u})]})},SolutionSection=()=>{const[u,n]=reactExports.useState(0);return jsxRuntimeExports.jsx("section",{id:"features",className:"pt-12 pb-32 bg-background relative overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[jsxRuntimeExports.jsx("div",{className:"text-center max-w-5xl mx-auto mb-24 space-y-6",children:jsxRuntimeExports.jsxs(motion.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-4xl sm:text-6xl lg:text-7xl font-display font-black leading-tight text-white italic whitespace-nowrap",children:["From idea ",jsxRuntimeExports.jsx("span",{className:"text-accent/50 mx-2 text-3xl sm:text-5xl",children:""})," clarity ",jsxRuntimeExports.jsx("span",{className:"text-accent/50 mx-2 text-3xl sm:text-5xl",children:""})," ",jsxRuntimeExports.jsx("span",{className:"text-glow text-accent",children:"execution."})]})}),jsxRuntimeExports.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 items-stretch",children:[jsxRuntimeExports.jsx(FeatureCard,{title:"1 Idea Validation",glowColor:"rgba(79, 156, 249, 0.4)",neonColors:"from-blue-500 via-cyan-400 to-blue-700",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6 mt-6",children:[jsxRuntimeExports.jsxs("div",{className:"relative w-32 h-32 mx-auto",children:[jsxRuntimeExports.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[jsxRuntimeExports.jsx("circle",{cx:"64",cy:"64",r:"58",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-white/5"}),jsxRuntimeExports.jsx(motion.circle,{initial:{strokeDasharray:"0, 1000"},whileInView:{strokeDasharray:"330, 1000"},viewport:{once:!0},transition:{duration:2,delay:.5},cx:"64",cy:"64",r:"58",stroke:"currentColor",strokeWidth:"8",fill:"transparent",strokeDasharray:"364.4",className:"text-accent drop-shadow-[0_0_12px_rgba(79,156,249,0.8)]"})]}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsx("span",{className:"text-3xl font-black text-white",children:"92"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Score"})]})]}),jsxRuntimeExports.jsxs("ul",{className:"space-y-3 text-sm text-slate-400",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14,className:"text-accent"})," SWOT Analysis"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14,className:"text-accent"})," Competitor Insights"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14,className:"text-accent"})," Risk Breakdown"]})]})]})}),jsxRuntimeExports.jsx(FeatureCard,{title:"2 MVP Roadmap",glowColor:"rgba(192, 132, 252, 0.4)",neonColors:"from-purple-600 via-fuchsia-500 to-pink-600",children:jsxRuntimeExports.jsx("div",{className:"space-y-3 mt-6",children:[{t:"Week 1",d:"Problem Validation & High-fidelity mockup"},{t:"Month 1",d:"Core MVP build & Beta user tests"},{t:"Quarter 1",d:"Public Launch & Metrics tracking"}].map((s,f)=>jsxRuntimeExports.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/5 cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>n(u===f?null:f),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-white",children:s.t}),jsxRuntimeExports.jsx(ChevronDown,{size:14,className:`text-slate-500 transition-transform ${u===f?"rotate-180":""}`})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:u===f&&jsxRuntimeExports.jsx(motion.p,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"text-xs text-slate-500 mt-2 leading-relaxed overflow-hidden",children:s.d})})]},f))})}),jsxRuntimeExports.jsx(FeatureCard,{title:"3 Landing Copy",glowColor:"rgba(52, 211, 153, 0.4)",neonColors:"from-emerald-500 via-teal-400 to-green-600",children:jsxRuntimeExports.jsxs("div",{className:"mt-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"aspect-video rounded-xl bg-white/5 border border-white/5 p-4 flex flex-col justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"h-2 w-2/3 bg-emerald-400/20 rounded-full"}),jsxRuntimeExports.jsx("div",{className:"h-2 w-full bg-white/10 rounded-full"}),jsxRuntimeExports.jsx("div",{className:"h-2 w-1/2 bg-white/10 rounded-full"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx(motion.div,{whileHover:{scale:1.1},className:"p-2 rounded-lg bg-accent/20 text-accent cursor-pointer",children:jsxRuntimeExports.jsx(PenTool,{size:14})})})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500 leading-relaxed italic",children:"High-converting headlines, value props, and 30-sec pitch scripts in one click."})]})})]})]})})},FeatureCard=({title:u,children:n,glowColor:s,neonColors:f})=>jsxRuntimeExports.jsx(motion.div,{whileHover:{y:-10},initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,ease:"easeOut"},className:"h-full",children:jsxRuntimeExports.jsx(NeonGradient,{colors:f||"from-pink-600 via-purple-600 to-blue-500",rounded:"rounded-[2.5rem]",className:"h-full",children:jsxRuntimeExports.jsxs("div",{className:"p-8 rounded-[2.5rem] bg-[#0a0a12] h-full flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-display font-black text-white italic mb-2",children:u}),jsxRuntimeExports.jsx("div",{className:"flex-grow",children:n})]})})}),steps=[{icon:jsxRuntimeExports.jsx(MousePointer2,{size:24}),title:"1. Enter Idea",desc:"Describe your vision in plain English."},{icon:jsxRuntimeExports.jsx(Cpu,{size:24}),title:"2. AI Validates",desc:"Our AI cats crunch market data for you."},{icon:jsxRuntimeExports.jsx(Zap,{size:24}),title:"3. Get Roadmap",desc:"Execute with a clear, data-driven plan."}],HowItWorks=()=>jsxRuntimeExports.jsx("section",{className:"py-32 bg-background relative overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[jsxRuntimeExports.jsx("div",{className:"text-center mb-20",children:jsxRuntimeExports.jsxs(motion.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-6xl md:text-8xl font-display font-black text-white italic",children:["How it ",jsxRuntimeExports.jsx("span",{className:"text-glow text-accent",children:"works."})]})}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-0 w-full h-px bg-white/5 -translate-y-1/2 hidden md:block",children:jsxRuntimeExports.jsx(motion.div,{initial:{scaleX:0},whileInView:{scaleX:1},viewport:{once:!0},transition:{duration:1.5,ease:"easeInOut"},className:"w-full h-full bg-accent origin-left opacity-30 shadow-[0_0_10px_#4F9CF9]"})}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-3 gap-12 relative z-10",children:steps.map((u,n)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:n*.2},className:"flex flex-col items-center text-center space-y-6 group",children:[jsxRuntimeExports.jsx(NeonGradient,{rounded:"rounded-2xl",padding:"p-[2px]",colors:n===0?"from-pink-500 via-purple-500 to-blue-500":n===1?"from-blue-500 via-cyan-400 to-teal-500":"from-emerald-500 via-green-400 to-teal-500",children:jsxRuntimeExports.jsx(motion.div,{whileHover:{scale:1.1,rotate:5},className:"w-20 h-20 rounded-2xl bg-[#0a0a12] flex items-center justify-center text-accent shadow-xl transition-colors",children:u.icon})}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-display font-black text-white italic",children:u.title}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 font-medium max-w-[200px]",children:u.desc})]})]},n))})]})]})}),CommunityCTA=()=>{const[u,n]=reactExports.useState(""),[s,f]=reactExports.useState("idle"),d=y=>{if(y.preventDefault(),!u||!u.includes("@")){f("error"),setTimeout(()=>f("idle"),3e3);return}f("loading"),setTimeout(()=>{f("success"),n(""),setTimeout(()=>f("idle"),5e3)},1500)};return jsxRuntimeExports.jsxs("section",{className:"relative py-32 px-6 overflow-hidden bg-[#0B0F19]",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-[#4F9CF9]/10 blur-[160px] rounded-full pointer-events-none"}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8,ease:[.16,1,.3,1]},className:"text-center mb-16",children:[jsxRuntimeExports.jsxs("h2",{className:"text-6xl sm:text-7xl lg:text-8xl font-display font-black text-white mb-6 tracking-tight italic leading-[0.95]",children:["Join our ",jsxRuntimeExports.jsx("span",{className:"text-glow text-accent",children:"Community."})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-xl md:text-2xl font-medium max-w-2xl mx-auto uppercase tracking-widest opacity-80",children:"Have any idea? Reach us out."})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8,delay:.2,ease:[.16,1,.3,1]},className:"relative max-w-2xl mx-auto",children:[jsxRuntimeExports.jsx("form",{onSubmit:d,className:"relative group",children:jsxRuntimeExports.jsxs("div",{className:`
              relative flex flex-col md:flex-row items-center gap-3 p-2 bg-[#111827]/40 backdrop-blur-xl 
              border-2 rounded-2xl lg:rounded-full transition-all duration-300
              ${s==="error"?"border-red-500/50 shadow-[0_0_20px_rgba(239,68,68,0.1)]":s==="success"?"border-green-500/50 shadow-[0_0_20px_rgba(34,197,94,0.1)]":"border-white/5 focus-within:border-[#4F9CF9]/30 focus-within:shadow-[0_0_30px_rgba(79,156,249,0.1)]"}
            `,children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 flex items-center w-full px-4",children:[jsxRuntimeExports.jsx(Mail,{className:`w-5 h-5 mr-3 transition-colors ${s==="error"?"text-red-400":"text-gray-500 group-focus-within:text-[#4F9CF9]"}`}),jsxRuntimeExports.jsx("input",{type:"email",value:u,onChange:y=>n(y.target.value),placeholder:"Enter your email",className:"bg-transparent border-none focus:ring-0 text-white placeholder-gray-500 w-full py-4 font-medium"})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:s==="loading",className:`w-full md:w-auto px-8 py-4 bg-[#4F9CF9] text-white rounded-xl lg:rounded-full font-black flex items-center justify-center gap-2 \r
                       hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 shadow-[0_10px_20px_-5px_rgba(79,156,249,0.4)] hover:shadow-[#4F9CF9]/50`,children:s==="loading"?jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"Submit"}),jsxRuntimeExports.jsx(ArrowRight,{className:"w-5 h-5"})]})})]})}),jsxRuntimeExports.jsxs(AnimatePresence,{children:[s==="success"&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute -bottom-16 left-0 right-0 flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-500/10 border border-green-500/20 rounded-full text-green-400 font-bold text-sm shadow-lg backdrop-blur-sm",children:[jsxRuntimeExports.jsx(CircleCheck,{size:16}),jsxRuntimeExports.jsx("span",{children:"Thanks for joining "})]})}),s==="error"&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute -bottom-16 left-0 right-0 flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-red-500/10 border border-red-500/20 rounded-full text-red-400 font-bold text-sm shadow-lg backdrop-blur-sm",children:[jsxRuntimeExports.jsx(CircleAlert,{size:16}),jsxRuntimeExports.jsx("span",{children:"Invalid email address"})]})})]})]})]})]})},socialLinks=[{icon:Github,href:"#",label:"GitHub"},{icon:Twitter,href:"#",label:"Twitter"},{icon:Linkedin,href:"#",label:"LinkedIn"}],footerLinks=[{title:"Product",links:[{name:"Features",href:"#"},{name:"Roadmap",href:"#"},{name:"Integrations",href:"#"}]},{title:"Company",links:[{name:"About",href:"#"},{name:"GitHub",href:"https://github.com"},{name:"Privacy",href:"#"}]}],Footer=()=>jsxRuntimeExports.jsx("footer",{className:"bg-[#0B0F19] pt-24 pb-12 px-6 border-t border-white/[0.05]",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 lg:gap-8 mb-20 text-center md:text-left",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"lg:col-span-2 flex flex-col items-center md:items-start",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-8 group cursor-default",children:[jsxRuntimeExports.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-[#4F9CF9]/20 to-[#4F9CF9]/5 rounded-2xl flex items-center justify-center text-[#4F9CF9] shadow-[0_0_15px_rgba(79,156,249,0.15)] group-hover:shadow-[0_0_30px_rgba(79,156,249,0.4)] transition-all duration-300 border border-white/5",children:jsxRuntimeExports.jsx(Compass,{size:32})}),jsxRuntimeExports.jsx("span",{className:"text-3xl font-display font-black text-white tracking-tight italic text-glow",children:"Startup Copilot"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 font-medium mb-10 max-w-sm leading-relaxed text-lg opacity-80",children:"AI-powered startup execution. Build your vision with intelligence and speed."}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-5",children:socialLinks.map(u=>{const n=u.icon;return jsxRuntimeExports.jsx(motion.a,{href:u.href,whileHover:{scale:1.15,y:-4},whileTap:{scale:.95},className:"w-12 h-12 bg-[#111827] border border-white/[0.08] rounded-2xl flex items-center justify-center text-gray-400 hover:text-white hover:border-[#4F9CF9]/40 hover:shadow-[0_0_20px_rgba(79,156,249,0.25)] transition-all duration-300","aria-label":u.label,children:jsxRuntimeExports.jsx(n,{size:24})},u.label)})})]}),footerLinks.map((u,n)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.1*(n+1)},children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-black uppercase tracking-widest text-xs mb-8",children:u.title}),jsxRuntimeExports.jsx("ul",{className:"space-y-4",children:u.links.map(s=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs("a",{href:s.href,className:"text-gray-400 hover:text-white transition-colors font-medium text-sm inline-block group relative",children:[jsxRuntimeExports.jsx("span",{children:s.name}),jsxRuntimeExports.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-px bg-[#4F9CF9] transition-all group-hover:w-full"})]})},s.name))})]},u.title))]}),jsxRuntimeExports.jsx("div",{className:"pt-8 border-t border-white/[0.05] flex flex-col md:flex-row items-center justify-center",children:jsxRuntimeExports.jsxs("p",{className:"text-gray-500 text-sm font-medium tracking-tight",children:[" ",new Date().getFullYear()," Startup Copilot. All rights reserved."]})})]})}),LandingPage=()=>jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background selection:bg-accent/30 overflow-x-hidden font-sans",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsx(HeroSection,{}),jsxRuntimeExports.jsx(ProblemSection,{}),jsxRuntimeExports.jsx(SolutionSection,{}),jsxRuntimeExports.jsx(HowItWorks,{}),jsxRuntimeExports.jsx(CommunityCTA,{})]}),jsxRuntimeExports.jsx(Footer,{})]});function getPupilOffset(u,n,s,f,d,y){if(!d)return{x:0,y:0};const _=d.width/260,A=d.height/260,R=d.left+s*_,I=d.top+f*A,G=u-R,Y=n-I,q=Math.sqrt(G*G+Y*Y);if(q===0)return{x:0,y:0};const K=Math.min(q,80)/80;return{x:G/q*y*K,y:Y/q*y*K}}const CopilotCat=({mode:u})=>{const[n,s]=reactExports.useState(!1),f=useReducedMotion(),d=reactExports.useRef(null),[y,_]=reactExports.useState({x:0,y:0}),[A,R]=reactExports.useState({x:0,y:0}),I=u==="happy",G=u==="thinking";reactExports.useEffect(()=>{if(f)return;const q=()=>(s(!0),setTimeout(()=>s(!1),130),setTimeout(q,Math.random()*3e3+2500)),K=q();return()=>clearTimeout(K)},[f]),reactExports.useEffect(()=>{if(f)return;const q=K=>{var ne;const Q=((ne=d.current)==null?void 0:ne.getBoundingClientRect())??null;_(getPupilOffset(K.clientX,K.clientY,90,118,Q,7)),R(getPupilOffset(K.clientX,K.clientY,155,118,Q,7))};return window.addEventListener("mousemove",q),()=>window.removeEventListener("mousemove",q)},[f]);const Y=()=>{switch(u){case"signup":return-5;case"login":return 5;case"thinking":return-10;case"concerned":return 8;default:return 0}};return jsxRuntimeExports.jsxs("div",{className:"relative w-80 h-80 flex items-center justify-center overflow-visible select-none",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute bottom-4 left-1/2 -translate-x-1/2 w-44 h-8 rounded-full",style:{background:"radial-gradient(ellipse, #c4b5fd 0%, #818cf8 40%, transparent 70%)"},animate:{opacity:[.25,.55,.25],scaleX:[.9,1.15,.9]},transition:{duration:3.5,repeat:1/0,ease:"easeInOut"}}),jsxRuntimeExports.jsxs("svg",{ref:d,viewBox:"0 0 260 260",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full overflow-visible",children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("linearGradient",{id:"bodyGrad",x1:"130",y1:"30",x2:"150",y2:"215",gradientUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#2E1065"}),jsxRuntimeExports.jsx("stop",{offset:"55%",stopColor:"#1E0B52"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#0D0728"})]}),jsxRuntimeExports.jsxs("radialGradient",{id:"bodyGloss",cx:"0.4",cy:"0.18",r:"0.55",gradientUnits:"objectBoundingBox",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#7C3AED",stopOpacity:"0.30"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#7C3AED",stopOpacity:"0"})]}),jsxRuntimeExports.jsxs("radialGradient",{id:"irisGrad",cx:"0.42",cy:"0.38",r:"0.65",gradientUnits:"objectBoundingBox",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#6EE7D8"}),jsxRuntimeExports.jsx("stop",{offset:"35%",stopColor:"#14B8A6"}),jsxRuntimeExports.jsx("stop",{offset:"70%",stopColor:"#0D9488"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#134E4A"})]}),jsxRuntimeExports.jsxs("radialGradient",{id:"pupilGrad",cx:"0.5",cy:"0.5",r:"0.5",gradientUnits:"objectBoundingBox",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#1E1040"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#080414"})]}),jsxRuntimeExports.jsxs("linearGradient",{id:"pawGrad",x1:"0",y1:"0",x2:"0",y2:"1",gradientUnits:"objectBoundingBox",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#3B1882"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#1E0B4A"})]}),jsxRuntimeExports.jsx("filter",{id:"catShadow",x:"-25%",y:"-25%",width:"150%",height:"160%",children:jsxRuntimeExports.jsx("feDropShadow",{dx:"0",dy:"8",stdDeviation:"12",floodColor:"#1A0B4D",floodOpacity:"0.4"})}),jsxRuntimeExports.jsxs("filter",{id:"eyeGlow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:"2",result:"blur"}),jsxRuntimeExports.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]})]}),jsxRuntimeExports.jsx(motion.path,{d:"M196 185C215 180 238 192 240 174C242 157 224 145 206 158",stroke:"#1E0D52",strokeWidth:"16",strokeLinecap:"round",fill:"none",style:{transformOrigin:"200px 185px"},animate:{rotate:u==="signup"?[-12,12,-12]:[-6,6,-6]},transition:{duration:2.8,repeat:1/0,ease:"easeInOut",repeatType:"mirror"}}),jsxRuntimeExports.jsx(motion.g,{animate:{y:[0,-8,0]},transition:{duration:4.5,repeat:1/0,ease:"easeInOut"},children:jsxRuntimeExports.jsxs(motion.g,{animate:{rotate:Y()},transition:{type:"spring",stiffness:70,damping:16},style:{transformOrigin:"130px 150px"},children:[jsxRuntimeExports.jsx("circle",{cx:"130",cy:"140",r:"95",fill:"url(#bodyGrad)",filter:"url(#catShadow)"}),jsxRuntimeExports.jsx("ellipse",{cx:"102",cy:"90",rx:"54",ry:"44",fill:"url(#bodyGloss)"}),jsxRuntimeExports.jsx("path",{d:"M210 100 Q226 140 210 185",stroke:"#6D28D9",strokeWidth:"8",strokeLinecap:"round",opacity:"0.12",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M66 70L44 20L100 58",fill:"#241054",stroke:"#241054",strokeWidth:"3",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M70 67L52 26L90 55",fill:"#F9A8D4",opacity:"0.65"}),jsxRuntimeExports.jsx("path",{d:"M194 70L216 20L160 58",fill:"#241054",stroke:"#241054",strokeWidth:"3",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M190 67L208 26L170 55",fill:"#F9A8D4",opacity:"0.65"}),jsxRuntimeExports.jsxs(motion.g,{animate:{scaleY:n?.04:1},transition:{duration:.09},style:{transformOrigin:"122px 118px"},children:[jsxRuntimeExports.jsx("circle",{cx:"90",cy:"118",r:"36",fill:"url(#irisGrad)",filter:"url(#eyeGlow)"}),jsxRuntimeExports.jsx(motion.circle,{r:"19",fill:"url(#pupilGrad)",animate:{cx:90+y.x,cy:118+y.y},transition:{type:"spring",stiffness:800,damping:18}}),jsxRuntimeExports.jsx("ellipse",{cx:"100",cy:"106",rx:"9",ry:"6",fill:"white",opacity:"0.92",transform:"rotate(-25 100 106)"}),jsxRuntimeExports.jsx("circle",{cx:"80",cy:"112",r:"3.5",fill:"white",opacity:"0.65"}),jsxRuntimeExports.jsx("circle",{cx:"155",cy:"118",r:"36",fill:"url(#irisGrad)",filter:"url(#eyeGlow)"}),jsxRuntimeExports.jsx(motion.circle,{r:"19",fill:"url(#pupilGrad)",animate:{cx:155+A.x,cy:118+A.y},transition:{type:"spring",stiffness:800,damping:18}}),jsxRuntimeExports.jsx("ellipse",{cx:"165",cy:"106",rx:"9",ry:"6",fill:"white",opacity:"0.92",transform:"rotate(-25 165 106)"}),jsxRuntimeExports.jsx("circle",{cx:"145",cy:"112",r:"3.5",fill:"white",opacity:"0.65"})]}),jsxRuntimeExports.jsx("ellipse",{cx:"122",cy:"160",rx:"7",ry:"6",fill:"#F9A8D4"}),jsxRuntimeExports.jsx("path",{d:"M109 170 Q116 179 122 173 Q128 179 135 170",stroke:"#F9A8D4",strokeWidth:"2.5",strokeLinecap:"round",fill:"none",opacity:"0.7"}),jsxRuntimeExports.jsx("ellipse",{cx:"66",cy:"158",rx:"18",ry:"10",fill:"#F9A8D4",opacity:"0.22"}),jsxRuntimeExports.jsx("ellipse",{cx:"178",cy:"158",rx:"18",ry:"10",fill:"#F9A8D4",opacity:"0.22"}),jsxRuntimeExports.jsxs(motion.g,{animate:{opacity:[.55,.8,.55]},transition:{duration:4,repeat:1/0},children:[jsxRuntimeExports.jsx("path",{d:"M16 150  L62 155",stroke:"#F9A8D4",strokeWidth:"2.2",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M10 163  L60 163",stroke:"#F9A8D4",strokeWidth:"2.2",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M16 176  L64 171",stroke:"#F9A8D4",strokeWidth:"2.2",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M244 150 L182 155",stroke:"#F9A8D4",strokeWidth:"2.2",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M250 163 L184 163",stroke:"#F9A8D4",strokeWidth:"2.2",strokeLinecap:"round"}),jsxRuntimeExports.jsx("path",{d:"M244 176 L180 171",stroke:"#F9A8D4",strokeWidth:"2.2",strokeLinecap:"round"})]}),jsxRuntimeExports.jsx("ellipse",{cx:"94",cy:"222",rx:"22",ry:"14",fill:"url(#pawGrad)"}),jsxRuntimeExports.jsx("ellipse",{cx:"80",cy:"218",rx:"8",ry:"6.5",fill:"url(#pawGrad)"}),jsxRuntimeExports.jsx("ellipse",{cx:"76",cy:"212",rx:"5",ry:"4.5",fill:"#F9A8D4",opacity:"0.35"}),jsxRuntimeExports.jsx("ellipse",{cx:"87",cy:"211",rx:"5",ry:"4.5",fill:"#F9A8D4",opacity:"0.35"}),jsxRuntimeExports.jsx("ellipse",{cx:"98",cy:"212",rx:"5",ry:"4.5",fill:"#F9A8D4",opacity:"0.35"}),jsxRuntimeExports.jsx("ellipse",{cx:"162",cy:"222",rx:"22",ry:"14",fill:"url(#pawGrad)"}),jsxRuntimeExports.jsx("ellipse",{cx:"176",cy:"218",rx:"8",ry:"6.5",fill:"url(#pawGrad)"}),jsxRuntimeExports.jsx("ellipse",{cx:"168",cy:"211",rx:"5",ry:"4.5",fill:"#F9A8D4",opacity:"0.35"}),jsxRuntimeExports.jsx("ellipse",{cx:"179",cy:"211",rx:"5",ry:"4.5",fill:"#F9A8D4",opacity:"0.35"}),jsxRuntimeExports.jsx("ellipse",{cx:"188",cy:"212",rx:"5",ry:"4.5",fill:"#F9A8D4",opacity:"0.35"}),G&&jsxRuntimeExports.jsx(motion.g,{initial:{opacity:0},animate:{opacity:1},children:[0,1,2].map(q=>jsxRuntimeExports.jsx(motion.circle,{cx:172+q*11,cy:55,r:3.5-q*.5,fill:"#A78BFA",animate:{y:[0,-16,0],opacity:[0,1,0]},transition:{repeat:1/0,duration:1.8,delay:q*.4}},q))}),I&&jsxRuntimeExports.jsx(motion.g,{initial:{opacity:0},animate:{opacity:1},children:[{x:44,y:50,s:6,d:0,color:"#FDE68A"},{x:214,y:58,s:5,d:.45,color:"#FDE68A"},{x:188,y:34,s:4,d:.9,color:"#C4B5FD"},{x:56,y:36,s:4,d:.6,color:"#C4B5FD"}].map((q,K)=>jsxRuntimeExports.jsx(motion.polygon,{points:`${q.x},${q.y-q.s} ${q.x+q.s*.4},${q.y} ${q.x},${q.y+q.s} ${q.x-q.s*.4},${q.y}`,fill:q.color,animate:{scale:[0,1.2,0],rotate:[0,30,0],opacity:[0,1,0]},transition:{repeat:1/0,duration:1.8,delay:q.d},style:{transformOrigin:`${q.x}px ${q.y}px`}},K))})]})}),!f&&[{cx:32,cy:60,r:2,delay:0},{cx:230,cy:50,r:1.5,delay:1},{cx:22,cy:120,r:1.8,delay:2},{cx:238,cy:130,r:2,delay:1.5}].map((q,K)=>jsxRuntimeExports.jsx(motion.circle,{cx:q.cx,cy:q.cy,r:q.r,fill:"#C4B5FD",animate:{opacity:[0,.8,0],y:[0,-10,0]},transition:{repeat:1/0,duration:3.5,delay:q.delay,ease:"easeInOut"}},K))]})]})},AuthLayout=({initialMode:u="login"})=>{const n=useNavigate(),[s,f]=reactExports.useState(u),[d,y]=reactExports.useState(""),[_,A]=reactExports.useState(""),[R,I]=reactExports.useState(""),[G,Y]=reactExports.useState(!1),[q,K]=reactExports.useState(null),[Q,ne]=reactExports.useState(!1),te=s==="login",J=async re=>{if(!auth){K("Authentication is not configured.");return}Y(!0),K(null);try{const le=re==="google"?new GoogleAuthProvider:new GithubAuthProvider;await signInWithPopup(auth,le),n("/dashboard")}catch(le){K(le.message||`Failed to sign in with ${re}`)}finally{Y(!1)}},ie=async re=>{if(re.preventDefault(),!auth){K("Authentication is not configured.");return}Y(!0),K(null);try{if(te)await signInWithEmailAndPassword(auth,d,_);else{const le=await createUserWithEmailAndPassword(auth,d,_);R&&await updateProfile(le.user,{displayName:R})}n("/dashboard")}catch(le){K(le.message||"Authentication failed")}finally{Y(!1)}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-[#F0F2F5] flex items-center justify-center p-4 lg:p-8 font-sans",children:[jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-rose-50/60 blur-[130px] rounded-full"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-indigo-50/50 blur-[130px] rounded-full"})]}),jsxRuntimeExports.jsxs(motion.div,{layout:!0,className:`w-full max-w-5xl bg-white rounded-[2.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.05)] overflow-hidden flex flex-col lg:flex-row min-h-[600px] ${te?"":"lg:flex-row-reverse"}`,transition:{type:"spring",stiffness:100,damping:20},children:[jsxRuntimeExports.jsxs("div",{className:"w-full lg:w-1/2 bg-[#F8FAFC] flex flex-col items-center justify-center p-12 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 opacity-20",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-10 left-10 w-2 h-2 bg-blue-400 rounded-full"}),jsxRuntimeExports.jsx("div",{className:"absolute top-20 right-20 w-3 h-3 bg-purple-400 rounded-full"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-40 left-1/4 w-2 h-2 bg-indigo-400 rounded-full"}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 right-10 w-1.5 h-1.5 bg-blue-300 rounded-full"})]}),jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:jsxRuntimeExports.jsx(motion.div,{initial:{x:te?-100:100,opacity:0},animate:{x:0,opacity:1},exit:{x:te?100:-100,opacity:0},transition:{type:"spring",stiffness:100,damping:20},className:"z-10",children:jsxRuntimeExports.jsx(CopilotCat,{mode:G?"thinking":q?"concerned":s})},s)}),jsxRuntimeExports.jsxs("div",{className:"mt-8 text-center z-10",children:[jsxRuntimeExports.jsx(motion.h2,{layout:!0,className:"text-2xl font-bold text-slate-800",children:te?"Welcome back, Founder":"Launch your vision"}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 mt-2 max-w-[280px]",children:te?"Your startup copilot is ready to assist with your next big move.":"Join the next generation of founders building the future."})]})]}),jsxRuntimeExports.jsx("div",{className:"w-full lg:w-1/2 p-8 lg:p-16 flex flex-col justify-center",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto w-full",children:[jsxRuntimeExports.jsx("div",{className:"mb-8",children:jsxRuntimeExports.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:te?"Log in":"Sign up"})}),q&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-rose-50 border border-rose-100 rounded-2xl flex items-center gap-3",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"text-rose-500 shrink-0",size:20}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-rose-600",children:q})]}),jsxRuntimeExports.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[jsxRuntimeExports.jsx(AnimatePresence,{mode:"popLayout",children:!te&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-bold text-slate-700 ml-1",children:"Username"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400",children:jsxRuntimeExports.jsx(User$1,{size:18})}),jsxRuntimeExports.jsx("input",{type:"text",required:!0,value:R,onChange:re=>I(re.target.value),placeholder:"Username",className:"w-full pl-11 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all outline-none text-slate-800"})]})]},"name-field")}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-bold text-slate-700 ml-1",children:te?"Email or username":"Email"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400",children:jsxRuntimeExports.jsx(Mail,{size:18})}),jsxRuntimeExports.jsx("input",{type:"email",required:!0,value:d,onChange:re=>y(re.target.value),placeholder:te?"Email or username":"Email",className:"w-full pl-11 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none text-slate-800"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center ml-1",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-bold text-slate-700",children:"Password"}),te&&jsxRuntimeExports.jsx("button",{type:"button",className:"text-xs font-bold text-blue-600 hover:text-blue-700",children:"Forgot password?"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400",children:jsxRuntimeExports.jsx(Lock,{size:18})}),jsxRuntimeExports.jsx("input",{type:Q?"text":"password",required:!0,value:_,onChange:re=>A(re.target.value),placeholder:"Password",className:"w-full pl-11 pr-12 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none text-slate-800"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ne(!Q),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 hover:text-slate-600",children:Q?jsxRuntimeExports.jsx(Lock,{size:16}):jsxRuntimeExports.jsx(Lock,{size:16})})]})]}),!te&&jsxRuntimeExports.jsx("p",{className:"text-[11px] text-slate-500 leading-relaxed px-1",children:"Make sure it's at least more than 15 characters OR at least 8 characters including a number and a lowercase letter"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:G,className:"w-full py-3 bg-[#4F46E5] text-white rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-[#4338CA] transition-all shadow-lg shadow-indigo-200 disabled:opacity-70 mt-6",children:G?jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("span",{children:te?"Log in":"Sign up"})})})]}),jsxRuntimeExports.jsxs("div",{className:"relative my-8",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full border-t border-slate-100"})}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-center text-xs font-bold uppercase tracking-widest text-slate-400",children:jsxRuntimeExports.jsx("span",{className:"bg-white px-4",children:"OR"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>J("github"),"aria-label":"Continue with GitHub",className:"flex-1 py-3 bg-white border border-slate-200 rounded-xl flex items-center justify-center gap-2 hover:bg-slate-50 hover:border-slate-300 transition-all shadow-sm active:scale-[0.97] group",children:[jsxRuntimeExports.jsx(Github,{size:22,className:"text-slate-700 group-hover:text-slate-900 transition-colors"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-slate-600 group-hover:text-slate-800",children:"GitHub"})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>J("google"),"aria-label":"Continue with Google",className:"flex-1 py-3 bg-white border border-slate-200 rounded-xl flex items-center justify-center gap-2 hover:bg-slate-50 hover:border-slate-300 transition-all shadow-sm active:scale-[0.97] group",children:[jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",className:"shrink-0",children:[jsxRuntimeExports.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),jsxRuntimeExports.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),jsxRuntimeExports.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),jsxRuntimeExports.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-slate-600 group-hover:text-slate-800",children:"Google"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-8 text-center",children:jsxRuntimeExports.jsxs("p",{className:"text-sm font-medium text-slate-600",children:[te?"New to Startup Copilot?":"Already have an account?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>{f(te?"signup":"login"),K(null)},className:"text-blue-600 font-bold hover:underline",children:te?"Sign up":"Log in"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>n("/"),className:"mt-8 flex items-center gap-2 text-xs font-bold text-slate-400 hover:text-slate-600 transition-all mx-auto",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:14}),jsxRuntimeExports.jsx("span",{children:"Back to home"})]})]})})]})]})},AuthPage=({mode:u})=>jsxRuntimeExports.jsx(AuthLayout,{initialMode:u}),v="5.5.0",fr=24,ip=0,op=49,w=1080,h=1080,nm="preloader_cat",ddd=0,assets=[],layers=JSON.parse('[{"ddd":0,"ind":1,"ty":3,"nm":"Rotation","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[-4],"e":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":8,"s":[0],"e":[-8]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":41,"s":[-8],"e":[-4]},{"t":49}],"ix":10},"p":{"a":0,"k":[540,540,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":3,"nm":"Rotation_null","parent":1,"sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.263],"y":[1]},"o":{"x":[0.745],"y":[0]},"t":5,"s":[0],"e":[360]},{"t":44}],"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Hand_outside_000_stroke","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-1.5,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[17.245,18.272],[-20.5,16.5],[-12.25,-14.25]],"o":[[-21,-22.25],[20.5,-16.5],[12.25,14.25]],"v":[[-237.125,215],[-242.5,139.5],[-187,144.25]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.1412,0.1333,0.1333,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":8,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Hand_outside_000_fill","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":1.5,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[5.5,0.75],[5.5,-6.25],[-5,-16.25],[0,0],[-2.25,0.75],[0,0],[0,0]],"o":[[-5.5,-0.75],[-5.5,6.25],[5,16.25],[0,0],[2.25,-0.75],[0,0],[0,0]],"v":[[-210.25,150.5],[-235.25,154],[-245,193.25],[-229.75,222.5],[-213.5,210],[-199.75,195.25],[-202.5,179.5]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.349,0.3137,0.3137,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"Head_line_001_stroke","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":1.5,"ix":10},"p":{"a":0,"k":[-0.095,-0.522,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[178,178,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.1412,0.1333,0.1333,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":5.5,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":46.5,"ix":1},"e":{"a":0,"k":47.2,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"Head_line_002_stroke","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":1.5,"ix":10},"p":{"a":0,"k":[-0.095,-0.522,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.1412,0.1333,0.1333,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":5,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":46.5,"ix":1},"e":{"a":0,"k":47.2,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"Head_line_003_stroke","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":1.5,"ix":10},"p":{"a":0,"k":[-0.095,-0.522,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[189,189,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.1412,0.1333,0.1333,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":5,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":46,"ix":1},"e":{"a":0,"k":47.2,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"circle 33","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":26,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[273,273,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.349,0.3137,0.3137,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":20,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[85,85],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.861],"y":[1]},"o":{"x":[0.968],"y":[0]},"t":7,"s":[31],"e":[6]},{"i":{"x":[0.155],"y":[1]},"o":{"x":[0.148],"y":[0]},"t":25,"s":[6],"e":[31]},{"t":44}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.861],"y":[1]},"o":{"x":[0.968],"y":[0]},"t":7,"s":[34],"e":[29]},{"i":{"x":[0.155],"y":[1]},"o":{"x":[0.148],"y":[0]},"t":25,"s":[29],"e":[34]},{"t":44}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":9,"ty":4,"nm":"circle 31","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":26,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[273,273,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.0471,0.0431,0.0431,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":27,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[85,85],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.861],"y":[1]},"o":{"x":[0.968],"y":[0]},"t":7,"s":[31],"e":[6]},{"i":{"x":[0.155],"y":[1]},"o":{"x":[0.148],"y":[0]},"t":25,"s":[6],"e":[31]},{"t":44}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.861],"y":[1]},"o":{"x":[0.968],"y":[0]},"t":7,"s":[34],"e":[29]},{"i":{"x":[0.155],"y":[1]},"o":{"x":[0.148],"y":[0]},"t":25,"s":[29],"e":[34]},{"t":44}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":10,"ty":4,"nm":"Hand_inside_001_fill","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":14,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.349,0.3137,0.3137,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":24,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[85,85],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.861],"y":[1]},"o":{"x":[0.968],"y":[0]},"t":7,"s":[31],"e":[6]},{"i":{"x":[0.155],"y":[1]},"o":{"x":[0.148],"y":[0]},"t":25,"s":[6],"e":[31]},{"t":44}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.861],"y":[1]},"o":{"x":[0.968],"y":[0]},"t":7,"s":[32],"e":[21]},{"i":{"x":[0.155],"y":[1]},"o":{"x":[0.148],"y":[0]},"t":25,"s":[21],"e":[32]},{"t":44}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":11,"ty":4,"nm":"Hand_inside_002_fill","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":16,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.349,0.3137,0.3137,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":24,"ix":5},"lc":1,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[85,85],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.861],"y":[1]},"o":{"x":[0.968],"y":[0]},"t":7,"s":[31],"e":[18]},{"i":{"x":[0.155],"y":[1]},"o":{"x":[0.148],"y":[0]},"t":25,"s":[18],"e":[31]},{"t":44}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.861],"y":[1]},"o":{"x":[0.968],"y":[0]},"t":7,"s":[34],"e":[34]},{"i":{"x":[0.155],"y":[1]},"o":{"x":[0.148],"y":[0]},"t":25,"s":[34],"e":[34]},{"t":44}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":12,"ty":4,"nm":"Hand_outside_001_stroke","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":14,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.0471,0.0431,0.0431,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":34,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[85,85],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.861],"y":[1]},"o":{"x":[0.968],"y":[0]},"t":7,"s":[31],"e":[6]},{"i":{"x":[0.155],"y":[1]},"o":{"x":[0.148],"y":[0]},"t":25,"s":[6],"e":[31]},{"t":44}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.861],"y":[1]},"o":{"x":[0.968],"y":[0]},"t":7,"s":[32],"e":[21]},{"i":{"x":[0.155],"y":[1]},"o":{"x":[0.148],"y":[0]},"t":25,"s":[21],"e":[32]},{"t":44}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":13,"ty":4,"nm":"Hand_outside_002_stroke","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":14,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[200,200,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.0471,0.0431,0.0431,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":34,"ix":5},"lc":1,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[85,85],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.861],"y":[1]},"o":{"x":[0.968],"y":[0]},"t":7,"s":[31],"e":[18]},{"i":{"x":[0.155],"y":[1]},"o":{"x":[0.148],"y":[0]},"t":25,"s":[18],"e":[31]},{"t":44}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.861],"y":[1]},"o":{"x":[0.968],"y":[0]},"t":7,"s":[34],"e":[34]},{"i":{"x":[0.155],"y":[1]},"o":{"x":[0.148],"y":[0]},"t":25,"s":[34],"e":[34]},{"t":44}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":14,"ty":4,"nm":"Leg_outside_001_fill","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-82,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[266,266,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.349,0.3137,0.3137,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":21,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[85,85],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[31],"e":[6]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[6],"e":[31]},{"t":45}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[36],"e":[21]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[21],"e":[36]},{"t":45}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":15,"ty":4,"nm":"Leg_outside_002_fill","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-80,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[266,266,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.349,0.3137,0.3137,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":21,"ix":5},"lc":1,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[85,85],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[31],"e":[18]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[18],"e":[31]},{"t":45}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[39],"e":[26]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[26],"e":[39]},{"t":45}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":16,"ty":4,"nm":"Leg_outside_001_stroke","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-82,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[266,266,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.0471,0.0431,0.0431,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":28,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[85,85],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[31],"e":[6]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[6],"e":[31]},{"t":45}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[36],"e":[21]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[21],"e":[36]},{"t":45}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":17,"ty":4,"nm":"Leg_outside_002_stroke","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-82,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[266,266,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.0471,0.0431,0.0431,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":28,"ix":5},"lc":1,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[85,85],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[31],"e":[18]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[18],"e":[31]},{"t":45}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[39],"e":[26]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[26],"e":[39]},{"t":45}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":18,"ty":4,"nm":"Leg_inside_001_fill","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-88,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[178,178,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.349,0.3137,0.3137,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[85,85],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[31],"e":[6]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[6],"e":[31]},{"t":45}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[36],"e":[21]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[21],"e":[36]},{"t":45}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":19,"ty":4,"nm":"Leg_inside_002_fill","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-86,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[178,178,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.349,0.3137,0.3137,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":30,"ix":5},"lc":1,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[85,85],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[31],"e":[18]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[18],"e":[31]},{"t":45}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[41],"e":[27]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[27],"e":[41]},{"t":45}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":20,"ty":4,"nm":"Leg_inside_003_stroke","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-88,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[178,178,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.0471,0.0431,0.0431,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":41,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[85,85],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[31],"e":[6]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[6],"e":[31]},{"t":45}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[36],"e":[21]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[21],"e":[36]},{"t":45}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":21,"ty":4,"nm":"Leg_inside_004_stroke","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-88,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[178,178,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.0471,0.0431,0.0431,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":41,"ix":5},"lc":1,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[85,85],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[31],"e":[18]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[18],"e":[31]},{"t":45}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.875],"y":[1]},"o":{"x":[0.92],"y":[0]},"t":6,"s":[41],"e":[27]},{"i":{"x":[0.286],"y":[1]},"o":{"x":[0.183],"y":[0]},"t":25,"s":[27],"e":[41]},{"t":45}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":22,"ty":4,"nm":"mouth","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":4,"ix":10},"p":{"a":0,"k":[-3.518,0.658,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.804,"y":1},"o":{"x":1,"y":0},"t":5,"s":[{"i":[[-16,0.25],[4,15.25],[-12.772,12.38]],"o":[[16,-0.25],[4.203,13.762],[10.035,-9.727]],"v":[[-317.226,155.848],[-298.237,129.598],[-263,135.5]],"c":false}],"e":[{"i":[[-15.987,-0.686],[22.603,27.33],[-24.93,14.631]],"o":[[25.029,1.074],[13.555,29.119],[12.053,-7.074]],"v":[[-310.113,185.296],[-304.668,134.148],[-252.946,162.352]],"c":false}]},{"i":{"x":0.667,"y":1},"o":{"x":0.198,"y":0},"t":24,"s":[{"i":[[-15.987,-0.686],[22.603,27.33],[-24.93,14.631]],"o":[[25.029,1.074],[13.555,29.119],[12.053,-7.074]],"v":[[-310.113,185.296],[-304.668,134.148],[-252.946,162.352]],"c":false}],"e":[{"i":[[-16,0.25],[4,15.25],[-12.772,12.38]],"o":[[16,-0.25],[4.203,13.762],[10.035,-9.727]],"v":[[-317.226,155.848],[-298.237,129.598],[-263,135.5]],"c":false}]},{"t":44}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.1412,0.1333,0.1333,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":7,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":23,"ty":4,"nm":"eyes","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-310.294,89.679,0],"ix":2},"a":{"a":0,"k":[33.526,14.94,0],"ix":1},"s":{"a":0,"k":[189,189,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.812,"y":1},"o":{"x":1,"y":0},"t":5,"s":[{"i":[[0,-2.38],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.38],[2.381,0]],"v":[[4.311,-0.001],[0,4.312],[-4.311,-0.001],[0,-4.312]],"c":true}],"e":[{"i":[[-1.803,-7.972],[2.322,-0.525],[1.804,7.975],[-2.321,0.525]],"o":[[1.804,7.975],[-2.321,0.525],[-1.803,-7.972],[2.322,-0.525]],"v":[[0.326,11.059],[3.267,24.937],[-5.41,11.967],[-3.267,-3.947]],"c":true}]},{"i":{"x":0.016,"y":1},"o":{"x":0.129,"y":0},"t":24,"s":[{"i":[[-1.803,-7.972],[2.322,-0.525],[1.804,7.975],[-2.321,0.525]],"o":[[1.804,7.975],[-2.321,0.525],[-1.803,-7.972],[2.322,-0.525]],"v":[[0.326,11.059],[3.267,24.937],[-5.41,11.967],[-3.267,-3.947]],"c":true}],"e":[{"i":[[0,-2.38],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.38],[2.381,0]],"v":[[4.311,-0.001],[0,4.312],[-4.311,-0.001],[0,-4.312]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0},"t":41,"s":[{"i":[[0,-2.38],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.38],[2.381,0]],"v":[[4.311,-0.001],[0,4.312],[-4.311,-0.001],[0,-4.312]],"c":true}],"e":[{"i":[[0,-2.38],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.38],[2.381,0]],"v":[[4.311,-0.001],[0.23,-1.408],[-4.311,-0.001],[0.112,-3.694]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":42,"s":[{"i":[[0,-2.38],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.38],[2.381,0]],"v":[[4.311,-0.001],[0.23,-1.408],[-4.311,-0.001],[0.112,-3.694]],"c":true}],"e":[{"i":[[0,-2.38],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.38],[2.381,0]],"v":[[4.311,-0.001],[0.23,-1.408],[-4.311,-0.001],[0.112,-3.694]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":43,"s":[{"i":[[0,-2.38],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.38],[2.381,0]],"v":[[4.311,-0.001],[0.23,-1.408],[-4.311,-0.001],[0.112,-3.694]],"c":true}],"e":[{"i":[[0,-2.38],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.38],[2.381,0]],"v":[[4.311,-0.001],[0,4.312],[-4.311,-0.001],[0,-4.312]],"c":true}]},{"t":44}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.1412,0.1333,0.1333,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[50.84,9.312],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.812,"y":1},"o":{"x":1,"y":0},"t":5,"s":[{"i":[[0,-2.381],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.381],[2.381,0]],"v":[[4.311,0],[-0.001,4.311],[-4.311,0],[-0.001,-4.311]],"c":true}],"e":[{"i":[[-1.825,-7.774],[2.301,-0.671],[1.825,7.774],[-2.3,0.671]],"o":[[1.825,7.774],[-2.3,0.671],[-1.825,-7.774],[2.301,-0.671]],"v":[[-0.368,10.382],[3.303,24.328],[-5.609,11.875],[-3.304,-3.823]],"c":true}]},{"i":{"x":0.016,"y":1},"o":{"x":0.129,"y":0},"t":24,"s":[{"i":[[-1.825,-7.774],[2.301,-0.671],[1.825,7.774],[-2.3,0.671]],"o":[[1.825,7.774],[-2.3,0.671],[-1.825,-7.774],[2.301,-0.671]],"v":[[-0.368,10.382],[3.303,24.328],[-5.609,11.875],[-3.304,-3.823]],"c":true}],"e":[{"i":[[0,-2.381],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.381],[2.381,0]],"v":[[4.311,0],[-0.001,4.311],[-4.311,0],[-0.001,-4.311]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0},"t":41,"s":[{"i":[[0,-2.381],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.381],[2.381,0]],"v":[[4.311,0],[-0.001,4.311],[-4.311,0],[-0.001,-4.311]],"c":true}],"e":[{"i":[[0,-2.381],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.381],[2.381,0]],"v":[[4.311,0],[-0.038,-1.44],[-4.311,0],[-0.019,-3.712]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":42,"s":[{"i":[[0,-2.381],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.381],[2.381,0]],"v":[[4.311,0],[-0.038,-1.44],[-4.311,0],[-0.019,-3.712]],"c":true}],"e":[{"i":[[0,-2.381],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.381],[2.381,0]],"v":[[4.311,0],[-0.038,-1.44],[-4.311,0],[-0.019,-3.712]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":43,"s":[{"i":[[0,-2.381],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.381],[2.381,0]],"v":[[4.311,0],[-0.038,-1.44],[-4.311,0],[-0.019,-3.712]],"c":true}],"e":[{"i":[[0,-2.381],[2.381,0],[0,2.381],[-2.38,0]],"o":[[0,2.381],[-2.38,0],[0,-2.381],[2.381,0]],"v":[[4.311,0],[-0.001,4.311],[-4.311,0],[-0.001,-4.311]],"c":true}]},{"t":44}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.1412,0.1333,0.1333,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[9.311,17.933],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 4","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":24,"ty":4,"nm":"ears","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-327.861,30.177,0],"ix":2},"a":{"a":0,"k":[56.098,24.172,0],"ix":1},"s":{"a":0,"k":[189,189,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.849,"y":1},"o":{"x":0.952,"y":0},"t":5,"s":[{"i":[[0,0],[-6.513,1.422],[-5.578,0.782],[0,0],[-5.457,0.617],[0,0]],"o":[[0,0],[5.367,-1.172],[0,0],[5.534,-1.057],[6.622,-0.748],[0,0]],"v":[[-46.712,16.937],[-43.826,-7.546],[-24.952,12.582],[27.245,4.423],[39.232,-20.805],[49.544,1.63]],"c":false}],"e":[{"i":[[0,0],[-11.883,22.119],[-5.578,0.782],[0,0],[-12.008,5.056],[0,0]],"o":[[0,0],[-1.055,18.514],[0,0],[5.534,-1.057],[-2.421,19.93],[0,0]],"v":[[-46.712,16.937],[-39.941,-38.255],[-24.952,12.582],[27.245,4.423],[47.037,-43.175],[49.544,1.63]],"c":false}]},{"i":{"x":0.051,"y":1},"o":{"x":0.142,"y":0},"t":24,"s":[{"i":[[0,0],[-11.883,22.119],[-5.578,0.782],[0,0],[-12.008,5.056],[0,0]],"o":[[0,0],[-1.055,18.514],[0,0],[5.534,-1.057],[-2.421,19.93],[0,0]],"v":[[-46.712,16.937],[-39.941,-38.255],[-24.952,12.582],[27.245,4.423],[47.037,-43.175],[49.544,1.63]],"c":false}],"e":[{"i":[[0,0],[-6.513,1.422],[-5.578,0.782],[0,0],[-5.457,0.617],[0,0]],"o":[[0,0],[5.367,-1.172],[0,0],[5.534,-1.057],[6.622,-0.748],[0,0]],"v":[[-46.712,16.937],[-43.826,-7.546],[-24.952,12.582],[27.245,4.423],[39.232,-20.805],[49.544,1.63]],"c":false}]},{"t":44}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.11,0.09,0.09,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":4.5,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.349,0.3137,0.3137,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[56.098,24.172],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":25,"ty":4,"nm":"body_transition_fill","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":1.5,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-13.94,-15.412],[-12.5,-13],[1,19.5],[19.75,15.5]],"o":[[0,0],[20.125,22.25],[12.5,13],[-1,-19.5],[-19.75,-15.5]],"v":[[-242,257.5],[-259.25,269.5],[-208.875,340.375],[-193,330.75],[-213.5,277.5]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.96,0.96,0.96,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":26,"ty":4,"nm":"Body_002_round 3","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":32,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[189,189,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.866],"y":[1]},"o":{"x":[0.915],"y":[0]},"t":5,"s":[39],"e":[15]},{"i":{"x":[0.281],"y":[1]},"o":{"x":[0.115],"y":[0]},"t":24,"s":[15],"e":[39]},{"t":44}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.806],"y":[1]},"o":{"x":[0.878],"y":[0]},"t":5,"s":[50],"e":[48.5]},{"i":{"x":[0.215],"y":[1]},"o":{"x":[0.176],"y":[0]},"t":24,"s":[48.5],"e":[50]},{"t":44}],"ix":2},"o":{"a":0,"k":-62,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[0.96,0.96,0.96,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":48,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":27,"ty":4,"nm":"Body_002_round 2","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[189,189,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.866],"y":[1]},"o":{"x":[0.915],"y":[0]},"t":5,"s":[39],"e":[25]},{"i":{"x":[0.281],"y":[1]},"o":{"x":[0.115],"y":[0]},"t":24,"s":[25],"e":[39]},{"t":44}],"ix":1},"e":{"a":0,"k":50,"ix":2},"o":{"a":0,"k":-62,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[0.96,0.96,0.96,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":82,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":28,"ty":4,"nm":"Tail_002_fill","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[189,189,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.349,0.3137,0.3137,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":48,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[90,90],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.864],"y":[1]},"o":{"x":[0.941],"y":[0]},"t":6,"s":[35],"e":[0]},{"i":{"x":[0.297],"y":[1]},"o":{"x":[0.106],"y":[0]},"t":25,"s":[0],"e":[35]},{"t":45}],"ix":1},"e":{"a":0,"k":55,"ix":2},"o":{"a":0,"k":-130,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":29,"ty":4,"nm":"Body_002_square_fill","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[189,189,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.866],"y":[1]},"o":{"x":[0.915],"y":[0]},"t":5,"s":[34],"e":[15]},{"i":{"x":[0.281],"y":[1]},"o":{"x":[0.115],"y":[0]},"t":24,"s":[15],"e":[34]},{"t":44}],"ix":1},"e":{"a":0,"k":65,"ix":2},"o":{"a":0,"k":-62,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[0.349,0.3137,0.3137,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":93,"ix":5},"lc":1,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":30,"ty":4,"nm":"Body_002_round_fill","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[189,189,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.866],"y":[1]},"o":{"x":[0.915],"y":[0]},"t":5,"s":[34],"e":[15]},{"i":{"x":[0.281],"y":[1]},"o":{"x":[0.115],"y":[0]},"t":24,"s":[15],"e":[34]},{"t":44}],"ix":1},"e":{"a":0,"k":59,"ix":2},"o":{"a":0,"k":-62,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[0.349,0.3137,0.3137,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":93,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":31,"ty":4,"nm":"Body_001_square_stroke","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[189,189,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.866],"y":[1]},"o":{"x":[0.915],"y":[0]},"t":5,"s":[34],"e":[15]},{"i":{"x":[0.281],"y":[1]},"o":{"x":[0.115],"y":[0]},"t":24,"s":[15],"e":[34]},{"t":44}],"ix":1},"e":{"a":0,"k":65,"ix":2},"o":{"a":0,"k":-62,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[0.1412,0.1333,0.1333,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":102,"ix":5},"lc":1,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":32,"ty":4,"nm":"Body_001_round_stroke","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[189,189,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.866],"y":[1]},"o":{"x":[0.915],"y":[0]},"t":5,"s":[34],"e":[15]},{"i":{"x":[0.281],"y":[1]},"o":{"x":[0.115],"y":[0]},"t":24,"s":[15],"e":[34]},{"t":44}],"ix":1},"e":{"a":0,"k":59,"ix":2},"o":{"a":0,"k":-62,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[0.1412,0.1333,0.1333,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":102,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":49,"st":0,"bm":0},{"ddd":0,"ind":33,"ty":4,"nm":"Tail_001_stroke","parent":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-0.108,-0.519,0],"ix":2},"a":{"a":0,"k":[176.37,176.37,0],"ix":1},"s":{"a":0,"k":[189,189,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-96.026],[96.025,0],[0,96.026],[-96.026,0]],"o":[[0,96.026],[-96.026,0],[0,-96.026],[96.025,0]],"v":[[173.87,0],[0,173.87],[-173.87,0],[0,-173.87]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.1412,0.1333,0.1333,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":58,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[176.37,176.37],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[90,90],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.864],"y":[1]},"o":{"x":[0.941],"y":[0]},"t":6,"s":[35],"e":[0]},{"i":{"x":[0.297],"y":[1]},"o":{"x":[0.106],"y":[0]},"t":25,"s":[0],"e":[35]},{"t":45}],"ix":1},"e":{"a":0,"k":55,"ix":2},"o":{"a":0,"k":-130,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":49,"st":0,"bm":0}]'),markers=[{tm:5,cm:"",dr:0},{tm:44,cm:"",dr:0}],catAnimation={v,fr,ip,op,w,h,nm,ddd,assets,layers,markers},meowSound="/assets/meow-C4lmvRJI.mp3",CatMascot=({isGenerating:u,reaction:n,soundEnabled:s})=>{const f=reactExports.useRef(null),[d,y]=reactExports.useState(0),_=[" Architecting your vision...","Defining strategic milestones..."," Identifying critical risks..."," Structuring optimized tech stack...","Your AI Co-Founder is finalizing your MVP roadmap..."];reactExports.useEffect(()=>{if(!u)return;A(),y(0);const R=setInterval(()=>{y(I=>(I+1)%_.length)},1800);return()=>clearInterval(R)},[u]),reactExports.useEffect(()=>{if(s){console.log("Initializing meow sound from:",meowSound);const R=`${meowSound}${meowSound.includes("?")?"&":"?"}v=${Date.now()}`;f.current=new Audio(R),f.current.load()}else f.current=null},[s,meowSound]);const A=()=>{s&&f.current&&(f.current.currentTime=0,f.current.play().catch(()=>{}))};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(AnimatePresence,{children:u&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none",style:{backdropFilter:"blur(12px)",background:"radial-gradient(circle at center, rgba(99,102,241,0.1) 0%, rgba(255,255,255,0.7) 100%)"},children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.85,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.85,opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex flex-col items-center gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 rounded-full",style:{background:"radial-gradient(circle, rgba(99,102,241,0.3) 0%, transparent 65%)"},animate:{scale:[1,1.3,1],opacity:[.5,.9,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),jsxRuntimeExports.jsx(motion.div,{className:"relative w-64 h-64 flex items-center justify-center overflow-hidden",children:jsxRuntimeExports.jsx(Lottie,{animationData:catAnimation,loop:!0,className:"w-full h-full scale-110"})}),jsxRuntimeExports.jsx(motion.div,{className:"absolute bottom-4 right-4 flex gap-1 bg-indigo-600 rounded-full px-3 py-1.5 shadow-lg",children:[0,1,2].map(R=>jsxRuntimeExports.jsx(motion.div,{className:"w-1.5 h-1.5 bg-white rounded-full",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:.8,repeat:1/0,delay:R*.2}},R))})]}),jsxRuntimeExports.jsxs("div",{className:"text-center space-y-2",children:[jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.35},className:"text-xl font-black text-slate-900 tracking-tight",children:_[d]},d)}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Your AI Co-Founder is on it."})]}),jsxRuntimeExports.jsx("div",{className:"w-72 space-y-2.5",children:[100,80,65].map((R,I)=>jsxRuntimeExports.jsx(motion.div,{className:"h-3 rounded-full bg-gradient-to-r from-indigo-100 via-indigo-200 to-indigo-100",style:{width:`${R}%`},animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:1.5,repeat:1/0,delay:I*.2}},I))})]})})})})};function r(u){var n,s,f="";if(typeof u=="string"||typeof u=="number")f+=u;else if(typeof u=="object")if(Array.isArray(u)){var d=u.length;for(n=0;n<d;n++)u[n]&&(s=r(u[n]))&&(f&&(f+=" "),f+=s)}else for(s in u)u[s]&&(f&&(f+=" "),f+=s);return f}function clsx(){for(var u,n,s=0,f="",d=arguments.length;s<d;s++)(u=arguments[s])&&(n=r(u))&&(f&&(f+=" "),f+=n);return f}const concatArrays=(u,n)=>{const s=new Array(u.length+n.length);for(let f=0;f<u.length;f++)s[f]=u[f];for(let f=0;f<n.length;f++)s[u.length+f]=n[f];return s},createClassValidatorObject=(u,n)=>({classGroupId:u,validator:n}),createClassPartObject=(u=new Map,n=null,s)=>({nextPart:u,validators:n,classGroupId:s}),CLASS_PART_SEPARATOR="-",EMPTY_CONFLICTS=[],ARBITRARY_PROPERTY_PREFIX="arbitrary..",createClassGroupUtils=u=>{const n=createClassMap(u),{conflictingClassGroups:s,conflictingClassGroupModifiers:f}=u;return{getClassGroupId:_=>{if(_.startsWith("[")&&_.endsWith("]"))return getGroupIdForArbitraryProperty(_);const A=_.split(CLASS_PART_SEPARATOR),R=A[0]===""&&A.length>1?1:0;return getGroupRecursive(A,R,n)},getConflictingClassGroupIds:(_,A)=>{if(A){const R=f[_],I=s[_];return R?I?concatArrays(I,R):R:I||EMPTY_CONFLICTS}return s[_]||EMPTY_CONFLICTS}}},getGroupRecursive=(u,n,s)=>{if(u.length-n===0)return s.classGroupId;const d=u[n],y=s.nextPart.get(d);if(y){const I=getGroupRecursive(u,n+1,y);if(I)return I}const _=s.validators;if(_===null)return;const A=n===0?u.join(CLASS_PART_SEPARATOR):u.slice(n).join(CLASS_PART_SEPARATOR),R=_.length;for(let I=0;I<R;I++){const G=_[I];if(G.validator(A))return G.classGroupId}},getGroupIdForArbitraryProperty=u=>u.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const n=u.slice(1,-1),s=n.indexOf(":"),f=n.slice(0,s);return f?ARBITRARY_PROPERTY_PREFIX+f:void 0})(),createClassMap=u=>{const{theme:n,classGroups:s}=u;return processClassGroups(s,n)},processClassGroups=(u,n)=>{const s=createClassPartObject();for(const f in u){const d=u[f];processClassesRecursively(d,s,f,n)}return s},processClassesRecursively=(u,n,s,f)=>{const d=u.length;for(let y=0;y<d;y++){const _=u[y];processClassDefinition(_,n,s,f)}},processClassDefinition=(u,n,s,f)=>{if(typeof u=="string"){processStringDefinition(u,n,s);return}if(typeof u=="function"){processFunctionDefinition(u,n,s,f);return}processObjectDefinition(u,n,s,f)},processStringDefinition=(u,n,s)=>{const f=u===""?n:getPart(n,u);f.classGroupId=s},processFunctionDefinition=(u,n,s,f)=>{if(isThemeGetter(u)){processClassesRecursively(u(f),n,s,f);return}n.validators===null&&(n.validators=[]),n.validators.push(createClassValidatorObject(s,u))},processObjectDefinition=(u,n,s,f)=>{const d=Object.entries(u),y=d.length;for(let _=0;_<y;_++){const[A,R]=d[_];processClassesRecursively(R,getPart(n,A),s,f)}},getPart=(u,n)=>{let s=u;const f=n.split(CLASS_PART_SEPARATOR),d=f.length;for(let y=0;y<d;y++){const _=f[y];let A=s.nextPart.get(_);A||(A=createClassPartObject(),s.nextPart.set(_,A)),s=A}return s},isThemeGetter=u=>"isThemeGetter"in u&&u.isThemeGetter===!0,createLruCache=u=>{if(u<1)return{get:()=>{},set:()=>{}};let n=0,s=Object.create(null),f=Object.create(null);const d=(y,_)=>{s[y]=_,n++,n>u&&(n=0,f=s,s=Object.create(null))};return{get(y){let _=s[y];if(_!==void 0)return _;if((_=f[y])!==void 0)return d(y,_),_},set(y,_){y in s?s[y]=_:d(y,_)}}},IMPORTANT_MODIFIER="!",MODIFIER_SEPARATOR=":",EMPTY_MODIFIERS=[],createResultObject=(u,n,s,f,d)=>({modifiers:u,hasImportantModifier:n,baseClassName:s,maybePostfixModifierPosition:f,isExternal:d}),createParseClassName=u=>{const{prefix:n,experimentalParseClassName:s}=u;let f=d=>{const y=[];let _=0,A=0,R=0,I;const G=d.length;for(let ne=0;ne<G;ne++){const te=d[ne];if(_===0&&A===0){if(te===MODIFIER_SEPARATOR){y.push(d.slice(R,ne)),R=ne+1;continue}if(te==="/"){I=ne;continue}}te==="["?_++:te==="]"?_--:te==="("?A++:te===")"&&A--}const Y=y.length===0?d:d.slice(R);let q=Y,K=!1;Y.endsWith(IMPORTANT_MODIFIER)?(q=Y.slice(0,-1),K=!0):Y.startsWith(IMPORTANT_MODIFIER)&&(q=Y.slice(1),K=!0);const Q=I&&I>R?I-R:void 0;return createResultObject(y,K,q,Q)};if(n){const d=n+MODIFIER_SEPARATOR,y=f;f=_=>_.startsWith(d)?y(_.slice(d.length)):createResultObject(EMPTY_MODIFIERS,!1,_,void 0,!0)}if(s){const d=f;f=y=>s({className:y,parseClassName:d})}return f},createSortModifiers=u=>{const n=new Map;return u.orderSensitiveModifiers.forEach((s,f)=>{n.set(s,1e6+f)}),s=>{const f=[];let d=[];for(let y=0;y<s.length;y++){const _=s[y],A=_[0]==="[",R=n.has(_);A||R?(d.length>0&&(d.sort(),f.push(...d),d=[]),f.push(_)):d.push(_)}return d.length>0&&(d.sort(),f.push(...d)),f}},createConfigUtils=u=>({cache:createLruCache(u.cacheSize),parseClassName:createParseClassName(u),sortModifiers:createSortModifiers(u),...createClassGroupUtils(u)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(u,n)=>{const{parseClassName:s,getClassGroupId:f,getConflictingClassGroupIds:d,sortModifiers:y}=n,_=[],A=u.trim().split(SPLIT_CLASSES_REGEX);let R="";for(let I=A.length-1;I>=0;I-=1){const G=A[I],{isExternal:Y,modifiers:q,hasImportantModifier:K,baseClassName:Q,maybePostfixModifierPosition:ne}=s(G);if(Y){R=G+(R.length>0?" "+R:R);continue}let te=!!ne,J=f(te?Q.substring(0,ne):Q);if(!J){if(!te){R=G+(R.length>0?" "+R:R);continue}if(J=f(Q),!J){R=G+(R.length>0?" "+R:R);continue}te=!1}const ie=q.length===0?"":q.length===1?q[0]:y(q).join(":"),re=K?ie+IMPORTANT_MODIFIER:ie,le=re+J;if(_.indexOf(le)>-1)continue;_.push(le);const fe=d(J,te);for(let pe=0;pe<fe.length;++pe){const de=fe[pe];_.push(re+de)}R=G+(R.length>0?" "+R:R)}return R},twJoin=(...u)=>{let n=0,s,f,d="";for(;n<u.length;)(s=u[n++])&&(f=toValue(s))&&(d&&(d+=" "),d+=f);return d},toValue=u=>{if(typeof u=="string")return u;let n,s="";for(let f=0;f<u.length;f++)u[f]&&(n=toValue(u[f]))&&(s&&(s+=" "),s+=n);return s},createTailwindMerge=(u,...n)=>{let s,f,d,y;const _=R=>{const I=n.reduce((G,Y)=>Y(G),u());return s=createConfigUtils(I),f=s.cache.get,d=s.cache.set,y=A,A(R)},A=R=>{const I=f(R);if(I)return I;const G=mergeClassList(R,s);return d(R,G),G};return y=_,(...R)=>y(twJoin(...R))},fallbackThemeArr=[],fromTheme=u=>{const n=s=>s[u]||fallbackThemeArr;return n.isThemeGetter=!0,n},arbitraryValueRegex=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,arbitraryVariableRegex=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fractionRegex=/^\d+(?:\.\d+)?\/\d+(?:\.\d+)?$/,tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=u=>fractionRegex.test(u),isNumber=u=>!!u&&!Number.isNaN(Number(u)),isInteger=u=>!!u&&Number.isInteger(Number(u)),isPercent=u=>u.endsWith("%")&&isNumber(u.slice(0,-1)),isTshirtSize=u=>tshirtUnitRegex.test(u),isAny=()=>!0,isLengthOnly=u=>lengthUnitRegex.test(u)&&!colorFunctionRegex.test(u),isNever=()=>!1,isShadow=u=>shadowRegex.test(u),isImage=u=>imageRegex.test(u),isAnyNonArbitrary=u=>!isArbitraryValue(u)&&!isArbitraryVariable(u),isArbitrarySize=u=>getIsArbitraryValue(u,isLabelSize,isNever),isArbitraryValue=u=>arbitraryValueRegex.test(u),isArbitraryLength=u=>getIsArbitraryValue(u,isLabelLength,isLengthOnly),isArbitraryNumber=u=>getIsArbitraryValue(u,isLabelNumber,isNumber),isArbitraryWeight=u=>getIsArbitraryValue(u,isLabelWeight,isAny),isArbitraryFamilyName=u=>getIsArbitraryValue(u,isLabelFamilyName,isNever),isArbitraryPosition=u=>getIsArbitraryValue(u,isLabelPosition,isNever),isArbitraryImage=u=>getIsArbitraryValue(u,isLabelImage,isImage),isArbitraryShadow=u=>getIsArbitraryValue(u,isLabelShadow,isShadow),isArbitraryVariable=u=>arbitraryVariableRegex.test(u),isArbitraryVariableLength=u=>getIsArbitraryVariable(u,isLabelLength),isArbitraryVariableFamilyName=u=>getIsArbitraryVariable(u,isLabelFamilyName),isArbitraryVariablePosition=u=>getIsArbitraryVariable(u,isLabelPosition),isArbitraryVariableSize=u=>getIsArbitraryVariable(u,isLabelSize),isArbitraryVariableImage=u=>getIsArbitraryVariable(u,isLabelImage),isArbitraryVariableShadow=u=>getIsArbitraryVariable(u,isLabelShadow,!0),isArbitraryVariableWeight=u=>getIsArbitraryVariable(u,isLabelWeight,!0),getIsArbitraryValue=(u,n,s)=>{const f=arbitraryValueRegex.exec(u);return f?f[1]?n(f[1]):s(f[2]):!1},getIsArbitraryVariable=(u,n,s=!1)=>{const f=arbitraryVariableRegex.exec(u);return f?f[1]?n(f[1]):s:!1},isLabelPosition=u=>u==="position"||u==="percentage",isLabelImage=u=>u==="image"||u==="url",isLabelSize=u=>u==="length"||u==="size"||u==="bg-size",isLabelLength=u=>u==="length",isLabelNumber=u=>u==="number",isLabelFamilyName=u=>u==="family-name",isLabelWeight=u=>u==="number"||u==="weight",isLabelShadow=u=>u==="shadow",getDefaultConfig=()=>{const u=fromTheme("color"),n=fromTheme("font"),s=fromTheme("text"),f=fromTheme("font-weight"),d=fromTheme("tracking"),y=fromTheme("leading"),_=fromTheme("breakpoint"),A=fromTheme("container"),R=fromTheme("spacing"),I=fromTheme("radius"),G=fromTheme("shadow"),Y=fromTheme("inset-shadow"),q=fromTheme("text-shadow"),K=fromTheme("drop-shadow"),Q=fromTheme("blur"),ne=fromTheme("perspective"),te=fromTheme("aspect"),J=fromTheme("ease"),ie=fromTheme("animate"),re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],fe=()=>[...le(),isArbitraryVariable,isArbitraryValue],pe=()=>["auto","hidden","clip","visible","scroll"],de=()=>["auto","contain","none"],se=()=>[isArbitraryVariable,isArbitraryValue,R],he=()=>[isFraction,"full","auto",...se()],Se=()=>[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue],ve=()=>["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue],Re=()=>[isInteger,"auto",isArbitraryVariable,isArbitraryValue],Ee=()=>["auto","min","max","fr",isArbitraryVariable,isArbitraryValue],Oe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ne=()=>["start","end","center","stretch","center-safe","end-safe"],ye=()=>["auto",...se()],Ae=()=>[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...se()],_e=()=>[isFraction,"screen","full","dvw","lvw","svw","min","max","fit",...se()],Te=()=>[isFraction,"screen","full","lh","dvh","lvh","svh","min","max","fit",...se()],we=()=>[u,isArbitraryVariable,isArbitraryValue],ge=()=>[...le(),isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}],De=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ze=()=>["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}],He=()=>[isPercent,isArbitraryVariableLength,isArbitraryLength],yt=()=>["","none","full",I,isArbitraryVariable,isArbitraryValue],Ge=()=>["",isNumber,isArbitraryVariableLength,isArbitraryLength],lt=()=>["solid","dashed","dotted","double"],Mt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],hn=()=>[isNumber,isPercent,isArbitraryVariablePosition,isArbitraryPosition],Fn=()=>["","none",Q,isArbitraryVariable,isArbitraryValue],Vn=()=>["none",isNumber,isArbitraryVariable,isArbitraryValue],ni=()=>["none",isNumber,isArbitraryVariable,isArbitraryValue],In=()=>[isNumber,isArbitraryVariable,isArbitraryValue],qe=()=>[isFraction,"full",...se()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,te]}],container:["container"],columns:[{columns:[isNumber,isArbitraryValue,isArbitraryVariable,A]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:fe()}],overflow:[{overflow:pe()}],"overflow-x":[{"overflow-x":pe()}],"overflow-y":[{"overflow-y":pe()}],overscroll:[{overscroll:de()}],"overscroll-x":[{"overscroll-x":de()}],"overscroll-y":[{"overscroll-y":de()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:he()}],"inset-x":[{"inset-x":he()}],"inset-y":[{"inset-y":he()}],start:[{"inset-s":he(),start:he()}],end:[{"inset-e":he(),end:he()}],"inset-bs":[{"inset-bs":he()}],"inset-be":[{"inset-be":he()}],top:[{top:he()}],right:[{right:he()}],bottom:[{bottom:he()}],left:[{left:he()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",A,...se()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":Se()}],"col-start-end":[{col:ve()}],"col-start":[{"col-start":Re()}],"col-end":[{"col-end":Re()}],"grid-rows":[{"grid-rows":Se()}],"row-start-end":[{row:ve()}],"row-start":[{"row-start":Re()}],"row-end":[{"row-end":Re()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ee()}],"auto-rows":[{"auto-rows":Ee()}],gap:[{gap:se()}],"gap-x":[{"gap-x":se()}],"gap-y":[{"gap-y":se()}],"justify-content":[{justify:[...Oe(),"normal"]}],"justify-items":[{"justify-items":[...Ne(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ne()]}],"align-content":[{content:["normal",...Oe()]}],"align-items":[{items:[...Ne(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ne(),{baseline:["","last"]}]}],"place-content":[{"place-content":Oe()}],"place-items":[{"place-items":[...Ne(),"baseline"]}],"place-self":[{"place-self":["auto",...Ne()]}],p:[{p:se()}],px:[{px:se()}],py:[{py:se()}],ps:[{ps:se()}],pe:[{pe:se()}],pbs:[{pbs:se()}],pbe:[{pbe:se()}],pt:[{pt:se()}],pr:[{pr:se()}],pb:[{pb:se()}],pl:[{pl:se()}],m:[{m:ye()}],mx:[{mx:ye()}],my:[{my:ye()}],ms:[{ms:ye()}],me:[{me:ye()}],mbs:[{mbs:ye()}],mbe:[{mbe:ye()}],mt:[{mt:ye()}],mr:[{mr:ye()}],mb:[{mb:ye()}],ml:[{ml:ye()}],"space-x":[{"space-x":se()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":se()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ae()}],"inline-size":[{inline:["auto",..._e()]}],"min-inline-size":[{"min-inline":["auto",..._e()]}],"max-inline-size":[{"max-inline":["none",..._e()]}],"block-size":[{block:["auto",...Te()]}],"min-block-size":[{"min-block":["auto",...Te()]}],"max-block-size":[{"max-block":["none",...Te()]}],w:[{w:[A,"screen",...Ae()]}],"min-w":[{"min-w":[A,"screen","none",...Ae()]}],"max-w":[{"max-w":[A,"screen","none","prose",{screen:[_]},...Ae()]}],h:[{h:["screen","lh",...Ae()]}],"min-h":[{"min-h":["screen","lh","none",...Ae()]}],"max-h":[{"max-h":["screen","lh",...Ae()]}],"font-size":[{text:["base",s,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[f,isArbitraryVariableWeight,isArbitraryWeight]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryFamilyName,n]}],"font-features":[{"font-features":[isArbitraryValue]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[d,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[y,...se()]}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:we()}],"text-color":[{text:we()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...lt(),"wavy"]}],"text-decoration-thickness":[{decoration:[isNumber,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:we()}],"underline-offset":[{"underline-offset":[isNumber,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:se()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ge()}],"bg-repeat":[{bg:De()}],"bg-size":[{bg:ze()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:we()}],"gradient-from-pos":[{from:He()}],"gradient-via-pos":[{via:He()}],"gradient-to-pos":[{to:He()}],"gradient-from":[{from:we()}],"gradient-via":[{via:we()}],"gradient-to":[{to:we()}],rounded:[{rounded:yt()}],"rounded-s":[{"rounded-s":yt()}],"rounded-e":[{"rounded-e":yt()}],"rounded-t":[{"rounded-t":yt()}],"rounded-r":[{"rounded-r":yt()}],"rounded-b":[{"rounded-b":yt()}],"rounded-l":[{"rounded-l":yt()}],"rounded-ss":[{"rounded-ss":yt()}],"rounded-se":[{"rounded-se":yt()}],"rounded-ee":[{"rounded-ee":yt()}],"rounded-es":[{"rounded-es":yt()}],"rounded-tl":[{"rounded-tl":yt()}],"rounded-tr":[{"rounded-tr":yt()}],"rounded-br":[{"rounded-br":yt()}],"rounded-bl":[{"rounded-bl":yt()}],"border-w":[{border:Ge()}],"border-w-x":[{"border-x":Ge()}],"border-w-y":[{"border-y":Ge()}],"border-w-s":[{"border-s":Ge()}],"border-w-e":[{"border-e":Ge()}],"border-w-bs":[{"border-bs":Ge()}],"border-w-be":[{"border-be":Ge()}],"border-w-t":[{"border-t":Ge()}],"border-w-r":[{"border-r":Ge()}],"border-w-b":[{"border-b":Ge()}],"border-w-l":[{"border-l":Ge()}],"divide-x":[{"divide-x":Ge()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ge()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...lt(),"hidden","none"]}],"divide-style":[{divide:[...lt(),"hidden","none"]}],"border-color":[{border:we()}],"border-color-x":[{"border-x":we()}],"border-color-y":[{"border-y":we()}],"border-color-s":[{"border-s":we()}],"border-color-e":[{"border-e":we()}],"border-color-bs":[{"border-bs":we()}],"border-color-be":[{"border-be":we()}],"border-color-t":[{"border-t":we()}],"border-color-r":[{"border-r":we()}],"border-color-b":[{"border-b":we()}],"border-color-l":[{"border-l":we()}],"divide-color":[{divide:we()}],"outline-style":[{outline:[...lt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[isNumber,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:we()}],shadow:[{shadow:["","none",G,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:we()}],"inset-shadow":[{"inset-shadow":["none",Y,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":we()}],"ring-w":[{ring:Ge()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:we()}],"ring-offset-w":[{"ring-offset":[isNumber,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":we()}],"inset-ring-w":[{"inset-ring":Ge()}],"inset-ring-color":[{"inset-ring":we()}],"text-shadow":[{"text-shadow":["none",q,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":we()}],opacity:[{opacity:[isNumber,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[...Mt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Mt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber]}],"mask-image-linear-from-pos":[{"mask-linear-from":hn()}],"mask-image-linear-to-pos":[{"mask-linear-to":hn()}],"mask-image-linear-from-color":[{"mask-linear-from":we()}],"mask-image-linear-to-color":[{"mask-linear-to":we()}],"mask-image-t-from-pos":[{"mask-t-from":hn()}],"mask-image-t-to-pos":[{"mask-t-to":hn()}],"mask-image-t-from-color":[{"mask-t-from":we()}],"mask-image-t-to-color":[{"mask-t-to":we()}],"mask-image-r-from-pos":[{"mask-r-from":hn()}],"mask-image-r-to-pos":[{"mask-r-to":hn()}],"mask-image-r-from-color":[{"mask-r-from":we()}],"mask-image-r-to-color":[{"mask-r-to":we()}],"mask-image-b-from-pos":[{"mask-b-from":hn()}],"mask-image-b-to-pos":[{"mask-b-to":hn()}],"mask-image-b-from-color":[{"mask-b-from":we()}],"mask-image-b-to-color":[{"mask-b-to":we()}],"mask-image-l-from-pos":[{"mask-l-from":hn()}],"mask-image-l-to-pos":[{"mask-l-to":hn()}],"mask-image-l-from-color":[{"mask-l-from":we()}],"mask-image-l-to-color":[{"mask-l-to":we()}],"mask-image-x-from-pos":[{"mask-x-from":hn()}],"mask-image-x-to-pos":[{"mask-x-to":hn()}],"mask-image-x-from-color":[{"mask-x-from":we()}],"mask-image-x-to-color":[{"mask-x-to":we()}],"mask-image-y-from-pos":[{"mask-y-from":hn()}],"mask-image-y-to-pos":[{"mask-y-to":hn()}],"mask-image-y-from-color":[{"mask-y-from":we()}],"mask-image-y-to-color":[{"mask-y-to":we()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":hn()}],"mask-image-radial-to-pos":[{"mask-radial-to":hn()}],"mask-image-radial-from-color":[{"mask-radial-from":we()}],"mask-image-radial-to-color":[{"mask-radial-to":we()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":le()}],"mask-image-conic-pos":[{"mask-conic":[isNumber]}],"mask-image-conic-from-pos":[{"mask-conic-from":hn()}],"mask-image-conic-to-pos":[{"mask-conic-to":hn()}],"mask-image-conic-from-color":[{"mask-conic-from":we()}],"mask-image-conic-to-color":[{"mask-conic-to":we()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ge()}],"mask-repeat":[{mask:De()}],"mask-size":[{mask:ze()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:Fn()}],brightness:[{brightness:[isNumber,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",K,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":we()}],grayscale:[{grayscale:["",isNumber,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":Fn()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":se()}],"border-spacing-x":[{"border-spacing-x":se()}],"border-spacing-y":[{"border-spacing-y":se()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",J,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",ie,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[ne,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":fe()}],rotate:[{rotate:Vn()}],"rotate-x":[{"rotate-x":Vn()}],"rotate-y":[{"rotate-y":Vn()}],"rotate-z":[{"rotate-z":Vn()}],scale:[{scale:ni()}],"scale-x":[{"scale-x":ni()}],"scale-y":[{"scale-y":ni()}],"scale-z":[{"scale-z":ni()}],"scale-3d":["scale-3d"],skew:[{skew:In()}],"skew-x":[{"skew-x":In()}],"skew-y":[{"skew-y":In()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:fe()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:qe()}],"translate-x":[{"translate-x":qe()}],"translate-y":[{"translate-y":qe()}],"translate-z":[{"translate-z":qe()}],"translate-none":["translate-none"],accent:[{accent:we()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:we()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":se()}],"scroll-mx":[{"scroll-mx":se()}],"scroll-my":[{"scroll-my":se()}],"scroll-ms":[{"scroll-ms":se()}],"scroll-me":[{"scroll-me":se()}],"scroll-mbs":[{"scroll-mbs":se()}],"scroll-mbe":[{"scroll-mbe":se()}],"scroll-mt":[{"scroll-mt":se()}],"scroll-mr":[{"scroll-mr":se()}],"scroll-mb":[{"scroll-mb":se()}],"scroll-ml":[{"scroll-ml":se()}],"scroll-p":[{"scroll-p":se()}],"scroll-px":[{"scroll-px":se()}],"scroll-py":[{"scroll-py":se()}],"scroll-ps":[{"scroll-ps":se()}],"scroll-pe":[{"scroll-pe":se()}],"scroll-pbs":[{"scroll-pbs":se()}],"scroll-pbe":[{"scroll-pbe":se()}],"scroll-pt":[{"scroll-pt":se()}],"scroll-pr":[{"scroll-pr":se()}],"scroll-pb":[{"scroll-pb":se()}],"scroll-pl":[{"scroll-pl":se()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none",...we()]}],"stroke-w":[{stroke:[isNumber,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none",...we()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","inset-bs","inset-be","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pbs","pbe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mbs","mbe","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-bs","border-w-be","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-bs","border-color-be","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mbs","scroll-mbe","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pbs","scroll-pbe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...u){return twMerge(clsx(u))}const API_BASE="http://localhost:8000";async function post(u,n){const s=await fetch(`${API_BASE}${u}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!s.ok){const f=await s.json().catch(()=>({detail:s.statusText}));throw new Error(f.detail||`API error ${s.status}`)}return s.json()}const suggestIdeas=(u,n,s)=>post("/suggest-ideas",{problem:u,industry:n,product_type:s}),validateIdea=(u,n,s)=>post("/validate",{idea:u,audience:n,competitors:s}),generateRoadmap=(u,n)=>post("/roadmap",{idea:u,focus:n}),generateCopy=(u,n,s)=>post("/copy",{idea:u,audience:n,tone:s}),OnboardingFlow=({onComplete:u,onBackToDashboard:n,initialStep:s="welcome",initialFlow:f=null})=>{const[d,y]=reactExports.useState(s),[_,A]=reactExports.useState(f),[R,I]=reactExports.useState(""),[G,Y]=reactExports.useState(""),[q,K]=reactExports.useState(""),[Q,ne]=reactExports.useState(""),[te,J]=reactExports.useState(""),[ie,re]=reactExports.useState(""),[le,fe]=reactExports.useState(!1),[pe,de]=reactExports.useState([]);React.useEffect(()=>{(R||G||Q||te)&&localStorage.setItem("onboarding_draft_status","true")},[R,G,Q,te]);const se=()=>{d==="welcome"||(d==="idea_step1"?y("idea_step2"):d==="idea_step2"?y("idea_step3"):d==="idea_step3"?u({idea:R,audience:G,competitors:q,flow:"have_idea"}):d==="create_step1"?y("create_step2"):d==="create_step2"?y("create_step3"):d==="create_step3"&&Se())},he=()=>{if((d==="idea_step1"||d==="create_step1")&&n){n();return}d==="idea_step1"||d==="create_step1"?y("welcome"):d==="idea_step2"?y("idea_step1"):d==="idea_step3"?y("idea_step2"):d==="create_step2"?y("create_step1"):d==="create_step3"?y("create_step2"):d==="pick_idea"&&y("create_step3")},Se=async()=>{fe(!0);try{const ye=await suggestIdeas(Q,te,ie);de(ye.ideas),y("pick_idea")}catch(ye){console.error(ye)}finally{fe(!1)}},ve=ye=>{u({idea:ye.title+": "+ye.description,audience:ye.audience,flow:"help_create"})},Re=[{id:"fintech",label:"Fintech",icon:jsxRuntimeExports.jsx(Wallet,{size:18})},{id:"edtech",label:"Edtech",icon:jsxRuntimeExports.jsx(BookOpen,{size:18})},{id:"health",label:"Health",icon:jsxRuntimeExports.jsx(HeartPulse,{size:18})},{id:"ai",label:"AI/ML",icon:jsxRuntimeExports.jsx(Cpu,{size:18})},{id:"ecommerce",label:"E-commerce",icon:jsxRuntimeExports.jsx(ShoppingBag,{size:18})},{id:"saas",label:"B2B SaaS",icon:jsxRuntimeExports.jsx(Building2,{size:18})}],Ee=[{id:"saas",label:"SaaS Platform",icon:jsxRuntimeExports.jsx(Layers$1,{size:18})},{id:"marketplace",label:"Marketplace",icon:jsxRuntimeExports.jsx(Globe,{size:18})},{id:"mobile",label:"Mobile App",icon:jsxRuntimeExports.jsx(Sparkles,{size:18})},{id:"agent",label:"AI Agent",icon:jsxRuntimeExports.jsx(Cpu,{size:18})}],Oe=le?"thinking":d==="pick_idea"||d==="welcome"?"happy":d==="idea_step3"||d==="create_step3"?"signup":"login",Ne={welcome:"Ready when you are, founder! ",idea_step1:"Tell me your big idea  no filter needed!",idea_step2:"Who are you building this for?",idea_step3:"Optional: knowing rivals helps me go deeper.",create_step1:"What problem keeps you up at night?",create_step2:"Pick the world you want to play in!",create_step3:"What kind of product do you picture?",pick_idea:"These are hand-picked for you  click one to dive in!"};return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-[100] bg-[#FDFDFF] flex items-center justify-center p-6 overflow-hidden uppercase italic",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] bg-indigo-200/20 blur-[150px] rounded-full animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] bg-violet-200/20 blur-[150px] rounded-full animate-pulse",style:{animationDelay:"2s"}}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-[0.03]"})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-8 right-8 z-[110]",children:jsxRuntimeExports.jsx("button",{onClick:()=>{__vitePreload(async()=>{const{signOut:ye}=await Promise.resolve().then(()=>index_esm);return{signOut:ye}},[]).then(({signOut:ye})=>{__vitePreload(async()=>{const{auth:Ae}=await Promise.resolve().then(()=>firebase);return{auth:Ae}},void 0).then(({auth:Ae})=>{Ae&&ye(Ae)})})},className:"group flex items-center gap-3 px-6 py-3 bg-white/80 backdrop-blur-xl border border-slate-100 hover:border-rose-100 hover:bg-rose-50/30 text-slate-400 hover:text-rose-500 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-slate-100",children:"Sign Out"})}),!le&&jsxRuntimeExports.jsx("div",{className:"relative z-10 w-full max-w-5xl",children:jsxRuntimeExports.jsxs(AnimatePresence,{mode:"wait",children:[d==="welcome"&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9,y:40},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:1.1,y:-40},className:"bg-white/80 backdrop-blur-3xl p-16 rounded-[5rem] shadow-[0_50px_100px_rgba(0,0,0,0.08)] border border-white text-center space-y-12 max-w-2xl mx-auto relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-indigo-500 via-purple-500 to-indigo-500"}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("h1",{className:"text-6xl font-black text-slate-900 tracking-tight leading-[1.1]",children:["Hey Founder ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-violet-600 bg-clip-text text-transparent",children:"Ready to build?"})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-xl font-medium max-w-sm mx-auto leading-relaxed not-italic normal-case",children:"Your AI Co-Founder is locked in and ready to turn your vision into a venture."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 pt-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{A("have_idea"),y("idea_step1")},className:"group relative p-10 bg-white border border-slate-100 hover:border-indigo-600 rounded-[3rem] transition-all text-left space-y-4 hover:shadow-[0_30px_60px_rgba(79,70,229,0.15)] overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsx("div",{className:"relative z-10 w-14 h-14 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 group-hover:bg-indigo-600 group-hover:text-white transition-all transform group-hover:scale-110 group-hover:rotate-6",children:jsxRuntimeExports.jsx(Lightbulb,{size:28})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase italic group-hover:text-indigo-600 transition-colors",children:"I Have an Idea"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest mt-1 not-italic normal-case",children:"Refine Vision"})]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{A("help_create"),y("create_step1")},className:"group relative p-10 bg-white border border-slate-100 hover:border-violet-600 rounded-[3rem] transition-all text-left space-y-4 hover:shadow-[0_30px_60px_rgba(139,92,246,0.15)] overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsx("div",{className:"relative z-10 w-14 h-14 bg-violet-50 rounded-2xl flex items-center justify-center text-violet-600 group-hover:bg-violet-600 group-hover:text-white transition-all transform group-hover:scale-110 group-hover:rotate-6",children:jsxRuntimeExports.jsx(Sparkles,{size:28})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase italic group-hover:text-violet-600 transition-colors",children:"Help Me Create"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest mt-1 not-italic normal-case",children:"AI Ideation"})]})]})]})]},"welcome"),d==="idea_step1"&&jsxRuntimeExports.jsx(StepContainer,{title:"Whats your startup idea?",onBack:he,onNext:se,canNext:R.length>5,progress:33,children:jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-[2.6rem] blur opacity-20 group-focus-within:opacity-40 transition duration-500"}),jsxRuntimeExports.jsx("textarea",{autoFocus:!0,value:R,onChange:ye=>I(ye.target.value),placeholder:"e.g. A marketplace for local artisanal coffee beans...",className:"relative w-full h-48 p-10 rounded-[2.5rem] bg-white border-2 border-slate-50 focus:border-indigo-100 focus:bg-white focus:ring-4 focus:ring-indigo-50 transition-all resize-none text-2xl font-bold leading-relaxed text-slate-900 placeholder:text-slate-200 not-italic normal-case"})]})}),d==="idea_step2"&&jsxRuntimeExports.jsx(StepContainer,{title:"Who is this for?",onBack:he,onNext:se,canNext:G.length>3,progress:66,children:jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-[2.1rem] blur opacity-20 group-focus-within:opacity-40 transition duration-500"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-8 top-1/2 -translate-y-1/2 text-slate-200 group-focus-within:text-indigo-500 transition-colors",children:jsxRuntimeExports.jsx(Users,{size:32})}),jsxRuntimeExports.jsx("input",{autoFocus:!0,type:"text",value:G,onChange:ye=>Y(ye.target.value),placeholder:"e.g. Coffee enthusiasts...",className:"w-full p-10 pl-20 rounded-[2rem] bg-white border-2 border-slate-50 focus:border-indigo-100 focus:bg-white focus:ring-4 focus:ring-indigo-50 transition-all text-2xl font-bold text-slate-900 placeholder:text-slate-200 not-italic normal-case"})]})]})}),d==="idea_step3"&&jsxRuntimeExports.jsx(StepContainer,{title:"Do you know competitors?",subtitle:"(Optional but helpful)",onBack:he,onNext:se,canNext:!0,nextLabel:"Analyze Now",progress:100,children:jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-[2.1rem] blur opacity-20 group-focus-within:opacity-40 transition duration-500"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-8 top-1/2 -translate-y-1/2 text-slate-200 group-focus-within:text-indigo-500 transition-colors",children:jsxRuntimeExports.jsx(Search,{size:32})}),jsxRuntimeExports.jsx("input",{autoFocus:!0,type:"text",value:q,onChange:ye=>K(ye.target.value),placeholder:"e.g. Starbucks, Airbnb",className:"w-full p-10 pl-20 rounded-[2rem] bg-white border-2 border-slate-50 focus:border-indigo-100 focus:bg-white focus:ring-4 focus:ring-indigo-50 transition-all text-2xl font-bold text-slate-900 placeholder:text-slate-200 not-italic normal-case"})]})]})}),d==="create_step1"&&jsxRuntimeExports.jsx(StepContainer,{title:"What problem do you care about solving?",onBack:he,onNext:se,canNext:Q.length>5,progress:25,children:jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-violet-500 to-fuchsia-500 rounded-[2.6rem] blur opacity-20 group-focus-within:opacity-40 transition duration-500"}),jsxRuntimeExports.jsx("textarea",{autoFocus:!0,value:Q,onChange:ye=>ne(ye.target.value),placeholder:"e.g. Reducing food waste in households...",className:"relative w-full h-48 p-10 rounded-[2.5rem] bg-white border-2 border-slate-50 focus:border-violet-100 focus:bg-white focus:ring-4 focus:ring-violet-50 transition-all resize-none text-2xl font-bold leading-relaxed text-slate-900 placeholder:text-slate-200 not-italic normal-case"})]})}),d==="create_step2"&&jsxRuntimeExports.jsx(StepContainer,{title:"What industry?",onBack:he,onNext:se,canNext:te!=="",progress:50,children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-6",children:Re.map(ye=>jsxRuntimeExports.jsxs("button",{onClick:()=>J(ye.id),className:cn("p-10 rounded-[2.5rem] border-2 transition-all flex flex-col items-center gap-4 relative overflow-hidden group/btn",te===ye.id?"bg-violet-600 border-violet-600 text-white shadow-[0_20px_40px_rgba(139,92,246,0.3)]":"bg-white border-slate-50 text-slate-500 hover:border-violet-100 hover:bg-violet-50/30"),children:[jsxRuntimeExports.jsx("div",{className:cn("w-12 h-12 rounded-xl flex items-center justify-center transition-all group-hover/btn:scale-110",te===ye.id?"bg-white/20 text-white":"bg-slate-50 text-slate-400 group-hover/btn:bg-white group-hover/btn:text-violet-600"),children:ye.icon}),jsxRuntimeExports.jsx("span",{className:"text-xs font-black uppercase tracking-[0.2em]",children:ye.label})]},ye.id))})}),d==="create_step3"&&jsxRuntimeExports.jsx(StepContainer,{title:"What type of product?",onBack:he,onNext:se,canNext:ie!=="",nextLabel:"Generate Ideas",progress:75,children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-6",children:Ee.map(ye=>jsxRuntimeExports.jsxs("button",{onClick:()=>re(ye.id),className:cn("p-10 rounded-[2.5rem] border-2 transition-all flex flex-col items-center gap-4 group/pt relative overflow-hidden",ie===ye.id?"bg-violet-600 border-violet-600 text-white shadow-[0_20px_40px_rgba(139,92,246,0.3)]":"bg-white border-slate-50 text-slate-500 hover:border-violet-100 hover:bg-violet-50/30"),children:[jsxRuntimeExports.jsx("div",{className:cn("w-16 h-16 rounded-2xl flex items-center justify-center transition-all group-hover/pt:scale-110",ie===ye.id?"bg-white/20 text-white":"bg-slate-50 text-slate-400 group-hover/pt:bg-white group-hover/pt:text-violet-600"),children:ye.icon}),jsxRuntimeExports.jsx("span",{className:"text-sm font-black uppercase tracking-[0.2em]",children:ye.label})]},ye.id))})}),d==="pick_idea"&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"space-y-12 w-full max-w-6xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx(motion.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"inline-block px-4 py-2 bg-indigo-50 text-indigo-600 rounded-full text-xs font-black uppercase tracking-[0.3em] mb-2",children:"AI Suggested Concepts"}),jsxRuntimeExports.jsx("h2",{className:"text-5xl font-black text-slate-900 tracking-tight not-italic",children:"Pick an idea to refine"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 font-medium text-lg not-italic normal-case",children:"Hover to see unique advantages."})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:pe.map((ye,Ae)=>jsxRuntimeExports.jsxs(motion.button,{whileHover:{y:-12,scale:1.02},initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{delay:Ae*.1},onClick:()=>ve(ye),className:"group p-10 bg-white border border-slate-100 hover:border-indigo-600 rounded-[4rem] transition-all text-left flex flex-col h-full hover:shadow-[0_40px_80px_rgba(79,70,229,0.12)] relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-[0.03] group-hover:opacity-[0.08] transition-opacity",children:jsxRuntimeExports.jsx(Sparkles,{size:120})}),jsxRuntimeExports.jsx("div",{className:"w-14 h-14 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center mb-8 group-hover:bg-indigo-600 group-hover:text-white transition-all transform group-hover:rotate-12",children:Ae===0?jsxRuntimeExports.jsx(Rocket,{size:28}):Ae===1?jsxRuntimeExports.jsx(Globe,{size:28}):jsxRuntimeExports.jsx(Cpu,{size:28})}),jsxRuntimeExports.jsx("h3",{className:"text-3xl font-black text-slate-900 mb-4 leading-tight group-hover:text-indigo-600 transition-colors uppercase italic tracking-tighter",children:ye.title}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-lg font-medium leading-relaxed mb-10 flex-grow not-italic normal-case",children:ye.description}),jsxRuntimeExports.jsxs("div",{className:"pt-8 border-t border-slate-50 mt-auto relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 group-hover:animate-ping"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-[0.2em] block",children:"Unique Advantage"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-bold text-slate-700 leading-relaxed italic",children:['"',ye.unique_value_proposition,'"']})]}),jsxRuntimeExports.jsx("div",{className:"mt-8 flex items-center justify-between",children:jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-indigo-50 group-hover:bg-indigo-600 text-indigo-600 group-hover:text-white rounded-xl text-[10px] font-black transition-colors uppercase tracking-widest not-italic",children:"Refine Now"})})]},Ae))}),jsxRuntimeExports.jsx("div",{className:"flex justify-center pt-8",children:jsxRuntimeExports.jsxs("button",{onClick:he,className:"group px-8 py-4 text-slate-400 hover:text-slate-600 font-bold text-sm uppercase tracking-[0.2em] flex items-center gap-3 transition-all not-italic",children:[jsxRuntimeExports.jsx(ChevronLeft,{size:18,className:"group-hover:-translate-x-1 transition-transform"})," Regenerate Options"]})})]},"pick_idea")]})}),jsxRuntimeExports.jsx(CatMascot,{isGenerating:le,soundEnabled:!0}),!le&&jsxRuntimeExports.jsxs(motion.div,{className:"fixed bottom-32 right-38 z-[120] flex flex-col items-end gap-2",initial:{x:120,opacity:0},animate:{x:0,opacity:1},transition:{type:"spring",stiffness:80,damping:18,delay:.4},children:[jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:8,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.9},transition:{duration:.3},className:"max-w-[200px] bg-white border border-slate-100 shadow-lg rounded-2xl rounded-br-none px-4 py-3 text-xs font-semibold text-slate-600 normal-case not-italic leading-snug",children:[Ne[d],jsxRuntimeExports.jsx("span",{className:"absolute -bottom-2 right-4 w-3 h-3 bg-white border-r border-b border-slate-100 rotate-45"})]},d)}),jsxRuntimeExports.jsx("div",{className:"w-28 h-28 -mt-1",children:jsxRuntimeExports.jsx(CopilotCat,{mode:Oe})})]})]})},StepContainer=({title:u,subtitle:n,children:s,onBack:f,onNext:d,canNext:y,nextLabel:_="Next",progress:A})=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"bg-white p-12 rounded-[4rem] shadow-[0_40px_100px_rgba(0,0,0,0.07)] border border-slate-100 space-y-10 relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-slate-50",children:jsxRuntimeExports.jsx(motion.div,{initial:{width:0},animate:{width:`${A}%`},className:"h-full bg-indigo-600"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("button",{onClick:f,className:"p-4 hover:bg-slate-50 rounded-2xl transition-colors text-slate-400",children:jsxRuntimeExports.jsx(ChevronLeft,{size:24})}),jsxRuntimeExports.jsxs("div",{className:"text-[10px] font-black text-slate-300 uppercase tracking-[0.3em]",children:["Co-Founder Step ",A===100?"Final":Math.ceil(A/25)]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tight leading-tight",children:u}),n&&jsxRuntimeExports.jsx("p",{className:"text-slate-400 font-medium",children:n})]}),jsxRuntimeExports.jsx("div",{className:"py-2",children:s}),jsxRuntimeExports.jsx("div",{className:"flex justify-end pt-4",children:jsxRuntimeExports.jsxs(motion.button,{disabled:!y,onClick:d,whileHover:{scale:y?1.02:1},whileTap:{scale:.98},className:cn("px-10 py-6 rounded-[2rem] font-black text-lg flex items-center gap-3 transition-all",y?"bg-indigo-600 text-white shadow-2xl shadow-indigo-200 hover:shadow-indigo-300":"bg-slate-100 text-slate-300 cursor-not-allowed"),children:[_,jsxRuntimeExports.jsx(ArrowRight,{size:20})]})})]}),ScoreRing=({score:u})=>{const[n,s]=reactExports.useState(0),f=72,d=2*Math.PI*f,y=u>85,_=u<40,A=_?"url(#lowGrad)":"url(#scoreGrad)";reactExports.useEffect(()=>{let I=0;const G=u,Y=2e3,q=performance.now(),K=Q=>{const ne=Q-q,te=Math.min(ne/Y,1),J=1-Math.pow(1-te,3);s(Math.round(I+(G-I)*J)),te<1&&requestAnimationFrame(K)};requestAnimationFrame(K)},[u]);const R=d-d*u/100;return jsxRuntimeExports.jsxs("div",{className:"relative w-48 h-48 flex items-center justify-center shrink-0 group",children:[y&&jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 rounded-full",style:{background:"radial-gradient(circle, rgba(99,102,241,0.25) 0%, transparent 70%)",filter:"blur(12px)"},animate:{scale:[1,1.12,1],opacity:[.6,1,.6]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"}}),jsxRuntimeExports.jsxs("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 160 160",children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("linearGradient",{id:"scoreGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#6366f1"}),jsxRuntimeExports.jsx("stop",{offset:"50%",stopColor:"#8b5cf6"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]}),jsxRuntimeExports.jsxs("linearGradient",{id:"lowGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#f97316"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#fbbf24"})]}),jsxRuntimeExports.jsxs("filter",{id:"glow",children:[jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),jsxRuntimeExports.jsxs("feMerge",{children:[jsxRuntimeExports.jsx("feMergeNode",{in:"coloredBlur"}),jsxRuntimeExports.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),jsxRuntimeExports.jsx("circle",{cx:"80",cy:"80",r:f,fill:"transparent",stroke:"#e0e7ff",strokeWidth:"12"}),jsxRuntimeExports.jsx(motion.circle,{cx:"80",cy:"80",r:f,fill:"transparent",stroke:A,strokeWidth:"12",strokeLinecap:"round",strokeDasharray:d,initial:{strokeDashoffset:d},animate:{strokeDashoffset:R},transition:{duration:2,ease:"circOut"},filter:"url(#glow)"})]}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsx(motion.span,{className:cn("text-5xl font-black leading-none",_?"text-orange-500":"text-indigo-900"),children:n}),jsxRuntimeExports.jsx("span",{className:"text-[9px] uppercase tracking-[0.25em] text-slate-400 font-black mt-1",children:"VC Index"}),jsxRuntimeExports.jsx(motion.div,{className:cn("w-2 h-2 rounded-full mt-1",_?"bg-orange-400":"bg-indigo-400"),animate:{scale:[1,1.5,1],opacity:[.7,1,.7]},transition:{duration:1.5,repeat:1/0}})]})]})},SWOTCard=({title:u,items:n,icon:s,color:f,delay:d})=>{const[y,_]=reactExports.useState(!1),A=y?n:n.slice(0,2),I={emerald:{bg:"bg-gradient-to-br from-emerald-50/80 to-white",border:"border-emerald-100",iconBg:"bg-emerald-100",badge:"bg-emerald-500",dot:"bg-emerald-400",gradBorder:"from-emerald-400 to-teal-400"},amber:{bg:"bg-gradient-to-br from-amber-50/80 to-white",border:"border-amber-100",iconBg:"bg-amber-100",badge:"bg-amber-500",dot:"bg-amber-400",gradBorder:"from-amber-400 to-orange-400"},indigo:{bg:"bg-gradient-to-br from-indigo-50/80 to-white",border:"border-indigo-100",iconBg:"bg-indigo-100",badge:"bg-indigo-500",dot:"bg-indigo-400",gradBorder:"from-indigo-400 to-purple-400"},rose:{bg:"bg-gradient-to-br from-rose-50/80 to-white",border:"border-rose-100",iconBg:"bg-rose-100",badge:"bg-rose-500",dot:"bg-rose-400",gradBorder:"from-rose-400 to-pink-400"}}[f];return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.5,delay:d,ease:"easeOut"},whileHover:{y:-6,boxShadow:"0 24px 48px rgba(0,0,0,0.10)"},className:cn("relative p-6 rounded-3xl border backdrop-blur-sm cursor-default transition-all duration-300 overflow-hidden group",I.bg,I.border),children:[jsxRuntimeExports.jsx("div",{className:cn("absolute inset-0 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none","ring-2 ring-inset ring-transparent group-hover:ring-indigo-200")}),jsxRuntimeExports.jsx("div",{className:cn("absolute top-0 left-0 right-0 h-1 rounded-t-3xl bg-gradient-to-r",I.gradBorder)}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx(motion.div,{whileHover:{rotate:12,scale:1.1},className:cn("w-10 h-10 rounded-2xl flex items-center justify-center shadow-sm",I.iconBg),children:s}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-black text-slate-900 text-sm tracking-tight",children:u}),jsxRuntimeExports.jsxs("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:[n.length," points"]})]})]}),jsxRuntimeExports.jsx("ul",{className:"space-y-2.5",children:jsxRuntimeExports.jsx(AnimatePresence,{children:A.map((G,Y)=>jsxRuntimeExports.jsxs(motion.li,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0},exit:{opacity:0,x:-8},transition:{delay:Y*.06},className:"text-xs text-slate-600 flex gap-2.5 leading-relaxed font-medium",children:[jsxRuntimeExports.jsx(motion.span,{className:cn("mt-1.5 w-1.5 h-1.5 rounded-full shrink-0",I.dot),whileHover:{scale:1.5}}),G]},Y))})}),n.length>2&&jsxRuntimeExports.jsxs("button",{onClick:()=>_(!y),className:"mt-4 flex items-center gap-1 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-slate-700 transition-colors",children:[y?jsxRuntimeExports.jsx(ChevronUp,{size:12}):jsxRuntimeExports.jsx(ChevronDown,{size:12}),y?"Show less":`+${n.length-2} more`]})]})},MarketPositionMap=({competitors:u})=>{const n=[{x:25,y:70},{x:65,y:35},{x:45,y:55},{x:80,y:80}],s={x:82,y:22};return jsxRuntimeExports.jsxs("div",{className:"mt-8 bg-gradient-to-br from-slate-900 to-indigo-950 rounded-3xl p-6 shadow-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-black text-indigo-300 uppercase tracking-widest",children:"Market Position Map"})]}),jsxRuntimeExports.jsx("div",{className:"relative w-full",style:{aspectRatio:"2/1"},children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 400 200",className:"w-full h-full",children:[[25,50,75].map(f=>jsxRuntimeExports.jsx("line",{x1:f*4,y1:"0",x2:f*4,y2:"200",stroke:"rgba(99,102,241,0.1)",strokeWidth:"1"},f)),[25,50,75].map(f=>jsxRuntimeExports.jsx("line",{x1:"0",y1:f*2,x2:"400",y2:f*2,stroke:"rgba(99,102,241,0.1)",strokeWidth:"1"},f)),jsxRuntimeExports.jsx("text",{x:"200",y:"195",textAnchor:"middle",fontSize:"8",fill:"rgba(148,163,184,0.8)",fontFamily:"sans-serif",children:" Feature Rich"}),jsxRuntimeExports.jsx("text",{x:"6",y:"100",textAnchor:"middle",fontSize:"8",fill:"rgba(148,163,184,0.8)",fontFamily:"sans-serif",transform:"rotate(-90, 6, 100)",children:" Ease of Use"}),u.slice(0,4).map((f,d)=>{const y=n[d]||{x:50,y:50};return jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx(motion.circle,{cx:y.x*4,cy:(100-y.y)*2,r:"8",fill:"rgba(148,163,184,0.3)",stroke:"rgba(148,163,184,0.6)",strokeWidth:"1.5",initial:{scale:0},animate:{scale:1},transition:{delay:.3+d*.1}}),jsxRuntimeExports.jsx("text",{x:y.x*4,y:(100-y.y)*2-12,textAnchor:"middle",fontSize:"7",fill:"rgba(148,163,184,0.9)",fontFamily:"sans-serif",children:f.name.split(" ")[0]})]},d)}),jsxRuntimeExports.jsx(motion.circle,{cx:s.x*4,cy:(100-s.y)*2,r:"12",fill:"url(#yourGrad)",filter:"url(#dotGlow)",initial:{scale:0},animate:{scale:1},transition:{delay:.8,type:"spring"}}),jsxRuntimeExports.jsx(motion.text,{x:s.x*4,y:(100-s.y)*2-16,textAnchor:"middle",fontSize:"8",fill:"#c7d2fe",fontWeight:"bold",fontFamily:"sans-serif",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:"You "}),jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("radialGradient",{id:"yourGrad",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#818cf8"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#6366f1"})]}),jsxRuntimeExports.jsxs("filter",{id:"dotGlow",children:[jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),jsxRuntimeExports.jsxs("feMerge",{children:[jsxRuntimeExports.jsx("feMergeNode",{in:"blur"}),jsxRuntimeExports.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]})]})})]})},CompetitorCard=({comp:u,idx:n})=>{const s=["from-violet-500 to-indigo-500","from-fuchsia-500 to-pink-500","from-cyan-500 to-blue-500","from-emerald-500 to-teal-500"],f=s[n%s.length],d=u.positioning.split(" ").slice(0,2).join(" ");return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*n,duration:.4},whileHover:{y:-4,boxShadow:"0 20px 40px rgba(99,102,241,0.12)"},className:"relative bg-white rounded-3xl border border-slate-100 overflow-hidden group transition-all",children:[jsxRuntimeExports.jsx("div",{className:cn("absolute left-0 top-0 bottom-0 w-1.5 bg-gradient-to-b",f)}),jsxRuntimeExports.jsxs("div",{className:"p-5 pl-7",children:[jsxRuntimeExports.jsx("div",{className:"flex items-start justify-between gap-3 mb-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:cn("w-10 h-10 rounded-2xl bg-gradient-to-br flex items-center justify-center text-white font-black text-sm shadow-lg",f),children:u.name[0]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-black text-slate-900 text-sm",children:u.name}),jsxRuntimeExports.jsx("span",{className:"inline-block text-[9px] font-bold bg-slate-100 text-slate-500 px-2 py-0.5 rounded-full uppercase tracking-widest mt-0.5",children:d})]})]})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-500 italic leading-relaxed mb-3",children:['"',u.positioning,'"']}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 bg-indigo-50 rounded-2xl p-3 border border-indigo-100",children:[jsxRuntimeExports.jsx(Zap,{size:12,className:"text-indigo-500 shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-[9px] font-black text-indigo-600 uppercase tracking-widest block mb-0.5",children:"Your Edge"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-indigo-800 font-medium leading-relaxed",children:u.advantage})]})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-indigo-500/0 group-hover:bg-indigo-500/[0.02] transition-colors rounded-3xl pointer-events-none"})]})},IdeaValidation=({data:u})=>{const n=u.investability_score>85,s=u.investability_score<40,[f,d]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"relative flex flex-col md:flex-row items-center gap-8 bg-white p-10 rounded-[3rem] shadow-xl shadow-indigo-500/8 border border-indigo-50 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-50/40 blur-3xl rounded-full -translate-y-1/2 translate-x-1/2 pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-purple-50/30 blur-2xl rounded-full translate-y-1/2 -translate-x-1/2 pointer-events-none"}),jsxRuntimeExports.jsx(ScoreRing,{score:u.investability_score}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-4 relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Market Analysis"}),n&&jsxRuntimeExports.jsxs(motion.div,{initial:{scale:0,rotate:-12},animate:{scale:1,rotate:0},transition:{type:"spring",delay:1.5},className:"bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-4 py-1.5 rounded-full text-xs font-black shadow-lg shadow-emerald-200 flex items-center gap-1.5",children:[jsxRuntimeExports.jsx(Award,{size:12}),"PURR-FECT STARTUP IDEA "]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-black text-indigo-500 uppercase tracking-widest",children:"VC Confidence Index"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("button",{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),className:"text-slate-400 hover:text-indigo-500 transition-colors",children:jsxRuntimeExports.jsx(Info,{size:14})}),jsxRuntimeExports.jsx(AnimatePresence,{children:f&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:4,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:4,scale:.95},className:"absolute left-6 top-0 z-50 w-64 bg-slate-900 text-white text-xs rounded-2xl p-4 shadow-2xl font-medium leading-relaxed",children:["This score represents market viability, differentiation, and execution feasibility as assessed by our AI Co-Founder.",jsxRuntimeExports.jsx("div",{className:"absolute -left-1.5 top-3 w-3 h-3 bg-slate-900 rotate-45"})]})})]})]}),jsxRuntimeExports.jsx("p",{className:"text-base text-slate-600 leading-relaxed font-medium",children:u.summary}),jsxRuntimeExports.jsx("div",{className:"flex gap-3",children:[{label:"Viability",val:Math.min(100,u.investability_score+5)},{label:"Differentiation",val:Math.min(100,u.investability_score-8)},{label:"Feasibility",val:Math.min(100,u.investability_score+2)}].map(y=>jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400",children:y.label}),jsxRuntimeExports.jsxs("span",{className:"text-[9px] font-black text-indigo-500",children:[y.val,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"h-1.5 bg-slate-100 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx(motion.div,{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full",initial:{width:0},animate:{width:`${y.val}%`},transition:{duration:1.5,delay:.5,ease:"easeOut"}})})]},y.label))})]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.15},className:"relative bg-gradient-to-br from-slate-900 via-indigo-950 to-slate-900 p-8 rounded-[2.5rem] shadow-2xl overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 rounded-full bg-indigo-600/10 blur-3xl pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-8 -left-8 w-48 h-48 rounded-full bg-purple-600/10 blur-2xl pointer-events-none"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[jsxRuntimeExports.jsx("div",{className:"w-9 h-9 bg-indigo-600 rounded-2xl flex items-center justify-center shadow-lg shadow-indigo-900",children:jsxRuntimeExports.jsx(Star,{size:16,className:"text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-black text-indigo-400 uppercase tracking-widest",children:"AI Co-Founder Verdict"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-[9px] text-emerald-400 font-bold uppercase tracking-widest",children:"Live Analysis"})]})]})]}),jsxRuntimeExports.jsxs(motion.blockquote,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-white/90 text-base font-semibold leading-relaxed border-l-2 border-indigo-500 pl-5",children:['"',u.summary.length>200?u.summary.slice(0,200)+"...":u.summary,'"']}),jsxRuntimeExports.jsxs("div",{className:"mt-5 flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:["Market Fit","Scalable",n?"VC-Ready":"Needs Work"].map(y=>jsxRuntimeExports.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest bg-white/10 text-white/70 px-3 py-1.5 rounded-full",children:y},y))}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] text-slate-500 font-bold",children:"Confidence"}),jsxRuntimeExports.jsxs("span",{className:cn("text-lg font-black",n?"text-emerald-400":s?"text-orange-400":"text-indigo-400"),children:[u.investability_score,"/100"]})]})]})]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[jsxRuntimeExports.jsx(CircleCheck,{size:16,className:"text-indigo-500"}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest",children:"SWOT Analysis"}),jsxRuntimeExports.jsx("span",{className:"text-[9px] font-bold text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full uppercase tracking-widest",children:"Strategic Report"})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-br from-slate-50/60 to-indigo-50/30 rounded-[2.5rem] p-6 border border-slate-100/80 shadow-inner",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[jsxRuntimeExports.jsx(SWOTCard,{title:"Strengths",items:u.swot.strengths,icon:jsxRuntimeExports.jsx(TrendingUp,{size:18,className:"text-emerald-600"}),color:"emerald",delay:.1}),jsxRuntimeExports.jsx(SWOTCard,{title:"Weaknesses",items:u.swot.weaknesses,icon:jsxRuntimeExports.jsx(CircleAlert,{size:18,className:"text-amber-600"}),color:"amber",delay:.2}),jsxRuntimeExports.jsx(SWOTCard,{title:"Opportunities",items:u.swot.opportunities,icon:jsxRuntimeExports.jsx(Target,{size:18,className:"text-indigo-600"}),color:"indigo",delay:.3}),jsxRuntimeExports.jsx(SWOTCard,{title:"Threats",items:u.swot.threats,icon:jsxRuntimeExports.jsx(ShieldAlert,{size:18,className:"text-rose-600"}),color:"rose",delay:.4})]})})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-white p-8 rounded-[2.5rem] shadow-md shadow-indigo-500/5 border border-indigo-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-7",children:[jsxRuntimeExports.jsx("div",{className:"w-9 h-9 bg-indigo-50 rounded-2xl flex items-center justify-center",children:jsxRuntimeExports.jsx(Users,{size:16,className:"text-indigo-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Competitive Landscape"}),jsxRuntimeExports.jsxs("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:[u.competitors.length," competitors analyzed"]})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:u.competitors.map((y,_)=>jsxRuntimeExports.jsx(CompetitorCard,{comp:y,idx:_},_))}),jsxRuntimeExports.jsx(MarketPositionMap,{competitors:u.competitors})]})]})};var module$1={};(function u(n,s,f,d){var y=!!(n.Worker&&n.Blob&&n.Promise&&n.OffscreenCanvas&&n.OffscreenCanvasRenderingContext2D&&n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype.transferControlToOffscreen&&n.URL&&n.URL.createObjectURL),_=typeof Path2D=="function"&&typeof DOMMatrix=="function",A=(function(){if(!n.OffscreenCanvas)return!1;try{var we=new OffscreenCanvas(1,1),ge=we.getContext("2d");ge.fillRect(0,0,1,1);var De=we.transferToImageBitmap();ge.createPattern(De,"no-repeat")}catch{return!1}return!0})();function R(){}function I(we){var ge=s.exports.Promise,De=ge!==void 0?ge:n.Promise;return typeof De=="function"?new De(we):(we(R,R),null)}var G=(function(we,ge){return{transform:function(De){if(we)return De;if(ge.has(De))return ge.get(De);var ze=new OffscreenCanvas(De.width,De.height),He=ze.getContext("2d");return He.drawImage(De,0,0),ge.set(De,ze),ze},clear:function(){ge.clear()}}})(A,new Map),Y=(function(){var we=Math.floor(16.666666666666668),ge,De,ze={},He=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(ge=function(yt){var Ge=Math.random();return ze[Ge]=requestAnimationFrame(function lt(Mt){He===Mt||He+we-1<Mt?(He=Mt,delete ze[Ge],yt()):ze[Ge]=requestAnimationFrame(lt)}),Ge},De=function(yt){ze[yt]&&cancelAnimationFrame(ze[yt])}):(ge=function(yt){return setTimeout(yt,we)},De=function(yt){return clearTimeout(yt)}),{frame:ge,cancel:De}})(),q=(function(){var we,ge,De={};function ze(He){function yt(Ge,lt){He.postMessage({options:Ge||{},callback:lt})}He.init=function(lt){var Mt=lt.transferControlToOffscreen();He.postMessage({canvas:Mt},[Mt])},He.fire=function(lt,Mt,hn){if(ge)return yt(lt,null),ge;var Fn=Math.random().toString(36).slice(2);return ge=I(function(Vn){function ni(In){In.data.callback===Fn&&(delete De[Fn],He.removeEventListener("message",ni),ge=null,G.clear(),hn(),Vn())}He.addEventListener("message",ni),yt(lt,Fn),De[Fn]=ni.bind(null,{data:{callback:Fn}})}),ge},He.reset=function(){He.postMessage({reset:!0});for(var lt in De)De[lt](),delete De[lt]}}return function(){if(we)return we;if(!f&&y){var He=["var CONFETTI, SIZE = {}, module = {};","("+u.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{we=new Worker(URL.createObjectURL(new Blob([He])))}catch(yt){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",yt),null}ze(we)}return we}})(),K={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function Q(we,ge){return ge?ge(we):we}function ne(we){return we!=null}function te(we,ge,De){return Q(we&&ne(we[ge])?we[ge]:K[ge],De)}function J(we){return we<0?0:Math.floor(we)}function ie(we,ge){return Math.floor(Math.random()*(ge-we))+we}function re(we){return parseInt(we,16)}function le(we){return we.map(fe)}function fe(we){var ge=String(we).replace(/[^0-9a-f]/gi,"");return ge.length<6&&(ge=ge[0]+ge[0]+ge[1]+ge[1]+ge[2]+ge[2]),{r:re(ge.substring(0,2)),g:re(ge.substring(2,4)),b:re(ge.substring(4,6))}}function pe(we){var ge=te(we,"origin",Object);return ge.x=te(ge,"x",Number),ge.y=te(ge,"y",Number),ge}function de(we){we.width=document.documentElement.clientWidth,we.height=document.documentElement.clientHeight}function se(we){var ge=we.getBoundingClientRect();we.width=ge.width,we.height=ge.height}function he(we){var ge=document.createElement("canvas");return ge.style.position="fixed",ge.style.top="0px",ge.style.left="0px",ge.style.pointerEvents="none",ge.style.zIndex=we,ge}function Se(we,ge,De,ze,He,yt,Ge,lt,Mt){we.save(),we.translate(ge,De),we.rotate(yt),we.scale(ze,He),we.arc(0,0,1,Ge,lt,Mt),we.restore()}function ve(we){var ge=we.angle*(Math.PI/180),De=we.spread*(Math.PI/180);return{x:we.x,y:we.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:we.startVelocity*.5+Math.random()*we.startVelocity,angle2D:-ge+(.5*De-Math.random()*De),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:we.color,shape:we.shape,tick:0,totalTicks:we.ticks,decay:we.decay,drift:we.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:we.gravity*3,ovalScalar:.6,scalar:we.scalar,flat:we.flat}}function Re(we,ge){ge.x+=Math.cos(ge.angle2D)*ge.velocity+ge.drift,ge.y+=Math.sin(ge.angle2D)*ge.velocity+ge.gravity,ge.velocity*=ge.decay,ge.flat?(ge.wobble=0,ge.wobbleX=ge.x+10*ge.scalar,ge.wobbleY=ge.y+10*ge.scalar,ge.tiltSin=0,ge.tiltCos=0,ge.random=1):(ge.wobble+=ge.wobbleSpeed,ge.wobbleX=ge.x+10*ge.scalar*Math.cos(ge.wobble),ge.wobbleY=ge.y+10*ge.scalar*Math.sin(ge.wobble),ge.tiltAngle+=.1,ge.tiltSin=Math.sin(ge.tiltAngle),ge.tiltCos=Math.cos(ge.tiltAngle),ge.random=Math.random()+2);var De=ge.tick++/ge.totalTicks,ze=ge.x+ge.random*ge.tiltCos,He=ge.y+ge.random*ge.tiltSin,yt=ge.wobbleX+ge.random*ge.tiltCos,Ge=ge.wobbleY+ge.random*ge.tiltSin;if(we.fillStyle="rgba("+ge.color.r+", "+ge.color.g+", "+ge.color.b+", "+(1-De)+")",we.beginPath(),_&&ge.shape.type==="path"&&typeof ge.shape.path=="string"&&Array.isArray(ge.shape.matrix))we.fill(Ae(ge.shape.path,ge.shape.matrix,ge.x,ge.y,Math.abs(yt-ze)*.1,Math.abs(Ge-He)*.1,Math.PI/10*ge.wobble));else if(ge.shape.type==="bitmap"){var lt=Math.PI/10*ge.wobble,Mt=Math.abs(yt-ze)*.1,hn=Math.abs(Ge-He)*.1,Fn=ge.shape.bitmap.width*ge.scalar,Vn=ge.shape.bitmap.height*ge.scalar,ni=new DOMMatrix([Math.cos(lt)*Mt,Math.sin(lt)*Mt,-Math.sin(lt)*hn,Math.cos(lt)*hn,ge.x,ge.y]);ni.multiplySelf(new DOMMatrix(ge.shape.matrix));var In=we.createPattern(G.transform(ge.shape.bitmap),"no-repeat");In.setTransform(ni),we.globalAlpha=1-De,we.fillStyle=In,we.fillRect(ge.x-Fn/2,ge.y-Vn/2,Fn,Vn),we.globalAlpha=1}else if(ge.shape==="circle")we.ellipse?we.ellipse(ge.x,ge.y,Math.abs(yt-ze)*ge.ovalScalar,Math.abs(Ge-He)*ge.ovalScalar,Math.PI/10*ge.wobble,0,2*Math.PI):Se(we,ge.x,ge.y,Math.abs(yt-ze)*ge.ovalScalar,Math.abs(Ge-He)*ge.ovalScalar,Math.PI/10*ge.wobble,0,2*Math.PI);else if(ge.shape==="star")for(var qe=Math.PI/2*3,vn=4*ge.scalar,dn=8*ge.scalar,Mn=ge.x,je=ge.y,qn=5,An=Math.PI/qn;qn--;)Mn=ge.x+Math.cos(qe)*dn,je=ge.y+Math.sin(qe)*dn,we.lineTo(Mn,je),qe+=An,Mn=ge.x+Math.cos(qe)*vn,je=ge.y+Math.sin(qe)*vn,we.lineTo(Mn,je),qe+=An;else we.moveTo(Math.floor(ge.x),Math.floor(ge.y)),we.lineTo(Math.floor(ge.wobbleX),Math.floor(He)),we.lineTo(Math.floor(yt),Math.floor(Ge)),we.lineTo(Math.floor(ze),Math.floor(ge.wobbleY));return we.closePath(),we.fill(),ge.tick<ge.totalTicks}function Ee(we,ge,De,ze,He){var yt=ge.slice(),Ge=we.getContext("2d"),lt,Mt,hn=I(function(Fn){function Vn(){lt=Mt=null,Ge.clearRect(0,0,ze.width,ze.height),G.clear(),He(),Fn()}function ni(){f&&!(ze.width===d.width&&ze.height===d.height)&&(ze.width=we.width=d.width,ze.height=we.height=d.height),!ze.width&&!ze.height&&(De(we),ze.width=we.width,ze.height=we.height),Ge.clearRect(0,0,ze.width,ze.height),yt=yt.filter(function(In){return Re(Ge,In)}),yt.length?lt=Y.frame(ni):Vn()}lt=Y.frame(ni),Mt=Vn});return{addFettis:function(Fn){return yt=yt.concat(Fn),hn},canvas:we,promise:hn,reset:function(){lt&&Y.cancel(lt),Mt&&Mt()}}}function Oe(we,ge){var De=!we,ze=!!te(ge||{},"resize"),He=!1,yt=te(ge,"disableForReducedMotion",Boolean),Ge=y&&!!te(ge||{},"useWorker"),lt=Ge?q():null,Mt=De?de:se,hn=we&&lt?!!we.__confetti_initialized:!1,Fn=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Vn;function ni(qe,vn,dn){for(var Mn=te(qe,"particleCount",J),je=te(qe,"angle",Number),qn=te(qe,"spread",Number),An=te(qe,"startVelocity",Number),ri=te(qe,"decay",Number),On=te(qe,"gravity",Number),Be=te(qe,"drift",Number),Pe=te(qe,"colors",le),Ke=te(qe,"ticks",Number),Ft=te(qe,"shapes"),bn=te(qe,"scalar"),ln=!!te(qe,"flat"),Zn=pe(qe),Gn=Mn,fi=[],xi=we.width*Zn.x,wn=we.height*Zn.y;Gn--;)fi.push(ve({x:xi,y:wn,angle:je,spread:qn,startVelocity:An,color:Pe[Gn%Pe.length],shape:Ft[ie(0,Ft.length)],ticks:Ke,decay:ri,gravity:On,drift:Be,scalar:bn,flat:ln}));return Vn?Vn.addFettis(fi):(Vn=Ee(we,fi,Mt,vn,dn),Vn.promise)}function In(qe){var vn=yt||te(qe,"disableForReducedMotion",Boolean),dn=te(qe,"zIndex",Number);if(vn&&Fn)return I(function(An){An()});De&&Vn?we=Vn.canvas:De&&!we&&(we=he(dn),document.body.appendChild(we)),ze&&!hn&&Mt(we);var Mn={width:we.width,height:we.height};lt&&!hn&&lt.init(we),hn=!0,lt&&(we.__confetti_initialized=!0);function je(){if(lt){var An={getBoundingClientRect:function(){if(!De)return we.getBoundingClientRect()}};Mt(An),lt.postMessage({resize:{width:An.width,height:An.height}});return}Mn.width=Mn.height=null}function qn(){Vn=null,ze&&(He=!1,n.removeEventListener("resize",je)),De&&we&&(document.body.contains(we)&&document.body.removeChild(we),we=null,hn=!1)}return ze&&!He&&(He=!0,n.addEventListener("resize",je,!1)),lt?lt.fire(qe,Mn,qn):ni(qe,Mn,qn)}return In.reset=function(){lt&&lt.reset(),Vn&&Vn.reset()},In}var Ne;function ye(){return Ne||(Ne=Oe(null,{useWorker:!0,resize:!0})),Ne}function Ae(we,ge,De,ze,He,yt,Ge){var lt=new Path2D(we),Mt=new Path2D;Mt.addPath(lt,new DOMMatrix(ge));var hn=new Path2D;return hn.addPath(Mt,new DOMMatrix([Math.cos(Ge)*He,Math.sin(Ge)*He,-Math.sin(Ge)*yt,Math.cos(Ge)*yt,De,ze])),hn}function _e(we){if(!_)throw new Error("path confetti are not supported in this browser");var ge,De;typeof we=="string"?ge=we:(ge=we.path,De=we.matrix);var ze=new Path2D(ge),He=document.createElement("canvas"),yt=He.getContext("2d");if(!De){for(var Ge=1e3,lt=Ge,Mt=Ge,hn=0,Fn=0,Vn,ni,In=0;In<Ge;In+=2)for(var qe=0;qe<Ge;qe+=2)yt.isPointInPath(ze,In,qe,"nonzero")&&(lt=Math.min(lt,In),Mt=Math.min(Mt,qe),hn=Math.max(hn,In),Fn=Math.max(Fn,qe));Vn=hn-lt,ni=Fn-Mt;var vn=10,dn=Math.min(vn/Vn,vn/ni);De=[dn,0,0,dn,-Math.round(Vn/2+lt)*dn,-Math.round(ni/2+Mt)*dn]}return{type:"path",path:ge,matrix:De}}function Te(we){var ge,De=1,ze="#000000",He='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof we=="string"?ge=we:(ge=we.text,De="scalar"in we?we.scalar:De,He="fontFamily"in we?we.fontFamily:He,ze="color"in we?we.color:ze);var yt=10*De,Ge=""+yt+"px "+He,lt=new OffscreenCanvas(yt,yt),Mt=lt.getContext("2d");Mt.font=Ge;var hn=Mt.measureText(ge),Fn=Math.ceil(hn.actualBoundingBoxRight+hn.actualBoundingBoxLeft),Vn=Math.ceil(hn.actualBoundingBoxAscent+hn.actualBoundingBoxDescent),ni=2,In=hn.actualBoundingBoxLeft+ni,qe=hn.actualBoundingBoxAscent+ni;Fn+=ni+ni,Vn+=ni+ni,lt=new OffscreenCanvas(Fn,Vn),Mt=lt.getContext("2d"),Mt.font=Ge,Mt.fillStyle=ze,Mt.fillText(ge,In,qe);var vn=1/De;return{type:"bitmap",bitmap:lt.transferToImageBitmap(),matrix:[vn,0,0,vn,-Fn*vn/2,-Vn*vn/2]}}s.exports=function(){return ye().apply(this,arguments)},s.exports.reset=function(){ye().reset()},s.exports.create=Oe,s.exports.shapeFromPath=_e,s.exports.shapeFromText=Te})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),module$1,!1);const confetti=module$1.exports;module$1.exports.create;const RoadmapGenerator=({data:u})=>{const[n,s]=React.useState(null),[f,d]=React.useState(!1),y=()=>{navigator.clipboard.writeText(JSON.stringify(u,null,2)),d(!0),setTimeout(()=>d(!1),2e3)},_=()=>{window.print()},A=()=>{var te;s("github");const q=`#  MVP Project Vision: ${((te=u.strategic_summary)==null?void 0:te.substring(0,50))||"New Venture"}...

##  Strategic Overview
${u.strategic_summary||"Your AI Co-Founder has architected this roadmap to prioritize lean validation and core performance."}

##  Suggested Tech Stack
${u.suggested_tech_stack.map(J=>`- [ ] **${J}**`).join(`
`)}

##  Phase 1: Foundation (Week 1)
### Goals
${u.week_1.goals.map(J=>`- [ ] ${J}`).join(`
`)}
### Key Features
${u.week_1.features.map(J=>`- ${J}`).join(`
`)}

##  Phase 2: Core Product (Month 1)
### Goals
${u.month_1.goals.map(J=>`- [ ] ${J}`).join(`
`)}
### Key Features
${u.month_1.features.map(J=>`- ${J}`).join(`
`)}

##  Phase 3: Scale (Quarter 1)
### Goals
${u.quarter_1.goals.map(J=>`- [ ] ${J}`).join(`
`)}
### Key Features
${u.quarter_1.features.map(J=>`- ${J}`).join(`
`)}

---
*Generated by Startup Copilot  Your AI Co-Founder*`,K=new Blob([q],{type:"text/markdown"}),Q=URL.createObjectURL(K),ne=document.createElement("a");ne.href=Q,ne.download="MVP_ROADMAP.md",setTimeout(()=>{ne.click(),URL.revokeObjectURL(Q),s(null),confetti({particleCount:150,spread:100,origin:{y:.8},colors:["#6366f1","#a855f7","#d946ef"]})},1500)},R=()=>{s("notion"),setTimeout(()=>{s(null),confetti({particleCount:100,spread:50,origin:{y:.8},colors:["#000000","#6366f1"]}),window.open("https://www.notion.so/new","_blank")},1200)},I={Frontend:["React","Vue","Next.js","Tailwind","Vite","CSS","HTML","Flutter","React Native","Typescript","Javascript"],Backend:["Node","Python","Django","FastAPI","Go","Java","PHP","Rails","Express","Auth0","Firebase"],Infra:["AWS","Vercel","Docker","K8s","SQL","MongoDB","Redis","Postgres","Supabase","Cloudflare","Prisma"]},G={Frontend:u.suggested_tech_stack.filter(q=>I.Frontend.some(K=>q.toLowerCase().includes(K.toLowerCase()))),Backend:u.suggested_tech_stack.filter(q=>I.Backend.some(K=>q.toLowerCase().includes(K.toLowerCase()))),Infra:u.suggested_tech_stack.filter(q=>I.Infra.some(K=>q.toLowerCase().includes(K.toLowerCase())))},Y=u.suggested_tech_stack.filter(q=>!G.Frontend.includes(q)&&!G.Backend.includes(q)&&!G.Infra.includes(q));return jsxRuntimeExports.jsxs("div",{className:"space-y-16",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-indigo-600 via-indigo-700 to-violet-800 rounded-[2.5rem] p-8 md:p-12 text-white shadow-2xl shadow-indigo-200/50 relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2 blur-[100px]"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-indigo-400/20 rounded-full translate-y-1/2 -translate-x-1/2 blur-[80px]"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-8 mb-10",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-md shadow-inner",children:jsxRuntimeExports.jsx(Sparkles,{className:"text-amber-300 animate-pulse",size:24})}),jsxRuntimeExports.jsx("span",{className:"text-indigo-100 font-black tracking-[0.2em] uppercase text-[10px]",children:"Strategic AI Architecture"})]}),jsxRuntimeExports.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-white leading-tight",children:["MVP Alpha ",jsxRuntimeExports.jsx("span",{className:"text-indigo-200",children:"Roadmap"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-4",children:[jsxRuntimeExports.jsxs("button",{onClick:y,disabled:f,className:"flex items-center gap-2 px-5 py-2.5 bg-white/10 hover:bg-white/20 border border-white/20 rounded-2xl text-sm font-bold transition-all backdrop-blur-md active:scale-95 disabled:opacity-50",children:[f?jsxRuntimeExports.jsx(Check,{size:18,className:"text-emerald-400"}):jsxRuntimeExports.jsx(Copy,{size:18}),f?"Copied":"JSON Feed"]}),jsxRuntimeExports.jsxs("button",{onClick:_,className:"group flex items-center gap-2 px-6 py-2.5 bg-white text-indigo-700 hover:bg-indigo-50 rounded-2xl text-sm font-black transition-all shadow-xl shadow-indigo-950/20 active:scale-95",children:[jsxRuntimeExports.jsx(FileText,{size:18,className:"group-hover:rotate-6 transition-transform"}),"Export Investor PDF"]})]})]}),u.strategic_summary&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"max-w-4xl relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute -left-6 top-0 bottom-0 w-1 bg-gradient-to-b from-amber-400 to-transparent rounded-full opacity-50"}),jsxRuntimeExports.jsxs("p",{className:"text-indigo-50 text-xl md:text-2xl leading-relaxed font-medium italic pl-4",children:['"',u.strategic_summary,'"']})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-12 flex flex-wrap gap-6",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs("button",{onClick:A,disabled:n==="github",className:"flex items-center gap-2 px-4 py-2 bg-indigo-500/30 hover:bg-indigo-500/50 border border-indigo-400/30 rounded-xl text-xs font-black transition-all backdrop-blur-sm group disabled:opacity-50",children:[n==="github"?jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):jsxRuntimeExports.jsx(Github,{size:16,className:"text-indigo-200 group-hover:text-white transition-colors"}),n==="github"?"Generating Repo...":"Generate Github Repo",jsxRuntimeExports.jsx(ArrowRight,{size:14,className:"opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all"})]}),jsxRuntimeExports.jsxs("button",{onClick:R,disabled:n==="notion",className:"flex items-center gap-2 px-4 py-2 bg-indigo-500/30 hover:bg-indigo-500/50 border border-indigo-400/30 rounded-xl text-xs font-black transition-all backdrop-blur-sm group disabled:opacity-50",children:[n==="notion"?jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):jsxRuntimeExports.jsx(Rocket,{size:16,className:"text-indigo-200 group-hover:text-white transition-colors"}),n==="notion"?"Syncing...":"Sync to Notion",jsxRuntimeExports.jsx(ArrowRight,{size:14,className:"opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all"})]})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative pt-12 pb-20 px-4 md:px-0",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-8 md:left-1/2 top-0 bottom-0 w-1 bg-slate-100 -translate-x-1/2 hidden md:block rounded-full overflow-hidden",children:jsxRuntimeExports.jsx(motion.div,{initial:{height:0},whileInView:{height:"100%"},viewport:{once:!0},transition:{duration:2,ease:"easeInOut"},className:"w-full bg-gradient-to-b from-indigo-600 via-indigo-400 to-violet-500"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-32",children:[jsxRuntimeExports.jsx(TimelineItem,{title:"Foundation",phase:"PHASE 01",label:"Validate & Structure",data:u.week_1,icon:jsxRuntimeExports.jsx(Calendar,{className:"text-indigo-600"}),side:"left",progress:100,delay:.2}),jsxRuntimeExports.jsx(TimelineItem,{title:"Core Engine",phase:"PHASE 02",label:"Build MVP Core",data:u.month_1,icon:jsxRuntimeExports.jsx(Milestone,{className:"text-indigo-600"}),side:"right",progress:60,delay:.4}),jsxRuntimeExports.jsx(TimelineItem,{title:"Scale-Up",phase:"PHASE 03",label:"Optimize & Growth",data:u.quarter_1,icon:jsxRuntimeExports.jsx(Rocket,{className:"text-indigo-600"}),side:"left",progress:20,delay:.6})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white/50 backdrop-blur-xl p-10 rounded-[2.5rem] shadow-sm border border-indigo-50/50",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-8",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-indigo-600 rounded-2xl shadow-lg shadow-indigo-200",children:jsxRuntimeExports.jsx(Cpu,{className:"text-white",size:24})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-black text-slate-900 text-xl",children:"Architectural Stack"}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Industry-standard suggested stack"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsx(TechGroup,{title:"Frontend",icon:jsxRuntimeExports.jsx(PanelsTopLeft,{size:16}),items:G.Frontend,color:"indigo"}),jsxRuntimeExports.jsx(TechGroup,{title:"Backend",icon:jsxRuntimeExports.jsx(Server,{size:16}),items:G.Backend,color:"violet"}),jsxRuntimeExports.jsx(TechGroup,{title:"Infrastructure",icon:jsxRuntimeExports.jsx(Database,{size:16}),items:G.Infra,color:"blue"})]}),Y.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-100",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-4 block",children:"Auxiliary Tech"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:Y.map((q,K)=>jsxRuntimeExports.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 rounded-lg text-xs font-bold border border-slate-200",children:q},K))})]})]}),jsxRuntimeExports.jsxs(motion.div,{whileHover:{y:-5},className:"bg-white p-10 rounded-[2.5rem] shadow-xl shadow-rose-100/50 border-l-8 border-l-rose-500 border-y border-r border-rose-50 relative overflow-hidden group",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:jsxRuntimeExports.jsx(ShieldAlert,{size:120})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 bg-rose-50 rounded-2xl relative",children:[jsxRuntimeExports.jsx(ShieldAlert,{className:"text-rose-600 relative z-10",size:24}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-rose-400 rounded-2xl animate-ping opacity-20"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-black text-slate-900 text-xl",children:"Critical Risks"}),jsxRuntimeExports.jsx("p",{className:"text-rose-500 text-sm font-bold animate-pulse uppercase tracking-tighter text-[10px]",children:"High Priority Watchlist"})]})]}),jsxRuntimeExports.jsx("ul",{className:"space-y-4",children:u.risks_to_watch.map((q,K)=>jsxRuntimeExports.jsxs(motion.li,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},transition:{delay:K*.1},className:"group/item flex gap-4 p-4 rounded-2xl bg-slate-50 border border-slate-100 hover:bg-rose-50/50 hover:border-rose-100 transition-all",children:[jsxRuntimeExports.jsx("div",{className:"mt-1 p-1 bg-rose-100 rounded-lg group-hover/item:bg-rose-200 transition-colors",children:jsxRuntimeExports.jsx(TriangleAlert,{size:14,className:"text-rose-600"})}),jsxRuntimeExports.jsx("span",{className:"text-sm text-slate-700 font-semibold leading-relaxed",children:q})]},K))})]})]})]})},TimelineItem=({title:u,phase:n,label:s,data:f,icon:d,side:y,progress:_,delay:A})=>{const[R,I]=React.useState(!0);return jsxRuntimeExports.jsxs("div",{className:cn("relative flex flex-col md:flex-row items-start md:items-center gap-8 md:gap-16",y==="right"?"md:flex-row-reverse":""),children:[jsxRuntimeExports.jsx("div",{className:"absolute left-8 md:left-1/2 -track-x-1/2 md:-translate-x-1/2 top-0 md:top-1/2 md:-translate-y-1/2 z-20",children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:0},whileInView:{scale:1},viewport:{once:!0},className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-2xl bg-white border-[6px] border-indigo-100 flex items-center justify-center shadow-lg shadow-indigo-200/50",children:jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2},className:"w-3 h-3 rounded-full bg-indigo-600 shadow-[0_0_15px_rgba(79,70,229,0.5)]"})}),_<100&&_>0&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl bg-indigo-400 animate-ping opacity-20 scale-150"})]})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,x:y==="left"?-50:50,scale:.95},whileInView:{opacity:1,x:0,scale:1},viewport:{once:!0},transition:{duration:.6,delay:A},className:"w-full md:w-[calc(50%-2rem)] pl-16 md:pl-0",children:jsxRuntimeExports.jsxs(motion.div,{whileHover:{y:-8,scale:1.02},className:"group relative bg-white p-8 rounded-[2.5rem] shadow-xl shadow-slate-200/50 border border-slate-100 hover:border-indigo-200 transition-all duration-300 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r from-transparent via-indigo-400/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] font-black text-indigo-500 tracking-[0.2em]",children:n}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"h-1.5 w-24 bg-slate-100 rounded-full overflow-hidden hidden sm:block",children:jsxRuntimeExports.jsx(motion.div,{initial:{width:0},whileInView:{width:`${_}%`},className:"h-full bg-indigo-500"})}),jsxRuntimeExports.jsxs("span",{className:"text-[10px] font-bold text-slate-400",children:[_,"%"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("h3",{className:"font-black text-2xl text-slate-900 group-hover:text-indigo-600 transition-colors uppercase italic",children:u}),jsxRuntimeExports.jsx("div",{className:"px-2 py-0.5 bg-slate-50 rounded-lg border border-slate-100 group-hover:bg-indigo-50 group-hover:border-indigo-100 transition-colors",children:jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold text-slate-500 group-hover:text-indigo-500 uppercase",children:s})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("span",{className:"text-[10px] uppercase font-black text-slate-400 tracking-widest flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1 h-1 bg-indigo-400 rounded-full"}),"Primary Objectives"]}),jsxRuntimeExports.jsx("button",{onClick:()=>I(!R),className:"p-1 hover:bg-slate-100 rounded-lg transition-colors md:hidden",children:R?jsxRuntimeExports.jsx(ChevronUp,{size:14}):jsxRuntimeExports.jsx(ChevronDown,{size:14})})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:R&&jsxRuntimeExports.jsx(motion.ul,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"space-y-2.5 overflow-hidden",children:f.goals.map((G,Y)=>jsxRuntimeExports.jsxs("li",{className:"text-sm text-slate-600 font-semibold flex gap-3 group/li",children:[jsxRuntimeExports.jsx("div",{className:"mt-1.5 p-0.5 bg-indigo-50 rounded-md group-hover/li:bg-indigo-100 transition-colors",children:jsxRuntimeExports.jsx(Check,{size:10,className:"text-indigo-600"})}),G]},Y))})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("span",{className:"text-[10px] uppercase font-black text-slate-400 tracking-widest flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-1 h-1 bg-emerald-400 rounded-full"}),"Key Deliverables"]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:f.features.map((G,Y)=>jsxRuntimeExports.jsx(motion.span,{whileHover:{scale:1.05},className:"px-3 py-1 bg-emerald-50 text-emerald-700 rounded-xl text-[10px] font-black border border-emerald-100 hover:bg-emerald-100 transition-colors cursor-default",children:G},Y))})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-slate-50",children:jsxRuntimeExports.jsx(motion.div,{initial:{width:0},whileInView:{width:`${_}%`},transition:{duration:1,delay:A+.5},className:"h-full bg-indigo-500 opacity-20"})})]})}),jsxRuntimeExports.jsx("div",{className:"hidden md:block w-[calc(50%-2rem)]"})]})},TechGroup=({title:u,icon:n,items:s,color:f})=>{if(s.length===0)return null;const d={indigo:"bg-indigo-50 text-indigo-700 border-indigo-100",violet:"bg-violet-50 text-violet-700 border-violet-100",blue:"bg-blue-50 text-blue-700 border-blue-100"};return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[n,jsxRuntimeExports.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:u})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((y,_)=>jsxRuntimeExports.jsx(motion.span,{whileHover:{y:-2},className:cn("px-3 py-1 rounded-xl text-xs font-bold border transition-all",d[f]),children:y},_))})]})},CopyGenerator=({data:u,ideaName:n})=>{const s=(n==null?void 0:n.split(" ").slice(0,2).join(""))||"STARTUP",[f,d]=reactExports.useState(null),[y,_]=reactExports.useState(!1),[A,R]=reactExports.useState(!1),[I,G]=reactExports.useState(!1),[Y,q]=reactExports.useState("idle");reactExports.useEffect(()=>{_(!0);const fe=setTimeout(()=>{_(!1),R(!0),setTimeout(()=>R(!1),3e3)},1500);return()=>clearTimeout(fe)},[u]);const K=(fe,pe)=>{navigator.clipboard.writeText(fe),d(pe),setTimeout(()=>d(null),2e3)},Q=()=>{const fe=ie(),pe=new Blob([fe],{type:"text/html"}),de=URL.createObjectURL(pe),se=document.createElement("a");se.href=de,se.download=`${u.hero_headline.toLowerCase().replace(/\s+/g,"-")}-mvp.html`,se.click(),URL.revokeObjectURL(de)},ne=()=>{const fe=`
      STARTUP COPILOT - STRATEGY EXPORT
      =================================
      
      HERO HEADLINE:
      ${u.hero_headline}
      
      SUBHEADLINE:
      ${u.subheadline}
      
      VALUE PROPOSITIONS:
      ${u.value_props.map((he,Se)=>`${Se+1}. ${he}`).join(`
`)}
      
      CTA:
      ${u.cta}
      
      ELEVATOR PITCH SCRIPT:
      ${u.pitch_script}
      
      ---------------------------------
      Generated by Startup Copilot AI
    `,pe=new Blob([fe],{type:"text/plain"}),de=URL.createObjectURL(pe),se=document.createElement("a");se.href=de,se.download="copy-strategy.doc",se.click(),URL.revokeObjectURL(de)},te=()=>{G(!0),q("syncing"),setTimeout(()=>{q("success"),setTimeout(()=>{G(!1),q("idle"),alert(" Connected to Notion! Page created in 'Startup Workspace'.")},2e3)},3e3)},J=()=>{const fe=` Check out my startup elevator pitch generated by Startup Copilot AI:

"${u.pitch_script}"

Build your own at: start-up-copilot.vercel.app`,pe=encodeURIComponent(fe);window.open(`https://wa.me/?text=${pe}`,"_blank")},ie=()=>`
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${u.hero_headline} | MVP Launch</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { 
          font-family: 'Plus Jakarta Sans', sans-serif; 
          scroll-behavior: smooth;
        }
        .gradient-bg {
          background: radial-gradient(circle at top right, #ecfdf5 0%, #ffffff 100%);
        }
        .glass {
          background: rgba(255, 255, 255, 0.85);
          backdrop-filter: blur(16px);
          border: 1px solid rgba(255, 255, 255, 0.4);
        }
        .animate-in {
          animation: fadeUp 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
          opacity: 0;
        }
        @keyframes fadeUp {
          from { opacity: 0; transform: translateY(40px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .nav-link:hover::after {
          width: 100%;
        }
        .nav-link::after {
          content: '';
          position: absolute;
          bottom: -2px;
          left: 0;
          width: 0;
          height: 2px;
          background: #10b981;
          transition: width 0.3s ease;
        }
    </style>
</head>
<body class="bg-white text-slate-900 selection:bg-emerald-100 selection:text-emerald-900">
    <nav class="sticky top-0 z-50 glass px-6 py-4 flex justify-between items-center max-w-7xl mx-auto rounded-b-[2rem] shadow-sm border-x border-b">
        <div class="flex items-center gap-2 group cursor-pointer">
            <div class="w-10 h-10 bg-slate-900 rounded-2xl shadow-lg flex items-center justify-center transform group-hover:bg-emerald-500 transition-all duration-500">
              <svg class="text-white w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
            </div>
            <span class="font-black text-xl tracking-tighter uppercase">${s.slice(0,-3)}<span class="text-emerald-500">${s.slice(-3)}</span></span>
        </div>
        <div class="hidden md:flex items-center gap-8">
          <a href="#features" class="relative nav-link text-[10px] font-black uppercase tracking-widest text-slate-600">Solutions</a>
          <a href="#about" class="relative nav-link text-[10px] font-black uppercase tracking-widest text-slate-600">Company</a>
          <button onclick="handleCTA()" class="bg-emerald-600 text-white px-7 py-3 rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-xl shadow-emerald-200 hover:bg-slate-900 transition-all active:scale-95">
              Launch Now
          </button>
        </div>
    </nav>

    <main>
        <!-- Hero Section -->
        <section class="gradient-bg border-b border-slate-50 relative overflow-hidden">
          <div class="absolute inset-0 opacity-20 pointer-events-none" style="background-image: radial-gradient(#10b981 0.5px, transparent 0.5px); background-size: 24px 24px;"></div>
          <div class="max-w-6xl mx-auto px-6 py-32 text-center text-balance relative">
              <div class="inline-flex items-center gap-2 px-4 py-1.5 bg-emerald-50 border border-emerald-100 rounded-full mb-10 animate-in">
                  <span class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></span>
                  <span class="text-[9px] font-black text-emerald-700 uppercase tracking-[0.3em]">Live Platform Generation</span>
              </div>
              <h1 class="text-5xl md:text-8xl font-black text-slate-900 mb-8 leading-[0.95] tracking-tighter animate-in" style="animation-delay: 0.1s">
                  ${u.hero_headline}
              </h1>
              <p class="text-xl md:text-2xl text-slate-500 mb-14 max-w-3xl mx-auto leading-relaxed animate-in font-medium opacity-80" style="animation-delay: 0.2s">
                  ${u.subheadline}
              </p>
              <div class="flex flex-col sm:flex-row gap-5 justify-center animate-in" style="animation-delay: 0.3s">
                  <button onclick="handleCTA()" class="bg-emerald-600 text-white px-12 py-6 rounded-[2rem] font-black text-lg shadow-2xl shadow-emerald-100 hover:bg-slate-900 transition-all active:scale-95 flex items-center justify-center gap-3">
                      Start Your Journey
                      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                  </button>
                  <a href="#features" class="bg-white text-slate-900 px-12 py-6 rounded-[2rem] font-black text-lg border-2 border-slate-100 hover:border-emerald-200 transition-all flex items-center justify-center">
                      Explore Vision
                  </a>
              </div>
          </div>
        </section>

        <!-- Features Grid -->
        <section id="features" class="max-w-7xl mx-auto px-6 py-40">
            <div class="flex flex-col md:flex-row md:items-end justify-between gap-8 mb-24 animate-in">
              <div class="max-w-xl">
                <h2 class="text-4xl md:text-6xl font-black mb-6 tracking-tighter text-slate-900">Core Foundations.</h2>
                <p class="text-slate-500 text-lg font-medium opacity-80">We don't just build cards; we architect sustainable growth strategies for future-focused founders.</p>
              </div>
              <div class="hidden md:block h-[1px] flex-1 bg-slate-100 mb-6"></div>
            </div>
            <div class="grid md:grid-cols-3 gap-12">
                ${u.value_props.map((fe,pe)=>`
                    <div class="bg-slate-50 p-12 rounded-[4rem] border border-transparent hover:bg-white hover:border-emerald-100 hover:shadow-[0_40px_80px_-20px_rgba(16,185,129,0.15)] transition-all duration-700 group animate-in" style="animation-delay: ${.4+pe*.1}s">
                        <div class="w-16 h-16 bg-white rounded-3xl flex items-center justify-center mb-10 shadow-sm border border-slate-100 group-hover:scale-110 group-hover:bg-emerald-500 group-hover:text-white transition-all duration-500">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>
                        </div>
                        <h3 class="font-black text-2xl text-slate-900 mb-4 tracking-tight">Strategy ${pe+1}</h3>
                        <p class="text-slate-500 leading-relaxed font-medium text-lg italic opacity-85">"${fe}"</p>
                    </div>
                `).join("")}
            </div>
        </section>

        <!-- Testimonial Section -->
        <section id="about" class="py-32 bg-slate-900 rounded-[5rem] mx-6 mb-32 overflow-hidden relative shadow-2xl">
            <div class="absolute top-0 right-0 w-[500px] h-[500px] bg-emerald-500 rounded-full blur-[150px] opacity-20 -mr-64 -mt-64 text-emerald-500 animate-pulse"></div>
            <div class="absolute bottom-0 left-0 w-[500px] h-[500px] bg-slate-800 rounded-full blur-[150px] opacity-10 -ml-64 -mb-64"></div>
            
            <div class="max-w-4xl mx-auto px-6 text-center relative z-10">
                <div class="w-20 h-20 bg-emerald-500/10 rounded-full flex items-center justify-center mx-auto mb-10 border border-emerald-500/20">
                  <svg class="text-emerald-400 w-10 h-10" fill="currentColor" viewBox="0 0 20 20"><path d="M10.394 2.813a1 1 0 00-.458-.022l-7.141 1.428a1 1 0 00-.793.793L.575 12.154a1 1 0 00.707 1.183l7.141 1.428a1 1 0 001.183-.707l1.428-7.141a1 1 0 00-.707-1.183l-7.141-1.428z"></path></svg>
                </div>
                <p class="text-emerald-400 text-[10px] font-black uppercase tracking-[0.5em] mb-10">Global Recognition</p>
                <p class="text-3xl md:text-5xl font-black text-white mb-12 italic leading-[1.15] tracking-tight">
                    "This architecture enabled us to scale from concept to customers in record time. The precision of the value props is unmatched."
                </p>
                <div class="flex flex-col items-center gap-5">
                    <div class="w-20 h-20 bg-gradient-to-tr from-emerald-500 to-teal-500 rounded-full border-4 border-slate-800 shadow-xl overflow-hidden flex items-center justify-center">
                       <span class="text-white font-black text-2xl">SJ</span>
                    </div>
                    <div class="text-center">
                        <p class="text-white font-black text-xl tracking-tight">Sarah Jenkins</p>
                        <p class="text-emerald-500/60 text-[9px] font-black uppercase tracking-[0.2em]">CTO, TechSprint Global</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Final CTA -->
        <section class="max-w-5xl mx-auto px-6 py-40 text-center animate-in" style="animation-delay: 0.5s">
            <h2 class="text-5xl md:text-7xl font-black mb-12 tracking-tighter">Own the market.</h2>
            <button onclick="handleCTA()" class="bg-emerald-600 text-white px-14 py-7 rounded-[2.5rem] font-black text-xl shadow-[0_20px_40px_rgba(16,185,129,0.3)] hover:bg-slate-900 transition-all hover:scale-105 active:scale-95">
                Launch My Vision
            </button>
            <p class="mt-10 text-slate-400 font-bold text-xs uppercase tracking-[0.2em]">Limited early access slots available.</p>
        </section>
    </main>

    <footer class="py-24 text-center border-t border-slate-50 bg-white">
        <div class="flex justify-center gap-16 mb-12 font-black text-[9px] uppercase tracking-[0.3em] text-slate-400">
            <span class="cursor-pointer hover:text-emerald-600 transition-colors">Documentation</span>
            <span class="cursor-pointer hover:text-emerald-600 transition-colors">Security</span>
            <span class="cursor-pointer hover:text-emerald-600 transition-colors">API</span>
        </div>
        <p class="text-[10px] font-black text-slate-200 uppercase tracking-[1em] mb-6">${s} CORE</p>
        <div class="flex items-center justify-center gap-3">
          <div class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse shadow-[0_0_10px_rgba(16,185,129,0.5)]"></div>
          <span class="text-[8px] font-black text-slate-400 uppercase tracking-widest italic">Encrypted Connection Active</span>
        </div>
    </footer>

    <!-- INTERACTIVE SCRIPTS -->
    <script>
      function handleCTA() {
        const email = prompt("To deploy your version of ${u.hero_headline}, enter your secure email:");
        if (email) {
          alert(" Authentication Successful! Building your deployment environment for " + email + " now...");
        }
      }

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = "1";
            entry.target.classList.add('animate-in');
          }
        });
      }, { threshold: 0.1 });

      document.querySelectorAll('.animate-in').forEach(el => observer.observe(el));
    <\/script>
</body>
</html>`,re=Math.floor(80+Math.random()*15),le=[{label:"Clarity",val:92},{label:"Emotion",val:88},{label:"Conversion",val:84}];return jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-black text-slate-900 flex items-center gap-2 tracking-tighter uppercase italic",children:[jsxRuntimeExports.jsx(PanelsTopLeft,{className:"text-indigo-600"}),"MVP Website Architecture"]})}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-indigo-600 rounded-3xl p-6 text-white shadow-xl shadow-indigo-200 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-indigo-200 text-[10px] uppercase font-bold tracking-widest",children:"AI Copy Score"}),jsxRuntimeExports.jsxs("div",{className:"text-4xl font-black",children:[re,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-white/10 rounded-2xl backdrop-blur-md",children:jsxRuntimeExports.jsx(Trophy,{className:"text-yellow-400"})})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-4 border-t border-white/10 pt-4",children:le.map(fe=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-[10px] text-indigo-200 font-medium mb-1",children:fe.label}),jsxRuntimeExports.jsx("div",{className:"h-1.5 bg-white/10 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx(motion.div,{initial:{width:0},animate:{width:`${fe.val}%`},transition:{duration:1,delay:.5},className:"h-full bg-white"})})]},fe.label))})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -mr-16 -mt-16 blur-3xl"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx(CopyBlock,{label:"Hero Headline",content:u.hero_headline,onCopy:()=>K(u.hero_headline,"headline"),isCopied:f==="headline"}),jsxRuntimeExports.jsx(CopyBlock,{label:"Subheadline",content:u.subheadline,onCopy:()=>K(u.subheadline,"sub"),isCopied:f==="sub"}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 group",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] uppercase font-bold text-indigo-500",children:"Value Propositions"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold px-2 py-0.5 bg-orange-50 text-orange-600 rounded-full",children:[jsxRuntimeExports.jsx(Flame,{size:8})," High Impact"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold px-2 py-0.5 bg-blue-50 text-blue-600 rounded-full",children:[jsxRuntimeExports.jsx(Zap,{size:8})," Fast Dev"]})]})]}),jsxRuntimeExports.jsx("ul",{className:"space-y-4",children:u.value_props.map((fe,pe)=>jsxRuntimeExports.jsxs(motion.li,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:pe*.1},className:"flex items-start gap-3 group/item hover:bg-slate-50 p-3 -m-3 rounded-2xl transition-all border border-transparent hover:border-slate-100",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,damping:20,delay:pe*.1+.2},className:"mt-1 p-1 bg-indigo-50 rounded-lg group-hover/item:bg-indigo-100 transition-colors",children:jsxRuntimeExports.jsx(Check,{size:12,className:"text-indigo-600"})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-700 font-medium leading-relaxed",children:fe})]},pe))})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 p-8 rounded-[2rem] shadow-xl relative overflow-hidden group border-l-4 border-indigo-500",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-4 right-6",children:jsxRuntimeExports.jsx("span",{className:"text-[10px] font-black text-white px-3 py-1 bg-indigo-500 rounded-full uppercase tracking-tighter",children:"Investor Ready"})}),jsxRuntimeExports.jsx(Quote,{className:"text-slate-700 absolute -left-2 -top-2",size:80}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx("span",{className:"text-indigo-400 text-[10px] uppercase font-bold mb-4 block",children:"Elevator Pitch Script"}),jsxRuntimeExports.jsx("div",{className:"flex gap-4",children:jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{className:"text-white text-lg font-medium leading-relaxed italic mb-6",children:['"',u.pitch_script,'"']}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>K(u.pitch_script,"pitch"),className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-xl text-xs font-bold transition-all border border-white/5",children:[f==="pitch"?jsxRuntimeExports.jsx(Check,{size:14,className:"text-emerald-400"}):jsxRuntimeExports.jsx(Copy,{size:14}),"Copy Script"]}),jsxRuntimeExports.jsxs("button",{onClick:J,className:"flex items-center gap-2 px-4 py-2 bg-indigo-500/20 hover:bg-indigo-500/30 text-indigo-300 rounded-xl text-xs font-bold transition-all border border-indigo-500/30",children:[jsxRuntimeExports.jsx(Share2,{size:14}),"Share"]})]})]})})]})]})]}),jsxRuntimeExports.jsx("div",{className:"pt-4 border-t border-slate-100",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsxs("button",{onClick:Q,className:"flex items-center gap-2 px-4 py-3 bg-white border border-slate-200 text-slate-600 rounded-2xl text-[10px] font-black uppercase hover:bg-slate-50 hover:border-indigo-200 transition-all shadow-sm active:scale-95",children:[jsxRuntimeExports.jsx(Download,{size:14})," landing.html"]}),jsxRuntimeExports.jsx("button",{onClick:te,disabled:I,className:cn("flex items-center gap-2 px-4 py-3 border rounded-2xl text-[10px] font-black uppercase transition-all shadow-sm active:scale-95 relative overflow-hidden",Y==="success"?"bg-emerald-50 border-emerald-200 text-emerald-600":I?"bg-slate-50 border-slate-100 text-slate-400 cursor-wait":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50 hover:border-indigo-200"),children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:I?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.2},className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:jsxRuntimeExports.jsx(ExternalLink,{size:14})}),"Syncing..."]},"syncing"):Y==="success"?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Synced!"]},"success"):jsxRuntimeExports.jsxs(motion.div,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ExternalLink,{size:14})," Sync to Notion"]},"idle")})}),jsxRuntimeExports.jsxs("button",{onClick:ne,className:"flex items-center gap-2 px-4 py-3 bg-white border border-slate-200 text-slate-600 rounded-2xl text-[10px] font-black uppercase hover:bg-slate-50 hover:border-indigo-200 transition-all shadow-sm active:scale-95",children:[jsxRuntimeExports.jsx(Check,{size:14})," Copy as .doc"]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6 flex flex-col items-center",children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2 w-full",children:[jsxRuntimeExports.jsx(PanelsTopLeft,{size:16}),"Visual Preview"]}),jsxRuntimeExports.jsxs("div",{className:"relative w-full flex justify-center py-12 bg-slate-50 rounded-[3rem] border-2 border-dashed border-slate-200 min-h-[700px]",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-[10%] -left-[10%] w-[40%] h-[40%] bg-indigo-100 rounded-full blur-[100px] opacity-50"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-[10%] -right-[10%] w-[40%] h-[40%] bg-blue-100 rounded-full blur-[100px] opacity-50"})]}),jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:y&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"absolute top-24 z-50 flex items-center gap-3 bg-white/90 backdrop-blur-sm px-6 py-3 rounded-2xl shadow-xl border border-indigo-100",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-indigo-600 rounded-full animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-black text-indigo-600 uppercase tracking-widest",children:"AI is Rewriting..."}),jsxRuntimeExports.jsx("div",{className:"flex gap-1",children:[0,1,2].map(fe=>jsxRuntimeExports.jsx(motion.div,{animate:{opacity:[.3,1,.3]},transition:{duration:1,repeat:1/0,delay:fe*.2},className:"w-1 h-1 bg-indigo-300 rounded-full"},fe))})]})}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{rotateX:2,rotateY:5,scale:1.01,transition:{duration:.3}},className:"sticky top-8 bg-slate-900 shadow-[0_50px_100px_-20px_rgba(0,0,0,0.3)] transition-all duration-700 ease-in-out border-8 border-slate-800 overflow-hidden rounded-[3rem] p-4 aspect-[9/19] w-[320px]",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white h-full w-full rounded-[1.5rem] overflow-hidden relative flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"h-6 bg-slate-50 flex items-center px-4 gap-1 border-b border-slate-100 flex-shrink-0",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-rose-400"}),jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-400"}),jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"}),jsxRuntimeExports.jsxs("div",{className:"ml-2 flex-1 flex items-center justify-center relative",children:[jsxRuntimeExports.jsxs("div",{className:"bg-slate-200/50 h-3 w-full max-w-[200px] rounded-full flex items-center px-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1 h-1 bg-slate-400 rounded-full mr-1.5"}),jsxRuntimeExports.jsx("div",{className:"bg-slate-300 h-1 w-24 rounded-full"})]}),jsxRuntimeExports.jsxs("div",{className:"absolute right-0 flex items-center gap-1.5",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-[7px] font-black text-emerald-600 uppercase tracking-tighter",children:"Live"})]})]})]}),jsxRuntimeExports.jsx("div",{className:cn("flex-1 transition-all duration-500 overflow-hidden",y?"blur-md opacity-50 grayscale":"blur-0 opacity-100 grayscale-0"),children:jsxRuntimeExports.jsx("iframe",{title:"MVP Preview",className:"w-full h-full border-none",srcDoc:ie()})}),jsxRuntimeExports.jsx(AnimatePresence,{children:A&&jsxRuntimeExports.jsx(motion.div,{initial:{scale:2,opacity:0,rotate:20},animate:{scale:1,opacity:1,rotate:-15},exit:{opacity:0,scale:.5},className:"absolute bottom-10 right-10 z-50 pointer-events-none",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"bg-emerald-500 text-white p-3 rounded-full shadow-2xl flex items-center gap-2 border-4 border-white",children:[jsxRuntimeExports.jsx(Cat,{size:24}),jsxRuntimeExports.jsx("span",{className:"font-black text-xs uppercase italic tracking-tighter",children:"Approved!"})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:3},animate:{opacity:.4,scale:1},className:"absolute inset-0 bg-emerald-500 rounded-full blur-xl -z-10"})]})})})]}),jsxRuntimeExports.jsx(motion.div,{className:"absolute -bottom-8 -right-8 text-indigo-900 p-2 opacity-20 pointer-events-none",animate:{y:[0,-10,0],rotate:[0,5,0]},transition:{duration:4,repeat:1/0},children:jsxRuntimeExports.jsx(Cat,{size:64})})]})]})]})]})},CopyBlock=({label:u,content:n,onCopy:s,isCopied:f})=>jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 group relative hover:border-indigo-100 transition-all",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] uppercase font-bold text-indigo-500",children:u}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:jsxRuntimeExports.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-50 rounded-xl transition-colors text-slate-400 hover:text-indigo-600",children:f?jsxRuntimeExports.jsx(Check,{size:16,className:"text-emerald-500"}):jsxRuntimeExports.jsx(Copy,{size:16})})})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-800 font-bold text-lg leading-tight uppercase tracking-tight",children:n})]}),ResultsView=({idea:u,audience:n,competitors:s,onReset:f})=>{const[d,y]=reactExports.useState(!0),[_,A]=reactExports.useState("validating"),[R,I]=reactExports.useState(null),[G,Y]=reactExports.useState(null),[q,K]=reactExports.useState(null),[Q,ne]=reactExports.useState(null);return reactExports.useEffect(()=>{(async()=>{try{A("validating");const J=await validateIdea(u,n,s);I(J),await new Promise(le=>setTimeout(le,2e3)),A("roadmap");const ie=await generateRoadmap(u,"saas");Y(ie),await new Promise(le=>setTimeout(le,2e3)),A("copy");const re=await generateCopy(u,n,"bold");K(re),await new Promise(le=>setTimeout(le,1e3)),A("complete"),y(!1)}catch(J){console.error(J),ne(J.message||"Something went wrong during generation"),y(!1)}})()},[u,n,s]),Q?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-[#FDFDFF]",children:jsxRuntimeExports.jsxs("div",{className:"bg-white p-12 rounded-[3.5rem] shadow-xl border border-rose-100 text-center space-y-6 max-w-md",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-rose-50 rounded-3xl flex items-center justify-center text-rose-500 mx-auto",children:jsxRuntimeExports.jsx(CircleCheck,{size:40,className:"rotate-45"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Analysis Interrupted"}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 font-medium",children:Q}),jsxRuntimeExports.jsx("button",{onClick:f,className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-black",children:"Try Again"})]})}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-[#FDFDFF] pb-32",children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 pointer-events-none opacity-40",children:jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-full h-96 bg-gradient-to-b from-indigo-50/50 to-transparent"})}),jsxRuntimeExports.jsx("header",{className:"sticky top-0 z-[50] bg-white/80 backdrop-blur-xl border-b border-slate-100 px-8 py-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("img",{src:"/src/public/images/logo.png",alt:"Logo",className:"h-16 w-auto object-contain"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-sm font-black text-indigo-600 uppercase tracking-[0.2em] leading-none",children:"STARTUP COPILOT"}),jsxRuntimeExports.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Project Analysis"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:f,className:"px-6 py-3 bg-slate-50 hover:bg-slate-100 text-slate-600 rounded-2xl text-xs font-black uppercase tracking-widest transition-all",children:"New Project"}),jsxRuntimeExports.jsx("button",{onClick:()=>{__vitePreload(async()=>{const{signOut:te}=await Promise.resolve().then(()=>index_esm);return{signOut:te}},void 0).then(({signOut:te})=>{__vitePreload(async()=>{const{auth:J}=await Promise.resolve().then(()=>firebase);return{auth:J}},void 0).then(({auth:J})=>{J&&te(J)})})},className:"px-6 py-3 bg-white border border-slate-100 hover:border-rose-100 hover:bg-rose-50/30 text-slate-400 hover:text-rose-500 rounded-2xl text-xs font-black uppercase tracking-widest transition-all shadow-sm",children:"Sign Out"})]})]})}),jsxRuntimeExports.jsxs("main",{className:"max-w-5xl mx-auto px-6 py-12 space-y-24",children:[jsxRuntimeExports.jsx(AnimatePresence,{children:R&&jsxRuntimeExports.jsxs(motion.section,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-indigo-600 text-white rounded-full text-xs font-black uppercase tracking-[0.2em] shadow-lg shadow-indigo-100",children:"Step 1: Validation"}),jsxRuntimeExports.jsx("div",{className:"h-px flex-grow bg-slate-100"})]}),jsxRuntimeExports.jsx(IdeaValidation,{data:R})]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:G&&jsxRuntimeExports.jsxs(motion.section,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-violet-600 text-white rounded-full text-xs font-black uppercase tracking-[0.2em] shadow-lg shadow-violet-100",children:"Step 2: Strategic Roadmap"}),jsxRuntimeExports.jsx("div",{className:"h-px flex-grow bg-slate-100"})]}),jsxRuntimeExports.jsx(RoadmapGenerator,{data:G})]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:q&&jsxRuntimeExports.jsxs(motion.section,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-emerald-600 text-white rounded-full text-xs font-black uppercase tracking-[0.2em] shadow-lg shadow-emerald-100",children:"Step 3: Launch Copy"}),jsxRuntimeExports.jsx("div",{className:"h-px flex-grow bg-slate-100"})]}),jsxRuntimeExports.jsx(CopyGenerator,{data:q,ideaName:u.split(":")[0]})]})}),d&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin mb-4"}),jsxRuntimeExports.jsxs("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-[0.3em]",children:[_==="validating"&&"Analyzing Market Dynamics...",_==="roadmap"&&"Architecting Execution Strategy...",_==="copy"&&"Crafting Conversion Narrative..."]})]}),!d&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20 text-center space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-emerald-50 text-emerald-500 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(CircleCheck,{size:40})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Full Strategy Complete! "}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 font-medium",children:"Your AI Co-Founder has finished the initial marathon."})]}),jsxRuntimeExports.jsx("button",{onClick:f,className:"px-10 py-5 bg-slate-900 text-white rounded-[2rem] font-black text-sm uppercase tracking-widest hover:bg-slate-800 transition-all shadow-xl shadow-slate-200",children:"Start New Project"})]})]}),jsxRuntimeExports.jsx("div",{className:"fixed bottom-10 left-1/2 -translate-x-1/2 z-[100]",children:jsxRuntimeExports.jsx(AnimatePresence,{children:d&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"bg-white px-8 py-4 rounded-full shadow-[0_20px_50px_rgba(0,0,0,0.15)] border border-slate-100 flex items-center gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:cn("w-3 h-3 rounded-full",_==="validating"?"bg-indigo-600 animate-pulse":"bg-emerald-500")}),jsxRuntimeExports.jsx("span",{className:cn("text-[10px] font-black uppercase tracking-widest",_==="validating"?"text-indigo-600":"text-slate-400"),children:"Validate"})]}),jsxRuntimeExports.jsx("div",{className:"w-4 h-px bg-slate-100"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:cn("w-3 h-3 rounded-full",_==="roadmap"?"bg-violet-600 animate-pulse":G?"bg-emerald-500":"bg-slate-200")}),jsxRuntimeExports.jsx("span",{className:cn("text-[10px] font-black uppercase tracking-widest",_==="roadmap"?"text-violet-600":"text-slate-400"),children:"Roadmap"})]}),jsxRuntimeExports.jsx("div",{className:"w-4 h-px bg-slate-100"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:cn("w-3 h-3 rounded-full",_==="copy"?"bg-emerald-600 animate-pulse":q?"bg-emerald-500":"bg-slate-200")}),jsxRuntimeExports.jsx("span",{className:cn("text-[10px] font-black uppercase tracking-widest",_==="copy"?"text-emerald-600":"text-slate-400"),children:"Copy"})]})]})})}),jsxRuntimeExports.jsx(CatMascot,{isGenerating:d,soundEnabled:!0})]})},logo="/assets/logo-CRNOL2uL.png",WelcomeScreen=({userName:u,project:n,onContinue:s,onNewIdea:f,onViewAll:d,isBestProject:y})=>jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-[#FDFDFF] flex items-center justify-center relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[55%] h-[55%] bg-indigo-200/20 blur-[160px] rounded-full animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[55%] h-[55%] bg-violet-200/20 blur-[160px] rounded-full animate-pulse",style:{animationDelay:"2s"}})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.7,ease:"easeOut"},className:"relative z-10 w-full max-w-3xl px-8 py-10 space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("img",{src:logo,alt:"Startup Copilot",className:"h-10 w-auto object-contain"}),jsxRuntimeExports.jsxs("h1",{className:"text-5xl font-black text-slate-900 tracking-tight leading-tight",children:["Welcome back,"," ",jsxRuntimeExports.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-violet-600 bg-clip-text text-transparent",children:[u," "]})]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},className:"relative overflow-hidden p-8 bg-gradient-to-br from-slate-900 to-slate-800 rounded-3xl text-white shadow-2xl shadow-slate-300/30 group",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-[0.07] group-hover:opacity-[0.12] transition-opacity duration-700",children:jsxRuntimeExports.jsx(Rocket,{size:110})}),jsxRuntimeExports.jsxs("div",{className:"space-y-5 relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-[0.4em]",children:"Continue building"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-black uppercase italic leading-tight",children:n.name})]}),y&&jsxRuntimeExports.jsx(motion.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.5},className:"shrink-0 bg-emerald-500/20 border border-emerald-500/30 px-3 py-2 rounded-xl",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Shield,{size:11,className:"text-emerald-400"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-widest",children:"AI Pick: Top Potential"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Validation Score"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-black text-indigo-400",children:n.validationScore})]}),jsxRuntimeExports.jsx("div",{className:"h-1.5 bg-white/10 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx(motion.div,{initial:{width:0},animate:{width:`${n.validationScore}%`},transition:{delay:.8,duration:1.4,ease:"easeOut"},className:"h-full bg-indigo-500"})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Execution Confidence"}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-black text-emerald-400",children:[n.executionConfidence,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"h-1.5 bg-white/10 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx(motion.div,{initial:{width:0},animate:{width:`${n.executionConfidence}%`},transition:{delay:1,duration:1.4,ease:"easeOut"},className:"h-full bg-emerald-500"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between pt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full"}),jsxRuntimeExports.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["Last edited: ",new Date(n.lastUpdated).toLocaleDateString()]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>s(n),className:"flex items-center gap-2 px-5 py-2.5 bg-white text-slate-900 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-slate-50 transition-all hover:gap-3",children:["Continue Building ",jsxRuntimeExports.jsx(ChevronRight,{size:14})]})]})]})]}),y&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-9 h-9 bg-emerald-50 rounded-xl flex items-center justify-center text-emerald-500 shrink-0",children:jsxRuntimeExports.jsx(TrendingUp,{size:18})}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-medium text-slate-500 normal-case leading-relaxed",children:[jsxRuntimeExports.jsx("span",{className:"font-black text-slate-700 uppercase italic mr-2 text-[10px] tracking-widest",children:"AI Intelligence:"}),"We've analyzed all your ventures. This project holds the"," ",jsxRuntimeExports.jsx("span",{className:"text-emerald-600 font-bold",children:"highest execution potential"})," based on market gaps and validation scores."]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.4},className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("button",{onClick:f,className:"flex items-center justify-center gap-3 py-5 px-6 bg-indigo-50 hover:bg-indigo-100 rounded-2xl text-indigo-700 transition-all group/new",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center shadow-sm group-hover/new:scale-110 transition-transform",children:jsxRuntimeExports.jsx(Plus,{size:16,className:"text-indigo-600"})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-black uppercase tracking-widest",children:"Start New Idea"})]}),jsxRuntimeExports.jsxs("button",{onClick:d,className:"flex items-center justify-center gap-3 py-5 px-6 bg-white border border-slate-100 hover:border-indigo-300 rounded-2xl text-slate-500 hover:text-indigo-600 transition-all group/all",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-slate-50 group-hover/all:bg-indigo-50 rounded-lg flex items-center justify-center transition-colors",children:jsxRuntimeExports.jsx(PanelsTopLeft,{size:16})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-black uppercase tracking-widest italic",children:"View All Projects"})]})]})]}),jsxRuntimeExports.jsx(motion.div,{className:"fixed bottom-42 right-52 z-50 flex flex-col items-end gap-1",initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{type:"spring",stiffness:80,damping:18,delay:.7},children:jsxRuntimeExports.jsx("div",{className:"w-4 h-4",children:jsxRuntimeExports.jsx(CopilotCat,{mode:y?"happy":"login"})})})]}),ContinueDraftScreen=({onContinue:u,onNewIdea:n,onExplore:s})=>jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-[#FDFDFF] flex items-center justify-center p-6 relative overflow-hidden italic",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] bg-indigo-200/10 blur-[150px] rounded-full"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] bg-violet-200/10 blur-[150px] rounded-full"})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-xl text-center space-y-12 relative z-10",children:[jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs("h1",{className:"text-5xl font-black text-slate-900 tracking-tight leading-tight uppercase",children:["Still thinking? ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-violet-600 bg-clip-text text-transparent",children:"Lets build something today."})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("button",{onClick:u,className:"w-full group relative p-8 bg-indigo-600 rounded-[2.5rem] text-white flex items-center justify-between overflow-hidden shadow-2xl shadow-indigo-200 transition-all hover:scale-[1.02]",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center",children:jsxRuntimeExports.jsx(CirclePlay,{size:24})}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] opacity-60",children:"Resume Draft"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-black uppercase",children:"Continue Last Idea"})]})]}),jsxRuntimeExports.jsx(ArrowRight,{size:24,className:"group-hover:translate-x-2 transition-transform"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("button",{onClick:n,className:"p-8 bg-white border border-slate-100 rounded-[2.5rem] flex flex-col items-center gap-4 hover:border-indigo-600 transition-all group",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-indigo-50 text-indigo-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",children:jsxRuntimeExports.jsx(Lightbulb,{size:20})}),jsxRuntimeExports.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-slate-900",children:"Start Project"})]}),jsxRuntimeExports.jsxs("button",{onClick:s,className:"p-8 bg-white border border-slate-100 rounded-[2.5rem] flex flex-col items-center gap-4 hover:border-violet-600 transition-all group",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-violet-50 text-violet-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",children:jsxRuntimeExports.jsx(Sparkles,{size:20})}),jsxRuntimeExports.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-slate-900",children:"Explore Ideas"})]})]})]})]})]});function Dashboard(){const{user:u,profile:n,projects:s,refreshProfile:f}=useAuth(),[d,y]=reactExports.useState(null),[_,A]=reactExports.useState("routing"),[R,I]=reactExports.useState({});reactExports.useEffect(()=>{if(n)if(s.length>0)A("welcome");else if(n.onboardingComplete)A("welcome");else{const Q=localStorage.getItem("onboarding_draft_status");A(Q?"continue_draft":"onboarding")}},[n,s.length,u==null?void 0:u.uid]);const G=async Q=>{if(!u||!db)return;const ne=await addDoc(collection(db,"users",u.uid,"projects"),{name:Q.idea.split(":")[0]||"My Stealth Startup",idea:Q.idea,audience:Q.audience,competitors:Q.competitors||"",validationScore:Math.floor(Math.random()*20)+70,executionConfidence:Math.floor(Math.random()*15)+75,lastUpdated:Date.now()});await updateDoc(doc(db,"users",u.uid),{onboardingComplete:!0,lastActiveProjectId:ne.id}),localStorage.removeItem("onboarding_draft_status"),await f(),y({id:ne.id,name:Q.idea.split(":")[0]||"My Stealth Startup",idea:Q.idea,audience:Q.audience,competitors:Q.competitors||"",validationScore:80,executionConfidence:82,lastUpdated:Date.now()}),A("results")},Y=()=>{I({step:"welcome",flow:null}),A("onboarding")},q=Q=>{y(Q),A("results")},K=()=>A("history");return _==="routing"?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#FDFDFF]",children:jsxRuntimeExports.jsx(CatMascot,{isGenerating:!0,soundEnabled:!0})}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-[#FDFDFF] overflow-x-hidden relative",children:[(_==="welcome"||_==="continue_draft")&&jsxRuntimeExports.jsx("div",{className:"fixed top-8 right-8 z-[100]",children:jsxRuntimeExports.jsxs("button",{onClick:()=>signOut(auth),className:"group flex items-center gap-3 px-6 py-3 bg-white/80 backdrop-blur-xl border border-slate-100 hover:border-rose-100 hover:bg-rose-50/30 text-slate-400 hover:text-rose-500 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-slate-100",children:[jsxRuntimeExports.jsx(LogOut,{size:16,className:"group-hover:-translate-x-1 transition-transform"})," Sign Out"]})}),jsxRuntimeExports.jsxs(AnimatePresence,{mode:"wait",children:[_==="welcome"&&s.length>0&&(()=>{var ne;const Q=[...s].sort((te,J)=>J.validationScore+J.executionConfidence-(te.validationScore+te.executionConfidence))[0];return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:jsxRuntimeExports.jsx(WelcomeScreen,{userName:(u==null?void 0:u.displayName)||((ne=u==null?void 0:u.email)==null?void 0:ne.split("@")[0])||"Founder",project:Q,onContinue:q,onNewIdea:Y,onViewAll:K,isBestProject:s.length>1})},"welcome")})(),_==="welcome"&&s.length===0&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:jsxRuntimeExports.jsx(ContinueDraftScreen,{onContinue:()=>A("onboarding"),onNewIdea:Y,onExplore:()=>{I({step:"create_step1",flow:"help_create"}),A("onboarding")}})},"no-projects"),_==="continue_draft"&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:jsxRuntimeExports.jsx(ContinueDraftScreen,{onContinue:()=>A("onboarding"),onNewIdea:Y,onExplore:()=>{I({step:"create_step1",flow:"help_create"}),A("onboarding")}})},"draft"),_==="onboarding"&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full",children:jsxRuntimeExports.jsx(OnboardingFlow,{onComplete:G,onBackToDashboard:()=>A(s.length>0?"welcome":"routing"),initialStep:R.step,initialFlow:R.flow})},"onboarding"),_==="results"&&d&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:jsxRuntimeExports.jsx(ResultsView,{idea:d.idea,audience:d.audience,competitors:d.competitors,onReset:()=>A("welcome")})},"results"),_==="history"&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},className:"max-w-6xl mx-auto px-6 py-20 space-y-20",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>A("welcome"),className:"p-4 hover:bg-slate-50 rounded-2xl transition-all",children:jsxRuntimeExports.jsx(History,{size:24,className:"rotate-180"})}),jsxRuntimeExports.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tight italic uppercase leading-none",children:"Journal"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>A("welcome"),className:"text-xs font-black uppercase text-indigo-600 tracking-widest bg-slate-50 px-6 py-3 rounded-xl hover:bg-slate-100 transition-all",children:"Back to Launchpad"}),jsxRuntimeExports.jsx("button",{onClick:()=>signOut(auth),className:"px-6 py-3 bg-white border border-slate-100 hover:border-rose-100 hover:bg-rose-50/30 text-slate-400 hover:text-rose-500 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all shadow-sm",children:"Sign Out"})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(Q=>jsxRuntimeExports.jsxs("button",{onClick:()=>q(Q),className:"group p-10 bg-white border border-slate-100 hover:border-indigo-600 rounded-[3rem] text-left space-y-4 transition-all hover:shadow-2xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-black italic uppercase group-hover:text-indigo-600 transition-colors",children:Q.name}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-sm line-clamp-2 normal-case leading-relaxed",children:Q.idea}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 pt-6 mt-4 border-t border-slate-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"text-[8px] font-black text-slate-300 uppercase tracking-[0.2em]",children:"Score"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-black text-indigo-600",children:Q.validationScore})]}),jsxRuntimeExports.jsx("div",{className:"h-8 w-px bg-slate-50"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"text-[8px] font-black text-slate-300 uppercase tracking-[0.2em]",children:"Confidence"}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-black text-emerald-500",children:[Q.executionConfidence,"%"]})]})]})]},Q.id))})]},"history")]})]})}function App(){return jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(LandingPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(AuthPage,{mode:"login"})}),jsxRuntimeExports.jsx(Route,{path:"/signup",element:jsxRuntimeExports.jsx(AuthPage,{mode:"signup"})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Dashboard,{})})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/"})})]})})})}const ProtectedRoute=({children:u})=>{const{user:n,loading:s}=useAuth();return s?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#FDFDFF]",children:jsxRuntimeExports.jsx("div",{className:"w-12 h-12 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin"})}):n?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:u}):jsxRuntimeExports.jsx(Navigate,{to:"/login"})};clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
